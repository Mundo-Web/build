import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as u}from"./index-BOnQTV8N.js";import{C as b}from"./Number2Currency-jIsa99f9.js";import{A as q}from"./index-BZvh78jk.js";import{m as _}from"./proxy-B0QLMKEh.js";import{S as H}from"./shopping-bag-C59bLmNC.js";import{X as B}from"./x-fof_H3Vv.js";import{C as A}from"./calendar-BSC6xbA7.js";import{T}from"./trash-2-DU7LB6-f.js";import{M as U}from"./moon-BU5XInRR.js";import{U as V}from"./users-w-WaEtvX.js";import{C as X}from"./chevron-down-uIVDLcM-.js";import{S as R}from"./shopping-cart-DLRnxGTD.js";import{U as D}from"./user-BZB1h7Cv.js";import{M as Y}from"./menu-CVuOXpGZ.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./General-apRuNwp7.js";import"./createLucideIcon-DfjclApS.js";const G=({data:o,cart:p=[],setCart:N,modalOpen:y,setModalOpen:g})=>{const M=u.useRef(null),r=(o==null?void 0:o.accentColor)||"#78673A",w=(o==null?void 0:o.bgColor)||"#281409",x=p.filter(t=>t.type==="booking"),m=p.filter(t=>t.type!=="booking"),L=x.reduce((t,a)=>t+parseFloat(a.total_price||0),0),S=m.reduce((t,a)=>t+parseFloat(a.final_price||a.price||0)*parseInt(a.quantity||1),0),C=L+S,k=x.length+m.reduce((t,a)=>t+a.quantity,0);u.useEffect(()=>{const t=a=>{a.key==="Escape"&&g(!1)};return y&&(document.addEventListener("keydown",t),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",t),document.body.style.overflow="unset"}},[y,g]);const P=t=>{t.target===t.currentTarget&&g(!1)},$=(t,a,i)=>{const E=p.filter(f=>f.type==="booking"?!(f.id===t&&f.check_in===a&&f.check_out===i):!0);N(E)},z=t=>{const a=p.filter(i=>i.id!==t||i.type==="booking");N(a)},j=t=>t?new Date(t+"T00:00:00").toLocaleDateString("es-PE",{weekday:"short",day:"2-digit",month:"short"}):"",F=(t,a)=>{if(!t||!a)return 0;const i=new Date(t),E=new Date(a);return Math.ceil((E-i)/(1e3*60*60*24))};return e.jsx(q,{children:y&&e.jsxs(_.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 z-[9999] flex items-start justify-end",onClick:P,children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),e.jsxs(_.div,{ref:M,initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:300},className:"relative h-full w-full max-w-md shadow-2xl flex flex-col",style:{backgroundColor:w},children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",style:{borderColor:`${r}33`},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(H,{size:24,style:{color:r}}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:"Mi Carrito"}),e.jsxs("p",{className:"text-sm text-gray-400",children:[k," ",k===1?"item":"items"]})]})]}),e.jsx("button",{onClick:()=>g(!1),className:"p-2 rounded-full hover:bg-white/10 transition-colors",children:e.jsx(B,{size:24,className:"text-gray-400"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:p.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-12",children:[e.jsx(H,{size:64,className:"text-gray-600 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Tu carrito está vacío"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Explora nuestras habitaciones y realiza tu reserva"}),e.jsx("a",{href:"/#habitaciones",onClick:()=>g(!1),className:"px-6 py-3 rounded-lg text-white font-semibold transition-all hover:opacity-90",style:{backgroundColor:r},children:"Ver Habitaciones"})]}):e.jsxs(e.Fragment,{children:[x.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider flex items-center gap-2",children:[e.jsx(A,{size:16}),"Reservas (",x.length,")"]}),x.map((t,a)=>e.jsxs(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-100},className:"rounded-xl overflow-hidden border",style:{backgroundColor:`${r}11`,borderColor:`${r}33`},children:[e.jsxs("div",{className:"flex gap-3 p-3",children:[e.jsx("div",{className:"w-20 h-20 rounded-lg overflow-hidden flex-shrink-0",children:e.jsx("img",{src:t.image?`/storage/images/item/${t.image}`:"/assets/img/noimage/no_img.jpg",alt:t.name,className:"w-full h-full object-cover",onError:i=>{i.target.src="/assets/img/noimage/no_img.jpg"}})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-white truncate",children:t.name}),e.jsx("p",{className:"text-sm text-gray-400",children:t.room_type||"Habitación"}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:e.jsxs("span",{className:"text-lg font-bold",style:{color:r},children:[b()," ",parseFloat(t.total_price||0).toFixed(2)]})})]}),e.jsx("button",{onClick:()=>$(t.id,t.check_in,t.check_out),className:"p-2 h-fit rounded-full hover:bg-red-500/20 transition-colors group",children:e.jsx(T,{size:18,className:"text-gray-400 group-hover:text-red-500"})})]}),e.jsxs("div",{className:"px-3 py-2 grid grid-cols-3 gap-2 text-sm border-t",style:{backgroundColor:`${r}08`,borderColor:`${r}22`},children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(A,{size:14,style:{color:r}}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Check-in"}),e.jsx("p",{className:"text-white font-medium",children:j(t.check_in)})]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(A,{size:14,style:{color:r}}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Check-out"}),e.jsx("p",{className:"text-white font-medium",children:j(t.check_out)})]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(U,{size:14,style:{color:r}}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Noches"}),e.jsx("p",{className:"text-white font-medium",children:t.nights||F(t.check_in,t.check_out)})]})]})]}),e.jsxs("div",{className:"px-3 py-2 flex items-center justify-between text-sm border-t",style:{borderColor:`${r}22`},children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-gray-400",children:[e.jsx(V,{size:14}),e.jsxs("span",{children:[t.guests," huésped",t.guests!==1?"es":""]})]}),e.jsxs("div",{className:"text-gray-400 text-xs",children:[b()," ",parseFloat(t.price||0).toFixed(2)," / noche"]})]})]},`${t.id}-${t.check_in}-${a}`))]}),m.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider flex items-center gap-2",children:[e.jsx(H,{size:16}),"Productos (",m.length,")"]}),m.map((t,a)=>e.jsxs(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex gap-3 p-3 rounded-xl border",style:{backgroundColor:`${r}11`,borderColor:`${r}33`},children:[e.jsx("div",{className:"w-16 h-16 rounded-lg overflow-hidden flex-shrink-0",children:e.jsx("img",{src:t.image?`/storage/images/item/${t.image}`:"/assets/img/noimage/no_img.jpg",alt:t.name,className:"w-full h-full object-cover",onError:i=>{i.target.src="/assets/img/noimage/no_img.jpg"}})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-white truncate text-sm",children:t.name}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Cant: ",t.quantity]}),e.jsxs("span",{className:"font-bold",style:{color:r},children:[b()," ",(parseFloat(t.final_price||t.price)*t.quantity).toFixed(2)]})]}),e.jsx("button",{onClick:()=>z(t.id),className:"p-2 h-fit rounded-full hover:bg-red-500/20 transition-colors group",children:e.jsx(T,{size:16,className:"text-gray-400 group-hover:text-red-500"})})]},`${t.id}-${a}`))]})]})}),p.length>0&&e.jsxs("div",{className:"p-4 border-t space-y-4",style:{borderColor:`${r}33`},children:[e.jsxs("div",{className:"space-y-2",children:[x.length>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Subtotal reservas"}),e.jsxs("span",{className:"text-white",children:[b()," ",L.toFixed(2)]})]}),m.length>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Subtotal productos"}),e.jsxs("span",{className:"text-white",children:[b()," ",S.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold pt-2 border-t",style:{borderColor:`${r}33`},children:[e.jsx("span",{className:"text-white",children:"Total"}),e.jsxs("span",{style:{color:r},children:[b()," ",C.toFixed(2)]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("a",{href:"/cart",className:"block w-full py-3 text-center text-white font-semibold rounded-lg transition-all hover:opacity-90",style:{backgroundColor:r},children:"Ir al Carrito"}),e.jsx("a",{href:"/checkout",className:"block w-full py-3 text-center font-semibold rounded-lg border transition-all hover:bg-white/5",style:{borderColor:r,color:r},children:"Proceder al Pago"})]}),e.jsx("p",{className:"text-xs text-gray-500 text-center",children:"Las reservas están sujetas a disponibilidad"})]})]})]})})},he=({data:o,items:p,pages:N,generals:y=[],cart:g=[],setCart:M,isUser:r})=>{const[w,x]=u.useState(!1),[m,L]=u.useState(!1),[S,C]=u.useState(!1),[k,P]=u.useState(!1),$=u.useRef(null);u.useEffect(()=>{P((()=>{const c=window.location.pathname;return c==="/"||c==="/home"||c==="/inicio"})())},[]);const z=y.find(s=>s.correlative==="phone_whatsapp");z==null||z.description;const j=y.find(s=>s.correlative==="header_menu_order"),F=(j==null?void 0:j.description)??null,a=(()=>{if(!F)return[...(p||[]).map(n=>({type:"category",data:n})),...(N||[]).filter(n=>n.menuable).map(n=>({type:"page",data:n}))];const s=F.split(",").map(n=>n.trim()).filter(Boolean),c=[];return s.forEach(n=>{const d=(p||[]).find(h=>h.alias&&h.alias.toLowerCase()===n.toLowerCase()||h.name.toLowerCase()===n.toLowerCase());if(d){c.push({type:"category",data:d});return}const l=(N||[]).find(h=>h.menuable&&h.name.toLowerCase()===n.toLowerCase());l&&c.push({type:"page",data:l})}),c})(),i=g.reduce((s,c)=>c.type==="booking"?s+1:s+Number(c.quantity||1),0);u.useEffect(()=>{const s=()=>{L(window.scrollY>50)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]),u.useEffect(()=>{function s(c){$.current&&!$.current.contains(c.target)&&x(!1)}return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]);const E=(o==null?void 0:o.logoAlt)||"Hotel La Petaca",f=(o==null?void 0:o.bgColor)||"#281409",v=(o==null?void 0:o.accentColor)||"#78673A";return e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:`w-full top-0 left-0 right-0 z-50 transition-all duration-300 ${k?`fixed ${m?"backdrop-blur-md shadow-lg":"bg-transparent"}`:`${m?"fixed shadow-lg":"relative"}`}`,style:{backgroundColor:k?m?`${f}f2`:"transparent":f},children:[e.jsx("div",{className:"max-w-7xl mx-auto px-[5%] 2xl:px-0",children:e.jsxs("div",{className:"flex items-center justify-between h-20",children:[e.jsx("a",{href:"/",className:"flex items-center space-x-3 group",children:e.jsx("div",{className:"relative",children:e.jsx("img",{src:`/assets/resources/logo.png?v=${crypto.randomUUID()}`,alt:E,className:"h-12 w-auto transition-transform group-hover:scale-110",onError:s=>{s.target.onerror=null,s.target.src="/assets/img/logo-bk.svg"}})})}),e.jsxs("nav",{className:"hidden md:flex items-center gap-6",children:[a.map((s,c)=>{var n,d;if(s.type==="category"){const l=s.data;return e.jsxs("div",{className:"relative group",children:[e.jsxs("a",{href:`/catalogo?category=${l.slug}`,className:"flex items-center gap-1 text-sm font-medium tracking-wide transition-all duration-300 text-gray-300 hover:text-white",children:[l.alias||l.name,((n=l.subcategories)==null?void 0:n.length)>0&&e.jsx(X,{size:14,className:"transition-transform duration-200 group-hover:rotate-180"})]}),((d=l.subcategories)==null?void 0:d.length)>0&&e.jsx("div",{className:"absolute top-full left-0 w-48 pt-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:e.jsx("div",{className:"rounded-lg shadow-xl overflow-hidden border border-white/10",style:{backgroundColor:f},children:l.subcategories.map(h=>e.jsx("a",{href:`/catalogo?subcategory=${h.slug}`,className:"block px-4 py-3 text-sm text-gray-300 hover:text-white transition-colors duration-300",style:{":hover":{backgroundColor:v}},onMouseEnter:I=>I.target.style.backgroundColor=v,onMouseLeave:I=>I.target.style.backgroundColor="transparent",children:h.name},h.id))})})]},`cat-${l.id}`)}else if(s.type==="page"){const l=s.data;return e.jsxs("a",{href:l.path,className:"text-sm font-medium tracking-wide transition-all duration-300 relative group text-gray-300 hover:text-white",children:[l.name,e.jsx("span",{className:"absolute -bottom-1 left-0 w-full h-0.5 transform origin-left transition-transform duration-300 scale-x-0 group-hover:scale-x-100",style:{backgroundColor:v}})]},`page-${l.id||c}`)}return null}),e.jsxs("button",{onClick:()=>C(!0),className:"relative p-2 rounded-full transition-all duration-300 hover:bg-white/10","aria-label":"Carrito de compras",children:[e.jsx(R,{size:22,className:"text-gray-300 hover:text-white"}),i>0&&e.jsx("span",{className:"absolute -top-1 -right-1 text-white text-xs font-bold w-5 h-5 flex items-center justify-center rounded-full",style:{backgroundColor:v},children:i>99?"99+":i})]}),r?e.jsx("a",{href:"/profile",className:"p-2 rounded-full transition-all duration-300 hover:bg-white/10","aria-label":"Mi perfil",children:e.jsx(D,{size:22,className:"text-gray-300 hover:text-white"})}):e.jsx("a",{href:"/iniciar-sesion",className:"p-2 rounded-full transition-all duration-300 hover:bg-white/10","aria-label":"Iniciar sesión",children:e.jsx(D,{size:22,className:"text-gray-300 hover:text-white"})})]}),e.jsxs("div",{className:"flex md:hidden items-center gap-3",children:[e.jsxs("button",{onClick:()=>C(!0),className:"relative p-2 rounded-full transition-all duration-300","aria-label":"Carrito de compras",children:[e.jsx(R,{size:22,className:"text-gray-300"}),i>0&&e.jsx("span",{className:"absolute -top-1 -right-1 text-white text-xs font-bold w-5 h-5 flex items-center justify-center rounded-full",style:{backgroundColor:v},children:i>99?"99+":i})]}),e.jsx("button",{className:"p-2 transition-colors rounded-full hover:bg-white/10",style:{color:v},onClick:()=>x(!w),children:w?e.jsx(B,{size:24}):e.jsx(Y,{size:24})})]})]})}),e.jsx(q,{children:w&&e.jsx(_.div,{ref:$,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},className:"md:hidden fixed inset-0 backdrop-blur-lg",style:{top:"80px",backgroundColor:`${f}fa`},children:e.jsxs("nav",{className:"flex flex-col items-center justify-center h-full space-y-6 pb-20",children:[a.map((s,c)=>{var n;if(s.type==="category"){const d=s.data;return e.jsxs("div",{className:"text-center",children:[e.jsx("a",{href:`/catalogo?category=${d.slug}`,className:"text-xl font-medium tracking-wide transition-all duration-300 text-gray-300 hover:text-white",onClick:()=>x(!1),children:d.alias||d.name}),((n=d.subcategories)==null?void 0:n.length)>0&&e.jsx("div",{className:"mt-2 space-y-1",children:d.subcategories.map(l=>e.jsx("a",{href:`/catalogo?subcategory=${l.slug}`,className:"block text-sm text-gray-400 hover:text-white transition-colors",onClick:()=>x(!1),children:l.name},l.id))})]},`mobile-cat-${d.id}`)}else if(s.type==="page"){const d=s.data;return e.jsx("a",{href:d.path,className:"text-xl font-medium tracking-wide transition-all duration-300 text-gray-300 hover:text-white",onClick:()=>x(!1),children:d.name},`mobile-page-${d.id||c}`)}return null}),e.jsxs("a",{href:r?"/profile":"/iniciar-sesion",className:"flex items-center gap-2 text-xl font-medium tracking-wide transition-all duration-300 text-gray-300 hover:text-white",onClick:()=>x(!1),children:[e.jsx(D,{size:20}),r?"Mi Perfil":"Iniciar Sesión"]})]})})})]}),e.jsx(G,{data:o,cart:g,setCart:M,modalOpen:S,setModalOpen:C})]})};export{he as default};
