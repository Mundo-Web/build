import{r as e,j as t,C as a}from"./vendor-react-CIhVE-fi.js";import"./Footer-hpJm2-lL.js";import{S as s}from"./StoresRest-r6aViFPL.js";import{A as r,m as i}from"./vendor-motion-iF4wNZTr.js";import"./vendor-swiper-Cr_RrIb_.js";import"./BasicRest-CNjqr-ae.js";import"./OpenPayCardModal-K84_M_7u.js";import"./BooleanLimit-q2Ad9fGY.js";const l=({pages:l=[],items:n,data:o,visible:c=!1})=>{const[d,x]=e.useState(null),[m,h]=e.useState(!1),[u,p]=e.useState([]),[g,w]=e.useState([]),[y,C]=e.useState(null),[b,f]=e.useState(!1),[j,v]=e.useState(null),N=e.useRef(null),k=e.useRef(null);e.useEffect(()=>{(async()=>{try{const e=new s,t=await e.paginate({status:!0,visible:!0});t&&Array.isArray(t.data)&&p(t.data)}catch(e){}})(),(async()=>{try{const e=await fetch("/ubigeo.json");if(e.ok){const t=await e.json();Array.isArray(t)&&w(t)}}catch(e){}})()},[]);const M=u?.filter(e=>{const t="tienda"===e.type||"tienda_principal"===e.type,a=!0===e.visible||1===e.visible,s=!0===e.status||1===e.status;return t&&a&&s})||[];e.useEffect(()=>{if(M.length>0&&!y){const e=M.find(e=>"tienda_principal"===e.type);C(e||M[0])}},[M,y]);const E=e=>e&&g.length?g.find(t=>t.reniec==e):null;e.useEffect(()=>{const e=e=>{N.current&&!N.current.contains(e.target)&&(x(null),h(!1),f(!1),v(null))};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);const S=()=>{k.current=setTimeout(()=>{x(null)},300)},$=()=>{k.current&&clearTimeout(k.current)},Z=()=>{h(!m),x(null),f(!1),v(null)},T=e=>e?.subcategories||[],z=n&&n.length>0?[...n].sort((e,t)=>e.name.localeCompare(t.name)):[],A=window.innerWidth<1024,L=!A||c;return t.jsx("nav",{id:o?.element_id||null,ref:N,className:"block relative w-full bg-secondary text-white font-medium text-sm",style:{background:o?.backgroundColor||"bg-secondary"},children:t.jsx("div",{className:"px-primary 2xl:px-0 2xl:max-w-7xl mx-auto w-full",children:t.jsx("div",{className:"flex items-center justify-between",children:L&&t.jsx(t.Fragment,{children:A?t.jsxs("div",{className:"flex items-center justify-between w-full",children:[t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:()=>{f(!b),v(null),h(!1)},className:"flex items-center gap-2 px-4 py-3 hover:bg-white/10 transition-all duration-300 whitespace-nowrap",children:[t.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("path",{d:"M1.66675 15.0003C1.66675 13.7167 1.66675 13.0747 1.95569 12.6032C2.11736 12.3394 2.33919 12.1176 2.60302 11.9559C3.07453 11.667 3.71638 11.667 5.00008 11.667C6.28378 11.667 6.92563 11.667 7.39714 11.9559C7.66097 12.1176 7.8828 12.3394 8.04447 12.6032C8.33341 13.0747 8.33341 13.7167 8.33341 15.0003C8.33341 16.284 8.33341 16.9259 8.04447 17.3974C7.8828 17.6612 7.66097 17.8831 7.39714 18.0447C6.92563 18.3337 6.28378 18.3337 5.00008 18.3337C3.71638 18.3337 3.07453 18.3337 2.60302 18.0447C2.33919 17.8831 2.11736 17.6612 1.95569 17.3974C1.66675 16.9259 1.66675 16.284 1.66675 15.0003Z",stroke:"white","stroke-width":"1.25"}),t.jsx("path",{d:"M11.6667 15.0003C11.6667 13.7167 11.6667 13.0747 11.9557 12.6032C12.1173 12.3394 12.3392 12.1176 12.603 11.9559C13.0745 11.667 13.7164 11.667 15.0001 11.667C16.2837 11.667 16.9257 11.667 17.3972 11.9559C17.661 12.1176 17.8828 12.3394 18.0445 12.6032C18.3334 13.0747 18.3334 13.7167 18.3334 15.0003C18.3334 16.284 18.3334 16.9259 18.0445 17.3974C17.8828 17.6612 17.661 17.8831 17.3972 18.0447C16.9257 18.3337 16.2837 18.3337 15.0001 18.3337C13.7164 18.3337 13.0745 18.3337 12.603 18.0447C12.3392 17.8831 12.1173 17.6612 11.9557 17.3974C11.6667 16.9259 11.6667 16.284 11.6667 15.0003Z",stroke:"white","stroke-width":"1.25"}),t.jsx("path",{d:"M1.66675 5.00033C1.66675 3.71663 1.66675 3.07478 1.95569 2.60327C2.11736 2.33943 2.33919 2.11761 2.60302 1.95593C3.07453 1.66699 3.71638 1.66699 5.00008 1.66699C6.28378 1.66699 6.92563 1.66699 7.39714 1.95593C7.66097 2.11761 7.8828 2.33943 8.04447 2.60327C8.33341 3.07478 8.33341 3.71663 8.33341 5.00033C8.33341 6.28403 8.33341 6.92588 8.04447 7.39738C7.8828 7.66122 7.66097 7.88304 7.39714 8.04472C6.92563 8.33366 6.28378 8.33366 5.00008 8.33366C3.71638 8.33366 3.07453 8.33366 2.60302 8.04472C2.33919 7.88304 2.11736 7.66122 1.95569 7.39738C1.66675 6.92588 1.66675 6.28403 1.66675 5.00033Z",stroke:"white","stroke-width":"1.25"}),t.jsx("path",{d:"M11.6667 5.00033C11.6667 3.71663 11.6667 3.07478 11.9557 2.60327C12.1173 2.33943 12.3392 2.11761 12.603 1.95593C13.0745 1.66699 13.7164 1.66699 15.0001 1.66699C16.2837 1.66699 16.9257 1.66699 17.3972 1.95593C17.661 2.11761 17.8828 2.33943 18.0445 2.60327C18.3334 3.07478 18.3334 3.71663 18.3334 5.00033C18.3334 6.28403 18.3334 6.92588 18.0445 7.39738C17.8828 7.66122 17.661 7.88304 17.3972 8.04472C16.9257 8.33366 16.2837 8.33366 15.0001 8.33366C13.7164 8.33366 13.0745 8.33366 12.603 8.04472C12.3392 7.88304 12.1173 7.66122 11.9557 7.39738C11.6667 6.92588 11.6667 6.28403 11.6667 5.00033Z",stroke:"white","stroke-width":"1.25"})]}),"Categorías",t.jsx(a,{className:"w-3 h-3 transition-transform duration-200 "+(b?"rotate-180":"")})]}),t.jsxs(r,{children:[b&&t.jsx(i.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},className:"absolute top-full left-0 mt-1 bg-white text-gray-800 border border-gray-200 rounded-lg shadow-lg z-20 w-full max-w-md max-h-96 overflow-y-auto",children:t.jsx("div",{className:"py-2",children:z.map(e=>{const a=T(e).length>0;return t.jsx("div",{className:"relative",children:a?t.jsx("div",{className:"flex items-center",children:t.jsxs("a",{href:`/catalogo?category=${e.slug}`,className:"flex-1 flex items-center gap-2 px-4 py-3 text-sm hover:bg-gray-50  transition-colors duration-200",children:[e.image&&t.jsx("div",{className:"rounded-full min-w-6 max-w-6 min-h-6 max-h-6 overflow-hidden   flex items-center justify-center bg-secondary",children:t.jsx("img",{src:`/storage/images/category/${e.image}`,alt:e.name,className:"w-4 h-4 filter brightness-0 invert",onError:e=>e.target.style.display="none"})}),e.name]})}):t.jsxs("a",{href:`/catalogo?category=${e.slug}`,className:"block px-4 py-3 text-sm hover:bg-gray-50 hover:text-red-600 transition-colors duration-200",children:[e.image&&t.jsx("div",{className:"rounded-full min-w-6 max-w-6 min-h-6 max-h-6 overflow-hidden   flex items-center justify-center bg-secondary",children:t.jsx("img",{src:`/storage/images/category/${e.image}`,alt:e.name,className:"w-4 h-4 filter brightness-0 invert",onError:e=>e.target.style.display="none"})}),e.name]})},e.id)})})}),t.jsx(r,{children:j&&t.jsx(i.div,{initial:{opacity:0,x:-20,scale:.9},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:-20,scale:.9},transition:{duration:.25},className:"absolute top-0 left-full ml-2 bg-white text-gray-800 border border-gray-200 rounded-lg shadow-xl z-[70] min-w-[250px] max-w-[350px] max-h-80 overflow-y-auto",style:{boxShadow:"0 10px 25px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"},children:(()=>{const e=z.find(e=>e.id===j),a=T(e);return a&&0!==a.length?t.jsxs("div",{className:"py-2",children:[t.jsxs("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-200",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:e?.name}),t.jsx("p",{className:"text-xs text-gray-500",children:"Subcategorías"})]}),a.map((e,a)=>t.jsx("a",{href:`/catalogo?subcategory=${e.slug}`,className:"block px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 transition-all duration-200 border-b border-gray-50 last:border-b-0",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"w-2 h-2 bg-red-400 rounded-full flex-shrink-0"}),t.jsx("span",{className:"truncate",children:e.name})]})},e.id))]}):null})()})})]})]}),M.length>0&&t.jsxs("div",{className:"relative ml-4",children:[t.jsxs("button",{onClick:Z,className:"flex items-center gap-2 px-4 py-3 hover:bg-white/10 transition-all duration-300 whitespace-nowrap",children:["Tiendas",t.jsx(a,{className:"w-3 h-3 transition-transform duration-200 "+(m?"rotate-180":"")})]}),t.jsx(r,{children:m&&t.jsx(i.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},className:"absolute top-full right-0 mt-1 bg-secondary text-gray-800 rounded-2xl shadow-lg z-20 min-w-[300px] max-w-[300px] max-h-96 overflow-y-auto scrollbar-thin scrollbar-thumb-white/20 scrollbar-track-transparent hover:scrollbar-thumb-white/30 scrollbar-thumb-rounded-full",style:{scrollbarWidth:"thin",scrollbarColor:"rgba(255, 255, 255, 0.2) transparent"},children:t.jsx("div",{className:"py-2",children:M.map(e=>t.jsx("a",{href:e.link||`/tienda/${e.slug||e.id}`,className:"block px-4 py-4 text-white hover:bg-black/20 group hover:text-white transition-colors duration-200",children:t.jsx("div",{className:"flex items-center gap-3",children:t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("div",{className:"font-bold text-base ",children:e.name}),e.address&&t.jsx("div",{className:"text-xs  text-white line-clamp-2",children:e.address}),(()=>{const a=E(e.ubigeo);return a?t.jsx("div",{className:"text-xs font-bold uppercase text-white mt-2",children:a.departamento}):null})()]})})},e.id))})})})]})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"relative",children:t.jsxs("a",{href:"/catalogo",className:"flex items-center gap-2 px-4 py-3 hover:bg-white/10 transition-all duration-300 whitespace-nowrap",children:[t.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("path",{d:"M1.6665 15.0003C1.6665 13.7167 1.6665 13.0747 1.95545 12.6032C2.11712 12.3394 2.33895 12.1176 2.60278 11.9559C3.07429 11.667 3.71614 11.667 4.99984 11.667C6.28354 11.667 6.92539 11.667 7.3969 11.9559C7.66073 12.1176 7.88255 12.3394 8.04423 12.6032C8.33317 13.0747 8.33317 13.7167 8.33317 15.0003C8.33317 16.284 8.33317 16.9259 8.04423 17.3974C7.88255 17.6612 7.66073 17.8831 7.3969 18.0447C6.92539 18.3337 6.28354 18.3337 4.99984 18.3337C3.71614 18.3337 3.07429 18.3337 2.60278 18.0447C2.33895 17.8831 2.11712 17.6612 1.95545 17.3974C1.6665 16.9259 1.6665 16.284 1.6665 15.0003Z",stroke:"white","stroke-width":"1.25"}),t.jsx("path",{d:"M11.6665 15.0003C11.6665 13.7167 11.6665 13.0747 11.9554 12.6032C12.1171 12.3394 12.3389 12.1176 12.6028 11.9559C13.0743 11.667 13.7162 11.667 14.9998 11.667C16.2835 11.667 16.9254 11.667 17.3969 11.9559C17.6608 12.1176 17.8826 12.3394 18.0443 12.6032C18.3332 13.0747 18.3332 13.7167 18.3332 15.0003C18.3332 16.284 18.3332 16.9259 18.0443 17.3974C17.8826 17.6612 17.6608 17.8831 17.3969 18.0447C16.9254 18.3337 16.2835 18.3337 14.9998 18.3337C13.7162 18.3337 13.0743 18.3337 12.6028 18.0447C12.3389 17.8831 12.1171 17.6612 11.9554 17.3974C11.6665 16.9259 11.6665 16.284 11.6665 15.0003Z",stroke:"white","stroke-width":"1.25"}),t.jsx("path",{d:"M1.6665 5.00033C1.6665 3.71663 1.6665 3.07478 1.95545 2.60327C2.11712 2.33943 2.33895 2.11761 2.60278 1.95593C3.07429 1.66699 3.71614 1.66699 4.99984 1.66699C6.28354 1.66699 6.92539 1.66699 7.3969 1.95593C7.66073 2.11761 7.88255 2.33943 8.04423 2.60327C8.33317 3.07478 8.33317 3.71663 8.33317 5.00033C8.33317 6.28403 8.33317 6.92588 8.04423 7.39738C7.88255 7.66122 7.66073 7.88304 7.3969 8.04472C6.92539 8.33366 6.28354 8.33366 4.99984 8.33366C3.71614 8.33366 3.07429 8.33366 2.60278 8.04472C2.33895 7.88304 2.11712 7.66122 1.95545 7.39738C1.6665 6.92588 1.6665 6.28403 1.6665 5.00033Z",stroke:"white","stroke-width":"1.25"}),t.jsx("path",{d:"M11.6665 5.00033C11.6665 3.71663 11.6665 3.07478 11.9554 2.60327C12.1171 2.33943 12.3389 2.11761 12.6028 1.95593C13.0743 1.66699 13.7162 1.66699 14.9998 1.66699C16.2835 1.66699 16.9254 1.66699 17.3969 1.95593C17.6608 2.11761 17.8826 2.33943 18.0443 2.60327C18.3332 3.07478 18.3332 3.71663 18.3332 5.00033C18.3332 6.28403 18.3332 6.92588 18.0443 7.39738C17.8826 7.66122 17.6608 7.88304 17.3969 8.04472C16.9254 8.33366 16.2835 8.33366 14.9998 8.33366C13.7162 8.33366 13.0743 8.33366 12.6028 8.04472C12.3389 7.88304 12.1171 7.66122 11.9554 7.39738C11.6665 6.92588 11.6665 6.28403 11.6665 5.00033Z",stroke:"white","stroke-width":"1.25"})]}),"Todas las categorías"]})}),t.jsx("div",{className:"w-px h-6 bg-white/20 mx-2"}),z.map(e=>{const s=T(e),l=s.length>0;return t.jsxs("div",{className:"relative",onMouseEnter:()=>{return l&&(t=e.id,k.current&&clearTimeout(k.current),x(t),void h(!1));var t},onMouseLeave:S,children:[t.jsxs("a",{href:`/catalogo?category=${e.slug}`,className:"flex items-center gap-2 px-4 py-3 hover:bg-white/10 transition-all duration-300 whitespace-nowrap",children:[e.image&&t.jsx("img",{src:`/storage/images/category/${e.image}`,alt:e.name,className:"w-4 h-4 filter brightness-0 invert",onError:e=>e.target.style.display="none"}),e.name,l&&t.jsx(a,{className:"w-3 h-3 ml-1"})]}),t.jsx(r,{children:d===e.id&&l&&t.jsx(i.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},className:"absolute top-full left-0 mt-1 bg-white text-gray-800 border border-gray-200 rounded-lg shadow-lg z-20 min-w-[200px] max-h-80 overflow-y-auto",onMouseEnter:$,onMouseLeave:S,children:t.jsx("div",{className:"py-2",children:s.map(e=>t.jsx("a",{href:`/catalogo?subcategory=${e.slug}`,className:"block px-4 py-2 text-sm hover:bg-gray-50 hover:text-red-600 transition-colors duration-200",children:e.name},e.id))})})})]},e.id)})]}),M.length>0&&t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:Z,className:`flex text-xs items-center flex-col  px-4 ${y?"py-0":"py-3"}  transition-all duration-300 whitespace-nowrap`,children:[t.jsxs("span",{className:"flex w-full items-end justify-end gap-2",children:[t.jsx("span",{className:"text-white/60",children:"Tiendas"}),t.jsx(a,{className:"w-3 h-3 transition-transform duration-200 "+(m?"rotate-180":"")})]}),y&&t.jsx(t.Fragment,{children:t.jsx("span",{className:"font-bold",children:y.name})})]}),t.jsx(r,{children:m&&t.jsx(i.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},className:"absolute top-full right-0 mt-2 bg-secondary text-gray-800 rounded-2xl shadow-lg z-20 min-w-[300px] max-w-[300px] max-h-96 overflow-y-auto scrollbar-thin scrollbar-thumb-white/20 scrollbar-track-transparent hover:scrollbar-thumb-white/30 scrollbar-thumb-rounded-full",style:{scrollbarWidth:"thin",scrollbarColor:"rgba(255, 255, 255, 0.2) transparent"},children:t.jsx("div",{className:"py-8",children:M.map(e=>t.jsx("a",{href:e.link||`/tienda/${e.slug||e.id}`,className:"block px-4 py-4 text-white hover:bg-black/10 group hover:text-white transition-colors duration-200 "+(y?.id===e.id?"bg-black/20":""),onClick:t=>((e,t)=>{e.link&&(t.preventDefault(),window.location.href=e.link),C(e),h(!1)})(e,t),children:t.jsx("div",{className:"flex items-center gap-3",children:t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("div",{className:"flex items-center gap-2",children:t.jsx("div",{className:"font-bold text-base",children:e.name})}),e.address&&t.jsx("div",{className:"text-xs font-medium text-white line-clamp-2",children:e.address}),(()=>{const a=E(e.ubigeo);return a?t.jsx("div",{className:"text-xs font-bold uppercase text-white mt-2",children:a.departamento}):null})()]})})},e.id))})})})]})]})})})})})};export{l as default};
