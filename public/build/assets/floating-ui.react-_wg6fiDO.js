import{r as a,a as ht}from"./index-BOnQTV8N.js";import{i as Ot,b as ie,f as Nt,o as Lt,c as Ze,d as $t,s as _t,e as ee,g as De,h as Bt,j as Rt,k as Fe,l as Vt,m as yt}from"./floating-ui.dom-VJ4vUqp9.js";import{j as Z}from"./AboutSimple-Cf8x2fCZ.js";import{r as Wt}from"./index-B8-haksW.js";/*!
* tabbable 6.3.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var jt=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Te=jt.join(","),Et=typeof Element>"u",ve=Et?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Se=!Et&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e==null?void 0:e.ownerDocument},he=function(t,n){var r;n===void 0&&(n=!0);var o=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"inert"),i=o===""||o==="true",s=i||n&&t&&he(t.parentNode);return s},Kt=function(t){var n,r=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"contenteditable");return r===""||r==="true"},wt=function(t,n,r){if(he(t))return[];var o=Array.prototype.slice.apply(t.querySelectorAll(Te));return n&&ve.call(t,Te)&&o.unshift(t),o=o.filter(r),o},Ce=function(t,n,r){for(var o=[],i=Array.from(t);i.length;){var s=i.shift();if(!he(s,!1))if(s.tagName==="SLOT"){var u=s.assignedElements(),f=u.length?u:s.children,c=Ce(f,!0,r);r.flatten?o.push.apply(o,c):o.push({scopeParent:s,candidates:c})}else{var p=ve.call(s,Te);p&&r.filter(s)&&(n||!t.includes(s))&&o.push(s);var R=s.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(s),y=!he(R,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(s));if(R&&y){var d=Ce(R===!0?s.children:R.children,!0,r);r.flatten?o.push.apply(o,d):o.push({scopeParent:s,candidates:d})}else i.unshift.apply(i,s.children)}}return o},xt=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},Tt=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||Kt(t))&&!xt(t)?0:t.tabIndex},qt=function(t,n){var r=Tt(t);return r<0&&n&&!xt(t)?0:r},Ht=function(t,n){return t.tabIndex===n.tabIndex?t.documentOrder-n.documentOrder:t.tabIndex-n.tabIndex},St=function(t){return t.tagName==="INPUT"},Ut=function(t){return St(t)&&t.type==="hidden"},Yt=function(t){var n=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(r){return r.tagName==="SUMMARY"});return n},Gt=function(t,n){for(var r=0;r<t.length;r++)if(t[r].checked&&t[r].form===n)return t[r]},Xt=function(t){if(!t.name)return!0;var n=t.form||Se(t),r=function(u){return n.querySelectorAll('input[type="radio"][name="'+u+'"]')},o;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")o=r(window.CSS.escape(t.name));else try{o=r(t.name)}catch(s){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",s.message),!1}var i=Gt(o,t.form);return!i||i===t},Zt=function(t){return St(t)&&t.type==="radio"},zt=function(t){return Zt(t)&&!Xt(t)},Jt=function(t){var n,r=t&&Se(t),o=(n=r)===null||n===void 0?void 0:n.host,i=!1;if(r&&r!==t){var s,u,f;for(i=!!((s=o)!==null&&s!==void 0&&(u=s.ownerDocument)!==null&&u!==void 0&&u.contains(o)||t!=null&&(f=t.ownerDocument)!==null&&f!==void 0&&f.contains(t));!i&&o;){var c,p,R;r=Se(o),o=(c=r)===null||c===void 0?void 0:c.host,i=!!((p=o)!==null&&p!==void 0&&(R=p.ownerDocument)!==null&&R!==void 0&&R.contains(o))}}return i},ze=function(t){var n=t.getBoundingClientRect(),r=n.width,o=n.height;return r===0&&o===0},Qt=function(t,n){var r=n.displayCheck,o=n.getShadowRoot;if(r==="full-native"&&"checkVisibility"in t){var i=t.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});return!i}if(getComputedStyle(t).visibility==="hidden")return!0;var s=ve.call(t,"details>summary:first-of-type"),u=s?t.parentElement:t;if(ve.call(u,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="full-native"||r==="legacy-full"){if(typeof o=="function"){for(var f=t;t;){var c=t.parentElement,p=Se(t);if(c&&!c.shadowRoot&&o(c)===!0)return ze(t);t.assignedSlot?t=t.assignedSlot:!c&&p!==t.ownerDocument?t=p.host:t=c}t=f}if(Jt(t))return!t.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return ze(t);return!1},en=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var n=t.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var o=n.children.item(r);if(o.tagName==="LEGEND")return ve.call(n,"fieldset[disabled] *")?!0:!o.contains(t)}return!0}n=n.parentElement}return!1},Ve=function(t,n){return!(n.disabled||he(n)||Ut(n)||Qt(n,t)||Yt(n)||en(n))},We=function(t,n){return!(zt(n)||Tt(n)<0||!Ve(t,n))},tn=function(t){var n=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},Ct=function(t){var n=[],r=[];return t.forEach(function(o,i){var s=!!o.scopeParent,u=s?o.scopeParent:o,f=qt(u,s),c=s?Ct(o.candidates):u;f===0?s?n.push.apply(n,c):n.push(u):r.push({documentOrder:i,tabIndex:f,item:o,isScope:s,content:c})}),r.sort(Ht).reduce(function(o,i){return i.isScope?o.push.apply(o,i.content):o.push(i.content),o},[]).concat(n)},qe=function(t,n){n=n||{};var r;return n.getShadowRoot?r=Ce([t],n.includeContainer,{filter:We.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:tn}):r=wt(t,n.includeContainer,We.bind(null,n)),Ct(r)},nn=function(t,n){n=n||{};var r;return n.getShadowRoot?r=Ce([t],n.includeContainer,{filter:Ve.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):r=wt(t,n.includeContainer,Ve.bind(null,n)),r},It=function(t,n){if(n=n||{},!t)throw new Error("No node provided");return ve.call(t,Te)===!1?!1:We(n,t)};function rn(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function kt(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function on(){return/apple/i.test(navigator.vendor)}function je(){const e=/android/i;return e.test(rn())||e.test(kt())}function sn(){return kt().includes("jsdom/")}const Je="data-floating-ui-focusable",an="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function pe(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function U(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&Ot(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function ce(e){return"composedPath"in e?e.composedPath()[0]:e.target}function Oe(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function un(e){return e.matches("html,body")}function J(e){return(e==null?void 0:e.ownerDocument)||document}function At(e){return ie(e)&&e.matches(an)}function Qe(e){return e?e.getAttribute("role")==="combobox"&&At(e):!1}function Ke(e){return e?e.hasAttribute(Je)?e:e.querySelector("["+Je+"]")||e:null}function me(e,t,n){return n===void 0&&(n=!0),e.filter(o=>{var i;return o.parentId===t&&(!n||((i=o.context)==null?void 0:i.open))}).flatMap(o=>[o,...me(e,o.id,n)])}function et(e,t){var n;let r=[],o=(n=e.find(i=>i.id===t))==null?void 0:n.parentId;for(;o;){const i=e.find(s=>s.id===o);o=i==null?void 0:i.parentId,i&&(r=r.concat(i))}return r}function Ne(e){e.preventDefault(),e.stopPropagation()}function cn(e){return"nativeEvent"in e}function ln(e){return e.mozInputSource===0&&e.isTrusted?!0:je()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function fn(e){return sn()?!1:!je()&&e.width===0&&e.height===0||je()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function tt(e,t){return["mouse","pen"].includes(e)}var dn=typeof document<"u",gn=function(){},ne=dn?a.useLayoutEffect:gn;const pn={...ht};function Le(e){const t=a.useRef(e);return ne(()=>{t.current=e}),t}const mn=pn.useInsertionEffect,bn=mn||(e=>e());function te(e){const t=a.useRef(()=>{});return bn(()=>{t.current=e}),a.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.current==null?void 0:t.current(...r)},[])}const Ae=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function Pt(e,t){const n=qe(e,Ae()),r=n.length;if(r===0)return;const o=pe(J(e)),i=n.indexOf(o),s=i===-1?t===1?0:r-1:i+t;return n[s]}function vn(e){return Pt(J(e).body,1)||e}function hn(e){return Pt(J(e).body,-1)||e}function nt(e,t){const n=t||e.currentTarget,r=e.relatedTarget;return!r||!U(n,r)}var Rn=typeof document<"u",yn=function(){},xe=Rn?a.useLayoutEffect:yn;function Ie(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Ie(e[r],t[r]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,o[r]))return!1;for(r=n;r--!==0;){const i=o[r];if(!(i==="_owner"&&e.$$typeof)&&!Ie(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function Mt(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function rt(e,t){const n=Mt(e);return Math.round(t*n)/n}function $e(e){const t=a.useRef(e);return xe(()=>{t.current=e}),t}function En(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:i,floating:s}={},transform:u=!0,whileElementsMounted:f,open:c}=e,[p,R]=a.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[y,d]=a.useState(r);Ie(y,r)||d(r);const[E,g]=a.useState(null),[S,T]=a.useState(null),m=a.useCallback(l=>{l!==B.current&&(B.current=l,g(l))},[]),h=a.useCallback(l=>{l!==P.current&&(P.current=l,T(l))},[]),k=i||E,N=s||S,B=a.useRef(null),P=a.useRef(null),F=a.useRef(p),Y=f!=null,q=$e(f),$=$e(o),j=$e(c),K=a.useCallback(()=>{if(!B.current||!P.current)return;const l={placement:t,strategy:n,middleware:y};$.current&&(l.platform=$.current),$t(B.current,P.current,l).then(M=>{const O={...M,isPositioned:j.current!==!1};b.current&&!Ie(F.current,O)&&(F.current=O,Wt.flushSync(()=>{R(O)}))})},[y,t,n,$,j]);xe(()=>{c===!1&&F.current.isPositioned&&(F.current.isPositioned=!1,R(l=>({...l,isPositioned:!1})))},[c]);const b=a.useRef(!1);xe(()=>(b.current=!0,()=>{b.current=!1}),[]),xe(()=>{if(k&&(B.current=k),N&&(P.current=N),k&&N){if(q.current)return q.current(k,N,K);K()}},[k,N,K,q,Y]);const v=a.useMemo(()=>({reference:B,floating:P,setReference:m,setFloating:h}),[m,h]),D=a.useMemo(()=>({reference:k,floating:N}),[k,N]),L=a.useMemo(()=>{const l={position:n,left:0,top:0};if(!D.floating)return l;const M=rt(D.floating,p.x),O=rt(D.floating,p.y);return u?{...l,transform:"translate("+M+"px, "+O+"px)",...Mt(D.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:M,top:O}},[n,u,D.floating,p.x,p.y]);return a.useMemo(()=>({...p,update:K,refs:v,elements:D,floatingStyles:L}),[p,K,v,D,L])}const wn=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:o}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Ze({element:r.current,padding:o}).fn(n):{}:r?Ze({element:r,padding:o}).fn(n):{}}}},zn=(e,t)=>({...Lt(e),options:[e,t]}),Jn=(e,t)=>({..._t(e),options:[e,t]}),Qn=(e,t)=>({...Nt(e),options:[e,t]}),er=(e,t)=>({...wn(e),options:[e,t]}),xn="data-floating-ui-focusable",ot="active",it="selected",Tn={...ht};let st=!1,Sn=0;const at=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Sn++;function Cn(){const[e,t]=a.useState(()=>st?at():void 0);return ne(()=>{e==null&&t(at())},[]),a.useEffect(()=>{st=!0},[]),e}const In=Tn.useId,He=In||Cn,tr=a.forwardRef(function(t,n){const{context:{placement:r,elements:{floating:o},middlewareData:{arrow:i,shift:s}},width:u=14,height:f=7,tipRadius:c=0,strokeWidth:p=0,staticOffset:R,stroke:y,d,style:{transform:E,...g}={},...S}=t,T=He(),[m,h]=a.useState(!1);if(ne(()=>{if(!o)return;Rt(o).direction==="rtl"&&h(!0)},[o]),!o)return null;const[k,N]=r.split("-"),B=k==="top"||k==="bottom";let P=R;(B&&s!=null&&s.x||!B&&s!=null&&s.y)&&(P=null);const F=p*2,Y=F/2,q=u/2*(c/-8+1),$=f/2*c/4,j=!!d,K=P&&N==="end"?"bottom":"top";let b=P&&N==="end"?"right":"left";P&&m&&(b=N==="end"?"left":"right");const v=(i==null?void 0:i.x)!=null?P||i.x:"",D=(i==null?void 0:i.y)!=null?P||i.y:"",L=d||"M0,0"+(" H"+u)+(" L"+(u-q)+","+(f-$))+(" Q"+u/2+","+f+" "+q+","+(f-$))+" Z",l={top:j?"rotate(180deg)":"",left:j?"rotate(90deg)":"rotate(-90deg)",bottom:j?"":"rotate(180deg)",right:j?"rotate(-90deg)":"rotate(90deg)"}[k];return Z.jsxs("svg",{...S,"aria-hidden":!0,ref:n,width:j?u:u+F,height:u,viewBox:"0 0 "+u+" "+(f>u?f:u),style:{position:"absolute",pointerEvents:"none",[b]:v,[K]:D,[k]:B||j?"100%":"calc(100% - "+F/2+"px)",transform:[l,E].filter(M=>!!M).join(" "),...g},children:[F>0&&Z.jsx("path",{clipPath:"url(#"+T+")",fill:"none",stroke:y,strokeWidth:F+(d?0:1),d:L}),Z.jsx("path",{stroke:F&&!d?S.fill:"none",d:L}),Z.jsx("clipPath",{id:T,children:Z.jsx("rect",{x:-Y,y:Y*(j?-1:1),width:u+F,height:u})})]})});function kn(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(o=>o(n))},on(t,n){e.has(t)||e.set(t,new Set),e.get(t).add(n)},off(t,n){var r;(r=e.get(t))==null||r.delete(n)}}}const An=a.createContext(null),Pn=a.createContext(null),Dt=()=>{var e;return((e=a.useContext(An))==null?void 0:e.id)||null},Ue=()=>a.useContext(Pn);function ke(e){return"data-floating-ui-"+e}function Mn(e){e.current!==-1&&(clearTimeout(e.current),e.current=-1)}let ut=0;function ge(e,t){t===void 0&&(t={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:o=!1}=t;r&&cancelAnimationFrame(ut);const i=()=>e==null?void 0:e.focus({preventScroll:n});o?i():ut=requestAnimationFrame(i)}function Dn(e){return(e==null?void 0:e.ownerDocument)||document}const be={inert:new WeakMap,"aria-hidden":new WeakMap,none:new WeakMap};function ct(e){return e==="inert"?be.inert:e==="aria-hidden"?be["aria-hidden"]:be.none}let Ee=new WeakSet,we={},_e=0;const Fn=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,Ft=e=>e&&(e.host||Ft(e.parentNode)),On=(e,t)=>t.map(n=>{if(e.contains(n))return n;const r=Ft(n);return e.contains(r)?r:null}).filter(n=>n!=null);function Nn(e,t,n,r){const o="data-floating-ui-inert",i=r?"inert":n?"aria-hidden":null,s=On(t,e),u=new Set,f=new Set(s),c=[];we[o]||(we[o]=new WeakMap);const p=we[o];s.forEach(R),y(t),u.clear();function R(d){!d||u.has(d)||(u.add(d),d.parentNode&&R(d.parentNode))}function y(d){!d||f.has(d)||[].forEach.call(d.children,E=>{if(yt(E)!=="script")if(u.has(E))y(E);else{const g=i?E.getAttribute(i):null,S=g!==null&&g!=="false",T=ct(i),m=(T.get(E)||0)+1,h=(p.get(E)||0)+1;T.set(E,m),p.set(E,h),c.push(E),m===1&&S&&Ee.add(E),h===1&&E.setAttribute(o,""),!S&&i&&E.setAttribute(i,i==="inert"?"":"true")}})}return _e++,()=>{c.forEach(d=>{const E=ct(i),S=(E.get(d)||0)-1,T=(p.get(d)||0)-1;E.set(d,S),p.set(d,T),S||(!Ee.has(d)&&i&&d.removeAttribute(i),Ee.delete(d)),T||d.removeAttribute(o)}),_e--,_e||(be.inert=new WeakMap,be["aria-hidden"]=new WeakMap,be.none=new WeakMap,Ee=new WeakSet,we={})}}function lt(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);const r=Dn(e[0]).body;return Nn(e.concat(Array.from(r.querySelectorAll('[aria-live],[role="status"],output'))),r,t,n)}const Ye={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0},ft=a.forwardRef(function(t,n){const[r,o]=a.useState();ne(()=>{on()&&o("button")},[]);const i={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[ke("focus-guard")]:"",style:Ye};return Z.jsx("span",{...t,...i})}),Ln=a.createContext(null),$n=()=>a.useContext(Ln);function dt(e){return a.useMemo(()=>t=>{e.forEach(n=>{n&&(n.current=t)})},e)}const _n=20;let le=[];function Ge(){le=le.filter(e=>e.isConnected)}function Bn(e){Ge(),e&&yt(e)!=="body"&&(le.push(e),le.length>_n&&(le=le.slice(-20)))}function gt(){return Ge(),le[le.length-1]}function Vn(e){const t=Ae();return It(e,t)?e:qe(e,t)[0]||e}function pt(e,t){var n;if(!t.current.includes("floating")&&!((n=e.getAttribute("role"))!=null&&n.includes("dialog")))return;const r=Ae(),i=nn(e,r).filter(u=>{const f=u.getAttribute("data-tabindex")||"";return It(u,r)||u.hasAttribute("data-tabindex")&&!f.startsWith("-")}),s=e.getAttribute("tabindex");t.current.includes("floating")||i.length===0?s!=="0"&&e.setAttribute("tabindex","0"):(s!=="-1"||e.hasAttribute("data-tabindex")&&e.getAttribute("data-tabindex")!=="-1")&&(e.setAttribute("tabindex","-1"),e.setAttribute("data-tabindex","-1"))}const Wn=a.forwardRef(function(t,n){return Z.jsx("button",{...t,type:"button",ref:n,tabIndex:-1,style:Ye})});function nr(e){const{context:t,children:n,disabled:r=!1,order:o=["content"],guards:i=!0,initialFocus:s=0,returnFocus:u=!0,restoreFocus:f=!1,modal:c=!0,visuallyHiddenDismiss:p=!1,closeOnFocusOut:R=!0,outsideElementsInert:y=!1,getInsideElements:d=()=>[]}=e,{open:E,onOpenChange:g,events:S,dataRef:T,elements:{domReference:m,floating:h}}=t,k=te(()=>{var w;return(w=T.current.floatingContext)==null?void 0:w.nodeId}),N=te(d),B=typeof s=="number"&&s<0,P=Qe(m)&&B,F=Fn(),Y=F?i:!0,q=!Y||F&&y,$=Le(o),j=Le(s),K=Le(u),b=Ue(),v=$n(),D=a.useRef(null),L=a.useRef(null),l=a.useRef(!1),M=a.useRef(!1),O=a.useRef(-1),z=a.useRef(-1),de=v!=null,C=Ke(h),Q=te(function(w){return w===void 0&&(w=C),w?qe(w,Ae()):[]}),V=te(w=>{const I=Q(w);return $.current.map(x=>m&&x==="reference"?m:C&&x==="floating"?C:I).filter(Boolean).flat()});a.useEffect(()=>{if(r||!c)return;function w(x){if(x.key==="Tab"){U(C,pe(J(C)))&&Q().length===0&&!P&&Ne(x);const _=V(),W=ce(x);$.current[0]==="reference"&&W===m&&(Ne(x),x.shiftKey?ge(_[_.length-1]):ge(_[1])),$.current[1]==="floating"&&W===C&&x.shiftKey&&(Ne(x),ge(_[0]))}}const I=J(C);return I.addEventListener("keydown",w),()=>{I.removeEventListener("keydown",w)}},[r,m,C,c,$,P,Q,V]),a.useEffect(()=>{if(r||!h)return;function w(I){const x=ce(I),W=Q().indexOf(x);W!==-1&&(O.current=W)}return h.addEventListener("focusin",w),()=>{h.removeEventListener("focusin",w)}},[r,h,Q]),a.useEffect(()=>{if(r||!R)return;function w(){M.current=!0,setTimeout(()=>{M.current=!1})}function I(W){const A=W.relatedTarget,re=W.currentTarget,X=ce(W);queueMicrotask(()=>{const H=k(),fe=!(U(m,A)||U(h,A)||U(A,h)||U(v==null?void 0:v.portalNode,A)||A!=null&&A.hasAttribute(ke("focus-guard"))||b&&(me(b.nodesRef.current,H).find(ae=>{var oe,ue;return U((oe=ae.context)==null?void 0:oe.elements.floating,A)||U((ue=ae.context)==null?void 0:ue.elements.domReference,A)})||et(b.nodesRef.current,H).find(ae=>{var oe,ue,Xe;return[(oe=ae.context)==null?void 0:oe.elements.floating,Ke((ue=ae.context)==null?void 0:ue.elements.floating)].includes(A)||((Xe=ae.context)==null?void 0:Xe.elements.domReference)===A})));if(re===m&&C&&pt(C,$),f&&re!==m&&!(X!=null&&X.isConnected)&&pe(J(C))===J(C).body){ie(C)&&C.focus();const ae=O.current,oe=Q(),ue=oe[ae]||oe[oe.length-1]||C;ie(ue)&&ue.focus()}if(T.current.insideReactTree){T.current.insideReactTree=!1;return}(P||!c)&&A&&fe&&!M.current&&A!==gt()&&(l.current=!0,g(!1,W,"focus-out"))})}const x=!!(!b&&v);function _(){Mn(z),T.current.insideReactTree=!0,z.current=window.setTimeout(()=>{T.current.insideReactTree=!1})}if(h&&ie(m))return m.addEventListener("focusout",I),m.addEventListener("pointerdown",w),h.addEventListener("focusout",I),x&&h.addEventListener("focusout",_,!0),()=>{m.removeEventListener("focusout",I),m.removeEventListener("pointerdown",w),h.removeEventListener("focusout",I),x&&h.removeEventListener("focusout",_,!0)}},[r,m,h,C,c,b,v,g,R,f,Q,P,k,$,T]);const G=a.useRef(null),se=a.useRef(null),Pe=dt([G,v==null?void 0:v.beforeInsideRef]),Me=dt([se,v==null?void 0:v.afterInsideRef]);a.useEffect(()=>{var w,I;if(r||!h)return;const x=Array.from((v==null||(w=v.portalNode)==null?void 0:w.querySelectorAll("["+ke("portal")+"]"))||[]),W=(I=(b?et(b.nodesRef.current,k()):[]).find(X=>{var H;return Qe(((H=X.context)==null?void 0:H.elements.domReference)||null)}))==null||(I=I.context)==null?void 0:I.elements.domReference,A=[h,W,...x,...N(),D.current,L.current,G.current,se.current,v==null?void 0:v.beforeOutsideRef.current,v==null?void 0:v.afterOutsideRef.current,$.current.includes("reference")||P?m:null].filter(X=>X!=null),re=c||P?lt(A,!q,q):lt(A);return()=>{re()}},[r,m,h,c,$,v,P,Y,q,b,k,N]),ne(()=>{if(r||!ie(C))return;const w=J(C),I=pe(w);queueMicrotask(()=>{const x=V(C),_=j.current,W=(typeof _=="number"?x[_]:_.current)||C,A=U(C,I);!B&&!A&&E&&ge(W,{preventScroll:W===C})})},[r,E,C,B,V,j]),ne(()=>{if(r||!C)return;const w=J(C),I=pe(w);Bn(I);function x(A){let{reason:re,event:X,nested:H}=A;if(["hover","safe-polygon"].includes(re)&&X.type==="mouseleave"&&(l.current=!0),re==="outside-press")if(H)l.current=!1;else if(ln(X)||fn(X))l.current=!1;else{let fe=!1;document.createElement("div").focus({get preventScroll(){return fe=!0,!1}}),fe?l.current=!1:l.current=!0}}S.on("openchange",x);const _=w.createElement("span");_.setAttribute("tabindex","-1"),_.setAttribute("aria-hidden","true"),Object.assign(_.style,Ye),de&&m&&m.insertAdjacentElement("afterend",_);function W(){if(typeof K.current=="boolean"){const A=m||gt();return A&&A.isConnected?A:_}return K.current.current||_}return()=>{S.off("openchange",x);const A=pe(w),re=U(h,A)||b&&me(b.nodesRef.current,k(),!1).some(H=>{var fe;return U((fe=H.context)==null?void 0:fe.elements.floating,A)}),X=W();queueMicrotask(()=>{const H=Vn(X);K.current&&!l.current&&ie(H)&&(!(H!==A&&A!==w.body)||re)&&H.focus({preventScroll:!0}),_.remove()})}},[r,h,C,K,T,S,b,de,m,k]),a.useEffect(()=>(queueMicrotask(()=>{l.current=!1}),()=>{queueMicrotask(Ge)}),[r]),ne(()=>{if(!r&&v)return v.setFocusManagerState({modal:c,closeOnFocusOut:R,open:E,onOpenChange:g,domReference:m}),()=>{v.setFocusManagerState(null)}},[r,v,c,E,g,R,m]),ne(()=>{r||C&&pt(C,$)},[r,C,$]);function Re(w){return r||!p||!c?null:Z.jsx(Wn,{ref:w==="start"?D:L,onClick:I=>g(!1,I.nativeEvent),children:typeof p=="string"?p:"Dismiss"})}const ye=!r&&Y&&(c?!P:!0)&&(de||c);return Z.jsxs(Z.Fragment,{children:[ye&&Z.jsx(ft,{"data-type":"inside",ref:Pe,onFocus:w=>{if(c){const x=V();ge(o[0]==="reference"?x[0]:x[x.length-1])}else if(v!=null&&v.preserveTabOrder&&v.portalNode)if(l.current=!1,nt(w,v.portalNode)){const x=vn(m);x==null||x.focus()}else{var I;(I=v.beforeOutsideRef.current)==null||I.focus()}}}),!P&&Re("start"),n,Re("end"),ye&&Z.jsx(ft,{"data-type":"inside",ref:Me,onFocus:w=>{if(c)ge(V()[0]);else if(v!=null&&v.preserveTabOrder&&v.portalNode)if(R&&(l.current=!0),nt(w,v.portalNode)){const x=hn(m);x==null||x.focus()}else{var I;(I=v.afterOutsideRef.current)==null||I.focus()}}})]})}function mt(e){return ie(e.target)&&e.target.tagName==="BUTTON"}function jn(e){return ie(e.target)&&e.target.tagName==="A"}function bt(e){return At(e)}function rr(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:o,elements:{domReference:i}}=e,{enabled:s=!0,event:u="click",toggle:f=!0,ignoreMouse:c=!1,keyboardHandlers:p=!0,stickIfOpen:R=!0}=t,y=a.useRef(),d=a.useRef(!1),E=a.useMemo(()=>({onPointerDown(g){y.current=g.pointerType},onMouseDown(g){const S=y.current;g.button===0&&u!=="click"&&(tt(S)&&c||(n&&f&&(!(o.current.openEvent&&R)||o.current.openEvent.type==="mousedown")?r(!1,g.nativeEvent,"click"):(g.preventDefault(),r(!0,g.nativeEvent,"click"))))},onClick(g){const S=y.current;if(u==="mousedown"&&y.current){y.current=void 0;return}tt(S)&&c||(n&&f&&(!(o.current.openEvent&&R)||o.current.openEvent.type==="click")?r(!1,g.nativeEvent,"click"):r(!0,g.nativeEvent,"click"))},onKeyDown(g){y.current=void 0,!(g.defaultPrevented||!p||mt(g))&&(g.key===" "&&!bt(i)&&(g.preventDefault(),d.current=!0),!jn(g)&&g.key==="Enter"&&r(!(n&&f),g.nativeEvent,"click"))},onKeyUp(g){g.defaultPrevented||!p||mt(g)||bt(i)||g.key===" "&&d.current&&(d.current=!1,r(!(n&&f),g.nativeEvent,"click"))}}),[o,i,u,c,p,r,n,R,f]);return a.useMemo(()=>s?{reference:E}:{},[s,E])}const Kn={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},qn={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},vt=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function or(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:o,dataRef:i}=e,{enabled:s=!0,escapeKey:u=!0,outsidePress:f=!0,outsidePressEvent:c="pointerdown",referencePress:p=!1,referencePressEvent:R="pointerdown",ancestorScroll:y=!1,bubbles:d,capture:E}=t,g=Ue(),S=te(typeof f=="function"?f:()=>!1),T=typeof f=="function"?S:f,m=a.useRef(!1),{escapeKey:h,outsidePress:k}=vt(d),{escapeKey:N,outsidePress:B}=vt(E),P=a.useRef(!1),F=te(b=>{var v;if(!n||!s||!u||b.key!=="Escape"||P.current)return;const D=(v=i.current.floatingContext)==null?void 0:v.nodeId,L=g?me(g.nodesRef.current,D):[];if(!h&&(b.stopPropagation(),L.length>0)){let l=!0;if(L.forEach(M=>{var O;if((O=M.context)!=null&&O.open&&!M.context.dataRef.current.__escapeKeyBubbles){l=!1;return}}),!l)return}r(!1,cn(b)?b.nativeEvent:b,"escape-key")}),Y=te(b=>{var v;const D=()=>{var L;F(b),(L=ce(b))==null||L.removeEventListener("keydown",D)};(v=ce(b))==null||v.addEventListener("keydown",D)}),q=te(b=>{var v;const D=i.current.insideReactTree;i.current.insideReactTree=!1;const L=m.current;if(m.current=!1,c==="click"&&L||D||typeof T=="function"&&!T(b))return;const l=ce(b),M="["+ke("inert")+"]",O=J(o.floating).querySelectorAll(M);let z=ee(l)?l:null;for(;z&&!De(z);){const V=Bt(z);if(De(V)||!ee(V))break;z=V}if(O.length&&ee(l)&&!un(l)&&!U(l,o.floating)&&Array.from(O).every(V=>!U(z,V)))return;if(ie(l)&&K){const V=De(l),G=Rt(l),se=/auto|scroll/,Pe=V||se.test(G.overflowX),Me=V||se.test(G.overflowY),Re=Pe&&l.clientWidth>0&&l.scrollWidth>l.clientWidth,ye=Me&&l.clientHeight>0&&l.scrollHeight>l.clientHeight,w=G.direction==="rtl",I=ye&&(w?b.offsetX<=l.offsetWidth-l.clientWidth:b.offsetX>l.clientWidth),x=Re&&b.offsetY>l.clientHeight;if(I||x)return}const de=(v=i.current.floatingContext)==null?void 0:v.nodeId,C=g&&me(g.nodesRef.current,de).some(V=>{var G;return Oe(b,(G=V.context)==null?void 0:G.elements.floating)});if(Oe(b,o.floating)||Oe(b,o.domReference)||C)return;const Q=g?me(g.nodesRef.current,de):[];if(Q.length>0){let V=!0;if(Q.forEach(G=>{var se;if((se=G.context)!=null&&se.open&&!G.context.dataRef.current.__outsidePressBubbles){V=!1;return}}),!V)return}r(!1,b,"outside-press")}),$=te(b=>{var v;const D=()=>{var L;q(b),(L=ce(b))==null||L.removeEventListener(c,D)};(v=ce(b))==null||v.addEventListener(c,D)});a.useEffect(()=>{if(!n||!s)return;i.current.__escapeKeyBubbles=h,i.current.__outsidePressBubbles=k;let b=-1;function v(O){r(!1,O,"ancestor-scroll")}function D(){window.clearTimeout(b),P.current=!0}function L(){b=window.setTimeout(()=>{P.current=!1},Vt()?5:0)}const l=J(o.floating);u&&(l.addEventListener("keydown",N?Y:F,N),l.addEventListener("compositionstart",D),l.addEventListener("compositionend",L)),T&&l.addEventListener(c,B?$:q,B);let M=[];return y&&(ee(o.domReference)&&(M=Fe(o.domReference)),ee(o.floating)&&(M=M.concat(Fe(o.floating))),!ee(o.reference)&&o.reference&&o.reference.contextElement&&(M=M.concat(Fe(o.reference.contextElement)))),M=M.filter(O=>{var z;return O!==((z=l.defaultView)==null?void 0:z.visualViewport)}),M.forEach(O=>{O.addEventListener("scroll",v,{passive:!0})}),()=>{u&&(l.removeEventListener("keydown",N?Y:F,N),l.removeEventListener("compositionstart",D),l.removeEventListener("compositionend",L)),T&&l.removeEventListener(c,B?$:q,B),M.forEach(O=>{O.removeEventListener("scroll",v)}),window.clearTimeout(b)}},[i,o,u,T,c,n,r,y,s,h,k,F,N,Y,q,B,$]),a.useEffect(()=>{i.current.insideReactTree=!1},[i,T,c]);const j=a.useMemo(()=>({onKeyDown:F,...p&&{[Kn[R]]:b=>{r(!1,b.nativeEvent,"reference-press")},...R!=="click"&&{onClick(b){r(!1,b.nativeEvent,"reference-press")}}}}),[F,r,p,R]),K=a.useMemo(()=>({onKeyDown:F,onMouseDown(){m.current=!0},onMouseUp(){m.current=!0},[qn[c]]:()=>{i.current.insideReactTree=!0}}),[F,c,i]);return a.useMemo(()=>s?{reference:j,floating:K}:{},[s,j,K])}function Hn(e){const{open:t=!1,onOpenChange:n,elements:r}=e,o=He(),i=a.useRef({}),[s]=a.useState(()=>kn()),u=Dt()!=null,[f,c]=a.useState(r.reference),p=te((d,E,g)=>{i.current.openEvent=d?E:void 0,s.emit("openchange",{open:d,event:E,reason:g,nested:u}),n==null||n(d,E,g)}),R=a.useMemo(()=>({setPositionReference:c}),[]),y=a.useMemo(()=>({reference:f||r.reference||null,floating:r.floating||null,domReference:r.reference}),[f,r.reference,r.floating]);return a.useMemo(()=>({dataRef:i,open:t,onOpenChange:p,elements:y,events:s,floatingId:o,refs:R}),[t,p,y,s,o,R])}function ir(e){e===void 0&&(e={});const{nodeId:t}=e,n=Hn({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,o=r.elements,[i,s]=a.useState(null),[u,f]=a.useState(null),p=(o==null?void 0:o.domReference)||i,R=a.useRef(null),y=Ue();ne(()=>{p&&(R.current=p)},[p]);const d=En({...e,elements:{...o,...u&&{reference:u}}}),E=a.useCallback(h=>{const k=ee(h)?{getBoundingClientRect:()=>h.getBoundingClientRect(),getClientRects:()=>h.getClientRects(),contextElement:h}:h;f(k),d.refs.setReference(k)},[d.refs]),g=a.useCallback(h=>{(ee(h)||h===null)&&(R.current=h,s(h)),(ee(d.refs.reference.current)||d.refs.reference.current===null||h!==null&&!ee(h))&&d.refs.setReference(h)},[d.refs]),S=a.useMemo(()=>({...d.refs,setReference:g,setPositionReference:E,domReference:R}),[d.refs,g,E]),T=a.useMemo(()=>({...d.elements,domReference:p}),[d.elements,p]),m=a.useMemo(()=>({...d,...r,refs:S,elements:T,nodeId:t}),[d,S,T,t,r]);return ne(()=>{r.dataRef.current.floatingContext=m;const h=y==null?void 0:y.nodesRef.current.find(k=>k.id===t);h&&(h.context=m)}),a.useMemo(()=>({...d,context:m,refs:S,elements:T}),[d,S,T,m])}function Be(e,t,n){const r=new Map,o=n==="item";let i=e;if(o&&e){const{[ot]:s,[it]:u,...f}=e;i=f}return{...n==="floating"&&{tabIndex:-1,[xn]:""},...i,...t.map(s=>{const u=s?s[n]:null;return typeof u=="function"?e?u(e):null:u}).concat(e).reduce((s,u)=>(u&&Object.entries(u).forEach(f=>{let[c,p]=f;if(!(o&&[ot,it].includes(c)))if(c.indexOf("on")===0){if(r.has(c)||r.set(c,[]),typeof p=="function"){var R;(R=r.get(c))==null||R.push(p),s[c]=function(){for(var y,d=arguments.length,E=new Array(d),g=0;g<d;g++)E[g]=arguments[g];return(y=r.get(c))==null?void 0:y.map(S=>S(...E)).find(S=>S!==void 0)}}}else s[c]=p}),s),{})}}function sr(e){e===void 0&&(e=[]);const t=e.map(u=>u==null?void 0:u.reference),n=e.map(u=>u==null?void 0:u.floating),r=e.map(u=>u==null?void 0:u.item),o=a.useCallback(u=>Be(u,e,"reference"),t),i=a.useCallback(u=>Be(u,e,"floating"),n),s=a.useCallback(u=>Be(u,e,"item"),r);return a.useMemo(()=>({getReferenceProps:o,getFloatingProps:i,getItemProps:s}),[o,i,s])}const Un=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function ar(e,t){var n,r;t===void 0&&(t={});const{open:o,elements:i,floatingId:s}=e,{enabled:u=!0,role:f="dialog"}=t,c=He(),p=((n=i.domReference)==null?void 0:n.id)||c,R=a.useMemo(()=>{var m;return((m=Ke(i.floating))==null?void 0:m.id)||s},[i.floating,s]),y=(r=Un.get(f))!=null?r:f,E=Dt()!=null,g=a.useMemo(()=>y==="tooltip"||f==="label"?{["aria-"+(f==="label"?"labelledby":"describedby")]:o?R:void 0}:{"aria-expanded":o?"true":"false","aria-haspopup":y==="alertdialog"?"dialog":y,"aria-controls":o?R:void 0,...y==="listbox"&&{role:"combobox"},...y==="menu"&&{id:p},...y==="menu"&&E&&{role:"menuitem"},...f==="select"&&{"aria-autocomplete":"none"},...f==="combobox"&&{"aria-autocomplete":"list"}},[y,R,E,o,p,f]),S=a.useMemo(()=>{const m={id:R,...y&&{role:y}};return y==="tooltip"||f==="label"?m:{...m,...y==="menu"&&{"aria-labelledby":p}}},[y,R,p,f]),T=a.useCallback(m=>{let{active:h,selected:k}=m;const N={role:"option",...h&&{id:R+"-fui-option"}};switch(f){case"select":case"combobox":return{...N,"aria-selected":k}}return{}},[R,f]);return a.useMemo(()=>u?{reference:g,floating:S,item:T}:{},[u,g,S,T])}export{nr as F,rr as a,or as b,ar as c,sr as d,er as e,Qn as f,tr as g,zn as o,Jn as s,ir as u};
