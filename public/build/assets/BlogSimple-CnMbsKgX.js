var e=Object.defineProperty,s=(s,t,a)=>((s,t,a)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a)(s,"symbol"!=typeof t?t+"":t,a);import{j as t,B as a,r as l,b as r}from"./System-Bybt2Brn.js";import{C as i}from"./chevron-down-r_B4RFE6.js";import{S as n}from"./search--TD4pUuj.js";import{C as o}from"./check-BqyWwvbE.js";import{L as c}from"./Loading-B56-7KDx.js";import{N as d}from"./NoResult-m-3gmVGS.js";import"./vendor-BiOv2i5T.js";import"./createLucideIcon-oahCLV50.js";function u({data:e,flex:s=!1,post:a,featured:l=!1}){return t.jsx("article",{className:"group relative "+(l?"h-full":""),children:t.jsxs("a",{href:`/post/${null==a?void 0:a.slug}`,className:`block ${s&&"flex gap-4 "}`,children:[t.jsx("div",{className:`relative aspect-video overflow-hidden rounded-lg ${s&&"aspect-square  w-1/2"} `,children:t.jsx("img",{src:`/storage/images/post/${null==a?void 0:a.image}`,alt:null==a?void 0:a.name,fill:!0,className:"object-cover transition-transform duration-300 group-hover:scale-105 h-full w-full"})}),t.jsxs("div",{className:`mt-4 space-y-1 ${s&&"w-1/2 mt-0 gap-2"}`,children:[t.jsx("span",{className:"customtext-neutral-dark opacity-90 font-semibold text-base 2xl:text-lg",children:null==a?void 0:a.category.name}),t.jsx("h3",{className:"text-xl 2xl:text-2xl font-semibold customtext-neutral-dark group-hover:customtext-primary leading-tight",children:null==a?void 0:a.name}),t.jsx("p",{className:"line-clamp-3 customtext-neutral-dark opacity-85 text-base 2xl:text-xl leading-tight",children:null==a?void 0:a.summary}),t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[t.jsx("time",{children:null==a?void 0:a.post_date}),(null==e?void 0:e["bool:show_seen"])&&t.jsxs(t.Fragment,{children:[t.jsx("i",{className:"mdi mdi-circle-medium"}),t.jsx("span",{children:"Leído hace 5 minutos"})]})]})]})]})})}const m=({options:e=[],placeholder:s="Select an option",onChange:a,valueKey:r,labelKey:c,label:d,labelClass:u,className:m,disabled:x=!1})=>{const[p,h]=l.useState(!1),[g,f]=l.useState(null),[j,v]=l.useState(""),b=l.useRef(null),y=e.length>0&&"object"==typeof e[0],N=y?r||Object.keys(e[0])[0]:null,w=y?c||Object.keys(e[0])[1]:null,k=e.map((e=>y?{value:e[N],label:e[w]}:{value:e,label:e})).filter((e=>e.label.toLowerCase().includes(j.toLowerCase())));l.useEffect((()=>{const e=e=>{b.current&&!b.current.contains(e.target)&&h(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[]);return t.jsxs("div",{className:"relative w-full",ref:b,children:[d&&t.jsx("label",{className:`block text-sm mb-1 customtext-neutral-dark ${u}`,children:d}),t.jsxs("button",{className:`w-full relative text-start  px-4 py-3 border customtext-neutral-dark   rounded-xl focus:ring-0 focus:outline-0   transition-all duration-300 ${m}`,onClick:()=>h(!p),"aria-haspopup":"listbox","aria-expanded":p,disabled:x,children:[t.jsx("span",{className:"block truncate",children:g?g.label:s}),t.jsx("span",{className:"absolute inset-y-0 right-0 flex items-center justify-center py-3 pr-2 pointer-events-none",children:t.jsx(i,{className:"w-5 h-5 customtext-neutral-dark transition-transform duration-200 "+(p?"rotate-180":"")})})]}),p&&t.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white rounded-lg shadow-lg max-h-60 overflow-auto",children:[t.jsx("div",{className:"sticky top-0 bg-white p-2",children:t.jsxs("div",{className:"relative",children:[t.jsx(n,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),t.jsx("input",{type:"text",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Search options...",value:j,onChange:e=>v(e.target.value)})]})}),t.jsx("ul",{className:"py-1",role:"listbox",children:k.map((e=>t.jsxs("li",{className:"px-4 py-2 cursor-pointer flex items-center justify-between \n                                    "+(g&&g.value===e.value?"bg-blue-500 text-white":"hover:bg-gray-100"),onClick:()=>(e=>{f(e),a(e.value),h(!1)})(e),role:"option","aria-selected":g&&g.value===e.value,children:[t.jsx("span",{className:"block truncate",children:e.label}),g&&g.value===e.value&&t.jsx(o,{className:"w-5 h-5"})]},e.value)))})]})]})},x=new class extends a{constructor(){super(...arguments),s(this,"path","posts")}};function p({data:e,posts:s,setPosts:a,headerPosts:i,filteredData:o,loading:c,setLoading:d,isFilter:p,setIsFilter:h}){const{categories:g}=o,[f,j]=l.useState({category_id:"",post_date:"",name:""}),[v,b]=l.useState(!0);l.useEffect((()=>{v?b(!1):(async()=>{d(!0);try{const e=(e=>{const s=[];return e.category_id&&s.push(["category_id","=",e.category_id]),e.post_date&&s.push(["post_date","=",e.post_date]),e.name&&s.push(["name","contains",e.name]),s})(f),s=f.category_id||f.post_date||f.name,t={with:"category",filter:e},l=await x.paginate(t);a(l.data),h(!!s)}catch(e){}finally{d(!1)}})()}),[f]);const y=(e,s)=>{j((t=>({...t,[e]:s})))};return l.useEffect((()=>{}),[s]),t.jsx("main",{className:"bg-white !font-font-general",children:t.jsxs("section",{className:"px-primary "+(p?"pt-8":"py-8"),children:[t.jsxs("div",{className:"space-y-4",children:[t.jsx("h1",{className:"customtext-primary font-title text-3xl md:text-5xl 2xl:text-6xl font-bold tracking-tight whitespace-break-spaces",children:(null==e?void 0:e.title)?null==e?void 0:e.title:t.jsxs(t.Fragment,{children:["Descubre lo mejor:",t.jsx("br",{}),"Publicaciones sobre el mundo de ",r.APP_NAME]})}),(null==e?void 0:e.description)&&t.jsx("p",{className:"customtext-neutral-dark opacity-80 text-base 2xl:text-xl",children:"Nuestros juguetes están diseñados para inspirar, educar y divertir, desarrollando habilidades esenciales desde temprana edad."})]}),t.jsxs("div",{className:"mt-8 flex flex-col md:flex-row gap-4 justify-between",children:[t.jsxs("div",{className:"relative md:w-6/12 flex items-center",children:[t.jsx("input",{type:"search",placeholder:"Buscar publicación",className:"w-full px-4 relative py-3 border customtext-neutral-dark  border-neutral-ligth rounded-xl focus:ring-0 focus:outline-0   transition-all duration-300",onChange:e=>y("name",e.target.value)}),t.jsx("div",{className:"absolute right-3 p-2 rounded-xl bg-primary",children:t.jsx(n,{className:" h-5 w-5 text-white"})})]}),t.jsxs("div",{className:"flex w-full gap-2 md:gap-4 md:w-5/12",children:[t.jsx("div",{className:"w-1/2 md:w-full",children:t.jsx(m,{options:g,placeholder:"Todas las categorías",onChange:e=>{j((s=>({...s,category_id:e})))},labelKey:"name",valueKey:"id"})}),t.jsx("input",{type:"date",className:"w-1/2 md:w-full px-4 py-3 border customtext-neutral-dark  border-neutral-ligth rounded-xl focus:ring-0 focus:outline-0   transition-all duration-300",onChange:e=>{y("post_date",e.target.value)}})]})]}),!p&&t.jsxs("div",{className:"mt-12 flex gap-8 bg-accent p-[2.5%] rounded-2xl",children:[t.jsx("div",{className:"w-full md:w-1/2",children:t.jsx(u,{data:e,featured:!0,post:i[0]})}),t.jsx("div",{className:"hidden md:flex space-y-4  flex-col w-1/2",children:i.slice(1,3).map((s=>t.jsx(u,{data:e,flex:!0,post:s},s.id)))})]})]})})}function h({data:e,posts:s,postsLatest:a,loading:l,isFilter:r}){return t.jsx("section",{className:"font-font-general "+(r?"pb-16":"pt-8 pb-16"),children:t.jsx("div",{className:"px-[5%]  mx-auto",children:r?t.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-8 mt-8",children:l?t.jsx("div",{className:"col-span-3 my-8",children:t.jsx(c,{})}):Array.isArray(s)&&s.length>0?s.map(((s,a)=>t.jsx(u,{data:e,post:s},a))):t.jsx("div",{className:"col-span-3 my-8",children:t.jsx(d,{})})}):t.jsxs("div",{children:[t.jsx("h2",{className:"text-3xl font-bold mb-4 font-title customtext-primary",children:(null==e?void 0:e.second_title)?null==e?void 0:e.second_title:"Últimas publicaciones"}),(null==e?void 0:e.second_description)&&t.jsx("p",{className:"text-gray-600 mb-8",children:"Nam tempor diam quis urna maximus, ac laoreet arcu convallis. Aenean dignissim nec sem quis consequat."}),t.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-8",children:Array.isArray(a)&&a.length>0?a.map(((s,a)=>t.jsx(u,{data:e,post:s},a))):t.jsx("div",{className:"col-span-3 my-8",children:t.jsx(d,{})})})]})})})}const g=({data:e,headerPosts:s,filteredData:a,postsLatest:r})=>{const[i,n]=l.useState([]),[o,c]=l.useState(!1),[d,u]=l.useState(!1);return t.jsxs(t.Fragment,{children:[t.jsx(p,{data:e,headerPosts:s,loading:o,setLoading:c,posts:i,setPosts:n,filteredData:a,isFilter:d,setIsFilter:u}),t.jsx(h,{data:e,postsLatest:r,posts:i,loading:o,setLoading:c,isFilter:d,setIsFilter:u})]})};export{g as default};
