import{r as e,j as a,X as s,S as t,E as r,J as n}from"./vendor-react-DD0uBW7s.js";import i from"./MenuSimple-DQRp5kjt.js";function l({search:l,setSearch:o,pages:c,items:m,onClose:d,data:u}){const[h,x]=e.useState("main"),[f,p]=e.useState(null),[g,b]=e.useState(null),[v,y]=e.useState([]),[j,N]=e.useState("right"),w=e.useRef(null),C=(e,a="right",s=null)=>{N(a),s&&p(s),setTimeout(()=>{x(e)},50)};return e.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),e.useEffect(()=>{const e=e=>{"Escape"===e.key&&(l.trim()?o(""):d())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[l,d,o]),a.jsxs("div",{className:"fixed inset-0 z-[99999] flex flex-col touch-none overscroll-none",children:[a.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:d}),a.jsx("div",{className:"relative w-full md:w-[400px] md:mx-auto flex flex-col h-[100dvh]  ",children:a.jsxs("div",{className:"mt-auto bg-white  shadow-xl flex flex-col max-h-[80vh] rounded-t-2xl overflow-hidden",children:[a.jsxs("div",{className:"p-4 bg-white flex justify-between items-center border-b border-gray-200 sticky top-0 z-[9999]",children:[a.jsx("h1",{className:"text-lg font-bold",children:"Menú principal"}),a.jsx("button",{className:"p-2 rounded-full hover:bg-gray-100",onClick:d,children:a.jsx(s,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"overflow-y-auto flex-1 p-4 overscroll-contain",children:[a.jsx("div",{className:"mb-5",children:a.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),l.trim()){const e=l.trim();window.location.href=`/catalogo?search=${encodeURIComponent(e)}`}return!1},role:"search",className:"relative w-full",children:[a.jsx("input",{ref:w,type:"search",name:"search",placeholder:`${u?.input_search_placeholder||"Buscar productos"}`,value:l,onChange:e=>o(e.target.value),onKeyDown:e=>{if("Enter"===e.key&&(e.preventDefault(),l.trim())){const e=l.trim();window.location.href=`/catalogo?search=${encodeURIComponent(e)}`}},className:"w-full pr-12 py-3 pl-4 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary/20 focus:outline-none",enterKeyHint:"search",inputMode:"search",autoComplete:"off",role:"searchbox","aria-label":`${u?.input_search_placeholder||"Buscar productos"}`}),a.jsx("button",{type:"submit",className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors","aria-label":"Buscar",children:a.jsx(t,{className:"h-4 w-4"})})]})}),"main"!==h&&a.jsxs("button",{onClick:()=>{if(v.length>0){const e=v[v.length-1];C(e.level,"left"),y(v.slice(0,-1))}else"subcategories"===h?C("categories","left"):"categories"===h&&C("main","left")},className:"flex items-center customtext-primary mb-4 font-medium",children:[a.jsx(r,{className:"h-5 w-5 mr-1"}),a.jsx("span",{children:"categories"===h?"Categorías":f})]}),a.jsx("div",{className:"pb-16",children:(()=>{if("main"===h)return a.jsxs("div",{className:"animate-fade animate-duration-300",children:[a.jsxs("button",{className:"px-4 py-2 mb-3 w-full flex justify-between items-center hover:bg-gray-50 active:bg-primary transition-all  rounded-xl",onClick:()=>{C("categories","right")},children:[a.jsx("div",{className:"flex items-center",children:a.jsx("span",{className:"font-medium",children:"Categorías"})}),a.jsx(n,{className:"h-5 w-5 customtext-neutral-light"})]}),a.jsx("div",{className:"space-y-2",children:c.map((e,s)=>e.menuable&&a.jsx("a",{href:e.path,className:"p-4 py-2 flex justify-between items-center w-full hover:bg-gray-50 active:bg-primary transition-all  rounded-xl",children:a.jsx("span",{className:"font-medium",children:e.name})},s))})]});if("categories"===h){const e=[...m].sort((e,a)=>"order_index"===u?.type_order?(e.order_index||0)-(a.order_index||0):e.name.localeCompare(a.name,"es",{sensitivity:"base"}));return a.jsx("div",{className:"right"===j?"animate-fade-left animate-duration-300":"animate-fade-right animate-duration-300",children:a.jsx("div",{className:"space-y-2",children:e.map(e=>a.jsxs("div",{className:"px-4 py-2  rounded-xl flex justify-between items-center cursor-pointer hover:bg-gray-50 active:bg-primary transition-all",onClick:()=>(e=>{b(e.name),y([...v,{level:h,name:"Categorías"}]),C("subcategories","right",e.name)})(e),children:[a.jsx("span",{className:"font-medium",children:e.name}),a.jsx(n,{className:"h-5 w-5 customtext-neutral-light"})]},e.id))})})}if("subcategories"===h&&f){const e=m.find(e=>e.name===f),s=e.subcategories?[...e.subcategories].sort((e,a)=>"order_index"===u?.type_order?(e.order_index||0)-(a.order_index||0):e.name.localeCompare(a.name,"es",{sensitivity:"base"})):[];return a.jsx("div",{className:"right"===j?"animate-fade-left animate-duration-300":"animate-fade-right animate-duration-300",children:a.jsx("div",{className:"space-y-2",children:s.map((e,s)=>a.jsxs("a",{href:`/catalogo?subcategory=${e.slug}`,className:"flex w-full px-4  py-2 rounded-xl justify-between items-center hover:bg-gray-50 active:bg-primary transition-all",children:[a.jsx("span",{className:"font-medium",children:e.name}),a.jsx(n,{className:"h-5 w-5 customtext-neutral-light"})]},s))})})}})()}),a.jsx("div",{className:"absolute bottom-0 left-0 right-0  flex justify-center",children:a.jsx(i,{visible:!0})})]})]})})]})}export{l as M};
