import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as b}from"./index-BOnQTV8N.js";import"./HeaderSearch-j9L8kXPt.js";import"./main-B6F2O9-U.js";import"./MobileMenu-pOsYkBXS.js";import{R as u}from"./PolicyModal-C80IvD61.js";import{N as x,C as h}from"./Number2Currency-jIsa99f9.js";import{i as f}from"./tippy-react.esm-DmkRJDEW.js";import{m as p}from"./proxy-B0QLMKEh.js";import{P as y}from"./package-DBFPPBi1.js";import{T as j}from"./trash-2-DU7LB6-f.js";import{M as g}from"./minus-Db6MFKEO.js";import{P as N}from"./plus-CTIomuuF.js";import{A as v}from"./index-BZvh78jk.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./CartItemRow-Dd2JdCJX.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./CardProductKatya-ncpmQ0JU.js";import"./index-pSueRYGM.js";import"./index-B6ujFmsw.js";import"./BasicRest-BML1C-ua.js";import"./BooleanLimit-D-OsQsek.js";import"./index-Chjiymov.js";import"./General-apRuNwp7.js";import"./createLucideIcon-DfjclApS.js";const w=({setCart:a,index:o,...s})=>{var r;const i=s.type==="combo",l=()=>a(t=>t.filter(m=>m.id!==s.id||m.type!==s.type)),c=t=>{if(t<1)return l();a(m=>m.map(d=>d.id===s.id&&d.type===s.type?{...d,quantity:t}:d))},n=i?s.final_price||s.price:s.discount>0?Math.min(s.price,s.discount):s.price;return e.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:50},transition:{delay:o*.05},className:"flex gap-4 p-4   transition-shadow",children:[e.jsxs("div",{className:"flex-shrink-0 relative",children:[e.jsx("img",{src:i?s.image?`/storage/images/combo/${s.image}`:`/storage/images/item/${s.image}`:`/storage/images/item/${s.image}`,onError:t=>t.target.src="/assets/img/noimage/no_img.jpg",className:"w-20 h-20  object-cover border border-primary",alt:s.name}),i&&e.jsx("div",{className:"absolute -top-1 -right-1 bg-primary text-white rounded-full p-1",children:e.jsx(y,{size:12})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"max-w-52",children:[e.jsx("h3",{className:"font-semibold line-clamp-2  text-white truncate",children:s.name}),i&&e.jsxs("span",{className:"text-xs customtext-primary font-medium",children:["Combo (",((r=s.combo_items)==null?void 0:r.length)||0," productos)"]})]}),e.jsx(f,{content:"Eliminar",children:e.jsx("button",{onClick:l,className:"text-gray-400 hover:text-red-500 transition-colors",children:e.jsx(j,{size:18})})})]}),!i&&(s==null?void 0:s.discount)>0&&e.jsxs("div",{className:"text-sm text-white mb-2",children:[e.jsx("span",{className:"line-through mr-2",children:x(s.price)}),e.jsxs("span",{className:"text-red-500",children:["-",Number(s.discount_percent).toFixed(0),"%"]})]}),i&&(s==null?void 0:s.discount)>0&&e.jsxs("div",{className:"text-sm text-white mb-2",children:[e.jsxs("span",{className:"line-through mr-2",children:[h()," ",x(s.price)]}),e.jsxs("span",{className:"text-red-500",children:["-",Number(s.discount_percent).toFixed(0),"%"]})]}),i&&s.combo_items&&e.jsxs("div",{className:"text-xs text-white mb-2",children:["Incluye: ",s.combo_items.map(t=>t.name).join(", ")]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center border border-gray-200 ",children:[e.jsx("button",{onClick:()=>c(s.quantity-1),className:"p-2 hover:bg-primary transition-colors",children:e.jsx(g,{size:16,className:"text-white"})}),e.jsx("span",{className:"w-8 text-center text-white font-medium",children:s.quantity}),e.jsx("button",{onClick:()=>c(s.quantity+1),className:"p-2 hover:bg-primary transition-colors",children:e.jsx(N,{size:16,className:"text-white"})})]}),e.jsxs("span",{className:"font-semibold text-white",children:[h()," ",x(n*s.quantity)]})]})]})]})};u.setAppElement("#app");const X=({data:a,cart:o,setCart:s,modalOpen:i,setModalOpen:l})=>{b.useEffect(()=>{i?(document.body.classList.add("overflow-hidden"),document.documentElement.classList.add("overflow-hidden")):(document.body.classList.remove("overflow-hidden"),document.documentElement.classList.remove("overflow-hidden"))},[i]);const c=o.reduce((r,t)=>r+t.final_price*t.quantity,0),n=o.length===0;return e.jsx(u,{isOpen:i,onRequestClose:()=>l(!1),contentLabel:"Carrito de compras",closeTimeoutMS:300,className:"fixed z-[99999] !rounded-none inset-0 md:inset-auto md:top-0 md:right-0 bg-secondary p-6 shadow-2xl w-full max-w-[480px] h-[100dvh] max-h-[100dvh] lg:h-screen flex flex-col outline-none md:rounded-l-xl animate-slide-in",overlayClassName:"fixed inset-0 bg-black/60 z-[200] backdrop-blur-sm transition-opacity",children:e.jsxs("div",{className:"flex flex-col flex-1 h-full",children:[e.jsxs("div",{className:"flex-shrink-0 flex justify-between items-center mb-6 pb-4 border-b border-gray-100",children:[e.jsx(p.h2,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-2xl font-bold customtext-primary",children:"Tu Carrito"}),e.jsx("button",{onClick:()=>l(!1),className:"p-2 rounded-full  transition-colors",children:e.jsx("i",{className:"mdi mdi-close text-2xl text-white hover:text-gray-700 transition-colors"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto min-h-0 mb-4 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:e.jsx(v,{mode:"wait",children:n?e.jsxs(p.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center h-full text-center p-8 min-h-[300px]",children:[e.jsx("div",{className:"mb-6 text-white",children:e.jsx("i",{className:"mdi mdi-cart-outline text-7xl text-white"})}),e.jsx("p",{className:"text-white text-lg font-medium mb-4",children:"Tu carrito está vacío"})]},"empty"):e.jsx(p.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-4 pr-2 pb-4",children:o.map((r,t)=>e.jsx(w,{...r,setCart:s,index:t},r.id))},"items")})}),e.jsxs("div",{className:"flex-shrink-0 pt-4 border-t border-gray-100 sticky bottom-0 z-10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("span",{className:"text-lg font-semibold text-white",children:"Total:"}),e.jsxs("span",{className:"text-xl font-bold text-white",children:[h()," ",x(c)]})]}),e.jsx("a",{href:(a==null?void 0:a.link_cart)||"/cart",disabled:n,className:`w-full block text-center py-4 font-semibold transition-all duration-300 ${n?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-primary text-white hover:shadow-lg hover:scale-[1.02] active:scale-100"}`,children:"Ir al carrito"})]})]})})};export{X as C};
