import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as a}from"./index-BOnQTV8N.js";import{G as C}from"./Global-Bz6gVLc5.js";import{C as E}from"./HeaderSearch-BKNHzMkQ.js";import{G as d}from"./General-CE1RDd44.js";import{I as S}from"./ItemsRest-Dp5IKigO.js";import{C as N,N as _}from"./Number2Currency-ld0bFawA.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./PolicyModal-C80IvD61.js";import"./index-B6ujFmsw.js";import"./index-Chjiymov.js";import"./CartItemRow-CpDVeE23.js";import"./tippy-react.esm-DmkRJDEW.js";import"./index-pSueRYGM.js";import"./CartKuchara-D9l7c7at.js";import"./proxy-8H4LMZAz.js";import"./resolve-elements-WL2ErOKm.js";import"./bed-D_dyLoh5.js";import"./createLucideIcon-DfjclApS.js";import"./trash-2-DU7LB6-f.js";import"./calendar-BSC6xbA7.js";import"./moon-BU5XInRR.js";import"./users-w-WaEtvX.js";import"./package-DBFPPBi1.js";import"./minus-Db6MFKEO.js";import"./plus-CTIomuuF.js";import"./index-DBRilyZQ.js";import"./main-B6F2O9-U.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./BasicRest-BML1C-ua.js";import"./CardProductKatya-ncpmQ0JU.js";import"./BooleanLimit-D-OsQsek.js";const R=new S,me=({data:o,cart:c,setCart:b,pages:M})=>{var h,f,g,j;const[y,x]=a.useState(!1),[n,i]=a.useState(!1),[r,p]=a.useState(""),[u,l]=a.useState([]),m=a.useRef(null);a.useEffect(()=>{const t=s=>{m.current&&!m.current.contains(s.target)&&i(!1)};return n&&document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[n]),a.useEffect(()=>{r.length>2?R.paginate({filter:[["name","contains",r],"or",["summary","contains",r],"or",["description","contains",r]]}).then(({data:t})=>{if(!t)return l([]);l(t)}):l([])},[r]),a.useEffect(()=>{p("")},[n]);const v=c.reduce((t,s)=>Number(t)+Number(s.quantity),0),w=c.reduce((t,s)=>{const k=s.discount?s.discount:s.price;return t+Number(s.quantity)*k},0);return e.jsxs(e.Fragment,{children:[e.jsx("section",{className:"bg-white shadow z-20 sticky top-0",children:e.jsxs("header",{className:"px-[5%] mx-auto flex p-3 justify-between items-center",children:[e.jsx("a",{href:"/",className:"flex-shrink-0",children:e.jsx("img",{className:"h-12 aspect-[13/4] object-contain object-center w-auto",src:`/assets/resources/logo.png?v=${crypto.randomUUID()}`,alt:C.APP_NAME,onError:t=>{t.target.onerror=null,t.target.src="/assets/img/logo-bk.svg"}})}),e.jsx("div",{className:"hidden md:flex relative flex-grow mx-8 max-w-xl",children:e.jsxs("button",{onClick:()=>i(!0),className:"w-full py-2 px-4 bg-accent rounded-full text-sm text-left text-gray-500 cursor-pointer hover:bg-accent/80 transition-colors",children:["Estoy buscando...",e.jsx("i",{className:"mdi mdi-magnify float-end"})]})}),e.jsxs("div",{className:"flex items-center gap-5",children:[((h=d)==null?void 0:h.support_phone)&&e.jsxs("a",{href:`//wa.me/${(g=(f=d)==null?void 0:f.support_phone)==null?void 0:g.keep("0-9")}`,className:"hidden md:block text-right",target:"_blank",children:[e.jsx("p",{className:"text-xs font-medium",children:"Haz tu pedido"}),e.jsx("p",{className:"text-sm font-bold",children:(j=d)==null?void 0:j.support_phone})]}),e.jsx("button",{className:"md:hidden",onClick:()=>i(!0),children:e.jsx("i",{className:"mdi mdi-magnify text-2xl"})}),e.jsx("button",{className:"cursor-pointer",onClick:()=>location.href="/login",children:e.jsx("i",{className:"mdi mdi-account-outline text-2xl"})}),e.jsxs("button",{className:"relative flex items-center",onClick:()=>x(!0),children:[e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"mdi mdi-cart-outline text-2xl"}),e.jsx("span",{className:"flex items-center justify-center absolute w-5 h-5 -right-1 -top-1 bg-primary text-[10px] text-white rounded-full",children:v})]}),e.jsxs("div",{className:"hidden md:block ml-2 text-left",children:[e.jsx("p",{className:"text-xs font-medium",children:"Tu carrito"}),e.jsxs("p",{className:"text-sm font-bold",children:[N()," ",w.toFixed(2)]})]})]})]})]})}),n&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-start justify-center pt-20",children:e.jsxs("div",{ref:m,className:"bg-white w-full max-w-xl rounded-lg shadow-xl mx-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",autoFocus:!0,value:r,onChange:t=>p(t.target.value),placeholder:"Estoy buscando (mÃ­nimo 2 caracteres)...",className:"w-full p-3 px-4 bg-transparent focus:outline-none"}),e.jsx("button",{onClick:()=>i(!1),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:e.jsx("i",{className:"mdi mdi-close text-xl"})})]}),e.jsxs("div",{className:"max-h-[60vh] overflow-y-auto",children:[u.map(t=>e.jsxs("a",{href:`/${o==null?void 0:o.path_product}/${t.slug}`,className:"px-4 py-3 hover:bg-gray-50 cursor-pointer flex gap-2 items-center border-t",children:[e.jsx("img",{src:`/storage/images/item/${t.image}`,className:"h-10 aspect-[4/3] rounded",alt:t.name,onError:s=>s.target.src="/api/cover/thumbnail/null"}),e.jsxs("div",{className:"w-[calc(100%-60px)]",children:[e.jsx("h3",{className:"font-bold truncate w-full",children:t.name}),e.jsxs("h3",{className:"text-nowrap text-sm font-bold",children:[N()," ",_(t.final_price),(t==null?void 0:t.discount_percent)>0&&e.jsx("span",{className:"ms-1 line-through text-gray-500 font-normal text-xs",children:t.price})]}),e.jsx("p",{className:"text-sm text-gray-600",children:t.summary})]})]},t.id)),r.length>2&&u.length===0&&e.jsxs("div",{className:"p-4 text-center text-gray-500 border-t",children:['No se encontraron resultados para "',r,'"']})]})]})}),e.jsx(E,{data:o,cart:c,setCart:b,modalOpen:y,setModalOpen:x})]})};export{me as default};
