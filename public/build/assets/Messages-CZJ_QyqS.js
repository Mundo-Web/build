var e=Object.defineProperty,s=(s,a,n)=>((s,a,n)=>a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[a]=n)(s,"symbol"!=typeof a?a+"":a,n);import{c as a,j as n,r}from"./vendor-react-CWR92fp6.js";import{B as t}from"./Base-CaFGfdNS.js";import{C as i}from"./CreateReactScript-DEkx_UD4.js";import{T as o}from"./Table-BoT4Lq6u.js";import{D as l}from"./DxButton-C6FT_beP.js";import{R as c}from"./ReactAppend-BcjZMe63.js";import{B as d}from"./BasicRest-B3Vi_F9E.js";import{M as m}from"./Modal-BDEftn0t.js";import{S as p}from"./CartKuchara-Dv4IzV1I.js";import"./vendor-swiper-T7yreVnW.js";import"./Global-BAGAPG-V.js";import"./TippyButton-BozxD_uD.js";import"./Logout-CvukixAi.js";import"./MenuItemContainer-CUP12Xrd.js";import"./Menu-BoHY91ba.js";import"./General-ClVW7qxN.js";import"./LaravelSession-ByQnaUD3.js";import"./BooleanLimit-q2Ad9fGY.js";import"./GoogleSignInButton-D2m9IONr.js";const j=new class extends d{constructor(){super(...arguments),s(this,"path","admin/messages")}},h=()=>{const e=r.useRef(),s=r.useRef(),[a,t]=r.useState(null),i=a=>{a.seen||(j.boolean({id:a.id,field:"seen",value:!0}),$(e.current).dxDataGrid("instance").refresh()),t(a),$(s.current).modal("show")};return n.jsxs(n.Fragment,{children:[n.jsx(o,{gridRef:e,title:"Mensajes",rest:j,toolBar:s=>{s.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(e.current).dxDataGrid("instance").refresh()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"name",caption:"Nombre",cellTemplate:(e,{data:s})=>{c(e,n.jsx("span",{style:{width:"100%",fontWeight:s.seen?"lighter":"bold",cursor:"pointer"},onClick:()=>i(s),children:s.name}))}},{dataField:"email",caption:"Correo"},{dataField:"created_at",caption:"Fecha",dataType:"datetime",format:"yyyy-MM-dd HH:mm:ss",sortOrder:"desc"},{dataField:"status",caption:"Estado",dataType:"boolean",cellTemplate:(e,{data:s})=>{s.seen?c(e,n.jsx("span",{className:"badge bg-success rounded-pill",children:"Leído"})):c(e,n.jsx("span",{className:"badge bg-danger rounded-pill",children:"No leído"}))}},{caption:"Acciones",cellTemplate:(s,{data:a})=>{s.append(l({className:"btn btn-xs btn-soft-dark",title:"Ver mensaje",icon:"fa fa-eye",onClick:()=>i(a)})),s.append(l({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>(async s=>{const{isConfirmed:a}=await p.fire({title:"Eliminar mensaje",text:"¿Estas seguro de eliminar este mensaje?",icon:"warning",showCancelButton:!0,confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"});if(!a)return;await j.delete(s)&&$(e.current).dxDataGrid("instance").refresh()})(a.id)}))},allowFiltering:!1,allowExporting:!1}]}),n.jsxs(m,{modalRef:s,title:"Mensaje",hideFooter:!0,children:[n.jsxs("p",{children:[n.jsx("b",{children:"Nombre"}),":",n.jsx("span",{className:"ms-1",children:a?.name})]}),n.jsxs("p",{children:[n.jsx("b",{children:"Correo"}),":",n.jsx("span",{className:"ms-1",children:a?.email||n.jsx("i",{className:"text-muted",children:"- Sin correo -"})})]}),a?.phone&&n.jsxs("p",{children:[n.jsx("b",{children:"Teléfono"}),":",n.jsx("span",{className:"ms-1",children:a?.phone})]}),a?.company&&n.jsxs("p",{children:[n.jsx("b",{children:"Empresa"}),":",n.jsx("span",{className:"ms-1",children:a?.company})]}),a?.ruc&&n.jsxs("p",{children:[n.jsx("b",{children:"RUC"}),":",n.jsx("span",{className:"ms-1",children:a?.ruc})]}),a?.subject&&n.jsxs("p",{children:[n.jsx("b",{children:"Asunto"}),":",n.jsx("span",{className:"ms-1",children:a?.subject})]}),a?.category&&n.jsxs("p",{children:[n.jsx("b",{children:"Categoría"}),":",n.jsx("span",{className:"ms-1",children:a?.category})]}),a?.subcategory&&n.jsxs("p",{children:[n.jsx("b",{children:"Subcategoría"}),":",n.jsx("span",{className:"ms-1",children:a?.subcategory})]}),a?.machinery&&n.jsxs("p",{children:[n.jsx("b",{children:"Maquinaria"}),":",n.jsx("span",{className:"ms-1",children:a?.machinery})]}),n.jsxs("p",{children:[n.jsx("b",{children:"Mensaje"}),":",n.jsx("span",{className:"ms-1",children:a?.description})]})]})]})};i((e,s)=>{a.createRoot(e).render(n.jsx(t,{...s,title:"Mensajes",children:n.jsx(h,{...s})}))});
