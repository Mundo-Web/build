import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as i,R as O}from"./index-BOnQTV8N.js";import"./ProductNavigation-BvQObX6F.js";import{I as pe}from"./ItemsRest-Dta1XbNk.js";import{A as p}from"./ArrayJoin-2k6ba35P.js";import{L as he}from"./Loading-B-FwDSWi.js";import{N as fe}from"./NoResult-DlL_OOrq.js";import{S as be}from"./SelectForm-DbFcgKj2.js";import{C as G}from"./Number2Currency-jIsa99f9.js";import"./CartKuchara-CVImXKD8.js";import je from"./ProductCardColors-C9NNdIPj.js";import{m as d}from"./main-iQpBVKTZ.js";import{R as ye}from"./PolicyModal-B0WwLYks.js";import{F as we}from"./filter-BEzH_gaL.js";import{C as z}from"./chevron-left-JcR9Fe4w.js";import{C as B}from"./chevron-right-Cug7tVUE.js";import{X as q}from"./x-fof_H3Vv.js";import{C as _}from"./chevron-up-Mt3xll-e.js";import{S as H}from"./search-BQ59Robe.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./HeaderSearch-DmECFHvd.js";import"./CartItemRow-EFbyCHoQ.js";import"./tippy-react.esm-BGU1pa2o.js";import"./index-B8-haksW.js";import"./index-BLHw34Di.js";import"./proxy-B0QLMKEh.js";import"./bed-D_dyLoh5.js";import"./createLucideIcon-DfjclApS.js";import"./trash-2-DU7LB6-f.js";import"./calendar-BSC6xbA7.js";import"./moon-BU5XInRR.js";import"./users-w-WaEtvX.js";import"./package-DBFPPBi1.js";import"./minus-Db6MFKEO.js";import"./plus-CTIomuuF.js";import"./index-BZvh78jk.js";import"./eye-ScgfreHn.js";import"./BasicRest-tjV1jpAY.js";import"./CardProductKatya-BPLqIfPk.js";import"./BooleanLimit-D-OsQsek.js";import"./chevron-down-uIVDLcM-.js";import"./check-D5vaIe6v.js";import"./General-apRuNwp7.js";/* empty css              */import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./index-Chjiymov.js";const Ne=new pe,Nt=({items:Ce,data:m,filteredData:ve,cart:K,setCart:W})=>{const[b,Y]=i.useState([]),[j,Z]=i.useState([]),[Pe,D]=i.useState([]),[y,J]=i.useState([]),[h,U]=i.useState([]),[u,S]=i.useState({collection:!(m!=null&&m.collection),marca:!!(m!=null&&m.brand),precio:!0,categoria:!!(m!=null&&m.category),colores:!!(m!=null&&m.color)}),[X,Q]=i.useState(window.innerWidth<1024),[ee,k]=i.useState([]);i.useEffect(()=>{const t=()=>{Q(window.innerWidth<1024)};return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]);const w=t=>{S(X?s=>{const a={collection:!1,marca:!1,precio:!1,categoria:!1,colores:!1};return a[t]=!s[t],a}:s=>({...s,[t]:!s[t]}))},te=()=>{N({collection_id:[],category_id:[],brand_id:[],subcategory_id:[],price:null,name:null,sort_by:"created_at",order:"desc"}),k([])},[n,N]=i.useState({collection_id:d.GET.collection?d.GET.collection.split(","):[],category_id:d.GET.category?d.GET.category.split(","):[],brand_id:d.GET.brand?d.GET.brand.split(","):[],subcategory_id:d.GET.subcategory?d.GET.subcategory.split(","):[],price:null,name:d.GET.search||null,sort_by:"created_at",order:"desc"}),[C,se]=i.useState([]),[re,F]=i.useState(!0),[l,ae]=i.useState({currentPage:1,totalPages:1,totalItems:0,itemsPerPage:21,from:0,to:0}),le=n.collection_id.length>0||n.category_id.length>0||n.brand_id.length>0||n.subcategory_id.length>0||n.price!==null||n.name!==null,oe=t=>{var a,o;const s=[];if(t.collection_id.length>0){const r=t.collection_id.map(c=>["collection.slug","=",c]);s.push(p(r,"or"))}if(t.category_id.length>0){const r=t.category_id.map(c=>["category.slug","=",c]);s.push(p(r,"or"))}if(t.subcategory_id.length>0){const r=t.subcategory_id.map(c=>["subcategory.slug","=",c]);s.push(p(r,"or"))}if(t.brand_id.length>0){const r=t.brand_id.map(c=>["brand.slug","=",c]);s.push(p(r,"or"))}return(a=t.price)!=null&&a.min&&((o=t.price)!=null&&o.max)&&s.push([["final_price",">=",t.price.min],"or",["final_price","<=",t.price.max]]),t.name&&s.push(["name","contains",t.name]),p(s,"and")},E=async(t=1)=>{F(!0);try{const s=oe(n),a={},o={filter:s,sort:n.sort,skip:(t-1)*l.itemsPerPage,take:l.itemsPerPage,requireTotalCount:!0,filterSequence:ee},r=await Ne.paginate(o);se(r.data),ae({currentPage:t,totalPages:Math.ceil(r.totalCount/l.itemsPerPage),totalItems:r.totalCount,itemsPerPage:l.itemsPerPage,from:(t-1)*l.itemsPerPage+1,to:Math.min(t*l.itemsPerPage,r.totalCount)}),Y(r==null?void 0:r.summary.collections),Z(r==null?void 0:r.summary.brands),J(r==null?void 0:r.summary.categories),D(r==null?void 0:r.summary.subcategories),U(r==null?void 0:r.summary.priceRanges)}catch(s){console.error("Error fetching products:",s)}finally{F(!1)}};i.useEffect(()=>{E(l.currentPage)},[n]);const x=t=>{t>=1&&t<=l.totalPages&&E(t)},$=()=>{const t=[],s=l.totalPages,a=l.currentPage,o=2;for(let r=1;r<=s;r++)r===1||r===s||r>=a-o&&r<=a+o?t.push(r):(r===a-o-1||r===a+o+1)&&t.push("...");return t.filter((r,c,I)=>r!=="..."||I[c-1]!=="...")},f=(t,s)=>{k(a=>{let o=!1;if(t==="price"?o=!!s:o=!(Array.isArray(n[t])?n[t]:[]).includes(s),a.includes(t)&&o)return a;if(!a.includes(t)&&o)return[...a,t];if(!o){let r=!1;return t==="price"?r=!s:r=(Array.isArray(n[t])?[...n[t]]:[]).filter(ge=>ge!==s).length===0,r?a.filter(c=>c!==t):a}return a}),N(a=>{if(t==="price")return{...a,price:a.price&&a.price.min===(s==null?void 0:s.min)&&a.price.max===(s==null?void 0:s.max)?null:s};const o=Array.isArray(a[t])?a[t]:[],r=o.includes(s)?o.filter(c=>c!==s):[...o,s];return{...a,[t]:r}})},ie=[{value:"created_at:desc",label:"Más reciente"},{value:"created_at:asc",label:"Mas antiguo"},{value:"final_price:asc",label:"Precio: Menor a Mayor"},{value:"final_price:desc",label:"Precio: Mayor a Menor"},{value:"name:asc",label:"Nombre: A-Z"},{value:"name:desc",label:"Nombre: Z-A"}],[A,ne]=i.useState(""),[R,ce]=i.useState(""),[me,_e]=i.useState(""),g=b==null?void 0:b.filter(t=>t.name.toLowerCase().includes(R.toLowerCase())),v=y==null?void 0:y.filter(t=>t.name.toLowerCase().includes(A.toLowerCase()));j==null||j.filter(t=>t.name.toLowerCase().includes(me.toLowerCase()));const[Se,ke]=i.useState(!1),[de,T]=i.useState(!1),[M,L]=i.useState(!1),ue=()=>{T(!0),setTimeout(()=>L(!0),10),document.body.style.overflow="hidden"},P=()=>{L(!1),setTimeout(()=>T(!1),300),document.body.style.overflow="auto"},xe={overlay:{backgroundColor:M?"rgba(0, 0, 0, 0.5)":"rgba(0, 0, 0, 0)",zIndex:50,transition:"background-color 300ms ease-in-out"},content:{top:"auto",left:"0",right:"0",bottom:"0",borderRadius:"1rem 1rem 0 0",border:"none",padding:"0",height:"85vh",transform:M?"translateY(0)":"translateY(100%)",transition:"transform 300ms ease-in-out",willChange:"transform"}},V=()=>e.jsxs("div",{className:"flex-1 overflow-y-auto px-4 pb-20 lg:pb-0 lg:px-0",children:[e.jsxs("div",{className:"sticky top-0 bg-white py-4 border-b flex justify-between items-center lg:hidden",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Filtros"}),e.jsx("button",{onClick:P,children:e.jsx(q,{className:"h-6 w-6"})})]}),e.jsx("p",{className:"customtext-primary text-2xl font-bold pb-4 mb-4 border-b lg:block hidden",children:"Combina como desees"}),le&&e.jsx("div",{className:"mb-4",children:e.jsxs("button",{onClick:te,className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-800 font-medium py-2 px-4 rounded-lg transition-colors duration-200 flex items-center justify-center gap-2",children:[e.jsx(q,{size:16}),e.jsx("span",{children:"Limpiar todos los filtros"})]})}),u.collection&&(g==null?void 0:g.length)>0&&e.jsxs("div",{className:"mt-2 mb-4",children:[e.jsxs("button",{onClick:()=>w("collection"),className:"flex items-center justify-between w-full mb-2 p-2 lg:p-0",children:[e.jsx("span",{className:"font-semibold text-lg",children:"Colecciones"}),e.jsx(_,{className:`h-5 w-5 transform transition-transform ${u.collection?"":"-rotate-180"}`})]}),u.collection&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative hidden md:flex",children:[e.jsx(H,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar",className:"w-full pl-10 pr-4 py-3 border rounded-xl focus:ring-0 focus:outline-0",value:R,onChange:t=>ce(t.target.value)})]}),e.jsx("div",{className:"max-h-[200px] xl:max-h-none overflow-y-auto space-y-1 md:space-y-2",children:g==null?void 0:g.map(t=>{var a;const s=(a=n.collection_id)==null?void 0:a.includes(t.slug);return e.jsx("div",{className:`group flex items-center gap-3 p-2 rounded-lg ${s?"bg-secondary":"hover:bg-gray-50"}`,children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 accent-primary form-checkbox focus:ring-0 customtext-neutral-dark",onChange:()=>f("collection_id",t.slug),checked:s}),e.jsx("img",{src:`/storage/images/collection/${t.image}`,onError:o=>o.target.src="assets/img/noimage/no_imagen_circular.png",className:"w-8 h-8 rounded-full object-cover",alt:t.name}),e.jsx("span",{className:"text-sm lg:text-base",children:t.name})]})},t.id)})})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("button",{onClick:()=>w("categoria"),className:"flex items-center justify-between w-full mb-2 p-2 lg:p-0",children:[e.jsx("span",{className:"font-semibold text-lg",children:"Categorías"}),e.jsx(_,{className:`h-5 w-5 transform transition-transform ${u.categoria?"":"-rotate-180"}`})]}),u.categoria&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative hidden md:flex",children:[e.jsx(H,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar",className:"w-full pl-10 pr-4 py-3 border rounded-xl focus:ring-0 focus:outline-0",value:A,onChange:t=>ne(t.target.value)})]}),e.jsx("div",{className:"max-h-[200px] xl:max-h-none overflow-y-auto space-y-1 md:space-y-2",children:v==null?void 0:v.map(t=>{var a;const s=(a=n.category_id)==null?void 0:a.includes(t.slug);return e.jsx("div",{className:`group flex items-center gap-3 p-2 rounded-lg ${s?"bg-secondary":"hover:bg-gray-50"}`,children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 accent-primary form-checkbox focus:ring-0 customtext-neutral-dark",onChange:()=>f("category_id",t.slug),checked:s}),e.jsx("img",{src:`/storage/images/category/${t.image}`,onError:o=>o.target.src="assets/img/noimage/no_imagen_circular.png",className:"w-8 h-8 rounded-full object-cover",alt:t.name}),e.jsx("span",{className:"text-sm lg:text-base",children:t.name})]})},t.id)})})]})]}),u.precio&&(h==null?void 0:h.length)>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("button",{onClick:()=>w("precio"),className:"flex items-center justify-between w-full mb-2 p-2 lg:p-0",children:[e.jsx("span",{className:"font-semibold text-lg",children:"Precio"}),e.jsx(_,{className:`h-5 w-5 transform transition-transform ${u.precio?"":"-rotate-180"}`})]}),u.precio&&e.jsx("div",{className:"max-h-[200px] xl:max-h-none overflow-y-auto space-y-1 md:space-y-2",children:h.map(t=>{var a,o;const s=((a=n.price)==null?void 0:a.min)===t.min&&((o=n.price)==null?void 0:o.max)===t.max;return e.jsxs("label",{className:"flex items-center gap-2 p-2 rounded-lg hover:bg-gray-50 cursor-pointer",onClick:()=>{s?f("price",null):f("price",t)},children:[e.jsx("div",{className:`w-[18px] h-[18px] rounded-full border ${s?"border-primary":"border-gray-300"} flex items-center justify-center`,children:s&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-primary"})}),e.jsx("span",{className:"text-sm lg:text-base",children:`${G()} ${t.min} - ${G()} ${t.max}`})]},`${t.min}-${t.max}`)})})]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t p-4 h-20 flex items-center lg:hidden",children:e.jsx("button",{className:"w-full bg-primary text-white py-3 rounded-xl font-bold hover:bg-primary-dark transition-colors",onClick:P,children:"Ver resultados"})})]});return e.jsxs(e.Fragment,{children:[e.jsx(ye,{isOpen:de,onRequestClose:P,style:xe,closeTimeoutMS:300,ariaHideApp:!1,shouldCloseOnOverlayClick:!0,shouldCloseOnEsc:!0,children:V()}),e.jsx("section",{className:"py-6 font-paragraph customtext-primary",children:e.jsxs("div",{className:"mx-auto px-primary 2xl:max-w-7xl 2xl:px-0",children:[e.jsx("p",{className:"customtext-primary text-3xl font-bold mb-2 xl:hidden",children:"Combina como desees"}),e.jsxs("div",{className:"relative flex flex-col xl:flex-row gap-10",children:[e.jsx("div",{className:"hidden xl:block xl:w-1/4 lg:bg-white lg:p-0 xl:rounded-lg xl:h-max",children:V()}),e.jsxs("div",{className:"w-full pb-4",children:[e.jsxs("div",{className:"mb-4 lg:mb-8 w-full gap-5 xl:flex xl:flex-row xl:justify-between items-start",children:[e.jsxs("div",{className:"flex flex-row justify-between items-end gap-5",children:[e.jsxs("div",{className:"flex flex-col xl:flex-row xl:justify-between gap-2 xl:items-center lg:max-w-xs w-full",children:[e.jsx("label",{className:"font-semibold text-base 2xl:text-lg w-auto",children:"Ordenar por"}),e.jsx("div",{className:"min-w-52",children:e.jsx(be,{options:ie,placeholder:"Recomendados",onChange:t=>{const[s,a]=t.split(":"),o=[{selector:s,desc:a==="desc"}];N(r=>({...r,sort:o}))},labelKey:"label",valueKey:"value",className:"border-primary rounded-full customtext-primary w-full"})})]}),e.jsx("div",{children:e.jsx("button",{onClick:ue,className:"flex xl:hidden bg-primary text-white rounded-full p-3 shadow-lg z-40 items-center justify-center","aria-label":"Abrir filtros",children:e.jsx(we,{className:"w-6 h-6"})})})]}),e.jsx("div",{className:"hidden xl:flex customtext-primary font-semibold w-full lg:w-auto",children:e.jsxs("div",{className:"flex gap-3 items-center w-full",children:[e.jsx("div",{className:"customtext-primary font-semibold",children:e.jsxs("nav",{className:"flex items-center gap-x-1 min-w-max",children:[e.jsx("button",{className:`p-0 inline-flex items-center ${l.currentPage===1?"opacity-50 cursor-not-allowed":""}`,onClick:()=>x(l.currentPage-1),disabled:l.currentPage===1,children:e.jsx(z,{})}),$().map((t,s)=>e.jsx(O.Fragment,{children:t==="..."?e.jsx("span",{className:"w-10 h-10 bg-transparent p-2 inline-flex items-center justify-center rounded-full",children:"..."}):e.jsx("button",{className:`w-10 h-10 p-2 inline-flex items-center justify-center rounded-full transition-all duration-300 
                                           
                                            ${t===l.currentPage?"bg-accent text-white":"bg-transparent hover:text-white hover:bg-accent"}`,onClick:()=>x(t),children:t})},s)),e.jsx("button",{className:`p-0 inline-flex items-center ${l.currentPage===l.totalPages?"opacity-50 cursor-not-allowed":""}`,onClick:()=>x(l.currentPage+1),disabled:l.currentPage===l.totalPages,children:e.jsx(B,{})})]})}),e.jsx("div",{children:e.jsxs("p",{className:"font-semibold",children:[l.from," - ",l.to," ","de ",l.totalItems," ","Resultados"]})})]})})]}),re?e.jsx(he,{}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 md:gap-6 xl:gap-8 gap-y-2 lg:gap-y-3 transition-all duration-300 ease-in-out",children:Array.isArray(C)&&C.length>0?C.map(t=>e.jsx(je,{product:t,widthClass:"lg:w-1/3",cart:K,setCart:W},t.id)):e.jsx(fe,{})}),e.jsxs("div",{className:"flex justify-between items-center mb-4 w-full mt-8",children:[e.jsx("div",{className:"customtext-primary font-semibold",children:e.jsx("div",{className:"flex justify-between items-center mb-4 w-full mt-8",children:e.jsx("div",{className:"customtext-primary font-semibold",children:e.jsxs("nav",{className:"flex items-center gap-x-2 min-w-max",children:[e.jsx("button",{className:`p-4 inline-flex items-center ${l.currentPage===1?"opacity-50 cursor-not-allowed":""}`,onClick:()=>x(l.currentPage-1),disabled:l.currentPage===1,children:e.jsx(z,{})}),$().map((t,s)=>e.jsx(O.Fragment,{children:t==="..."?e.jsx("span",{className:"w-10 h-10 bg-transparent p-2 inline-flex items-center justify-center rounded-full",children:"..."}):e.jsx("button",{className:`w-10 h-10 p-2 inline-flex items-center justify-center rounded-full transition-all duration-300 
                                            ${t===l.currentPage?"bg-accent text-white":"bg-transparent hover:text-white hover:bg-accent"}`,onClick:()=>x(t),children:t})},s)),e.jsx("button",{className:`p-4 inline-flex items-center ${l.currentPage===l.totalPages?"opacity-50 cursor-not-allowed":""}`,onClick:()=>x(l.currentPage+1),disabled:l.currentPage===l.totalPages,children:e.jsx(B,{})})]})})})}),e.jsx("div",{children:e.jsxs("p",{className:"font-semibold",children:[l.from," - ",l.to," de"," ",l.totalItems," Resultados"]})})]})]})]})]})})]})};export{Nt as default};
