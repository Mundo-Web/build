var k=Object.defineProperty;var C=(r,t,l)=>t in r?k(r,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):r[t]=l;var w=(r,t,l)=>C(r,typeof t!="symbol"?t+"":t,l);import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as s}from"./index-BOnQTV8N.js";import{G as M}from"./Global-DWbVqTT_.js";import{m as O}from"./main-B6F2O9-U.js";import"./CardProductKatya-ncpmQ0JU.js";import{C as v}from"./Number2Currency-D9Rjvh76.js";import{S as L}from"./search-BQ59Robe.js";import F from"./TopBar-DOVCq8yH.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./index-pSueRYGM.js";import"./index-B6ujFmsw.js";import"./General-BmbBKdsB.js";import"./createLucideIcon-DfjclApS.js";import"./preload-helper-BfFHrpNk.js";class N{}w(N,"getProducts",async t=>{try{const{status:l,result:o}=await O.Fetch("/api/items/searchProducts",{method:"POST",body:JSON.stringify(t)});if(!l)throw new Error((o==null?void 0:o.message)||"Error al obtener datos");return o}catch{return!1}});const S=({search:r,setSearch:t})=>{const[l,o]=s.useState([]),[f,c]=s.useState(!1),[x,g]=s.useState(!1),u=s.useRef(null),h=s.useRef();return s.useEffect(()=>{const a=i=>{h.current&&!h.current.contains(i.target)&&c(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]),s.useEffect(()=>{if(u.current&&clearTimeout(u.current),r.trim().length===0){o([]),c(!1);return}u.current=setTimeout(async()=>{var d;g(!0);const a={query:r.trim()},i=await N.getProducts(a);i&&((d=i.data)!=null&&d.length)?(o(i.data),c(!0)):(o([]),c(!1)),g(!1)},300)},[r]),e.jsxs("div",{className:"relative w-80",ref:h,children:[e.jsx("input",{type:"search",placeholder:"Buscar productos",value:r,onChange:a=>t(a.target.value),className:"w-full pr-14 py-4 pl-4 border rounded-full border-primary focus:ring-0 focus:outline-none placeholder:text-gray-400"}),e.jsx("a",{href:r.trim()?`/catalogo?search=${encodeURIComponent(r)}`:"#",className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-2 bg-primary text-white rounded-lg","aria-label":"Buscar",children:e.jsx(L,{})}),f&&e.jsx("div",{className:"absolute mt-2 w-full bg-white border rounded-lg shadow-lg z-50 max-h-60 overflow-y-auto",children:x?e.jsx("div",{className:"px-4 py-2 text-gray-500",children:"Buscando..."}):l.length>0?l.map(a=>{const i=parseFloat(a.price),d=parseFloat(a.discount);return e.jsx("a",{href:`/item/${a.slug}`,className:"block px-1 py-1 hover:bg-gray-100 transition text-sm !font-paragraph",children:e.jsxs("div",{className:"flex items-center gap-3 px-2 py-2",children:[e.jsx("div",{className:"w-12 h-12 shrink-0",children:e.jsx("img",{src:`/storage/images/item/${a.image}`,alt:a.name,onError:m=>m.target.src="/assets/img/noimage/no_img.jpg",className:"w-full h-full object-cover rounded",loading:"lazy"})}),e.jsx("div",{className:"flex-1",children:e.jsx("h2",{className:"text-[13px] font-medium customtext-neutral-dark leading-tight line-clamp-3",children:a.name})}),e.jsxs("div",{className:"text-right text-sm min-w-[80px] customtext-neutral-dark",children:[e.jsxs("p",{className:"text-primary font-semibold",children:[v()," ",d>0?d.toFixed(2):i.toFixed(2)]}),d>0&&e.jsxs("p",{className:"text-xs text-gray-500 line-through",children:[v()," ",i.toFixed(2)]})]})]})},a.id)}):e.jsx("div",{className:"px-4 py-2 text-gray-500",children:"Sin resultados"})})]})};function B({search:r,setSearch:t,pages:l,items:o,headerPosts:f}){const[c,x]=s.useState("main"),[g,u]=s.useState(null),[h,a]=s.useState(null),[i,d]=s.useState();return e.jsx("div",{className:"w-full fixed top-[120px] h-screen customtext-neutral-dark mx-auto bg-white",children:e.jsx("div",{className:"bg-white z-50 w-full",children:e.jsxs("div",{className:"p-5 w-full flex flex-col gap-3 font-paragraph",children:[e.jsx("div",{className:"relative mb-2",children:e.jsx(S,{search:r,setSearch:t})}),e.jsx("ul",{className:"bg-white flex font-paragraph font-semibold text-lg",children:e.jsx("div",{className:"flex-col lg:flex-row order-2 lg:order-1 lg:w-full lg:justify-center",children:l.map((m,j)=>m.menuable&&(m.name!=="Blogs"||f.length>0)&&e.jsx("li",{className:"flex flex-col py-1",children:e.jsx("a",{href:m.path,className:"hover:customtext-neutral-dark cursor-pointer transition-all duration-300 pr-6",onClick:()=>setMenuOpen(!1),children:m.name})},j))})})]})})})}const W=({items:r,data:t,cart:l,setCart:o,isUser:f,pages:c,headerPosts:x,contacts:g,generals:u=[]})=>{const[h,a]=s.useState(!1),[i,d]=s.useState(!1),[m,j]=s.useState(""),[y,E]=s.useState(!1),b=s.useRef(null);return s.useEffect(()=>(y?document.body.classList.add("overflow-hidden"):document.body.classList.remove("overflow-hidden"),()=>{document.body.classList.remove("overflow-hidden")}),[y]),l.reduce((n,p)=>Number(n)+Number(p.quantity),0),s.useEffect(()=>{function n(p){b.current&&!b.current.contains(p.target)&&setIsOpen(!1)}return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[]),e.jsxs("header",{id:"main-header",className:"sticky top-0 w-full z-20 bg-white font-paragraph",children:[e.jsx(F,{data:t,which:(t==null?void 0:t.type_topbar)||"TopBarCart",items:u,cart:l,setCart:o,isUser:f,pages:c}),e.jsx("div",{className:"left-0 right-0",children:e.jsx("div",{className:"flex justify-between w-full px-[5%] py-2 lg:py-4 mx-auto replace-max-w-here 2xl:max-w-7xl 2xl:px-0",children:e.jsxs("nav",{className:"flex h-[80px] items-center justify-between gap-10 w-full",children:[e.jsx("input",{type:"checkbox",id:"menu",className:"peer/menu menu hidden"}),e.jsxs("label",{onClick:()=>E(!y),htmlFor:"menu",className:"transition-all flex flex-col gap-1 z-40 lg:hidden hamburguesa justify-center items-center order-3 lg:order-none",children:[e.jsx("p",{className:"w-7 h-1 bg-primary transition-transform duration-500"}),e.jsx("p",{className:"w-7 h-1 bg-primary transition-transform duration-500"}),e.jsx("p",{className:"w-7 h-1 bg-primary transition-transform duration-500"})]}),e.jsx("div",{className:"flex justify-center items-center z-40",children:e.jsx("a",{href:"/",className:"flex items-center gap-2",children:e.jsx("img",{src:`/assets/resources/logo.png?v=${crypto.randomUUID()}`,alt:M.APP_NAME,className:"h-20 object-contain object-center",onError:n=>{n.target.onerror=null,n.target.src="/assets/img/logo-bk.svg"}})})}),e.jsx("ul",{className:"bg-white flex font-gilroy_regular font-semibold text-lg",children:e.jsx("div",{className:"hidden lg:flex flex-col lg:flex-row order-2 lg:order-1 lg:w-full lg:justify-center gap-1 lg:gap-4",children:c.map((n,p)=>n.menuable&&(n.name!=="Blogs"||x.length>0)&&e.jsx("li",{className:"flex flex-col py-1 lg:py-0",children:e.jsx("a",{href:n.path,className:"hover:customtext-primary cursor-pointer transition-all duration-300 pr-6",onClick:()=>setMenuOpen(!1),children:n.name})},p))})}),e.jsx("div",{className:"hidden lg:flex justify-end",children:e.jsx(S,{search:m,setSearch:j})}),e.jsx("div",{className:`${y?"block":"hidden"}  lg:hidden bg-white w-full min-h-screen absolute z-50 top-[120px] left-0`,children:e.jsx(B,{search:m,setSearch:j,pages:c,items:r,headerPosts:x})})]})})})]})};export{W as default};
