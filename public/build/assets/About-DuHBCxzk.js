var V=Object.defineProperty;var P=(n,t,c)=>t in n?V(n,t,{enumerable:!0,configurable:!0,writable:!0,value:c}):n[t]=c;var w=(n,t,c)=>P(n,typeof t!="symbol"?t+"":t,c);import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{B as H}from"./Base-CDK-Nf8r.js";import{S as L}from"./SwitchFormGroup-DXN0cwVk.js";import{r}from"./index-BOnQTV8N.js";import{c as W}from"./ReactAppend-QR5TrZfj.js";import{S as _}from"./CartKuchara-D9l7c7at.js";import{B as z}from"./BasicRest-BML1C-ua.js";import{W as Q}from"./WebDetailsRest-DsgeLSDz.js";import{B as U}from"./BasicEditing-TVz-VY9q.js";import{M as J}from"./Modal-xDw9ufjg.js";import{T as K}from"./Table-R8Dry5C0.js";import{D as y}from"./DxButton-DV0H-ZcL.js";import{I as f}from"./InputFormGroup-iZIO11ZN.js";import{S as X}from"./SelectFormGroup-X8WqJHHl.js";import{A as Y}from"./ArrayDetails2Object-DR0Igcn7.js";import{C as Z,F as s}from"./CreateReactScript-DWiFeJue.js";import{R as D}from"./ReactAppend-Vm5G2nof.js";import{I as ee}from"./ImageFormGroup-40MuGzez.js";import{Q as ae}from"./QuillFormGroup-BXX8qnUc.js";import"./index-yBjzXJbu.js";import"./Global-Bz6gVLc5.js";import"./tippy-react.esm-DmkRJDEW.js";import"./index-pSueRYGM.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./index-B6ujFmsw.js";/* empty css              */import"./Logout-BpuTJ_83.js";import"./main-B6F2O9-U.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./MenuItemContainer-DcxtOi47.js";import"./index.esm-C48oHfFw.js";import"./index-ngrFHoWO.js";import"./CanAccess-DMsLTpal.js";import"./CardProductKatya-ncpmQ0JU.js";import"./BooleanLimit-D-OsQsek.js";import"./em-Dm5QugzS.js";import"./HtmlContent-ghmllTyl.js";/* empty css               */import"./General-CE1RDd44.js";import"./LaravelSession-Dz9cpV3l.js";class se extends z{constructor(){super(...arguments);w(this,"path","admin/aboutus");w(this,"hasFiles",!0)}}const b=new se,ie=new Q,T=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.hostname.includes(".local")||window.location.hostname.includes(".test"),te=[{value:"section-hero",text:"ðŸ¦¸â€â™‚ï¸ Hero Principal - SecciÃ³n principal con tÃ­tulo e imagen"},{value:"section-mision",text:"ðŸŽ¯ MisiÃ³n - SecciÃ³n de misiÃ³n de la empresa"},{value:"section-vision",text:"ðŸ”­ VisiÃ³n - SecciÃ³n de visiÃ³n de la empresa"},{value:"section-valores",text:"â­ Valores - Grid de valores empresariales"},{value:"section-equipo",text:"ðŸ‘¥ Nuestro Equipo - PresentaciÃ³n del equipo"},{value:"section-historia",text:"ðŸ“š Nuestra Historia - Historia de la empresa"},{value:"section-cta",text:"ðŸ“ž Call to Action - SecciÃ³n de contacto final"}],oe=({details:n,session:t,hasRootRole:c})=>{const d=r.useRef(),j=r.useRef(),C=r.useCallback(()=>{var a;return typeof c<"u"?c:((a=t==null?void 0:t.roles)==null?void 0:a.some(i=>i.name==="Root"))||!1},[c,t]),N=r.useRef(),m=r.useRef(),R=r.useRef(),h=r.useRef(),x=r.useRef(),g=r.useRef(),v=r.useRef(),o=r.useRef(),[k,S]=r.useState(!1),F=a=>{a!=null&&a.id?S(!0):S(!1),o.current&&o.resetDeleteFlag&&o.resetDeleteFlag(),N.current.value=(a==null?void 0:a.id)??"",m.current&&$(m.current).val((a==null?void 0:a.correlative)??"").trigger("change"),R.current.value=(a==null?void 0:a.name)??"",h.current&&s.has("aboutuses","description")&&(h.editor.root.innerHTML=(a==null?void 0:a.description)??""),x.current&&s.has("aboutuses","title")&&(x.current.value=(a==null?void 0:a.title)??""),g.current&&s.has("aboutuses","slogan")&&(g.current.value=(a==null?void 0:a.slogan)??""),v.current&&s.has("aboutuses","link")&&(v.current.value=(a==null?void 0:a.link)??""),o.current&&o.image&&s.has("aboutuses","image")&&(o.image.src=a!=null&&a.image?`/storage/images/aboutus/${a.image}`:"",o.current.value=null),$(j.current).modal("show")},I=async a=>{a.preventDefault();const i={id:N.current.value||void 0,correlative:m.current.value,name:R.current.value};s.has("aboutuses","description")&&(i.description=h.current.value),s.has("aboutuses","title")&&(i.title=x.current.value),s.has("aboutuses","slogan")&&(i.slogan=g.current.value),s.has("aboutuses","link")&&(i.link=v.current.value);const l=new FormData;for(const p in i)l.append(p,i[p]);if(o.current&&s.has("aboutuses","image")){const p=o.current.files[0];p&&l.append("image",p),o.getDeleteFlag&&o.getDeleteFlag()&&l.append("image_delete","DELETE")}await b.save(l)&&(o.current&&o.resetDeleteFlag&&o.resetDeleteFlag(),$(d.current).dxDataGrid("instance").refresh(),$(j.current).modal("hide"))},B=async({id:a,value:i})=>{await b.boolean({id:a,field:"visible",value:i})&&$(d.current).dxDataGrid("instance").refresh()},q=async a=>{const{isConfirmed:i}=await _.fire({title:"Eliminar recurso",text:"Â¿Estas seguro de eliminar este about?",icon:"warning",showCancelButton:!0,confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"});!i||!await b.delete(a)||$(d.current).dxDataGrid("instance").refresh()},O=async a=>{const i=a.toIndex;try{await b.reorder(a.itemData.id,i)&&await a.component.refresh()}catch(l){console.error("Error reordering about:",l)}},[u,A]=r.useState(Y(n)),[G,E]=r.useState(!1),M=async a=>{ie.save({page:"about",name:"video",description:a.target.value})&&(A(l=>({...l,"about.video":a.target.value})),E(!1))};return e.jsxs(e.Fragment,{children:[e.jsx(K,{gridRef:d,title:e.jsxs(e.Fragment,{children:[e.jsx(U,{correlative:"about",details:n}),G?e.jsx("input",{className:"form-control form-control-sm mb-1",defaultValue:u==null?void 0:u["about.video"],onBlur:M,autoFocus:!0}):e.jsx("smal",{className:"header-title mt-1",onClick:()=>E(!0),children:(u==null?void 0:u["about.video"])||"Sin video"})]}),rest:b,rowDragging:{allowReordering:!0,onReorder:O,dropFeedbackMode:"push"},sorting:{mode:"single"},toolBar:a=>{a.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(d.current).dxDataGrid("instance").refresh()}}),T&&a.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Nuevo About",hint:"Agregar nuevo about",onClick:()=>F()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"order_index",caption:"Orden",visible:!1,sortOrder:"asc",sortIndex:0},{dataField:"correlative",caption:"Correlativo",width:150},{dataField:"name",caption:"SecciÃ³n"},s.has("aboutuses","title")&&{dataField:"title",caption:"TÃ­tulo"},s.has("aboutuses","slogan")&&{dataField:"slogan",caption:"Slogan"},s.has("aboutuses","image")&&{dataField:"image",caption:"Imagen",width:"90px",allowFiltering:!1,cellTemplate:(a,{data:i})=>{D(a,e.jsx("img",{src:`/storage/images/aboutus/${i.image}`,style:{width:"80px",height:"80px",objectFit:"cover",objectPosition:"center",borderRadius:"4px"},onError:l=>l.target.src="/api/cover/thumbnail/null"}))}},{dataField:"visible",caption:"Visible",dataType:"boolean",cellTemplate:(a,{data:i})=>{$(a).empty(),D(a,e.jsx(L,{checked:i.visible==1,onChange:()=>B({id:i.id,value:i.visible==1?0:1})}))}},{caption:"Acciones",cellTemplate:(a,{data:i})=>{a.append(y({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>F(i)})),C()&&a.append(y({className:"btn btn-xs btn-soft-danger ml-1",title:"Eliminar",icon:"fa fa-trash",onClick:()=>q(i.id)}))},allowFiltering:!1,allowExporting:!1}]}),e.jsxs(J,{modalRef:j,title:k?"Editar about":"Agregar about",onSubmit:I,size:"xl",children:[e.jsx("input",{ref:N,type:"hidden"}),e.jsxs("div",{id:"aboutuses-container",children:[e.jsxs("ul",{className:"nav nav-pills nav-justified mb-4",role:"tablist",style:{backgroundColor:"#f8f9fa",borderRadius:"8px",padding:"4px",border:"1px solid #e9ecef"},children:[e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link active",id:"basic-info-tab","data-bs-toggle":"pill","data-bs-target":"#basic-info",type:"button",role:"tab","aria-controls":"basic-info","aria-selected":"true",style:{borderRadius:"6px",fontWeight:"500",transition:"all 0.3s ease"},children:[e.jsx("i",{className:"fas fa-info-circle me-2"}),"InformaciÃ³n BÃ¡sica"]})}),(s.has("aboutuses","title")||s.has("aboutuses","slogan")||s.has("aboutuses","description"))&&e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link",id:"content-tab","data-bs-toggle":"pill","data-bs-target":"#content",type:"button",role:"tab","aria-controls":"content","aria-selected":"false",style:{borderRadius:"6px",fontWeight:"500",transition:"all 0.3s ease"},children:[e.jsx("i",{className:"fas fa-file-alt me-2"}),"Contenido"]})}),s.has("aboutuses","image")&&e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link",id:"multimedia-tab","data-bs-toggle":"pill","data-bs-target":"#multimedia",type:"button",role:"tab","aria-controls":"multimedia","aria-selected":"false",style:{borderRadius:"6px",fontWeight:"500",transition:"all 0.3s ease"},children:[e.jsx("i",{className:"fas fa-images me-2"}),"Multimedia"]})})]}),e.jsxs("div",{className:"tab-content",children:[e.jsx("div",{className:"tab-pane fade show active",id:"basic-info",role:"tabpanel","aria-labelledby":"basic-info-tab",children:e.jsx("div",{className:"row g-3",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card border-0 shadow-sm",children:[e.jsx("div",{className:"card-header bg-light",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-tag me-2 text-primary"}),"IdentificaciÃ³n de la SecciÃ³n"]})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12",children:T?e.jsxs(X,{eRef:m,label:"Tipo de Bloque (Correlativo)",col:"col-12",required:!0,dropdownParent:"#aboutuses-container",helpText:"Selecciona el tipo de bloque que quieres crear",children:[e.jsx("option",{value:"",children:"Selecciona un bloque"}),te.map(a=>e.jsx("option",{value:a.value,children:a.text},a.value))]}):e.jsx(f,{eRef:m,label:"Correlativo",col:"col-12",required:!0,disabled:!0,helpText:"El correlativo no puede modificarse en producciÃ³n"})}),e.jsx("div",{className:"col-12",children:e.jsx(f,{eRef:R,label:"Nombre de la SecciÃ³n",col:"col-12",required:!0,placeholder:"Ej: SOBRE NOSOTROS, NUESTRA MISIÃ“N",helpText:"Nombre que aparecerÃ¡ en el badge superior de la secciÃ³n"})}),s.has("aboutuses","link")&&e.jsx("div",{className:"col-12",children:e.jsx(f,{eRef:v,label:"Enlace (Opcional)",col:"col-12",placeholder:"https://ejemplo.com",helpText:"URL externa o interna relacionada con esta secciÃ³n"})})]})})]})})})}),(s.has("aboutuses","title")||s.has("aboutuses","slogan")||s.has("aboutuses","description"))&&e.jsx("div",{className:"tab-pane fade",id:"content",role:"tabpanel","aria-labelledby":"content-tab",children:e.jsx("div",{className:"row g-3",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card border-0 shadow-sm",children:[e.jsx("div",{className:"card-header bg-light",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-file-alt me-2 text-success"}),"Contenido de la SecciÃ³n"]})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[s.has("aboutuses","title")&&e.jsx("div",{className:"col-12 mb-3",children:e.jsx(f,{eRef:x,label:"TÃ­tulo Principal",col:"col-12",placeholder:"Ej: Nuestra Historia",helpText:"TÃ­tulo grande que aparecerÃ¡ en la secciÃ³n"})}),s.has("aboutuses","slogan")&&e.jsx("div",{className:"col-12 mb-3",children:e.jsx(f,{eRef:g,label:"Slogan / Frase Decorativa",col:"col-12",placeholder:"Ej: Comprometidos con la excelencia",helpText:"Frase corta inspiradora que acompaÃ±a el contenido"})}),s.has("aboutuses","description")&&e.jsx("div",{className:"col-12",children:e.jsx(ae,{eRef:h,label:"DescripciÃ³n Detallada",helpText:"Contenido principal de la secciÃ³n (soporta formato HTML)"})})]})})]})})})}),s.has("aboutuses","image")&&e.jsx("div",{className:"tab-pane fade",id:"multimedia",role:"tabpanel","aria-labelledby":"multimedia-tab",children:e.jsx("div",{className:"row g-3",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card border-0 shadow-sm",children:[e.jsx("div",{className:"card-header bg-light",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-images me-2 text-info"}),"Imagen de la SecciÃ³n"]})}),e.jsxs("div",{className:"card-body",children:[e.jsx(ee,{eRef:o,name:"image",label:"Imagen Principal",col:"col-12",aspect:16/9}),e.jsxs("small",{className:"text-muted mt-2 d-block",children:[e.jsx("i",{className:"fas fa-info-circle me-1"}),"Recomendado: 1600x900px (proporciÃ³n 16:9) para mejor visualizaciÃ³n"]})]})]})})})})]})]})]})]})};Z((n,t)=>{W.createRoot(n).render(e.jsx(H,{...t,title:"Nosotros",children:e.jsx(oe,{...t})}))});
