var Ce=Object.defineProperty;var we=(t,o,r)=>o in t?Ce(t,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[o]=r;var ne=(t,o,r)=>we(t,typeof o!="symbol"?o+"":o,r);import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as u}from"./index-BOnQTV8N.js";import{L as Se}from"./loader-circle-CSFYLd5m.js";import{S as Q}from"./sparkles-DvmvZ6mJ.js";import{a as Ne}from"./index-ngrFHoWO.js";import{C as se,N as je}from"./Number2Currency-jIsa99f9.js";import{X as Ae}from"./x-fof_H3Vv.js";import{c as Ee}from"./createLucideIcon-DfjclApS.js";import{a as _e,b as M,h as Pe,c as Z,d as De,u as Ie,S as ke,_ as Re}from"./useStateManager-7e1e8489.esm-ByDthEnc.js";import"./index-pSueRYGM.js";import{m as R}from"./main-B6F2O9-U.js";import{t as _}from"./CardProductKatya-ncpmQ0JU.js";import{G as d}from"./Global-Bz6gVLc5.js";import{G as oe}from"./General-apRuNwp7.js";import{S as Oe}from"./StoresRest-Bb6TODpG.js";/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=Ee("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),lr=({children:t,className:o="",loading:r=!1,disabled:a=!1,...l})=>e.jsxs("button",{type:"button",disabled:a||r,className:`w-full bg-primary font-bold  py-3 px-4 hover:opacity-90 hover:shadow-md transition-all duration-300 focus:outline-none active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl flex items-center justify-center gap-2 ${o}`,...l,children:[r&&e.jsx(Se,{className:"w-4 h-4 animate-spin"}),t]}),cr=({children:t,className:o="",...r})=>e.jsx("a",{className:`w-full block border-primary cursor-pointer border-2 text-center font-bold customtext-primary py-3 px-4  hover:opacity-90 hover:shadow-md transition-all duration-300 focus:outline-none active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl ${o}`,...r,children:t});function dr({onClick:t,className:o=""}){return e.jsxs("div",{className:`relative ${o}`,children:[e.jsx(Q,{size:12,className:"absolute -top-1 -left-1 text-yellow-400 animate-ping",style:{animationDelay:"0s"}}),e.jsx(Q,{size:10,className:"absolute -top-2 -right-1 text-pink-400 animate-ping",style:{animationDelay:"0.5s"}}),e.jsx(Q,{size:8,className:"absolute -bottom-1 -left-2 text-blue-400 animate-ping",style:{animationDelay:"1s"}}),e.jsx(Q,{size:14,className:"absolute -bottom-2 -right-2 text-purple-400 animate-ping",style:{animationDelay:"1.5s"}}),e.jsxs("button",{onClick:t,className:"relative group bg-primary p-2 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-110 animate-bounce cursor-pointer",style:{animationDuration:"2s",animationIterationCount:"infinite"},children:[e.jsx("div",{className:"absolute inset-0 bg-primary rounded-xl opacity-0 group-hover:opacity-50 transition-opacity duration-300 blur-lg"}),e.jsx(ee,{size:24,className:"text-white relative z-10 drop-shadow-sm"}),e.jsx("div",{className:"absolute inset-0 bg-primary rounded-xl animate-pulse opacity-30"})]}),e.jsx("div",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-20",children:"¬°Promoci√≥n disponible!"})]})}const qe="/api";class ur{static async applyToCart(o,r,a=null){var l;try{if(console.log("üõí Applying discount rules to cart:",{cartItems:o,totalAmount:r,customerEmail:a}),!Array.isArray(o)||o.length===0)return{success:!1,error:"Carrito vac√≠o o inv√°lido",data:null};const n={cart_items:o.map(m=>{const h={item_id:String(m.item_id||m.id||""),quantity:parseInt(m.quantity)||1,price:parseFloat(m.price||m.final_price||0),name:String(m.name||m.description||"Producto sin nombre"),category_id:m.category_id?String(m.category_id):null,type:m.type||"item",combo_id:m.type==="combo"?m.id:null};return console.log("üì¶ Processing cart item:",h),h}),total_amount:parseFloat(r)||0,customer_email:a||null};console.log("üì§ Sending payload to API:",n);const y=await Ne.post(`${qe}/discount-rules/apply-to-cart`,n);return y.data.status===200?{success:!0,data:y.data.data,message:y.data.message}:{success:!1,error:y.data.message||"Error al aplicar descuentos",data:null}}catch(n){return console.error("Error applying discount rules:",n),(l=n.response)!=null&&l.data?{success:!1,error:n.response.data.message||"Error del servidor",data:n.response.data.data||null}:{success:!1,error:"Error de conexi√≥n",data:null}}}static formatDiscounts(o){return!o||!Array.isArray(o)?[]:o.map(r=>({id:r.rule_id,name:r.rule_name||"Descuento autom√°tico",description:r.description||"",amount:parseFloat(r.discount_amount||0),type:r.discount_type||"fixed",promotion_type:r.promotion_type||null,free_items:r.free_items||[],formatted_amount:r.discount_type==="percentage"?`${r.discount_amount}%`:`${se()} ${parseFloat(r.discount_amount||0).toFixed(2)}`}))}static getFreeItems(o){if(!o||!Array.isArray(o))return[];const r=[];return o.forEach(a=>{a.free_items&&Array.isArray(a.free_items)&&r.push(...a.free_items)}),r}static calculateTotalDiscount(o){return!o||!Array.isArray(o)?0:o.reduce((r,a)=>r+parseFloat(a.discount_amount||0),0)}}function mr({isOpen:t,onClose:o,suggestion:r,onAddToCart:a,productName:l}){const[n,y]=u.useState(!1);if(!t||!r)return null;const m=async()=>{y(!0);try{await a(r),o()}catch(h){console.error("Error adding promotional item:",h)}finally{y(!1)}};return e.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity duration-300",onClick:o}),e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl max-w-md w-full mx-auto transform transition-all duration-300 scale-100",children:[e.jsx("button",{onClick:o,className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-gray-600 transition-colors rounded-full hover:bg-gray-100",children:e.jsx(Ae,{size:20})}),e.jsxs("div",{className:"text-center pt-8 pb-6 px-6",children:[e.jsxs("div",{className:"relative inline-block mb-4",children:[e.jsx("div",{className:"animate-bounce",children:e.jsx(ee,{size:48,className:"customtext-primary mx-auto"})}),e.jsx(Q,{size:20,className:"absolute -top-2 -right-2 text-yellow-400 animate-pulse"}),e.jsx(Q,{size:16,className:"absolute -bottom-1 -left-2 text-yellow-400 animate-pulse delay-300"})]}),e.jsx("h2",{className:"text-2xl font-bold customtext-neutral-dark mb-2",children:"üéâ ¬°Promoci√≥n Especial!"}),e.jsx("p",{className:"text-gray-600",children:"Tienes un producto que califica para una promoci√≥n"})]}),e.jsxs("div",{className:"px-6 pb-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Al tener  ",e.jsxs("span",{className:"font-semibold customtext-primary",children:[r.current_quantity," ",l]})," en tu carrito"]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[e.jsx("p",{className:"font-bold text-lg customtext-primary mb-1",children:r.rule_name}),e.jsx("p",{className:"text-sm customtext-neutral-light",children:r.description||"Obt√©n un producto gratis"})]})]})}),e.jsx("div",{className:"border-2 border-dashed rounded-xl p-4 mb-6 bg-green-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 w-9/12",children:[e.jsx("div",{className:"w-12 h-12  rounded-full flex items-center justify-center",children:e.jsx(ee,{className:"customtext-primary",size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold customtext-neutral-dark",children:r.item_name}),e.jsxs("p",{className:"text-sm customtext-primary",children:["Cantidad: ",r.suggested_quantity]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-lg font-bold customtext-primary",children:"¬°GRATIS!"}),e.jsxs("p",{className:"text-xs text-gray-500 line-through",children:[se()," ",Number(r.value||0).toFixed(2)]})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:m,disabled:n,className:"w-full bg-primary text-white font-semibold py-3 px-6 rounded-xl hover:from-green-600 hover:to-green-700 transition-all duration-200 transform hover:scale-105 disabled:opacity-50 disabled:transform-none shadow-lg",children:n?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Agregando..."})]}):e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(ee,{size:20}),e.jsx("span",{children:"¬°Agregar Regalo!"})]})}),e.jsx("button",{onClick:o,className:"w-full bg-gray-100 customtext-neutral-light font-medium py-3 px-6 rounded-xl hover:bg-gray-200 transition-colors duration-200",children:"Tal vez despu√©s"})]}),e.jsx("p",{className:"text-xs text-gray-500 text-center mt-4",children:"* Promoci√≥n v√°lida mientras tengas los productos requeridos en tu carrito"})]})]})})]})}var Le=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"];function Ue(t){var o=t.defaultOptions,r=o===void 0?!1:o,a=t.cacheOptions,l=a===void 0?!1:a,n=t.loadOptions;t.options;var y=t.isLoading,m=y===void 0?!1:y,h=t.onInputChange,S=t.filterOption,E=S===void 0?null:S,b=_e(t,Le),D=b.inputValue,N=u.useRef(void 0),s=u.useRef(!1),c=u.useState(Array.isArray(r)?r:void 0),i=M(c,2),p=i[0],I=i[1],v=u.useState(typeof D<"u"?D:""),j=M(v,2),T=j[0],O=j[1],$=u.useState(r===!0),G=M($,2),V=G[0],k=G[1],H=u.useState(void 0),K=M(H,2),F=K[0],B=K[1],f=u.useState([]),P=M(f,2),q=P[0],x=P[1],L=u.useState(!1),C=M(L,2),w=C[0],U=C[1],X=u.useState({}),ie=M(X,2),J=ie[0],le=ie[1],me=u.useState(void 0),ce=M(me,2),pe=ce[0],ge=ce[1],he=u.useState(void 0),de=M(he,2),fe=de[0],xe=de[1];l!==fe&&(le({}),xe(l)),r!==pe&&(I(Array.isArray(r)?r:void 0),ge(r)),u.useEffect(function(){return s.current=!0,function(){s.current=!1}},[]);var te=u.useCallback(function(W,Y){if(!n)return Y();var A=n(W,Y);A&&typeof A.then=="function"&&A.then(Y,function(){return Y()})},[n]);u.useEffect(function(){r===!0&&te(T,function(W){s.current&&(I(W||[]),k(!!N.current))})},[]);var ye=u.useCallback(function(W,Y){var A=Pe(W,Y,h);if(!A){N.current=void 0,O(""),B(""),x([]),k(!1),U(!1);return}if(l&&J[A])O(A),B(A),x(J[A]),k(!1),U(!1);else{var ve=N.current={};O(A),k(!0),U(!F),te(A,function(ae){s&&ve===N.current&&(N.current=void 0,k(!1),B(A),x(ae||[]),U(!1),le(ae?Z(Z({},J),{},De({},A,ae)):J))})}},[l,te,F,J,h]),be=w?[]:T&&F?q:p||[];return Z(Z({},b),{},{options:be,isLoading:V||m,onInputChange:ye,filterOption:E})}var Me=u.forwardRef(function(t,o){var r=Ue(t),a=Ie(r);return u.createElement(ke,Re({ref:o},a))}),pr=Me;class ue{}ne(ue,"getShippingCost",async o=>{try{const{status:r,result:a}=await R.Fetch("./api/delivery-prices",{method:"POST",body:JSON.stringify(o)});if(!r)throw new Error((a==null?void 0:a.message)||"Error al obtener datos");return a}catch{return!1}}),ne(ue,"getCosts",async o=>{try{const{status:r,result:a}=await R.Fetch("./api/prices-type",{method:"POST"});if(!r)throw new Error((a==null?void 0:a.message)||"Error al obtener datos");return a}catch{return!1}});class gr{static async validateCoupon(o){try{const{status:r,result:a}=await R.Fetch("./api/coupons/validate",{method:"POST",body:JSON.stringify(o)});if(!r)throw new Error((a==null?void 0:a.message)||"Error al validar cup√≥n");return a}catch(r){throw r}}static async generateCode(){try{const{status:o,result:r}=await R.Fetch("./api/coupons/generate-code",{method:"GET"});if(!o)throw new Error((r==null?void 0:r.message)||"Error al generar c√≥digo");return r}catch(o){throw o}}}const z={initialized:!1,deviceFingerPrint:null,isAvailable(){return typeof window.Culqi3DS<"u"},async init(t){if(!this.isAvailable())return console.warn("‚ö†Ô∏è Culqi3DS no est√° cargado"),!1;try{return window.Culqi3DS.publicKey=d.CULQI_PUBLIC_KEY,window.Culqi3DS.settings={charge:{totalAmount:t.amount,returnUrl:window.location.href,currency:t.currency||"PEN"},card:{email:t.email}},window.Culqi3DS.options={showModal:!0,showLoading:!0,showIcon:!0,closeModalAction:()=>{console.log("üîê Modal 3DS cerrado")},style:{btnColor:d.APP_COLOR_PRIMARY||"#000000",btnTextColor:"#FFFFFF"}},this.initialized=!0,console.log("‚úÖ Culqi3DS inicializado correctamente"),!0}catch(o){return console.error("‚ùå Error al inicializar Culqi3DS:",o),!1}},async generateDeviceFingerPrint(){if(!this.isAvailable())return console.warn("‚ö†Ô∏è Culqi3DS no disponible para generar device fingerprint"),null;try{return this.deviceFingerPrint=await window.Culqi3DS.generateDevice(),console.log("üîê Device Fingerprint generado:",this.deviceFingerPrint),this.deviceFingerPrint}catch(t){return console.error("‚ùå Error al generar device fingerprint:",t),null}},initAuthentication(t){return new Promise((o,r)=>{if(!this.isAvailable()){r(new Error("Culqi3DS no est√° disponible"));return}console.log("üîê Iniciando autenticaci√≥n 3DS para token:",t);const a=l=>{const n=l.data;!n||typeof n!="object"||(n.loading!==void 0&&console.log("üîê 3DS Loading:",n.loading),n.parameters3DS&&(console.log("‚úÖ Autenticaci√≥n 3DS exitosa:",n.parameters3DS),window.removeEventListener("message",a),o({success:!0,parameters3DS:n.parameters3DS})),n.error&&(console.error("‚ùå Error en autenticaci√≥n 3DS:",n.error),window.removeEventListener("message",a),r(new Error(n.error))))};window.addEventListener("message",a,!1);try{window.Culqi3DS.initAuthentication(t)}catch(l){window.removeEventListener("message",a),r(l)}})},reset(){this.isAvailable()&&typeof window.Culqi3DS.reset=="function"&&(window.Culqi3DS.reset(),this.deviceFingerPrint=null,this.initialized=!1,console.log("üîÑ Culqi3DS reseteado"))}},Fe={async createOrder(t,o){try{console.log("üîÑ Creando orden en Culqi API...");const{status:r,result:a}=await R.Fetch("/api/culqi/order",{method:"POST",body:JSON.stringify({sale:t,details:o})});if(!r)throw console.error("‚ùå Error al crear orden en Culqi:",a),new Error((a==null?void 0:a.message)||"Error al crear orden en Culqi");return console.log("‚úÖ Orden creada en Culqi:",a),a}catch(r){throw console.error("‚ùå Exception al crear orden:",r),r}},async createCheckoutOrder(t){try{console.log("üîÑ Creando orden de checkout en Culqi...",t);const{status:o,result:r}=await R.Fetch("/api/culqi/checkout-order",{method:"POST",body:JSON.stringify(t)});if(!o)throw console.error("‚ùå Error al crear orden de checkout:",r),new Error((r==null?void 0:r.message)||"Error al crear orden de checkout en Culqi");return console.log("‚úÖ Orden de checkout creada:",r),r}catch(o){throw console.error("‚ùå Exception al crear orden de checkout:",o),o}}};function Te(){let t="";for(let o=0;o<12;o++){const r=Math.floor(Math.random()*10);t+=r}return t}function re(){return d.CULQI_SUPPORTS_USD===!0}function $e(){const t=oe.get("currency")||"pen";return re()&&t.toLowerCase()==="usd"?"USD":(t.toLowerCase()==="pen","PEN")}function Be(){return $e()==="USD"?"$":"S/"}function ze(){const t=d.EXCHANGE_RATE||oe.get("exchange_rate_usd_pen")||3.75;return parseFloat(t)}function Ke(t){const o=oe.get("currency")||"pen";if(o.toLowerCase()==="pen")return{amount:t,currency:"PEN",wasConverted:!1,exchangeRate:1,originalAmount:t,originalCurrency:"PEN"};if(o.toLowerCase()==="usd"&&re())return console.log("üíµ Culqi soporta USD - procesando pago directamente en d√≥lares"),{amount:t,currency:"USD",wasConverted:!1,exchangeRate:1,originalAmount:t,originalCurrency:"USD"};if(o.toLowerCase()==="usd"&&!re()){const r=ze(),a=t*r;return console.log("üí± Conversi√≥n de moneda (Culqi no soporta USD):"),console.log(`   - Monto original: USD ${t.toFixed(2)}`),console.log(`   - Tipo de cambio: 1 USD = ${r} PEN`),console.log(`   - Monto convertido: PEN ${a.toFixed(2)}`),{amount:a,currency:"PEN",wasConverted:!0,exchangeRate:r,originalAmount:t,originalCurrency:"USD"}}return{amount:t,currency:o.toUpperCase(),wasConverted:!1,exchangeRate:1,originalAmount:t,originalCurrency:o.toUpperCase()}}let g=null;function Ye(){const t=d.CULQI_RSA_ID,o=d.CULQI_RSA_PUBLIC_KEY;if(console.log("üîê Verificando configuraci√≥n RSA..."),console.log("   - RSA ID presente:",!!t),console.log("   - RSA Public Key presente:",!!o),!t||!o)return console.warn("‚ö†Ô∏è RSA no configurado - Usando encriptaci√≥n est√°ndar de Culqi"),{valid:!0,hasRSA:!1,warning:"RSA no configurado - Usando encriptaci√≥n est√°ndar de Culqi (segura)"};if(!/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(t))return console.warn("‚ö†Ô∏è RSA ID no tiene formato UUID v√°lido:",t),console.warn("‚ö†Ô∏è Deshabilitando RSA - Usando encriptaci√≥n est√°ndar"),{valid:!0,hasRSA:!1,warning:"RSA ID inv√°lido - Usando encriptaci√≥n est√°ndar de Culqi"};const a=o.includes("-----BEGIN PUBLIC KEY-----"),l=o.includes("-----END PUBLIC KEY-----");return!a||!l?(console.warn("‚ö†Ô∏è RSA Public Key no tiene formato PEM v√°lido"),console.warn("‚ö†Ô∏è Deshabilitando RSA - Usando encriptaci√≥n est√°ndar"),{valid:!0,hasRSA:!1,warning:"RSA Public Key formato inv√°lido - Usando encriptaci√≥n est√°ndar de Culqi"}):(console.log("   - RSA Key length:",o.length,"caracteres"),o.includes("MIGf")?console.log("   - Tipo de clave: RSA 1024-bit (formato MIGf)"):o.includes("MIIBIj")?console.log("   - Tipo de clave: RSA 2048-bit (formato MIIBIj)"):console.log("   - Tipo de clave: Formato RSA est√°ndar"),console.log("‚úÖ RSA configurado correctamente"),console.log("   - RSA ID:",t),console.log("   - RSA Key length:",o.length),{valid:!0,hasRSA:!0,info:"RSA configurado correctamente para encriptaci√≥n adicional"})}const hr=async(t,o={})=>{if(!o.orderId&&!o.skipOrderCreation)try{console.log("üîÑ Intentando crear orden de Culqi para habilitar todos los m√©todos de pago...");const r=await Fe.createCheckoutOrder({amount:t.amount,email:t.email,name:t.name,lastname:t.lastname,phone:t.phone});console.log("üì¶ Respuesta de createCheckoutOrder:",r);const a=(r==null?void 0:r.data)||r,l=a==null?void 0:a.order_id;l?(console.log("‚úÖ Orden de checkout creada con ID:",l),o.orderId=l,o.orderData=a):(console.warn("‚ö†Ô∏è No se pudo obtener order_id de la respuesta:",r),console.warn("‚ö†Ô∏è Continuando solo con tarjeta"))}catch(r){console.warn("‚ö†Ô∏è Error al crear orden de checkout, continuando solo con tarjeta:",r.message)}return new Promise((r,a)=>{var l,n,y,m;try{console.log("üîÑ Iniciando proceso de pago con Culqi Custom Checkout...",t),console.log("üìã Opciones recibidas:",o);const{orderId:h,orderData:S}=o,E=!!h;if(E?(console.log("‚úÖ Flujo con Order ID - M√©todos adicionales habilitados (Yape, etc.)"),console.log("   - Order ID:",h)):console.log("‚ÑπÔ∏è Flujo sin Order - Solo pago con tarjeta disponible"),!d.CULQI_ENABLED){console.error("‚ùå Error: Culqi no est√° habilitado en la configuraci√≥n"),a("M√©todo de pago no disponible: Culqi est√° deshabilitado");return}if(typeof window.CulqiCheckout>"u"){console.error("‚ùå Error: CulqiCheckout no est√° definido. Verifique que el script de Culqi est√© cargado."),console.error("   Script esperado: https://js.culqi.com/checkout-js"),a("Error en la integraci√≥n con Culqi: Script no cargado");return}if(!d.CULQI_PUBLIC_KEY){console.error("‚ùå Error: CULQI_PUBLIC_KEY no est√° configurado"),a("Error de configuraci√≥n: Clave p√∫blica de Culqi no encontrada");return}const b=Ye();b.warning&&console.warn("‚ö†Ô∏è RSA:",b.warning),b.hasRSA?console.log("üîê RSA validado correctamente - Encriptaci√≥n adicional activada"):console.log("üîì RSA no disponible - Usando encriptaci√≥n est√°ndar de Culqi (segura)"),console.log("üîß Configuraci√≥n de Culqi:"),console.log("   - Public Key:",d.CULQI_PUBLIC_KEY),console.log("   - Public Key comienza con pk_:",(l=d.CULQI_PUBLIC_KEY)==null?void 0:l.startsWith("pk_")),console.log("   - RSA disponible:",b.hasRSA),b.hasRSA&&(console.log("   - RSA ID:",d.CULQI_RSA_ID),console.log("   - RSA ID length:",(n=d.CULQI_RSA_ID)==null?void 0:n.length));const D=(y=d.CULQI_PUBLIC_KEY)==null?void 0:y.startsWith("pk_test_"),N=(m=d.CULQI_PUBLIC_KEY)==null?void 0:m.startsWith("pk_live_");console.log("   - Modo de Culqi:",D?"PRUEBAS (test)":N?"PRODUCCI√ìN (live)":"DESCONOCIDO");const s=oe.get("currency")||"pen";console.log("üí± Moneda del sistema:",s.toUpperCase()),console.log("üíµ Culqi soporta USD:",re());const c=Ke(t.amount);c.wasConverted?(console.log("üí± Se realizar√° conversi√≥n autom√°tica de moneda:"),console.log(`   - Monto original: ${c.originalCurrency} ${c.originalAmount.toFixed(2)}`),console.log(`   - Tipo de cambio: 1 ${c.originalCurrency} = ${c.exchangeRate} PEN`),console.log(`   - Monto a cobrar: PEN ${c.amount.toFixed(2)}`),_.info("Conversi√≥n de moneda",{description:`Tu pago de $${c.originalAmount.toFixed(2)} USD ser√° procesado como S/${c.amount.toFixed(2)} PEN (TC: ${c.exchangeRate})`,duration:5e3})):c.currency==="USD"&&console.log("üíµ Pago directo en USD - Sin conversi√≥n");const i=Te();console.log("üìù N√∫mero de orden generado:",i);const p=c.currency,I=Be(),v=parseFloat(c.amount.toFixed(2)),j=Math.round(v*100),T=p==="USD"?100:300,O=p==="USD"?"$1.00":"S/ 3.00";if(j<T){console.error(`‚ùå Error: El monto m√≠nimo para Culqi es ${O}`),a(`El monto m√≠nimo para pago con tarjeta es ${O}`);return}console.log("üí∞ Configurando Culqi Custom Checkout:"),console.log("   - Monto original:",t.amount,s.toUpperCase()),console.log("   - Monto a procesar:",v,"PEN"),console.log("   - Moneda Culqi:",p),console.log("   - Monto en c√©ntimos:",j),console.log("   - Email:",t.email),console.log("   - CULQI_NAME:",d.CULQI_NAME),console.log("   - RSA configurado:",!!d.CULQI_RSA_ID);const $={title:d.CULQI_NAME||d.APP_NAME||"Pago",currency:p,amount:j};!!0&&b.hasRSA||console.log("üîì RSA deshabilitado - usando encriptaci√≥n est√°ndar de Culqi");const V={email:t.email||""},k=E?{tarjeta:!0,yape:!0,bancaMovil:!0,agente:!0,billetera:!0,cuotealo:!1}:{tarjeta:!0,yape:!1,bancaMovil:!1,agente:!1,billetera:!1,cuotealo:!1};console.log("üí≥ M√©todos de pago habilitados:",k);const H={lang:"auto",installments:!1,modal:!0,paymentMethods:k,paymentMethodsSort:E?["tarjeta","yape","bancaMovil","billetera","agente"]:["tarjeta"]},K={theme:"default",hiddenCulqiLogo:!1,hiddenBannerContent:!1,hiddenBanner:!1,hiddenToolBarAmount:!1,menuType:"sidebar",buttonCardPayText:"Pagar",logo:d.APP_URL+"/assets/resources/icon.png",defaultStyle:{bannerColor:d.APP_COLOR_PRIMARY||"#000000",buttonBackground:d.APP_COLOR_PRIMARY||"#000000",menuColor:d.APP_COLOR_PRIMARY||"#000000",linksColor:d.APP_COLOR_PRIMARY||"#000000",buttonTextColor:"#FFFFFF",priceColor:d.APP_COLOR_PRIMARY||"#000000"}};E&&($.order=h,console.log("üì¶ Order ID agregado a settings:",h));const F={settings:$,client:V,options:H,appearance:K};console.log("üìã Configuraci√≥n de Culqi Custom Checkout:",F);try{g=new window.CulqiCheckout(d.CULQI_PUBLIC_KEY,F),console.log("‚úÖ Instancia de CulqiCheckout creada exitosamente")}catch(f){console.error("‚ùå Error al crear instancia de CulqiCheckout:",f),a("Error en la integraci√≥n con Culqi: "+f.message);return}let B=!1;g.culqi=async function(){try{if(console.log("üì• Callback de Culqi ejecutado"),console.log("   - culqiInstance.token:",g.token),console.log("   - culqiInstance.charge:",g.charge),console.log("   - culqiInstance.order:",g.order),console.log("   - culqiInstance.error:",g.error),g.error){console.error("‚ùå Error de Culqi:",g.error);const f=g.error.user_message||g.error.merchant_message||"Error al procesar el pago";_.error("Error en el pago",{description:f,duration:5e3,position:"top-right",richColors:!0}),a(f);return}if(g.charge){B=!0;const f=g.charge;console.log("‚úÖ Cargo completado por Culqi (3DS incluido):",f);const P={...t,chargeId:f.id,orderNumber:i,chargeData:f,paymentType:"charge_completed"};console.log("üì§ Enviando cargo completado al backend:",P);const{status:q,result:x}=await R.Fetch("./api/pago/charge-completed",{method:"POST",body:JSON.stringify(P)});try{g.close()}catch(L){console.warn("‚ö†Ô∏è No se pudo cerrar el modal de Culqi:",L)}if(!q){console.error("‚ùå Error en respuesta del servidor:",x),_.error("Error al registrar el pago",{description:(x==null?void 0:x.message)||"Error al registrar el pago",duration:5e3,position:"top-right",richColors:!0}),a((x==null?void 0:x.message)||"Error al registrar el pago");return}_.success("¬°Pago exitoso!",{description:"Tu pago se proces√≥ correctamente con autenticaci√≥n 3DS.",duration:3e3,position:"top-right",richColors:!0}),r(x);return}if(g.token){B=!0;const f=g.token.id,P=g.token;console.log("‚úÖ Token generado:",f),console.log("   - Token completo:",P);let q=null;z.isAvailable()&&(await z.init({amount:j,currency:p,email:t.email}),q=await z.generateDeviceFingerPrint(),console.log("üîê Device Fingerprint para 3DS:",q));const x={...t,token:f,orderNumber:i,tokenData:P,deviceFingerPrint:q};console.log("üì§ Enviando pago al backend:",x);let{status:L,result:C}=await R.Fetch("./api/pago",{method:"POST",body:JSON.stringify(x)});if(!L&&(C!=null&&C.requires_3ds)){console.log("üîê El pago requiere autenticaci√≥n 3DS");try{console.log("üîê Cerrando modal de Culqi para mostrar 3DS..."),g.close()}catch(w){console.warn("‚ö†Ô∏è No se pudo cerrar modal de Culqi:",w)}if(!z.isAvailable()){_.error("Error en autenticaci√≥n",{description:"El servicio de autenticaci√≥n 3DS no est√° disponible. Por favor recarga la p√°gina.",duration:5e3,position:"top-right",richColors:!0}),a("Servicio 3DS no disponible");return}try{_.info("Autenticaci√≥n requerida",{description:"Por favor completa la verificaci√≥n de seguridad de tu banco.",duration:5e3,position:"top-right",richColors:!0}),await new Promise(U=>setTimeout(U,300));const w=await z.initAuthentication(f);if(w.success&&w.parameters3DS){console.log("‚úÖ Autenticaci√≥n 3DS completada:",w.parameters3DS);const U={...x,authentication_3DS:w.parameters3DS};console.log("üì§ Enviando cargo con autenticaci√≥n 3DS:",U);const X=await R.Fetch("./api/pago/3ds",{method:"POST",body:JSON.stringify(U)});L=X.status,C=X.result,z.reset()}}catch(w){console.error("‚ùå Error en autenticaci√≥n 3DS:",w),z.reset(),_.error("Error en autenticaci√≥n",{description:w.message||"No se pudo completar la autenticaci√≥n 3DS",duration:5e3,position:"top-right",richColors:!0}),a(w.message||"Error en autenticaci√≥n 3DS");return}}if(!L){console.error("‚ùå Error en respuesta del servidor:",C),_.error("Error en el pago",{description:(C==null?void 0:C.message)||"Error al procesar el pago",duration:5e3,position:"top-right",richColors:!0}),a((C==null?void 0:C.message)||"Error en el pago");return}try{g.close()}catch(w){console.warn("‚ö†Ô∏è No se pudo cerrar el modal de Culqi:",w)}_.success("¬°Pago exitoso!",{description:"Tu pago se proces√≥ correctamente. Pronto recibir√°s la confirmaci√≥n.",duration:3e3,position:"top-right",richColors:!0}),r(C);return}if(g.order){B=!0,console.log("‚úÖ Orden creada:",g.order);const f=g.order,P={...t,orderId:f.id,orderNumber:i,orderData:f,paymentType:"order"};console.log("üì§ Enviando orden al backend:",P);const{status:q,result:x}=await R.Fetch("./api/pago/order",{method:"POST",body:JSON.stringify(P)});try{g.close()}catch(L){console.warn("‚ö†Ô∏è No se pudo cerrar el modal de Culqi:",L)}if(q)_.success("¬°Orden creada!",{description:"Tu orden ha sido registrada. Completa el pago seg√∫n las instrucciones.",duration:5e3,position:"top-right",richColors:!0}),r(x);else throw new Error((x==null?void 0:x.message)||"Error al procesar la orden");return}console.warn("‚ö†Ô∏è Callback ejecutado sin token, orden ni error"),a("No se recibi√≥ respuesta del procesador de pagos")}catch(f){console.error("‚ùå Error en callback de Culqi:",f),_.error("¬°Error en el Pago!",{description:f.message||"Error desconocido",duration:3e3,position:"top-right",richColors:!0}),a(f.message||"Error en el pago")}},console.log("üöÄ Abriendo Culqi Custom Checkout..."),g.open()}catch(h){console.error("‚ùå Error general en processCulqiPayment:",h),_.error("¬°Error en la integraci√≥n con Culqi!",{description:h.message||"Error desconocido",duration:3e3,position:"top-right",richColors:!0}),a("Error en la integraci√≥n con Culqi: "+h.message)}})},fr=({title:t,description:o,price:r,selected:a,className:l,onSelect:n,disabled:y,paymentOnDelivery:m=!1,showConsultButton:h=!1,advisors:S=[],consultMessage:E=""})=>{const[b,D]=u.useState(!1),N=u.useRef(null);u.useEffect(()=>{const i=p=>{N.current&&!N.current.contains(p.target)&&D(!1)};return b&&document.addEventListener("mousedown",i),()=>{document.removeEventListener("mousedown",i)}},[b]);const s=i=>{if(i.stopPropagation(),S.length!==0)if(S.length===1){const p=S[0];window.open(`https://api.whatsapp.com/send?phone=${p.phone}&text=${encodeURIComponent(E||"¬°Hola! Necesito informaci√≥n sobre el costo de env√≠o")}`,"_blank")}else D(!b)},c=i=>{window.open(`https://api.whatsapp.com/send?phone=${i.phone}&text=${encodeURIComponent(E||"¬°Hola! Necesito informaci√≥n sobre el costo de env√≠o")}`,"_blank"),D(!1)};return e.jsxs("div",{className:`flex flex-col w-full gap-3 p-4 border-2 rounded-xl transition-all duration-300 customtext-neutral-dark ${a?"border-primary bg-primary/5":"border-gray-200 hover:border-gray-300"} ${y?"opacity-50 cursor-not-allowed":"cursor-pointer"} ${l}`,onClick:y?void 0:n,children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 w-full",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("div",{className:`w-5 h-5 border-2 rounded-full flex items-center justify-center flex-shrink-0 ${a?"border-primary":"border-gray-300"}`,children:a&&e.jsx("div",{className:"w-3 h-3 bg-primary rounded-full"})}),e.jsxs("div",{className:"customtext-neutral-light flex-1",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("h4",{className:"text-sm font-medium",children:t})}),e.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:o})]})]}),e.jsx("div",{className:"flex-shrink-0",children:m&&!h?e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-xs text-gray-500",children:"Pagas al recoger"})}):!h&&r!==void 0?e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-sm font-bold customtext-primary",children:r===0?"GRATIS":`${se()} ${je(r)}`})}):null})]}),h&&S.length>0&&e.jsxs("div",{className:"relative",ref:N,children:[e.jsxs("button",{type:"button",onClick:s,className:"w-full mt-1 px-4 py-2.5 bg-green-500 hover:bg-green-600 text-white text-sm font-medium transition-colors duration-200 flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"Consultar costo de env√≠o"]}),b&&S.length>1&&e.jsxs("div",{className:"absolute bottom-full left-0 right-0 mb-2 bg-white rounded-xl shadow-2xl overflow-hidden z-50 border border-gray-200",onClick:i=>i.stopPropagation(),children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-green-600 p-3 text-white",children:[e.jsx("h3",{className:"font-bold text-sm",children:"Elige un asesor"}),e.jsx("p",{className:"text-xs text-green-100",children:"¬øCon qui√©n quieres hablar?"})]}),e.jsx("div",{className:"max-h-[250px] overflow-y-auto",children:S.map((i,p)=>{var I;return e.jsxs("button",{type:"button",onClick:()=>c(i),className:"w-full flex items-center gap-3 p-3 hover:bg-green-50 transition-colors border-b border-gray-100 last:border-b-0 text-left",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border-2 border-green-200",children:i.photo?e.jsx("img",{src:`/assets/resources/${i.photo}`,alt:i.name,className:"w-full h-full object-cover",onError:v=>{v.target.src="/api/cover/thumbnail/null"}}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-green-400 to-green-600 flex items-center justify-center text-white text-sm font-bold",children:(I=i.name)==null?void 0:I.charAt(0).toUpperCase()})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-gray-900 text-sm truncate",children:i.name}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:i.position||"Asesor"})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-green-500",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})})})]},p)})})]})]})]})},xr=({ubigeoCode:t,ubigeo:o,onStoreSelect:r,selectedStore:a=null,specificStores:l=null,className:n=""})=>{const[y,m]=u.useState([]),[h,S]=u.useState(!1),[E,b]=u.useState(null);u.useEffect(()=>{D()},[l]);const D=async()=>{S(!0),b(null);try{const c=await new Oe().paginate({status:!0,visible:!0});let i=(c==null?void 0:c.data)||[];i=i.filter(p=>{const I=p.type==="tienda"||p.type==="tienda_principal",v=p.visible===!0||p.visible===1,j=p.status===!0||p.status===1;return I&&v&&j}),l&&Array.isArray(l)&&l.length>0?i=i.filter(p=>l.includes(p.id)):console.log("üè™ Mostrando TODAS las tiendas disponibles:",i.length),m(i)}catch(s){console.error("‚ùå Error cargando tiendas:",s),b("No se pudieron cargar las tiendas disponibles"),m([])}finally{S(!1)}},N=s=>{r(s)};return h?e.jsxs("div",{className:`text-center p-6 ${n}`,children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-primary/10 rounded-full mb-4",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}),e.jsx("h3",{className:"text-lg font-semibold customtext-neutral-dark mb-2",children:"Cargando tiendas..."}),e.jsx("p",{className:"customtext-neutral-light text-sm",children:"Buscando tiendas disponibles en tu ubicaci√≥n"})]}):E?e.jsxs("div",{className:`bg-red-50 border border-red-200 rounded-xl p-4 md:p-6 ${n}`,children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-red-100 rounded-full mx-auto mb-4",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h3",{className:"text-lg font-semibold text-red-800 text-center mb-2",children:"Error al cargar tiendas"}),e.jsx("p",{className:"text-red-600 text-center text-sm",children:E})]}):y.length===0?e.jsxs("div",{className:`bg-secondary/30 border border-secondary rounded-xl p-4 md:p-6 ${n}`,children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-secondary rounded-full mx-auto mb-4",children:e.jsx("svg",{className:"w-6 h-6 customtext-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h3",{className:"text-lg font-semibold customtext-neutral-dark text-center mb-2",children:"Sin tiendas disponibles"}),e.jsx("p",{className:"customtext-neutral-light text-center text-sm",children:"No hay tiendas disponibles para retiro en esta ubicaci√≥n. Por favor, selecciona otra opci√≥n de env√≠o."})]}):e.jsxs("div",{className:n,children:[e.jsxs("div",{className:"mb-4 md:mb-6",children:[e.jsx("h3",{className:"text-lg md:text-xl font-semibold customtext-neutral-dark mb-2",children:"Selecciona una tienda para retiro"}),e.jsx("p",{className:"customtext-neutral-light text-sm md:text-base",children:"Elige la tienda m√°s conveniente para retirar tu pedido"})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 md:gap-4",children:y.map(s=>e.jsxs("div",{className:`relative border-2 rounded-xl cursor-pointer transition-all duration-200 hover:shadow-lg ${(a==null?void 0:a.id)===s.id?"border-primary bg-primary/5 shadow-md":"border-gray-200 bg-white hover:border-primary/50 hover:shadow-md"}`,onClick:()=>N(s),children:[e.jsx("div",{className:"absolute top-3 right-3 z-10",children:e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center transition-all ${(a==null?void 0:a.id)===s.id?"border-primary bg-primary":"border-gray-300 bg-white"}`,children:(a==null?void 0:a.id)===s.id&&e.jsx("div",{className:"w-2.5 h-2.5 bg-white rounded-full"})})}),e.jsxs("div",{className:"p-4 pr-10",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:`/storage/images/store/${s.image}`,alt:s.name,className:"w-16 h-16 object-cover rounded-lg border border-gray-200",onError:c=>c.target.src="/api/cover/thumbnail/null"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold customtext-neutral-dark text-base mb-1 truncate",children:s.name}),e.jsx("span",{className:"inline-block px-2 py-1 rounded-full text-xs font-medium bg-primary/10 customtext-primary",children:s.type==="tienda"?"Tienda":s.type==="tienda_principal"?"Tienda Principal":s.type||"Tienda"})]})]}),e.jsx("p",{className:"text-sm customtext-neutral-light mb-3 line-clamp-2",children:s.address}),e.jsxs("div",{className:"space-y-2 text-sm customtext-neutral-light mb-3",children:[s.phone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),e.jsx("span",{className:"truncate",children:s.phone})]}),s.manager&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),e.jsxs("span",{className:"truncate",children:["Encargado: ",s.manager]})]})]}),s.business_hours&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs font-medium customtext-neutral-dark mb-1",children:"Horario de hoy:"}),e.jsx("div",{className:"text-xs",children:(()=>{try{const c=typeof s.business_hours=="string"?JSON.parse(s.business_hours):s.business_hours,i=new Date().toLocaleDateString("es-PE",{weekday:"long"}),I={lunes:"Lunes",martes:"Martes",mi√©rcoles:"Mi√©rcoles",jueves:"Jueves",viernes:"Viernes",s√°bado:"S√°bado",domingo:"Domingo"}[i.toLowerCase()]||i,v=c.find(j=>j.day.toLowerCase()===I.toLowerCase());if(v){const j=v.closed?"Cerrado":`${v.open} - ${v.close}`,T=!v.closed&&(()=>{const O=new Date,$=O.getHours()*60+O.getMinutes(),[G,V]=v.open.split(":").map(Number),[k,H]=v.close.split(":").map(Number),K=G*60+V,F=k*60+H;return $>=K&&$<=F})();return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"customtext-neutral-light",children:j}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${T?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:T?"Abierto":"Cerrado"})]})}return e.jsx("span",{className:"customtext-neutral-light",children:"Horarios disponibles"})}catch{return e.jsx("span",{className:"customtext-neutral-light",children:"Horarios disponibles"})}})()})]})]})]},s.id))})]})};export{dr as A,lr as B,gr as C,ur as D,fr as O,mr as P,xr as S,cr as a,ue as b,pr as c,hr as p};
