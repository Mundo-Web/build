import{j as t}from"./AboutSimple-Cf8x2fCZ.js";import{r as a}from"./index-BOnQTV8N.js";import{S as R,a as L}from"./BlogCarousel-DCQ9UYu0.js";import{N as I}from"./navigation-BIDIUzpb.js";import{A as T}from"./autoplay-BjAsSK2h.js";/* empty css               */import"./CategoryInfiniteSlider-C6UMaVwV.js";import"./BlogCarrusel-klwTVD05.js";import{P as A}from"./ProductCard-CXclprnE.js";import{I as B}from"./ItemsRest-Dp5IKigO.js";import{L as F}from"./Loading-B-FwDSWi.js";import{N as $}from"./NoResult-DlL_OOrq.js";import{m as j}from"./main-B6F2O9-U.js";import{C as V}from"./chevron-left-JcR9Fe4w.js";import{C as z}from"./chevron-right-Cug7tVUE.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./create-element-if-not-defined-DUWlnlug.js";import"./BasicRest-BML1C-ua.js";import"./CardProductKatya-ncpmQ0JU.js";import"./index-pSueRYGM.js";import"./index-B6ujFmsw.js";import"./BooleanLimit-D-OsQsek.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./createLucideIcon-DfjclApS.js";const U=new B,pe=({items:m,data:r,cart:q,setCart:G,filteredData:c})=>{const g=a.useRef(null),p=a.useRef(null),[d,y]=a.useState([]),[i,b]=a.useState(null),[u,x]=a.useState([]),[k,h]=a.useState(!0),[f,w]=a.useState({category_id:[]});a.useEffect(()=>{if(c!=null&&c.categories&&(console.log("Categories loaded:",c.categories),y(c.categories),j.GET.category&&c.categories.length>0)){const e=c.categories.find(s=>s.slug===j.GET.category||s.id===parseInt(j.GET.category));e&&(console.log("Category from URL:",e),b(e),w(s=>({...s,category_id:[e.id]})))}},[c]);const P=e=>{const s=[];if(e.category_id&&e.category_id.length>0){const o=e.category_id.map(l=>["category.id","=",l]);if(o.length===1)s.push(o[0]);else if(o.length>1){const l=o.reduce((n,N,C)=>C===0?N:[n,"or",N]);s.push(l)}}return s.length>0?s.length===1?s[0]:s.reduce((o,l,n)=>n===0?l:[o,"and",l]):[]},E=async(e=1)=>{h(!0);try{const s=P(f),o=24;console.log("Selected filters:",f),console.log("Transformed filters:",s);const l={filter:s,sort:[{selector:"final_price",desc:!0}],skip:(e-1)*o,take:o,requireTotalCount:!0};console.log("API params:",l);const n=await U.paginate(l);if(console.log("API response:",n),n.status!==200)throw new Error(`API returned status ${n.status}`);x(n.data||[])}catch(s){console.error("Error fetching products:",s),x([])}finally{h(!1)}};a.useEffect(()=>{E()},[f]),a.useEffect(()=>{m&&m.length>0&&u.length===0&&(console.log("Setting initial products from items:",m.length),x(m),h(!1))},[m]);const _=e=>e.split(/(\*.*?\*)/g).map((o,l)=>{if(o.startsWith("*")&&o.endsWith("*")){const n=o.replace(/\*/g,"");return t.jsxs("span",{className:"font-title customtext-primary ",children:[t.jsx("br",{}),n]},l)}return t.jsx("span",{className:"font-title",children:o},l)}),v=e=>{if(console.log("Category clicked:",e),b(e),e===null){w({category_id:[]});const s=new URL(window.location.href);s.searchParams.delete("category"),window.history.pushState({},"",s)}else{w({category_id:[e.id]});const s=new URL(window.location.href);s.searchParams.set("category",e.slug||e.id),window.history.pushState({},"",s)}},S=e=>{window.location.href=`/product/${e.slug}`};return t.jsxs("div",{className:"w-full bg-white font-paragraph",children:[(r==null?void 0:r.background_image)&&t.jsxs("div",{className:"relative w-full h-64 lg:h-72 bg-cover  flex items-center justify-center",style:{backgroundImage:`url(${r.background_image})`,backgroundSize:"cover",backgroundPosition:"center"},children:[t.jsx("div",{className:"absolute inset-0 bg-black/60"}),t.jsxs("div",{className:"relative w-full z-10 text-start px-[5%] 2xl:px-0 2xl:max-w-7xl mx-auto",children:[t.jsx("h1",{className:"text-3xl md:text-5xl font-title lg:text-7xl text-start   text-white",children:_((r==null?void 0:r.hero_title)||"Nuestro *CatÃ¡logo*")}),(r==null?void 0:r.hero_subtitle)&&t.jsx("p",{className:"text-lg md:text-xl text-white/90 mt-4 font-paragraph",children:r.hero_subtitle})]})]}),t.jsx("section",{className:"py-8 lg:py-16 bg-secondary",children:t.jsx("div",{className:"w-full px-[5%] 2xl:px-0 2xl:max-w-7xl mx-auto",children:d&&d.length>0&&t.jsxs("div",{className:"relative",children:[t.jsx(R,{modules:[T,I],spaceBetween:16,slidesPerView:1,autoplay:{delay:3e3,disableOnInteraction:!1,pauseOnMouseEnter:!0},navigation:{prevEl:g.current,nextEl:p.current},onBeforeInit:e=>{e.params.navigation.prevEl=g.current,e.params.navigation.nextEl=p.current},loop:d.length>4,speed:800,breakpoints:{640:{slidesPerView:2,spaceBetween:16},768:{slidesPerView:3,spaceBetween:20},1024:{slidesPerView:4,spaceBetween:24}},className:"category-swiper",children:d.map(e=>t.jsx(L,{children:t.jsxs("div",{className:`group cursor-pointer rounded-2xl overflow-hidden hover:shadow-xl transition-all duration-300 h-full my-4 ${(i==null?void 0:i.id)===e.id,"bg-white"}`,onClick:()=>v(e),children:[t.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden rounded-t-2xl bg-gray-100",children:[t.jsx("img",{src:e.imagen||e.image?`/storage/images/category/${e.imagen||e.image}`:"/assets/img/noimage/no_img.jpg",alt:e.name||e.nombre,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",onError:s=>{console.log("Error loading category image:",e),s.target.src="/assets/img/noimage/no_img.jpg"}}),(i==null?void 0:i.id)===e.id&&t.jsx("div",{className:"absolute inset-0 bg-primary/20 flex items-center justify-center",children:t.jsx("div",{className:"w-16 h-16 bg-primary rounded-full flex items-center justify-center",children:t.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})})]}),t.jsxs("div",{className:`p-4 lg:px-6 transition-colors duration-300 rounded-b-2xl ${(i==null?void 0:i.id)===e.id?"bg-primary text-white":"bg-white group-hover:bg-primary group-hover:text-white"}`,children:[t.jsx("h3",{className:"text-lg lg:text-xl font-bold transition-colors duration-300 text-left",children:e.name||e.nombre}),(e.description||e.descripcion)&&t.jsx("p",{className:"text-sm font-paragraph text-left mt-2 line-clamp-2 opacity-90",children:e.description||e.descripcion})]})]})},e.id))}),t.jsx("button",{ref:g,className:"absolute left-0 top-1/2 -translate-y-1/2 z-10 w-10 h-10 lg:w-12 lg:h-12 flex items-center justify-center rounded-full bg-white shadow-lg hover:bg-primary hover:text-white transition-all duration-300 -ml-5 lg:-ml-6 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Anterior",children:t.jsx(V,{className:"w-5 h-5 lg:w-6 lg:h-6"})}),t.jsx("button",{ref:p,className:"absolute right-0 top-1/2 -translate-y-1/2 z-10 w-10 h-10 lg:w-12 lg:h-12 flex items-center justify-center rounded-full bg-white shadow-lg hover:bg-primary hover:text-white transition-all duration-300 -mr-5 lg:-mr-6 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Siguiente",children:t.jsx(z,{className:"w-5 h-5 lg:w-6 lg:h-6"})})]})})}),t.jsx("section",{className:"py-8 lg:py-16 bg-white",children:t.jsxs("div",{className:"w-full px-[5%] 2xl:px-0 2xl:max-w-7xl mx-auto",children:[t.jsx("div",{className:"flex mb-8  w-full flex-col gap-6 lg:flex-row justify-between items-center",children:t.jsxs("div",{className:"text-left",children:[t.jsx("h2",{className:"text-3xl lg:text-5xl customtext-neutral-dark font-title mb-3 uppercase tracking-wide",children:(r==null?void 0:r.product_title)||"Pide todo lo que quieras y comparte"}),(r==null?void 0:r.product_description)&&t.jsx("p",{className:"customtext-neutral-dark font-paragraph text-base",children:r.product_description}),i&&t.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[t.jsx("span",{className:"text-sm customtext-neutral-light",children:"Mostrando:"}),t.jsx("span",{className:"bg-primary text-white px-4 py-2 rounded-full font-bold text-sm",children:i.name||i.nombre}),t.jsx("button",{onClick:()=>v(null),className:"text-sm text-gray-500 hover:text-primary transition-colors underline",children:"Ver todos"})]})]})}),k?t.jsx(F,{}):u&&u.length>0?t.jsx("div",{className:"grid  grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 lg:gap-6",children:u.map(e=>t.jsx(A,{product:e,handleProductClick:S,data:r},e.id))}):t.jsx($,{})]})})]})};export{pe as default};
