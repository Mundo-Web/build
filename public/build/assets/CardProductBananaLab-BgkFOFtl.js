import{j as s}from"./AboutSimple-Cf8x2fCZ.js";import{r}from"./index-BOnQTV8N.js";import"./CartKuchara-D9l7c7at.js";import{I as P}from"./ItemsRest-Dp5IKigO.js";import"./HeaderSearch-BKNHzMkQ.js";import{t as b}from"./CardProductKatya-ncpmQ0JU.js";import{C as R}from"./HeaderBananaLab-Dn7K5qxL.js";import{i as S}from"./tippy-react.esm-DmkRJDEW.js";import{C as j}from"./Number2Currency-ld0bFawA.js";import{m}from"./proxy-8H4LMZAz.js";import{H as w}from"./heart-DG8R4_Y8.js";import{C as v}from"./circle-chevron-right-Cragr8lM.js";import{C as c}from"./circle-check-big-CYWUGR3Z.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./main-B6F2O9-U.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./BasicRest-BML1C-ua.js";import"./BooleanLimit-D-OsQsek.js";import"./PolicyModal-C80IvD61.js";import"./index-B6ujFmsw.js";import"./index-Chjiymov.js";import"./CartItemRow-CpDVeE23.js";import"./bed-D_dyLoh5.js";import"./createLucideIcon-DfjclApS.js";import"./trash-2-DU7LB6-f.js";import"./calendar-BSC6xbA7.js";import"./moon-BU5XInRR.js";import"./users-w-WaEtvX.js";import"./package-DBFPPBi1.js";import"./minus-Db6MFKEO.js";import"./plus-CTIomuuF.js";import"./index-DBRilyZQ.js";import"./index-pSueRYGM.js";/* empty css              */import"./shopping-bag-C59bLmNC.js";import"./x-fof_H3Vv.js";import"./shopping-cart-DLRnxGTD.js";import"./arrow-right-MB8dWH_Y.js";import"./General-CE1RDd44.js";import"./resolve-elements-WL2ErOKm.js";const Ce=({data:i,product:e,widthClass:N="lg:w-1/4",setCart:y,cart:k,setFavorites:C,favorites:x})=>{var g;const _=new P,[$,F]=r.useState(!1),[f,h]=r.useState(!1),[t,H]=r.useState([]),q=x.some(l=>l.id===(e==null?void 0:e.id)),I=(i==null?void 0:i.style_offer)||"square",E=(l,n)=>{l.preventDefault(),l.stopPropagation();const a=structuredClone(x),o=a.findIndex(O=>O.id==(n==null?void 0:n.id));o==-1?(a.push({...n,quantity:1}),b.success("Producto agregado",{description:`${n==null?void 0:n.name} se ha aÃ±adido a los favoritos.`,icon:s.jsx(c,{className:"h-5 w-5 text-green-500"}),duration:3e3,position:"bottom-center"})):(a.splice(o,1),b.info("Producto removido",{description:`${n==null?void 0:n.name} se ha quitado de los favoritos.`,icon:s.jsx(c,{className:"h-5 w-5 text-blue-500"}),duration:3e3,position:"bottom-center"})),C(a)},M=async l=>{try{const n={slug:l==null?void 0:l.slug},a=await _.getVariations(n);if(!a)return;H(a.variants)}catch{return}};return r.useEffect(()=>{e!=null&&e.id&&M(e)},[e]),s.jsxs(s.Fragment,{children:[s.jsx(m.a,{href:`/product/${e==null?void 0:e.slug}`,initial:{scale:1},whileHover:{scale:1.02,transition:{duration:.3}},className:`group px-3  bg-transparent  ${N} rounded-b-3xl overflow-hidden flex-shrink-0 font-paragraph cursor-pointer relative `,onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),children:s.jsxs("div",{className:"bg-transparent rounded-md  h-full  flex flex-col ",children:[s.jsxs("div",{className:"relative bg-white rounded-xl overflow-hidden",children:[(e==null?void 0:e.final_price)!=null&&!isNaN(e==null?void 0:e.final_price)&&Number(e==null?void 0:e.final_price)>0&&Number(e==null?void 0:e.final_price)<Number(e==null?void 0:e.price)&&(I==="square"?s.jsx("span",{className:"absolute top-3 right-0 lg:right-0 bg-[#F93232] text-white text-xs font-bold px-2 py-2 shadow-md z-20",children:"Oferta"}):s.jsxs("span",{className:"absolute top-2 right-2 bg-[#F93232] text-white text-base font-medium px-2 py-1 rounded-full z-20",children:["-",Number(100-Number((e==null?void 0:e.discount)*100/(e==null?void 0:e.price))).toFixed(0),"%"]})),s.jsx(m.div,{className:"aspect-square rounded-t-md overflow-hidden flex items-center justify-center",whileHover:{scale:1.05},transition:{duration:.3},children:s.jsx("img",{src:`/storage/images/item/${e==null?void 0:e.image}`,onError:l=>l.target.src="/api/cover/thumbnail/null",alt:e==null?void 0:e.name,className:"w-full h-full object-cover object-center",loading:"lazy"})})]}),s.jsxs("div",{className:"p-3 flex-grow flex flex-col",children:[s.jsx("div",{className:"flex gap-1",children:(i==null?void 0:i.visible_variations)&&t&&(t==null?void 0:t.map(l=>s.jsx(S,{content:l.color,children:s.jsx(m.a,{href:`/product/${l.slug}`,className:"variant-option rounded-full object-fit-cover",whileHover:{scale:1.1},whileTap:{scale:.9},children:s.jsx("img",{className:"color-box rounded-full h-3 w-3 lg:w-4 lg:h-4 object-fit-cover",src:`/storage/images/item/${l.texture}`})})},l.slug)))}),s.jsx("h2",{className:"block customtext-accent font-semibold line-clamp-1",children:(g=e==null?void 0:e.category)==null?void 0:g.name}),s.jsxs("div",{className:"flex justify-between items-start w-full mt-2",children:[s.jsx("h3",{className:` customtext-neutral-dark text-xs lg:text-[15px] leading-4 font-semibold mb-2 line-clamp-3 ${i!=null&&i.support_favorite?"w-11/12 lg:w-10/12":"w-full"}`,children:e==null?void 0:e.name}),(i==null?void 0:i.support_favorite)&&s.jsx("button",{onClick:l=>E(l,e),className:"customtext-primary brightness-125 hover:brightness-100 hover:customtext-primary fill-primary transition-colors duration-200",children:q?s.jsx(w,{width:18,strokeWidth:3,fill:"current"}):s.jsx(w,{width:18,strokeWidth:1.5})})]}),(i==null?void 0:i.show_price)&&s.jsxs("div",{className:"flex flex-col lg:flex-row items-center gap-4 mt-1",children:[s.jsxs("span",{className:"customtext-neutral-dark text-[20px] md:text-2xl font-bold",children:[j()," ",e==null?void 0:e.final_price]}),Number(e==null?void 0:e.discount)>0&&Number(e==null?void 0:e.final_price)<Number(e==null?void 0:e.price)&&s.jsxs("span",{className:"text-base lg:text-base customtext-neutral-light line-through font-semibold",children:[j()," ",e==null?void 0:e.price]})]}),s.jsx("div",{className:"mt-3 overflow-hidden block lg:hidden",children:s.jsxs("a",{href:`/product/${e==null?void 0:e.slug}`,className:`w-full text-[10px] font-light lg:font-normal flex items-center justify-center bg-primary text-white lg:text-sm py-2 lg:py-3 px-4 rounded-full shadow-md hover:bg-primary-dark transition-all duration-300 ${(i==null?void 0:i.class_button)||""}`,children:[s.jsx("span",{className:"mr-2",children:"Ir a detalle"}),s.jsx(v,{className:"w-3 h-3 lg:w-4 lg:h-4",strokeWidth:2})]})}),s.jsx("div",{className:"hidden lg:block mt-3 h-[48px]",children:s.jsx(m.div,{initial:{opacity:0,y:6},animate:{opacity:f?1:0,y:f?0:6},transition:{duration:.18},className:"w-full h-full flex items-center",children:s.jsxs("a",{href:`/product/${e==null?void 0:e.slug}`,className:`w-full text-[10px] font-light lg:font-normal flex items-center justify-center bg-primary  lg:text-sm py-2 lg:py-3 px-4 rounded-full shadow-md hover:bg-primary-dark transition-all duration-300 ${(i==null?void 0:i.class_button)||"text-white"}`,children:[s.jsx("span",{className:"mr-2",children:"Ir a detalle"}),s.jsx(v,{className:"w-3 h-3 lg:w-4 lg:h-4",strokeWidth:2})]})})})]})]})}),s.jsx(R,{data:i,cart:k,setCart:y,modalOpen:$,setModalOpen:F})]})};export{Ce as default};
