import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as u}from"./index-BH53Isel.js";import{N as S}from"./Number2Currency-e57Tgsuk.js";import{B as ne,a as je,D as Pe,A as _e,O as Te,C as Fe}from"./OptionCard-C_V13-dD.js";import{M as $e}from"./CartItemRow-4VUVjpPz.js";import{P as Me}from"./plus-Bot15Khs.js";import{T as Oe}from"./trash-2-DK1wnsDn.js";import{m as Re}from"./main-BvVILmTO.js";import{G as z}from"./Global-ErywZRdd.js";import{t as P}from"./index-CMHsc23u.js";import{I}from"./InputForm-ZnsQvLid.js";import{l as Ie}from"./lodash-CblvOeJM.js";import{c as pe}from"./createLucideIcon-Cy5Ya80P.js";import{C as K}from"./circle-x-p-TkKhsF.js";import{m as L}from"./proxy-BTYtmp9V.js";import"./ProductNavigation-B9bkgv22.js";import"./ProductCard-Ap6bpF1Q.js";/* empty css              */import"./BlogCarousel-CCgb3gK1.js";/* empty css               */import"./InfiniteCategory-BtlY-czj.js";import{M as Le}from"./PaymentModal-Bxx5p2o_.js";import{H as Ae}from"./HtmlContent-FTivcJrM.js";import{X as Ve}from"./x-DBMwyD6F.js";import"./index-yBjzXJbu.js";import"./useStateManager-7e1e8489.esm-oj4m82YY.js";import"./hoist-non-react-statics.cjs-kbdZbs82.js";import"./index-rimy3MAc.js";import"./index-fNjTmf9T.js";import"./tippy-react.esm-BWiGTO87.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";import"./ItemsRest-DGjwRLrz.js";import"./BasicRest-B3rfI5GY.js";import"./HeaderSearch-B_41BEro.js";import"./index-CFtDjG4d.js";import"./eye-CKCH9ORv.js";import"./index-Chjiymov.js";/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=pe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=pe("OctagonX",[["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M2.586 16.726A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2h6.624a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586z",key:"2d38gg"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=pe("UserRoundX",[["path",{d:"M2 21a8 8 0 0 1 11.873-7",key:"74fkxq"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"m17 17 5 5",key:"p7ous7"}],["path",{d:"m22 17-5 5",key:"gqnmv0"}]]),Ue=({setCart:r,...p})=>{const f=()=>{r(h=>h.filter(c=>c.id!==p.id))},C=()=>{r(h=>h.map(c=>c.id===p.id?{...c,quantity:(c.quantity||1)+1}:c))},j=()=>{r(h=>h.map(c=>{if(c.id===p.id){const v=(c.quantity||1)-1;return v<=0?(f(p.id),null):{...c,quantity:v}}return c}).filter(Boolean))};return e.jsx("div",{className:"w-full bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center  justify-between gap-4 w-full",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-grow",children:[e.jsx("img",{src:`/storage/images/item/${p.image}`,alt:p.name,className:"w-20 h-20 object-cover rounded flex-shrink-0",onError:h=>h.target.src="/api/cover/thumbnail/null"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-lg mb-2 line-clamp-2",children:p.name}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Marca: ",e.jsx("span",{className:"customtext-neutral-dark",children:p.brand.name})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Disponibilidad: ",e.jsxs("span",{className:"customtext-neutral-dark",children:[p.stock>=p.quantity?"En stock":"Agotado"," "]})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["SKU: ",e.jsx("span",{className:"customtext-neutral-dark",children:p.sku})]})]})]}),e.jsxs("div",{className:"flex flex-row justify-between md:flex-col items-end md:items-end gap-4 mt-4 md:mt-0 flex-shrink-0",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-xs text-gray-500 line-through",children:["S/ ",Number(p.price*p.quantity).toFixed(2)]}),e.jsxs("div",{className:"font-bold text-lg",children:["S/ ",Number(p.final_price*p.quantity).toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center border border-gray-200 rounded-lg overflow-hidden shadow-sm",children:[e.jsx("button",{type:"button",onClick:j,className:"p-2 text-gray-600 hover:bg-gray-100 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary","aria-label":"Decrease quantity",children:e.jsx($e,{size:16})}),e.jsx("div",{className:"w-12 h-8 flex justify-center items-center bg-white",children:e.jsx("span",{className:"font-semibold text-sm",children:p.quantity||1})}),e.jsx("button",{type:"button",onClick:C,className:"p-2 text-gray-600 hover:bg-gray-100 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary","aria-label":"Increase quantity",children:e.jsx(Me,{size:16})})]}),e.jsx("button",{onClick:f,className:"p-2 text-gray-400 hover:text-red-500 transition-colors duration-200 rounded-full hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-red-200","aria-label":"Remove item",children:e.jsx(Oe,{size:18})})]})]})]})},p.id)};function ze({cart:r,setCart:p,onContinue:f,subTotal:C,envio:j,igv:h,totalFinal:c,openModal:v}){const m=r.length===0;return e.jsxs("div",{className:"grid lg:grid-cols-5 gap-4 md:gap-8",children:[e.jsx("div",{className:"lg:col-span-3 space-y-4 md:space-y-6",children:m?e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center animate-fade-in",children:[e.jsx("svg",{className:"w-24 h-24 text-gray-300 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"Tu carrito está vacío"}),e.jsx("p",{className:"text-gray-500",children:"¡Explora nuestros productos y encuentra algo especial!"})]}):r.map((l,t)=>e.jsx(Ue,{...l,setCart:p},t))}),e.jsxs("div",{className:"lg:col-span-2 bg-[#F7F9FB] rounded-xl shadow-lg p-4 md:p-6 h-max mt-4 md:mt-0",children:[e.jsx("h3",{className:"text-xl md:text-2xl font-bold pb-4 md:pb-6",children:"Resumen"}),e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Subtotal"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",S(C)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"IGV"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",S(h)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Envío"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",S(j)]})]}),e.jsx("div",{className:"py-3 border-y-2 mt-4 md:mt-6",children:e.jsxs("div",{className:"flex justify-between font-bold text-lg md:text-[20px] items-center",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["S/ ",S(c)]})]})}),e.jsxs("div",{className:"space-y-2 pt-3 md:pt-4",children:[e.jsx(ne,{onClick:f,className:"w-full",disabled:m,children:m?"Carrito Vacío":"Continuar Compra"}),e.jsx(je,{href:"/",className:"w-full",children:m?"Ir a Comprar":"Cancelar"})]}),e.jsx("div",{children:e.jsxs("p",{className:"text-xs md:text-sm customtext-neutral-dark",children:["Al realizar tu pedido, aceptas los ",e.jsx("a",{href:"#",onClick:()=>v(1),className:"customtext-primary font-bold",children:"Términos y Condiciones"}),", y que nosotros usaremos sus datos personales de acuerdo con nuestra ",e.jsx("a",{href:"#",onClick:()=>v(0),className:"customtext-primary font-bold",children:"Política de Privacidad"}),"."]})})]})]})]})}function He(){let r="";for(let p=0;p<12;p++){const f=Math.floor(Math.random()*10);r+=f}return r}const Ge=r=>new Promise((p,f)=>{var C;try{console.log(r);const j=He(r.email);console.log(j);let h=!1;window.Culqi.publicKey=z.CULQI_PUBLIC_KEY;const c=parseFloat(r.amount.toFixed(2)),v=Math.round(c*100);console.log("💰 Configurando Culqi:"),console.log("   - Monto original:",r.amount),console.log("   - Monto redondeado (soles):",c),console.log("   - Monto en céntimos:",v),console.log("   - Email:",r.email),window.Culqi.settings({title:z.APP_NAME,email:r.email,currency:"PEN",amount:v,order:`${j}`}),console.log(window.Culqi.settings),window.Culqi.options({lang:"es",installments:!1,paymentMethods:{tarjeta:!0,yape:!0,bancaMovil:!0,agente:!0,billetera:!0,cuotealo:!0},style:{logo:z.APP_URL+"/assets/resources/logo.png",bannerColor:z.APP_COLOR_PRIMARY,buttonBackground:z.APP_COLOR_PRIMARY}});const m=(C=window.Culqi)==null?void 0:C.close;m&&(window.Culqi.close=function(){return!window.Culqi.token&&!h&&(console.log("🚫 Modal de Culqi cerrado sin completar el pago"),f("Pago cancelado por el usuario")),m.apply(this,arguments)}),window.Culqi.open(),window.culqi=async function(){try{if(!window.Culqi.token){f("No se obtuvo un token de Culqi");return}h=!0;const t=window.Culqi.token.id;console.log("✅ Token generado:",t),r={...r,token:t,orderNumber:j},console.log("_request actualizado",r);const{status:o,result:i}=await Re.Fetch("./api/pago",{method:"POST",body:JSON.stringify(r)});o||console.log((i==null?void 0:i.message)||"Error en el pago"),window.Culqi.close(),P.success("¡Pago exitoso!",{description:"Tu pago se procesó correctamente. Pronto recibirás la confirmación de tu pedido.",duration:3e3,position:"top-right",richColors:!0}),p(i)}catch(t){P.error("¡Error en el Pago!",{description:t.message,duration:3e3,position:"top-right",richColors:!0}),f(t.message||"Error en el pago")}},window.addEventListener("message",function(t){t.data==="culqi_closed"&&f("Pago cancelado por el usuario")});const l=t=>{t.key==="Escape"&&!h&&(console.log("🚫 Modal de Culqi cerrado con Escape"),f("Pago cancelado por el usuario"))};document.addEventListener("keydown",l),setTimeout(()=>{document.removeEventListener("keydown",l)},3e5),document.addEventListener("culqi.error",function(t){var o,i;P.error("¡Error en Culqi!",{description:((o=t.detail)==null?void 0:o.message)||"Error desconocido",duration:3e3,position:"top-right",richColors:!0}),f(((i=t.detail)==null?void 0:i.message)||"Error desconocido")})}catch(j){P.error("¡Error en la integración con Culqi!",{description:j.message,duration:3e3,position:"top-right",richColors:!0}),f("Error en la integración con Culqi")}});function Xe({cart:r,setSale:p,setCode:f,setDelivery:C,setCart:j,onContinue:h,noContinue:c,subTotal:v,igv:m,totalFinal:l,user:t,setEnvio:o,envio:i,ubigeos:y=[],openModal:R,setCouponDiscount:F,setCouponCode:A,conversionScripts:H,setConversionScripts:re,onPurchaseComplete:Y}){var be,ve;const[J,V]=u.useState(null),[ue,ie]=u.useState(null),[x,_]=u.useState({name:(t==null?void 0:t.name)||"",lastname:(t==null?void 0:t.lastname)||"",email:(t==null?void 0:t.email)||"",phone:(t==null?void 0:t.phone)||"",department:(t==null?void 0:t.department)||"",province:(t==null?void 0:t.province)||"",district:(t==null?void 0:t.district)||"",address:(t==null?void 0:t.address)||"",number:(t==null?void 0:t.number)||"",comment:"",reference:(t==null?void 0:t.reference)||"",ubigeo:(t==null?void 0:t.ubigeo)||null});u.useEffect(()=>{if(t!=null&&t.ubigeo&&(t!=null&&t.district)&&(t!=null&&t.province)&&(t!=null&&t.department)){const a={value:t.ubigeo,label:`${t.district}, ${t.province}, ${t.department}`,data:{reniec:t.ubigeo,departamento:t.department,provincia:t.province,distrito:t.district}};ie(a),V(a),fe(a)}},[t]);const[Q,W]=u.useState(!1),[B,Z]=u.useState(!1),[M,G]=u.useState([]),[O,D]=u.useState(null),[ce,le]=u.useState(null),[d,N]=u.useState({}),[ee,U]=u.useState(""),[$,te]=u.useState(""),[q,xe]=u.useState(null),[se,he]=u.useState(0),[ae,ge]=u.useState(!1),[de,X]=u.useState(""),Ne=a=>{var n,b,g;const s=["name","lastname","email","phone","ubigeo","address","shipping"];for(const w of s)if(a[w]){let k=null,E=!1;if(w==="ubigeo"?k=((b=(n=document.querySelector('[name="ubigeo"]'))==null?void 0:n.parentElement)==null?void 0:b.parentElement)||document.querySelector(".css-1s2u09g-control")||document.querySelector('[class*="react-select"]'):w==="shipping"?k=((g=document.querySelector('input[name="shipping"]'))==null?void 0:g.closest(".space-y-4"))||document.querySelector(".space-y-4 h3")||document.querySelector("h3"):(k=document.querySelector(`[name="${w}"]`),E=!0),k){k.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),E&&setTimeout(()=>{try{k.focus(),k.tagName==="INPUT"&&k.type==="text"&&k.select()}catch(qe){console.warn("No se pudo enfocar el elemento:",qe)}},600),we(k);break}}},we=a=>{if(!a)return;const s=document.createElement("div");if(s.style.cssText=`
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            border: 2px solid #ef4444;
            border-radius: 8px;
            pointer-events: none;
            z-index: 1000;
            animation: pulse 0.6s ease-in-out;
            box-shadow: 0 0 0 4px rgba(239, 68, 68, 0.2);
        `,!document.querySelector("#error-highlight-styles")){const b=document.createElement("style");b.id="error-highlight-styles",b.textContent=`
                @keyframes pulse {
                    0% { transform: scale(1); opacity: 1; }
                    50% { transform: scale(1.02); opacity: 0.8; }
                    100% { transform: scale(1); opacity: 1; }
                }
            `,document.head.appendChild(b)}const n=a.style.position;(!n||n==="static")&&(a.style.position="relative"),a.appendChild(s),setTimeout(()=>{s.parentNode&&(s.parentNode.removeChild(s),(!n||n==="static")&&(a.style.position=n))},1200)},fe=async a=>{if(!a)return;N(n=>({...n,ubigeo:""}));const{data:s}=a;_(n=>({...n,department:s.departamento,province:s.provincia,district:s.distrito,ubigeo:s.reniec})),W(!0);try{const n=await Pe.getShippingCost({ubigeo:s.reniec}),b=[];n.data.is_free?(b.push({type:"free",price:0,description:n.data.standard.description,deliveryType:n.data.standard.type,characteristics:n.data.standard.characteristics}),n.data.express.price>0&&b.push({type:"express",price:n.data.express.price,description:n.data.express.description,deliveryType:n.data.express.type,characteristics:n.data.express.characteristics})):n.data.is_agency?b.push({type:"agency",price:0,description:n.data.agency.description,deliveryType:n.data.agency.type,characteristics:n.data.agency.characteristics}):b.push({type:"standard",price:n.data.standard.price,description:n.data.standard.description,deliveryType:n.data.standard.type,characteristics:n.data.standard.characteristics}),G(b),D(b[0].type),o(b[0].price)}catch{P.error("Sin cobertura",{description:"No realizamos envíos a esta ubicación.",icon:e.jsx(me,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"}),G([]),D(null),o(0)}W(!1)},ye=async a=>{var g,w;if(a.preventDefault(),B)return;if(!t){P.error("Acceso requerido",{description:"Debe iniciar sesión para continuar.",icon:e.jsx(De,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"});return}const s={},n=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,b=/^[0-9]{9}$/;if(x.name.trim()||(s.name="Nombre es requerido"),x.lastname.trim()||(s.lastname="Apellido es requerido"),x.email.trim()?n.test(x.email)||(s.email="Email inválido"):s.email="Email es requerido",x.phone.trim()?b.test(x.phone.trim())||(s.phone="Teléfono debe tener exactamente 9 dígitos"):s.phone="Teléfono es requerido",x.ubigeo||(s.ubigeo="Ubicación es requerida"),x.address||(s.address="Dirección es requerida"),O||(s.shipping="Seleccione un método de envío"),Object.keys(s).length>0){N(s);const k=Object.keys(s)[0],E={name:"Por favor ingrese su nombre",lastname:"Por favor ingrese su apellido",email:(g=s.email)!=null&&g.includes("inválido")?"Por favor ingrese un correo electrónico válido":"Por favor ingrese su correo electrónico",phone:(w=s.phone)!=null&&w.includes("9 dígitos")?"El teléfono debe tener exactamente 9 dígitos":"Por favor ingrese su número de teléfono",ubigeo:"Por favor seleccione su ubicación de entrega",address:"Por favor ingrese su dirección de entrega",shipping:"Por favor seleccione un método de envío"};P.error("Complete el campo requerido",{description:E[k],icon:e.jsx(K,{className:"h-5 w-5 text-red-500"}),duration:4e3,position:"top-center"}),Ne(s);return}Z(!0);try{const k={user_id:t.id,...x,fullname:`${x.name} ${x.lastname}`,country:"Perú",amount:T(oe),delivery:T(i),cart:r,coupon_id:(q==null?void 0:q.id)||null,coupon_code:(q==null?void 0:q.code)||null,coupon_discount:T(se||0)};console.log("📦 Request completo a enviar:",k),console.log("💰 Monto final con cupón:",oe),console.log("🎟️ Descuento del cupón:",se),console.log("🚚 Costo de envío:",i);const E=await Ge(k);E.status?(p(E.sale),C(E.delivery),f(E.code),E.conversion_scripts&&(console.log("Scripts de conversión recibidos:",E.conversion_scripts),re(E.conversion_scripts),Y&&Y(E.sale_id,E.conversion_scripts)),j([]),h()):P.error("Error en el pago",{description:E.message||"Pago rechazado",icon:e.jsx(me,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"})}catch{P.error("Lo sentimos, no puede continuar con la compra",{description:"Ocurrió un error al procesar el pedido.",icon:e.jsx(me,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"})}finally{Z(!1)}},Ce=u.useCallback(Ie.debounce((a,s)=>{if(a.length<3){s([]);return}fetch(`/api/ubigeo/search?q=${encodeURIComponent(a)}`).then(n=>{if(!n.ok)throw new Error("Error en la respuesta");return n.json()}).then(n=>{const b=n.map(g=>({value:g.reniec,label:`${g.distrito}, ${g.provincia}, ${g.departamento}`,data:{inei:g.inei,reniec:g.reniec,departamento:g.departamento,provincia:g.provincia,distrito:g.distrito}}));s(b)}).catch(n=>{s([])})},300),[]);u.useEffect(()=>{N(a=>{const s={...a};return x.name.trim()&&delete s.name,x.lastname.trim()&&delete s.lastname,x.email.trim()&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(x.email)&&delete s.email,x.phone.trim()&&/^[0-9]{9}$/.test(x.phone.trim())&&delete s.phone,x.address.trim()&&delete s.address,x.ubigeo&&delete s.ubigeo,O&&delete s.shipping,s})},[x,O]);const ke=a=>({control:s=>({...s,border:`1px solid ${a?"#ef4444":"#e5e7eb"}`,boxShadow:"none",minHeight:"50px","&:hover":{borderColor:a?"#ef4444":"#6b7280"},borderRadius:"0.75rem",padding:"2px 8px"}),menu:s=>({...s,zIndex:9999,marginTop:"4px",borderRadius:"8px"}),option:s=>({...s,color:"#1f2937",backgroundColor:"white","&:hover":{backgroundColor:"#f3f4f6"},padding:"12px 16px"})}),Se=async()=>{var a;if(!$.trim()){X("Ingrese un código de cupón");return}ge(!0),X("");try{const s=[...new Set(r.map(w=>w.category_id).filter(Boolean))],n=r.map(w=>w.id);console.log("Validando cupón:",{code:$.trim(),cart_total:v,category_ids:s,product_ids:n});const b=await Fe.validateCoupon({code:$.trim(),cart_total:v,category_ids:s,product_ids:n});console.log("Respuesta del cupón:",b);const g=b.data||b;if(g&&g.valid){xe(g.coupon);const w=Math.round(g.discount*100)/100;he(w),F&&F(w),A&&A(((a=g.coupon)==null?void 0:a.code)||$.trim()),P.success("Cupón aplicado",{description:g.message||"Cupón aplicado correctamente",duration:3e3,position:"top-center"})}else{const w=(g==null?void 0:g.message)||"Cupón no válido";X(w),P.error("Cupón no válido",{description:w,icon:e.jsx(K,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"top-center"})}}catch(s){console.error("Error al validar cupón:",s),X("Error al validar el cupón"),P.error("Error",{description:s.message||"No se pudo validar el cupón. Intente nuevamente.",icon:e.jsx(K,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"top-center"})}finally{ge(!1)}},Ee=()=>{xe(null),he(0),te(""),X(""),F&&F(0),A&&A(""),P.success("Cupón removido",{description:"El cupón ha sido removido de su pedido",duration:2e3,position:"top-center"})},T=a=>{const s=typeof a=="string"?parseFloat(a):a;return parseFloat(s.toFixed(2))},oe=T(l-se);return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 md:gap-8",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("form",{className:"space-y-4 md:space-y-6 bg-white p-4 md:p-6 rounded-xl shadow-sm",onSubmit:ye,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(I,{name:"name",label:"Nombres",value:x.name,error:d.name,onChange:a=>{_(s=>({...s,name:a.target.value})),a.target.value.trim()&&d.name&&N(s=>({...s,name:""}))},required:!0,className:`border-gray-200 ${d.name?"border-red-500 bg-red-50":""}`}),e.jsx(I,{name:"lastname",label:"Apellidos",value:x.lastname,error:d.lastname,onChange:a=>{_(s=>({...s,lastname:a.target.value})),a.target.value.trim()&&d.lastname&&N(s=>({...s,lastname:""}))},required:!0,className:`border-gray-200 ${d.lastname?"border-red-500 bg-red-50":""}`})]}),e.jsx(I,{name:"email",label:"Correo electrónico",type:"email",value:x.email,error:d.email,onChange:a=>{_(s=>({...s,email:a.target.value})),a.target.value.trim()&&d.email&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.target.value)&&N(n=>({...n,email:""}))},required:!0,className:`border-gray-200 ${d.email?"border-red-500 bg-red-50":""}`}),e.jsx(I,{name:"phone",label:"Teléfono",type:"tel",value:x.phone,error:d.phone,onChange:a=>{const s=a.target.value.replace(/\D/g,"");_(n=>({...n,phone:s})),s.length===9&&d.phone&&N(n=>({...n,phone:""}))},maxLength:"9",placeholder:"Ej: 987654321",required:!0,className:`border-gray-200 ${d.phone?"border-red-500 bg-red-50":""}`}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"block text-sm 2xl:text-base mb-2 font-medium customtext-neutral-dark",children:["Distrito / Provincia / Departamento (Ubicación de entrega)",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx(_e,{name:"ubigeo",cacheOptions:!0,value:J,loadOptions:Ce,onChange:a=>{V(a),fe(a),U("")},inputValue:ee,onInputChange:(a,{action:s})=>{s==="input-change"&&U(a)},onFocus:()=>{V(null),U("")},onMenuOpen:()=>{J&&(V(null),U(""))},placeholder:"Buscar por Distrito ...",loadingMessage:()=>"Buscando ubicaciones...",noOptionsMessage:({inputValue:a})=>a.length<3?"Buscar por Distrito ...":"No se encontraron resultados",isLoading:Q,styles:ke(!!d.ubigeo),formatOptionLabel:({data:a})=>e.jsxs("div",{className:"text-sm py-1",children:[e.jsx("div",{className:"font-medium",children:a.distrito}),e.jsxs("div",{className:"text-gray-500",children:[a.provincia,", ",a.departamento]})]}),className:"w-full rounded-xl transition-all duration-300",menuPortalTarget:document.body,isClearable:!0}),d.ubigeo&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:d.ubigeo})]}),e.jsx(I,{name:"address",label:"Dirección ",value:x.address,error:d.address,onChange:a=>{_(s=>({...s,address:a.target.value})),a.target.value.trim()&&d.address&&N(s=>({...s,address:""}))},required:!0,className:`border-gray-200 ${d.address?"border-red-500 bg-red-50":""}`}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(I,{label:"Número",value:x.number,onChange:a=>_(s=>({...s,number:a.target.value})),className:"border-gray-200"}),e.jsx(I,{label:"Referencia",value:x.reference,onChange:a=>_(s=>({...s,reference:a.target.value})),className:"border-gray-200"})]}),M.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Método de envío"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:M.map(a=>e.jsx(Te,{title:a.deliveryType,price:a.price,description:a.description,selected:O===a.type,onSelect:()=>{D(a.type),o(a.price),N(s=>({...s,shipping:""}))}},a.type))}),O&&M.length>0&&e.jsx("div",{className:"space-y-3 mt-4",children:(ve=(be=M.find(a=>a.type===O))==null?void 0:be.characteristics)==null?void 0:ve.map((a,s)=>e.jsxs("div",{className:"flex items-start gap-3 bg-gray-50 p-4 rounded-xl",children:[e.jsx("div",{className:"w-5 flex-shrink-0",children:e.jsx(Be,{className:"customtext-primary"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm font-medium customtext-neutral-dark",children:a})})]},`char-${s}`))})]}),!c&&e.jsxs("div",{className:"flex flex-col md:flex-row justify-end gap-3 md:gap-4 mt-6",children:[e.jsx(je,{type:"button",onClick:()=>window.history.back(),className:"w-full md:w-auto",children:"Regresar"}),e.jsx(ne,{type:"submit",loading:Q,className:"w-full md:w-auto",children:"Continuar"})]})]})}),e.jsxs("div",{className:"bg-[#F7F9FB] rounded-xl shadow-lg p-6 col-span-2 h-max",children:[e.jsx("h3",{className:"text-2xl font-bold pb-6",children:"Resumen"}),e.jsx("div",{className:"space-y-4 border-b-2 pb-6",children:r.map(a=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:`/storage/images/item/${a.image}`,alt:a.name,className:"w-16 h-16 object-cover rounded-lg",onError:s=>s.target.src="/api/cover/thumbnail/null"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:a.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Cantidad: ",a.quantity]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["S/ ",S(a.final_price)]})]})]},a.id))}),e.jsxs("div",{className:"space-y-4 mt-6",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal:"}),e.jsxs("span",{children:["S/ ",S(T(v))]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"IGV (18%):"}),e.jsxs("span",{children:["S/ ",S(T(m))]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Envío:"}),e.jsxs("span",{children:["S/ ",S(T(i))]})]}),e.jsx("div",{className:"space-y-4 border-t pt-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium customtext-neutral-dark",children:"¿Tienes un cupón de descuento?"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:"text",placeholder:"Ingresa tu código de cupón",value:$,onChange:a=>te(a.target.value.toUpperCase()),className:`w-full px-4 py-3 border customtext-neutral-dark  border-gray-100 rounded-xl focus:ring-0 focus:outline-0   transition-all duration-300 ${de?"border-red-300 bg-red-50 text-red-900 focus:border-red-500 focus:ring-red-200":q?"border-gray-200 bg-white customtext-neutral-dark focus:ring-blue-200":" bg-white border-neutral-light focus:ring-0 focus:outline-0"} `,disabled:!!q||ae}),ae&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"w-4 h-4 border-2 border-primary border-t-transparent rounded-full animate-spin"})})]}),q?e.jsx("button",{type:"button",onClick:Ee,className:"px-4 py-3 bg-gray-200 customtext-neutral-dark text-sm rounded-xl hover:bg-gray-300 transition-colors duration-200",title:"Remover cupón",children:e.jsx(K,{className:"h-4 w-4"})}):e.jsx("button",{type:"button",onClick:Se,disabled:ae||!$.trim(),className:"px-6 py-3 bg-primary text-white text-sm font-medium rounded-xl hover:opacity-90 disabled:bg-gray-300 disabled:cursor-not-allowed transition-all duration-200 whitespace-nowrap",children:ae?"Validando...":"Aplicar"})]}),de&&e.jsxs("div",{className:"flex items-center gap-2 text-red-600 text-sm",children:[e.jsx(K,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{children:de})]}),q&&e.jsx("div",{className:"bg-gray-50 border-2  rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 w-8/12",children:[e.jsx("div",{className:"w-8 h-8 bg-primary rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsxs("div",{children:[e.jsxs("p",{className:"customtext-primary font-semibold text-sm",children:["Descto. ",q.type==="percentage"?`${q.value}%`:`S/${S(q.value)}`]}),e.jsx("p",{className:"customtext-primary text-xs mt-1",children:q.code})]})]}),e.jsx("div",{className:"text-right w-4/12",children:e.jsxs("span",{className:"customtext-primary font-bold text-base",children:["-S/ ",S(T(se))]})})]})})]})}),e.jsx("div",{className:"pt-4 border-t-2",children:e.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:["S/ ",S(T(oe))]})]})}),e.jsx(ne,{onClick:ye,className:"w-full mt-6",disabled:B,loading:B,children:B?"Procesando...":`Pagar S/ ${S(T(oe))}`}),e.jsxs("p",{className:"text-xs md:text-sm customtext-neutral-dark",children:["Al realizar tu pedido, aceptas los ",e.jsx("a",{href:"#",onClick:()=>R(1),className:"customtext-primary font-bold",children:"Términos y Condiciones"}),", y que nosotros usaremos sus datos personales de acuerdo con nuestra ",e.jsx("a",{href:"#",onClick:()=>R(0),className:"customtext-primary font-bold",children:"Política de Privacidad"}),"."]})]})]})]})}function Ke({cart:r,code:p,delivery:f,couponDiscount:C=0,couponCode:j=null,conversionScripts:h=null}){const v=(r.reduce((o,i)=>{const y=i.final_price;return o+y*i.quantity},0)/1.18).toFixed(2),m=(v*.18).toFixed(2),t=parseFloat(v)+parseFloat(m)+parseFloat(f)-C;return u.useEffect(()=>{if(h){console.log("Executing conversion scripts...");try{if(h.head){const o=document.createElement("script");o.innerHTML=h.head,document.head.appendChild(o)}if(h.body){const o=document.createElement("script");o.innerHTML=h.body,document.body.appendChild(o)}console.log("Conversion scripts executed successfully")}catch(o){console.error("Error executing conversion scripts:",o)}}},[h]),e.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mx-auto max-w-3xl px-4 sm:px-6 lg:px-8 py-12",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-6 md:p-10",children:e.jsxs(L.div,{initial:{scale:.9},animate:{scale:1},transition:{delay:.3},className:"text-center space-y-6",children:[e.jsx(L.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.5},className:"w-20 h-20 bg-secondary rounded-full mx-auto flex items-center justify-center",children:e.jsx("span",{className:"text-4xl",children:"✓"})}),e.jsx("h2",{className:"text-2xl md:text-3xl customtext-neutral-light animate-bounce",children:"¡Gracias por tu compra! 🎉"}),e.jsx("p",{className:"customtext-neutral-dark text-3xl md:text-5xl font-bold",children:"Tu orden ha sido recibida"}),e.jsxs(L.div,{whileHover:{scale:1.05},className:"py-6 px-4 bg-secondary rounded-xl inline-block",children:[e.jsx("div",{className:"customtext-neutral-light",children:"Código de pedido"}),e.jsx("div",{className:"customtext-neutral-dark text-xl font-bold",children:`#${p}`})]}),e.jsxs("div",{className:"space-y-6 bg-[#F7F9FB] p-6 md:p-8 rounded-xl shadow-inner",children:[e.jsx("div",{className:"space-y-6 border-b-2 pb-6",children:r.map((o,i)=>e.jsx(L.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:i*.2},className:"bg-white rounded-xl p-4 shadow-sm hover:shadow-md transition-shadow duration-300",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 items-center sm:items-start",children:[e.jsx("div",{className:"bg-gray-50 p-3 rounded-xl",children:e.jsx("img",{src:`/storage/images/item/${o.image}`,alt:o.name,className:"w-24 h-24 object-cover rounded-lg",onError:y=>y.target.src="/api/cover/thumbnail/null",loading:"lazy"})}),e.jsxs("div",{className:"text-center sm:text-left flex-1",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-xl lg:w-8/12 line-clamp-3",children:o.name}),e.jsx("div",{className:"mt-2 sm:mt-0 text-center lg:text-right lg:w-4/12",children:e.jsxs("div",{className:"font-bold text-lg customtext-primary",children:["S/ ",S(o.final_price*o.quantity)]})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:[e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Marca: ",e.jsx("span",{className:"customtext-neutral-dark font-medium",children:o.brand.name})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Cantidad: ",e.jsx("span",{className:"customtext-neutral-dark font-medium",children:o.quantity})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["SKU: ",e.jsx("span",{className:"customtext-neutral-dark font-medium",children:o.sku})]})]})]})]})},i))}),e.jsxs(L.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"space-y-4 mt-6",children:[[{label:"Subtotal",value:v},{label:"IGV",value:m},{label:"Envío",value:f}].map((o,i)=>e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"customtext-neutral-dark",children:o.label}),e.jsxs("span",{className:"font-semibold",children:["S/ ",S(o.value)]})]},i)),C>0&&j&&e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsxs("span",{className:"customtext-neutral-dark text-start",children:["Cupón: ",e.jsx("br",{className:"lg:hidden"}),e.jsxs("span",{className:"font-semibold text-xs lg:text-base",children:["(",j,")"]})]}),e.jsxs("span",{className:"font-semibold",children:["-S/ ",S(C)]})]}),e.jsx("div",{className:"py-4 border-y-2 mt-6",children:e.jsxs("div",{className:"flex justify-between font-bold text-xl md:text-2xl items-center",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["S/ ",S(t)]})]})})]}),e.jsx(L.div,{className:"pt-6",whileHover:{scale:1.02},whileTap:{scale:.98},children:e.jsx(ne,{href:"/catalogo",className:"w-full mx-auto md:w-auto",children:"Seguir Comprando"})})]})]})})})}const Ye=()=>{const r=u.useRef({hasTrackedPageView:!1,hasTrackedInitiateCheckout:!1}),p=(m,l={})=>{typeof window>"u"||(typeof window.fbq<"u"&&window.fbq("track","ViewContent",{content_ids:[m],content_type:"product",content_name:l.name||"",value:l.price||0,currency:"PEN"}),typeof window.gtag<"u"&&window.gtag("event","view_item",{currency:"PEN",value:l.price||0,items:[{item_id:m,item_name:l.name||"",category:l.category||"",price:l.price||0}]}),typeof window.ttq<"u"&&window.ttq.track("ViewContent",{content_id:m,content_type:"product",content_name:l.name||"",value:l.price||0,currency:"PEN"}),console.log("✅ ProductView tracked for product:",m))},f=async(m,l=1,t={})=>{var o;if(!(typeof window>"u"))try{const y=await(await fetch("/api/tracking/add-to-cart",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((o=document.querySelector('meta[name="csrf-token"]'))==null?void 0:o.content)||""},body:JSON.stringify({product_id:m,quantity:l,...t})})).json();y.success&&y.tracking_scripts&&(c(y.tracking_scripts),console.log("✅ AddToCart tracked successfully"))}catch(i){console.error("❌ Error tracking AddToCart:",i)}},C=async(m,l)=>{var t;if(!(typeof window>"u"||r.current.hasTrackedInitiateCheckout))try{r.current.hasTrackedInitiateCheckout=!0;const i=await(await fetch("/api/tracking/initiate-checkout",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.content)||""},body:JSON.stringify({cart_items:m.map(y=>({product_id:y.id,name:y.name,price:y.final_price||y.price,quantity:y.quantity,subtotal:(y.final_price||y.price)*y.quantity}))})})).json();i.success&&i.tracking_scripts&&(c(i.tracking_scripts),console.log("✅ InitiateCheckout tracked successfully"))}catch(o){console.error("❌ Error tracking InitiateCheckout:",o),r.current.hasTrackedInitiateCheckout=!1}},j=(m,l)=>{typeof window>"u"||(l?c(l):fetch(`/api/tracking/purchase/${m}`).then(t=>t.text()).then(t=>{t&&(c(t),console.log("✅ Purchase tracked successfully"))}).catch(t=>{console.error("❌ Error tracking Purchase:",t)}))},h=(m,l=[])=>{if(typeof window>"u"||r.current.hasTrackedPageView)return;r.current.hasTrackedPageView=!0;const t=l.reduce((o,i)=>o+(i.final_price||i.price)*i.quantity,0);typeof window.fbq<"u"&&(window.fbq("track","PageView"),m===1&&l.length>0&&window.fbq("track","AddToCart",{content_ids:l.map(o=>o.id),content_type:"product",value:t,currency:"PEN",num_items:l.length})),typeof window.gtag<"u"&&(window.gtag("event","page_view",{page_title:`Checkout - Paso ${m}`,page_location:window.location.href}),m===1&&l.length>0&&window.gtag("event","view_cart",{currency:"PEN",value:t,items:l.map(o=>{var i;return{item_id:o.id,item_name:o.name,category:((i=o.category)==null?void 0:i.name)||"Sin categoría",quantity:o.quantity,price:o.final_price||o.price}})})),console.log(`✅ Checkout PageView tracked - Step ${m}`)},c=m=>{if(typeof window>"u"||!m)return;const l=document.createElement("div");l.innerHTML=m,l.querySelectorAll("script").forEach(o=>{const i=document.createElement("script");i.textContent=o.textContent,document.head.appendChild(i),setTimeout(()=>{i.parentNode&&i.parentNode.removeChild(i)},100)})};return{trackProductView:p,trackAddToCart:f,trackInitiateCheckout:C,trackPurchase:j,trackCheckoutPageView:h,resetTracking:()=>{r.current={hasTrackedPageView:!1,hasTrackedInitiateCheckout:!1}}}};function $t({cart:r,setCart:p,user:f,ubigeos:C=[],items:j,generals:h}){const[c,v]=u.useState(1),m=r.reduce((d,N)=>d+N.final_price*N.quantity,0),{trackCheckoutPageView:l,trackInitiateCheckout:t,trackPurchase:o,resetTracking:i}=Ye(),y=parseFloat((m/1.18).toFixed(2)),R=parseFloat((m-y).toFixed(2)),[F,A]=u.useState(0),H=y+R+parseFloat(F),[re,Y]=u.useState([]),[J,V]=u.useState([]),[ue,ie]=u.useState([]),[x,_]=u.useState(0),[Q,W]=u.useState(null),[B,Z]=u.useState(null);u.useEffect(()=>(l(c,r),()=>i()),[]),u.useEffect(()=>{l(c,r),c===2&&t(r,H)},[c]),u.useEffect(()=>{const d=document.createElement("script");return d.src=z.CULQI_API,d.async=!0,d.onload=()=>{window.culqi=function(){window.Culqi.token||window.Culqi.order}},document.body.appendChild(d),()=>document.body.removeChild(d)},[]);const M=d=>{v(d),window.scrollTo({top:0,behavior:"smooth"})},G={privacy_policy:"Políticas de privacidad",terms_conditions:"Términos y condiciones",saleback_policy:"Políticas de devolucion y cambio"},[O,D]=u.useState(null),ce=d=>D(d),le=()=>D(null);return e.jsxs("div",{className:"min-h-screen bg-[#F7F9FB] py-4 md:py-12 px-2 sm:px-primary 2xl:px-0 2xl:max-w-7xl mx-auto",children:[e.jsxs("div",{className:"bg-white p-3 md:p-8 rounded-lg md:rounded-xl shadow-sm",children:[e.jsx("div",{className:"mb-4 md:mb-8",children:e.jsxs("div",{className:"flex items-center justify-between gap-1 md:gap-4 max-w-3xl mx-auto",children:[e.jsxs("div",{className:`flex flex-col items-center md:flex-row md:items-center gap-1 md:gap-2 ${c===1?"customtext-primary font-medium":"customtext-neutral-dark"}`,children:[e.jsx("span",{className:" bg-primary text-white w-8 h-8 rounded-full border-2 flex items-center justify-center text-xs md:text-sm",children:"1"}),e.jsx("span",{className:"text-[10px] md:text-sm text-center",children:"Carrito"})]}),e.jsx("div",{className:"mb-4 lg:mb-0  flex-1 h-[2px] bg-gray-200 relative",children:e.jsx("div",{className:"absolute inset-0 bg-primary transition-all duration-500",style:{width:c>1?"100%":"0%"}})}),e.jsxs("div",{className:`flex flex-col items-center md:flex-row md:items-center gap-1 md:gap-2 ${c>1?"customtext-primary font-medium":"customtext-neutral-dark"}`,children:[e.jsx("span",{className:`w-8 h-8 rounded-full border-2 flex items-center justify-center text-xs md:text-sm ${c>1?"bg-primary text-white":"bg-white customtext-primary"}`,children:"2"}),e.jsx("span",{className:"text-[10px] md:text-sm text-center",children:"Envío"})]}),e.jsx("div",{className:"mb-4 lg:mb-0  flex-1 h-[2px] bg-gray-200 relative",children:e.jsx("div",{className:"absolute inset-0 bg-primary transition-all duration-500",style:{width:c>2?"100%":"0%"}})}),e.jsxs("div",{className:`flex flex-col items-center md:flex-row md:items-center gap-1 md:gap-2 ${c===3?"customtext-primary  font-medium":"customtext-neutral-dark"}`,children:[e.jsx("span",{className:`w-8 h-8 rounded-full border-2 flex items-center justify-center text-xs md:text-sm ${c===3?"bg-primary text-white":"bg-white customtext-primary"}`,children:"3"}),e.jsx("span",{className:"text-[10px] md:text-sm text-center",children:"Confirmación"})]})]})}),c===1&&e.jsx(ze,{cart:r,setCart:p,onContinue:()=>M(2),subTotal:y,envio:F,igv:R,totalFinal:H,openModal:ce}),c===2&&e.jsx(Xe,{items:j,setCode:V,setDelivery:ie,cart:r,setSale:Y,setCart:p,onContinue:()=>M(3),noContinue:()=>M(1),subTotal:y,envio:F,setEnvio:A,igv:R,totalFinal:H,user:f,ubigeos:C,openModal:ce,setCouponDiscount:_,setCouponCode:W}),c===3&&e.jsx(Ke,{code:J,delivery:ue,cart:re,subTotal:y,envio:F,igv:R,totalFinal:H,couponDiscount:x,couponCode:Q,conversionScripts:B,setConversionScripts:Z,onPurchaseComplete:(d,N)=>{o(d,N)}})]}),Object.keys(G).map((d,N)=>{var $;const ee=G[d],U=(($=h.find(te=>te.correlative==d))==null?void 0:$.description)??"";return e.jsxs(Le,{isOpen:O===N,onRequestClose:le,contentLabel:ee,className:"absolute left-1/2 -translate-x-1/2 bg-white p-6 rounded-xl shadow-lg w-[95%] max-w-4xl my-8",overlayClassName:"fixed inset-0 bg-black bg-opacity-50 z-50",children:[e.jsx("button",{onClick:le,className:"float-right text-red-500 hover:text-red-700 transition-all duration-300 ",children:e.jsx(Ve,{width:"2rem",strokeWidth:"4px"})}),e.jsx("h2",{className:"text-2xl font-bold mb-4",children:ee}),e.jsx(Ae,{className:"prose",html:U})]},N)})]})}export{$t as default};
