import{j as t}from"./AboutSimple-Cf8x2fCZ.js";import{r as c}from"./index-BH53Isel.js";import{N as M}from"./Number2Currency-e57Tgsuk.js";import{D as _e,A as Me,O as qe,B as Oe,a as Re}from"./OptionCard-BDHfVt8o.js";import{m as H}from"./main-BvVILmTO.js";import{t as q}from"./index-CMHsc23u.js";import{I as y}from"./InputForm-ZnsQvLid.js";import{s as Ie}from"./server.browser-Bf4gQIc7.js";import{l as Fe}from"./lodash-CblvOeJM.js";import{M as Be}from"./PaymentModal-Bxx5p2o_.js";import{G as k}from"./General-BmbBKdsB.js";import{a as O,U as Le,b as Ue,C as Ae}from"./CouponsRest-HOU-mdfQ.js";import{i as de}from"./tippy-react.esm-BWiGTO87.js";import"./ProductNavigation-BHdBC-H-.js";import"./ProductCard-erObE6pO.js";/* empty css              */import"./BlogCarousel-DpjB9swg.js";/* empty css               */import"./InfiniteCategory-BwYXk1Kq.js";import"./index-yBjzXJbu.js";import"./useStateManager-7e1e8489.esm-oj4m82YY.js";import"./hoist-non-react-statics.cjs-kbdZbs82.js";import"./index-rimy3MAc.js";import"./index-fNjTmf9T.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";import"./index-Chjiymov.js";import"./Global-ErywZRdd.js";import"./VoucherUpload-B2OWX0t6.js";import"./filepond-plugin-image-preview-B3bH-pD8.js";import"./SalesRest-D5kqWNYk.js";import"./BasicRest-B3rfI5GY.js";import"./chevron-up-D78jyEhP.js";import"./createLucideIcon-Cy5Ya80P.js";import"./chevron-down-DS-mdh9v.js";import"./ItemsRest-DGjwRLrz.js";import"./HeaderSearch-B_41BEro.js";import"./CartItemRow-4VUVjpPz.js";import"./proxy-BTYtmp9V.js";import"./trash-2-DK1wnsDn.js";import"./plus-Bot15Khs.js";import"./index-CFtDjG4d.js";import"./eye-CKCH9ORv.js";const ze=d=>new Promise(async(v,N)=>{try{console.log("Datos para MercadoPago:",d);const{status:g,result:i}=await H.Fetch("./api/mercadopago/preference",{method:"POST",body:JSON.stringify(d)});if(!g||!i.preference_id){H.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:(i==null?void 0:i.message)||"Error al crear la preferencia de pago",type:"danger"}),N((i==null?void 0:i.message)||"Error al crear la preferencia de pago");return}console.log("✅ Preferencia creada:",i);const b=new window.MercadoPago(i.public_key,{locale:"es-PE"});setTimeout(()=>{window.location.href=i.redirect_url},500),v(i)}catch(g){console.error("Error en processMercadoPagoPayment:",g),H.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:g.message||"Error en la integración con MercadoPago",type:"danger"}),N(g.message||"Error en la integración con MercadoPago")}});function Ve({isOpen:d,onClose:v,onPaymentComplete:N,contacts:g}){const[i,b]=c.useState(null),[w,u]=c.useState(!1);c.useEffect(()=>{d||(u(!1),b(null))},[d]);const f=()=>{i&&(u(!0),N(i))},p=w||!i,n=g.find(S=>S.correlative==="checkout_mercadopago");return console.log(n),t.jsx(Be,{isOpen:d,onRequestClose:v,className:"absolute left-1/2 -translate-x-1/2 bg-white rounded-2xl shadow-lg w-[95%] max-w-4xl top-1/2 -translate-y-1/2 overflow-hidden",overlayClassName:"fixed inset-0 bg-black bg-opacity-50 z-50",ariaHideApp:!1,children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2",children:[t.jsx("div",{className:"hidden md:block bg-[#f8f5f2] h-full",children:t.jsx("img",{src:"/assets/img/salafabulosa/portadapagos.png",alt:"Métodos de pago",className:"h-full w-full object-cover"})}),t.jsxs("div",{className:"p-6 max-h-[90vh] md:max-h-[100vh] flex flex-col justify-center ",children:[t.jsxs("div",{className:"mb-0 md:mb-4",children:[t.jsx("h2",{className:"text-xl md:text-2xl 2xl:text-3xl font-bold customtext-primary",children:"¿Cómo deseas pagar tu pedido?"}),t.jsx("p",{className:"mt-2 text-sm 2xl:text-base",children:"Elige una de las opciones disponibles para completar tu pago de forma segura."})]}),n.description!=="true"&&k.get("checkout_dwallet")!=="true"&&k.get("checkout_transfer")!=="true"?t.jsx("div",{className:"text-gray-500 text-center py-4",children:"Sin opciones de pago"}):t.jsx(t.Fragment,{children:t.jsxs("div",{className:"mt-3 space-y-3",children:[n.description=="true"&&t.jsx("div",{className:`border-2 rounded-lg p-3 cursor-pointer transition-colors ${i==="tarjeta"?"border-primary bg-[#f8f5f2]":"border-gray-200 hover:border-2 hover:border-[#3a2723]"}`,onClick:()=>b("tarjeta"),children:t.jsxs("div",{className:"flex flex-row items-center justify-between gap-2",children:[t.jsxs("div",{className:"flex flex-col items-start justify-center space-x-2",children:[t.jsx("input",{type:"radio",id:"tarjeta",name:"paymentMethod",checked:i==="tarjeta",onChange:()=>b("tarjeta"),className:"h-5 w-5 text-primary focus:ring-primary hidden"}),t.jsx("label",{htmlFor:"tarjeta",className:"font-medium text-base 2xl:text-lg",children:"Pago con Tarjeta"}),t.jsx("p",{className:"text-[#5c504c] text-sm 2xl:text-base ml-7 mt-1",children:"Renueva tus espacios con estilo: Fundas exclusivas para cada temporada."})]}),t.jsx("div",{className:"min-w-5 flex items-center justify-center",children:t.jsx("div",{className:`h-5 w-5 rounded-full flex items-center justify-center ${i==="tarjeta"?"bg-[#3a2723]":"border-2 border-[#d0ccca]"}`,children:t.jsx("div",{className:`h-2 w-2 rounded-full ${i==="tarjeta"?"bg-white":""}`})})})]})}),k.get("checkout_dwallet")=="true"&&t.jsx("div",{className:`border-2 rounded-lg p-3 cursor-pointer transition-colors ${i==="yape"?"border-primary bg-[#f8f5f2]":"border-gray-200 hover:border-2 hover:border-[#3a2723]"}`,onClick:()=>b("yape"),children:t.jsxs("div",{className:"flex flex-row items-center justify-between gap-2",children:[t.jsxs("div",{className:"flex flex-col items-start justify-center space-x-2",children:[t.jsx("input",{type:"radio",id:"yape",name:"paymentMethod",checked:i==="yape",onChange:()=>b("yape"),className:"h-5 w-5 text-primary focus:ring-[#3a2723] hidden"}),t.jsx("label",{htmlFor:"yape",className:"font-medium text-base 2xl:text-lg",children:"Yape / Plin"}),t.jsx("p",{className:"text-[#5c504c] text-sm 2xl:text-base ml-7 mt-1",children:"Realiza el pago desde tu celular sin comisiones."})]}),t.jsx("div",{className:"min-w-5 flex items-center justify-center",children:t.jsx("div",{className:`h-5 w-5 rounded-full flex items-center justify-center ${i==="yape"?"bg-[#3a2723]":"border-2 border-[#d0ccca]"}`,children:t.jsx("div",{className:`h-2 w-2 rounded-full ${i==="yape"?"bg-white":""}`})})})]})}),k.get("checkout_transfer")=="true"&&t.jsx("div",{className:`border-2 rounded-lg p-3 cursor-pointer transition-colors ${i==="transferencia"?"border-primary bg-[#f8f5f2]":"border-gray-200 hover:border-2 hover:border-[#3a2723]"}`,onClick:()=>b("transferencia"),children:t.jsxs("div",{className:"flex flex-row items-center justify-between gap-2",children:[t.jsxs("div",{className:"flex flex-col items-start justify-center space-x-2",children:[t.jsx("input",{type:"radio",id:"transferencia",name:"paymentMethod",checked:i==="transferencia",onChange:()=>b("transferencia"),className:"h-5 w-5 text-primary focus:ring-[#3a2723] hidden"}),t.jsx("label",{htmlFor:"transferencia",className:"font-medium text-base 2xl:text-lg",children:"Pago por Transferencia"}),t.jsx("p",{className:"text-[#5c504c] text-sm 2xl:text-base ml-7 mt-1",children:"Haz una transferencia bancaria desde tu app o banca por internet."})]}),t.jsx("div",{className:"min-w-5 flex items-center justify-center",children:t.jsx("div",{className:`h-5 w-5 rounded-full flex items-center justify-center ${i==="transferencia"?"bg-[#3a2723]":"border-2 border-[#d0ccca]"}`,children:t.jsx("div",{className:`h-2 w-2 rounded-full ${i==="transferencia"?"bg-white":""}`})})})]})})]})}),t.jsxs("div",{className:"mt-4 space-y-3",children:[(n.description==="true"||k.get("checkout_dwallet")==="true"||k.get("checkout_transfer")==="true")&&t.jsx("button",{className:`w-full bg-[#3a2723] hover:bg-[#2a1d1a] text-white py-3 rounded-3xl text-base 2xl:text-lg leading-normal font-medium transition-colors 
                            ${p?"opacity-70 cursor-not-allowed":""}`,onClick:f,disabled:w,children:w?"Procesando...":"Confirmar pago"}),t.jsx("button",{className:"w-full border border-[#3a2723] text-[#3a2723] hover:bg-[#f8f5f2] py-3 text-base 2xl:text-lg leading-normal rounded-3xl font-medium transition-colors",onClick:v,disabled:w,children:"Volver"})]})]})]})})}const Ge=new Ae;function Ut({cart:d,setSale:v,setCode:N,setDelivery:g,setCart:i,onContinue:b,noContinue:w,subTotal:u,igv:f,totalFinal:p,user:n,setEnvio:S,envio:C,prefixes:pe,ubigeos:He=[],contacts:R}){var ne,ae;const Y=c.useRef(null),[m,I]=c.useState(null),[F,K]=c.useState(null),[Ye,me]=c.useState(null),[e,B]=c.useState({name:(n==null?void 0:n.name)||"",lastname:(n==null?void 0:n.lastname)||"",email:(n==null?void 0:n.email)||"",phone_prefix:(n==null?void 0:n.phone_prefix)||"51",phone:(n==null?void 0:n.phone)||"",department:(n==null?void 0:n.department)||"",province:(n==null?void 0:n.province)||"",district:(n==null?void 0:n.district)||"",address:(n==null?void 0:n.address)||"",number:(n==null?void 0:n.number)||"",comment:(n==null?void 0:n.comment)||"",shippingOption:"delivery",ubigeo:(n==null?void 0:n.ubigeo)||null,invoiceType:(n==null?void 0:n.invoiceType)||"boleta",documentType:(n==null?void 0:n.documentType)||"dni",document:(n==null?void 0:n.dni)||"",businessName:(n==null?void 0:n.businessName)||""});c.useEffect(()=>{if(n!=null&&n.ubigeo&&(n!=null&&n.district)&&(n!=null&&n.province)&&(n!=null&&n.department)){const s={value:n.ubigeo,label:`${n.district}, ${n.province}, ${n.department}`,data:{reniec:n.ubigeo,departamento:n.department,provincia:n.province,distrito:n.district}};me(s),K(s),z(s)}},[n]);const xe=s=>{var a;return((a=R.find(o=>o.correlative===s))==null?void 0:a.description)||""},x=s=>{const{name:a,value:o}=s.target;B(r=>({...r,[a]:o})),a==="invoiceType"&&B(r=>({...r,documentType:o==="factura"?"ruc":"dni",document:"",businessName:o==="factura"?r.businessName:""}))},[Ke,Je]=c.useState(0),[L,J]=c.useState(!1),[T,Q]=c.useState([]),[P,U]=c.useState(null),[Qe,We]=c.useState(null),[h,A]=c.useState({}),ue=typeof u=="number"?u:parseFloat(u)||0,he=typeof f=="number"?f:parseFloat(f)||0,E=parseFloat(xe("shipping_free")),W=ue+he,z=async s=>{var o;if(!s)return;A(r=>({...r,ubigeo:""}));const{data:a}=s;B(r=>({...r,department:a.departamento,province:a.provincia,district:a.distrito,ubigeo:a.reniec})),J(!0);try{const r=await _e.getShippingCost({ubigeo:a.reniec}),l=[],_=W>=E;if(_?l.push({type:"free",price:0,description:`Compra mayor a S/ ${E}`,deliveryType:"Envío gratuito"}):r.data.is_free?l.push({type:"free",price:0,description:r.data.standard.description,deliveryType:r.data.standard.type,characteristics:r.data.standard.characteristics}):r.data.is_agency?l.push({type:"agency",price:0,description:r.data.agency.description,deliveryType:r.data.agency.type,characteristics:r.data.agency.characteristics}):l.push({type:"standard",price:r.data.standard.price,description:r.data.standard.description,deliveryType:r.data.standard.type,characteristics:r.data.standard.characteristics}),((o=r.data.express)==null?void 0:o.price)>0&&r.data.is_free&&!_&&l.push({type:"express",price:r.data.express.price,description:r.data.express.description,deliveryType:r.data.express.type,characteristics:r.data.express.characteristics}),l.length===0)throw new Error("No hay opciones de envío disponibles");Q(l),U(l[0].type),S(l[0].price)}catch(r){console.error("Error al obtener precios de envío:",r),q.success("Sin cobertura",{description:"No realizamos envíos a esta ubicación",icon:t.jsx(O,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"top-right"}),Q([]),U(null),S(0)}J(!1)};c.useEffect(()=>{F&&z(F)},[d,u]);const ge=c.useCallback(Fe.debounce((s,a)=>{if(s.length<3){a([]);return}fetch(`/api/ubigeo/search?q=${encodeURIComponent(s)}`).then(o=>{if(!o.ok)throw new Error("Error en la respuesta");return o.json()}).then(o=>{const r=o.map(l=>({value:l.reniec,label:`${l.distrito}, ${l.provincia}, ${l.departamento}`,data:{inei:l.inei,reniec:l.reniec,departamento:l.departamento,provincia:l.provincia,distrito:l.distrito}}));a(r)}).catch(o=>{console.error("Error:",o),a([])})},300),[]);c.useEffect(()=>{const s=a=>{const o=a.element.dataset.code,r=a.element.dataset.flag;return Ie.renderToString(t.jsxs("span",{children:[t.jsx("span",{className:"inline-block w-8 font-emoji text-center",children:r}),t.jsx("b",{className:"me-1",children:a.text}),t.jsx("span",{className:"text-sm text-opacity-20",children:o})]}))};$(".select2-prefix-selector").select2({dropdownCssClass:"py-1",containerCssClass:"!border !border-gray-300 !rounded p-2 !h-[42px]",arrowCssClass:'!text-primary top-1/2 -translate-y-1/2"',templateResult:function(a){if(!a.id)return a.text;var o=$(s(a));return o},templateSelection:function(a){if(!a.id)return a.text;var o=$(s(a));return o},matcher:function(a,o){if(!a.term||!o.element)return o;const r=o.element.dataset.country||"",l=o.text||"";return r.toLowerCase().includes(a.term.toLowerCase())||l.toLowerCase().includes(a.term.toLowerCase())?o:null}})},[e.phone_prefix]);const[be,V]=c.useState(!1),[ye,X]=c.useState(!1),[fe,Z]=c.useState(!1),[D,je]=c.useState(null),[ee,te]=c.useState(null),ve=s=>{if(s.preventDefault(),s&&s.preventDefault&&s.preventDefault(),!!Ne()){if(!P){q.success("Seleccione envío",{description:"Debe elegir un método de envío",icon:t.jsx(O,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"top-right"});return}V(!0)}},Ne=()=>{const s={};e.name||(s.name="Nombre es requerido"),e.lastname||(s.lastname="Apellido es requerido"),e.email||(s.email="Email es requerido"),e.phone||(s.phone="Teléfono es requerido"),e.ubigeo||(s.ubigeo="Ubigeo es requerido"),e.address||(s.address="Dirección es requerida"),e.document||(s.document="Documento es requerido"),e.number||(s.number="Numero es requerido"),A(s);const a=(o,r=800)=>{const l=o.getBoundingClientRect().top+window.pageYOffset-window.innerHeight/2+o.offsetHeight/2,_=window.pageYOffset;let G=null;const re=oe=>{G===null&&(G=oe);const ie=oe-G,Ee=((j,le,ce,$e)=>(j/=$e/2,j<1?ce/2*j*j+le:(j--,-ce/2*(j*(j-2)-1)+le)))(ie,_,l-_,r);window.scrollTo(0,Ee),ie<r?requestAnimationFrame(re):["INPUT","SELECT","TEXTAREA"].includes(o.tagName)&&o.focus()};requestAnimationFrame(re)};if(Object.keys(s).length>0){const o=Object.keys(s)[0];setTimeout(()=>{var l;let r=null;o==="ubigeo"?r=document.getElementById("ubigeo-select-container"):o==="phone_prefix"?r=(l=document.querySelector(".select2-prefix-selector"))==null?void 0:l.parentElement:r=document.querySelector(`[name="${o}"]`),r&&(r.classList.add("highlight-error"),setTimeout(()=>r.classList.remove("highlight-error"),2e3),a(r,600))},100)}return Object.keys(s).length===0},we=async s=>{try{if(V(!1),je(s),s==="tarjeta"){if(!window.MercadoPago){console.error("❌ MercadoPago aún no se ha cargado.");return}const a={user_id:(n==null?void 0:n.id)||"",name:(e==null?void 0:e.name)||"",lastname:(e==null?void 0:e.lastname)||"",fullname:`${e==null?void 0:e.name} ${e==null?void 0:e.lastname}`,phone_prefix:(e==null?void 0:e.phone_prefix)||"51",email:(e==null?void 0:e.email)||"",phone:`${e.phone_prefix}${e.phone}`,country:"Perú",department:(e==null?void 0:e.department)||"",province:(e==null?void 0:e.province)||"",district:(e==null?void 0:e.district)||"",ubigeo:(e==null?void 0:e.ubigeo)||"",address:(e==null?void 0:e.address)||"",number:(e==null?void 0:e.number)||"",comment:(e==null?void 0:e.comment)||"",amount:p||0,delivery:C,cart:d,invoiceType:e.invoiceType||"",documentType:e.documentType||"",document:e.document||"",businessName:e.businessName||"",payment_method:s||null};try{const r=await ze(a);r.status?(v(r.sale),g(r.delivery),N(r.code)):q.success("Error en el Pago",{description:"El pago ha sido rechazado",icon:t.jsx(O,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"top-right"})}catch(o){console.log(o),q.success("Error en el Pago",{description:"No se llegó a procesar el pago",icon:t.jsx(O,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"top-right"})}}else if(s==="yape"){const a={user_id:(n==null?void 0:n.id)||"",name:(e==null?void 0:e.name)||"",lastname:(e==null?void 0:e.lastname)||"",fullname:`${e==null?void 0:e.name} ${e==null?void 0:e.lastname}`,phone_prefix:(e==null?void 0:e.phone_prefix)||"51",email:(e==null?void 0:e.email)||"",phone:`${e.phone_prefix}${e.phone}`,country:"Perú",department:(e==null?void 0:e.department)||"",province:(e==null?void 0:e.province)||"",district:(e==null?void 0:e.district)||"",ubigeo:(e==null?void 0:e.ubigeo)||"",address:(e==null?void 0:e.address)||"",number:(e==null?void 0:e.number)||"",comment:(e==null?void 0:e.comment)||"",amount:p||0,delivery:C,cart:d,invoiceType:e.invoiceType||"",documentType:e.documentType||"",document:e.document||"",businessName:e.businessName||"",payment_method:s||null,payment_proof:null};te(a),X(!0)}else if(s==="transferencia"){const a={user_id:(n==null?void 0:n.id)||"",name:(e==null?void 0:e.name)||"",lastname:(e==null?void 0:e.lastname)||"",fullname:`${e==null?void 0:e.name} ${e==null?void 0:e.lastname}`,phone_prefix:(e==null?void 0:e.phone_prefix)||"51",email:(e==null?void 0:e.email)||"",phone:`${e.phone_prefix}${e.phone}`,country:"Perú",department:(e==null?void 0:e.department)||"",province:(e==null?void 0:e.province)||"",district:(e==null?void 0:e.district)||"",ubigeo:(e==null?void 0:e.ubigeo)||"",address:(e==null?void 0:e.address)||"",number:(e==null?void 0:e.number)||"",comment:(e==null?void 0:e.comment)||"",amount:p||0,delivery:C,cart:d,invoiceType:e.invoiceType||"",documentType:e.documentType||"",document:e.document||"",businessName:e.businessName||"",payment_method:s||null,payment_proof:null};te(a),Z(!0)}}catch(a){console.error("Error en el pago:",a),q.success("Error en el Pago",{description:"No se llegó a procesar el pago",icon:t.jsx(O,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"top-right"})}};c.useEffect(()=>{A(s=>{const a={...s};return Object.keys(e).forEach(o=>{e[o]&&delete a[o]}),a})},[e]);const Ce=s=>({control:a=>({...a,border:`1px solid ${s?"#ef4444":"#e5e7eb"}`,boxShadow:"none",minHeight:"50px","&:hover":{borderColor:s?"#ef4444":"#6b7280"},borderRadius:"0.75rem",padding:"2px 8px"}),menu:a=>({...a,zIndex:9999,marginTop:"4px",borderRadius:"8px"}),option:a=>({...a,color:"#1f2937",backgroundColor:"white","&:hover":{backgroundColor:"#f3f4f6"},padding:"12px 16px"})}),ke={control:(s,a)=>({...s,padding:"0.5rem",borderColor:(a.isFocused,"#d1d5db"),borderRadius:"0.75rem",boxShadow:"none","&:hover":{borderColor:"#9ca3af"}}),input:s=>({...s,color:"#374151"}),option:(s,a)=>({...s,backgroundColor:a.isSelected?"#3b82f6":"white",color:a.isSelected?"white":"#374151","&:hover":{backgroundColor:"#e5e7eb"}}),singleValue:s=>({...s,color:"#374151"})},Se=p*0,Te=(p-Se)*((m==null?void 0:m.amount)||0)/100,se=s=>{s.preventDefault();const a=(Y.current.value||"").trim().toUpperCase();a&&Ge.save({coupon:a,amount:p,email:"basiliohinostroza2003bradneve@gmail.com"}).then(o=>{o&&o.id?I(o):I(null)})},Pe=s=>{s.key=="Enter"&&se(s)};return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-y-8 lg:gap-8 ",children:[t.jsx("div",{className:"lg:col-span-3",children:t.jsxs("form",{className:"space-y-6 bg-[#f9f9f9] py-6 px-4 sm:px-6 rounded-2xl font-font-general",onSubmit:s=>s.preventDefault(),children:[t.jsxs("div",{className:"sectionInformation space-y-3.5",children:[t.jsx("h3",{className:"block text-xl 2xl:text-2xl font-bold mb-4 customtext-neutral-dark ",children:"Información del contacto"}),t.jsxs("div",{className:"grid lg:grid-cols-2 gap-4",children:[t.jsx(y,{type:"text",label:"Nombres",name:"name",value:e.name,error:h.name,onChange:x,placeholder:"Nombres",required:!0}),t.jsx(y,{label:"Apellidos",type:"text",name:"lastname",value:e.lastname,error:h.lastname,onChange:x,placeholder:"Apellidos",required:!0})]}),t.jsxs("div",{className:"grid lg:grid-cols-2 gap-4 ",children:[t.jsx(y,{label:"Correo electrónico",type:"email",name:"email",value:e.email,error:h.email,onChange:x,placeholder:"Ej. hola@gmail.com",required:!0}),t.jsxs("div",{className:"w-full",children:[t.jsxs("label",{htmlFor:"phone",className:"block text-sm mb-1",children:["Celular ",t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"flex gap-2 w-full",children:[t.jsxs("select",{className:"select2-prefix-selector max-w-[120px] p-2 border border-gray-300 rounded",onChange:s=>setSelectedPrefix(s.target.value),name:"phone_prefix",value:e.phone_prefix,styles:ke,classNamePrefix:"select",children:[t.jsx("option",{value:"",children:"Selecciona un país"}),pe.sort((s,a)=>s.country.localeCompare(a.country)).map((s,a)=>t.jsx("option",{value:s.realCode,"data-code":s.beautyCode,"data-flag":s.flag,"data-country":s.country},a))]}),t.jsx(y,{type:"text",id:"phone",name:"phone",value:e.phone,error:h.phone,onChange:x,placeholder:"000 000 000"})]})]})]})]}),t.jsx("div",{className:"bg-[#66483966] py-[0.6px]"}),t.jsxs("div",{className:"sectionDelivery space-y-3.5",children:[t.jsx("h3",{className:"block text-xl 2xl:text-2xl font-bold mb-4 customtext-neutral-dark",children:"Dirección de envío"}),t.jsxs("div",{id:"ubigeo-select-container",className:"form-group",children:[t.jsx("label",{className:"block text-sm 2xl:text-base mb-1 customtext-neutral-dark ",children:"Ubicación de entrega (Distrito)"}),t.jsx(Me,{name:"ubigeo",cacheOptions:!0,value:F,loadOptions:ge,onChange:s=>{K(s),z(s)},placeholder:"Buscar por distrito | provincia | departamento ...",loadingMessage:()=>"Buscando ubicaciones...",noOptionsMessage:({inputValue:s})=>s.length<3?"Ingrese al menos 3 caracteres...":"No se encontraron resultados",isLoading:L,styles:Ce(!!h.ubigeo),formatOptionLabel:({data:s})=>t.jsxs("div",{className:"text-sm py-1",children:[t.jsx("div",{className:"font-medium",children:s.distrito}),t.jsxs("div",{className:"text-gray-500",children:[s.provincia,", ",s.departamento]})]}),className:"w-full rounded-xl transition-all duration-300",menuPortalTarget:document.body,isClearable:!0,components:{ClearIndicator:s=>t.jsx("div",{...s.innerProps,className:"p-1 cursor-pointer",children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-400 hover:text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})}}),h.ubigeo&&t.jsx("div",{className:"text-red-500 text-sm mt-1",children:h.ubigeo})]}),t.jsx(y,{label:"Avenida / Calle / Jirón",type:"text",name:"address",value:e.address,error:h.address,onChange:x,placeholder:"Ingresa el nombre de la calle",required:!0}),t.jsxs("div",{className:"grid lg:grid-cols-2 gap-4",children:[t.jsx(y,{label:"Número",type:"text",name:"number",value:e.number,error:h.number,onChange:x,placeholder:"Ingresa el número de la calle",required:!0}),t.jsx(y,{label:"Dpto./ Interior/ Piso/ Lote/ Bloque (opcional)",type:"text",name:"comment",value:e.comment,onChange:x,placeholder:"Ej. Casa 3, Dpto 101"})]}),T.length>0&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"block text-xl 2xl:text-2xl font-bold mb-4 customtext-neutral-dark",children:"Método de envío"}),t.jsx("div",{className:"grid grid-cols-2 gap-4",children:T.map(s=>t.jsx(qe,{title:(s.type==="free"||s.type==="express"||s.type==="agency",s.deliveryType),price:s.price,description:s.description,selected:P===s.type,onSelect:()=>{U(s.type),S(s.price)}},s.type))}),console.log(T.find(s=>s.type===P)),P&&T.length>0&&t.jsx("div",{className:"space-y-4 mt-4",children:(ae=(ne=T.find(s=>s.type===P))==null?void 0:ne.characteristics)==null?void 0:ae.map((s,a)=>t.jsxs("div",{className:"flex items-start gap-4 bg-[#F7F9FB] p-4 rounded-xl",children:[t.jsx("div",{className:"w-5 flex-shrink-0",children:t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-info customtext-primary",children:[t.jsx("circle",{cx:"12",cy:"12",r:"10"}),t.jsx("path",{d:"M12 16v-4"}),t.jsx("path",{d:"M12 8h.01"})]})}),t.jsx("div",{className:"flex-1",children:t.jsx("p",{className:"text-sm font-medium customtext-neutral-dark",children:s})})]},`char-${a}`))})]})]}),t.jsx("div",{className:"bg-[#66483966] py-[0.6px]"}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-medium customtext-neutral-dark",children:"Tipo de comprobante"}),t.jsxs("div",{className:"flex gap-4",children:[t.jsxs("label",{className:"inline-flex items-center",children:[t.jsx("input",{type:"radio",className:"form-radio",name:"invoiceType",value:"boleta",checked:e.invoiceType==="boleta",onChange:x}),t.jsx("span",{className:"ml-2",children:"Boleta"})]}),t.jsxs("label",{className:"inline-flex items-center",children:[t.jsx("input",{type:"radio",className:"form-radio",name:"invoiceType",value:"factura",checked:e.invoiceType==="factura",onChange:x}),t.jsx("span",{className:"ml-2",children:"Factura"})]})]})]}),t.jsx(y,{label:e.documentType==="dni"?"DNI":"RUC",type:"text",name:"document",value:e.document,error:h.document,onChange:x,placeholder:`Ingrese su ${e.documentType==="dni"?"DNI":"RUC"}`,maxLength:e.documentType==="dni"?"8":"11",required:!0}),e.invoiceType==="factura"&&t.jsx(y,{label:"Razón Social",type:"text",name:"businessName",value:e.businessName,onChange:x,placeholder:"Ingrese la razón social"})]})}),t.jsxs("div",{className:"bg-[#F7F9FB] rounded-xl shadow-lg p-6 col-span-2 h-max font-font-general",children:[t.jsx("h3",{className:"text-2xl font-bold pb-6 customtext-neutral-dark",children:"Resumen de compra"}),t.jsx("div",{className:"space-y-6 border-b-2 pb-6",children:d.map((s,a)=>t.jsx("div",{className:"rounded-lg",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"bg-white p-0 rounded-xl",children:t.jsx("img",{src:`/storage/images/item/${s.image}`,alt:s.name,className:"w-20 h-20 object-cover rounded  "})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-semibold customtext-neutral-dark text-base 2xl:text-lg mb-2",children:s.name}),t.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Color:"," ",t.jsx("span",{className:"customtext-neutral-dark",children:s.color})]}),t.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Cantidad:"," ",t.jsxs("span",{className:"customtext-neutral-dark",children:[s.quantity," "]})]})]})]})},s.id))}),!m&&t.jsxs("div",{className:"mt-6 flex",children:[t.jsx("input",{ref:Y,type:"text",placeholder:"Código de cupón",className:"w-full rounded-l-md border border-gray-300 p-2 px-4 text-sm outline-none uppercase focus:border-[#C5B8D4]",value:m==null?void 0:m.name,onKeyDown:Pe,disabled:L}),t.jsx("button",{className:"rounded-r-md bg-[#5339B1] px-4 py-2 text-sm text-white",type:"button",onClick:se,disabled:L,children:"Aplicar"})]}),t.jsxs("div",{className:"space-y-4 mt-6",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"customtext-neutral-dark",children:"Subtotal"}),t.jsxs("span",{className:"font-semibold",children:["S/ ",M(u)]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"customtext-neutral-dark",children:"IGV"}),t.jsxs("span",{className:"font-semibold",children:["S/ ",M(f)]})]}),m&&t.jsxs("div",{className:"mb-2 mt-2 flex justify-between items-center border-b pb-2 text-sm font-bold",children:[t.jsxs("span",{children:["Cupón aplicado"," ",t.jsx(de,{content:"Eliminar",children:t.jsx("i",{className:"mdi mdi-close text-red-500 cursor-pointer",onClick:()=>I(null)})}),t.jsxs("small",{className:"block text-xs font-light",children:[m.name," ",t.jsx(de,{content:m.description,children:t.jsx("i",{className:"mdi mdi-information-outline ms-1"})})," ","(-",Math.round(m.amount*100)/100,"%)"]})]}),t.jsxs("span",{children:["S/ -",M(Te)]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"customtext-neutral-dark",children:"Envío"}),t.jsx("span",{className:"font-semibold",children:E!=null&&W>=E?t.jsxs("span",{className:"customtext-neutral-dark",children:["Gratis (Compra mayor a S/",E,")"]}):`S/ ${M(C)}`})]}),t.jsx("div",{className:"py-3 border-y-2 mt-6",children:t.jsxs("div",{className:"flex justify-between font-bold text-[20px] items-center",children:[t.jsx("span",{children:"Total"}),t.jsxs("span",{children:["S/ ",M(p)]})]})}),t.jsxs("div",{className:"space-y-2 pt-4",children:[t.jsxs(Oe,{className:"payment-button",onClick:ve,children:[" ","Continuar"]}),t.jsx("div",{id:"mercadopago-button-container"}),t.jsxs(Re,{onClick:w,children:[" ","Cancelar"]})]}),t.jsx("div",{children:t.jsxs("p",{className:"text-sm customtext-neutral-dark",children:["Al realizar tu pedido, aceptas los",t.jsx("a",{className:"customtext-primary font-bold",children:"Términos y Condiciones"}),", y que nosotros usaremos sus datos personales de acuerdo con nuestra",t.jsx("a",{className:"customtext-primary font-bold",children:"Política de Privacidad"}),"."]})})]})]})]}),t.jsx(Ve,{isOpen:be,contacts:R,onClose:()=>V(!1),onPaymentComplete:we}),t.jsx(Le,{isOpen:ye,cart:d,subTotal:u,igv:f,totalFinal:p,envio:C,request:ee,onClose:()=>X(!1),paymentMethod:D}),t.jsx(Ue,{isOpen:fe,cart:d,subTotal:u,igv:f,totalFinal:p,envio:C,contacts:R,request:ee,onClose:()=>Z(!1),paymentMethod:D})]})}export{Ut as S};
