import{j as s}from"./AboutSimple-Cf8x2fCZ.js";import{r as v}from"./index-BOnQTV8N.js";import{g as W,i as G,e as U,S as A,a as O}from"./BlogCarousel-RzLTMVtu.js";import{N as L}from"./navigation-Dg7GKp1K.js";import{f as B}from"./free-mode-BsSbMoed.js";/* empty css               *//* empty css                  */import"./BlogCarrusel-YBu8o7AC.js";import"./thumbs-l0sNRNKZ.js";import{D as M}from"./index.es-DmNPuacW.js";import"./SearchWidget-D7iHOckK.js";import{S as N}from"./CartKuchara-D9l7c7at.js";import{C as g}from"./Number2Currency-jIsa99f9.js";import{e as R}from"./es-BvH-nRcN.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./create-element-if-not-defined-BRnTQE4W.js";import"./floating-ui.react-GLcD_k_x.js";import"./floating-ui.dom-VJ4vUqp9.js";import"./index-pSueRYGM.js";import"./index-B6ujFmsw.js";import"./General-apRuNwp7.js";function V(e){let{swiper:a,extendParams:I,on:y}=e;I({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-thumbs"}});let m=!1,t=!1;a.thumbs={swiper:null};function S(){const o=a.thumbs.swiper;if(!o||o.destroyed)return;const r=o.clickedIndex,p=o.clickedSlide;if(p&&p.classList.contains(a.params.thumbs.slideThumbActiveClass)||typeof r>"u"||r===null)return;let n;o.params.loop?n=parseInt(o.clickedSlide.getAttribute("data-swiper-slide-index"),10):n=r,a.params.loop?a.slideToLoop(n):a.slideTo(n)}function w(){const{thumbs:o}=a.params;if(m)return!1;m=!0;const r=a.constructor;if(o.swiper instanceof r){if(o.swiper.destroyed)return m=!1,!1;a.thumbs.swiper=o.swiper,Object.assign(a.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(a.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1}),a.thumbs.swiper.update()}else if(G(o.swiper)){const p=Object.assign({},o.swiper);Object.assign(p,{watchSlidesProgress:!0,slideToClickedSlide:!1}),a.thumbs.swiper=new r(p),t=!0}return a.thumbs.swiper.el.classList.add(a.params.thumbs.thumbsContainerClass),a.thumbs.swiper.on("tap",S),!0}function j(o){const r=a.thumbs.swiper;if(!r||r.destroyed)return;const p=r.params.slidesPerView==="auto"?r.slidesPerViewDynamic():r.params.slidesPerView;let n=1;const u=a.params.thumbs.slideThumbActiveClass;if(a.params.slidesPerView>1&&!a.params.centeredSlides&&(n=a.params.slidesPerView),a.params.thumbs.multipleActiveThumbs||(n=1),n=Math.floor(n),r.slides.forEach(c=>c.classList.remove(u)),r.params.loop||r.params.virtual&&r.params.virtual.enabled)for(let c=0;c<n;c+=1)U(r.slidesEl,`[data-swiper-slide-index="${a.realIndex+c}"]`).forEach(d=>{d.classList.add(u)});else for(let c=0;c<n;c+=1)r.slides[a.realIndex+c]&&r.slides[a.realIndex+c].classList.add(u);const x=a.params.thumbs.autoScrollOffset,b=x&&!r.params.loop;if(a.realIndex!==r.realIndex||b){const c=r.activeIndex;let d,C;if(r.params.loop){const h=r.slides.find(f=>f.getAttribute("data-swiper-slide-index")===`${a.realIndex}`);d=r.slides.indexOf(h),C=a.activeIndex>a.previousIndex?"next":"prev"}else d=a.realIndex,C=d>a.previousIndex?"next":"prev";b&&(d+=C==="next"?x:-1*x),r.visibleSlidesIndexes&&r.visibleSlidesIndexes.indexOf(d)<0&&(r.params.centeredSlides?d>c?d=d-Math.floor(p/2)+1:d=d+Math.floor(p/2)-1:d>c&&r.params.slidesPerGroup,r.slideTo(d,o?0:void 0))}}y("beforeInit",()=>{const{thumbs:o}=a.params;if(!(!o||!o.swiper))if(typeof o.swiper=="string"||o.swiper instanceof HTMLElement){const r=W(),p=()=>{const u=typeof o.swiper=="string"?r.querySelector(o.swiper):o.swiper;if(u&&u.swiper)o.swiper=u.swiper,w(),j(!0);else if(u){const x=`${a.params.eventsPrefix}init`,b=c=>{o.swiper=c.detail[0],u.removeEventListener(x,b),w(),j(!0),o.swiper.update(),a.update()};u.addEventListener(x,b)}return u},n=()=>{if(a.destroyed)return;p()||requestAnimationFrame(n)};requestAnimationFrame(n)}else w(),j(!0)}),y("slideChange update resize observerUpdate",()=>{j()}),y("setTransition",(o,r)=>{const p=a.thumbs.swiper;!p||p.destroyed||p.setTransition(r)}),y("beforeDestroy",()=>{const o=a.thumbs.swiper;!o||o.destroyed||t&&o.destroy()}),Object.assign(a.thumbs,{init:w,update:j})}const be=({item:e,data:a,cart:I,setCart:y,generals:m})=>{var F;const t=(a==null?void 0:a.accentColor)||"#78673A",[S,w]=v.useState(null),[j,o]=v.useState(0),[r,p]=v.useState(null),[n,u]=v.useState(null),[x,b]=v.useState(2),[c,d]=v.useState(!1),C={standard:"Estándar",suite:"Suite",deluxe:"Deluxe",presidential:"Presidencial",family:"Familiar",executive:"Ejecutiva",single:"Individual",double:"Doble"},h=r&&n?Math.ceil((n-r)/(1e3*60*60*24)):0,f=parseFloat((e==null?void 0:e.final_price)||(e==null?void 0:e.price))||0,_=f*h,P=(e==null?void 0:e.price)&&(e==null?void 0:e.discount)&&parseFloat(e.discount)>0,$=parseFloat(e==null?void 0:e.price)||0,q=P?Math.round(($-parseFloat(e.discount))/$*100):0,E=[{url:e==null?void 0:e.image,type:"main",alt:(e==null?void 0:e.name)||"Habitación"},...((e==null?void 0:e.images)||[]).map((l,i)=>({url:l.url,type:"gallery",index:i,alt:`${e==null?void 0:e.name} - Imagen ${i+1}`}))].filter(l=>l.url),H=async()=>{if(!r||!n){N.fire({icon:"warning",title:"Fechas requeridas",text:"Por favor selecciona las fechas de check-in y check-out",confirmButtonColor:t});return}if(h<=0){N.fire({icon:"warning",title:"Fechas inválidas",text:"La fecha de check-out debe ser posterior a la de check-in",confirmButtonColor:t});return}if(x>((e==null?void 0:e.max_occupancy)||2)){N.fire({icon:"warning",title:"Capacidad excedida",text:`Esta habitación tiene capacidad máxima para ${(e==null?void 0:e.max_occupancy)||2} personas`,confirmButtonColor:t});return}d(!0);try{if(I.find(T=>T.type==="booking"&&T.id===e.id&&T.check_in===r.toISOString().split("T")[0]&&T.check_out===n.toISOString().split("T")[0])){(await N.fire({icon:"info",title:"Ya en el carrito",text:"Esta reserva ya está en tu carrito",confirmButtonText:"Ir al carrito",showCancelButton:!0,cancelButtonText:"Continuar viendo",confirmButtonColor:t})).isConfirmed&&(window.location.href="/cart"),d(!1);return}const i={id:e.id,type:"booking",name:e.name,slug:e.slug,image:e.image,price:f,final_price:f,discount:e.discount||0,check_in:r.toISOString().split("T")[0],check_out:n.toISOString().split("T")[0],nights:h,guests:x,max_occupancy:e.max_occupancy,beds_count:e.beds_count,room_type:e.room_type,amenities:e.amenities||[],quantity:1,total_price:_},k=[...I,i];y(k),(await N.fire({icon:"success",title:"¡Reserva agregada!",html:`
                    <div class="text-left">
                        <p class="font-bold mb-2">${e.name}</p>
                        <p class="text-sm text-gray-600">
                            <strong>Check-in:</strong> ${r.toLocaleDateString("es-PE")}<br/>
                            <strong>Check-out:</strong> ${n.toLocaleDateString("es-PE")}<br/>
                            <strong>${h} noche${h!==1?"s":""}</strong> - ${x} huésped${x!==1?"es":""}
                        </p>
                        <p class="text-lg font-bold mt-2" style="color: ${t}">
                            Total: ${g()} ${_.toFixed(2)}
                        </p>
                    </div>
                `,confirmButtonText:"Ir al carrito",showCancelButton:!0,cancelButtonText:"Continuar viendo",confirmButtonColor:t})).isConfirmed&&(window.location.href="/cart")}catch(l){N.fire({icon:"error",title:"Error",text:l.message||"Ocurrió un error al procesar la reserva",confirmButtonColor:t})}finally{d(!1)}},D=(F=m==null?void 0:m.find(l=>l.correlative==="phone_whatsapp"))==null?void 0:F.description,z=()=>{if(!D)return;let l=`Hola, me interesa la habitación "${e==null?void 0:e.name}"`;r&&n&&(l+=`

Fechas de interés:
- Check-in: ${r.toLocaleDateString("es-PE")}
- Check-out: ${n.toLocaleDateString("es-PE")}
- ${h} noche(s)
- ${x} huésped(es)`);const i=`https://wa.me/${D.replace(/\D/g,"")}?text=${encodeURIComponent(l)}`;window.open(i,"_blank")};return s.jsxs("div",{className:"bg-gradient-to-b from-[#0a0604] to-[#281409] min-h-screen text-white",children:[s.jsx("div",{className:"px-[5%] py-4",children:s.jsx("nav",{className:"max-w-7xl mx-auto","aria-label":"breadcrumb",children:s.jsxs("ol",{className:"flex flex-wrap items-center gap-2 text-sm",children:[s.jsx("li",{children:s.jsx("a",{href:"/",className:"text-gray-400 hover:text-white transition-colors",children:"Inicio"})}),s.jsx("li",{className:"text-gray-600",children:"/"}),s.jsx("li",{children:s.jsx("a",{href:"/#habitaciones",className:"text-gray-400 hover:text-white transition-colors",children:"Habitaciones"})}),s.jsx("li",{className:"text-gray-600",children:"/"}),s.jsx("li",{style:{color:t},children:e==null?void 0:e.name})]})})}),s.jsx("div",{className:"px-[5%] pb-16",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"grid lg:grid-cols-2 gap-8 lg:gap-12",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"relative rounded-2xl overflow-hidden bg-[#281409]/50",children:[s.jsx(A,{spaceBetween:10,navigation:!0,thumbs:{swiper:S&&!S.destroyed?S:null},modules:[B,L,V],className:"aspect-[4/3]",children:E.map((l,i)=>s.jsx(O,{children:s.jsx("img",{src:`/storage/images/item/${l.url}`,alt:l.alt,className:"w-full h-full object-cover",onError:k=>{k.target.src="/assets/img/noimage/no_img.jpg"}})},i))}),P&&s.jsxs("div",{className:"absolute top-4 left-4 bg-red-600 text-white px-3 py-1 rounded-lg text-sm font-bold z-10",children:["-",q,"% OFF"]})]}),E.length>1&&s.jsx(A,{onSwiper:w,spaceBetween:10,slidesPerView:4,freeMode:!0,watchSlidesProgress:!0,modules:[B,L,V],className:"thumbs-swiper",children:E.map((l,i)=>s.jsx(O,{className:"cursor-pointer",children:s.jsx("div",{className:"aspect-square rounded-lg overflow-hidden border-2 border-transparent hover:border-opacity-100 transition-all",style:{borderColor:`${t}50`},children:s.jsx("img",{src:`/storage/images/item/${l.url}`,alt:l.alt,className:"w-full h-full object-cover",onError:k=>{k.target.src="/assets/img/noimage/no_img.jpg"}})})},i))})]}),s.jsxs("div",{className:"space-y-6",children:[(e==null?void 0:e.room_type)&&s.jsx("span",{className:"inline-block px-4 py-1 rounded-full text-sm font-medium",style:{backgroundColor:`${t}33`,color:t},children:C[e.room_type]||e.room_type}),s.jsx("h1",{className:"text-3xl lg:text-4xl font-bold",style:{color:t},children:e==null?void 0:e.name}),s.jsxs("div",{className:"flex flex-wrap gap-6 text-gray-300",children:[(e==null?void 0:e.max_occupancy)>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("i",{className:"fas fa-users",style:{color:t}}),s.jsxs("span",{children:[e.max_occupancy," personas máx."]})]}),(e==null?void 0:e.beds_count)>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("i",{className:"fas fa-bed",style:{color:t}}),s.jsxs("span",{children:[e.beds_count," cama",e.beds_count!==1?"s":""]})]}),(e==null?void 0:e.size_m2)>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("i",{className:"fas fa-ruler-combined",style:{color:t}}),s.jsxs("span",{children:[e.size_m2," m²"]})]})]}),s.jsxs("div",{className:"py-4 border-y border-gray-700",children:[s.jsxs("div",{className:"flex items-baseline gap-3",children:[s.jsxs("span",{className:"text-3xl font-bold",style:{color:t},children:[g()," ",f.toFixed(2)]}),s.jsx("span",{className:"text-gray-400",children:"/ noche"})]}),P&&s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsxs("span",{className:"text-gray-500 line-through",children:[g()," ",$.toFixed(2)]}),s.jsxs("span",{className:"bg-red-600 text-white px-2 py-0.5 rounded text-xs font-bold",children:["Ahorras ",g()," ",($-f).toFixed(2)]})]})]}),(e==null?void 0:e.amenities)&&e.amenities.length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",style:{color:t},children:"Amenidades incluidas"}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:e.amenities.map((l,i)=>s.jsxs("div",{className:"flex items-center gap-2 text-gray-300",children:[s.jsx("i",{className:l.icon||"fas fa-check",style:{color:t}}),s.jsx("span",{className:"text-sm",children:l.name})]},l.id||i))})]}),s.jsxs("div",{className:"bg-[#281409]/80 rounded-2xl p-6 space-y-4 border",style:{borderColor:`${t}33`},children:[s.jsx("h3",{className:"text-lg font-semibold",style:{color:t},children:"Reserva tu estadía"}),s.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Check-in"}),s.jsx(M,{selected:r,onChange:l=>p(l),selectsStart:!0,startDate:r,endDate:n,minDate:new Date,locale:R,dateFormat:"dd/MM/yyyy",placeholderText:"Selecciona fecha",className:"w-full bg-[#0a0604] border border-gray-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-opacity-100",style:{borderColor:`${t}50`}})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Check-out"}),s.jsx(M,{selected:n,onChange:l=>u(l),selectsEnd:!0,startDate:r,endDate:n,minDate:r||new Date,locale:R,dateFormat:"dd/MM/yyyy",placeholderText:"Selecciona fecha",className:"w-full bg-[#0a0604] border border-gray-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-opacity-100",style:{borderColor:`${t}50`}})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Huéspedes"}),s.jsx("select",{value:x,onChange:l=>b(parseInt(l.target.value)),className:"w-full bg-[#0a0604] border border-gray-700 rounded-lg px-4 py-3 text-white focus:outline-none",style:{borderColor:`${t}50`},children:[...Array((e==null?void 0:e.max_occupancy)||4)].map((l,i)=>s.jsxs("option",{value:i+1,children:[i+1," huésped",i>0?"es":""]},i+1))})]}),h>0&&s.jsxs("div",{className:"border-t border-gray-700 pt-4 space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-gray-400",children:[s.jsxs("span",{children:[g()," ",f.toFixed(2)," x ",h," noche",h!==1?"s":""]}),s.jsxs("span",{children:[g()," ",_.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between text-xl font-bold",style:{color:t},children:[s.jsx("span",{children:"Total"}),s.jsxs("span",{children:[g()," ",_.toFixed(2)]})]})]}),s.jsx("button",{onClick:H,disabled:c,className:"w-full py-4 text-white font-bold rounded-lg transition-all duration-300 transform hover:translate-y-[-2px] shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:t},children:c?s.jsxs("span",{className:"flex items-center justify-center gap-2",children:[s.jsx("i",{className:"fas fa-spinner fa-spin"}),"Procesando..."]}):"Reservar Ahora"}),D&&s.jsxs("button",{onClick:z,className:"w-full py-3 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-lg transition-all duration-300 flex items-center justify-center gap-2",children:[s.jsx("i",{className:"fab fa-whatsapp text-xl"}),"Consultar por WhatsApp"]})]})]})]}),s.jsxs("div",{className:"mt-12 grid lg:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"bg-[#281409]/50 rounded-2xl p-6 border",style:{borderColor:`${t}33`},children:[s.jsx("h3",{className:"text-xl font-bold mb-4",style:{color:t},children:"Descripción"}),s.jsx("div",{className:"prose prose-invert max-w-none text-gray-300",dangerouslySetInnerHTML:{__html:(e==null?void 0:e.description)||(e==null?void 0:e.summary)||"<p>Sin descripción disponible.</p>"}})]}),(e==null?void 0:e.features)&&e.features.length>0&&s.jsxs("div",{className:"bg-[#281409]/50 rounded-2xl p-6 border",style:{borderColor:`${t}33`},children:[s.jsx("h3",{className:"text-xl font-bold mb-4",style:{color:t},children:"Características"}),s.jsx("ul",{className:"space-y-3",children:e.features.map((l,i)=>s.jsxs("li",{className:"flex items-start gap-3 text-gray-300",children:[s.jsx("i",{className:"fas fa-check mt-1",style:{color:t}}),s.jsx("span",{children:typeof l=="object"?l.feature:l})]},i))})]})]})]})})]})};export{be as default};
