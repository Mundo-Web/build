import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{R as z}from"./recaptcha-wrapper-hwZdxtK2.js";import{r as o}from"./index-BH53Isel.js";import{I as m}from"./InputForm-DN14ZGms.js";import{u as A}from"./ubigeo-Q-ocg024.js";import{C as V}from"./chevron-down-DS-mdh9v.js";import{S as $}from"./search-TwiiKGP5.js";import{C as H}from"./check-DQ7QoS0v.js";import{m as F}from"./main-BSEyQEJW.js";import{R as K}from"./PaymentModal-BB1JXzaZ.js";import{H as W}from"./HtmlContent-FTivcJrM.js";import{X as U}from"./x-DBMwyD6F.js";import"./index-yBjzXJbu.js";import"./index-duZ_MKqr.js";import"./index-Chjiymov.js";import"./hoist-non-react-statics.cjs-kbdZbs82.js";import"./createLucideIcon-Cy5Ya80P.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";import"./index-fNjTmf9T.js";const f=({options:u=[],placeholder:N="Select an option",onChange:y,valueKey:S,labelKey:l,label:c,labelClass:r,className:_,disabled:p=!1})=>{const[h,d]=o.useState(!1),[i,v]=o.useState(null),[x,w]=o.useState(""),j=o.useRef(null),g=u.length>0&&typeof u[0]=="object",k=g?S||Object.keys(u[0])[0]:null,D=g?l||Object.keys(u[0])[1]:null,O=u.map(s=>g?{value:s[k],label:s[D]}:{value:s,label:s}).filter(s=>s.label.toLowerCase().includes(x.toLowerCase()));o.useEffect(()=>{const s=P=>{j.current&&!j.current.contains(P.target)&&d(!1)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]);const R=s=>{v(s),y(s.value),d(!1)};return e.jsxs("div",{className:"relative w-full",ref:j,children:[c&&e.jsx("label",{className:`block text-sm mb-1 customtext-neutral-dark ${r}`,children:c}),e.jsxs("button",{className:`w-full relative text-start  px-4 py-3 border customtext-neutral-dark   rounded-xl focus:ring-0 focus:outline-0   transition-all duration-300 ${_}`,onClick:()=>d(!h),"aria-haspopup":"listbox","aria-expanded":h,disabled:p,children:[e.jsx("span",{className:"block truncate",children:i?i.label:N}),e.jsx("span",{className:"absolute inset-y-0 right-0 flex items-center justify-center py-3 pr-2 pointer-events-none",children:e.jsx(V,{className:`w-5 h-5 customtext-neutral-dark transition-transform duration-200 ${h?"rotate-180":""}`})})]}),h&&e.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white rounded-lg shadow-lg max-h-60 overflow-auto",children:[e.jsx("div",{className:"sticky top-0 bg-white p-2",children:e.jsxs("div",{className:"relative",children:[e.jsx($,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"text",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Search options...",value:x,onChange:s=>w(s.target.value)})]})}),e.jsx("ul",{className:"py-1",role:"listbox",children:O.map(s=>e.jsxs("li",{className:`px-4 py-2 cursor-pointer flex items-center justify-between 
                                    ${i&&i.value===s.value?"bg-blue-500 text-white":"hover:bg-gray-100"}`,onClick:()=>R(s),role:"option","aria-selected":i&&i.value===s.value,children:[e.jsx("span",{className:"block truncate",children:s.label}),i&&i.value===s.value&&e.jsx(H,{className:"w-5 h-5"})]},s.value))})]})]})};function pe({generals:u}){const N=o.useRef(null),[y,S]=o.useState(""),[l,c]=o.useState({nombre:"",tipo_documento:"RUC",numero_identidad:"",celular:"",correo_electronico:"",departamento:"",provincia:"",distrito:"",direccion:"",tipo_producto:"",monto_reclamado:"",descripcion_producto:"",tipo_reclamo:"",fecha_ocurrencia:"",numero_pedido:"",detalle_reclamo:"",acepta_terminos:!1}),r=t=>{const{name:a,value:b,type:n,checked:C}=t.target;c({...l,[a]:n==="checkbox"?C:b})},_=t=>{t.preventDefault();const a=N.current.getValue();if(!a){S("Por favor, verifica el reCAPTCHA.");return}const b={...l,recaptcha_token:a};fetch("/api/complaints",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}).then(n=>n.json()).then(n=>{console.log(n),n.type==="success"?F.Notify.add({type:"success",icon:"/assets/img/icon.svg",title:"Solitud enviada con éxito",body:n.message}):F.Notify.add({type:"danger",icon:"/assets/img/icon.svg",title:"Envio Fallido",body:n.message})}).catch(n=>F.Notify.add({type:"danger",icon:"/assets/img/icon.svg",title:"Error",body:n}))},[p,h]=o.useState(""),[d,i]=o.useState(""),[v,x]=o.useState(""),[w,j]=o.useState([]),[g,k]=o.useState([]),[D,E]=o.useState([]);o.useEffect(()=>{const t=[...new Set(A.map(a=>a.departamento))];j(t)},[]),o.useEffect(()=>{if(p){const t=[...new Set(A.filter(a=>a.departamento===p).map(a=>a.provincia))];k(t),i(""),x(""),E([]),c(a=>({...a,departamento:p,provincia:"",distrito:""}))}},[p]),o.useEffect(()=>{if(d){const t=A.filter(a=>a.departamento===p&&a.provincia===d).map(a=>a.distrito);E(t),x(""),c(a=>({...a,provincia:d,distrito:""}))}},[d]),o.useEffect(()=>{v&&c(t=>({...t,distrito:v}))},[v]);const O=[{value:"ruc",label:"RUC"},{value:"dni",label:"DNI"},{value:"ce",label:"CE"},{value:"pasaporte",label:"Pasaporte"}],R=[{value:"producto",label:"Producto"},{value:"servicio",label:"Servicio"}],s=[{value:"reclamo",label:"Reclamo"},{value:"queja",label:"Queja"}],[P,I]=o.useState(!1),L={terms_conditions:"Términos y condiciones"},T=t=>I(t),M=()=>I(null);return e.jsxs("div",{className:" w-full px-primary mx-auto pt-8 pb-16 font-font-general",children:[e.jsxs("div",{className:"max-w-7xl mx-auto  bg-white shadow-lg rounded-2xl customtext-neutral-dark p-8",children:[e.jsx("h1",{className:"text-2xl font-bold mb-10 text-center uppercase",children:"Libro de Reclamaciones"}),e.jsxs("form",{onSubmit:_,children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Identificación del Consumidor"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"space-y-1",children:e.jsx(m,{type:"text",label:"Nombres",name:"nombre",value:l.nombre,onChange:r,placeholder:"Nombres"})}),e.jsx("div",{className:"space-y-1",children:e.jsx(f,{label:"Tipo de documento",options:O,placeholder:"Selecciona  documento",onChange:t=>{c(a=>({...a,tipo_documento:t}))}})}),e.jsx("div",{className:"space-y-1",children:e.jsx(m,{type:"text",label:"Número de identidad",name:"numero_identidad",value:l.numero_identidad,onChange:r,placeholder:"Número de identidad"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsx("div",{className:"space-y-1",children:e.jsx(m,{type:"text",label:"Número de celular",name:"celular",value:l.celular,onChange:r,placeholder:"Número de celular"})}),e.jsx("div",{className:"space-y-1",children:e.jsx(m,{type:"text",label:" Correo Electrónico",name:"correo_electronico",value:l.correo_electronico,onChange:r,placeholder:" Correo Electrónico"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[e.jsx(f,{label:"Departamento",options:w,placeholder:"Selecciona un Departamento",onChange:t=>{h(t),c(a=>({...a,departmento:t}))}}),e.jsx(f,{disabled:!p,label:"Provincia",options:g,placeholder:"Selecciona una Provincia",onChange:t=>{i(t),c(a=>({...a,provincia:t}))}}),e.jsx(f,{disabled:!d,label:"Distrito",options:D,placeholder:"Selecciona un Distrito",onChange:t=>{x(t),c(a=>({...a,distrito:t}))}})]}),e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:"space-y-1",children:e.jsx(m,{type:"text",label:"Dirección",name:"direccion",value:l.direccion,onChange:r,placeholder:" Dirección"})})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Identificación del bien contratado"}),e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"relative mt-1",children:e.jsx(f,{label:" ¿Fue un producto o Servicio?",options:R,placeholder:"Selecciona...",onChange:t=>{c(a=>({...a,tipo_producto:t}))}})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsx("div",{className:"space-y-1",children:e.jsx(m,{type:"number",label:" Monto reclamado",name:"monto_reclamado",value:l.monto_reclamado,onChange:r,placeholder:"Monto reclamado"})}),e.jsx("div",{className:"space-y-1",children:e.jsx(m,{type:"text",label:" Descripción de producto",name:"descripcion_producto",value:l.descripcion_producto,onChange:r,placeholder:"Nombre de producto y/o servicios, código(opcional)"})})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Detalle del reclamo del pedido del consumidor"}),e.jsx("div",{className:"mb-4",children:e.jsx(f,{label:"¿Es un reclamo o queja?",options:s,placeholder:"Selecciona...",onChange:t=>{c(a=>({...a,tipo_reclamo:t}))}})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsx("div",{className:"space-y-1",children:e.jsx(m,{type:"date",label:"  Fecha de ocurrencia",name:"fecha_ocurrencia",value:l.fecha_ocurrencia,onChange:r,placeholder:"dd/mm/aaaa"})}),e.jsx("div",{className:"space-y-1",children:e.jsx(m,{type:"text",label:"Número de Pedido",name:"numero_pedido",value:l.numero_pedido,onChange:r,placeholder:"Número de pedido: #95825548"})})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm mb-1 customtext-neutral-dark",children:"Detalle de reclamo o queja"}),e.jsx("textarea",{name:"detalle_reclamo",placeholder:"Detalle de reclamo",className:"w-full min-h-32  px-4 py-3 border customtext-neutral-dark  border-neutral-ligth rounded-xl focus:ring-0 focus:outline-0   transition-all duration-300",value:l.detalle_reclamo,onChange:r})]})})]}),e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",id:"terminos",name:"acepta_terminos",className:"mt-1 mr-2",checked:l.acepta_terminos,onChange:r}),e.jsxs("label",{htmlFor:"terminos",className:"text-sm",children:["Estoy de acuerdo con los"," ",e.jsx("a",{onClick:()=>T(0),className:"customtext-primary underline",children:"términos y condiciones"})]})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsx(z,{ref:N,sitekey:"6LfAcfcqAAAAACc7tfKbaBFc1X5I9V4fewWoVf-9"}),y&&e.jsx("p",{className:"text-red-500 mt-2",children:y})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"bg-primary text-white px-6 py-3 font-medium rounded-lg",children:"Enviar a libro de reclamaciones"})})]})]}),Object.keys(L).map((t,a)=>{var C;const b=L[t],n=((C=u.find(q=>q.correlative==t))==null?void 0:C.description)??"";return e.jsxs(K,{isOpen:P===a,onRequestClose:M,contentLabel:b,className:"absolute left-1/2 -translate-x-1/2 bg-white p-6 rounded-xl shadow-lg w-[95%] max-w-4xl my-8",overlayClassName:"fixed inset-0 bg-black bg-opacity-50 z-50",children:[e.jsx("button",{onClick:M,className:"float-right text-red-500 hover:text-red-700 transition-all duration-300 ",children:e.jsx(U,{width:"2rem",strokeWidth:"4px"})}),e.jsx("h2",{className:"text-2xl font-bold mb-4",children:b}),e.jsx(W,{className:"prose",html:n})]},a)})]})}export{pe as default};
