import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as a}from"./index-BOnQTV8N.js";import I from"./MenuSimple-eF3Gua6U.js";import{X as R}from"./x-fof_H3Vv.js";import{S as L}from"./search-BQ59Robe.js";import{C as $}from"./chevron-left-JcR9Fe4w.js";import{C as h}from"./chevron-right-Cug7tVUE.js";function X({search:l,setSearch:d,pages:b,items:x,onClose:m,data:n}){const[i,v]=a.useState("main"),[f,y]=a.useState(null),[B,j]=a.useState(null),[o,p]=a.useState([]),[g,N]=a.useState("right"),w=a.useRef(null),C=t=>{if(t.preventDefault(),l.trim()){const s=l.trim();window.location.href=`/catalogo?search=${encodeURIComponent(s)}`}return!1},S=t=>{if(t.key==="Enter"&&(t.preventDefault(),l.trim())){const s=l.trim();window.location.href=`/catalogo?search=${encodeURIComponent(s)}`}},c=(t,s="right",r=null)=>{N(s),r&&y(r),setTimeout(()=>{v(t)},50)},k=t=>{j(t.name),p([...o,{level:i,name:"Categorías"}]),c("subcategories","right",t.name)},M=()=>{if(o.length>0){const t=o[o.length-1];c(t.level,"left"),p(o.slice(0,-1))}else i==="subcategories"?c("categories","left"):i==="categories"&&c("main","left")},_=t=>{c("categories","right")},E=()=>"Menú principal",D=()=>{if(i==="main")return e.jsxs("div",{className:"animate-fade animate-duration-300",children:[e.jsxs("button",{className:"px-4 py-2 mb-3 w-full flex justify-between items-center hover:bg-gray-50 active:bg-primary transition-all  rounded-xl",onClick:()=>_(),children:[e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:"font-medium",children:"Categorías"})}),e.jsx(h,{className:"h-5 w-5 customtext-neutral-light"})]}),e.jsx("div",{className:"space-y-2",children:b.map((t,s)=>t.menuable&&e.jsx("a",{href:t.path,className:"p-4 py-2 flex justify-between items-center w-full hover:bg-gray-50 active:bg-primary transition-all  rounded-xl",children:e.jsx("span",{className:"font-medium",children:t.name})},s))})]});if(i==="categories"){const t=[...x].sort((s,r)=>(n==null?void 0:n.type_order)==="order_index"?(s.order_index||0)-(r.order_index||0):s.name.localeCompare(r.name,"es",{sensitivity:"base"}));return e.jsx("div",{className:g==="right"?"animate-fade-left animate-duration-300":"animate-fade-right animate-duration-300",children:e.jsx("div",{className:"space-y-2",children:t.map(s=>e.jsxs("div",{className:"px-4 py-2  rounded-xl flex justify-between items-center cursor-pointer hover:bg-gray-50 active:bg-primary transition-all",onClick:()=>k(s),children:[e.jsx("span",{className:"font-medium",children:s.name}),e.jsx(h,{className:"h-5 w-5 customtext-neutral-light"})]},s.id))})})}else if(i==="subcategories"&&f){const t=x.find(r=>r.name===f),s=t.subcategories?[...t.subcategories].sort((r,u)=>(n==null?void 0:n.type_order)==="order_index"?(r.order_index||0)-(u.order_index||0):r.name.localeCompare(u.name,"es",{sensitivity:"base"})):[];return e.jsx("div",{className:g==="right"?"animate-fade-left animate-duration-300":"animate-fade-right animate-duration-300",children:e.jsx("div",{className:"space-y-2",children:s.map((r,u)=>e.jsxs("a",{href:`/catalogo?subcategory=${r.slug}`,className:"flex w-full px-4  py-2 rounded-xl justify-between items-center hover:bg-gray-50 active:bg-primary transition-all",children:[e.jsx("span",{className:"font-medium",children:r.name}),e.jsx(h,{className:"h-5 w-5 customtext-neutral-light"})]},u))})})}};return a.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),a.useEffect(()=>{const t=s=>{s.key==="Escape"&&(l.trim()?d(""):m())};return document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}},[l,m,d]),e.jsxs("div",{className:"fixed inset-0 z-[99999] flex flex-col touch-none overscroll-none",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:m}),e.jsx("div",{className:"relative w-full md:w-[400px] md:mx-auto flex flex-col h-[100dvh]  ",children:e.jsxs("div",{className:"mt-auto bg-white  shadow-xl flex flex-col max-h-[80vh] rounded-t-2xl overflow-hidden",children:[e.jsxs("div",{className:"p-4 bg-white flex justify-between items-center border-b border-gray-200 sticky top-0 z-[9999]",children:[e.jsx("h1",{className:"text-lg font-bold",children:E()}),e.jsx("button",{className:"p-2 rounded-full hover:bg-gray-100",onClick:m,children:e.jsx(R,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"overflow-y-auto flex-1 p-4 overscroll-contain",children:[e.jsx("div",{className:"mb-5",children:e.jsxs("form",{onSubmit:C,role:"search",className:"relative w-full",children:[e.jsx("input",{ref:w,type:"search",name:"search",placeholder:`${(n==null?void 0:n.input_search_placeholder)||"Buscar productos"}`,value:l,onChange:t=>d(t.target.value),onKeyDown:S,className:"w-full pr-12 py-3 pl-4 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary/20 focus:outline-none",enterKeyHint:"search",inputMode:"search",autoComplete:"off",role:"searchbox","aria-label":`${(n==null?void 0:n.input_search_placeholder)||"Buscar productos"}`}),e.jsx("button",{type:"submit",className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors","aria-label":"Buscar",children:e.jsx(L,{className:"h-4 w-4"})})]})}),i!=="main"&&e.jsxs("button",{onClick:M,className:"flex items-center customtext-primary mb-4 font-medium",children:[e.jsx($,{className:"h-5 w-5 mr-1"}),e.jsx("span",{children:i==="categories"?"Categorías":f})]}),e.jsx("div",{className:"pb-16",children:D()}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0  flex justify-center",children:e.jsx(I,{visible:!0})})]})]})})]})}export{X as M};
