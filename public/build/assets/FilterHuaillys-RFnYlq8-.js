import{r as e,m as t,j as s,ag as a,ah as r,E as l,J as i}from"./vendor-react-DB2gWWlz.js";import{A as o,N as n}from"./vendor-swiper-Cr_RrIb_.js";import{P as c}from"./ProductCardSelector-b8CUkOsc.js";import{I as d}from"./ItemsRest-BhJ2ftaN.js";import{L as g}from"./Loading-C1pqd7tz.js";import{N as u}from"./NoResult-B0yhZr9D.js";import"./preload-helper-DAHR15QK.js";import"./BasicRest-rcCccbSV.js";import"./GoogleSignInButton-Bo5d3xNo.js";import"./BooleanLimit-q2Ad9fGY.js";const m=new d,x=({items:d,data:x,cart:h,setCart:p,filteredData:f,setFavorites:w,favorites:j})=>{const y=e.useRef(null),b=e.useRef(null),[v,N]=e.useState([]),[_,k]=e.useState(null),[E,P]=e.useState([]),[S,$]=e.useState(!0),[C,B]=e.useState({category_id:[]});e.useEffect(()=>{if(f?.categories&&(N(f.categories),t.GET.category&&f.categories.length>0)){const e=f.categories.find(e=>e.slug===t.GET.category||e.id===parseInt(t.GET.category));e&&(k(e),B(t=>({...t,category_id:[e.id]})))}},[f]);e.useEffect(()=>{(async(e=1)=>{$(!0);try{const t=(e=>{const t=[];if(e.category_id&&e.category_id.length>0){const s=e.category_id.map(e=>["category.id","=",e]);if(1===s.length)t.push(s[0]);else if(s.length>1){const e=s.reduce((e,t,s)=>0===s?t:[e,"or",t]);t.push(e)}}return t.length>0?1===t.length?t[0]:t.reduce((e,t,s)=>0===s?t:[e,"and",t]):[]})(C),s=24,a={filter:t,sort:[{selector:"final_price",desc:!0}],skip:(e-1)*s,take:s,requireTotalCount:!0},r=await m.paginate(a);if(200!==r.status)throw new Error(`API returned status ${r.status}`);P(r.data||[])}catch(t){P([])}finally{$(!1)}})()},[C]),e.useEffect(()=>{d&&d.length>0&&0===E.length&&(P(d),$(!1))},[d]);const I=e=>{if(k(e),null===e){B({category_id:[]});const e=new URL(window.location.href);e.searchParams.delete("category"),window.history.pushState({},"",e)}else{B({category_id:[e.id]});const t=new URL(window.location.href);t.searchParams.set("category",e.slug||e.id),window.history.pushState({},"",t)}},L=e=>{window.location.href=`/product/${e.slug}`};return s.jsxs("div",{id:x?.element_id||null,className:"w-full bg-white font-paragraph",children:[x?.background_image&&s.jsxs("div",{className:"relative w-full h-64 lg:h-72 bg-cover  flex items-center justify-center",style:{backgroundImage:`url(${x.background_image})`,backgroundSize:"cover",backgroundPosition:"center"},children:[s.jsx("div",{className:"absolute inset-0 bg-black/60"}),s.jsxs("div",{className:"relative w-full z-10 text-start px-[5%] 2xl:px-0 2xl:max-w-7xl mx-auto",children:[s.jsx("h1",{className:`text-3xl md:text-5xl font-title lg:text-7xl text-start text-white ${x?.class_hero_title||""}`,children:(R=x?.hero_title||"Nuestro *CatÃ¡logo*",R.split(/(\*.*?\*)/g).map((e,t)=>{if(e.startsWith("*")&&e.endsWith("*")){const a=e.replace(/\*/g,"");return s.jsxs("span",{className:"font-title customtext-primary ",children:[s.jsx("br",{}),a]},t)}return s.jsx("span",{className:"font-title",children:e},t)}))}),x?.hero_subtitle&&s.jsx("p",{className:`text-lg md:text-xl text-white/90 mt-4 font-paragraph ${x?.class_hero_subtitle||""}`,children:x.hero_subtitle})]})]}),s.jsx("section",{className:"py-8 lg:py-16 bg-secondary",children:s.jsx("div",{className:"w-full px-[5%] 2xl:px-0 2xl:max-w-7xl mx-auto",children:v&&v.length>0&&s.jsxs("div",{className:"relative",children:[s.jsx(a,{modules:[o,n],spaceBetween:16,slidesPerView:1,autoplay:{delay:3e3,disableOnInteraction:!1,pauseOnMouseEnter:!0},navigation:{prevEl:y.current,nextEl:b.current},onBeforeInit:e=>{e.params.navigation.prevEl=y.current,e.params.navigation.nextEl=b.current},loop:v.length>4,speed:800,breakpoints:{640:{slidesPerView:2,spaceBetween:16},768:{slidesPerView:3,spaceBetween:20},1024:{slidesPerView:4,spaceBetween:24}},className:"category-swiper",children:v.map(e=>s.jsx(r,{children:s.jsxs("div",{className:"group cursor-pointer rounded-2xl overflow-hidden hover:shadow-xl transition-all duration-300 h-full my-4 "+(_?.id===e.id?`bg-white ${x?.class_category_card_selected||""}`:"bg-white"),onClick:()=>I(e),children:[s.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden rounded-t-2xl bg-gray-100",children:[s.jsx("img",{src:`/storage/images/category/${e.image}`,alt:e.name||e.nombre,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",onError:e=>{e.target.src="/assets/img/noimage/no_img.jpg"}}),_?.id===e.id&&s.jsx("div",{className:"absolute inset-0 bg-primary/20 flex items-center justify-center",children:s.jsx("div",{className:"w-16 h-16 bg-primary rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})})]}),s.jsxs("div",{className:"p-4 lg:px-6 transition-colors duration-300 rounded-b-2xl "+(_?.id===e.id?"bg-primary text-white":"bg-white group-hover:bg-primary group-hover:text-white"),children:[s.jsx("h3",{className:`text-lg lg:text-xl font-bold transition-colors duration-300 text-left ${x?.class_category_card_title||""}`,children:e.name||e.nombre}),(e.description||e.descripcion)&&s.jsx("p",{className:`text-sm font-paragraph text-left mt-2 line-clamp-2 opacity-90 ${x?.class_category_card_description||""}`,children:e.description||e.descripcion})]})]})},e.id))}),s.jsx("button",{ref:y,className:"absolute left-0 top-1/2 -translate-y-1/2 z-10 w-10 h-10 lg:w-12 lg:h-12 flex items-center justify-center rounded-full bg-white shadow-lg hover:bg-primary hover:text-white transition-all duration-300 -ml-5 lg:-ml-6 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Anterior",children:s.jsx(l,{className:"w-5 h-5 lg:w-6 lg:h-6"})}),s.jsx("button",{ref:b,className:"absolute right-0 top-1/2 -translate-y-1/2 z-10 w-10 h-10 lg:w-12 lg:h-12 flex items-center justify-center rounded-full bg-white shadow-lg hover:bg-primary hover:text-white transition-all duration-300 -mr-5 lg:-mr-6 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Siguiente",children:s.jsx(i,{className:"w-5 h-5 lg:w-6 lg:h-6"})})]})})}),s.jsx("section",{className:"py-8 lg:py-16 bg-white",children:s.jsxs("div",{className:"w-full px-[5%] 2xl:px-0 2xl:max-w-7xl mx-auto",children:[s.jsx("div",{className:"flex mb-8  w-full flex-col gap-6 lg:flex-row justify-between items-center",children:s.jsxs("div",{className:"text-left",children:[s.jsx("h2",{className:`text-3xl lg:text-5xl customtext-neutral-dark font-title mb-3  tracking-wide ${x?.class_product_title||""}`,children:x?.product_title||"Pide todo lo que quieras y comparte"}),x?.product_description&&s.jsx("p",{className:`customtext-neutral-dark font-paragraph text-base ${x?.class_product_description||""}`,children:x.product_description}),_&&s.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[s.jsx("span",{className:"text-sm customtext-neutral-light",children:"Mostrando:"}),s.jsx("span",{className:"bg-primary text-white px-4 py-2 rounded-full font-bold text-sm",children:_.name||_.nombre}),s.jsx("button",{onClick:()=>I(null),className:"text-sm text-gray-500 hover:text-primary transition-colors underline",children:"Ver todos"})]})]})}),S?s.jsx(g,{}):E&&E.length>0?s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 lg:gap-6",children:E.map(e=>s.jsx(c,{cardType:x?.type_card_product||"ProductCard",product:e,data:x,cart:h,setCart:p,favorites:j,setFavorites:w,handleProductClick:L},e.id))}):s.jsx(u,{})]})})]});var R};export{x as default};
