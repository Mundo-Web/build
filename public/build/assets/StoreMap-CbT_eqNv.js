import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as a}from"./index-BOnQTV8N.js";import{L as P,G as R,M as I,I as O}from"./esm-CTRYOAnL.js";import{G as F}from"./Global-Bz6gVLc5.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./index-pSueRYGM.js";import"./index-B6ujFmsw.js";const z=["places"],K=({data:s,stores:C=[]})=>{var N,v;const[l,d]=a.useState(null),[S,h]=a.useState({lat:-12.046374,lng:-77.042793}),[b,i]=a.useState(6),[y,M]=a.useState(!1),[j,u]=a.useState(!1),w=a.useRef(null),r=C.filter(t=>t.visible&&t.latitude&&t.longitude&&!isNaN(parseFloat(t.latitude))&&!isNaN(parseFloat(t.longitude)));a.useEffect(()=>{if(r.length>0&&!l&&!j)if(r.length===1)h({lat:parseFloat(r[0].latitude),lng:parseFloat(r[0].longitude)}),i(15);else{const t=r.reduce((n,g)=>n+parseFloat(g.latitude),0)/r.length,o=r.reduce((n,g)=>n+parseFloat(g.longitude),0)/r.length;h({lat:t,lng:o});const m=r.map(n=>parseFloat(n.latitude)),p=r.map(n=>parseFloat(n.longitude)),k=Math.max(...m)-Math.min(...m),x=Math.max(...p)-Math.min(...p),c=Math.max(k,x);c>10?i(5):c>5?i(6):c>2?i(7):c>1?i(8):c>.5?i(10):i(12)}},[r,l,j]);const _=t=>({tienda_principal:"Tienda Principal",tienda:"Tienda",oficina:"Oficina",almacen:"Almacén",showroom:"Showroom",otro:"Otro"})[t]||"No especificado",f=t=>{if(!t)return null;try{return typeof t=="string"?JSON.parse(t):t}catch{return null}},$="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z",L=t=>{var x;d(t),u(!1);const o=parseFloat(t.latitude),m=parseFloat(t.longitude),p=((x=w.current)==null?void 0:x.getZoom())||b;h({lat:o+.005*(15/p),lng:m})};return e.jsxs("section",{className:` ${(s==null?void 0:s.class_container)||""}`,children:[e.jsx("style",{children:`
                .gm-style-iw-c {
                    padding: 0 !important;
                    background: none !important;
                    box-shadow: none !important;
                    border-radius: 8px !important;
                }
                .gm-style-iw-d {
                    overflow: visible !important; /* Permitir overflow para que el div interno maneje el scroll */
                    max-height: none !important;
                }
                .gm-style .gm-style-iw-t::after {
                    display: none !important;
                }
                /* Ocultar botón de cerrar por defecto de Google Maps */
                .gm-ui-hover-effect {
                    display: none !important;
                }
                
                /* Custom Scrollbar para el InfoWindow */
                .store-info-scroll::-webkit-scrollbar {
                    width: 6px;
                }
                .store-info-scroll::-webkit-scrollbar-track {
                    background: rgba(255, 255, 255, 0.1);
                }
                .store-info-scroll::-webkit-scrollbar-thumb {
                    background: rgba(255, 255, 255, 0.3);
                    border-radius: 3px;
                }
                .store-info-scroll::-webkit-scrollbar-thumb:hover {
                    background: rgba(255, 255, 255, 0.5);
                }
            `}),e.jsxs("div",{className:"w-full",children:[((s==null?void 0:s.title)||(s==null?void 0:s.description))&&e.jsxs("div",{className:"text-center mb-8 px-primary",children:[(s==null?void 0:s.title)&&e.jsx("h2",{className:`text-3xl md:text-4xl font-bold mb-4 ${(s==null?void 0:s.class_title)||"customtext-neutral-dark"}`,children:s==null?void 0:s.title}),(s==null?void 0:s.description)&&e.jsx("p",{className:`text-lg max-w-3xl mx-auto ${(s==null?void 0:s.class_description)||"customtext-neutral-light"}`,children:s==null?void 0:s.description})]}),r.length>0?e.jsx("div",{className:"w-full relative",children:e.jsx(P,{googleMapsApiKey:F.GMAPS_API_KEY,libraries:z,onLoad:()=>M(!0),children:e.jsxs(R,{mapContainerStyle:{width:"100%",height:"80vh",minHeight:"600px"},center:S,zoom:b,onLoad:t=>w.current=t,onDragStart:()=>u(!0),onZoomChanged:()=>u(!0),options:{streetViewControl:!0,mapTypeControl:!0,fullscreenControl:!0,zoomControl:!0,gestureHandling:"cooperative",styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]},children:[y&&r.map(t=>e.jsx(I,{position:{lat:parseFloat(t.latitude),lng:parseFloat(t.longitude)},onClick:()=>L(t),title:t.name,icon:{path:$,fillColor:F.APP_COLOR_PRIMARY||"#FF0000",fillOpacity:1,strokeWeight:1,strokeColor:"#FFFFFF",rotation:0,scale:2.5,anchor:new window.google.maps.Point(12,24)}},t.id)),y&&l&&e.jsx(O,{position:{lat:parseFloat(l.latitude),lng:parseFloat(l.longitude)},onCloseClick:()=>d(null),options:{pixelOffset:new window.google.maps.Size(0,-50),maxWidth:320},children:e.jsxs("div",{className:"bg-secondary text-white rounded-lg overflow-hidden shadow-xl store-info-scroll relative",style:{minWidth:"280px",maxHeight:"400px",overflowY:"auto"},children:[e.jsx("button",{onClick:()=>d(null),className:"absolute top-2 right-2 z-50 w-8 h-8 flex items-center justify-center bg-secondary rounded-full shadow-md hover:opacity-90 transition-opacity text-white border border-white/20","aria-label":"Cerrar",children:e.jsx("i",{className:"fas fa-times"})}),l.image&&e.jsxs("div",{className:"relative h-40 w-full flex-shrink-0",children:[e.jsx("img",{src:`/storage/images/store/${l.image}`,alt:l.name,className:"w-full h-full object-cover",onError:t=>t.target.style.display="none"}),e.jsx("div",{className:"absolute top-2 left-2",children:e.jsx("span",{className:"inline-block px-2 py-1 text-xs font-bold rounded bg-white customtext-primary shadow-sm",children:_(l.type)})})]}),e.jsxs("div",{className:"p-4 pt-2",children:[e.jsx("h3",{className:`font-bold text-lg mb-3 customtext-primary ${l.image?"":"pr-8"}`,children:l.name}),e.jsxs("p",{className:"text-sm mb-2 flex items-start",children:[e.jsx("i",{className:"fas fa-map-marker-alt mt-1 mr-2 customtext-primary flex-shrink-0"}),e.jsx("span",{className:"opacity-90",children:l.address})]}),l.phone&&e.jsxs("p",{className:"text-sm mb-2 flex items-center",children:[e.jsx("i",{className:"fas fa-phone mr-2 customtext-primary flex-shrink-0"}),e.jsx("a",{href:`tel:${l.phone}`,className:"hover:text-white hover:underline opacity-90 transition-opacity",children:l.phone})]}),l.email&&e.jsxs("p",{className:"text-sm mb-2 flex items-center",children:[e.jsx("i",{className:"fas fa-envelope mr-2 customtext-primary flex-shrink-0"}),e.jsx("a",{href:`mailto:${l.email}`,className:"hover:text-white hover:underline opacity-90 transition-opacity truncate",children:l.email})]}),l.description&&e.jsx("p",{className:"text-sm opacity-80 mb-3 mt-3 pt-3 border-t border-white/10",children:l.description}),l.manager&&e.jsxs("p",{className:"text-sm mb-2 opacity-90",children:[e.jsx("i",{className:"fas fa-user mr-2 customtext-primary"}),e.jsx("strong",{children:"Encargado:"})," ",l.manager]}),l.business_hours&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-white/10",children:[e.jsxs("p",{className:"text-xs font-bold customtext-primary mb-2 flex items-center",children:[e.jsx("i",{className:"fas fa-clock mr-2"}),"Horarios de atención"]}),e.jsxs("div",{className:"space-y-1",children:[(N=f(l.business_hours))==null?void 0:N.slice(0,3).map((t,o)=>e.jsxs("p",{className:"text-xs opacity-80",children:[e.jsxs("strong",{className:"text-white",children:[t.day,":"]})," ",t.closed?"Cerrado":`${t.open} - ${t.close}`]},o)),((v=f(l.business_hours))==null?void 0:v.length)>3&&e.jsxs("p",{className:"text-xs customtext-primary font-semibold mt-1",children:["+ ",f(l.business_hours).length-3," días más"]})]})]}),e.jsxs("div",{className:"mt-4 flex flex-col gap-2",children:[l.link&&e.jsxs("a",{href:l.link,target:"_blank",rel:"noopener noreferrer",className:"w-full py-2 px-4 rounded text-center text-sm font-semibold border border-white/20 hover:bg-white/10 transition-colors customtext-primary",children:[e.jsx("i",{className:"fas fa-external-link-alt mr-2"}),"Más información"]}),e.jsxs("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${l.latitude},${l.longitude}`,target:"_blank",rel:"noopener noreferrer",className:`w-full py-2 px-4 rounded text-center text-sm font-bold transition-colors shadow-lg ${(s==null?void 0:s.class_button)||"bg-white customtext-primary hover:bg-gray-100"}`,children:[e.jsx("i",{className:"fas fa-directions mr-2"}),"Cómo llegar"]})]})]})]})})]})})}):e.jsxs("div",{className:"text-center py-12 px-primary",children:[e.jsx("i",{className:"fas fa-map-marked-alt text-6xl customtext-neutral-light mb-4"}),e.jsx("p",{className:"text-xl customtext-neutral-light",children:"No hay ubicaciones disponibles en este momento"})]})]})]})};export{K as default};
