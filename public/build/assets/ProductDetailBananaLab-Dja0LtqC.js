import{I as e,r as a,j as t}from"./System-Bybt2Brn.js";import{S as s}from"./sweetalert2.esm.all-DbJpIAEg.js";import"./swiper-react-CRhJ2vE3.js";/* empty css                   *//* empty css             */import"./CardHoverBtn-BJnt3e8M.js";import{C as l}from"./CartModal-Db_dBOJN.js";import{i as r}from"./tippy-react.esm-Cpb4mDDh.js";import i from"./ProductBananaLab-WtjPn6Ya.js";import{m as n}from"./proxy-BmPRG09w.js";import{c as o}from"./createLucideIcon-oahCLV50.js";import{H as c}from"./heart-CyPg-ZZw.js";import"./vendor-BiOv2i5T.js";import"./eye-DJ5vw54Z.js";import"./index-Cmhjy_Bv.js";import"./index-Bx5UHif0.js";import"./CartItemRow-CLpuTcvn.js";import"./Number2Currency-DExzICY3.js";import"./trash-2-CDXts6on.js";import"./minus-BhdGy6sP.js";import"./plus-4JHYG4O1.js";import"./index-Da4AP4wO.js";import"./CardProductBananaLab-oDawj799.js";import"./CartModalBananaLab-CzbnPykF.js";import"./x-DWgXNABc.js";import"./shopping-cart-D6rW5WdX.js";import"./arrow-right-CoVebBW_.js";import"./circle-check-big-BzpJOupm.js";
/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d=o("Brush",[["path",{d:"m9.06 11.9 8.07-8.06a2.85 2.85 0 1 1 4.03 4.03l-8.06 8.08",key:"1styjt"}],["path",{d:"M7.07 14.94c-1.66 0-3 1.35-3 3.02 0 1.33-2.5 1.52-2 2.02 1.08 1.1 2.49 2.02 4 2.02 2.2 0 4-1.8 4-4.04a3.01 3.01 0 0 0-3-3.02z",key:"z0l1mu"}]]);function m({item:o,data:m,setCart:u,cart:x}){var p,h,g,v;const j=new e,[f,b]=a.useState(!1),[y,N]=a.useState({url:null==o?void 0:o.image,type:"main"}),[w,k]=a.useState(1),[C,H]=a.useState(!1),[S,T]=a.useState([]),[F,E]=a.useState([]),[I,_]=a.useState([]);null==x||x.find((e=>e.id==(null==o?void 0:o.id))),a.useEffect((()=>{(null==o?void 0:o.id)&&(P(o),M(o),L(o),q(o))}),[o]);const $={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{duration:.5}}},B={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},L=async e=>{try{const a={id:null==e?void 0:e.id};if(!(await j.updateViews(a)))return}catch(a){return}},M=async e=>{try{const a={id:null==e?void 0:e.id},t=await j.verifyCombo(a);if(!t)return;const s=t[0].associated_items;T(Object.values(s))}catch(a){return}},P=async e=>{try{const a={id:null==e?void 0:e.id},t=await j.productsRelations(a);if(!t)return;const s=t;E(Object.values(s))}catch(a){return}},q=async e=>{try{const a={slug:null==e?void 0:e.slug},t=await j.getVariations(a);if(!t)return;_(t.variants)}catch(a){return}};S.reduce(((e,a)=>e+parseFloat(a.final_price)),0);return t.jsxs(n.div,{initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{duration:.5}}},className:"px-primary mx-auto py-4 md:py-6 xl:py-8 bg-white font-paragraph",children:[t.jsx(n.div,{variants:$,className:"bg-white rounded-xl p-4 md:p-8",children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 xl:gap-20 2xl:gap-32",children:[t.jsx("div",{className:"space-y-6",children:t.jsxs(n.div,{variants:B,className:"flex flex-col gap-6",children:[t.jsx(n.div,{variants:$,className:"flex-1",children:t.jsx(n.img,{src:(y.type,`/storage/images/item/${y.url}`),onError:e=>e.target.src="/api/cover/thumbnail/null",alt:"Product main",className:"w-full h-auto object-contain",whileHover:{scale:1.02},transition:{type:"spring",stiffness:400,damping:10}})}),t.jsxs(n.div,{variants:$,className:"flex flex-row gap-2",children:[t.jsx(n.button,{onClick:()=>N({url:null==o?void 0:o.image,type:"main"}),whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-16 h-16 rounded-lg p-1 border-2 "+(y.url===(null==o?void 0:o.image)?"border-primary ":"border-gray-200"),children:t.jsx("img",{src:`/storage/images/item/${null==o?void 0:o.image}`,alt:"Main Thumbnail",className:"w-full h-full object-cover",onError:e=>e.target.src="/api/cover/thumbnail/null"})}),null==o?void 0:o.images.map(((e,a)=>t.jsx(n.button,{onClick:()=>N({url:e.url,type:"gallery"}),whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-16 h-16 border-2 rounded-lg p-1 "+(y.url===e.url?"border-primary":"border-gray-200"),children:t.jsx("img",{src:`/storage/images/item/${e.url}`||"/api/cover/thumbnail/null",alt:`Thumbnail ${a+1}`,className:"w-full h-full object-cover",onError:e=>e.target.src="/api/cover/thumbnail/null"})},a)))]})]})}),t.jsxs(n.div,{variants:B,className:"flex flex-col gap-2",children:[t.jsxs(n.div,{variants:$,className:"font-font-general",children:[(null==o?void 0:o.brand)&&t.jsxs("p",{className:"customtext-neutral-light text-sm 2xl:text-lg",children:["Marca:"," ",t.jsx("span",{className:"customtext-neutral-dark",children:null==o?void 0:o.brand.name})]}),t.jsx(n.h1,{className:"customtext-neutral-dark text-3xl lg:text-4xl 2xl:text-5xl font-bold mt-2",whileHover:{x:5},children:null==o?void 0:o.name})]}),t.jsxs(n.div,{variants:$,className:"flex flex-wrap customtext-neutral-light items-center gap-y-2 gap-x-8 text-sm font-font-general",children:[t.jsxs("span",{className:"customtext-neutral-light text-sm 2xl:text-base",children:["SKU:"," ",t.jsx("span",{className:"customtext-neutral-dark font-bold",children:null==o?void 0:o.sku})]}),t.jsxs("span",{className:"customtext-neutral-light text-sm 2xl:text-base",children:["Disponibilidad:"," ",t.jsx("span",{className:"customtext-neutral-dark font-bold",children:(null==o?void 0:o.stock)>0?"En stock":"Agotado"})]})]}),t.jsxs(n.div,{variants:$,className:"flex flex-col w-full xl:w-1/2 !font-font-general max-w-xl mt-5",children:[t.jsxs("p",{className:"text-sm 2xl:text-base customtext-neutral-light",children:["Precio:"," ",t.jsxs("span",{className:"line-through",children:["S/ ",null==o?void 0:o.price]})]}),t.jsxs("div",{className:"flex flex-row items-center gap-4 relative",children:[t.jsxs(n.span,{className:"text-[40px] font-bold customtext-neutral-dark",whileHover:{scale:1.05},children:["S/ ",null==o?void 0:o.final_price]}),t.jsxs(n.span,{className:"bg-[#F93232] text-white font-bold px-3 py-2 rounded-xl text-base",whileHover:{scale:1.1},whileTap:{scale:.9},children:["-",Number(null==o?void 0:o.discount_percent).toFixed(1),"%"]})]})]}),t.jsxs(n.div,{variants:$,className:"variants-selector flex flex-col gap-3",children:[t.jsx("h3",{className:"w-full block opacity-85 customtext-neutral-dark text-sm 2xl:text-base",children:"Colores"}),t.jsxs("div",{className:"flex gap-3 items-center justify-start w-full flex-wrap",children:[t.jsx(r,{content:o.color,children:t.jsx(n.a,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"variant-option rounded-full object-fit-cover "+(I.some((e=>e.slug===o.slug))?"":"active p-[2px] border-[1.5px] border-neutral-dark"),children:t.jsx("img",{className:"color-box rounded-full h-9 w-9 object-fit-cover",src:`/storage/images/item/${o.texture}`,onError:e=>e.target.src="/api/cover/thumbnail/null"})})}),I.map((e=>t.jsx(r,{content:e.color,children:t.jsx(n.a,{href:`/product/${e.slug}`,className:"variant-option rounded-full object-fit-cover",whileHover:{scale:1.1},whileTap:{scale:.9},children:t.jsx("img",{className:"color-box rounded-full h-9 w-9 object-fit-cover",src:`/storage/images/item/${e.texture}`})})},e.slug)))]})]}),t.jsx(n.div,{variants:$,className:"flex flex-col mt-8",children:t.jsx("div",{className:"flex items-center gap-4 mb-2",children:t.jsxs("div",{className:"flex items-center space-x-4 customtext-neutral-light text-sm 2xl:text-base",children:[t.jsx("span",{className:"opacity-85",children:"Cantidad"}),t.jsx(n.div,{className:"relative flex items-center border rounded-md px-2 py-1",whileHover:{scale:1.05},children:t.jsx("input",{type:"number",value:w,onChange:e=>{let a=parseInt(e.target.value,10);(isNaN(a)||a<1)&&(a=1),a>10&&(a=10),k(a)},min:"1",max:"10",className:"w-10 py-1 customtext-neutral-dark text-center bg-transparent outline-none appearance-none"})})]})})}),t.jsxs(n.div,{variants:$,className:"flex flex-col",children:[t.jsxs(n.a,{href:"/canva1",className:"w-full flex gap-4 items-center justify-center font-paragraph text-base 2xl:text-lg bg-primary text-white py-3 font-semibold rounded-3xl hover:opacity-90 transition-all duration-300 mt-3",whileHover:{scale:1.02},whileTap:{scale:.98},children:["Crea y edita tu regalo",t.jsx(d,{width:20})]}),t.jsxs(n.button,{onClick:()=>{(e=>{const a=structuredClone(x),t=a.findIndex((a=>a.id==e.id));-1==t?a.push({...e,quantity:w}):a[t].quantity++,u(a),s.fire({title:"Producto agregado",text:`Se agregó ${e.name} al carrito`,icon:"success",timer:1500})})(o)},className:"w-full flex gap-4 items-center justify-center font-paragraph text-base 2xl:text-lg bg-white border-2 border-primary customtext-primary py-3 font-semibold rounded-3xl hover:opacity-90 transition-all duration-300 mt-3",whileHover:{scale:1.02},whileTap:{scale:.98},children:["Lista de deseos",t.jsx(c,{width:20})]})]}),t.jsx(n.div,{variants:$,className:"w-full mt-5",children:t.jsxs(n.div,{className:"bg-[#F7F9FB] flex flex-row rounded-xl p-5 gap-3",whileHover:{y:-2},children:[t.jsx("img",{src:"/assets/img/salafabulosa/whatsapp.png",onError:e=>e.target.src="assets/img/noimage/no_imagen_circular.png",className:"w-12 h-12 object-contain",loading:"lazy"}),t.jsx("div",{className:"customtext-neutral-dark font-font-general text-base 2xl:text-xl font-semibold",children:t.jsxs("p",{children:["¿Tienes dudas sobre este producto? Haz"," ",t.jsx("span",{className:"underline",children:"clic aquí"})," ","y chatea con nosotros por WhatsApp"]})})]})})]})]})}),t.jsxs(n.div,{variants:$,className:"grid gap-10 lg:gap-20 md:grid-cols-2 bg-white rounded-xl p-4 sm:p-8 font-font-general",children:[(null==(p=null==o?void 0:o.specifications)?void 0:p.length)>0&&t.jsxs(n.div,{variants:$,children:[t.jsx("h2",{className:"text-2xl font-bold customtext-neutral-dark mb-4 border-b pb-3",children:"Especificaciones"}),t.jsx("div",{className:"space-y-1",children:o.specifications.map(((e,a)=>"general"===e.type&&t.jsxs(n.div,{className:"grid grid-cols-2 gap-4 p-3 "+(a%2==0?"bg-[#F7F9FB]":"bg-white"),whileHover:{x:5},children:[t.jsx("div",{className:"customtext-neutral-light opacity-85",children:e.title}),t.jsx("div",{className:"customtext-neutral-dark",children:e.description})]},a)))})]}),t.jsxs(n.div,{variants:$,className:"font-font-general",children:[(null==(h=null==o?void 0:o.description)?void 0:h.replace(/<[^>]+>/g,""))&&t.jsx("h2",{className:"text-2xl font-bold customtext-neutral-dark mb-4 border-b pb-3",children:"Información adicional"}),t.jsxs(n.div,{className:"space-y-2 "+(C?"":"max-h-[400px] overflow-hidden"),children:[(null==(g=null==o?void 0:o.description)?void 0:g.replace(/<[^>]+>/g,""))&&t.jsxs(t.Fragment,{children:[t.jsx("h3",{className:"text-xl font-semibold customtext-neutral-dark mb-4",children:"Acerca de este artículo"}),t.jsx(n.div,{className:"customtext-neutral-dark",dangerouslySetInnerHTML:{__html:null==o?void 0:o.description},initial:{opacity:0},animate:{opacity:1},transition:{duration:.5}})]}),(null==(v=null==o?void 0:o.features)?void 0:v.length)>0&&t.jsx(n.div,{className:"pl-10",variants:B,children:t.jsx("ul",{className:"list-disc pl-5 space-y-2",children:null==o?void 0:o.features.map(((e,a)=>t.jsx(n.li,{className:"customtext-neutral-dark",variants:$,children:e.feature},a)))})})]})]})]}),F.length>0&&t.jsx(n.div,{className:"my-10",initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},children:t.jsx(i,{data:{title:"Productos relacionados",link_catalog:"/catalogo"},items:F,cart:x,setCart:u})}),t.jsx(l,{cart:x,setCart:u,modalOpen:f,setModalOpen:b})]})}export{m as default};
