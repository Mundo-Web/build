import{j as t}from"./AboutSimple-Cf8x2fCZ.js";import{r as s}from"./index-BOnQTV8N.js";import{G}from"./Global-CazroCzF.js";import{C as T}from"./HeaderSearch-j9L8kXPt.js";import"./main-B6F2O9-U.js";import{M as q}from"./MobileMenu-egRBzfV_.js";import{C as B}from"./chevron-down-uIVDLcM-.js";import{S as H}from"./shopping-cart-DLRnxGTD.js";import{X as K}from"./x-fof_H3Vv.js";import{A as V}from"./index-BZvh78jk.js";import{m as X}from"./proxy-B0QLMKEh.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./PolicyModal-C80IvD61.js";import"./index-B6ujFmsw.js";import"./index-Chjiymov.js";import"./CartItemRow-Dd2JdCJX.js";import"./Number2Currency-jIsa99f9.js";import"./General-apRuNwp7.js";import"./tippy-react.esm-DmkRJDEW.js";import"./index-pSueRYGM.js";import"./package-DBFPPBi1.js";import"./createLucideIcon-DfjclApS.js";import"./trash-2-DU7LB6-f.js";import"./minus-Db6MFKEO.js";import"./plus-CTIomuuF.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./MenuSimple-eF3Gua6U.js";import"./MobileMenu-pOsYkBXS.js";import"./CardProductKatya-ncpmQ0JU.js";import"./BasicRest-BML1C-ua.js";import"./BooleanLimit-D-OsQsek.js";import"./tag-Dgi-uTqk.js";import"./chevron-up-Mt3xll-e.js";import"./search-BQ59Robe.js";import"./chevron-left-JcR9Fe4w.js";import"./chevron-right-Cug7tVUE.js";const Oe=({items:a,data:n,cart:x,setCart:I,isUser:c,pages:b,generals:v=[]})=>{const u=v.find(e=>e.correlative==="phone_whatsapp"),m=v.find(e=>e.correlative==="message_whatsapp");u==null||u.description,m==null||m.description;const[$,w]=s.useState(!1),[d,j]=s.useState(!1),[p,y]=s.useState(!1),[f,S]=s.useState(""),[Y,z]=s.useState(!1),[A,k]=s.useState(!1),[J,O]=s.useState([]),[h,P]=s.useState(!1),[Q,U]=s.useState(!1),[l,_]=s.useState(-1);s.useRef([]);const N=s.useRef(null),E=s.useRef(null),F=s.useRef(null),D=s.useRef(null),g=s.useRef(null),R=s.useRef(null),C=s.useRef([]),L=x.reduce((e,r)=>Number(e)+Number(r.quantity),0),M=()=>{P(!1),O([]),_(-1)};if(s.useEffect(()=>{function e(r){var o,i;N.current&&!N.current.contains(r.target)&&z(!1),E.current&&!E.current.contains(r.target)&&(f.trim()||y(!1)),g.current&&!g.current.contains(r.target)&&!((o=D.current)!=null&&o.contains(r.target))&&!((i=F.current)!=null&&i.contains(r.target))&&M()}return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}},[f]),s.useEffect(()=>{const e=()=>{window.scrollY>0?k(!0):k(!1)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),s.useEffect(()=>{const e=r=>{r.key==="Escape"&&(h?M():p&&(y(!1),S("")))};return(p||h)&&document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[p,h]),s.useEffect(()=>()=>{R.current&&clearTimeout(R.current)},[]),s.useEffect(()=>{l>=0&&C.current[l]&&g.current&&C.current[l].scrollIntoView({block:"nearest",behavior:"smooth"})},[l]),c&&Array.isArray(c.roles)){const e=c.roles.map(r=>{var o;return(o=r.name)==null?void 0:o.toLowerCase()});!e.includes("admin")&&e.includes("root")}return t.jsxs(t.Fragment,{children:[t.jsxs("header",{className:`w-full top-0 left-0 z-50 transition-all duration-300 ${A?"fixed shadow-lg":"relative"} ${n.backgroundColor||"bg-primary"}`,children:[t.jsx("div",{className:"max-w-7xl mx-auto px-[5%] 2xl:px-0",children:t.jsxs("div",{className:"flex justify-between items-center h-20",children:[t.jsx("div",{className:"flex items-center gap-6",children:t.jsx("a",{href:"/",className:"flex-shrink-0 flex items-center",children:t.jsx("img",{src:`/assets/resources/logo.png?v=${crypto.randomUUID()}`,alt:G.APP_NAME,className:`h-16 w-auto object-contain ${(n==null?void 0:n.class_logo)||""}`,onError:e=>{e.target.onerror=null,e.target.src="/assets/img/logo-bk.svg"}})})}),t.jsxs("nav",{className:"hidden lg:flex items-center gap-8",children:[a==null?void 0:a.map(e=>{var r,o;return t.jsxs("div",{className:"relative group",children:[t.jsxs("a",{href:`/catalogo?category=${e.slug}`,className:`
                                            flex items-center gap-1 text-base font-bold transition-colors
                                            ${e.alias?"bg-black text-white px-6 py-2.5 shadow-lg hover:bg-gray-900":"text-gray-900 hover:text-black"}
                                        `,children:[e.alias||e.name,((r=e.subcategories)==null?void 0:r.length)>0&&t.jsx(B,{size:16,className:`transition-transform duration-200 group-hover:rotate-180 ${e.alias?"text-white":""}`})]}),((o=e.subcategories)==null?void 0:o.length)>0&&t.jsx("div",{className:"absolute top-full left-0 w-56 pt-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 transform group-hover:translate-y-0 translate-y-2 z-50",children:t.jsx("div",{className:"bg-white rounded-lg shadow-xl overflow-hidden border border-gray-100",children:e.subcategories.map(i=>t.jsx("a",{href:`/catalogo?subcategory=${i.slug}`,className:"block px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 hover:text-primary transition-colors border-b border-gray-50 last:border-0",children:i.name},i.id))})})]},e.id)}),b.filter(e=>e.menuable).map((e,r,o)=>t.jsx("a",{href:e.path,className:"text-base font-bold text-gray-900 hover:text-black transition-colors",children:e.name},r))]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("button",{onClick:()=>w(!0),className:"relative bg-black text-white p-2.5 hover:bg-gray-900 transition-colors group","aria-label":"Carrito de compras",children:[t.jsx(H,{size:20,className:"text-white"}),L>0&&t.jsx("span",{className:"absolute -top-2 -right-2 bg-white text-black text-xs font-bold w-5 h-5 flex items-center justify-center rounded-full border-2 border-black",children:L})]}),t.jsx("button",{onClick:()=>j(!d),className:"lg:hidden p-2 text-black hover:bg-black/5 rounded-lg transition-colors",children:d?t.jsx(K,{size:24}):t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),t.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),t.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})})]})]})}),t.jsx(V,{children:d&&t.jsx(X.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},className:"lg:hidden bg-transparent text-textWhite shadow-lg w-full min-h-screen absolute z-10 top-20",children:t.jsx(q,{search:f,setSearch:S,pages:b,items:a,onClose:()=>j(!1),data:n})})})]}),t.jsx(T,{data:n,cart:x,setCart:I,modalOpen:$,setModalOpen:w})]})};export{Oe as default};
