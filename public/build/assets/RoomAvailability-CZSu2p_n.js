import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as d}from"./index-BOnQTV8N.js";import{c as ue}from"./ReactAppend-QR5TrZfj.js";import{B as fe}from"./Base-BtKyxfJk.js";import{C as be}from"./CreateReactScript-BVFa7_vB.js";import{m as j}from"./main-B6F2O9-U.js";import{S as l}from"./CartKuchara-D9l7c7at.js";import{C as Z,N as ee}from"./Number2Currency-jIsa99f9.js";import{M as se}from"./Modal-xDw9ufjg.js";import{D as z}from"./index.es-6yWvxdWu.js";import"./SearchWidget-D7iHOckK.js";import{e as F}from"./es-QTeD0CGG.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./index-B6ujFmsw.js";import"./Global-Bz6gVLc5.js";import"./tippy-react.esm-DmkRJDEW.js";import"./index-pSueRYGM.js";/* empty css              */import"./Logout-BpuTJ_83.js";import"./MenuItemContainer-DcxtOi47.js";import"./index.esm-C48oHfFw.js";import"./index-ngrFHoWO.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./CanAccess-BOTQKW2g.js";/* empty css               */import"./General-apRuNwp7.js";import"./LaravelSession-Dz9cpV3l.js";import"./BooleanLimit-D-OsQsek.js";import"./floating-ui.react-h8x3UwNO.js";import"./floating-ui.dom-CID5cQpR.js";import"./format-B6vr9H0z.js";const ge=({rooms:X=[]})=>{var W;const C=d.useRef(),B=d.useRef(),[M,ae]=d.useState(new Date),[P,te]=d.useState([]),[E,L]=d.useState(!1),[o,q]=d.useState(null),[x,ce]=d.useState(null),[ie,K]=d.useState(!1),[y,U]=d.useState(null),[v,H]=d.useState(null),[G,Y]=d.useState(""),[D,O]=d.useState(!0),m=async(s=M)=>{L(!0);try{const a=s.toISOString().split("T")[0],c=await(await fetch(`/api/admin/room-availability/summary?date=${a}`,{headers:{Accept:"application/json","X-Xsrf-Token":decodeURIComponent(j.Cookies.get("XSRF-TOKEN"))}})).json();c.status===200&&te(c.data.rooms||[])}catch(a){console.error("Error al cargar resumen:",a)}L(!1)};d.useEffect(()=>{m()},[]);const le=s=>{ae(s),m(s)},ne=s=>{const a={available:{bg:"#d4edda",text:"#155724",label:"Disponible"},occupied:{bg:"#f8d7da",text:"#721c24",label:"Ocupada"},reserved:{bg:"#fff3cd",text:"#856404",label:"Reservada"},blocked:{bg:"#e2e3e5",text:"#383d41",label:"Bloqueada"},full:{bg:"#cce5ff",text:"#004085",label:"Sin disponibilidad"}};return a[s]||a.available},N=async s=>{q(s),K(!0),$(C.current).modal("show");try{const a=new Date,t=new Date;t.setMonth(t.getMonth()+3);const i=await(await fetch(`/api/admin/room-availability/${s.id}/calendar?start_date=${a.toISOString().split("T")[0]}&end_date=${t.toISOString().split("T")[0]}`,{headers:{Accept:"application/json","X-Xsrf-Token":decodeURIComponent(j.Cookies.get("XSRF-TOKEN"))}})).json();i.status===200&&ce(i.data)}catch(a){console.error("Error al cargar calendario:",a)}K(!1)},oe=s=>{q(s),U(new Date),H(new Date),Y(""),O(!0),$(B.current).modal("show")},re=async()=>{if(!y||!v){l.fire("Error","Selecciona las fechas","error");return}try{const a=await(await fetch(`/api/admin/room-availability/${o.id}/block`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(j.Cookies.get("XSRF-TOKEN"))},body:JSON.stringify({start_date:y.toISOString().split("T")[0],end_date:v.toISOString().split("T")[0],block:D,reason:G})})).json();a.status===200?(l.fire("¬°√âxito!",a.message,"success"),$(B.current).modal("hide"),m(),x&&N(o)):l.fire("Error",a.message,"error")}catch{l.fire("Error","Error al procesar la solicitud","error")}},de=async s=>{if((await l.fire({title:"Generar disponibilidad",text:"¬øGenerar disponibilidad para los pr√≥ximos 365 d√≠as?",icon:"question",showCancelButton:!0,confirmButtonColor:"#28a745",cancelButtonColor:"#6c757d",confirmButtonText:"S√≠, generar",cancelButtonText:"Cancelar"})).isConfirmed)try{const c=await(await fetch(`/api/admin/room-availability/${s}/generate`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(j.Cookies.get("XSRF-TOKEN"))},body:JSON.stringify({days:365})})).json();c.status===200?(l.fire("¬°√âxito!",c.message,"success"),m()):l.fire("Error",c.message,"error")}catch{l.fire("Error","Error al generar disponibilidad","error")}},me=async s=>{if((await l.fire({title:"Check-In",html:`
        <p>¬øConfirmar el check-in del hu√©sped?</p>
        <small class="text-muted">Fecha y hora: ${new Date().toLocaleString("es-PE")}</small>
      `,icon:"question",showCancelButton:!0,confirmButtonColor:"#28a745",cancelButtonColor:"#6c757d",confirmButtonText:'<i class="mdi mdi-check-circle"></i> Confirmar Check-In',cancelButtonText:"Cancelar"})).isConfirmed)try{const c=await(await fetch(`/api/admin/bookings/${s}/confirm`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(j.Cookies.get("XSRF-TOKEN"))}})).json();c.status?(l.fire({icon:"success",title:"¬°Check-In Realizado!",text:"El hu√©sped ha hecho el check-in correctamente",timer:2e3,showConfirmButton:!1}),o&&await N(o),m()):l.fire("Error",c.message||"Error al realizar check-in","error")}catch{l.fire("Error","Error al procesar la solicitud","error")}},pe=async s=>{if((await l.fire({title:"Check-Out",html:`
        <p>¬øConfirmar el check-out del hu√©sped?</p>
        <small class="text-muted">Fecha y hora: ${new Date().toLocaleString("es-PE")}</small>
      `,icon:"question",showCancelButton:!0,confirmButtonColor:"#17a2b8",cancelButtonColor:"#6c757d",confirmButtonText:'<i class="mdi mdi-check-all"></i> Confirmar Check-Out',cancelButtonText:"Cancelar"})).isConfirmed)try{const c=await(await fetch(`/api/admin/bookings/${s}/complete`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(j.Cookies.get("XSRF-TOKEN"))}})).json();c.status?(l.fire({icon:"success",title:"¬°Check-Out Realizado!",text:"La reserva ha sido completada correctamente",timer:2e3,showConfirmButton:!1}),o&&await N(o),m()):l.fire("Error",c.message||"Error al realizar check-out","error")}catch{l.fire("Error","Error al procesar la solicitud","error")}},V=async s=>{const{value:a}=await l.fire({title:"Cancelar Reserva",input:"textarea",inputLabel:"Raz√≥n de la cancelaci√≥n",inputPlaceholder:"Ej: Cliente solicit√≥ cancelaci√≥n, cambio de planes, etc.",inputAttributes:{"aria-label":"Raz√≥n de cancelaci√≥n"},showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:'<i class="mdi mdi-close-circle"></i> Cancelar Reserva',cancelButtonText:"No cancelar",inputValidator:t=>{if(!t)return"Debes ingresar una raz√≥n para la cancelaci√≥n"}});if(a)try{const c=await(await fetch(`/api/admin/bookings/${s}/cancel`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(j.Cookies.get("XSRF-TOKEN"))},body:JSON.stringify({reason:a})})).json();c.status?(l.fire({icon:"success",title:"¬°Reserva Cancelada!",text:"La reserva ha sido cancelada correctamente",timer:2e3,showConfirmButton:!1}),o&&await N(o),m()):l.fire("Error",c.message||"Error al cancelar la reserva","error")}catch{l.fire("Error","Error al procesar la solicitud","error")}},he=async s=>{if((await l.fire({title:"Marcar como No Show",text:"¬øEl hu√©sped no se present√≥ para el check-in?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#6c757d",cancelButtonColor:"#17a2b8",confirmButtonText:'<i class="mdi mdi-account-off"></i> Marcar No Show',cancelButtonText:"Cancelar"})).isConfirmed)try{const c=await(await fetch(`/api/admin/bookings/${s}/no-show`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(j.Cookies.get("XSRF-TOKEN"))}})).json();c.status?(l.fire({icon:"info",title:"Marcada como No Show",text:"La reserva ha sido marcada como no show",timer:2e3,showConfirmButton:!1}),o&&await N(o),m()):l.fire("Error",c.message||"Error al marcar como no show","error")}catch{l.fire("Error","Error al procesar la solicitud","error")}},xe=()=>{if(!x)return null;const{availability:s,bookings:a}=x;console.log("üìÖ DEBUG CALENDARIO:",{totalBookings:a==null?void 0:a.length,bookings:a==null?void 0:a.map(i=>{var r;return{id:i.id,check_in:i.check_in,check_out:i.check_out,status:i.status,guest:(r=i.sale)==null?void 0:r.name}}),availabilityDates:s==null?void 0:s.slice(0,5).map(i=>i.date)});const t={};a==null||a.forEach(i=>{const r=i.check_in.split(" ")[0],u=i.check_out.split(" ")[0],[f,b,n]=r.split("-"),[g,T,R]=u.split("-"),J=new Date(parseInt(f),parseInt(b)-1,parseInt(n)),I=new Date(parseInt(g),parseInt(T)-1,parseInt(R));let p=new Date(J);for(;p<=I;){const _=p.getFullYear(),A=String(p.getMonth()+1).padStart(2,"0"),k=String(p.getDate()).padStart(2,"0"),h=`${_}-${A}-${k}`;t[h]||(t[h]=[]),t[h].push(i),p.setDate(p.getDate()+1)}}),console.log("üóìÔ∏è MAPA DE BOOKINGS POR FECHA:",{totalDates:Object.keys(t).length,dates:Object.keys(t).slice(0,10),sampleBooking:t[Object.keys(t)[0]]});const c={};return s==null||s.forEach(i=>{const r=i.date.split("T")[0],[u,f,b]=r.split("-"),n=new Date(parseInt(u),parseInt(f)-1,parseInt(b)),g=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}`;c[g]||(c[g]=[]),c[g].push({...i,date:r,bookings:t[r]||[]})}),console.log("üìä D√çAS CON BOOKINGS:",{totalDays:Object.values(c).flat().length,daysWithBookings:Object.values(c).flat().filter(i=>i.bookings.length>0).length,sample:Object.values(c).flat().slice(0,5).map(i=>({date:i.date,bookings:i.bookings.length,statuses:i.bookings.map(r=>r.status)}))}),Object.entries(c).map(([i,r])=>{const[u,f]=i.split("-"),b=new Date(u,f-1).toLocaleDateString("es-PE",{month:"long",year:"numeric"});return e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{className:"text-capitalize mb-3",children:b}),e.jsx("div",{className:"d-flex flex-wrap gap-1",children:r.map(n=>{const[g,T,R]=n.date.split("-"),I=new Date(parseInt(g),parseInt(T)-1,parseInt(R)).getDate(),p=n.is_blocked;n.bookings.length>0;const _=n.bookings.some(S=>S.status==="confirmed"),A=n.bookings.some(S=>S.status==="pending");let k="#d4edda",h="#155724",w="Disponible";return p?(k="#e2e3e5",h="#383d41",w="Bloqueada"):_?(k="#f8d7da",h="#721c24",w="Ocupada"):A?(k="#fff3cd",h="#856404",w="Reservada"):n.available_rooms===0&&(k="#fff3cd",h="#856404",w="Sin disponibilidad"),e.jsxs("div",{className:"text-center rounded p-2 d-flex align-items-center justify-content-center position-relative",style:{width:"45px",height:"45px",backgroundColor:k,color:h,cursor:"pointer",fontSize:"14px",fontWeight:"bold",border:"1px solid rgba(0,0,0,0.1)"},title:`${n.date}
${w}${n.bookings.map(S=>{var Q;return`
üë§ ${((Q=S.sale)==null?void 0:Q.name)||"Cliente"}`}).join("")}`,children:[I,p&&e.jsx("i",{className:"mdi mdi-lock position-absolute",style:{fontSize:"10px",top:"2px",right:"2px"}})]},n.date)})})]},i)})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[e.jsxs("h4",{className:"header-title mb-0",children:[e.jsx("i",{className:"mdi mdi-calendar-check mr-2"}),"Disponibilidad de Habitaciones"]}),e.jsxs("div",{className:"d-flex align-items-center gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"small text-muted mb-1 d-block",children:"Fecha de consulta:"}),e.jsx(z,{selected:M,onChange:le,locale:F,dateFormat:"dd/MM/yyyy",className:"form-control form-control-sm"})]}),e.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>m(),disabled:E,children:[e.jsx("i",{className:"mdi mdi-refresh mr-1"}),E?"Cargando...":"Actualizar"]})]})]}),e.jsxs("div",{className:"d-flex gap-3 mb-4 flex-wrap",children:[e.jsxs("span",{className:"badge px-3 py-2",style:{backgroundColor:"#d4edda",color:"#155724"},children:[e.jsx("i",{className:"mdi mdi-check-circle mr-1"})," Disponible"]}),e.jsxs("span",{className:"badge px-3 py-2",style:{backgroundColor:"#f8d7da",color:"#721c24"},children:[e.jsx("i",{className:"mdi mdi-bed mr-1"})," Ocupada"]}),e.jsxs("span",{className:"badge px-3 py-2",style:{backgroundColor:"#fff3cd",color:"#856404"},children:[e.jsx("i",{className:"mdi mdi-clock mr-1"})," Reservada (pendiente)"]}),e.jsxs("span",{className:"badge px-3 py-2",style:{backgroundColor:"#e2e3e5",color:"#383d41"},children:[e.jsx("i",{className:"mdi mdi-lock mr-1"})," Bloqueada"]})]}),e.jsx("div",{className:"row",children:P.map(s=>{const a=ne(s.status);return e.jsx("div",{className:"col-xl-4 col-lg-6 col-md-6 mb-4",children:e.jsx("div",{className:"card h-100 border shadow-sm",style:{borderLeft:`4px solid ${a.text}`},children:e.jsxs("div",{className:"card-body p-3",children:[e.jsxs("div",{className:"d-flex",children:[e.jsx("div",{className:"mr-3",style:{width:"80px",height:"80px",flexShrink:0},children:e.jsx("img",{src:`/storage/images/item/${s.image}`,alt:s.name,className:"rounded",style:{width:"100%",height:"100%",objectFit:"cover"},onError:t=>{t.target.src="/assets/img/noimage/no_img.jpg"}})}),e.jsxs("div",{className:"flex-grow-1 position-relative px-2",children:[e.jsx("h5",{className:"mb-1",children:s.name}),e.jsx("span",{className:"badge mb-2",style:{backgroundColor:a.bg,color:a.text},children:a.label}),e.jsxs("div",{className:"small text-muted",children:[e.jsx("i",{className:"mdi mdi-bed mr-1"}),s.available_rooms?"Disponible":"Reservada"]}),e.jsxs("div",{className:"small text-muted",children:[e.jsx("i",{className:"mdi mdi-account-multiple mr-1"}),"M√°x. ",s.max_occupancy," personas"]}),e.jsxs("div",{className:"small text-success font-weight-bold",children:[Z()," ",ee(s.price||0)," /noche"]})]})]}),s.active_booking&&e.jsxs("div",{className:"mt-3 p-2 rounded",style:{backgroundColor:"#f8f9fa"},children:[e.jsxs("div",{className:"small font-weight-bold text-primary mb-1",children:[e.jsx("i",{className:"mdi mdi-account mr-1"}),"Hu√©sped actual:"]}),e.jsx("div",{className:"small",children:s.active_booking.guest_name}),e.jsxs("div",{className:"small text-muted",children:[e.jsx("i",{className:"mdi mdi-calendar-range mr-1"}),new Date(s.active_booking.check_in).toLocaleDateString("es-PE")," - ",new Date(s.active_booking.check_out).toLocaleDateString("es-PE")]}),e.jsxs("div",{className:"small text-muted",children:[e.jsx("i",{className:"mdi mdi-weather-night mr-1"}),s.active_booking.nights," noches ¬∑ ",s.active_booking.guests," hu√©spedes"]}),e.jsx("div",{className:"small",children:e.jsx("span",{className:`badge badge-${s.active_booking.status==="confirmed"?"success":"warning"}`,children:s.active_booking.status==="confirmed"?"Confirmada":"Pendiente"})})]}),!s.active_booking&&s.upcoming_bookings>0&&e.jsxs("div",{className:"mt-3 p-2 rounded",style:{backgroundColor:"#fff3cd"},children:[e.jsxs("div",{className:"small font-weight-bold text-warning mb-1",children:[e.jsx("i",{className:"mdi mdi-calendar-clock mr-1"}),"Pr√≥ximas reservas:"]}),e.jsxs("div",{className:"small",children:[s.upcoming_bookings," reserva",s.upcoming_bookings>1?"s":""," en los pr√≥ximos 7 d√≠as"]}),e.jsx("button",{className:"btn btn-xs btn-outline-warning mt-1",onClick:()=>N(s),children:"Ver calendario"})]}),e.jsxs("div",{className:"mt-3 d-flex gap-2 flex-wrap",children:[e.jsx("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>N(s),title:"Ver calendario",children:e.jsx("i",{className:"mdi mdi-calendar"})}),e.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>oe(s),title:"Bloquear fechas",children:e.jsx("i",{className:"mdi mdi-lock"})}),e.jsx("button",{className:"btn btn-sm btn-outline-success",onClick:()=>de(s.id),title:"Generar disponibilidad",children:e.jsx("i",{className:"mdi mdi-plus-circle"})})]})]})})},s.id)})}),P.length===0&&!E&&e.jsxs("div",{className:"text-center text-muted py-5",children:[e.jsx("i",{className:"mdi mdi-bed-empty mdi-48px"}),e.jsx("p",{className:"mt-2",children:"No hay habitaciones registradas"})]})]})})})}),e.jsx(se,{modalRef:C,title:`Calendario - ${(o==null?void 0:o.name)||""}`,size:"xl",hideButtonSubmit:!0,children:ie?e.jsxs("div",{className:"text-center py-5",children:[e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}),e.jsx("p",{className:"mt-2",children:"Cargando calendario..."})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"d-flex gap-2 mb-3 flex-wrap justify-content-center",children:[e.jsxs("span",{className:"badge px-2 py-1",style:{backgroundColor:"#d4edda",color:"#155724",fontSize:"11px"},children:[e.jsx("i",{className:"mdi mdi-check-circle mr-1"})," Disponible"]}),e.jsxs("span",{className:"badge px-2 py-1",style:{backgroundColor:"#f8d7da",color:"#721c24",fontSize:"11px"},children:[e.jsx("i",{className:"mdi mdi-bed mr-1"})," Ocupado"]}),e.jsxs("span",{className:"badge px-2 py-1",style:{backgroundColor:"#fff3cd",color:"#856404",fontSize:"11px"},children:[e.jsx("i",{className:"mdi mdi-clock mr-1"})," Reservado"]}),e.jsxs("span",{className:"badge px-2 py-1",style:{backgroundColor:"#e2e3e5",color:"#383d41",fontSize:"11px"},children:[e.jsx("i",{className:"mdi mdi-lock mr-1"})," Bloqueado"]})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-5",children:e.jsx("div",{className:"border rounded p-3",style:{backgroundColor:"#f8f9fa",maxHeight:"600px",overflowY:"auto"},children:((W=x==null?void 0:x.bookings)==null?void 0:W.length)>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3 sticky-top bg-light py-2 px-2 rounded",style:{top:0,zIndex:1},children:[e.jsxs("h6",{className:"mb-0 font-weight-bold",children:[e.jsx("i",{className:"mdi mdi-account-group mx-2 text-primary"}),"Reservas"]}),e.jsx("span",{className:"badge badge-primary badge-pill",children:x.bookings.length})]}),x.bookings.map(s=>{var c,i,r,u,f,b;const t=(n=>({pending:{badge:"badge-warning",label:"Pendiente",color:"#f1b44c",bg:"#fff3cd",icon:"mdi-clock-outline"},confirmed:{badge:"badge-success",label:"Confirmada",color:"#28a745",bg:"#d4edda",icon:"mdi-check-circle"},cancelled:{badge:"badge-danger",label:"Cancelada",color:"#dc3545",bg:"#f8d7da",icon:"mdi-close-circle"},completed:{badge:"badge-info",label:"Completada",color:"#17a2b8",bg:"#d1ecf1",icon:"mdi-checkbox-marked-circle"},no_show:{badge:"badge-secondary",label:"No Show",color:"#6c757d",bg:"#e2e3e5",icon:"mdi-account-off"}})[n]||{badge:"badge-secondary",label:n||"Sin estado",color:"#6c757d",bg:"#e2e3e5",icon:"mdi-help-circle"})(s.status);return e.jsx("div",{className:"card mb-3 shadow-sm",style:{borderLeft:`4px solid ${t.color}`,transition:"all 0.2s ease"},children:e.jsxs("div",{className:"card-body p-3",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center mr-2",style:{width:"40px",height:"40px",backgroundColor:t.bg,color:t.color},children:e.jsx("i",{className:`mdi ${t.icon} mdi-24px`})}),e.jsxs("div",{className:"mx-2",children:[e.jsxs("h6",{className:"mb-0 font-weight-bold",children:[(c=s.sale)==null?void 0:c.name," ",(i=s.sale)==null?void 0:i.lastname]}),e.jsxs("small",{className:"text-muted",children:["#",((r=s.sale)==null?void 0:r.code)||"N/A"]})]})]}),e.jsx("span",{className:"badge px-2 py-1",style:{backgroundColor:t.bg,color:t.color,fontWeight:"600",fontSize:"11px",letterSpacing:"0.5px"},children:t.label.toUpperCase()})]}),e.jsxs("div",{className:"mb-2 pb-2 border-bottom",children:[e.jsxs("div",{className:"d-flex align-items-center mb-1",children:[e.jsx("i",{className:"mdi mdi-email text-muted mx-2"}),e.jsx("small",{className:"text-truncate",style:{maxWidth:"250px"},children:(u=s.sale)==null?void 0:u.email})]}),e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("i",{className:"mdi mdi-phone text-muted mx-2"}),e.jsxs("small",{children:[((f=s.sale)==null?void 0:f.phone_prefix)||""," ",((b=s.sale)==null?void 0:b.phone)||"N/A"]})]})]}),e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"row text-center",children:[e.jsx("div",{className:"col-5",children:e.jsxs("div",{className:"p-2 rounded",style:{backgroundColor:"#e7f5ec"},children:[e.jsx("i",{className:"mdi mdi-login text-success d-block mb-1"}),e.jsx("small",{className:"d-block text-muted",style:{fontSize:"10px"},children:"CHECK-IN"}),e.jsx("strong",{className:"d-block",style:{fontSize:"13px"},children:new Date(s.check_in).toLocaleDateString("es-PE",{day:"2-digit",month:"short"})})]})}),e.jsx("div",{className:"col-2 d-flex align-items-center justify-content-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"mdi mdi-arrow-right text-muted"}),e.jsxs("small",{className:"d-block text-muted",children:[s.nights,"n"]})]})}),e.jsx("div",{className:"col-5",children:e.jsxs("div",{className:"p-2 rounded",style:{backgroundColor:"#ffeaea"},children:[e.jsx("i",{className:"mdi mdi-logout text-danger d-block mb-1"}),e.jsx("small",{className:"d-block text-muted",style:{fontSize:"10px"},children:"CHECK-OUT"}),e.jsx("strong",{className:"d-block",style:{fontSize:"13px"},children:new Date(s.check_out).toLocaleDateString("es-PE",{day:"2-digit",month:"short"})})]})})]})}),e.jsxs("div",{className:"d-flex justify-content-around mb-3 py-2",style:{backgroundColor:"#f8f9fa",borderRadius:"4px"},children:[e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"mdi mdi-account-multiple text-primary"}),e.jsxs("small",{className:"d-block",children:[s.guests||1," hu√©sped",(s.guests||1)>1?"es":""]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"mdi mdi-cash-multiple text-success"}),e.jsxs("small",{className:"d-block",children:[Z()," ",ee(s.total_price||0)]})]})]}),e.jsxs("div",{className:"d-flex gap-2 flex-wrap",children:[s.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"btn btn-sm btn-success flex-fill",onClick:()=>me(s.id),title:"Check-In",children:[e.jsx("i",{className:"mdi mdi-login mr-1"})," Check-In"]}),e.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>V(s.id),title:"Cancelar",children:e.jsx("i",{className:"mdi mdi-close"})})]}),s.status==="confirmed"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"btn btn-sm btn-info flex-fill",onClick:()=>pe(s.id),title:"Check-Out",children:[e.jsx("i",{className:"mdi mdi-logout mr-1"})," Check-Out"]}),e.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>he(s.id),title:"No Show",children:e.jsx("i",{className:"mdi mdi-account-off"})}),e.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>V(s.id),title:"Cancelar",children:e.jsx("i",{className:"mdi mdi-close"})})]}),["completed","cancelled","no_show"].includes(s.status)&&e.jsxs("div",{className:"text-center w-100 py-2 text-muted",children:[e.jsx("i",{className:"mdi mdi-information-outline mr-1"}),"Reserva finalizada"]})]})]})},s.id)})]}):e.jsxs("div",{className:"text-center text-muted py-5",children:[e.jsx("i",{className:"mdi mdi-calendar-blank mdi-48px"}),e.jsx("p",{className:"mt-2",children:"No hay reservas en este per√≠odo"})]})})}),e.jsx("div",{className:"col-md-7",children:e.jsxs("div",{className:"border rounded p-2",style:{maxHeight:"600px",overflowY:"auto"},children:[e.jsxs("h6",{className:"mb-3 sticky-top bg-white py-2",style:{top:0,zIndex:1},children:[e.jsx("i",{className:"mdi mdi-calendar mr-1"}),"Vista de Calendario"]}),xe()]})})]})]})}),e.jsxs(se,{modalRef:B,title:`Bloquear/Desbloquear - ${(o==null?void 0:o.name)||""}`,size:"md",buttonSubmit:"Aplicar",onSubmit:re,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Acci√≥n"}),e.jsxs("div",{className:"d-flex gap-3",children:[e.jsxs("div",{className:"form-check",children:[e.jsx("input",{type:"radio",className:"form-check-input",id:"blockAction",checked:D,onChange:()=>O(!0)}),e.jsxs("label",{className:"form-check-label",htmlFor:"blockAction",children:[e.jsx("i",{className:"mdi mdi-lock mr-1 text-danger"}),"Bloquear fechas"]})]}),e.jsxs("div",{className:"form-check",children:[e.jsx("input",{type:"radio",className:"form-check-input",id:"unblockAction",checked:!D,onChange:()=>O(!1)}),e.jsxs("label",{className:"form-check-label",htmlFor:"unblockAction",children:[e.jsx("i",{className:"mdi mdi-lock-open mr-1 text-success"}),"Desbloquear fechas"]})]})]})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Fecha inicio"}),e.jsx(z,{selected:y,onChange:s=>U(s),selectsStart:!0,startDate:y,endDate:v,minDate:new Date,locale:F,dateFormat:"dd/MM/yyyy",className:"form-control"})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Fecha fin"}),e.jsx(z,{selected:v,onChange:s=>H(s),selectsEnd:!0,startDate:y,endDate:v,minDate:y||new Date,locale:F,dateFormat:"dd/MM/yyyy",className:"form-control"})]})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Raz√≥n (opcional)"}),e.jsx("textarea",{className:"form-control",rows:"3",value:G,onChange:s=>Y(s.target.value),placeholder:"Ej: Mantenimiento, limpieza profunda, evento privado..."})]}),e.jsxs("div",{className:"alert alert-info",children:[e.jsx("i",{className:"mdi mdi-information mr-1"}),D?"Las fechas bloqueadas no estar√°n disponibles para reservas.":"Las fechas desbloqueadas volver√°n a estar disponibles para reservas."]})]})]})};be((X,C)=>{ue.createRoot(X).render(e.jsx(fe,{...C,title:"Disponibilidad de Habitaciones",children:e.jsx(ge,{...C})}))});
