var e=Object.defineProperty,a=(a,s,r)=>((a,s,r)=>s in a?e(a,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[s]=r)(a,"symbol"!=typeof s?s+"":s,r);import{m as s,r,j as t,c as i}from"./vendor-react-SBvaUJTK.js";import"./TippyButton-C4KoE0lc.js";import{J as o}from"./JSEncrypt-ewRYZc2G.js";import{B as l}from"./Base-BQaY-qII.js";import{C as n}from"./CreateReactScript-BZ6xEkMS.js";import{I as c}from"./InputFormGroup-DuKrUAYJ.js";import{G as d}from"./Footer-BligNWSa.js";import{L as m}from"./Logout-BgttE_VN.js";import"./vendor-swiper-Cr_RrIb_.js";import"./MenuItemContainer-CwLbZhxp.js";import"./Menu-CqnWUuE2.js";import"./General-ClVW7qxN.js";import"./LaravelSession-ByQnaUD3.js";import"./BooleanLimit-q2Ad9fGY.js";class u{}a(u,"email",async e=>{try{const{status:a,result:r}=await s.Fetch("/api/admin/account/email",{method:"PATCH",body:JSON.stringify(e)});if(!a)throw new Error(r?.message||"Ocurrio un error inesperado");return s.Notify.add({icon:"/assets/img/icon.svg",title:"Correcto",body:r.message,type:"success"}),!0}catch(a){return s.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:a.message,type:"danger"}),!1}}),a(u,"password",async e=>{try{const{status:a,result:r}=await s.Fetch("/api/admin/account/password",{method:"PATCH",body:JSON.stringify(e)});if(!a)throw new Error(r?.message||"Ocurrio un error inesperado");return s.Notify.add({icon:"/assets/img/icon.svg",title:"Correcto",body:r.message,type:"success"}),!0}catch(a){return s.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:a.message,type:"danger"}),!1}});const p=({col:e,label:a,eRef:s,placeholder:i,required:o=!1,value:l})=>{s||(s=r.useRef());const[n,c]=r.useState("password");return t.jsxs("div",{className:`form-group ${e} mb-2`,children:[t.jsxs("label",{htmlFor:"",className:"mb-1",children:[a," ",o&&t.jsx("b",{className:"text-danger",children:"*"})]}),t.jsxs("div",{className:"input-group input-group-merge",children:[t.jsx("input",{ref:s,type:n,className:"form-control",placeholder:i,required:o,defaultValue:l??""}),t.jsx("div",{className:"input-group-text","data-password":"true",onClick:()=>{c("text"==n?"password":"text")},children:t.jsx("i",{className:"text"==n?"mdi mdi-eye-off-outline":"mdi mdi-eye-outline"})})]})]})},b=({session:e})=>{const a=new o;a.setPublicKey(d.PUBLIC_RSA_KEY);const s=r.useRef(),i=r.useRef(),l=r.useRef(),n=r.useRef(),b=r.useRef();return t.jsx("div",{className:"row justify-content-center align-items-center",style:{height:"calc(100vh - 135px)"},children:t.jsx("div",{className:"col-lg-6 col-md-8 col-sm-12",children:t.jsxs("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsx("h4",{className:"card-title mb-0",children:"Cuenta de usuario"})}),t.jsxs("div",{className:"card-body",children:[t.jsxs("div",{className:"row",children:[t.jsx("div",{className:"col-sm-4",children:t.jsxs("div",{className:"nav flex-column nav-pills nav-pills-tab",id:"v-pills-tab",role:"tablist","aria-orientation":"vertical",children:[t.jsx("a",{className:"nav-link active show mb-1",id:"email-container-tab","data-bs-toggle":"pill",href:"#email-container",role:"tab","aria-controls":"email-container","aria-selected":"true",children:"Correo"}),t.jsx("a",{className:"nav-link mb-1",id:"password-container-tab","data-bs-toggle":"pill",href:"#password-container",role:"tab","aria-controls":"password-container","aria-selected":"false",children:"Contraseña"})]})}),t.jsx("div",{className:"col-sm-8",children:t.jsxs("div",{className:"tab-content pt-0",children:[t.jsxs("form",{className:"tab-pane fade active show",id:"email-container",role:"tabpanel","aria-labelledby":"email-container-tab",onSubmit:async e=>{e.preventDefault();const r={email:s.current.value,password:a.encrypt(i.current.value)};await u.email(r)&&m()},children:[t.jsx("h4",{className:"mt-0",children:"Actualizar correo de usuario"}),t.jsx(c,{eRef:s,label:"Correo de usuario",type:"email",value:e.email,required:!0}),t.jsx(p,{eRef:i,label:"Contraseña de confirmacion",type:"password",value:null,required:!0}),t.jsxs("button",{className:"btn btn-primary btn-block",type:"submit",children:[t.jsx("i",{className:"fa fa-save"})," Actualizar"]})]}),t.jsxs("form",{className:"tab-pane fade",id:"password-container",role:"tabpanel","aria-labelledby":"password-container-tab",onSubmit:async e=>{e.preventDefault();const s={password:a.encrypt(l.current.value),newPassword:a.encrypt(n.current.value),confirmPassword:a.encrypt(b.current.value)};await u.password(s)&&m()},children:[t.jsx("h4",{className:"mt-0",children:"Actualizar contraseña de usuario"}),t.jsx(p,{eRef:l,label:"Contraseña anterior",type:"password",value:null,required:!0}),t.jsx(p,{eRef:n,label:"Contraseña nueva",type:"password",value:null,required:!0}),t.jsx(p,{eRef:b,label:"Repita la contraseña nueva",type:"password",value:null,required:!0}),t.jsxs("button",{className:"btn btn-primary btn-block",type:"submit",children:[t.jsx("i",{className:"fa fa-save"})," Actualizar"]})]})]})})]}),t.jsx("hr",{className:"mt-3 mb-2"}),t.jsx("p",{className:"card-text text-center",children:t.jsxs("small",{className:"text-muted",children:["Ultima actualizacion ",moment(e.updated_at).fromNow()]})})]})]})})})};n((e,a)=>{i.createRoot(e).render(t.jsx(l,{...a,title:"Cuenta de usuario",children:t.jsx(b,{...a})}))});
