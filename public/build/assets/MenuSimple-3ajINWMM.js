import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as a}from"./index-BOnQTV8N.js";import{t as N}from"./MobileMenu-DCQNJ5Rs.js";import{T as k}from"./tag-Dgi-uTqk.js";import{C as $}from"./chevron-up-Mt3xll-e.js";import{C as _}from"./chevron-down-uIVDLcM-.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./main-B6F2O9-U.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./CardProductKatya-ncpmQ0JU.js";import"./index-pSueRYGM.js";import"./index-B6ujFmsw.js";import"./BasicRest-BqhZrBN0.js";import"./createLucideIcon-DfjclApS.js";const D=({pages:v=[],items:y,data:u,visible:p=!1})=>{const[i,f]=a.useState(!1),[n,w]=a.useState([]),[c,g]=a.useState(0),m=a.useRef(null);a.useEffect(()=>{function t(o){m.current&&!m.current.contains(o.target)&&f(!1)}return document.addEventListener("pointerdown",t),()=>document.removeEventListener("pointerdown",t)},[]),a.useEffect(()=>{if(i&&window.innerWidth>=1024){const t=window.scrollY,o=window.innerWidth-document.documentElement.clientWidth;return document.documentElement.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top=`-${t}px`,document.body.style.left="0",document.body.style.right="0",document.body.style.width="100%",document.body.style.overflow="hidden",o>0&&(document.body.style.paddingRight=`${o}px`),()=>{document.documentElement.style.overflow="",document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.width="",document.body.style.overflow="",document.body.style.paddingRight="",window.scrollTo(0,t)}}},[i]),a.useEffect(()=>{(async()=>{try{console.log("Fetching active tags...");const o=await N.getTags();if(console.log("Tags response:",o),o!=null&&o.data){const s=o.data.filter(r=>r.promotional_status==="permanent"||r.promotional_status==="active"&&r.menu==="1"||r.menu===1).sort((r,l)=>r.promotional_status==="active"&&l.promotional_status!=="active"?-1:l.promotional_status==="active"&&r.promotional_status!=="active"?1:r.name.localeCompare(l.name));w(s),console.log("Active tags set:",s);const d=s.filter(r=>r.promotional_status==="active").length,j=s.filter(r=>r.promotional_status==="permanent").length;if(console.log(`ðŸŽ¯ Tags cargados: ${d} promocionales activos, ${j} permanentes`),d>0){const r=s.filter(l=>l.promotional_status==="active");console.log("ðŸŽ‰ Promociones activas:",r.map(l=>`${l.name} (${l.start_date} - ${l.end_date})`))}}}catch(o){console.error("Error fetching tags:",o)}})()},[]),a.useEffect(()=>{if(n.length>2&&window.innerWidth<1024){const t=setInterval(()=>{g(o=>{const s=o+2;return s>=n.length?0:s})},3e3);return()=>clearInterval(t)}},[n.length]);const h=window.innerWidth<1024,x=h?p&&n.length>0:!0,b=n.length>0&&h&&p;return console.log("items",u),console.log("tags",n),console.log("isMobile",h),console.log("shouldShowMenu",x),x?e.jsxs(e.Fragment,{children:[i&&e.jsx("div",{className:"fixed inset-0 bg-black/40 z-40",style:{top:m.current?m.current.offsetTop+m.current.offsetHeight:"0"},onClick:()=>f(!1)}),e.jsx("nav",{className:`${b?" block w-full relative md:block bg-secondary font-paragraph text-sm":" relative w-full md:block bg-secondary font-paragraph text-sm"}`,ref:m,children:e.jsx("div",{className:"px-primary  2xl:px-0 2xl:max-w-7xl mx-auto",children:e.jsx("ul",{className:"flex items-center gap-4 lg:gap-6 text-sm justify-between",children:b?e.jsx("div",{className:"w-full py-3 px-4",children:e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3 h-10",children:[n.slice(c,c+2).map((t,o)=>{const s=c+o;return e.jsxs("a",{href:`/catalogo?tag=${t.id}`,className:"group relative border-white border-2 overflow-hidden rounded-full shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-[1.02]",style:{background:`linear-gradient(135deg, ${t.background_color||"#3b82f6"}, ${t.background_color||"#3b82f6"}dd)`},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent"}),e.jsx("div",{className:"relative h-full flex items-center justify-center p-3",children:e.jsxs("div",{className:"flex items-center gap-2 text-center",children:[t.icon?e.jsx("img",{src:`/storage/images/tag/${t.icon}`,alt:t.name,className:"w-6 h-6 object-contain filter brightness-0 invert",onError:d=>d.target.src="/api/cover/thumbnail/null"}):e.jsx(k,{size:20,style:{color:t.text_color||"#ffffff"}}),e.jsx("span",{className:"text-xs font-semibold leading-tight",style:{color:t.text_color||"#ffffff"},children:t.name})]})}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-all duration-300"})]},`${t.id}-${s}`)}),n.slice(c,c+2).length<2&&e.jsx("div",{className:"rounded-2xl bg-white/10 flex items-center justify-center",children:e.jsx("div",{className:"text-white/50 text-xs",children:"MÃ¡s prÃ³ximamente"})})]}),n.length>2&&e.jsx("div",{className:"flex justify-center mt-2 gap-1",children:Array.from({length:Math.ceil(n.length/2)}).map((t,o)=>e.jsx("button",{onClick:()=>g(o*2),className:`w-2 h-2 rounded-full transition-all duration-300 ${Math.floor(c/2)===o?"bg-primary shadow-lg":"bg-neutral-light hover:bg-white/60"}`},o))})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("ul",{className:"flex items-center gap-4 lg:gap-6 text-sm",children:[(u==null?void 0:u.showCategories)&&e.jsxs("li",{className:"relative py-3",children:[e.jsxs("button",{className:"font-medium customtext-neutral-dark flex items-center gap-2 hover:customtext-primary pr-6 transition-colors duration-300 relative before:absolute before:right-0 before:top-1/2 before:-translate-y-1/2 before:h-3 before:w-[1px] before:bg-[#262624]",onClick:()=>f(!i),children:["CategorÃ­as",i?e.jsx($,{size:20}):e.jsx(_,{size:20})]}),i&&e.jsx("div",{className:"absolute z-50 top-12 left-0 bg-white shadow-xl border-t rounded-xl transition-all duration-500 ease-in-out h-[70dvh] w-[calc(60vw-6rem)] overflow-hidden",children:e.jsx("div",{className:"h-full overflow-y-auto",children:e.jsx("div",{className:"p-8",children:e.jsx("div",{className:"columns-1 sm:columns-2 lg:columns-3 xl:columns-4 gap-8",children:[...y].sort((t,o)=>t.name.localeCompare(o.name)).map((t,o)=>e.jsxs("div",{className:"w-full break-inside-avoid-column mb-8",children:[e.jsx("a",{href:`/catalogo?category=${t.slug}`,className:"customtext-neutral-dark font-bold text-base mb-4 cursor-pointer hover:customtext-primary transition-colors duration-300 w-full inline-block border-b pb-2",children:t.name}),e.jsx("ul",{className:"space-y-1",children:t.subcategories.map((s,d)=>e.jsx("li",{className:"w-full",children:e.jsx("a",{href:`/catalogo?subcategory=${s.slug}`,className:"customtext-neutral-dark text-sm hover:customtext-primary transition-colors duration-300 cursor-pointer w-full inline-block line-clamp-2",children:s.name})},d))})]},o))})})})})]}),v.filter(t=>t.menuable).map((t,o,s)=>e.jsx("li",{className:"py-3",children:e.jsx("a",{href:t.path,className:"font-medium hover:customtext-primary cursor-pointer transition-all duration-300"+(o!==s.length-1?" pr-6 relative before:absolute before:right-0 before:top-1/2 before:-translate-y-1/2 before:h-3 before:w-[1px] before:bg-[#262624]":" pr-6"),children:t.name})},o))]}),n.length>0&&e.jsx("div",{className:"flex items-center gap-4 lg:gap-4 text-sm",children:n.map((t,o)=>e.jsx("li",{className:"",children:e.jsxs("a",{href:`/catalogo?tag=${t.id}`,className:"font-medium rounded-full p-2 hover:brightness-105 cursor-pointer transition-all duration-300 relative flex items-center gap-2",style:{backgroundColor:t.background_color||"#3b82f6",color:t.text_color||"#ffffff"},title:t.description||t.name,children:[t.icon&&e.jsx("img",{src:`/storage/images/tag/${t.icon}`,alt:t.name,className:"w-4 h-4",onError:s=>s.target.src="/api/cover/thumbnail/null"}),t.name]})},t.id))})]})})})})]}):null};export{D as default};
