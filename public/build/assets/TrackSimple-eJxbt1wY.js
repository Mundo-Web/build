import{r as e,m as s,j as t,S as a,by as r}from"./vendor-react-DD0uBW7s.js";import{S as l}from"./SalesRest-C0CynmQb.js";import"./vendor-swiper-BQwfPLwm.js";import"./BasicRest-BuuGWTMX.js";import"./GoogleSignInButton-BciphYP2.js";import"./BooleanLimit-q2Ad9fGY.js";const d=new l,i=(e="#111111",s=.1)=>`rgba(${parseInt(e.slice(1,3),16)}, ${parseInt(e.slice(3,5),16)}, ${parseInt(e.slice(5,7),16)}, ${s})`,c=({data:l})=>{const[c,o]=e.useState(s.GET?.code??""),[n,m]=e.useState(null),[x,h]=e.useState(!1),[j,u]=e.useState(!1),g=async e=>{if(e?.preventDefault(),c.trim()){h(!0),u(!1),m(null);try{const{status:e,tracking:s}=await d.track(c,!1);if(!e)throw new Error("Pedido no encontrado");m(s.sort((e,s)=>new Date(s.created_at)-new Date(e.created_at)))}catch(s){u(!0),m(null)}finally{h(!1)}}};e.useEffect(()=>{c&&g()},[]);const b=n?.[0]??null;return t.jsx("div",{id:l?.element_id||null,className:"min-h-screen bg-gray-50 p-[5%]",children:t.jsxs("div",{className:"max-w-2xl mx-auto",children:[t.jsxs("div",{className:"text-center mb-[5%]",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Rastreo de Pedidos"}),t.jsx("p",{className:"text-gray-600",children:"Ingresa el código de tu pedido para ver su estado actual"})]}),t.jsx("div",{className:"mb-[5%]",children:t.jsx("div",{className:"py-6",children:t.jsxs("form",{className:"flex gap-3",onSubmit:g,children:[t.jsx("div",{className:"flex-1",children:t.jsx("input",{type:"text",placeholder:"Ingresa el código del pedido (ej: 20250624142749044420)",value:c,onChange:e=>o(e.target.value),className:"w-full px-4 py-2 text-lg border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})}),t.jsxs("button",{type:"submit",disabled:x||!c.trim(),className:"px-6 py-2 bg-primary text-white rounded-lg  hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[x?t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):t.jsx(a,{className:"w-4 h-4"}),!x&&"Buscar"]})]})})}),b&&t.jsx("div",{className:"bg-white rounded-lg shadow-sm border mb-8 border-l-4 border-l-green-500",style:{borderLeftColor:b.color},children:t.jsx("div",{className:"p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Estado Actual"}),t.jsx("p",{className:"text-2xl font-bold",style:{color:b.color},children:b.name}),t.jsx("p",{className:"text-gray-600 mt-1",children:b.description})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Última actualización"}),t.jsx("p",{className:"font-semibold",children:moment(b.created_at).format("YYYY-MM-DD")}),t.jsx("p",{className:"text-sm text-gray-600",children:moment(b.created_at).format("hh:mm a")})]})]})})}),j&&t.jsx("div",{className:"bg-white rounded-lg shadow-sm border mb-8 border-l-4 border-l-red-500",children:t.jsxs("div",{className:"p-6 text-center",children:[t.jsx(r,{className:"w-12 h-12 text-red-500 mx-auto mb-3"}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Pedido no encontrado"}),t.jsxs("p",{className:"text-gray-600",children:["No se encontró información para el código: ",t.jsx("strong",{children:c})]}),t.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Códigos de ejemplo: 20250624142749044420, 20250624142749044421"})]})}),n&&t.jsx("div",{children:t.jsxs("div",{className:"py-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-8 border-b pb-4",children:[t.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Tracking de estados"}),t.jsxs("button",{onClick:async()=>{h(!0);try{const{status:e,tracking:s}=await d.track(c,!1);if(!e)throw new Error("Pedido no encontrado");m(null),setTimeout(()=>{m(s.sort((e,s)=>new Date(s.created_at)-new Date(e.created_at)))},100)}catch(e){u(!0),m(null)}finally{h(!1)}},className:"p-2 hover:bg-gray-100 rounded-full transition-colors duration-200",disabled:x,children:[t.jsx("i",{className:`mdi ${x?"mdi-spin mdi-loading":"mdi-refresh"} text-gray-600 me-2`}),"Refrescar"]})]}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute left-6 top-0 bottom-0 w-0.5 bg-gray-200"}),t.jsx("div",{className:"space-y-6",children:n.map((e,s)=>t.jsxs("div",{className:"relative flex items-start",children:[t.jsx("div",{className:`relative z-10 flex items-center justify-center w-12 h-12 rounded-full border-4 border-white shadow-lg ${0==s?"ring-4 ring-opacity-20":""} `,style:{backgroundColor:e.color,"--tw-ring-color":i(e.color,.5)},children:t.jsx("div",{className:"text-white",children:t.jsx("i",{className:e.icon||"mdi mdi-circle"})})}),t.jsx("div",{className:"ml-6 flex-1",children:t.jsxs("div",{className:"bg-white rounded-lg border shadow-sm p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-bold",style:{backgroundColor:i(e.color),color:e.color,borderColor:e.color},children:e.name}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:moment(e.created_at).format("YYYY-MM-DD")}),t.jsx("p",{className:"text-xs text-gray-500",children:moment(e.created_at).format("hh:mm a")})]})]}),t.jsx("p",{className:"text-gray-700",children:e.description}),e.isActive&&t.jsx("div",{className:"mt-2",children:t.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800 border border-green-200",children:"Estado Actual"})})]})})]},e.id))})]})]})})]})})};export{c as default};
