import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as s}from"./index-BOnQTV8N.js";import{G as Y}from"./Global-Bz6gVLc5.js";import"./HeaderSearch-BKNHzMkQ.js";import"./main-B6F2O9-U.js";import{C as J}from"./ProductCardIbergruas-BMFTxx2j.js";import{C as Q}from"./chevron-down-uIVDLcM-.js";import{S as _}from"./shopping-cart-DLRnxGTD.js";import{X as O}from"./x-fof_H3Vv.js";import{A as U}from"./index-DBRilyZQ.js";import{m as F}from"./proxy-8H4LMZAz.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./PolicyModal-C80IvD61.js";import"./index-B6ujFmsw.js";import"./index-Chjiymov.js";import"./CartItemRow-CpDVeE23.js";import"./Number2Currency-ld0bFawA.js";import"./General-CE1RDd44.js";import"./tippy-react.esm-DmkRJDEW.js";import"./index-pSueRYGM.js";import"./CartKuchara-D9l7c7at.js";import"./bed-D_dyLoh5.js";import"./createLucideIcon-DfjclApS.js";import"./trash-2-DU7LB6-f.js";import"./calendar-BSC6xbA7.js";import"./moon-BU5XInRR.js";import"./users-w-WaEtvX.js";import"./package-DBFPPBi1.js";import"./minus-Db6MFKEO.js";import"./plus-CTIomuuF.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./resolve-elements-WL2ErOKm.js";const Oe=({items:j,data:l,cart:k,setCart:P,isUser:u,pages:N,generals:m=[]})=>{const g=m.find(t=>t.correlative==="phone_whatsapp"),p=m.find(t=>t.correlative==="message_whatsapp");g==null||g.description,p==null||p.description;const h=m.find(t=>t.correlative==="header_menu_order"),S=(h==null?void 0:h.description)??null,C=(()=>{if(!S)return[...j.map(r=>({type:"category",data:r})),...N.filter(r=>r.menuable).map(r=>({type:"page",data:r}))];const t=S.split(",").map(r=>r.trim()).filter(Boolean),o=[];return t.forEach(r=>{const a=j.find(i=>i.alias&&i.alias.toLowerCase()===r.toLowerCase()||i.name.toLowerCase()===r.toLowerCase());if(a){o.push({type:"category",data:a});return}const n=N.find(i=>i.menuable&&i.name.toLowerCase()===r.toLowerCase());n&&o.push({type:"page",data:n})}),o})(),[B,x]=s.useState(!1),[f,b]=s.useState(!1),[y,E]=s.useState(!1),[L,D]=s.useState(""),[W,G]=s.useState(!1),[T,R]=s.useState(!1),[ee,q]=s.useState([]),[w,H]=s.useState(!1),[te,re]=s.useState(!1),[c,K]=s.useState(-1);s.useRef([]);const $=s.useRef(null),M=s.useRef(null),V=s.useRef(null),X=s.useRef(null),v=s.useRef(null),z=s.useRef(null),I=s.useRef([]),d=k.reduce((t,o)=>Number(t)+Number(o.quantity),0),A=()=>{H(!1),q([]),K(-1)};if(s.useEffect(()=>{function t(o){var r,a;$.current&&!$.current.contains(o.target)&&G(!1),M.current&&!M.current.contains(o.target)&&(L.trim()||E(!1)),v.current&&!v.current.contains(o.target)&&!((r=X.current)!=null&&r.contains(o.target))&&!((a=V.current)!=null&&a.contains(o.target))&&A()}return document.addEventListener("mousedown",t),document.addEventListener("touchstart",t),()=>{document.removeEventListener("mousedown",t),document.removeEventListener("touchstart",t)}},[L]),s.useEffect(()=>{const t=()=>{window.scrollY>0?R(!0):R(!1)};return window.addEventListener("scroll",t),()=>window.removeEventListener("scroll",t)},[]),s.useEffect(()=>{const t=o=>{o.key==="Escape"&&(w?A():y&&(E(!1),D("")))};return(y||w)&&document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}},[y,w]),s.useEffect(()=>()=>{z.current&&clearTimeout(z.current)},[]),s.useEffect(()=>{c>=0&&I.current[c]&&v.current&&I.current[c].scrollIntoView({block:"nearest",behavior:"smooth"})},[c]),u&&Array.isArray(u.roles)){const t=u.roles.map(o=>{var r;return(r=o.name)==null?void 0:r.toLowerCase()});!t.includes("admin")&&t.includes("root")}return e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:`w-full top-0 left-0 z-50 transition-all duration-300 ${T?"fixed shadow-lg":"relative"} ${l.backgroundColor||"bg-primary"}`,children:[e.jsx("div",{className:"max-w-7xl mx-auto px-[5%] 2xl:px-0",children:e.jsxs("div",{className:"flex justify-between items-center h-20",children:[e.jsx("div",{className:"flex items-center gap-6",children:e.jsx("a",{href:"/",className:"flex-shrink-0 flex items-center",children:e.jsx("img",{src:`/assets/resources/logo.png?v=${crypto.randomUUID()}`,alt:Y.APP_NAME,className:`h-10 lg:h-16 w-auto object-contain ${(l==null?void 0:l.class_logo)||""}`,onError:t=>{t.target.onerror=null,t.target.src="/assets/img/logo-bk.svg"}})})}),e.jsxs("nav",{className:"hidden lg:flex items-center gap-8",children:[C.map((t,o)=>{var r,a;if(t.type==="category"){const n=t.data;return e.jsxs("div",{className:"relative group",children:[e.jsxs("a",{href:`/catalogo?category=${n.slug}`,className:`
                                                    flex items-center gap-1 text-lg  font-bold transition-colors
                                                    ${n.alias?"bg-secondary text-white px-6 py-2.5 shadow-lg ":"customtext-neutral-dark "}
                                                `,children:[n.alias||n.name,((r=n.subcategories)==null?void 0:r.length)>0&&e.jsx(Q,{size:16,className:`transition-transform duration-200 group-hover:rotate-180 ${n.alias?"text-white":""}`})]}),((a=n.subcategories)==null?void 0:a.length)>0&&e.jsx("div",{className:"absolute top-full left-0 w-56 pt-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 transform group-hover:translate-y-0 translate-y-2 z-50",children:e.jsx("div",{className:"bg-white  shadow-xl overflow-hidden border border-gray-100",children:n.subcategories.map(i=>e.jsx("a",{href:`/catalogo?subcategory=${i.slug}`,className:"block px-4 py-3 text-base text-gray-700 hover:bg-primary hover:text-white transition-colors duration-300 last:border-0",children:i.name},i.id))})})]},`cat-${n.id}`)}else if(t.type==="page"){const n=t.data;return e.jsx("a",{href:n.path,className:"text-lg font-bold customtext-neutral-dark hover:text-black transition-colors",children:n.name},`page-${o}`)}return null}),e.jsxs("button",{onClick:()=>x(!0),className:"relative bg-black text-white p-2.5 hover:bg-gray-900 transition-colors group","aria-label":"Carrito de compras",children:[e.jsx(_,{size:20,className:"text-white"}),d>0&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-white text-black text-xs font-bold w-5 h-5 flex items-center justify-center rounded-full border-2 border-black",children:d})]})]}),e.jsxs("div",{className:"flex lg:hidden items-center gap-4",children:[e.jsxs("button",{onClick:()=>x(!0),className:"relative bg-black text-white p-2.5 hover:bg-gray-900 transition-colors group","aria-label":"Carrito de compras",children:[e.jsx(_,{size:20,className:"text-white"}),d>0&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-white text-black text-xs font-bold w-5 h-5 flex items-center justify-center rounded-full border-2 border-black",children:d})]}),e.jsx("button",{onClick:()=>b(!f),className:"p-2 text-black hover:bg-black/5 rounded-lg transition-colors",children:f?e.jsx(O,{size:24}):e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),e.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),e.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})})]})]})}),e.jsx(U,{children:f&&e.jsxs(e.Fragment,{children:[e.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"lg:hidden fixed inset-0 bg-black/50 z-40",onClick:()=>b(!1)}),e.jsxs(F.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"tween",duration:.3},className:"lg:hidden fixed right-0 top-0 h-full w-[85%] max-w-sm bg-neutral-dark shadow-2xl z-50 overflow-y-auto",children:[e.jsxs("div",{className:`flex items-center justify-between p-4 border-b ${l.backgroundColor||"bg-primary"}`,children:[e.jsx("span",{className:"text-lg font-bold text-white",children:"MenÃº"}),e.jsx("button",{onClick:()=>b(!1),className:"p-2 text-white hover:bg-white/10 rounded-lg transition-colors",children:e.jsx(O,{size:24})})]}),e.jsx("div",{className:"p-4 text-white",children:e.jsx("nav",{className:"space-y-2",children:C.map((t,o)=>{var r;if(t.type==="category"){const a=t.data;return e.jsxs("div",{className:"border-b border-gray-100 last:border-0",children:[e.jsx("a",{href:`/catalogo?category=${a.slug}`,className:`
                                                                block py-3 px-4 text-base font-semibold transition-colors rounded-none
                                                                ${a.alias?"bg-primary customtext-neutral-dark mb-2":"text-white hover:bg-gray-50"}
                                                            `,children:a.alias||a.name}),((r=a.subcategories)==null?void 0:r.length)>0&&e.jsx("div",{className:"ml-4 mb-2 space-y-1",children:a.subcategories.map(n=>e.jsx("a",{href:`/catalogo?subcategory=${n.slug}`,className:"block py-2 px-3 text-sm text-white hover:text-primary hover:bg-gray-50 rounded-lg transition-colors",children:n.name},n.id))})]},`mobile-cat-${a.id}`)}else if(t.type==="page"){const a=t.data;return e.jsx("a",{href:a.path,className:"block py-3 px-4 text-base font-semibold text-white hover:bg-gray-50 rounded-none transition-colors border-b border-gray-100 last:border-0",children:a.name},`mobile-page-${o}`)}return null})})})]})]})})]}),e.jsx(J,{data:l,cart:k,setCart:P,modalOpen:B,setModalOpen:x})]})};export{Oe as default};
