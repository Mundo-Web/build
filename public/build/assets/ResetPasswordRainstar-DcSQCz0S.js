import{r as e,m as t,j as s,b2 as a,o as r,an as n}from"./vendor-react-C1oWoR6m.js";import{J as o}from"./JSEncrypt-ewRYZc2G.js";import{G as l}from"./Footer-Cr_V_wDJ.js";import{S as c}from"./CartKuchara-BuGNrbqJ.js";import{A as i}from"./AuthClientRest-DsuAOgfF.js";import"./vendor-swiper-Cr_RrIb_.js";import"./OpenPayCardModal-DoDTV5Bn.js";function d({data:d}){const x=new o;x.setPublicKey(l.PUBLIC_RSA_KEY);const[m,p]=e.useState(!1),[u,f]=e.useState(!1),[b,h]=e.useState(!1),j=e.useRef(),g=e.useRef(),w=e.useRef(),N=e.useRef();e.useEffect(()=>{t.GET.message&&c.fire({icon:"info",title:"Mensaje",text:t.GET.message,showConfirmButton:!1,timer:3e3})},[]),e.useEffect(()=>{const e=new URLSearchParams(window.location.search),t=e.get("token"),s=e.get("email");t&&(w.current=t,N.current=s)},[]);const k="!rounded-none !border-x-0 !border-t-0 border-b border-neutral-900 !px-0 py-4 bg-transparent focus:!ring-0 focus:!outline-none focus:!border-x-0 focus:!border-t-0 focus:border-b-1 text-xs uppercase tracking-widest placeholder:text-neutral-300 transition-all font-medium",v="text-[10px] font-black uppercase tracking-[0.2em] text-neutral-400 mb-2 block";return s.jsx("section",{id:d?.element_id||null,className:"bg-white min-h-screen pt-20 pb-32 flex items-center",children:s.jsx("div",{className:"container mx-auto px-primary 2xl:px-0 2xl:max-w-7xl",children:s.jsxs("div",{className:"max-w-2xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("span",{className:"text-[10px] font-bold uppercase tracking-[0.3em] text-neutral-400 mb-4 block",children:"Seguridad"}),s.jsxs("h1",{className:"text-4xl md:text-5xl font-black uppercase tracking-tighter leading-none mb-6",children:["Restablecer ",s.jsx("br",{})," Contraseña"]}),s.jsx("p",{className:"text-neutral-500 text-sm uppercase tracking-widest leading-relaxed max-w-lg mx-auto",children:"Ingresa tu nueva contraseña y confirma para asegurar tu cuenta."})]}),s.jsxs("form",{onSubmit:async e=>{e.preventDefault(),p(!0);const t=j.current.value,s=w.current,a=g.current.value,r=N.current;if(t!==a)return c.fire({icon:"error",title:"Error",text:"Las contraseñas no coinciden",showConfirmButton:!1,timer:3e3});const n={email:x.encrypt(r),password:x.encrypt(t),token:s,confirmation:x.encrypt(a)};if(!(await i.resetPassword(n)))return p(!1);window.location.href="/"},className:"space-y-12",children:[s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:v,htmlFor:"password",children:"Nueva Contraseña"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{id:"password",ref:j,name:"password",type:u?"text":"password",className:`border ${k} w-full pr-10`,required:!0}),s.jsx("button",{type:"button",onClick:()=>{f(!u)},className:"absolute right-0 top-1/2 transform -translate-y-1/2 text-neutral-400 hover:text-black transition-colors",children:u?s.jsx("span",{className:"text-[10px] uppercase font-bold tracking-widest",children:"Ocultar"}):s.jsx("span",{className:"text-[10px] uppercase font-bold tracking-widest",children:"Ver"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:v,htmlFor:"confirm-password",children:"Confirmar Contraseña"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{id:"confirm-password",ref:g,name:"confirm-password",type:b?"text":"password",className:`border ${k} w-full pr-10`,required:!0}),s.jsx("button",{type:"button",onClick:()=>{h(!b)},className:"absolute right-0 top-1/2 transform -translate-y-1/2 text-neutral-400 hover:text-black transition-colors",children:b?s.jsx("span",{className:"text-[10px] uppercase font-bold tracking-widest",children:"Ocultar"}):s.jsx("span",{className:"text-[10px] uppercase font-bold tracking-widest",children:"Ver"})})]})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-6 pt-4",children:[s.jsxs("a",{href:"/login",className:"flex items-center gap-2 text-[10px] font-bold uppercase tracking-[0.2em] text-neutral-400 hover:text-black transition-colors group",children:[s.jsx(a,{size:14,className:"group-hover:-translate-x-1 transition-transform"}),"Cancelar"]}),s.jsx("button",{type:"submit",disabled:m,className:"w-full sm:w-auto px-12 py-5 text-[10px] font-bold uppercase tracking-[0.2em] bg-black text-white hover:brightness-125 disabled:bg-neutral-200 disabled:text-neutral-400 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-4 group shadow-2xl shadow-black/10",children:m?s.jsx(r,{className:"animate-spin",size:16}):s.jsxs(s.Fragment,{children:["CAMBIAR CONTRASEÑA",s.jsx(n,{size:14,className:"group-hover:translate-x-1 transition-transform"})]})})]})]})]})})})}export{d as default};
