var e=Object.defineProperty,a=(a,s,r)=>((a,s,r)=>s in a?e(a,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[s]=r)(a,"symbol"!=typeof s?s+"":s,r);import{c as s,j as r,r as t,s as i}from"./vendor-react-LJZQRWVP.js";import{B as l}from"./Base-d3D_nH13.js";import{S as n}from"./SwitchFormGroup-DmF3CemX.js";import{T as c}from"./TextareaFormGroup-DuKD7Eef.js";import{Q as d}from"./QuillFormGroup-CZ2ersq3.js";import{S as o}from"./CartKuchara-B42NOSvQ.js";import{B as m}from"./BasicRest-BX2nxOrK.js";import{I as p}from"./ImageFormGroup-BnZEFLkg.js";import{M as u}from"./Modal-vo2KOb7R.js";import{T as h}from"./Table-_Mka0EYb.js";import{D as f}from"./DxButton-C6FT_beP.js";import{C as g,F as x}from"./CreateReactScript-1qFalD4_.js";import{R as b}from"./ReactAppend-DwMsYvyu.js";import{I as v}from"./InputFormGroup-BgXABemt.js";import{S as j}from"./SelectFormGroup-DeQmdboA.js";import"./vendor-swiper-Cr_RrIb_.js";import"./Footer-DCwBNfoi.js";import"./TippyButton-CwI1PIG0.js";import"./Logout-CZL0vZGv.js";import"./MenuItemContainer-Bn3kuPvp.js";import"./Menu-CEdT8p4D.js";import"./OpenPayCardModal-CIqEZuEl.js";import"./BooleanLimit-q2Ad9fGY.js";import"./General-ClVW7qxN.js";import"./LaravelSession-ByQnaUD3.js";const y=new class extends m{constructor(){super(...arguments),a(this,"path","admin/services"),a(this,"hasFiles",!0)}},N=({service_categories:e=[],service_sub_categories:a=[]})=>{const s=t.useRef(),l=t.useRef(),m=t.useRef(),g=t.useRef(),N=t.useRef(),w=t.useRef(),k=t.useRef(),D=t.useRef(),C=t.useRef(),_=t.useRef(),R=t.useRef(),S=t.useRef(),[F,T]=t.useState(!1),[A,E]=t.useState(null),[B,I]=t.useState([]),M=t.useRef(),[O,G]=t.useState([]),L=t.useRef(),[z,P]=t.useState([]),W=t.useRef(),[H,J]=t.useState([]),[q,U]=t.useState([]),[K,Q]=t.useState(null),V=()=>{Q(null)},X=e=>{e.preventDefault()},[Y,Z]=t.useState(null),ee=()=>{Z(null)},ae=e=>{e.preventDefault()},[se,re]=t.useState(null),te=x.has("services","service_category_id")||x.has("services","service_subcategory_id"),ie=x.has("services","name")||x.has("services","path"),le=x.has("services","summary"),ne=x.has("services","is_gallery")||x.has("services","pdf")||x.has("services","linkvideo"),ce=x.has("services","image")||x.has("services","background_image"),de=()=>{re(null)},oe=e=>{e.preventDefault()},me=(e,a,s)=>{const r=[...q];r[e][a]=s,U(r)},pe=e=>{if(T(!!e?.id),m.current.value=e?.id??"",w.current&&(w.current.value=e?.name??""),k.current&&(k.current.value=e?.summary??""),C.current&&(C.current.value=e?.path??""),S.current&&(S.current.value=e?.slug??""),D.current&&D.editor&&(D.editor.root.innerHTML=e?.description??""),_.current&&(_.image.src=e?.image?`/storage/images/service/${e.image}`:"",_.current.value=null,_.resetDeleteFlag&&_.resetDeleteFlag()),R.current&&(R.image.src=e?.background_image?`/storage/images/service/${e.background_image}`:"",R.current.value=null,R.resetDeleteFlag&&R.resetDeleteFlag()),g.current&&$(g.current).val(e?.service_category_id||null).trigger("change"),e?.service_category_id&&E(Number(e.service_category_id)),N.current&&$(N.current).val(e?.service_subcategory_id||null).trigger("change"),e?.images&&Array.isArray(e.images)){const a=e.images.map(e=>({id:e.id,preview:`/storage/images/service/${e.image}`,order:e.order,file:null}));I(a)}else I([]);e?.pdf&&Array.isArray(e.pdf)?G(e.pdf.map(e=>({name:e.name,path:e.path,order:e.order}))):G([]),e?.linkvideo&&Array.isArray(e.linkvideo)?P(e.linkvideo.map(e=>({url:e.url,order:e.order}))):P([]),e?.features&&Array.isArray(e.features)?J(e.features.map(e=>({id:e.id,feature:e.feature||""}))):J([]),e?.specifications&&Array.isArray(e.specifications)?U(e.specifications.map(e=>({id:e.id,type:e.type||"general",title:e.title,description:e.description}))):U([]);document.querySelectorAll(".deleted-image-input, .deleted-pdf-input, .deleted-video-input").forEach(e=>e.remove()),$(l.current).modal("show")};return r.jsxs(r.Fragment,{children:[r.jsx(h,{gridRef:s,title:"Servicios",rest:y,toolBar:e=>{e.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(s.current).dxDataGrid("instance").refresh()}}),e.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Agregar",hint:"Agregar",onClick:()=>pe()}})},exportable:!0,exportableName:"Servicios",columns:[{dataField:"id",caption:"ID",visible:!1},(x.has("services","service_category_id")||x.has("services","service_subcategory_id"))&&{dataField:"category.name",caption:"Categoría",width:"150px",cellTemplate:(e,{data:a})=>{e.html(i.renderToString(r.jsxs(r.Fragment,{children:[r.jsx("b",{className:"d-block",children:a.category?.name||"Sin categoría"}),r.jsx("small",{className:"text-muted",children:a.subcategory?.name||""})]})))}},x.has("services","name")&&{dataField:"name",caption:"Servicio",minWidth:"300px",cellTemplate:(e,{data:a})=>{const s=((e,a)=>{if(!e)return"";const s=e.split(" ");return s.length>a?s.slice(0,a).join(" ")+"...":e})(a.summary?a.summary:(e=>{if(!e)return"";const a=document.createElement("div");return a.innerHTML=e,a.textContent||a.innerText||""})(a.description),15);e.html(i.renderToString(r.jsxs(r.Fragment,{children:[r.jsx("b",{children:a.name}),(a.summary||a.description)&&s&&r.jsxs(r.Fragment,{children:[r.jsx("br",{}),r.jsx("span",{className:"text-muted",children:s})]})]})))}},x.has("services","image")&&{dataField:"image",caption:"Imagen",width:"90px",allowFiltering:!1,cellTemplate:(e,{data:a})=>{b(e,r.jsx("img",{src:`/storage/images/service/${a.image}`,style:{width:"80px",height:"48px",objectFit:"cover",objectPosition:"center",borderRadius:"4px"},onError:e=>e.target.src="/api/cover/thumbnail/null"}))}},x.has("services","background_image")&&{dataField:"background_image",caption:"Banner",width:"90px",allowFiltering:!1,cellTemplate:(e,{data:a})=>{b(e,r.jsx("img",{src:`/storage/images/service/${a.background_image}`,style:{width:"80px",height:"48px",objectFit:"cover",objectPosition:"center",borderRadius:"4px"},onError:e=>e.target.src="/api/cover/thumbnail/null"}))}},x.has("services","visible")&&{dataField:"visible",caption:"Visible",dataType:"boolean",width:"90px",cellTemplate:(e,{data:a})=>{$(e).empty(),b(e,r.jsx(n,{checked:1==a.visible,onChange:()=>(async({id:e,value:a})=>{await y.boolean({id:e,field:"visible",value:a})&&$(s.current).dxDataGrid("instance").refresh()})({id:a.id,value:!a.visible})}))}},x.has("services","featured")&&{dataField:"featured",caption:"Destacado",dataType:"boolean",width:"110px",cellTemplate:(e,{data:a})=>{$(e).empty(),b(e,r.jsx(n,{checked:1==a.featured,onChange:()=>(async({id:e,value:a})=>{await y.boolean({id:e,field:"featured",value:a})&&$(s.current).dxDataGrid("instance").refresh()})({id:a.id,value:!a.featured})}))}},{caption:"Acciones",width:"120px",cellTemplate:(e,{data:a})=>{e.css("text-overflow","unset"),e.append(f({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>pe(a)})),e.append(f({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>(async e=>{const{isConfirmed:a}=await o.fire({title:"Eliminar registro",text:"¿Estas seguro de eliminar este registro?",icon:"warning",showCancelButton:!0,confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"});if(!a)return;await y.delete(e.id)&&$(s.current).dxDataGrid("instance").refresh()})(a)}))},allowFiltering:!1,allowExporting:!1}]}),r.jsxs(u,{modalRef:l,title:F?"Editar servicio":"Agregar servicio",onSubmit:async e=>{e.preventDefault();const a=new FormData;if(m.current.value&&a.append("id",m.current.value),w.current&&a.append("name",w.current.value),k.current&&a.append("summary",k.current.value),D.current&&a.append("description",D.current.value),g.current){const e=g.current.value;e&&""!==e&&"null"!==e&&a.append("service_category_id",e)}if(N.current){const e=N.current.value;e&&""!==e&&"null"!==e&&a.append("service_subcategory_id",e)}if(C.current){const e=C.current.value;e&&""!==e.trim()&&a.append("path",e)}const r=S.current?.value;if(r&&""!==r.trim()&&a.append("slug",r),_.current){const e=_.current.files[0];e&&a.append("image",e)}if(R.current){const e=R.current.files[0];e&&a.append("background_image",e)}_.current&&_.getDeleteFlag&&_.getDeleteFlag()&&a.append("image_delete","DELETE"),R.current&&R.getDeleteFlag&&R.getDeleteFlag()&&a.append("background_image_delete","DELETE"),B.forEach((e,s)=>{e.file&&a.append("gallery[]",e.file)});const t=document.querySelectorAll(".deleted-image-input"),i=Array.from(t).map(e=>e.value);i.length>0&&a.append("deleted_images",JSON.stringify(i)),O.forEach((e,s)=>{e.file&&a.append("pdf[]",e.file)});const n=document.querySelectorAll(".deleted-pdf-input"),c=Array.from(n).map(e=>e.value);c.length>0&&a.append("deleted_pdfs",JSON.stringify(c));const d=z.map(e=>e.url);a.append("linkvideo",JSON.stringify(d));const o=document.querySelectorAll(".deleted-video-input"),p=Array.from(o).map(e=>e.value);p.length>0&&a.append("deleted_videos",JSON.stringify(p)),a.append("features",JSON.stringify(H)),a.append("specifications",JSON.stringify(q));await y.save(a)&&(_.current&&_.resetDeleteFlag&&_.resetDeleteFlag(),R.current&&R.resetDeleteFlag&&R.resetDeleteFlag(),$(s.current).dxDataGrid("instance").refresh(),$(l.current).modal("hide"))},size:"xl",children:[r.jsx("input",{ref:m,type:"hidden"}),r.jsx("input",{ref:S,type:"hidden"}),r.jsxs("div",{id:"principal-container",children:[r.jsxs("ul",{className:"nav nav-pills nav-justified mb-4",role:"tablist",style:{backgroundColor:"#f8f9fa",borderRadius:"8px",padding:"4px",border:"1px solid #e9ecef"},children:[r.jsx("li",{className:"nav-item",role:"presentation",children:r.jsxs("button",{className:"nav-link active",id:"basic-info-tab","data-bs-toggle":"pill","data-bs-target":"#basic-info",type:"button",role:"tab","aria-controls":"basic-info","aria-selected":"true",style:{borderRadius:"6px",fontWeight:"500",transition:"all 0.3s ease"},children:[r.jsx("i",{className:"fas fa-info-circle me-2"}),"Información Básica"]})}),r.jsx("li",{className:"nav-item",role:"presentation",children:r.jsxs("button",{className:"nav-link",id:"multimedia-tab","data-bs-toggle":"pill","data-bs-target":"#multimedia",type:"button",role:"tab","aria-controls":"multimedia","aria-selected":"false",style:{borderRadius:"6px",fontWeight:"500",transition:"all 0.3s ease"},children:[r.jsx("i",{className:"fas fa-images me-2"}),"Multimedia"]})}),r.jsx("li",{className:"nav-item",role:"presentation",children:r.jsxs("button",{className:"nav-link",id:"features-tab","data-bs-toggle":"pill","data-bs-target":"#features",type:"button",role:"tab","aria-controls":"features","aria-selected":"false",style:{borderRadius:"6px",fontWeight:"500",transition:"all 0.3s ease"},children:[r.jsx("i",{className:"fas fa-list-ul me-2"}),"Características"]})})]}),r.jsxs("div",{className:"tab-content",children:[r.jsx("div",{className:"tab-pane fade show active",id:"basic-info",role:"tabpanel","aria-labelledby":"basic-info-tab",children:r.jsxs("div",{className:"row g-3",children:[ie&&r.jsx("div",{className:te?"col-md-6":"col-12",children:r.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[r.jsx("div",{className:"card-header",children:r.jsxs("h6",{className:"mb-0",children:[r.jsx("i",{className:"fas fa-tag me-2"}),"Identificación"]})}),r.jsxs("div",{className:"card-body",children:[r.jsx(v,{eRef:w,label:"Nombre del Servicio",required:!0,hidden:!x.has("services","name")}),r.jsx(v,{eRef:C,label:"Ruta (Path)",placeholder:"/mi-servicio",hidden:!x.has("services","path")})]})]})}),te&&r.jsx("div",{className:"col-md-6",children:r.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[r.jsx("div",{className:"card-header",children:r.jsxs("h6",{className:"mb-0",children:[r.jsx("i",{className:"fas fa-sitemap me-2"}),"Categorización"]})}),r.jsxs("div",{className:"card-body",children:[r.jsx(j,{eRef:g,label:"Categoría",dropdownParent:"#principal-container",onChange:e=>E(e.target.value?Number(e.target.value):null),hidden:!x.has("services","service_category_id"),children:e.map((e,a)=>r.jsx("option",{value:e.id,children:e.name},a))}),r.jsx(j,{eRef:N,label:"Subcategoría",dropdownParent:"#principal-container",hidden:!x.has("services","service_subcategory_id"),children:a.filter(e=>!A||e.service_category_id===A).map((e,a)=>r.jsx("option",{value:e.id,children:e.name},a))})]})]})}),le&&r.jsx("div",{className:"col-12",children:r.jsxs("div",{className:"card border-0 shadow-sm",children:[r.jsx("div",{className:"card-header",children:r.jsxs("h6",{className:"mb-0",children:[r.jsx("i",{className:"fas fa-align-left me-2"}),"Descripción"]})}),r.jsx("div",{className:"card-body",children:r.jsx(c,{eRef:k,label:"Resumen Corto",rows:3,placeholder:"Breve descripción del servicio (1-2 líneas)",hidden:!x.has("services","summary")})})]})})]})}),r.jsx("div",{className:"tab-pane fade",id:"multimedia",role:"tabpanel","aria-labelledby":"multimedia-tab",children:r.jsxs("div",{className:"row g-3",children:[ce&&r.jsx("div",{className:ne?"col-md-6":"col-12",children:r.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[r.jsx("div",{className:"card-header",children:r.jsxs("h6",{className:"mb-0",children:[r.jsx("i",{className:"fas fa-image me-2"}),"Imágenes Principales"]})}),r.jsx("div",{className:"card-body",children:r.jsxs("div",{className:"row",children:[x.has("services","background_image")&&r.jsx(p,{eRef:R,name:"background_image",label:"Banner",aspect:2,col:"col-12"}),x.has("services","image")&&r.jsx(p,{eRef:_,name:"image",label:"Imagen Principal",aspect:1,col:"col-md-6"})]})})]})}),ne&&r.jsx("div",{className:ce?"col-md-6":"col-12",children:r.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[r.jsx("div",{className:"card-header",children:r.jsxs("h6",{className:"mb-0",children:[r.jsx("i",{className:"fas fa-photo-video me-2"}),"Galería y Multimedia"]})}),r.jsxs("div",{className:"card-body",children:[x.has("services","is_gallery")&&r.jsxs("div",{className:"mb-4",children:[r.jsxs("label",{className:"form-label fw-semibold text-dark mb-3",children:[r.jsx("i",{className:"fas fa-images me-2 text-primary"}),"Galería de Imágenes",B.length>0&&r.jsx("span",{className:"badge bg-primary ms-2",children:B.length})]}),r.jsx("input",{id:"input-service-gallery",ref:M,type:"file",multiple:!0,accept:"image/*",hidden:!0,onChange:e=>{const a=Array.from(e.target.files).map((e,a)=>({file:e,preview:URL.createObjectURL(e),order:B.length+a,id:null}));I([...B,...a])}}),r.jsxs("div",{className:"gallery-container",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:"16px",padding:"16px",backgroundColor:"#f8f9fa",borderRadius:"12px",border:"2px dashed #dee2e6",minHeight:"160px"},children:[B.map((e,a)=>{const s=a+1;return r.jsxs("div",{className:"gallery-item position-relative",draggable:!0,onDragStart:e=>((e,a)=>{Q(a)})(0,a),onDragEnd:V,onDragOver:X,onDrop:e=>((e,a)=>{if(e.preventDefault(),null===K||K===a)return;const s=[...B],[r]=s.splice(K,1);s.splice(a,0,r),I(s.map((e,a)=>({...e,order:a}))),Q(null)})(e,a),style:{aspectRatio:"1",borderRadius:"12px",overflow:"hidden",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",transition:"all 0.3s ease",cursor:"grab",transform:K===a?"scale(1.05)":"scale(1)",opacity:K===a?.8:1,border:"3px solid transparent",background:"white"},onMouseEnter:e=>{null===K&&(e.currentTarget.style.transform="scale(1.02)",e.currentTarget.style.boxShadow="0 6px 20px rgba(0,0,0,0.15)")},onMouseLeave:e=>{null===K&&(e.currentTarget.style.transform="scale(1)",e.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.1)")},children:[r.jsx("div",{className:"position-absolute top-0 start-0 m-2",children:r.jsx("span",{className:"badge bg-primary rounded-circle d-flex align-items-center justify-content-center",style:{width:"24px",height:"24px",fontSize:"11px",fontWeight:"bold"},children:s})}),r.jsx("img",{src:e.preview,alt:`Imagen ${s}`,className:"w-100 h-100",style:{objectFit:"cover",pointerEvents:"none"}}),r.jsx("div",{className:"position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center",style:{background:"rgba(0,0,0,0.7)",opacity:0,transition:"opacity 0.3s ease"},onMouseEnter:e=>e.currentTarget.style.opacity=1,onMouseLeave:e=>e.currentTarget.style.opacity=0,children:r.jsxs("div",{className:"d-flex gap-2",children:[r.jsx("button",{type:"button",className:"btn btn-light btn-sm rounded-circle d-flex align-items-center justify-content-center",style:{width:"32px",height:"32px"},title:"Mover imagen",children:r.jsx("i",{className:"fas fa-arrows-alt text-dark"})}),r.jsx("button",{type:"button",className:"btn btn-danger btn-sm rounded-circle d-flex align-items-center justify-content-center",style:{width:"32px",height:"32px"},onClick:e=>((e,a)=>{e.preventDefault();const s=B[a];if(s.id){const a=document.createElement("input");a.type="hidden",a.name="deleted_images[]",a.value=s.id,a.className="deleted-image-input",e.target.closest("form").appendChild(a)}I(B.filter((e,s)=>s!==a))})(e,a),title:"Eliminar imagen",children:r.jsx("i",{className:"fas fa-trash text-white"})})]})})]},a)}),r.jsx("div",{className:"gallery-add-button d-flex flex-column align-items-center justify-content-center",style:{aspectRatio:"1",border:"3px dashed #71b6f9",borderRadius:"12px",backgroundColor:"rgba(13, 110, 253, 0.05)",cursor:"pointer",transition:"all 0.3s ease",minHeight:"120px"},onClick:()=>M.current.click(),onDrop:e=>{e.preventDefault();const a=Array.from(e.dataTransfer.files).filter(e=>e.type.startsWith("image/")).map((e,a)=>({file:e,preview:URL.createObjectURL(e),order:B.length+a,id:null}));I([...B,...a])},onDragOver:e=>{e.preventDefault()},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="rgba(13, 110, 253, 0.1)",e.currentTarget.style.borderColor="#0056b3",e.currentTarget.style.transform="scale(1.02)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="rgba(13, 110, 253, 0.05)",e.currentTarget.style.borderColor="#71b6f9",e.currentTarget.style.transform="scale(1)"},children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"mb-2 bg-primary",style:{width:"48px",height:"48px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto"},children:r.jsx("i",{className:"fas fa-plus text-white fa-lg"})}),r.jsx("p",{className:"mb-0 text-primary fw-semibold",style:{fontSize:"12px"},children:"Agregar Imagen"}),r.jsx("small",{className:"text-muted",style:{fontSize:"10px"},children:"Arrastra o haz clic"})]})})]}),0===B.length&&r.jsxs("div",{className:"text-center py-4 text-muted",children:[r.jsx("i",{className:"fas fa-images fa-3x mb-3 opacity-50"}),r.jsx("p",{className:"mb-1",children:"No hay imágenes en la galería"}),r.jsx("small",{children:'Arrastra archivos aquí o haz clic en "Agregar Imagen"'})]})]}),x.has("services","pdf")&&r.jsxs("div",{className:"mb-4",children:[r.jsxs("label",{className:"form-label fw-semibold text-dark mb-3",children:[r.jsx("i",{className:"fas fa-file-pdf me-2 text-danger"}),"Archivos PDF (Manuales / Catálogos)",O.length>0&&r.jsx("span",{className:"badge bg-danger ms-2",children:O.length})]}),r.jsx("input",{ref:L,type:"file",multiple:!0,accept:".pdf",hidden:!0,onChange:e=>{const a=Array.from(e.target.files).map((e,a)=>({file:e,name:e.name,order:O.length+a}));G([...O,...a])}}),r.jsx("div",{className:"list-group mb-3",children:O.map((e,a)=>r.jsxs("div",{draggable:!0,onDragStart:e=>((e,a)=>{Z(a)})(0,a),onDragEnd:ee,onDragOver:ae,onDrop:e=>((e,a)=>{if(e.preventDefault(),null===Y||Y===a)return;const s=[...O],[r]=s.splice(Y,1);s.splice(a,0,r),G(s.map((e,a)=>({...e,order:a}))),Z(null)})(e,a),className:"list-group-item d-flex align-items-center justify-content-between",style:{cursor:"grab",opacity:Y===a?.5:1,backgroundColor:Y===a?"#f8f9fa":"white",transition:"all 0.2s ease"},children:[r.jsxs("div",{className:"d-flex align-items-center flex-grow-1",style:{minWidth:0},children:[r.jsx("span",{className:"badge bg-danger me-3",style:{minWidth:"28px"},children:a+1}),r.jsx("i",{className:"fas fa-grip-vertical text-muted me-3"}),r.jsx("i",{className:"fas fa-file-pdf text-danger me-2"}),r.jsx("span",{className:"text-truncate",style:{maxWidth:"250px"},children:e.name})]}),r.jsxs("div",{className:"d-flex gap-2 flex-shrink-0",children:[!e.file&&e.path&&r.jsx("a",{href:`/storage/pdfs/service/${e.path}`,target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-outline-primary",children:r.jsx("i",{className:"fas fa-eye"})}),r.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:e=>((e,a)=>{e.preventDefault();const s=O[a];if(s.path){const a=document.createElement("input");a.type="hidden",a.name="deleted_pdfs[]",a.value=s.path,a.className="deleted-pdf-input",e.target.closest("form").appendChild(a)}G(O.filter((e,s)=>s!==a))})(e,a),children:r.jsx("i",{className:"fas fa-trash"})})]})]},a))}),r.jsxs("button",{type:"button",className:"btn btn-outline-danger w-100",onClick:()=>L.current.click(),children:[r.jsx("i",{className:"fas fa-plus me-2"}),"Agregar PDFs"]})]}),x.has("services","linkvideo")&&r.jsxs("div",{className:"mb-3",children:[r.jsxs("label",{className:"form-label fw-semibold text-dark mb-3",children:[r.jsx("i",{className:"fas fa-video me-2 text-success"}),"Links de Videos",z.length>0&&r.jsx("span",{className:"badge bg-success ms-2",children:z.length})]}),r.jsx("div",{className:"list-group mb-3",children:z.map((e,a)=>r.jsxs("div",{draggable:!0,onDragStart:e=>((e,a)=>{re(a)})(0,a),onDragEnd:de,onDragOver:oe,onDrop:e=>((e,a)=>{if(e.preventDefault(),null===se||se===a)return;const s=[...z],[r]=s.splice(se,1);s.splice(a,0,r),P(s.map((e,a)=>({...e,order:a}))),re(null)})(e,a),className:"list-group-item d-flex align-items-center justify-content-between",style:{cursor:"grab",opacity:se===a?.5:1,backgroundColor:se===a?"#f8f9fa":"white",transition:"all 0.2s ease"},children:[r.jsxs("div",{className:"d-flex align-items-center flex-grow-1",style:{minWidth:0,overflow:"hidden"},children:[r.jsx("span",{className:"badge bg-success me-3 flex-shrink-0",style:{minWidth:"28px"},children:a+1}),r.jsx("i",{className:"fas fa-grip-vertical text-muted me-3 flex-shrink-0"}),r.jsx("i",{className:"fas fa-video text-success me-2 flex-shrink-0"}),r.jsx("span",{className:"small",style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"100%"},title:e.url,children:e.url})]}),r.jsxs("div",{className:"d-flex gap-2 flex-shrink-0 ms-2",children:[r.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-outline-primary",children:r.jsx("i",{className:"fas fa-external-link-alt"})}),r.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:e=>((e,a)=>{if(e.preventDefault(),z[a].id){const s=document.createElement("input");s.type="hidden",s.name="deleted_videos[]",s.value=a,s.className="deleted-video-input",e.target.closest("form").appendChild(s)}P(z.filter((e,s)=>s!==a))})(e,a),children:r.jsx("i",{className:"fas fa-trash"})})]})]},a))}),r.jsxs("div",{className:"input-group",children:[r.jsx("input",{ref:W,type:"url",className:"form-control",placeholder:"https://youtube.com/watch?v=..."}),r.jsxs("button",{type:"button",className:"btn btn-success",onClick:e=>{e.preventDefault();const a=W.current?.value;a&&a.trim()&&(P([...z,{url:a.trim(),order:z.length}]),W.current&&(W.current.value=""))},children:[r.jsx("i",{className:"fas fa-plus me-2"}),"Agregar"]})]})]})]})]})})]})}),r.jsx("div",{className:"tab-pane fade",id:"features",role:"tabpanel","aria-labelledby":"features-tab",children:r.jsxs("div",{className:"row g-3",children:[x.has("services","is_features")&&r.jsx("div",{className:""+(x.has("services","is_features")&&x.has("services","is_specifications")?"col-md-6":"col-12"),children:r.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[r.jsx("div",{className:"card-header",children:r.jsxs("h6",{className:"mb-0",children:[r.jsx("i",{className:"fas fa-list-ul me-2"}),"Características"]})}),r.jsxs("div",{className:"card-body",children:[0===H.length?r.jsxs("div",{className:"alert alert-info mb-0",children:[r.jsx("i",{className:"mdi mdi-information me-2"}),'No hay características agregadas. Haz clic en "Agregar" para comenzar.']}):H.map((e,a)=>r.jsx("div",{className:"card mb-3 border",children:r.jsxs("div",{className:"card-body",children:[r.jsxs("div",{className:"d-flex justify-content-between align-items-start mb-2",children:[r.jsxs("label",{className:"form-label mb-0",children:["Característica #",a+1]}),r.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>(e=>{J(H.filter((a,s)=>s!==e))})(a),children:r.jsx("i",{className:"mdi mdi-delete"})})]}),r.jsx("textarea",{className:"form-control",rows:"2",value:e.feature,onChange:e=>((e,a)=>{const s=[...H];s[e].feature=a,J(s)})(a,e.target.value),placeholder:"Ej: Atención personalizada 24/7"})]})},a)),r.jsxs("button",{type:"button",className:"btn btn-primary w-100",onClick:()=>{J([...H,{id:null,feature:""}])},children:[r.jsx("i",{className:"mdi mdi-plus me-1"})," Agregar Característica"]})]})]})}),x.has("services","is_specifications")&&r.jsx("div",{className:""+(x.has("services","is_features")&&x.has("services","is_specifications")?"col-md-6":"col-12"),children:r.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[r.jsx("div",{className:"card-header",children:r.jsxs("h6",{className:"mb-0",children:[r.jsx("i",{className:"fas fa-cogs me-2"}),"Especificaciones"]})}),r.jsxs("div",{className:"card-body",children:[0===q.length?r.jsxs("div",{className:"alert alert-info mb-0",children:[r.jsx("i",{className:"mdi mdi-information me-2"}),'No hay especificaciones agregadas. Haz clic en "Agregar" para comenzar.']}):q.map((e,a)=>r.jsx("div",{className:"card mb-3 border",children:r.jsxs("div",{className:"card-body",children:[r.jsxs("div",{className:"d-flex justify-content-between align-items-start mb-3",children:[r.jsxs("label",{className:"form-label mb-0",children:["Especificación #",a+1]}),r.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>(e=>{U(q.filter((a,s)=>s!==e))})(a),children:r.jsx("i",{className:"mdi mdi-delete"})})]}),r.jsxs("div",{className:"row g-3",children:[r.jsxs("div",{className:"col-md-12",children:[r.jsx("label",{className:"form-label",children:"Tipo"}),r.jsxs("select",{className:"form-select",value:e.type,onChange:e=>me(a,"type",e.target.value),children:[r.jsx("option",{value:"principal",children:"Principal"}),r.jsx("option",{value:"general",children:"General"})]})]}),r.jsxs("div",{className:"col-12",children:[r.jsx("label",{className:"form-label",children:"Título"}),r.jsx("input",{type:"text",className:"form-control",value:e.title,onChange:e=>me(a,"title",e.target.value),placeholder:"Ej: Certificaciones ISO"})]}),r.jsxs("div",{className:"col-12",children:[r.jsx("label",{className:"form-label",children:"Descripción"}),r.jsx("textarea",{className:"form-control",rows:"2",value:e.description,onChange:e=>me(a,"description",e.target.value),placeholder:"Descripción detallada..."})]})]})]})},a)),r.jsxs("button",{type:"button",className:"btn btn-primary w-100",onClick:()=>{U([...q,{id:null,type:"general",title:"",description:""}])},children:[r.jsx("i",{className:"mdi mdi-plus me-1"})," Agregar Especificación"]})]})]})}),x.has("services","description")&&r.jsx("div",{className:"col-12",children:r.jsxs("div",{className:"card border-0 shadow-sm",children:[r.jsx("div",{className:"card-header",children:r.jsxs("h6",{className:"mb-0",children:[r.jsx("i",{className:"fas fa-edit me-2"}),"Descripción Detallada"]})}),r.jsx("div",{className:"card-body",children:r.jsx(d,{eRef:D,label:"Descripción Completa"})})]})})]})})]})]})]})]})};g((e,a)=>{s.createRoot(e).render(r.jsx(l,{...a,title:"Servicios",children:r.jsx(N,{...a})}))});
