import{r as e,bB as t,bH as s,bI as a,bJ as l,bK as r,bC as i,bD as n,bE as c,bF as o,j as d,E as m,ag as x,ah as h,J as u,C as p,k as f,P as g,bG as b}from"./vendor-react-DD0uBW7s.js";import{N as j}from"./vendor-swiper-BQwfPLwm.js";import{I as w}from"./ItemsRest-BoLMrPFW.js";import{P as v}from"./ProductDetailHuaillys-CXxdsTN_.js";import{G as N}from"./General-ClVW7qxN.js";import"./BasicRest-BuuGWTMX.js";import"./GoogleSignInButton-BciphYP2.js";import"./BooleanLimit-q2Ad9fGY.js";import"./preload-helper-DAHR15QK.js";const y=({item:y,data:k,setCart:C,cart:_,generals:$,favorites:M,setFavorites:P})=>{const S=new w,[F,z]=e.useState({url:y?.image,type:"main"}),[q,I]=e.useState(1),[R,E]=e.useState([]),[H,B]=e.useState(!1),[U,D]=e.useState(!1),[O,A]=e.useState(null),G=e.useRef(null),K=e.useRef(null),L=e.useRef(null),[V,J]=e.useState(!1),[T,W]=e.useState("quote"),Q=N.whatsapp_advisors||[],{refs:X,floatingStyles:Y,context:Z}=t({open:V&&"quote"===T,onOpenChange:e=>{"quote"===T&&J(e)},placement:"bottom-start",middleware:[a(10),l({fallbackPlacements:["top-start","bottom-end","top-end"]}),r({padding:8})],whileElementsMounted:s}),{refs:ee,floatingStyles:te,context:se}=t({open:V&&"quote-mobile"===T,onOpenChange:e=>{"quote-mobile"===T&&J(e)},placement:"top-end",middleware:[a(10),l({fallbackPlacements:["top-start","bottom-end","bottom-start"]}),r({padding:8})],whileElementsMounted:s}),ae=i(Z),le=n(Z),re=c(Z),ie=i(se),ne=n(se),ce=c(se),{getReferenceProps:oe,getFloatingProps:de}=o([ae,le,re]),{getReferenceProps:me,getFloatingProps:xe}=o([ie,ne,ce]);e.useEffect(()=>{y?.id&&(he(y),ue(y))},[y]);const he=async e=>{try{const t={id:e?.id};await S.updateViews(t)}catch(t){}},ue=async e=>{try{const t={id:e?.id},s=await S.productsRelations(t);if(s){const e=s;E(Object.values(e))}}catch(t){}},pe=e=>e?`S/. ${parseFloat(e).toFixed(2)}`:"Consultar precio",fe=y?.price&&y?.final_price&&parseFloat(y.price)>parseFloat(y.final_price),ge=fe?Math.round((parseFloat(y.price)-parseFloat(y.final_price))/parseFloat(y.price)*100):0,be=[{url:y?.image,type:"main",alt:"Imagen principal"},...(y?.images||[]).filter((e,t,s)=>t===s.findIndex(t=>t.url===e.url)).map((e,t)=>({url:e.url,type:"gallery",index:t,alt:`Imagen ${t+1}`}))];return d.jsxs("div",{className:"bg-white min-h-screen font-paragraph",children:[d.jsxs("div",{className:"md:hidden",children:[d.jsx("div",{className:"sticky top-0 bg-white shadow-sm z-20",children:d.jsxs("div",{className:"flex items-center p-4 gap-4 border-b",children:[d.jsx("button",{onClick:()=>window.history.back(),className:"text-gray-600",children:d.jsx(m,{size:24})}),d.jsx("h1",{className:"text-lg font-bold flex-1 line-clamp-2 customtext-neutral-dark",children:y?.name})]})}),d.jsxs("div",{className:"p-4 ",children:[d.jsxs("div",{className:"relative aspect-square mb-4 rounded-2xl overflow-hidden shadow-lg bg-gray-100",children:[d.jsx(x,{modules:[j],navigation:{prevEl:K.current,nextEl:L.current},loop:be.length>1,onSwiper:e=>{G.current=e},className:"h-full",children:be.map((e,t)=>d.jsx(h,{children:d.jsx("div",{className:"w-full h-full flex items-center justify-center",children:d.jsx("img",{src:`/storage/images/item/${e.url||e}`,alt:e.alt,className:"w-full h-full object-cover",onError:e=>e.target.src="/api/cover/thumbnail/null"})})},t))}),be.length>1&&d.jsxs("div",{className:"absolute top-1/2 w-full flex justify-between px-2 transform -translate-y-1/2 z-10",children:[d.jsx("button",{ref:K,className:"w-8 h-8 flex items-center justify-center rounded-full bg-white/80 shadow-lg hover:scale-110 transition-transform",children:d.jsx(m,{className:"text-gray-800",size:20})}),d.jsx("button",{ref:L,className:"w-8 h-8 flex items-center justify-center rounded-full bg-white/80 shadow-lg hover:scale-110 transition-transform",children:d.jsx(u,{className:"text-gray-800",size:20})})]})]}),d.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-4 mb-4",children:[d.jsx("h2",{className:"text-4xl font-title  customtext-neutral-dark mb-2",children:y?.name}),d.jsx("div",{className:"prose max-w-none text-lg customtext-neutral-dark mb-4",dangerouslySetInnerHTML:{__html:y?.description}}),d.jsxs("div",{className:"flex justify-between items-start mb-4",children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-3xl font-bold customtext-primary",children:pe(y?.final_price||y?.price)}),fe&&d.jsx("div",{className:"flex items-center gap-2 mt-1",children:d.jsx("span",{className:"text-sm line-through text-gray-400",children:pe(y.price)})})]}),fe&&d.jsxs("div",{className:"bg-red-600 text-white px-3 py-1 rounded-full text-sm font-bold",children:["-",ge,"% OFF"]})]})]}),y?.specifications&&y.specifications.length>0&&d.jsxs("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden mb-4",children:[d.jsxs("button",{onClick:()=>D(!U),className:"w-full p-4 flex justify-between items-center border-b",children:[d.jsx("span",{className:"font-medium customtext-neutral-dark",children:"Detalle de producto"}),d.jsx(p,{className:"transform transition-transform "+(U?"rotate-180":"")})]}),U&&d.jsx("div",{className:"p-4",children:d.jsx("table",{className:"w-full text-sm",children:d.jsx("tbody",{children:y.specifications.map((e,t)=>d.jsxs("tr",{className:t%2==0?"bg-gray-50":"",children:[d.jsx("td",{className:"py-2 px-3 font-semibold customtext-neutral-dark",children:e.title}),d.jsx("td",{className:"py-2 px-3 text-gray-600",children:e.description||e.value})]},t))})})})]})]}),d.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t shadow-lg z-50 p-4",children:d.jsxs("div",{className:"flex gap-3 items-center",children:[d.jsxs("div",{className:"flex items-center bg-gray-50 rounded-xl border border-gray-200",children:[d.jsx("button",{onClick:()=>I(Math.max(1,q-1)),className:"w-10 h-10 flex items-center justify-center",disabled:q<=1,children:d.jsx(f,{size:16})}),d.jsx("div",{className:"w-12 h-10 flex items-center justify-center",children:d.jsx("span",{className:"font-bold",children:q})}),d.jsx("button",{onClick:()=>I(Math.min(10,q+1)),className:"w-10 h-10 flex items-center justify-center",disabled:q>=10,children:d.jsx(g,{size:16})})]}),d.jsxs("button",{ref:ee.setReference,...me(),onClick:e=>(e=>{if(e?.preventDefault(),e?.stopPropagation(),W("quote-mobile"),1===Q.length){const e=Q[0],t=encodeURIComponent(`Â¡Hola! Me gustarÃ­a hacer mi pedido de este producto:\n\nðŸ“¦ Producto: ${y?.name}\nðŸ”¢ SKU: ${y?.sku}\nðŸ“Š Cantidad: ${q}\n\nÂ¿PodrÃ­an enviarme mÃ¡s informaciÃ³n?`);window.open(`https://wa.me/${e.phone}?text=${t}`,"_blank")}else Q.length>1&&J(!V)})(e),className:"flex-1 bg-primary text-white py-3 rounded-full font-bold flex items-center justify-center gap-2 active:scale-95 transition-transform",children:[d.jsxs("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",width:"800px",height:"800px",viewBox:"0 0 32 32",version:"1.1",children:[d.jsx("title",{children:"whatsapp"}),d.jsx("path",{d:"M26.576 5.363c-2.69-2.69-6.406-4.354-10.511-4.354-8.209 0-14.865 6.655-14.865 14.865 0 2.732 0.737 5.291 2.022 7.491l-0.038-0.070-2.109 7.702 7.879-2.067c2.051 1.139 4.498 1.809 7.102 1.809h0.006c8.209-0.003 14.862-6.659 14.862-14.868 0-4.103-1.662-7.817-4.349-10.507l0 0zM16.062 28.228h-0.005c-0 0-0.001 0-0.001 0-2.319 0-4.489-0.64-6.342-1.753l0.056 0.031-0.451-0.267-4.675 1.227 1.247-4.559-0.294-0.467c-1.185-1.862-1.889-4.131-1.889-6.565 0-6.822 5.531-12.353 12.353-12.353s12.353 5.531 12.353 12.353c0 6.822-5.53 12.353-12.353 12.353h-0zM22.838 18.977c-0.371-0.186-2.197-1.083-2.537-1.208-0.341-0.124-0.589-0.185-0.837 0.187-0.246 0.371-0.958 1.207-1.175 1.455-0.216 0.249-0.434 0.279-0.805 0.094-1.15-0.466-2.138-1.087-2.997-1.852l0.010 0.009c-0.799-0.74-1.484-1.587-2.037-2.521l-0.028-0.052c-0.216-0.371-0.023-0.572 0.162-0.757 0.167-0.166 0.372-0.434 0.557-0.65 0.146-0.179 0.271-0.384 0.366-0.604l0.006-0.017c0.043-0.087 0.068-0.188 0.068-0.296 0-0.131-0.037-0.253-0.101-0.357l0.002 0.003c-0.094-0.186-0.836-2.014-1.145-2.758-0.302-0.724-0.609-0.625-0.836-0.637-0.216-0.010-0.464-0.012-0.712-0.012-0.395 0.010-0.746 0.188-0.988 0.463l-0.001 0.002c-0.802 0.761-1.3 1.834-1.3 3.023 0 0.026 0 0.053 0.001 0.079l-0-0.004c0.131 1.467 0.681 2.784 1.527 3.857l-0.012-0.015c1.604 2.379 3.742 4.282 6.251 5.564l0.094 0.043c0.548 0.248 1.25 0.513 1.968 0.74l0.149 0.041c0.442 0.14 0.951 0.221 1.479 0.221 0.303 0 0.601-0.027 0.889-0.078l-0.031 0.004c1.069-0.223 1.956-0.868 2.497-1.749l0.009-0.017c0.165-0.366 0.261-0.793 0.261-1.242 0-0.185-0.016-0.366-0.047-0.542l0.003 0.019c-0.092-0.155-0.34-0.247-0.712-0.434z"})]}),"Hacer mi pedido"]})]})})]}),d.jsx("div",{className:"hidden md:block max-w-7xl mx-auto px-4 py-16",children:d.jsxs("div",{className:"grid lg:grid-cols-2 gap-12",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"relative bg-white rounded-xl shadow-lg overflow-hidden",children:[d.jsx("div",{className:"aspect-square flex items-center justify-center ",children:d.jsx("img",{src:F.url?`/storage/images/item/${F.url}`:"/api/cover/thumbnail/null",alt:y?.name,className:"w-full h-full object-cover",onError:e=>{e.target.src="/api/cover/thumbnail/null"}})}),fe&&d.jsxs("div",{className:"absolute top-4 right-4 bg-red-600 text-white px-4 py-2 rounded-full font-bold text-lg shadow-lg",children:["-",ge,"% OFF"]})]}),be.length>1&&d.jsx("div",{className:"grid grid-cols-5 gap-3",children:be.map((e,t)=>d.jsx("button",{onClick:()=>z(e),className:"aspect-square bg-white rounded-lg overflow-hidden border-2 transition-all hover:border-primary "+(F.url===e.url?"border-primary scale-105":"border-gray-200"),children:d.jsx("img",{src:`/storage/images/item/${e.url}`,alt:e.alt,className:"w-full h-full object-cover ",onError:e=>{e.target.src="/api/cover/thumbnail/null"}})},t))})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsx("div",{children:d.jsx("h1",{className:"text-3xl lg:text-4xl xl:text-5xl font-title font-bold customtext-neutral-dark mb-4",children:y?.name})}),d.jsx("div",{className:"prose prose-lg max-w-none customtext-neutral-dark",dangerouslySetInnerHTML:{__html:y?.description||y?.summary}}),d.jsxs("div",{className:"",children:[fe&&d.jsxs("div",{className:"text-base customtext-neutral-dark font-semibold mb-2",children:["Precio: ",d.jsx("span",{className:"line-through",children:pe(y.price)})]}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"text-4xl lg:text-5xl font-bold customtext-primary",children:pe(y?.final_price||y?.price)}),fe&&d.jsxs("div",{className:"bg-red-600 text-white px-4 py-2 rounded-full text-lg font-bold",children:["-",ge,"%"]})]})]}),y?.specifications&&y.specifications.length>0&&d.jsxs("div",{className:"bg-secondary rounded-xl p-6",children:[d.jsx("h3",{className:"font-bold text-xl customtext-neutral-dark mb-4",children:"Detalle de producto"}),d.jsx("div",{className:"space-y-2",children:y.specifications.slice(0,5).map((e,t)=>d.jsxs("div",{className:"flex items-start gap-3 text-sm",children:[d.jsx("div",{className:"min-w-2 min-h-2 max-w-2 max-h-2 rounded-full bg-primary mt-2"}),d.jsxs("div",{children:[d.jsxs("span",{className:"font-bold customtext-neutral-dark",children:[e.title,": "]}),d.jsx("span",{className:"customtext-neutral-light",children:e.description||e.value})]})]},t))}),y.specifications.length>5&&d.jsxs("button",{onClick:()=>D(!U),className:"mt-4 customtext-primary font-semibold hover:underline flex items-center gap-2",children:[U?"Ver menos":"Ver todas las especificaciones",d.jsx(p,{className:"transform transition-transform "+(U?"rotate-180":"")})]})]}),d.jsx("div",{className:"space-y-4",children:d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("span",{className:"font-bold customtext-neutral-dark text-lg",children:"Cantidad:"}),d.jsxs("div",{className:"flex items-center bg-gray-50 rounded-xl border-2 border-gray-200 p-1",children:[d.jsx("button",{onClick:()=>I(Math.max(1,q-1)),className:"w-12 h-12 flex items-center justify-center rounded-lg hover:bg-white transition-colors",disabled:q<=1,children:d.jsx(f,{className:"customtext-neutral-dark",size:20})}),d.jsx("div",{className:"w-16 h-12 flex items-center justify-center",children:d.jsx("span",{className:"customtext-neutral-dark font-bold text-xl",children:q})}),d.jsx("button",{onClick:()=>I(Math.min(10,q+1)),className:"w-12 h-12 flex items-center justify-center rounded-lg hover:bg-white transition-colors",disabled:q>=10,children:d.jsx(g,{className:"customtext-neutral-dark",size:20})})]}),d.jsx("span",{className:"text-sm text-gray-500",children:"MÃ¡ximo 10 unidades"})]})}),d.jsxs("button",{ref:X.setReference,...oe(),onClick:e=>(e=>{if(e?.preventDefault(),e?.stopPropagation(),W("quote"),1===Q.length){const e=Q[0],t=encodeURIComponent(`Â¡Hola! Me gustarÃ­a hacer mi pedido de este producto:\n\nðŸ“¦ Producto: ${y?.name}\nðŸ”¢ SKU: ${y?.sku}\nðŸ“Š Cantidad: ${q}\n\nÂ¿PodrÃ­an enviarme mÃ¡s informaciÃ³n?`);window.open(`https://wa.me/${e.phone}?text=${t}`,"_blank")}else Q.length>1&&J(!V)})(e),className:"w-full bg-primary text-white py-4 px-6 rounded-full font-bold text-lg flex items-center justify-center gap-3 hover:scale-105 transition-all shadow-lg hover:shadow-xl",children:[d.jsxs("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",width:"800px",height:"800px",viewBox:"0 0 32 32",version:"1.1",children:[d.jsx("title",{children:"whatsapp"}),d.jsx("path",{d:"M26.576 5.363c-2.69-2.69-6.406-4.354-10.511-4.354-8.209 0-14.865 6.655-14.865 14.865 0 2.732 0.737 5.291 2.022 7.491l-0.038-0.070-2.109 7.702 7.879-2.067c2.051 1.139 4.498 1.809 7.102 1.809h0.006c8.209-0.003 14.862-6.659 14.862-14.868 0-4.103-1.662-7.817-4.349-10.507l0 0zM16.062 28.228h-0.005c-0 0-0.001 0-0.001 0-2.319 0-4.489-0.64-6.342-1.753l0.056 0.031-0.451-0.267-4.675 1.227 1.247-4.559-0.294-0.467c-1.185-1.862-1.889-4.131-1.889-6.565 0-6.822 5.531-12.353 12.353-12.353s12.353 5.531 12.353 12.353c0 6.822-5.53 12.353-12.353 12.353h-0zM22.838 18.977c-0.371-0.186-2.197-1.083-2.537-1.208-0.341-0.124-0.589-0.185-0.837 0.187-0.246 0.371-0.958 1.207-1.175 1.455-0.216 0.249-0.434 0.279-0.805 0.094-1.15-0.466-2.138-1.087-2.997-1.852l0.010 0.009c-0.799-0.74-1.484-1.587-2.037-2.521l-0.028-0.052c-0.216-0.371-0.023-0.572 0.162-0.757 0.167-0.166 0.372-0.434 0.557-0.65 0.146-0.179 0.271-0.384 0.366-0.604l0.006-0.017c0.043-0.087 0.068-0.188 0.068-0.296 0-0.131-0.037-0.253-0.101-0.357l0.002 0.003c-0.094-0.186-0.836-2.014-1.145-2.758-0.302-0.724-0.609-0.625-0.836-0.637-0.216-0.010-0.464-0.012-0.712-0.012-0.395 0.010-0.746 0.188-0.988 0.463l-0.001 0.002c-0.802 0.761-1.3 1.834-1.3 3.023 0 0.026 0 0.053 0.001 0.079l-0-0.004c0.131 1.467 0.681 2.784 1.527 3.857l-0.012-0.015c1.604 2.379 3.742 4.282 6.251 5.564l0.094 0.043c0.548 0.248 1.25 0.513 1.968 0.74l0.149 0.041c0.442 0.14 0.951 0.221 1.479 0.221 0.303 0 0.601-0.027 0.889-0.078l-0.031 0.004c1.069-0.223 1.956-0.868 2.497-1.749l0.009-0.017c0.165-0.366 0.261-0.793 0.261-1.242 0-0.185-0.016-0.366-0.047-0.542l0.003 0.019c-0.092-0.155-0.34-0.247-0.712-0.434z"})]}),"Hacer mi pedido"]})]})]})}),R&&R.length>0&&d.jsx("div",{className:"mt-12 ",children:d.jsx(v,{which:k?.product_type_list||"ProductInfiniteSlider",items:R,data:{title:k?.title_related,description:k?.description_related,link_catalog:`/catalogo?category=${y?.category?.slug}`,link_text:k?.link_text_related,button_text:k?.button_text_related},cart:_,setCart:C,setFavorites:P,favorites:M})}),V&&Q.length>1&&d.jsx(b,{context:"quote-mobile"===T?se:Z,modal:!1,children:d.jsxs("div",{ref:"quote-mobile"===T?ee.setFloating:X.setFloating,style:"quote-mobile"===T?te:Y,..."quote-mobile"===T?xe():de(),className:"bg-white rounded-2xl shadow-2xl overflow-hidden border border-gray-100 z-[1000]",children:[d.jsxs("div",{className:"bg-primary p-4 text-white",children:[d.jsx("h3",{className:"font-bold text-base",children:"Elige un asesor"}),d.jsx("p",{className:"text-xs text-white mt-1",children:"Â¿Con quiÃ©n quieres hacer tu pedido?"})]}),d.jsx("div",{className:"max-h-[400px] overflow-y-auto",style:{minWidth:"280px",maxWidth:"320px"},children:Q.map((e,t)=>d.jsxs("button",{onClick:()=>(e=>{const t=encodeURIComponent(`Â¡Hola! Me gustarÃ­a hacer mi pedido de este producto:\n\nðŸ“¦ Producto: ${y?.name}\nðŸ”¢ SKU: ${y?.sku}\nðŸ“Š Cantidad: ${q}\n\nÂ¿PodrÃ­an enviarme mÃ¡s informaciÃ³n?`);window.open(`https://wa.me/${e.phone}?text=${t}`,"_blank"),J(!1)})(e),className:"w-full flex items-center gap-3 p-3 hover:bg-gray-50 transition-colors border-b border-gray-100 last:border-b-0 text-left",children:[d.jsx("div",{className:"flex-shrink-0",children:d.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden border-2 border-primary",children:e.photo?d.jsx("img",{src:`/assets/resources/${e.photo}`,alt:e.name,className:"w-full h-full object-cover",onError:e=>{e.target.src="/assets/img/placeholder-user.png"}}):d.jsx("div",{className:"w-full h-full bg-gradient-to-br from-green-400 to-green-600 flex items-center justify-center text-white text-lg font-bold",children:e.name?.charAt(0).toUpperCase()})})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"font-semibold text-gray-900 text-sm truncate",children:e.name}),d.jsx("p",{className:"text-xs text-gray-500 truncate",children:e.position||"Asesor"})]}),d.jsx("div",{className:"flex-shrink-0",children:d.jsx("svg",{className:"w-5 h-5 text-green-500",fill:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.892 3.386"})})})]},t))})]})})]})};export{y as default};
