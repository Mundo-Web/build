var e=Object.defineProperty,a=(a,r,s)=>((a,r,s)=>r in a?e(a,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[r]=s)(a,"symbol"!=typeof r?r+"":r,s);import{c as r,j as s,r as i}from"./vendor-react-CWR92fp6.js";import{B as t}from"./Base-720R7P2J.js";import{S as o}from"./SwitchFormGroup-q2bBVR0I.js";import{T as c}from"./TextareaFormGroup-iyYZXTSi.js";import{S as n}from"./CartKuchara-Dv4IzV1I.js";import{B as l}from"./BasicRest-Bgh-G8ac.js";import{I as d}from"./ImageFormGroup-C_R6CttV.js";import{I as m}from"./InputFormGroup-nxjFOPEg.js";import{S as u}from"./SelectAPIFormGroup-BR4MYKax.js";import{M as p}from"./Modal-BDEftn0t.js";import{T as g}from"./Table-ZhWgDs5U.js";import{D as f}from"./DxButton-C6FT_beP.js";import{C as h,F as j}from"./CreateReactScript-DEkx_UD4.js";import{R as v}from"./ReactAppend-BcjZMe63.js";import{S as x}from"./SetSelectValue-DCHQOIKz.js";import"./vendor-swiper-T7yreVnW.js";import"./Global-BAGAPG-V.js";import"./TippyButton-BozxD_uD.js";import"./Logout-D1lX4Eka.js";import"./MenuItemContainer-BN3ovvaX.js";import"./Menu-BoHY91ba.js";import"./GoogleSignInButton-DPrMhoxG.js";import"./BooleanLimit-q2Ad9fGY.js";import"./General-ClVW7qxN.js";import"./LaravelSession-ByQnaUD3.js";const b=new class extends l{constructor(){super(...arguments),a(this,"path","admin/service-subcategories"),a(this,"hasFiles",!0)}},w=()=>{const e=i.useRef(),a=i.useRef(),r=i.useRef(),t=i.useRef(),l=i.useRef(),h=i.useRef(),w=i.useRef(),[y,F]=i.useState(!1),N=e=>{F(!!e?.id),r.current.value=e?.id??"",x(t.current,e?.category?.id,e?.category?.name),l.current.value=e?.name??"",h.current&&(h.current.value=e?.description??""),w.current&&w.image&&(w.image.src=e?.image?`/storage/images/service_sub_category/${e.image}`:"",w.current.value=null,w.resetDeleteFlag&&w.resetDeleteFlag()),$(a.current).modal("show")};return s.jsxs(s.Fragment,{children:[s.jsx(g,{gridRef:e,title:"Sub Categorías de Servicios",rest:b,toolBar:a=>{a.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(e.current).dxDataGrid("instance").refresh()}}),a.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Nuevo registro",hint:"Nuevo registro",onClick:()=>N()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"category.name",caption:"Categoría"},{dataField:"name",caption:"Sub Categoría"},j.has("service_sub_categories","description")&&{dataField:"description",caption:"Descripción",width:"50%"},j.has("service_sub_categories","image")&&{dataField:"image",caption:"Imagen",width:"90px",allowFiltering:!1,cellTemplate:(e,{data:a})=>{v(e,s.jsx("img",{src:`/storage/images/service_sub_category/${a.image}`,style:{width:"80px",height:"48px",objectFit:"cover",objectPosition:"center",borderRadius:"4px"},onError:e=>e.target.src="/api/cover/thumbnail/null"}))}},j.has("service_sub_categories","featured")&&{dataField:"featured",caption:"Destacado",dataType:"boolean",cellTemplate:(a,{data:r})=>{$(a).empty(),v(a,s.jsx(o,{checked:1==r.featured,onChange:()=>(async({id:a,value:r})=>{await b.boolean({id:a,field:"featured",value:r})&&$(e.current).dxDataGrid("instance").refresh()})({id:r.id,value:!r.featured})}))}},{dataField:"visible",caption:"Visible",dataType:"boolean",cellTemplate:(a,{data:r})=>{$(a).empty(),v(a,s.jsx(o,{checked:1==r.visible,onChange:()=>(async({id:a,value:r})=>{await b.boolean({id:a,field:"visible",value:r})&&$(e.current).dxDataGrid("instance").refresh()})({id:r.id,value:!r.visible})}))}},{caption:"Acciones",cellTemplate:(a,{data:r})=>{a.css("text-overflow","unset"),a.append(f({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>N(r)})),a.append(f({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>(async a=>{const{isConfirmed:r}=await n.fire({title:"Eliminar registro",text:"¿Estas seguro de eliminar este registro?",icon:"warning",showCancelButton:!0,confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"});if(!r)return;await b.delete(a)&&$(e.current).dxDataGrid("instance").refresh()})(r.id)}))},allowFiltering:!1,allowExporting:!1}]}),s.jsxs(p,{modalRef:a,title:y?"Editar sub categoría de servicio":"Agregar sub categoría de servicio",onSubmit:async s=>{s.preventDefault();const i={id:r.current.value||void 0,service_category_id:t.current.value,name:l.current.value};h.current&&(i.description=h.current.value);const o=new FormData;for(const e in i)o.append(e,i[e]);if(w.current){const e=w.current.files[0];e&&o.append("image",e),w.getDeleteFlag&&w.getDeleteFlag()&&o.append("image_delete","DELETE")}await b.save(o)&&(w.current&&w.resetDeleteFlag&&w.resetDeleteFlag(),$(e.current).dxDataGrid("instance").refresh(),$(a.current).modal("hide"))},size:"lg",children:[s.jsx("input",{ref:r,type:"hidden"}),s.jsx("div",{id:"modal-container",children:s.jsxs("div",{className:"row g-3",children:[s.jsx("div",{className:"col-12",children:s.jsxs("div",{className:"card border-0 shadow-sm",children:[s.jsx("div",{className:"card-header bg-light",children:s.jsxs("h6",{className:"mb-0",children:[s.jsx("i",{className:"fas fa-info-circle me-2 text-primary"}),"Información Básica"]})}),s.jsx("div",{className:"card-body",children:s.jsxs("div",{className:"row",children:[s.jsx("div",{className:"col-12",children:s.jsx(u,{eRef:t,label:"Categoría Principal",searchAPI:"/api/admin/service-categories/paginate",searchBy:"name",required:!0,dropdownParent:"#modal-container"})}),s.jsx("div",{className:"col-12",children:s.jsx(m,{eRef:l,label:"Nombre de la Subcategoría",placeholder:"Ej: Manga Gástrica",required:!0})}),j.has("service_sub_categories","description")&&s.jsx("div",{className:"col-12",children:s.jsx(c,{eRef:h,label:"Descripción",rows:4,placeholder:"Descripción detallada de la subcategoría..."})})]})})]})}),j.has("service_sub_categories","image")&&s.jsx("div",{className:"col-12",children:s.jsxs("div",{className:"card border-0 shadow-sm",children:[s.jsx("div",{className:"card-header bg-light",children:s.jsxs("h6",{className:"mb-0",children:[s.jsx("i",{className:"fas fa-images me-2 text-success"}),"Multimedia"]})}),s.jsx("div",{className:"card-body",children:s.jsx("div",{className:"row g-3",children:s.jsxs("div",{className:"col-md-12",children:[s.jsx(d,{eRef:w,name:"image",label:"Imagen de la Subcategoría",col:"col-12",aspect:16/9}),s.jsxs("small",{className:"text-muted",children:[s.jsx("i",{className:"fas fa-info-circle me-1"}),"Recomendado: 1600x900px (proporción 16:9)"]})]})})})]})})]})})]})]})};h((e,a)=>{r.createRoot(e).render(s.jsx(t,{...a,title:"Sub Categorías de Servicios",children:s.jsx(w,{...a})}))});
