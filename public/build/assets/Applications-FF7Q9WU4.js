import{j as i}from"./AboutSimple-Cf8x2fCZ.js";import{r as o}from"./index-BOnQTV8N.js";import{c as k}from"./ReactAppend-QR5TrZfj.js";import{B as E}from"./Base-BBEfqqc-.js";import{A as y}from"./ApplicationsRest-CgWp9Tlw.js";import{T as C}from"./Table-hR1LHIgy.js";import{M as T}from"./Modal-xDw9ufjg.js";import{I as b}from"./ImageFormGroup-40MuGzez.js";import{I}from"./InputFormGroup-iZIO11ZN.js";import{T as _}from"./TextareaFormGroup-CliirJM1.js";import{S as j}from"./SwitchFormGroup-DXN0cwVk.js";import{D as v}from"./DxButton-DV0H-ZcL.js";import{C as S,F as l}from"./CreateReactScript-d60iGIqA.js";import{R as d}from"./ReactAppend-Vm5G2nof.js";import{S as G}from"./CartKuchara-D9l7c7at.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./index-B6ujFmsw.js";import"./Global-Bz6gVLc5.js";import"./tippy-react.esm-DmkRJDEW.js";import"./index-pSueRYGM.js";/* empty css              */import"./Logout-BpuTJ_83.js";import"./main-B6F2O9-U.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./MenuItemContainer-DcxtOi47.js";import"./index.esm-C48oHfFw.js";import"./index-ngrFHoWO.js";import"./CanAccess-D2C6GWbm.js";import"./BasicRest-BML1C-ua.js";import"./CardProductKatya-ncpmQ0JU.js";import"./BooleanLimit-D-OsQsek.js";/* empty css               */import"./General-CE1RDd44.js";import"./LaravelSession-Dz9cpV3l.js";const p=new y,A=()=>{const n=o.useRef(),m=o.useRef(),u=o.useRef(),f=o.useRef(),s=o.useRef(),r=o.useRef(),g=o.useRef(),[F,h]=o.useState(!1),x=e=>{e!=null&&e.id?h(!0):h(!1),s.current&&s.resetDeleteFlag&&s.resetDeleteFlag(),r.current&&r.resetDeleteFlag&&r.resetDeleteFlag(),u.current.value=(e==null?void 0:e.id)??"",f.current.value=(e==null?void 0:e.name)??"",g.current.value=(e==null?void 0:e.description)??"",s.current&&s.image&&(s.image.src=e!=null&&e.image?`/storage/images/application/${e.image}`:"",s.current.value=null),r.current&&r.image&&(r.image.src=e!=null&&e.background_image?`/storage/images/application/${e.background_image}`:"",r.current.value=null),$(m.current).modal("show")},w=async e=>{e.preventDefault();const a={id:u.current.value||void 0,name:f.current.value,description:g.current.value},t=new FormData;for(const c in a)t.append(c,a[c]);if(s.current){const c=s.current.files[0];c&&t.append("image",c),s.getDeleteFlag&&s.getDeleteFlag()&&t.append("image_delete","DELETE")}if(r.current){const c=r.current.files[0];c&&t.append("background_image",c),r.getDeleteFlag&&r.getDeleteFlag()&&t.append("background_image_delete","DELETE")}await p.save(t)&&(s.current&&s.resetDeleteFlag&&s.resetDeleteFlag(),r.current&&r.resetDeleteFlag&&r.resetDeleteFlag(),$(n.current).dxDataGrid("instance").refresh(),$(m.current).modal("hide"))},D=async({id:e,value:a})=>{await p.boolean({id:e,field:"visible",value:a})&&$(n.current).dxDataGrid("instance").refresh()},N=async({id:e,value:a})=>{await p.boolean({id:e,field:"status",value:a})&&$(n.current).dxDataGrid("instance").refresh()},R=async e=>{const{isConfirmed:a}=await G.fire({title:"Eliminar aplicación",text:"¿Estás seguro de eliminar esta aplicación?",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"});!a||!await p.delete(e)||$(n.current).dxDataGrid("instance").refresh()};return i.jsxs(i.Fragment,{children:[i.jsx(C,{gridRef:n,title:"Aplicaciones",rest:p,toolBar:e=>{e.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(n.current).dxDataGrid("instance").refresh()}}),e.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Nueva aplicación",hint:"Nueva aplicación",onClick:()=>x()}})},columns:[{dataField:"id",caption:"ID",visible:!1},l.has("applications","image")&&{dataField:"image",caption:"Imagen",width:"100px",allowFiltering:!1,cellTemplate:(e,{data:a})=>{a.image&&d(e,i.jsx("img",{src:`/storage/images/application/${a.image}`,alt:a.name,style:{width:"70px",height:"70px",objectFit:"cover",borderRadius:"8px"},onError:t=>t.target.src="/api/cover/thumbnail/null"}))}},l.has("applications","background_image")&&{dataField:"background_image",caption:"Imagen de Fondo",width:"80px",allowFiltering:!1,cellTemplate:(e,{data:a})=>{a.background_image&&d(e,i.jsx("img",{src:`/storage/images/application/${a.background_image}`,alt:a.name,style:{width:"70px",height:"70px",objectFit:"cover",borderRadius:"8px"},onError:t=>t.target.src="/api/cover/thumbnail/null"}))}},l.has("applications","name")&&{dataField:"name",caption:"Nombre",width:"25%"},l.has("applications","description")&&{dataField:"description",caption:"Descripción",width:"40%"},l.has("applications","slug")&&{dataField:"slug",caption:"Slug",width:"15%"},{dataField:"visible",caption:"Visible",dataType:"boolean",cellTemplate:(e,{data:a})=>{$(e).empty(),d(e,i.jsx(j,{checked:a.visible==1,onChange:()=>D({id:a.id,value:!a.visible})}))}},{dataField:"status",caption:"Activo",dataType:"boolean",cellTemplate:(e,{data:a})=>{$(e).empty(),d(e,i.jsx(j,{checked:a.status==1,onChange:()=>N({id:a.id,value:!a.status})}))}},{caption:"Acciones",cellTemplate:(e,{data:a})=>{e.css("text-overflow","unset"),e.append(v({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>x(a)})),e.append(v({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>R(a.id)}))},allowFiltering:!1,allowExporting:!1}].filter(e=>e!==!1)}),i.jsxs(T,{modalRef:m,title:F?"Editar aplicación":"Nueva aplicación",onSubmit:w,size:"lg",children:[i.jsx("input",{ref:u,type:"hidden"}),i.jsxs("div",{className:"row",id:"applications-container",children:[i.jsx("div",{className:"col-12 mb-4",children:i.jsxs("div",{className:"card border-0 shadow-sm",children:[i.jsx("div",{className:"card-header bg-light",children:i.jsxs("h6",{className:"mb-0",children:[i.jsx("i",{className:"fas fa-info-circle me-2 text-primary"}),"Información General"]})}),i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-12",children:i.jsx(I,{eRef:f,label:"Nombre de la Aplicación",placeholder:"Ej: Muebles, Construcción, Decoración",required:!0})}),i.jsx("div",{className:"col-12",children:i.jsx(_,{eRef:g,label:"Descripción",rows:3,placeholder:"Descripción detallada de la aplicación...",hidden:!l.has("applications","description")})})]})})]})}),(l.has("applications","image")||l.has("applications","background_image"))&&i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"card border-0 shadow-sm",children:[i.jsx("div",{className:"card-header bg-light",children:i.jsxs("h6",{className:"mb-0",children:[i.jsx("i",{className:"fas fa-images me-2 text-success"}),"Imágenes"]})}),i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row",children:[l.has("applications","image")&&i.jsxs("div",{className:"col-md-6",children:[i.jsx(b,{eRef:s,name:"image",label:"Icono / Imagen Principal",aspect:1}),i.jsxs("small",{className:"text-muted",children:[i.jsx("i",{className:"fas fa-info-circle me-1"}),"Formato cuadrado recomendado (ej: 512x512px)"]})]}),l.has("applications","background_image")&&i.jsxs("div",{className:"col-md-6",children:[i.jsx(b,{eRef:r,name:"background_image",label:"Imagen de Fondo",aspect:16/9}),i.jsxs("small",{className:"text-muted",children:[i.jsx("i",{className:"fas fa-info-circle me-1"}),"Recomendado: 1600x900px (proporción 16:9)"]})]})]})})]})})]})]})]})};S((n,m)=>{k.createRoot(n).render(i.jsx(E,{...m,title:"Aplicaciones",children:i.jsx(A,{...m})}))});
