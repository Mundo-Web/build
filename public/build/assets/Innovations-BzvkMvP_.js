var e=Object.defineProperty,a=(a,t,i)=>((a,t,i)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[t]=i)(a,"symbol"!=typeof t?t+"":t,i);import{c as t,j as i,r}from"./vendor-react-DB2gWWlz.js";import{B as n}from"./Base-Dz6-QovD.js";import{S as o}from"./SwitchFormGroup-CUJX8XRh.js";import{T as s}from"./TextareaFormGroup-UGEg0Hiq.js";import{S as l}from"./CartKuchara-C7ZIDpxE.js";import{B as c}from"./BasicRest-rcCccbSV.js";import{I as d}from"./ImageFormGroup-D2rnctCJ.js";import{M as m}from"./Modal-5lTGbKHj.js";import{T as p}from"./Table-CioVTN-i.js";import{D as u}from"./DxButton-C6FT_beP.js";import{C as f}from"./CreateReactScript-7rAqIEI0.js";import{R as g}from"./ReactAppend-DaATu3nB.js";import{I as v}from"./InputFormGroup-2FSTuTd0.js";import"./vendor-swiper-Cr_RrIb_.js";import"./Global-BAGAPG-V.js";import"./TippyButton-Crd57m29.js";import"./Logout-D009x2BU.js";import"./MenuItemContainer-C29lHQ3g.js";import"./Menu-OQAZllby.js";import"./GoogleSignInButton-Bo5d3xNo.js";import"./BooleanLimit-q2Ad9fGY.js";import"./General-ClVW7qxN.js";import"./LaravelSession-ByQnaUD3.js";const j=new class extends c{constructor(){super(...arguments),a(this,"path","admin/innovations"),a(this,"hasFiles",!0)}},h=()=>{const e=r.useRef(),a=r.useRef(),t=r.useRef(),n=r.useRef(),c=r.useRef(),f=r.useRef(),[h,x]=r.useState(!1),b=e=>{x(!!e?.id),t.current.value=e?.id??"",n.current.value=e?.name??"",c.current.value=e?.description??"",f.image.src=e?.image?`/storage/images/innovation/${e.image}`:"",f.current.value=null,f.resetDeleteFlag&&f.resetDeleteFlag(),$(a.current).modal("show")};return i.jsxs(i.Fragment,{children:[i.jsx(p,{gridRef:e,title:"Innovaciones",rest:j,toolBar:a=>{a.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(e.current).dxDataGrid("instance").refresh()}}),a.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Nuevo registro",hint:"Nuevo registro",onClick:()=>b()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"name",caption:"Innovación",width:"30%"},{dataField:"description",caption:"Descripción",width:"40%"},{dataField:"image",caption:"Imagen",width:"90px",allowFiltering:!1,cellTemplate:(e,{data:a})=>{g(e,i.jsx("img",{src:`/storage/images/innovation/${a.image}`,style:{width:"80px",height:"48px",objectFit:"cover",objectPosition:"center",borderRadius:"4px"},onError:e=>e.target.src="/api/cover/thumbnail/null"}))}},{dataField:"visible",caption:"Visible",dataType:"boolean",cellTemplate:(a,{data:t})=>{$(a).empty(),g(a,i.jsx(o,{checked:1==t.visible,onChange:()=>(async({id:a,value:t})=>{await j.boolean({id:a,field:"visible",value:t})&&$(e.current).dxDataGrid("instance").refresh()})({id:t.id,value:!t.visible})}))}},{dataField:"status",caption:"Estado",dataType:"boolean",cellTemplate:(a,{data:t})=>{$(a).empty(),g(a,i.jsx(o,{checked:1==t.status,onChange:()=>(async({id:a,value:t})=>{await j.boolean({id:a,field:"status",value:t})&&$(e.current).dxDataGrid("instance").refresh()})({id:t.id,value:!t.status})}))}},{caption:"Acciones",cellTemplate:(a,{data:t})=>{a.css("text-overflow","unset"),a.append(u({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>b(t)})),a.append(u({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>(async a=>{const{isConfirmed:t}=await l.fire({title:"Eliminar registro",text:"¿Estas seguro de eliminar este registro?",icon:"warning",showCancelButton:!0,confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"});if(!t)return;await j.delete(a.id)&&$(e.current).dxDataGrid("instance").refresh()})(t)}))},allowFiltering:!1,allowExporting:!1}]}),i.jsxs(m,{modalRef:a,title:h?"Editar innovación":"Agregar innovación",onSubmit:async i=>{i.preventDefault();const r={id:t.current.value||void 0,name:n.current.value,description:c.current.value},o=new FormData;for(const e in r)void 0!==r[e]&&o.append(e,r[e]);const s=f.current.files[0];s&&o.append("image",s),f.getDeleteFlag&&f.getDeleteFlag()&&o.append("image_delete","DELETE");for(let[e,a]of o.entries());await j.save(o)&&(f.resetDeleteFlag&&f.resetDeleteFlag(),$(e.current).dxDataGrid("instance").refresh(),$(a.current).modal("hide"))},children:[i.jsx("input",{ref:t,type:"hidden"}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(d,{eRef:f,name:"image",label:"Imagen",col:"col-12",aspect:16/9})}),i.jsxs("div",{className:"col-md-6",children:[i.jsx(v,{eRef:n,label:"Innovación",required:!0}),i.jsx(s,{eRef:c,label:"Descripción",rows:5})]})]})]})]})};f((e,a)=>{t.createRoot(e).render(i.jsx(n,{...a,title:"Innovaciones",children:i.jsx(h,{...a})}))});
