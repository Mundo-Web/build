import{r as e,j as t,t as o}from"./System-Bybt2Brn.js";import{P as r}from"./index-BufMXTY-.js";import{h as a}from"./hoist-non-react-statics.cjs-DChrExwb.js";import{I as n}from"./InputForm-EZKSO4Do.js";import{u as i,S as s}from"./SelectForm-VZyUjjW4.js";import{R as c}from"./index-Cmhjy_Bv.js";import{H as d}from"./HtmlContent-C-2ncp8S.js";import{X as l}from"./x-DWgXNABc.js";import{S as p}from"./send-CinIq0qs.js";import"./vendor-BiOv2i5T.js";import"./index-Bx5UHif0.js";import"./chevron-down-r_B4RFE6.js";import"./createLucideIcon-oahCLV50.js";import"./search--TD4pUuj.js";import"./check-BqyWwvbE.js";var h=["sitekey","onChange","theme","type","tabindex","onExpired","onErrored","size","stoken","grecaptcha","badge","hl","isolated"];function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},u.apply(this,arguments)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var x=function(t){var o,r;function a(){var e;return(e=t.call(this)||this).handleExpired=e.handleExpired.bind(m(e)),e.handleErrored=e.handleErrored.bind(m(e)),e.handleChange=e.handleChange.bind(m(e)),e.handleRecaptchaRef=e.handleRecaptchaRef.bind(m(e)),e}r=t,(o=a).prototype=Object.create(r.prototype),o.prototype.constructor=o,f(o,r);var n=a.prototype;return n.getCaptchaFunction=function(e){return this.props.grecaptcha?this.props.grecaptcha.enterprise?this.props.grecaptcha.enterprise[e]:this.props.grecaptcha[e]:null},n.getValue=function(){var e=this.getCaptchaFunction("getResponse");return e&&void 0!==this._widgetId?e(this._widgetId):null},n.getWidgetId=function(){return this.props.grecaptcha&&void 0!==this._widgetId?this._widgetId:null},n.execute=function(){var e=this.getCaptchaFunction("execute");if(e&&void 0!==this._widgetId)return e(this._widgetId);this._executeRequested=!0},n.executeAsync=function(){var e=this;return new Promise((function(t,o){e.executionResolve=t,e.executionReject=o,e.execute()}))},n.reset=function(){var e=this.getCaptchaFunction("reset");e&&void 0!==this._widgetId&&e(this._widgetId)},n.forceReset=function(){var e=this.getCaptchaFunction("reset");e&&e()},n.handleExpired=function(){this.props.onExpired?this.props.onExpired():this.handleChange(null)},n.handleErrored=function(){this.props.onErrored&&this.props.onErrored(),this.executionReject&&(this.executionReject(),delete this.executionResolve,delete this.executionReject)},n.handleChange=function(e){this.props.onChange&&this.props.onChange(e),this.executionResolve&&(this.executionResolve(e),delete this.executionReject,delete this.executionResolve)},n.explicitRender=function(){var e=this.getCaptchaFunction("render");if(e&&void 0===this._widgetId){var t=document.createElement("div");this._widgetId=e(t,{sitekey:this.props.sitekey,callback:this.handleChange,theme:this.props.theme,type:this.props.type,tabindex:this.props.tabindex,"expired-callback":this.handleExpired,"error-callback":this.handleErrored,size:this.props.size,stoken:this.props.stoken,hl:this.props.hl,badge:this.props.badge,isolated:this.props.isolated}),this.captcha.appendChild(t)}this._executeRequested&&this.props.grecaptcha&&void 0!==this._widgetId&&(this._executeRequested=!1,this.execute())},n.componentDidMount=function(){this.explicitRender()},n.componentDidUpdate=function(){this.explicitRender()},n.handleRecaptchaRef=function(e){this.captcha=e},n.render=function(){var t=this.props;t.sitekey,t.onChange,t.theme,t.type,t.tabindex,t.onExpired,t.onErrored,t.size,t.stoken,t.grecaptcha,t.badge,t.hl,t.isolated;var o=function(e,t){if(null==e)return{};var o,r,a={},n=Object.keys(e);for(r=0;r<n.length;r++)o=n[r],t.indexOf(o)>=0||(a[o]=e[o]);return a}(t,h);return e.createElement("div",u({},o,{ref:this.handleRecaptchaRef}))},a}(e.Component);function v(){return v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},v.apply(this,arguments)}x.displayName="ReCAPTCHA",x.propTypes={sitekey:r.string.isRequired,onChange:r.func,grecaptcha:r.object,theme:r.oneOf(["dark","light"]),type:r.oneOf(["image","audio"]),tabindex:r.number,onExpired:r.func,onErrored:r.func,size:r.oneOf(["compact","normal","invisible"]),stoken:r.string,hl:r.string,badge:r.oneOf(["bottomright","bottomleft","inline"]),isolated:r.bool},x.defaultProps={onChange:function(){},theme:"light",type:"image",tabindex:0,size:"normal",badge:"bottomright"};var b={},g=0;var j="onloadcallback";function y(){return"undefined"!=typeof window&&window.recaptchaOptions||{}}const N=(_=function(){var e=y(),t=e.useRecaptchaNet?"recaptcha.net":"www.google.com";return e.enterprise?"https://"+t+"/recaptcha/enterprise.js?onload="+j+"&render=explicit":"https://"+t+"/recaptcha/api.js?onload="+j+"&render=explicit"},w=(w={callbackName:j,globalName:"grecaptcha",attributes:y().nonce?{nonce:y().nonce}:{}})||{},function(t){var o=t.displayName||t.name||"Component",n=function(o){var r,a;function n(e,t){var r;return(r=o.call(this,e,t)||this).state={},r.__scriptURL="",r}a=o,(r=n).prototype=Object.create(a.prototype),r.prototype.constructor=r,r.__proto__=a;var i=n.prototype;return i.asyncScriptLoaderGetScriptLoaderID=function(){return this.__scriptLoaderID||(this.__scriptLoaderID="async-script-loader-"+g++),this.__scriptLoaderID},i.setupScriptURL=function(){return this.__scriptURL="function"==typeof _?_():_,this.__scriptURL},i.asyncScriptLoaderHandleLoad=function(e){var t=this;this.setState(e,(function(){return t.props.asyncScriptOnLoad&&t.props.asyncScriptOnLoad(t.state)}))},i.asyncScriptLoaderTriggerOnScriptLoaded=function(){var e=b[this.__scriptURL];if(!e||!e.loaded)throw new Error("Script is not loaded.");for(var t in e.observers)e.observers[t](e);delete window[w.callbackName]},i.componentDidMount=function(){var e=this,t=this.setupScriptURL(),o=this.asyncScriptLoaderGetScriptLoaderID(),r=w,a=r.globalName,n=r.callbackName,i=r.scriptId;if(a&&void 0!==window[a]&&(b[t]={loaded:!0,observers:{}}),b[t]){var s=b[t];return s&&(s.loaded||s.errored)?void this.asyncScriptLoaderHandleLoad(s):void(s.observers[o]=function(t){return e.asyncScriptLoaderHandleLoad(t)})}var c={};c[o]=function(t){return e.asyncScriptLoaderHandleLoad(t)},b[t]={loaded:!1,observers:c};var d=document.createElement("script");for(var l in d.src=t,d.async=!0,w.attributes)d.setAttribute(l,w.attributes[l]);i&&(d.id=i);var p=function(e){if(b[t]){var o=b[t].observers;for(var r in o)e(o[r])&&delete o[r]}};n&&"undefined"!=typeof window&&(window[n]=function(){return e.asyncScriptLoaderTriggerOnScriptLoaded()}),d.onload=function(){var e=b[t];e&&(e.loaded=!0,p((function(t){return!n&&(t(e),!0)})))},d.onerror=function(){var e=b[t];e&&(e.errored=!0,p((function(t){return t(e),!0})))},document.body.appendChild(d)},i.componentWillUnmount=function(){var e=this.__scriptURL;if(!0===w.removeOnUnmount)for(var t=document.getElementsByTagName("script"),o=0;o<t.length;o+=1)t[o].src.indexOf(e)>-1&&t[o].parentNode&&t[o].parentNode.removeChild(t[o]);var r=b[e];r&&(delete r.observers[this.asyncScriptLoaderGetScriptLoaderID()],!0===w.removeOnUnmount&&delete b[e])},i.render=function(){var o=w.globalName,r=this.props;r.asyncScriptOnLoad;var a=r.forwardedRef,n=function(e,t){if(null==e)return{};var o,r,a={},n=Object.keys(e);for(r=0;r<n.length;r++)o=n[r],t.indexOf(o)>=0||(a[o]=e[o]);return a}(r,["asyncScriptOnLoad","forwardedRef"]);return o&&"undefined"!=typeof window&&(n[o]=void 0!==window[o]?window[o]:void 0),n.ref=a,e.createElement(t,n)},n}(e.Component),i=e.forwardRef((function(t,o){return e.createElement(n,v({},t,{forwardedRef:o}))}));return i.displayName="AsyncScriptLoader("+o+")",i.propTypes={asyncScriptOnLoad:r.func},a(i,t)})(x);var _,w;function C({generals:r}){const a=e.useRef(null),[h,u]=e.useState(""),[m,f]=e.useState({nombre:"",tipo_documento:"RUC",numero_identidad:"",celular:"",correo_electronico:"",departamento:"",provincia:"",distrito:"",direccion:"",tipo_producto:"",monto_reclamado:"",descripcion_producto:"",tipo_reclamo:"",fecha_ocurrencia:"",numero_pedido:"",detalle_reclamo:"",acepta_terminos:!1}),x=e=>{const{name:t,value:o,type:r,checked:a}=e.target;f({...m,[t]:"checkbox"===r?a:o})},[v,b]=e.useState(""),[g,j]=e.useState(""),[y,_]=e.useState(""),[w,C]=e.useState([]),[S,R]=e.useState([]),[L,k]=e.useState([]);e.useEffect((()=>{const e=[...new Set(i.map((e=>e.departamento)))];C(e)}),[]),e.useEffect((()=>{if(v){const e=[...new Set(i.filter((e=>e.departamento===v)).map((e=>e.provincia)))];R(e),j(""),_(""),k([]),f((e=>({...e,departamento:v,provincia:"",distrito:""})))}}),[v]),e.useEffect((()=>{if(g){const e=i.filter((e=>e.departamento===v&&e.provincia===g)).map((e=>e.distrito));k(e),_(""),f((e=>({...e,provincia:g,distrito:""})))}}),[g]),e.useEffect((()=>{y&&f((e=>({...e,distrito:y})))}),[y]);const[E,O]=e.useState(!1),I={terms_conditions:"Términos y condiciones"},D=()=>O(null);return t.jsxs("div",{className:" w-full px-primary mx-auto pt-8 pb-16 font-font-general",children:[t.jsxs("div",{className:"max-w-7xl mx-auto  bg-white shadow-lg rounded-2xl customtext-neutral-dark p-8",children:[t.jsx("h1",{className:"text-2xl font-bold mb-10 text-center uppercase",children:"Libro de Reclamaciones"}),t.jsxs("form",{onSubmit:e=>{e.preventDefault();const r=a.current.getValue();if(!r)return void u("Por favor, verifica el reCAPTCHA.");const n={...m,recaptcha_token:r};fetch("/api/complaints",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((e=>e.json())).then((e=>{"success"===e.type?o.success("Solicitud enviada",{description:"Pronto nos comunicaremos contigo ¡Gracias!.",icon:t.jsx(p,{className:"h-5 w-5 text-green-500"}),duration:3e3,position:"bottom-center"}):o.error("Solicitud rechazada",{description:"Lo sentimos, no se envió su solicitud.",icon:t.jsx(p,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"})})).catch((e=>{o.error("Solicitud rechazada",{description:e||"Lo sentimos, no se envió su solicitud.",icon:t.jsx(p,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"})}))},children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Identificación del Consumidor"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsx("div",{className:"space-y-1",children:t.jsx(n,{type:"text",label:"Nombres",name:"nombre",value:m.nombre,onChange:x,placeholder:"Nombres"})}),t.jsx("div",{className:"space-y-1",children:t.jsx(s,{label:"Tipo de documento",options:[{value:"ruc",label:"RUC"},{value:"dni",label:"DNI"},{value:"ce",label:"CE"},{value:"pasaporte",label:"Pasaporte"}],placeholder:"Selecciona  documento",onChange:e=>{f((t=>({...t,tipo_documento:e})))}})}),t.jsx("div",{className:"space-y-1",children:t.jsx(n,{type:"text",label:"Número de identidad",name:"numero_identidad",value:m.numero_identidad,onChange:x,placeholder:"Número de identidad"})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[t.jsx("div",{className:"space-y-1",children:t.jsx(n,{type:"text",label:"Número de celular",name:"celular",value:m.celular,onChange:x,placeholder:"Número de celular"})}),t.jsx("div",{className:"space-y-1",children:t.jsx(n,{type:"text",label:" Correo Electrónico",name:"correo_electronico",value:m.correo_electronico,onChange:x,placeholder:" Correo Electrónico"})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[t.jsx(s,{label:"Departamento",options:w,placeholder:"Selecciona un Departamento",onChange:e=>{b(e),f((t=>({...t,departmento:e})))}}),t.jsx(s,{disabled:!v,label:"Provincia",options:S,placeholder:"Selecciona una Provincia",onChange:e=>{j(e),f((t=>({...t,provincia:e})))}}),t.jsx(s,{disabled:!g,label:"Distrito",options:L,placeholder:"Selecciona un Distrito",onChange:e=>{_(e),f((t=>({...t,distrito:e})))}})]}),t.jsx("div",{className:"mt-4",children:t.jsx("div",{className:"space-y-1",children:t.jsx(n,{type:"text",label:"Dirección",name:"direccion",value:m.direccion,onChange:x,placeholder:" Dirección"})})})]}),t.jsxs("div",{className:"mb-8",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Identificación del bien contratado"}),t.jsx("div",{className:"mb-4",children:t.jsx("div",{className:"relative mt-1",children:t.jsx(s,{label:" ¿Fue un producto o Servicio?",options:[{value:"producto",label:"Producto"},{value:"servicio",label:"Servicio"}],placeholder:"Selecciona...",onChange:e=>{f((t=>({...t,tipo_producto:e})))}})})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[t.jsx("div",{className:"space-y-1",children:t.jsx(n,{type:"number",label:" Monto reclamado",name:"monto_reclamado",value:m.monto_reclamado,onChange:x,placeholder:"Monto reclamado"})}),t.jsx("div",{className:"space-y-1",children:t.jsx(n,{type:"text",label:" Descripción de producto",name:"descripcion_producto",value:m.descripcion_producto,onChange:x,placeholder:"Nombre de producto y/o servicios, código(opcional)"})})]})]}),t.jsxs("div",{className:"mb-8",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Detalle del reclamo del pedido del consumidor"}),t.jsx("div",{className:"mb-4",children:t.jsx(s,{label:"¿Es un reclamo o queja?",options:[{value:"reclamo",label:"Reclamo"},{value:"queja",label:"Queja"}],placeholder:"Selecciona...",onChange:e=>{f((t=>({...t,tipo_reclamo:e})))}})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[t.jsx("div",{className:"space-y-1",children:t.jsx(n,{type:"date",label:"  Fecha de ocurrencia",name:"fecha_ocurrencia",value:m.fecha_ocurrencia,onChange:x,placeholder:"dd/mm/aaaa"})}),t.jsx("div",{className:"space-y-1",children:t.jsx(n,{type:"text",label:"Número de Pedido",name:"numero_pedido",value:m.numero_pedido,onChange:x,placeholder:"Número de pedido: #95825548"})})]}),t.jsx("div",{className:"mt-4",children:t.jsxs("div",{className:"space-y-1",children:[t.jsx("label",{className:"block text-sm mb-1 customtext-neutral-dark",children:"Detalle de reclamo o queja"}),t.jsx("textarea",{name:"detalle_reclamo",placeholder:"Detalle de reclamo",className:"w-full min-h-32  px-4 py-3 border customtext-neutral-dark  border-neutral-ligth rounded-xl focus:ring-0 focus:outline-0   transition-all duration-300",value:m.detalle_reclamo,onChange:x})]})})]}),t.jsx("div",{className:"mb-8",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx("input",{type:"checkbox",id:"terminos",name:"acepta_terminos",className:"mt-1 mr-2",checked:m.acepta_terminos,onChange:x}),t.jsxs("label",{htmlFor:"terminos",className:"text-sm",children:["Estoy de acuerdo con los"," ",t.jsx("a",{onClick:()=>O(0),className:"customtext-primary underline",children:"términos y condiciones"})]})]})}),t.jsxs("div",{className:"mb-8",children:[t.jsx(N,{ref:a,sitekey:"6LfAcfcqAAAAACc7tfKbaBFc1X5I9V4fewWoVf-9"}),h&&t.jsx("p",{className:"text-red-500 mt-2",children:h})]}),t.jsx("div",{children:t.jsx("button",{type:"submit",className:"bg-primary text-white px-6 py-3 font-medium rounded-lg",children:"Enviar a libro de reclamaciones"})})]})]}),Object.keys(I).map(((e,o)=>{var a,n;const i=I[e],s=null!=(n=null==(a=r.find((t=>t.correlative==e)))?void 0:a.description)?n:"";return t.jsxs(c,{isOpen:E===o,onRequestClose:D,contentLabel:i,className:"absolute left-1/2 -translate-x-1/2 bg-white p-6 rounded-xl shadow-lg w-[95%] max-w-4xl my-8",overlayClassName:"fixed inset-0 bg-black bg-opacity-50 z-50",children:[t.jsx("button",{onClick:D,className:"float-right text-red-500 hover:text-red-700 transition-all duration-300 ",children:t.jsx(l,{width:"2rem",strokeWidth:"4px"})}),t.jsx("h2",{className:"text-2xl font-bold mb-4",children:i}),t.jsx(d,{className:"prose",html:s})]},o)}))]})}export{C as default};
