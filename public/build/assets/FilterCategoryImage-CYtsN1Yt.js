import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as l,R as L}from"./index-BOnQTV8N.js";import"./ProductNavigation-C3qRptTo.js";import{I as J}from"./ItemsRest-Dp5IKigO.js";import{L as Q}from"./Loading-B-FwDSWi.js";import{N as W}from"./NoResult-DlL_OOrq.js";import{S as X}from"./SelectForm-BvLefn0w.js";import{C as w}from"./Number2Currency-D9Rjvh76.js";import"./ProductCard-D_AgkLlk.js";import{P as Y}from"./ProductCardSimple-CX4ZHZ1D.js";import{C as ee}from"./CardProductBananaLab-lxvVMwJd.js";import{C as N}from"./chevron-down-uIVDLcM-.js";import{F as se}from"./filter-BEzH_gaL.js";import{C as M}from"./chevron-left-JcR9Fe4w.js";import{C as R}from"./chevron-right-Cug7tVUE.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./HeaderSearch-DicFuFIN.js";import"./PolicyModal-C80IvD61.js";import"./index-B6ujFmsw.js";import"./index-Chjiymov.js";import"./CartItemRow-FwA1YhUV.js";import"./tippy-react.esm-DmkRJDEW.js";import"./index-pSueRYGM.js";import"./proxy-B0QLMKEh.js";import"./package-DBFPPBi1.js";import"./createLucideIcon-DfjclApS.js";import"./trash-2-DU7LB6-f.js";import"./minus-Db6MFKEO.js";import"./plus-CTIomuuF.js";import"./index-BZvh78jk.js";import"./main-B6F2O9-U.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./eye-ScgfreHn.js";import"./BasicRest-BML1C-ua.js";import"./CardProductKatya-ncpmQ0JU.js";import"./BooleanLimit-D-OsQsek.js";import"./search-BQ59Robe.js";import"./check-D5vaIe6v.js";import"./General-BmbBKdsB.js";import"./HeaderBananaLab-0tFT126_.js";/* empty css              */import"./shopping-bag-C59bLmNC.js";import"./x-fof_H3Vv.js";import"./shopping-cart-DLRnxGTD.js";import"./arrow-right-MB8dWH_Y.js";import"./heart-DG8R4_Y8.js";import"./circle-chevron-right-Cragr8lM.js";import"./circle-check-big-CYWUGR3Z.js";const te=new J,ts=({items:re,data:d,filteredData:A,cart:v,setCart:k})=>{const{collections:h,priceRanges:u}=A||{collections:[],priceRanges:[]},[P,E]=l.useState([]),[f,I]=l.useState([]),[m,z]=l.useState({collection:!0,marca:!0,precio:!0,categoria:!0,colores:!1}),[c,b]=l.useState({collection_id:[],category_id:[],brand_id:[],subcategory_id:[],price:null,name:null,sort:[{selector:"created_at",desc:!0}]}),[C,B]=l.useState([]),[K,_]=l.useState(!1),[r,O]=l.useState({currentPage:1,totalPages:1,totalItems:0,itemsPerPage:21,from:0,to:0}),V=s=>{const t=[];if(s.collection_id.length>0){const a=s.collection_id.map(i=>["collection_id","=",i]);t.push(["or",...a])}if(s.category_id.length>0){const a=s.category_id.map(i=>["category_id","=",i]);t.push(["or",...a])}if(s.subcategory_id.length>0){const a=s.subcategory_id.map(i=>["subcategory_id","=",i]);t.push(["and",...a])}if(s.brand_id.length>0){const a=s.brand_id.map(i=>["brand_id","=",i]);t.push(["or",...a])}return s.price&&t.push(["and",[["final_price",">=",s.price.min],"and",["final_price","<=",s.price.max]]]),s.name&&t.push(["name","contains",s.name]),t},$=async(s=1)=>{var t,a;_(!0);try{const n={filter:V(c),sort:c.sort,skip:(s-1)*r.itemsPerPage,take:r.itemsPerPage,requireTotalCount:!0},o=await te.paginate(n);o&&o.data&&(B(o.data),O({currentPage:s,totalPages:Math.ceil(o.totalCount/r.itemsPerPage),totalItems:o.totalCount,itemsPerPage:r.itemsPerPage,from:(s-1)*r.itemsPerPage+1,to:Math.min(s*r.itemsPerPage,o.totalCount)}),E(((t=o==null?void 0:o.summary)==null?void 0:t.brands)??[]),I(((a=o==null?void 0:o.summary)==null?void 0:a.categories)??[]))}catch(i){console.error("Error fetching products:",i)}finally{_(!1)}};l.useEffect(()=>{$(r.currentPage)},[c]),l.useEffect(()=>{const s=new URLSearchParams(window.location.search),t=s.get("category");if(t){const n=f.find(o=>o.slug===t);n&&b(o=>({...o,category_id:[n.id]}))}const a=s.get("collection");if(a){const n=h.find(o=>o.slug===a);n&&b(o=>({...o,collection_id:[n.id]}))}const i=s.get("search");i&&b(n=>({...n,name:i}))},[f,h]);const p=s=>{s>=1&&s<=r.totalPages&&$(s)},S=()=>{const s=[],t=r.totalPages,a=r.currentPage,i=2;for(let n=1;n<=t;n++)n===1||n===t||n>=a-i&&n<=a+i?s.push(n):(n===a-i-1||n===a+i+1)&&s.push("...");return s.filter((n,o,H)=>n!=="..."||H[o-1]!=="...")},j=(s,t)=>{b(a=>{if(s==="price")return{...a,price:a.price&&a.price.min===t.min&&a.price.max===t.max?null:t};const i=Array.isArray(a[s])?a[s]:[],n=i.includes(t)?i.filter(o=>o!==t):[...i,t];return{...a,[s]:n}})},y=s=>{z(t=>({...t,[s]:!t[s]}))},Z=[{value:"created_at:desc",label:"Más reciente"},{value:"created_at:asc",label:"Mas antiguo"},{value:"final_price:asc",label:"Precio: Menor a Mayor"},{value:"final_price:desc",label:"Precio: Mayor a Menor"},{value:"name:asc",label:"Nombre: A-Z"},{value:"name:desc",label:"Nombre: Z-A"}],[q,ae]=l.useState(""),[D,ie]=l.useState(""),[T,ne]=l.useState("");h==null||h.filter(s=>s.name.toLowerCase().includes(D.toLowerCase()));const x=f==null?void 0:f.filter(s=>s.name.toLowerCase().includes(q.toLowerCase()));P==null||P.filter(s=>s.name.toLowerCase().includes(T.toLowerCase()));const U=s=>{const[t,a]=s.split(":"),i=[{selector:t,desc:a==="desc"}];b(n=>({...n,sort:i}))},[F,g]=l.useState(!1),G=()=>e.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:()=>g(!1)}),e.jsx("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-2xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 w-full sm:align-middle sm:max-w-lg sm:w-full h-[80vh]",children:[e.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4 border-b sticky top-0 z-10",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-bold leading-6 text-gray-900",children:"Filtros"}),e.jsxs("button",{type:"button",className:"text-gray-400 hover:text-gray-500 focus:outline-none",onClick:()=>g(!1),children:[e.jsx("span",{className:"sr-only",children:"Cerrar"}),"✕"]})]})}),e.jsxs("div",{className:"bg-white px-4 pt-2 pb-4 sm:p-6 sm:pb-4 overflow-y-auto h-[calc(100%-60px)]",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>y("categoria"),className:"flex items-center justify-between w-full mb-4",children:[e.jsx("span",{className:"font-bold",children:"Categorías"}),e.jsx(N,{className:`h-5 w-5 transform transition-transform ${m.categoria?"":"-rotate-180"}`})]}),m.categoria&&e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"space-y-2",children:x==null?void 0:x.map(s=>{var a;const t=(a=c.category_id)==null?void 0:a.includes(s.id);return e.jsx("div",{className:`group py-2 rounded-md ${t?"bg-secondary":"bg-transparent"}`,children:e.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"h-4 hidden w-4 rounded border-gray-300",onChange:()=>j("category_id",s.id),checked:t}),e.jsx("span",{children:s.name}),e.jsx("img",{src:`/storage/images/category/${s.image}`,onError:i=>i.target.src="assets/img/noimage/no_imagen_circular.png",alt:s.name,className:"w-8 h-8 rounded-full object-cover",loading:"lazy"})]})},s.id)})})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>y("precio"),className:"flex items-center justify-between w-full mb-4",children:[e.jsx("span",{className:"font-medium",children:"Precio"}),e.jsx(N,{className:`h-5 w-5 transform transition-transform ${m.precio?"":"-rotate-180"}`})]}),m.precio&&e.jsx("div",{className:"space-y-3",children:u==null?void 0:u.map(s=>e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",name:"precio",className:"h-4 w-4 rounded border-gray-300",onChange:()=>j("price",s),checked:c.price&&c.price.min===s.min&&c.price.max===s.max}),e.jsx("span",{children:`${w()} ${s.min} - ${w()} ${s.max}`})]},`${s.min}-${s.max}`))})]})]}),e.jsx("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse sticky bottom-0 border-t",children:e.jsx("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-3 bg-primary text-white text-base font-medium hover:bg-primary-dark focus:outline-none sm:ml-3 sm:w-auto sm:text-sm",onClick:()=>g(!1),children:"Aplicar filtros"})})]})})]});return e.jsxs("section",{className:"p-[5%] mx-auto w-full",children:[F&&e.jsx(G,{}),e.jsxs("div",{className:"relative flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"hidden lg:block w-full sm:w-1/5 bg-white p-4 rounded-lg h-max",children:[e.jsx("div",{className:"sm:hidden flex justify-between items-center mb-4",children:e.jsx("button",{onClick:()=>g(!1),className:"customtext-primary hover:customtext-accent",children:"✕"})}),e.jsx("p",{className:"text-xl font-bold pb-4 mb-4 border-b",children:(d==null?void 0:d.title)||"Filtros"}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>y("categoria"),className:"flex items-center justify-between w-full mb-4",children:[e.jsx("span",{className:"font-bold",children:"Categorías"}),e.jsx(N,{className:`h-5 w-5 transform transition-transform ${m.categoria?"":"-rotate-180"}`})]}),m.categoria&&e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"space-y-2",children:x==null?void 0:x.map(s=>{var a;const t=(a=c.category_id)==null?void 0:a.includes(s.id);return e.jsx("div",{className:`group py-2 rounded-md ${t?"bg-secondary":"bg-transparent"}`,children:e.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"h-4 hidden w-4 rounded border-gray-300",onChange:()=>j("category_id",s.id),checked:t}),e.jsx("span",{children:s.name}),e.jsx("img",{src:`/storage/images/category/${s.image}`,onError:i=>i.target.src="/assets/img/noimage/no_imagen_circular.png",alt:s.name,className:"w-8 h-8 rounded-full object-cover",loading:"lazy"})]})},s.id)})})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>y("precio"),className:"flex items-center justify-between w-full mb-4",children:[e.jsx("span",{className:"font-medium",children:"Precio"}),e.jsx(N,{className:`h-5 w-5 transform transition-transform ${m.precio?"":"-rotate-180"}`})]}),m.precio&&e.jsx("div",{className:"space-y-3",children:u==null?void 0:u.map(s=>e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",name:"precio",className:"h-4 w-4 rounded border-gray-300",onChange:()=>j("price",s),checked:c.price&&c.price.min===s.min&&c.price.max===s.max}),e.jsx("span",{children:`${w()} ${s.min} - ${w()} ${s.max}`})]},`${s.min}-${s.max}`))})]})]}),e.jsxs("div",{className:"w-full sm:w-4/5 py-4",children:[e.jsxs("div",{className:"flex justify-between items-end mb-4 w-full",children:[e.jsxs("div",{className:"flex gap-4  items-start lg:items-center flex-col w-8/12 lg:w-auto lg:flex-row",children:[e.jsx("label",{className:"font-semibold text-sm w-[150px]",children:"Ordenar por"}),e.jsx(X,{options:Z,placeholder:"Recomendados",onChange:U,labelKey:"label",valueKey:"value",className:"border-primary rounded-full customtext-primary"})]}),e.jsx("div",{className:"lg:hidden flex items-end h-full mb-4",children:e.jsx("button",{onClick:()=>g(!F),className:" h-12 w-12 gap-2 bg-primary text-white flex items-center justify-center  rounded-full lg:hidden",children:e.jsx(se,{size:20})})}),e.jsx("div",{className:"customtext-primary font-semibold hidden lg:block",children:e.jsxs("div",{className:"flex justify-between items-center mb-4 w-full mt-8",children:[e.jsx("div",{className:"customtext-primary font-semibold",children:e.jsxs("nav",{className:"flex items-center gap-x-2 min-w-max",children:[e.jsx("button",{className:`p-4 inline-flex items-center ${r.currentPage===1?"opacity-50 cursor-not-allowed":""}`,onClick:()=>p(r.currentPage-1),disabled:r.currentPage===1,children:e.jsx(M,{})}),S().map((s,t)=>e.jsx(L.Fragment,{children:s==="..."?e.jsx("span",{className:"w-10 h-10 bg-transparent p-2 inline-flex items-center justify-center rounded-full",children:"..."}):e.jsx("button",{className:`w-10 h-10 p-2 inline-flex items-center justify-center rounded-full transition-all duration-300 
                              ${s===r.currentPage?"bg-primary text-white":"bg-transparent hover:text-white hover:bg-primary"}`,onClick:()=>p(s),children:s})},t)),e.jsx("button",{className:`p-4 inline-flex items-center ${r.currentPage===r.totalPages?"opacity-50 cursor-not-allowed":""}`,onClick:()=>p(r.currentPage+1),disabled:r.currentPage===r.totalPages,children:e.jsx(R,{})})]})}),e.jsx("div",{children:e.jsxs("p",{className:"font-semibold",children:[r.from," - ",r.to," de ",r.totalItems," Resultados"]})})]})})]}),K?e.jsx(Q,{}):e.jsx("div",{className:"flex items-center flex-wrap gap-y-2 lg:gap-y-3 transition-all duration-300 ease-in-out",children:Array.isArray(C)&&C.length>0?C.map(s=>(d==null?void 0:d.card)==="CardProductBananaLab"?e.jsx(ee,{product:s,widthClass:"lg:w-1/3",cart:v,setCart:k},s.id):e.jsx(Y,{product:s,widthClass:"lg:w-1/3",cart:v,setCart:k},s.id)):e.jsx(W,{})}),e.jsxs("div",{className:"flex justify-between items-center mb-4 w-full mt-8",children:[e.jsx("div",{className:"customtext-primary font-semibold",children:e.jsxs("nav",{className:"flex items-center gap-x-2 min-w-max",children:[e.jsx("button",{className:`p-4 inline-flex items-center ${r.currentPage===1?"opacity-50 cursor-not-allowed":""}`,onClick:()=>p(r.currentPage-1),disabled:r.currentPage===1,children:e.jsx(M,{})}),S().map((s,t)=>e.jsx(L.Fragment,{children:s==="..."?e.jsx("span",{className:"w-10 h-10 bg-transparent p-2 inline-flex items-center justify-center rounded-full",children:"..."}):e.jsx("button",{className:`w-10 h-10 p-2 inline-flex items-center justify-center rounded-full transition-all duration-300 
                          ${s===r.currentPage?"bg-primary text-white":"bg-transparent hover:text-white hover:bg-primary"}`,onClick:()=>p(s),children:s})},t)),e.jsx("button",{className:`p-4 inline-flex items-center ${r.currentPage===r.totalPages?"opacity-50 cursor-not-allowed":""}`,onClick:()=>p(r.currentPage+1),disabled:r.currentPage===r.totalPages,children:e.jsx(R,{})})]})}),e.jsx("div",{children:e.jsxs("p",{className:"font-semibold",children:[r.from," - ",r.to," de ",r.totalItems," Resultados"]})})]})]})]})]})};export{ts as default};
