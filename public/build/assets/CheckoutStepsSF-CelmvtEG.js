import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r}from"./index-BH53Isel.js";import{m}from"./main-BSEyQEJW.js";import"./server.browser-Bf4gQIc7.js";import"./CheckoutSteps-BUdl33kp.js";import{R as k}from"./PaymentModal-BB1JXzaZ.js";import"./index-CMHsc23u.js";import{G as j}from"./Global-ErywZRdd.js";import{i as R}from"./tippy-react.esm-BWiGTO87.js";import{N as o}from"./Number2Currency-e57Tgsuk.js";import{V as C}from"./VoucherUpload-PpTZJMw6.js";import{G as x}from"./General-BmbBKdsB.js";import{S}from"./SalesRest-CW542U3n.js";import{C as $}from"./chevron-up-D78jyEhP.js";import{C as U}from"./chevron-down-DS-mdh9v.js";import"./index-yBjzXJbu.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";import"./index-fNjTmf9T.js";import"./index-Chjiymov.js";import"./index-rimy3MAc.js";import"./filepond-plugin-image-preview-iK-nC-YG.js";import"./index-t--hEgTQ.js";import"./ProductCard-C2H10lUi.js";import"./BasicRest-DEv02zgs.js";import"./createLucideIcon-Cy5Ya80P.js";const D=new S;function ne({isOpen:a,onClose:d,onUpload:E,paymentMethod:b,cart:n,subTotal:u,igv:g,envio:y,totalFinal:N,request:p}){const[_,A]=r.useState(null),[l,h]=r.useState(!1),[c,v]=r.useState(""),w=async()=>{if(!l){if(!c){m.Notify.add({icon:"/assets/img/icon.svg",title:"Error al subir comprobante",body:"Por favor, sube tu comprobante de pago",type:"danger"});return}h(!0);try{const s={...p,payment_proof:c,details:JSON.stringify(p.cart.map(t=>({id:t.id,quantity:t.quantity})))},i=new FormData;Object.keys(s).forEach(t=>{i.append(t,s[t])});const f=await D.save(i);f&&(m.Local.delete(`${j.APP_CORRELATIVE}_cart`),location.href=`${location.origin}/cart?code=${f.code}`)}catch(s){console.error("Error al procesar el pago:"),m.Notify.add({icon:"/assets/img/icon.svg",title:"Ocurrió un error al procesar tu pago",body:s,type:"danger"})}finally{h(!1)}}};return r.useEffect(()=>(a?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[a]),e.jsx(k,{isOpen:a,onRequestClose:d,className:"absolute left-1/2 -translate-x-1/2 bg-[#f5f5f5] rounded-2xl shadow-lg w-[95%] max-w-lg top-1/2 -translate-y-1/2 overflow-hidden font-font-general",overlayClassName:"fixed inset-0 bg-black bg-opacity-50 z-50",ariaHideApp:!1,children:e.jsxs("div",{className:"py-6 px-10 flex flex-col gap-3 max-h-[90vh] md:max-h-[95vh] overflow-y-auto",children:[e.jsx("div",{className:"flex justify-center items-center z-40",children:e.jsx("a",{href:"/",className:"flex items-center gap-2",children:e.jsx("img",{src:`/assets/resources/logo.png?v=${crypto.randomUUID()}`,alt:j.APP_NAME,className:"h-14 object-contain object-center",onError:s=>{s.target.onerror=null,s.target.src="/assets/img/logo-bk.svg"}})})}),e.jsx("h2",{className:"text-xl 2xl:text-2xl font-bold customtext-primary text-center mt-3",children:x.get("checkout_dwallet_name")}),e.jsx("p",{className:"customtext-primary text-sm 2xl:text-base text-center",children:x.get("checkout_dwallet_description")}),e.jsx("div",{className:"w-full flex flex-row items-center justify-center my-1",children:e.jsx(R,{content:"Escanee codigo QR",children:e.jsx("img",{src:`/assets/resources/${x.get("checkout_dwallet_qr")}`,alt:x.get("checkout_dwallet_name"),className:"h-40 w-auto object-cover",onError:s=>{s.currentTarget.src="/assets/img/salafabulosa/logoyape.png"}})})}),e.jsxs("div",{className:"bg-[#EAE8E6] rounded-xl shadow-lg p-6 col-span-2 h-max font-font-general",children:[e.jsx("h3",{className:"text-xl 2xl:text-2xl font-semibold pb-6 customtext-neutral-dark",children:"Detalle de compras"}),e.jsx("div",{className:"space-y-6 border-b-2 pb-6",children:n.map((s,i)=>e.jsx("div",{className:"rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-white p-0 rounded-xl",children:e.jsx("img",{src:`/storage/images/item/${s.image}`,alt:s.name,className:"w-20 h-20 object-cover rounded  "})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold customtext-neutral-dark text-sm 2xl:text-base mb-1",children:s.name}),e.jsxs("p",{className:"text-xs 2xl:text-sm customtext-neutral-light opacity-70",children:["Color:"," ",e.jsx("span",{className:"customtext-neutral-dark",children:s.color})]}),e.jsxs("p",{className:"text-xs 2xl:text-sm customtext-neutral-light opacity-70",children:["Cantidad:"," ",e.jsxs("span",{className:"customtext-neutral-dark",children:[s.quantity," "]})]})]})]})},s.id))}),e.jsxs("div",{className:"space-y-2 mt-6 bg-white p-4 rounded-xl",children:[e.jsxs("div",{className:"flex justify-between text-sm 2xl:text-base",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Subtotal"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",o(u)]})]}),e.jsxs("div",{className:"flex justify-between text-sm 2xl:text-base",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"IGV"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",o(g)]})]}),e.jsxs("div",{className:"flex justify-between text-sm 2xl:text-base",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Envío"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",o(y)]})]}),e.jsx("div",{className:"py-1 border-y",children:e.jsxs("div",{className:"flex justify-between font-bold text-lg 2xl:text-xl items-center",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["S/ ",o(N)]})]})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(C,{voucher:c,setVoucher:v}),e.jsxs("div",{className:"pt-2 space-y-3",children:[e.jsx("button",{onClick:w,disabled:l,className:`w-full bg-primary text-white text-sm 2xl:text-base py-3 rounded-3xl font-medium ${l?"opacity-70 cursor-not-allowed":""}`,children:l?"Enviando...":"Confirmar pago"}),e.jsx("button",{onClick:d,className:"w-full border border-primary text-sm 2xl:text-base py-3 rounded-3xl font-medium",children:"Cancelar"})]})]})]})})}function I({bancoNombre:a="Banco de Credito",cuentaCorriente:d={tipo:"C. Corriente Soles",numero:"0011-0616-0100026049"},codigoInterbancario:E={tipo:"C. Código Interbancario",numero:"011-0616-0100026049-5"},logoUrl:b="/placeholder.svg?height=40&width=40"}){const[n,u]=r.useState(!0);return e.jsxs("div",{className:"max-w-md w-full",children:[e.jsx("div",{className:"bg-gray-100 rounded-t-md p-4",children:e.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>u(!n),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-800 rounded-md flex items-center justify-center overflow-hidden",children:b.includes("placeholder")?e.jsx("div",{className:"text-white font-bold text-xl",children:e.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M22 12h-4l-3 9L9 3l-3 9H2"})})}):e.jsx("img",{src:b||"/placeholder.svg",alt:a,className:"w-full h-full object-cover"})}),e.jsx("span",{className:"font-medium text-gray-800 text-base",children:x.get("checkout_transfer_name")})]}),n?e.jsx($,{className:"text-amber-800"}):e.jsx(U,{className:"text-amber-800"})]})}),n&&e.jsx("div",{className:"bg-gray-100 rounded-b-md p-4 pt-0 border-t border-gray-200",children:e.jsx("div",{className:"grid grid-cols-2 gap-4 mt-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-amber-800 font-medium text-sm",children:"C. Código Interbancario"}),e.jsx("p",{className:"text-gray-800 font-medium text-sm",children:x.get("checkout_transfer_cci")})]})})})]})}const P=new S;function ce({isOpen:a,onClose:d,onUpload:E,paymentMethod:b,cart:n,subTotal:u,igv:g,envio:y,totalFinal:N,request:p}){const[_,A]=r.useState(null),[l,h]=r.useState(!1),[c,v]=r.useState(""),w=async()=>{if(!l){if(!c){m.Notify.add({icon:"/assets/img/icon.svg",title:"Error al subir comprobante",body:"Por favor, sube tu comprobante de pago",type:"danger"});return}h(!0);try{const s={...p,payment_proof:c,details:JSON.stringify(p.cart.map(t=>({id:t.id,quantity:t.quantity})))},i=new FormData;Object.keys(s).forEach(t=>{i.append(t,s[t])});const f=await P.save(i);f&&(m.Local.delete(`${j.APP_CORRELATIVE}_cart`),location.href=`${location.origin}/cart?code=${f.code}`)}catch(s){console.error("Error al procesar el pago:"),m.Notify.add({icon:"/assets/img/icon.svg",title:"Ocurrió un error al procesar tu pago",body:s,type:"danger"})}finally{h(!1)}}};return r.useEffect(()=>(a?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[a]),e.jsx(k,{isOpen:a,onRequestClose:d,className:"absolute left-1/2 -translate-x-1/2 bg-[#f5f5f5] rounded-2xl shadow-lg w-[95%] max-w-lg top-1/2 -translate-y-1/2 overflow-hidden font-font-general",overlayClassName:"fixed inset-0 bg-black bg-opacity-50 z-50",ariaHideApp:!1,children:e.jsxs("div",{className:"py-6 px-10 flex flex-col gap-3 max-h-[90vh] md:max-h-[95vh] overflow-y-auto font-font-general",children:[e.jsx("div",{className:"flex justify-center items-center z-40",children:e.jsx("a",{href:"/",className:"flex items-center gap-2",children:e.jsx("img",{src:`/assets/resources/logo.png?v=${crypto.randomUUID()}`,alt:j.APP_NAME,className:"h-14 object-contain object-center",onError:s=>{s.target.onerror=null,s.target.src="/assets/img/logo-bk.svg"}})})}),e.jsx("h2",{className:"text-xl 2xl:text-2xl font-bold customtext-primary text-center mt-3",children:"Felicitaciones!"}),e.jsx("p",{className:"customtext-primary mb-1 text-sm 2xl:text-base text-center",children:"Estás a un paso de completar tu compra, realiza la transferencia/depósito a nuestras cuentas."}),e.jsxs("div",{className:"p-4 rounded-3xl bg-[#EAE8E6] flex flex-col gap-3 items-center",children:[e.jsx("div",{className:"flex flex-col gap-1 text-center customtext-primary font-semibold",children:e.jsx("h2",{children:"SALA FABULOSA"})}),e.jsx("div",{className:"flex flex-col gap-3 w-full",children:e.jsx(I,{})})]}),e.jsxs("div",{className:"bg-[#EAE8E6] rounded-xl shadow-lg p-6 col-span-2 h-max font-font-general",children:[e.jsx("h3",{className:"text-xl 2xl:text-2xl font-semibold pb-6 customtext-neutral-dark",children:"Detalle de compras"}),e.jsx("div",{className:"space-y-6 border-b-2 pb-6",children:n.map((s,i)=>e.jsx("div",{className:"rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-white p-0 rounded-xl",children:e.jsx("img",{src:`/storage/images/item/${s.image}`,alt:s.name,className:"w-20 h-20 object-cover rounded  "})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold customtext-neutral-dark text-sm 2xl:text-base mb-1",children:s.name}),e.jsxs("p",{className:"text-xs 2xl:text-sm customtext-neutral-light opacity-70",children:["Color:"," ",e.jsx("span",{className:"customtext-neutral-dark",children:s.color})]}),e.jsxs("p",{className:"text-xs 2xl:text-sm customtext-neutral-light opacity-70",children:["Cantidad:"," ",e.jsxs("span",{className:"customtext-neutral-dark",children:[s.quantity," "]})]})]})]})},s.id))}),e.jsxs("div",{className:"space-y-2 mt-6 bg-white p-4 rounded-xl",children:[e.jsxs("div",{className:"flex justify-between text-sm 2xl:text-base",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Subtotal"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",o(u)]})]}),e.jsxs("div",{className:"flex justify-between text-sm 2xl:text-base",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"IGV"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",o(g)]})]}),e.jsxs("div",{className:"flex justify-between text-sm 2xl:text-base",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Envío"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",o(y)]})]}),e.jsx("div",{className:"py-1 border-y",children:e.jsxs("div",{className:"flex justify-between font-bold text-lg 2xl:text-xl items-center",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["S/ ",o(N)]})]})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(C,{voucher:c,setVoucher:v}),e.jsxs("div",{className:"pt-2 space-y-3",children:[e.jsx("button",{onClick:w,disabled:l,className:`w-full bg-primary text-white text-sm 2xl:text-base py-3 rounded-3xl font-medium ${l?"opacity-70 cursor-not-allowed":""}`,children:l?"Enviando...":"Confirmar pago"}),e.jsx("button",{onClick:d,className:"w-full border border-primary text-sm 2xl:text-base py-3 rounded-3xl font-medium",children:"Cancelar"})]})]})]})})}export{ne as U,ce as a};
