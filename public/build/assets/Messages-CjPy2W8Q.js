var j=Object.defineProperty;var f=(i,n,s)=>n in i?j(i,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[n]=s;var p=(i,n,s)=>f(i,typeof n!="symbol"?n+"":n,s);import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as l}from"./index-BOnQTV8N.js";import{c as u}from"./ReactAppend-QR5TrZfj.js";import{B as b}from"./Base-CyjIzfyX.js";import{C as g}from"./CreateReactScript-VGUj2QOR.js";import{T as N}from"./Table-Ccf-_54m.js";import{D as a}from"./DxButton-DV0H-ZcL.js";import{R as c}from"./ReactAppend-Vm5G2nof.js";import{B as y}from"./BasicRest-BML1C-ua.js";import{M as C}from"./Modal-xDw9ufjg.js";import{S as R}from"./CartKuchara-D9l7c7at.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./index-B6ujFmsw.js";import"./Global-Bz6gVLc5.js";import"./tippy-react.esm-DmkRJDEW.js";import"./index-pSueRYGM.js";/* empty css              */import"./Logout-BpuTJ_83.js";import"./main-B6F2O9-U.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./MenuItemContainer-DcxtOi47.js";import"./index.esm-C48oHfFw.js";import"./index-ngrFHoWO.js";import"./CanAccess-BlvzCYjQ.js";/* empty css               */import"./General-apRuNwp7.js";import"./LaravelSession-Dz9cpV3l.js";import"./BooleanLimit-D-OsQsek.js";import"./CardProductKatya-ncpmQ0JU.js";class M extends y{constructor(){super(...arguments);p(this,"path","admin/messages")}}const m=new M,w=()=>{const i=l.useRef(),n=l.useRef(),[s,h]=l.useState(null),x=async r=>{const{isConfirmed:t}=await R.fire({title:"Eliminar mensaje",text:"¿Estas seguro de eliminar este mensaje?",icon:"warning",showCancelButton:!0,confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"});!t||!await m.delete(r)||$(i.current).dxDataGrid("instance").refresh()},o=r=>{r.seen||(m.boolean({id:r.id,field:"seen",value:!0}),$(i.current).dxDataGrid("instance").refresh()),h(r),$(n.current).modal("show")};return e.jsxs(e.Fragment,{children:[e.jsx(N,{gridRef:i,title:"Mensajes",rest:m,toolBar:r=>{r.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(i.current).dxDataGrid("instance").refresh()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"name",caption:"Nombre",cellTemplate:(r,{data:t})=>{c(r,e.jsx("span",{style:{width:"100%",fontWeight:t.seen?"lighter":"bold",cursor:"pointer"},onClick:()=>o(t),children:t.name}))}},{dataField:"email",caption:"Correo"},{dataField:"created_at",caption:"Fecha",dataType:"datetime",format:"yyyy-MM-dd HH:mm:ss",sortOrder:"desc"},{dataField:"status",caption:"Estado",dataType:"boolean",cellTemplate:(r,{data:t})=>{t.seen?c(r,e.jsx("span",{className:"badge bg-success rounded-pill",children:"Leído"})):c(r,e.jsx("span",{className:"badge bg-danger rounded-pill",children:"No leído"}))}},{caption:"Acciones",cellTemplate:(r,{data:t})=>{r.append(a({className:"btn btn-xs btn-soft-dark",title:"Ver mensaje",icon:"fa fa-eye",onClick:()=>o(t)})),r.append(a({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>x(t.id)}))},allowFiltering:!1,allowExporting:!1}]}),e.jsxs(C,{modalRef:n,title:"Mensaje",hideFooter:!0,children:[e.jsxs("p",{children:[e.jsx("b",{children:"Nombre"}),":",e.jsx("span",{className:"ms-1",children:s==null?void 0:s.name})]}),e.jsxs("p",{children:[e.jsx("b",{children:"Correo"}),":",e.jsx("span",{className:"ms-1",children:(s==null?void 0:s.email)||e.jsx("i",{className:"text-muted",children:"- Sin correo -"})})]}),(s==null?void 0:s.phone)&&e.jsxs("p",{children:[e.jsx("b",{children:"Teléfono"}),":",e.jsx("span",{className:"ms-1",children:s==null?void 0:s.phone})]}),(s==null?void 0:s.company)&&e.jsxs("p",{children:[e.jsx("b",{children:"Empresa"}),":",e.jsx("span",{className:"ms-1",children:s==null?void 0:s.company})]}),(s==null?void 0:s.ruc)&&e.jsxs("p",{children:[e.jsx("b",{children:"RUC"}),":",e.jsx("span",{className:"ms-1",children:s==null?void 0:s.ruc})]}),(s==null?void 0:s.subject)&&e.jsxs("p",{children:[e.jsx("b",{children:"Asunto"}),":",e.jsx("span",{className:"ms-1",children:s==null?void 0:s.subject})]}),(s==null?void 0:s.category)&&e.jsxs("p",{children:[e.jsx("b",{children:"Categoría"}),":",e.jsx("span",{className:"ms-1",children:s==null?void 0:s.category})]}),(s==null?void 0:s.subcategory)&&e.jsxs("p",{children:[e.jsx("b",{children:"Subcategoría"}),":",e.jsx("span",{className:"ms-1",children:s==null?void 0:s.subcategory})]}),(s==null?void 0:s.machinery)&&e.jsxs("p",{children:[e.jsx("b",{children:"Maquinaria"}),":",e.jsx("span",{className:"ms-1",children:s==null?void 0:s.machinery})]}),e.jsxs("p",{children:[e.jsx("b",{children:"Mensaje"}),":",e.jsx("span",{className:"ms-1",children:s==null?void 0:s.description})]})]})]})};g((i,n)=>{u.createRoot(i).render(e.jsx(b,{...n,title:"Mensajes",children:e.jsx(w,{...n})}))});
