import{b as e,r as t,m as a,j as i}from"./System-Bybt2Brn.js";import{J as s,A as r}from"./AuthClientRest-BY2KkP18.js";import{S as n}from"./sweetalert2.esm.all-DbJpIAEg.js";import{m as o}from"./proxy-BmPRG09w.js";import{A as l}from"./index-Da4AP4wO.js";import"./vendor-BiOv2i5T.js";function c(){const c=new s;c.setPublicKey(e.PUBLIC_RSA_KEY);const[m,d]=t.useState(!1),[u,x]=t.useState(!1),p=t.useRef(),h={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{duration:.5,ease:"easeOut"}}};t.useEffect((()=>{a.GET.message&&n.fire({icon:"info",title:"Mensaje",text:a.GET.message,showConfirmButton:!1,timer:3e3})}),[]);return i.jsx(o.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"w-full px-primary mx-auto py-16",children:i.jsx(o.div,{className:"flex items-center justify-center",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,when:"beforeChildren"}}},initial:"hidden",animate:"visible",children:i.jsxs(o.div,{className:"mx-auto w-full max-w-md bg-sections-color rounded-3xl p-8 space-y-6 shadow-lg",variants:h,whileHover:{y:-5,boxShadow:"0 10px 25px rgba(0, 0, 0, 0.1)",transition:{type:"spring",stiffness:300}},children:[i.jsxs(o.div,{className:"space-y-2",variants:h,children:[i.jsx(o.h5,{className:"customtext-primary font-medium",initial:{x:-10},animate:{x:0},children:"Restaurar contraseña"}),i.jsx(o.h1,{className:"text-3xl font-bold customtext-neutral-dark",initial:{y:10},animate:{y:0},transition:{delay:.1},children:"Ops, olvidé mi contraseña"}),i.jsx(o.p,{className:"customtext-neutral-light",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:"Ingresa tu correo electrónico y te enviaremos un enlace para restablecer tu contraseña."})]}),i.jsx(l,{mode:"wait",children:u?i.jsxs(o.div,{className:"text-center py-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[i.jsx(o.div,{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",animate:{scale:[1,1.1,1],rotate:[0,10,-10,0]},transition:{duration:.6},children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),i.jsx("h3",{className:"text-xl font-bold customtext-neutral-dark mb-2",children:"¡Correo enviado!"}),i.jsx("p",{className:"customtext-neutral-light mb-6",children:"Revisa tu bandeja de entrada y sigue las instrucciones para restablecer tu contraseña."}),i.jsx(o.a,{href:"/iniciar-sesion",className:"inline-block customtext-primary font-medium border-b border-primary",whileHover:{scale:1.05},children:"Volver al inicio de sesión"})]}):i.jsxs(o.form,{className:"space-y-4",onSubmit:async e=>{e.preventDefault(),d(!0);try{const e=p.current.value,t={email:c.encrypt(e)};if(!(await r.forgotPassword(t)))throw new Error("No se pudo procesar la solicitud");x(!0),n.fire({icon:"success",title:"Éxito",text:"Hemos enviado un enlace de recuperación a tu correo electrónico",showConfirmButton:!1,timer:3e3})}catch(t){n.fire({icon:"error",title:"Error",text:t.message||"Ocurrió un error al enviar la solicitud",showConfirmButton:!1,timer:3e3})}finally{d(!1)}},initial:{opacity:1},exit:{opacity:0},variants:h,children:[i.jsxs(o.div,{className:"space-y-2",variants:h,children:[i.jsx("label",{className:"block text-sm mb-1 customtext-neutral-dark",htmlFor:"email",children:"Email"}),i.jsx(o.input,{id:"email",ref:p,name:"email",type:"email",placeholder:"hola@mail.com",className:"w-full px-4 py-3 border customtext-neutral-dark border-neutral-ligth rounded-xl focus:ring-0 focus:outline-0 transition-all duration-300",required:!0,whileFocus:{borderColor:"#3B82F6",boxShadow:"0 0 0 3px rgba(59, 130, 246, 0.2)"}})]}),i.jsx(o.button,{type:"submit",className:"w-full rounded-xl font-semibold bg-primary px-4 py-3 text-white hover:opacity-90 focus:outline-none",variants:h,whileHover:{scale:1.02,boxShadow:"0 5px 15px rgba(0, 0, 0, 0.2)"},whileTap:{scale:.98},disabled:m,children:m?i.jsxs("span",{className:"flex items-center justify-center",children:[i.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Enviando..."]}):"Enviar enlace de recuperación"})]})})]})})})}export{c as default};
