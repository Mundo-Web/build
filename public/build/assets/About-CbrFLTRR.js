var A=Object.defineProperty;var B=(n,o,a)=>o in n?A(n,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[o]=a;var x=(n,o,a)=>B(n,typeof o!="symbol"?o+"":o,a);import{j as t}from"./AboutSimple-Cf8x2fCZ.js";import{B as G}from"./Base-CyjIzfyX.js";import{S as N}from"./SwitchFormGroup-DXN0cwVk.js";import{r as s}from"./index-BOnQTV8N.js";import{c as O}from"./ReactAppend-QR5TrZfj.js";import"./CartKuchara-D9l7c7at.js";import{B as V}from"./BasicRest-BML1C-ua.js";import{W as M}from"./WebDetailsRest-DsgeLSDz.js";import{B as L}from"./BasicEditing-TVz-VY9q.js";import{M as P}from"./Modal-xDw9ufjg.js";import{T as H}from"./Table-Ccf-_54m.js";import{D as _}from"./DxButton-DV0H-ZcL.js";import{I as m}from"./InputFormGroup-iZIO11ZN.js";import{S as Q}from"./SelectFormGroup-X8WqJHHl.js";import{A as W}from"./ArrayDetails2Object-DR0Igcn7.js";import{C as z}from"./CreateReactScript-VGUj2QOR.js";import{R as D}from"./ReactAppend-Vm5G2nof.js";import{I as J}from"./ImageFormGroup-40MuGzez.js";import{Q as K}from"./QuillFormGroup-BXX8qnUc.js";import"./index-yBjzXJbu.js";import"./Global-Bz6gVLc5.js";import"./tippy-react.esm-DmkRJDEW.js";import"./index-pSueRYGM.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./index-B6ujFmsw.js";/* empty css              */import"./Logout-BpuTJ_83.js";import"./main-B6F2O9-U.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./MenuItemContainer-DcxtOi47.js";import"./index.esm-C48oHfFw.js";import"./index-ngrFHoWO.js";import"./CanAccess-BlvzCYjQ.js";import"./CardProductKatya-ncpmQ0JU.js";import"./BooleanLimit-D-OsQsek.js";import"./em-Dm5QugzS.js";import"./HtmlContent-ghmllTyl.js";/* empty css               */import"./General-apRuNwp7.js";import"./LaravelSession-Dz9cpV3l.js";class U extends V{constructor(){super(...arguments);x(this,"path","admin/aboutus");x(this,"hasFiles",!0)}}const p=new U,X=new M,S=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.hostname.includes(".local")||window.location.hostname.includes(".test"),Y=[{value:"section-hero",text:"ðŸ¦¸â€â™‚ï¸ Hero Principal - SecciÃ³n principal con tÃ­tulo e imagen"},{value:"section-mision",text:"ðŸŽ¯ MisiÃ³n - SecciÃ³n de misiÃ³n de la empresa"},{value:"section-vision",text:"ðŸ”­ VisiÃ³n - SecciÃ³n de visiÃ³n de la empresa"},{value:"section-valores",text:"â­ Valores - Grid de valores empresariales"},{value:"section-equipo",text:"ðŸ‘¥ Nuestro Equipo - PresentaciÃ³n del equipo"},{value:"section-historia",text:"ðŸ“š Nuestra Historia - Historia de la empresa"},{value:"section-cta",text:"ðŸ“ž Call to Action - SecciÃ³n de contacto final"}],Z=({details:n})=>{const o=s.useRef(),a=s.useRef(),d=s.useRef(),u=s.useRef(),f=s.useRef(),v=s.useRef(),g=s.useRef(),b=s.useRef(),l=s.useRef(),[E,h]=s.useState(!1),R=e=>{e!=null&&e.id?h(!0):h(!1),l.resetDeleteFlag&&l.resetDeleteFlag(),d.current.value=(e==null?void 0:e.id)??"",u.current.value=(e==null?void 0:e.correlative)??"",f.current.value=(e==null?void 0:e.name)??"",v.editor.root.innerHTML=(e==null?void 0:e.description)??"",g.current.value=(e==null?void 0:e.title)??"",b.current.value=(e==null?void 0:e.link)??"",l.current.value=null,l.image.src=e!=null&&e.image?`/storage/images/aboutus/${e.image}`:"",$(a.current).modal("show")},C=async e=>{e.preventDefault();const i={id:d.current.value||void 0,correlative:u.current.value,name:f.current.value,description:v.current.value,title:g.current.value,link:b.current.value},r=new FormData;for(const F in i)r.append(F,i[F]);const j=l.current.files[0];j&&r.append("image",j),l.getDeleteFlag&&l.getDeleteFlag()&&r.append("image_delete","DELETE"),await p.save(r)&&(l.resetDeleteFlag&&l.resetDeleteFlag(),$(o.current).dxDataGrid("instance").refresh(),$(a.current).modal("hide"))},T=async({id:e,value:i})=>{await p.boolean({id:e,field:"visible",value:i})&&$(o.current).dxDataGrid("instance").refresh()},I=async e=>{const i=e.toIndex;try{await p.reorder(e.itemData.id,i)&&await e.component.refresh()}catch(r){console.error("Error reordering about:",r)}},[c,q]=s.useState(W(n)),[y,w]=s.useState(!1),k=async e=>{X.save({page:"about",name:"video",description:e.target.value})&&(q(r=>({...r,"about.video":e.target.value})),w(!1))};return t.jsxs(t.Fragment,{children:[t.jsx(H,{gridRef:o,title:t.jsxs(t.Fragment,{children:[t.jsx(L,{correlative:"about",details:n}),y?t.jsx("input",{className:"form-control form-control-sm mb-1",defaultValue:c==null?void 0:c["about.video"],onBlur:k,autoFocus:!0}):t.jsx("smal",{className:"header-title mt-1",onClick:()=>w(!0),children:(c==null?void 0:c["about.video"])||"Sin video"})]}),rest:p,rowDragging:{allowReordering:!0,onReorder:I,dropFeedbackMode:"push"},sorting:{mode:"single"},toolBar:e=>{e.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(o.current).dxDataGrid("instance").refresh()}}),S&&e.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Nuevo About",hint:"Agregar nuevo about",onClick:()=>R()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"order_index",caption:"Orden",visible:!1,sortOrder:"asc",sortIndex:0},{dataField:"correlative",caption:"Correlativo",width:150},{dataField:"name",caption:"SecciÃ³n"},{dataField:"title",caption:"TÃ­tulo"},{dataField:"image",caption:"Imagen",cellTemplate:(e,{data:i})=>{D(e,t.jsx("img",{src:`/storage/images/aboutus/${i.image}`,style:{width:"80px",height:"80px",objectFit:"cover",objectPosition:"center",borderRadius:"4px"},onError:r=>r.target.src="/api/cover/thumbnail/null"}))}},{dataField:"visible",caption:"Visible",dataType:"boolean",cellTemplate:(e,{data:i})=>{$(e).empty(),D(e,t.jsx(N,{checked:i.visible==1,onChange:()=>T({id:i.id,value:i.visible==1?0:1})}))}},{caption:"Acciones",cellTemplate:(e,{data:i})=>{e.append(_({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>R(i)}))},allowFiltering:!1,allowExporting:!1}]}),t.jsx(P,{modalRef:a,title:E?"Editar about":"Agregar about",onSubmit:C,size:"md",children:t.jsxs("div",{className:"row",id:"aboutuses-container",children:[t.jsx("input",{ref:d,type:"hidden"}),S?t.jsxs(Q,{eRef:u,label:"Tipo de Bloque (Correlativo)",col:"col-12",required:!0,dropdownParent:"#aboutuses-container",helpText:"Selecciona el tipo de bloque que quieres crear",children:[t.jsx("option",{value:"",children:"Selecciona un bloque"}),Y.map(e=>t.jsx("option",{value:e.value,children:e.text},e.value))]}):t.jsx(m,{eRef:u,label:"Correlativo",col:"col-12",required:!0}),t.jsx(m,{eRef:f,label:"SecciÃ³n",col:"col-12",required:!0}),t.jsx(m,{eRef:g,label:"TÃ­tulo",col:"col-12"}),t.jsx(m,{eRef:b,label:"Link",col:"col-12"}),t.jsx(K,{eRef:v,label:"DescripciÃ³n"}),t.jsx(J,{eRef:l,name:"image",label:"Imagen",col:"col-12",rows:3})]})})]})};z((n,o)=>{O.createRoot(n).render(t.jsx(G,{...o,title:"Nosotros",children:t.jsx(Z,{...o})}))});
