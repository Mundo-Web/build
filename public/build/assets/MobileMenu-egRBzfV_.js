import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as n}from"./index-BOnQTV8N.js";import R from"./MenuSimple-eF3Gua6U.js";import{X as L}from"./x-fof_H3Vv.js";import{S as $}from"./search-BQ59Robe.js";import{C as B}from"./chevron-left-JcR9Fe4w.js";import{C as h}from"./chevron-right-Cug7tVUE.js";function X({search:i,setSearch:u,pages:b,items:x,onClose:m,data:l}){const[r,v]=n.useState("main"),[d,y]=n.useState(null),[K,j]=n.useState(null),[o,p]=n.useState([]),[g,N]=n.useState("right"),w=n.useRef(null),C=t=>{if(t.preventDefault(),i.trim()){const s=i.trim();window.location.href=`/catalogo?search=${encodeURIComponent(s)}`}return!1},S=t=>{if(t.key==="Enter"&&(t.preventDefault(),i.trim())){const s=i.trim();window.location.href=`/catalogo?search=${encodeURIComponent(s)}`}},c=(t,s="right",a=null)=>{N(s),a&&y(a),setTimeout(()=>{v(t)},50)},k=t=>{j(t.name),p([...o,{level:r,name:"Categorías"}]),c("subcategories","right",t.name)},M=()=>{if(o.length>0){const t=o[o.length-1];c(t.level,"left"),p(o.slice(0,-1))}else r==="subcategories"?c("categories","left"):r==="categories"&&c("main","left")},E=t=>{c("categories","right")},D=()=>"Menú principal",I=()=>{if(r==="main")return e.jsxs("div",{className:"animate-fade animate-duration-300",children:[e.jsxs("button",{className:"px-4 py-2 mb-3 w-full flex justify-between items-center hover:bg-gray-50 active:bg-primary transition-all  rounded-xl",onClick:()=>E(),children:[e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:"font-medium",children:"Categorías"})}),e.jsx(h,{className:"h-5 w-5 customtext-neutral-light"})]}),e.jsx("div",{className:"space-y-2",children:b.map((t,s)=>t.menuable&&e.jsx("a",{href:t.path,className:"p-4 py-2 flex justify-between items-center w-full hover:bg-gray-50 active:bg-primary transition-all  rounded-xl",children:e.jsx("span",{className:"font-medium",children:t.name})},s))})]});if(r==="categories"){const t=[...x].sort((s,a)=>s.name.localeCompare(a.name,"es",{sensitivity:"base"}));return e.jsx("div",{className:g==="right"?"animate-fade-left animate-duration-300":"animate-fade-right animate-duration-300",children:e.jsx("div",{className:"space-y-2",children:t.map(s=>e.jsxs("div",{className:"px-4 py-2  rounded-xl flex justify-between items-center cursor-pointer hover:bg-gray-50 active:bg-primary transition-all",onClick:()=>k(s),children:[e.jsx("span",{className:"font-medium",children:s.name}),e.jsx(h,{className:"h-5 w-5 customtext-neutral-light"})]},s.id))})})}else if(r==="subcategories"&&d){const t=x.find(a=>a.name===d),s=t.subcategories?[...t.subcategories].sort((a,f)=>a.name.localeCompare(f.name,"es",{sensitivity:"base"})):[];return e.jsx("div",{className:g==="right"?"animate-fade-left animate-duration-300":"animate-fade-right animate-duration-300",children:e.jsx("div",{className:"space-y-2",children:s.map((a,f)=>e.jsxs("a",{href:`/catalogo?subcategory=${a.slug}`,className:"flex w-full px-4  py-2 rounded-xl justify-between items-center hover:bg-gray-50 active:bg-primary transition-all",children:[e.jsx("span",{className:"font-medium",children:a.name}),e.jsx(h,{className:"h-5 w-5 customtext-neutral-light"})]},f))})})}};return n.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),n.useEffect(()=>{const t=s=>{s.key==="Escape"&&(i.trim()?u(""):m())};return document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}},[i,m,u]),e.jsxs("div",{className:"fixed inset-0 z-[99999] flex flex-col touch-none overscroll-none",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:m}),e.jsx("div",{className:"relative w-full md:w-[400px] md:mx-auto flex flex-col h-[100dvh]  ",children:e.jsxs("div",{className:"mt-auto bg-white  shadow-xl flex flex-col max-h-[80vh] rounded-t-2xl overflow-hidden",children:[e.jsxs("div",{className:"p-4 bg-white flex justify-between items-center border-b border-gray-200 sticky top-0 z-[9999]",children:[e.jsx("h1",{className:"text-lg font-bold",children:D()}),e.jsx("button",{className:"p-2 rounded-full hover:bg-gray-100",onClick:m,children:e.jsx(L,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"overflow-y-auto flex-1 p-4 overscroll-contain",children:[e.jsx("div",{className:"mb-5",children:e.jsxs("form",{onSubmit:C,role:"search",className:"relative w-full",children:[e.jsx("input",{ref:w,type:"search",name:"search",placeholder:`${(l==null?void 0:l.input_search_placeholder)||"Buscar productos"}`,value:i,onChange:t=>u(t.target.value),onKeyDown:S,className:"w-full pr-12 py-3 pl-4 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary/20 focus:outline-none",enterKeyHint:"search",inputMode:"search",autoComplete:"off",role:"searchbox","aria-label":`${(l==null?void 0:l.input_search_placeholder)||"Buscar productos"}`}),e.jsx("button",{type:"submit",className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors","aria-label":"Buscar",children:e.jsx($,{className:"h-4 w-4"})})]})}),r!=="main"&&e.jsxs("button",{onClick:M,className:"flex items-center customtext-primary mb-4 font-medium",children:[e.jsx(B,{className:"h-5 w-5 mr-1"}),e.jsx("span",{children:r==="categories"?"Categorías":d})]}),e.jsx("div",{className:"pb-16",children:I()}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0  flex justify-center",children:e.jsx(R,{visible:!0})})]})]})})]})}export{X as M};
