var ss=Object.defineProperty;var ts=(u,n,o)=>n in u?ss(u,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):u[n]=o;var ce=(u,n,o)=>ts(u,typeof n!="symbol"?n+"":n,o);import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as c}from"./index-BOnQTV8N.js";import{R as ue}from"./PolicyModal-C80IvD61.js";import{H as as}from"./HtmlContent-ghmllTyl.js";import{C as E,N as F}from"./Number2Currency-jIsa99f9.js";import{U as xe}from"./users-w-WaEtvX.js";import{M as $e}from"./moon-BU5XInRR.js";import{c as rs}from"./createLucideIcon-DfjclApS.js";import{C as te}from"./calendar-BSC6xbA7.js";import{X as pe}from"./x-fof_H3Vv.js";import{f as Fe}from"./format-B6vr9H0z.js";import{e as Oe}from"./es-QTeD0CGG.js";import{O as ns,p as os,a as ls}from"./OpenPayCardModal-n1KG45qI.js";import{C as cs,p as is,B as ds}from"./culqiPayment-BOuHXhF8.js";import{P as ms}from"./PaymentModal-6XGx0IRq.js";import{G as q}from"./Global-Bz6gVLc5.js";import{G as K}from"./General-apRuNwp7.js";import{m as Q}from"./main-B6F2O9-U.js";import{t as U}from"./CardProductKatya-ncpmQ0JU.js";import{U as Me}from"./upload-GO9GDST_.js";import{C as G}from"./circle-x-5vreeYph.js";import{B as xs}from"./building-2-DSFvhCB-.js";import{C as Se}from"./check-D5vaIe6v.js";import{C as Re}from"./copy-BnGV3h9k.js";import{S as us}from"./react-select.esm-H4wpMl-h.js";import{C as ps}from"./credit-card-MgdEzS7h.js";import{C as ie}from"./circle-check-big-CYWUGR3Z.js";import{U as hs}from"./user-round-x-C2OImLTZ.js";import{M as ye}from"./mail-drJGpT4k.js";import{P as gs}from"./phone-ZNY-sPqk.js";import{M as fs}from"./map-pin-Cj3PUWlD.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./index-B6ujFmsw.js";import"./index-Chjiymov.js";import"./loader-circle-CSFYLd5m.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./index-pSueRYGM.js";import"./useStateManager-7e1e8489.esm-C6DnWqDr.js";import"./hoist-non-react-statics.cjs-Dk09vysS.js";import"./floating-ui.dom-CID5cQpR.js";/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=rs("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),js=({setCart:u,...n})=>{const o=()=>{u(a=>a.filter(i=>i.id!==n.id||i.check_in!==n.check_in))},j=a=>{if(!a)return"";try{const i=new Date(a);return Fe(i,"dd 'de' MMMM",{locale:Oe})}catch{return a}},y=n.final_price||n.price,O=n.nights||1,l=y*O,N=n.guests||2,H=a=>({standard:"Estándar",suite:"Suite",deluxe:"Deluxe",presidential:"Presidencial",family:"Familiar",executive:"Ejecutiva",single:"Individual",double:"Doble"})[a]||a;return e.jsx("div",{className:"bg-white border border-gray-200 rounded-2xl overflow-hidden hover:shadow-lg transition-all duration-300 font-paragraph",children:e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsxs("div",{className:"md:w-64 h-48 md:h-auto relative flex-shrink-0",children:[e.jsx("img",{src:`/storage/images/item/${n.image}`,alt:n.name,className:"w-full h-full object-cover",onError:a=>a.target.src="/assets/img/noimage/no_img.jpg"}),n.room_type&&e.jsx("div",{className:"absolute top-3 left-3 bg-white/95 backdrop-blur-sm px-3 py-1 rounded-full text-xs font-semibold text-gray-700 shadow-md",children:H(n.room_type)})]}),e.jsxs("div",{className:"flex-1 p-5 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg md:text-xl font-bold text-gray-900 mb-2",children:n.name}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(xe,{size:16,className:"text-blue-600"}),e.jsxs("span",{children:[N," ",N===1?"huésped":"huéspedes"]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx($e,{size:16,className:"text-indigo-600"}),e.jsxs("span",{children:[O," ",O===1?"noche":"noches"]})]}),n.amenities&&n.amenities.includes("wifi")&&e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(bs,{size:16,className:"text-green-600"}),e.jsx("span",{children:"WiFi"})]})]}),e.jsxs("div",{className:"inline-flex items-center gap-3 bg-gray-50 rounded-xl px-4 py-2.5 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{size:16,className:"text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Check-in"}),e.jsx("div",{className:"font-semibold text-gray-900",children:j(n.check_in)})]})]}),e.jsx("div",{className:"w-8 h-px bg-gray-300"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{size:16,className:"text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Check-out"}),e.jsx("div",{className:"font-semibold text-gray-900",children:j(n.check_out)})]})]})]})]}),e.jsx("button",{onClick:o,className:"ml-4 p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-all","aria-label":"Eliminar reserva",title:"Eliminar reserva",children:e.jsx(pe,{size:20})})]}),e.jsxs("div",{className:"flex items-end justify-between pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Precio por noche:"}),e.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:[E()," ",y.toFixed(2)]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Total a pagar"}),e.jsxs("div",{className:"text-2xl font-bold text-primary",children:[E()," ",l.toFixed(2)]})]})]})]})]})})};function ys({data:u,cart:n,setCart:o,onContinue:j,subTotal:y,igv:O,totalFinal:l,openModal:N,totalWithoutDiscounts:H}){const a=n.length===0;return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 font-paragraph",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-2",children:a?"Tu carrito está vacío":"Revisa tu reserva"}),!a&&e.jsxs("p",{className:"text-gray-600",children:[n.length," ",n.length===1?"habitación seleccionada":"habitaciones seleccionadas"]})]}),e.jsx("div",{className:"space-y-4",children:a?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 bg-gray-50 rounded-2xl",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-full flex items-center justify-center mb-4",children:e.jsx("svg",{className:"w-10 h-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No hay habitaciones seleccionadas"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Explora nuestras opciones de alojamiento"}),e.jsx("a",{href:"/habitaciones",className:"px-8 py-3 bg-primary hover:bg-secondary text-white rounded-full hover:shadow-xl transition-all duration-300 font-bold hover:scale-105 active:scale-95",children:"Ver habitaciones disponibles"})]}):n.map((i,v)=>e.jsx(js,{...i,setCart:o},`${i.id}-${i.checkIn}-${v}`))})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl shadow-sm p-6 sticky top-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Resumen de reserva"}),!a&&e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3 pb-6 border-b",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:n.length}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:n.length===1?"Habitación":"Habitaciones"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:n.reduce((i,v)=>i+(v.nights||1),0)}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Noches"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:n.reduce((i,v)=>i+(v.guests||2),0)}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Huéspedes"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[E()," ",F(y)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Impuestos y cargos"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[E()," ",F(O)]})]})]}),e.jsx("div",{className:"pt-4 border-t",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900",children:"Total"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-primary",children:[E()," ",F(l)]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Incluye impuestos"})]})]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:j,disabled:a,className:`w-full py-4 px-6 rounded-full font-bold text-base transition-all duration-300 shadow-lg ${a?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-primary hover:bg-secondary text-white hover:shadow-2xl hover:scale-[1.02] active:scale-[0.98]"} ${(u==null?void 0:u.class_button)||""}`,children:a?"Carrito vacío":"Continuar con la reserva"}),e.jsx("a",{href:"/habitaciones",className:"block w-full py-3 px-6 text-center rounded-full font-semibold customtext-primary border-2 border-accent hover:bg-accent hover:text-white transition-all duration-300 shadow-md hover:shadow-lg",children:a?"Explorar habitaciones":"Agregar más habitaciones"})]}),e.jsx("div",{className:"mt-6 pt-6 border-t",children:e.jsxs("p",{className:"text-xs text-gray-500 leading-relaxed",children:["Al proceder, aceptas nuestros"," ",e.jsx("button",{onClick:()=>N&&N(1),className:"text-primary font-medium hover:underline",children:"Términos y Condiciones"})," ","y"," ",e.jsx("button",{onClick:()=>N&&N(0),className:"text-primary font-medium hover:underline",children:"Política de Privacidad"}),"."]})})]})})]})}class Le{constructor(){ce(this,"checkout",async n=>{try{const o=await fetch(`${this.baseUrl}/checkout`,{method:"POST",body:n}),j=await o.json();if(!o.ok||j.status>=400)throw new Error(j.message||"Error al procesar la reserva");return j}catch(o){throw console.error("Error en checkout de booking:",o),o}});ce(this,"search",async n=>{try{return await Q.Fetch("/api/hotels/rooms/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})}catch(o){throw console.error("Error buscando habitaciones:",o),o}});ce(this,"track",async n=>{try{return await Q.Fetch(`${this.baseUrl}/${n}/track`,{method:"GET"})}catch(o){throw console.error("Error rastreando reserva:",o),o}});ce(this,"create",async n=>{try{return await Q.Fetch(this.baseUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})}catch(o){throw console.error("Error creando reserva:",o),o}});this.baseUrl="/api/hotels/bookings"}}const Ns=new Le;function vs({isOpen:u,onClose:n,cart:o=[],subTotal:j,igv:y,totalFinal:O,request:l,coupon:N=null,descuentofinal:H=0}){const[a,i]=c.useState(!1),[v,h]=c.useState(null),S=c.useRef(null),z=g=>{const T=g.target.files[0];T&&h(T)},_=()=>{h(null),S.current&&(S.current.value="")},w=async()=>{if(!a){if(!v){U.error("Error al subir comprobante",{description:"Por favor, sube tu comprobante de pago",icon:e.jsx(G,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"top-right"});return}i(!0);try{const g=new FormData;Object.keys(l).forEach(R=>{l[R]!==null&&l[R]!==void 0&&g.append(R,l[R])}),g.append("payment_proof",v);const T=await Ns.checkout(g);T&&T.code&&(Q.Local.set(`${q.APP_CORRELATIVE}_cart`,(Q.Local.get(`${q.APP_CORRELATIVE}_cart`)||[]).filter(R=>R.type!=="booking")),location.href=`${location.origin}/cart?code=${T.code}`)}catch(g){console.error("Error al procesar el pago:",g),U.error("Error al procesar el pago",{description:g.message||"Ocurrió un error al procesar tu pago",icon:e.jsx(G,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"top-right"})}finally{i(!1)}}},I=o.reduce((g,T)=>g+(T.nights||1),0),X=o.reduce((g,T)=>g+(T.guests||2),0);return e.jsx(ue,{isOpen:u,onRequestClose:n,className:"absolute left-1/2 -translate-x-1/2 bg-[#f5f5f5] rounded-2xl shadow-lg w-[95%] max-w-lg top-1/2 -translate-y-1/2 overflow-hidden font-paragraph",overlayClassName:"fixed inset-0 bg-black bg-opacity-50 z-50",ariaHideApp:!1,children:e.jsxs("div",{className:"py-6 px-6 md:px-10 flex flex-col gap-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("img",{src:`/assets/resources/logo.png?v=${crypto.randomUUID()}`,alt:q.APP_NAME,className:"h-12 object-contain",onError:g=>{g.target.onerror=null,g.target.src="/assets/img/logo-bk.svg"}})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:K.get("checkout_dwallet_name")||"Pago con Yape / Plin"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:K.get("checkout_dwallet_description")||"Sube tu comprobante de pago para confirmar tu reserva"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 space-y-3",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(te,{size:18}),"Resumen de tu reserva"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[e.jsx("div",{className:"text-lg font-bold text-primary",children:o.length}),e.jsx("div",{className:"text-xs text-gray-500",children:"Habitación(es)"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[e.jsx("div",{className:"text-lg font-bold text-primary",children:I}),e.jsx("div",{className:"text-xs text-gray-500",children:"Noche(s)"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[e.jsx("div",{className:"text-lg font-bold text-primary",children:X}),e.jsx("div",{className:"text-xs text-gray-500",children:"Huésped(es)"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Escanea el código QR para pagar"}),K.get("checkout_dwallet_qr")?e.jsx("img",{src:`/assets/resources/${K.get("checkout_dwallet_qr")}`,alt:K.get("checkout_dwallet_name")||"QR Yape",className:"mx-auto max-w-[200px] rounded-lg",onError:g=>{g.currentTarget.src="/assets/img/salafabulosa/logoyape.png"}}):e.jsx("div",{className:"w-[200px] h-[200px] mx-auto bg-gray-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-gray-400 text-sm",children:"QR no configurado"})}),K.get("checkout_dwallet_phone")&&e.jsxs("p",{className:"mt-3 text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"O transfiere a: "}),e.jsx("span",{className:"font-bold text-primary",children:K.get("checkout_dwallet_phone")})]})]}),e.jsxs("div",{className:"bg-primary text-white rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-sm opacity-90",children:"Total a pagar"}),e.jsxs("p",{className:"text-2xl font-bold",children:[E()," ",F(O)]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Sube tu comprobante de pago *"}),e.jsx("input",{type:"file",ref:S,onChange:z,accept:"image/*",className:"hidden"}),v?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:URL.createObjectURL(v),alt:"Comprobante",className:"w-full max-h-48 object-contain rounded-lg"}),e.jsx("button",{type:"button",onClick:_,className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",children:e.jsx(pe,{size:16})})]}):e.jsxs("button",{type:"button",onClick:()=>{var g;return(g=S.current)==null?void 0:g.click()},className:"w-full border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-primary transition-colors",children:[e.jsx(Me,{className:"mx-auto h-8 w-8 text-gray-400"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Haz clic para subir tu comprobante"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"PNG, JPG hasta 5MB"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:w,disabled:a||!v,className:`w-full py-3 px-6 rounded-full font-semibold text-white transition-all ${a||!v?"bg-gray-400 cursor-not-allowed":"bg-primary hover:opacity-90"}`,children:a?"Procesando...":"Confirmar Reserva"}),e.jsx("button",{onClick:n,disabled:a,className:"w-full py-3 px-6 rounded-full font-semibold border border-gray-300 text-gray-700 hover:bg-gray-50 transition-all",children:"Cancelar"})]})]})})}const ws=new Le;function Cs({isOpen:u,onClose:n,cart:o=[],subTotal:j,igv:y,totalFinal:O,request:l,contacts:N=[],coupon:H=null,descuentofinal:a=0}){const[i,v]=c.useState(!1),[h,S]=c.useState(null),[z,_]=c.useState(null),w=c.useRef(null),I=m=>{const $=m.target.files[0];$&&S($)},X=()=>{S(null),w.current&&(w.current.value="")},g=(m,$)=>{navigator.clipboard.writeText(m),_($),setTimeout(()=>_(null),2e3)},T=async()=>{if(!i){if(!h){U.error("Error al subir comprobante",{description:"Por favor, sube tu comprobante de pago",icon:e.jsx(G,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"top-right"});return}v(!0);try{const m=new FormData;Object.keys(l).forEach(B=>{l[B]!==null&&l[B]!==void 0&&m.append(B,l[B])}),m.append("payment_proof",h);const $=await ws.checkout(m);$&&$.code&&(Q.Local.set(`${q.APP_CORRELATIVE}_cart`,(Q.Local.get(`${q.APP_CORRELATIVE}_cart`)||[]).filter(B=>B.type!=="booking")),location.href=`${location.origin}/cart?code=${$.code}`)}catch(m){console.error("Error al procesar el pago:",m),U.error("Error al procesar el pago",{description:m.message||"Ocurrió un error al procesar tu pago",icon:e.jsx(G,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"top-right"})}finally{v(!1)}}},R=m=>{var $;return(($=N.find(B=>B.correlative===m))==null?void 0:$.description)||""},f=o.reduce((m,$)=>m+($.nights||1),0),C=o.reduce((m,$)=>m+($.guests||2),0),V=R("checkout_bank_name")||"Banco",t=R("checkout_account_number"),M=R("checkout_cci_number"),Y=R("checkout_account_holder");return e.jsx(ue,{isOpen:u,onRequestClose:n,className:"absolute left-1/2 -translate-x-1/2 bg-[#f5f5f5] rounded-2xl shadow-lg w-[95%] max-w-lg top-1/2 -translate-y-1/2 overflow-hidden font-paragraph",overlayClassName:"fixed inset-0 bg-black bg-opacity-50 z-50",ariaHideApp:!1,children:e.jsxs("div",{className:"py-6 px-6 md:px-10 flex flex-col gap-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("img",{src:`/assets/resources/logo.png?v=${crypto.randomUUID()}`,alt:q.APP_NAME,className:"h-12 object-contain",onError:m=>{m.target.onerror=null,m.target.src="/assets/img/logo-bk.svg"}})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Pago por Transferencia"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Realiza la transferencia y sube tu comprobante"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 space-y-3",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(te,{size:18}),"Resumen de tu reserva"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[e.jsx("div",{className:"text-lg font-bold text-primary",children:o.length}),e.jsx("div",{className:"text-xs text-gray-500",children:"Habitación(es)"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[e.jsx("div",{className:"text-lg font-bold text-primary",children:f}),e.jsx("div",{className:"text-xs text-gray-500",children:"Noche(s)"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[e.jsx("div",{className:"text-lg font-bold text-primary",children:C}),e.jsx("div",{className:"text-xs text-gray-500",children:"Huésped(es)"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 space-y-3",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(xs,{size:18}),"Datos para transferencia"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded-lg",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Banco"}),e.jsx("p",{className:"font-medium text-gray-800",children:V})]})}),t&&e.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Número de cuenta"}),e.jsx("p",{className:"font-medium text-gray-800",children:t})]}),e.jsx("button",{onClick:()=>g(t,"account"),className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:z==="account"?e.jsx(Se,{size:18,className:"text-green-500"}):e.jsx(Re,{size:18,className:"text-gray-400"})})]}),M&&e.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"CCI (Interbancario)"}),e.jsx("p",{className:"font-medium text-gray-800",children:M})]}),e.jsx("button",{onClick:()=>g(M,"cci"),className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:z==="cci"?e.jsx(Se,{size:18,className:"text-green-500"}):e.jsx(Re,{size:18,className:"text-gray-400"})})]}),Y&&e.jsx("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded-lg",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Titular"}),e.jsx("p",{className:"font-medium text-gray-800",children:Y})]})})]})]}),e.jsxs("div",{className:"bg-primary text-white rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-sm opacity-90",children:"Total a transferir"}),e.jsxs("p",{className:"text-2xl font-bold",children:[E()," ",F(O)]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Sube tu comprobante de transferencia *"}),e.jsx("input",{type:"file",ref:w,onChange:I,accept:"image/*",className:"hidden"}),h?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:URL.createObjectURL(h),alt:"Comprobante",className:"w-full max-h-48 object-contain rounded-lg"}),e.jsx("button",{type:"button",onClick:X,className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",children:e.jsx(pe,{size:16})})]}):e.jsxs("button",{type:"button",onClick:()=>{var m;return(m=w.current)==null?void 0:m.click()},className:"w-full border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-primary transition-colors",children:[e.jsx(Me,{className:"mx-auto h-8 w-8 text-gray-400"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Haz clic para subir tu comprobante"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"PNG, JPG hasta 5MB"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:T,disabled:i||!h,className:`w-full py-3 px-6 rounded-full font-semibold text-white transition-all ${i||!h?"bg-gray-400 cursor-not-allowed":"bg-primary hover:opacity-90"}`,children:i?"Procesando...":"Confirmar Reserva"}),e.jsx("button",{onClick:n,disabled:i,className:"w-full py-3 px-6 rounded-full font-semibold border border-gray-300 text-gray-700 hover:bg-gray-50 transition-all",children:"Cancelar"})]})]})})}function ks({cart:u,setBooking:n,setCode:o,setCart:j,onContinue:y,noContinue:O,subTotal:l,igv:N,totalFinal:H,user:a,prefixes:i=[],ubigeos:v=[],contacts:h=[],totalPrice:S,data:z,openModal:_,setCouponDiscount:w,setCouponCode:I,totalWithoutDiscounts:X}){const g=(s,r)=>r?r.startsWith(s)?r:`${s}${r}`:"",T=(s,r)=>s?s.startsWith(r)?s.substring(r.length):s:"",R=c.useRef(null),[f,C]=c.useState(null),V=[{value:"dni",label:"DNI"},{value:"ruc",label:"RUC"},{value:"ce",label:"CE"},{value:"pasaporte",label:"Pasaporte"}],[t,M]=c.useState(()=>{var p;const s=(a==null?void 0:a.phone_prefix)||"51",r=T((a==null?void 0:a.phone)||"",s);return{name:(a==null?void 0:a.name)||"",lastname:(a==null?void 0:a.lastname)||"",email:(a==null?void 0:a.email)||"",phone_prefix:s,phone:r,documentType:((p=a==null?void 0:a.document_type)==null?void 0:p.toLowerCase())||"dni",document:(a==null?void 0:a.document_number)||"",comment:"",specialRequests:"",invoiceType:(a==null?void 0:a.invoiceType)||"boleta",businessName:(a==null?void 0:a.businessName)||""}});c.useEffect(()=>{if(a){const s=a.phone_prefix||"51",r=T(a.phone||"",s);M(p=>{var k;return{...p,name:a.name||"",lastname:a.lastname||"",email:a.email||"",phone_prefix:s,phone:r,documentType:((k=a.document_type)==null?void 0:k.toLowerCase())||"dni",document:a.document_number||"",invoiceType:a.invoiceType||"boleta",businessName:a.businessName||""}})}},[a]);const Y=(()=>{const s=h==null?void 0:h.find(k=>k.correlative==="checkout_mercadopago"),r=h==null?void 0:h.find(k=>k.correlative==="checkout_openpay"),p=h==null?void 0:h.find(k=>k.correlative==="checkout_culqi");return(s==null?void 0:s.description)==="true"||(r==null?void 0:r.description)==="true"||(p==null?void 0:p.description)==="true"||K.get("checkout_dwallet")==="true"||K.get("checkout_transfer")==="true"})(),m=s=>{const{name:r,value:p}=s.target;M(k=>({...k,[r]:p})),r==="invoiceType"&&M(k=>({...k,documentType:p==="factura"?"ruc":"dni",document:"",businessName:p==="factura"?k.businessName:""}))},[$,B]=c.useState(!1),[ae,se]=c.useState(!1),[d,P]=c.useState({}),[W,Z]=c.useState(""),[b,de]=c.useState(null),[Es,Ts]=c.useState(0),[Ne,ve]=c.useState(!1),[we,re]=c.useState(""),[ze,he]=c.useState(!1),[ne,Ie]=c.useState(0),[Ae,Be]=c.useState(null),L=s=>Math.round((s+Number.EPSILON)*100)/100,D=(()=>{if(!b)return 0;const s=L(l+N);if(b.discount_type==="percentage"){const r=parseFloat(b.discount_value)||0;return L(s*(r/100))}else return L(parseFloat(b.discount_value)||0)})(),ee=L(l+N),ge=(()=>{if(!Ae||ne<=0)return 0;const s=Math.max(0,L(ee-D));return L(s*(ne/100))})(),me=(()=>{const s=L(ee),r=Math.max(0,L(s-D)),p=L(r+ge);return Math.max(0,p)})(),Ue=()=>{const s={};return t.name||(s.name="Nombre es requerido"),t.lastname||(s.lastname="Apellido es requerido"),t.email||(s.email="Email es requerido"),t.phone||(s.phone="Teléfono es requerido"),t.document||(s.document="Documento es requerido"),t.email&&!/\S+@\S+\.\S+/.test(t.email)&&(s.email="Email inválido"),t.document&&(t.documentType==="dni"&&t.document.length!==8?s.document="DNI debe tener 8 dígitos":t.documentType==="ruc"&&t.document.length!==11&&(s.document="RUC debe tener 11 dígitos")),t.invoiceType==="factura"&&!t.businessName&&(s.businessName="Razón social es requerida para factura"),P(s),Object.keys(s).length===0},qe=s=>{const r=Object.keys(s)[0];setTimeout(()=>{let p=document.querySelector(`[name="${r}"]`);p&&(p.classList.add("highlight-error"),setTimeout(()=>p.classList.remove("highlight-error"),2e3),p.scrollIntoView({behavior:"smooth",block:"center"}),["INPUT","SELECT","TEXTAREA"].includes(p.tagName)&&p.focus())},100)},He=async()=>{if(!W.trim()){re("Ingresa un código de cupón");return}ve(!0),re("");try{const s=await cs.validate({code:W,total:ee});if(s.valid){if(de(s.coupon),C(s.coupon),w)if(s.coupon.discount_type==="percentage"){const r=ee*(parseFloat(s.coupon.discount_value)/100);w(L(r))}else w(L(parseFloat(s.coupon.discount_value)));I&&I(W),U.success("Cupón aplicado",{description:`Descuento de ${s.coupon.discount_type==="percentage"?s.coupon.discount_value+"%":E()+" "+s.coupon.discount_value}`,icon:e.jsx(ie,{className:"h-5 w-5 text-green-500"}),duration:3e3,position:"top-right"})}else re(s.message||"Cupón no válido")}catch(s){console.error("Error validating coupon:",s),re("Error al validar el cupón")}finally{ve(!1)}},Ve=()=>{de(null),C(null),Z(""),re(""),w&&w(0),I&&I(null)},[De,fe]=c.useState(!1),[Ge,be]=c.useState(!1),[Ss,Rs]=c.useState(null),[We,Ce]=c.useState(!1),[Je,ke]=c.useState(!1),[$s,Qe]=c.useState(null),[_e,je]=c.useState(null),Xe=s=>{if(s.preventDefault(),!a){he(!0);return}if(!Ue()){qe(d);return}fe(!0)},Ye=async s=>{try{let r=0;switch(s){case"tarjeta":r=parseFloat(q.get("checkout_mercadopago_commission")||0);break;case"culqi":r=parseFloat(q.get("checkout_culqi_commission")||0);break;case"openpay":r=parseFloat(q.get("checkout_openpay_commission")||0);break;case"yape":r=parseFloat(q.get("checkout_dwallet_commission")||0);break;case"transferencia":r=parseFloat(q.get("checkout_transfer_commission")||0);break;default:r=0}if(Ie(r),Be(s),fe(!1),Qe(s),s==="openpay"){be(!0);return}const p=L((ee-D)*(r/100)),k=L(ee-D+p),J=u.map(x=>({id:x.id,name:x.name,room_type:x.room_type,check_in:x.check_in||x.checkIn,check_out:x.check_out||x.checkOut,nights:x.nights||1,guests:x.guests||2,price:x.price,final_price:x.final_price||x.price,image:x.image})),A={user_id:(a==null?void 0:a.id)||"",name:(t==null?void 0:t.name)||"",lastname:(t==null?void 0:t.lastname)||"",fullname:`${t==null?void 0:t.name} ${t==null?void 0:t.lastname}`,phone_prefix:(t==null?void 0:t.phone_prefix)||"51",email:(t==null?void 0:t.email)||"",phone:g(t.phone_prefix||"51",t.phone),country:"Perú",comment:(t==null?void 0:t.comment)||"",special_requests:(t==null?void 0:t.specialRequests)||"",amount:k||0,delivery_type:"domicilio",details:JSON.stringify(J),cart:J,booking_type:"rooms",invoiceType:t.invoiceType||"",documentType:t.documentType||"",document:t.document||"",businessName:t.businessName||"",payment_method:s||null,coupon_id:b?b.id:null,coupon_discount:D||0,payment_commission:p||0,payment_commission_percentage:r||0,total_amount:k||0};if(je(A),s==="tarjeta"){if(!window.MercadoPago){console.error("❌ MercadoPago aún no se ha cargado.");return}try{const oe=await os(A);oe.status?(n(oe.sale),o(oe.code),y()):U.error("Error en el Pago",{description:"El pago ha sido rechazado",icon:e.jsx(G,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"})}catch{U.error("Error en el Pago",{description:"No se llegó a procesar el pago",icon:e.jsx(G,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"})}}else if(s==="culqi"){se(!0);try{if(!q.CULQI_ENABLED){U.error("Método de pago no disponible",{description:"El procesamiento de pagos con Culqi está temporalmente deshabilitado",icon:e.jsx(G,{className:"h-5 w-5 text-red-500"}),duration:4e3,position:"top-center"}),se(!1);return}const x=await is(A);x.status?(n(x.sale),o(x.code),y()):U.error("Error en el Pago",{description:x.message||"El pago ha sido rechazado",icon:e.jsx(G,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"})}catch{U.error("Error en el Pago",{description:"No se llegó a procesar el pago",icon:e.jsx(G,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"})}finally{se(!1)}}else s==="yape"?(je(A),Ce(!0)):s==="transferencia"&&(je(A),ke(!0))}catch(r){console.error("Error en pago:",r),U.error("Error",{description:"Ocurrió un error inesperado",icon:e.jsx(G,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"})}},Ke=async s=>{be(!1);try{const r=L((ee-D)*(ne/100)),p=L(ee-D+r),k=u.map(x=>({id:x.id,name:x.name,room_type:x.room_type,checkIn:x.checkIn,checkOut:x.checkOut,nights:x.nights||1,guests:x.guests||2,price:x.price,final_price:x.final_price||x.price,image:x.image})),J={...s,user_id:(a==null?void 0:a.id)||"",name:(t==null?void 0:t.name)||"",lastname:(t==null?void 0:t.lastname)||"",fullname:`${t==null?void 0:t.name} ${t==null?void 0:t.lastname}`,phone_prefix:(t==null?void 0:t.phone_prefix)||"51",email:(t==null?void 0:t.email)||"",phone:g(t.phone_prefix||"51",t.phone),country:"Perú",comment:(t==null?void 0:t.comment)||"",special_requests:(t==null?void 0:t.specialRequests)||"",amount:p||0,cart:k,booking_type:"rooms",invoiceType:t.invoiceType||"",documentType:t.documentType||"",document:t.document||"",businessName:t.businessName||"",payment_method:"openpay",coupon_id:b?b.id:null,coupon_discount:D||0,payment_commission:r||0,payment_commission_percentage:ne||0,total_amount:p||0},A=await ls(J);A.status?(n(A.sale),o(A.code),y()):U.error("Error en el Pago",{description:A.message||"El pago ha sido rechazado",icon:e.jsx(G,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"})}catch(r){console.error("Error en pago OpenPay:",r),U.error("Error en el Pago",{description:"No se llegó a procesar el pago",icon:e.jsx(G,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"})}},Ze=u.reduce((s,r)=>s+(r.nights||1),0),es=u.reduce((s,r)=>s+(r.guests||2),0);return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 font-paragraph",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold customtext-neutral-dark mb-2",children:"Datos de la reserva"}),e.jsx("p",{className:"customtext-neutral-light",children:"Completa tus datos para confirmar la reserva"})]}),e.jsxs("div",{className:"bg-white border border-sections-color rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-semibold customtext-neutral-dark mb-4 flex items-center gap-2",children:[e.jsx(xe,{className:"w-5 h-5 customtext-primary"}),"Datos del huésped principal"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium customtext-neutral-dark mb-1",children:["Nombre ",e.jsx("span",{className:"customtext-danger",children:"*"})]}),e.jsx("input",{type:"text",name:"name",value:t.name,onChange:m,className:`w-full border ${d.name?"border-danger":"border-sections-color"} rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-accent focus:border-transparent outline-none transition-all`,placeholder:"Tu nombre"}),d.name&&e.jsx("p",{className:"customtext-danger text-xs mt-1",children:d.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium customtext-neutral-dark mb-1",children:["Apellido ",e.jsx("span",{className:"customtext-danger",children:"*"})]}),e.jsx("input",{type:"text",name:"lastname",value:t.lastname,onChange:m,className:`w-full border ${d.lastname?"border-danger":"border-sections-color"} rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-accent focus:border-transparent outline-none transition-all`,placeholder:"Tu apellido"}),d.lastname&&e.jsx("p",{className:"customtext-danger text-xs mt-1",children:d.lastname})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium customtext-neutral-dark mb-1",children:["Email ",e.jsx("span",{className:"customtext-danger",children:"*"})]}),e.jsx("input",{type:"email",name:"email",value:t.email,onChange:m,className:`w-full border ${d.email?"border-danger":"border-sections-color"} rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-accent focus:border-transparent outline-none transition-all`,placeholder:"tu@email.com"}),d.email&&e.jsx("p",{className:"customtext-danger text-xs mt-1",children:d.email})]}),e.jsxs("div",{className:"w-full",children:[e.jsxs("label",{htmlFor:"phone",className:"block text-sm font-medium customtext-neutral-dark mb-1",children:["Celular ",e.jsx("span",{className:"customtext-danger",children:"*"})]}),e.jsxs("div",{className:"flex gap-2 w-full",children:[e.jsx("div",{className:"max-w-[120px]",children:e.jsx(us,{name:"phone_prefix",value:i.find(s=>s.realCode===t.phone_prefix)?{value:i.find(s=>s.realCode===t.phone_prefix).realCode,label:`${i.find(s=>s.realCode===t.phone_prefix).beautyCode}`,flag:i.find(s=>s.realCode===t.phone_prefix).flag,code:i.find(s=>s.realCode===t.phone_prefix).beautyCode,country:i.find(s=>s.realCode===t.phone_prefix).country}:null,onChange:s=>M(r=>({...r,phone_prefix:(s==null?void 0:s.value)||""})),options:i.sort((s,r)=>s.country.localeCompare(r.country)).map(s=>({value:s.realCode,label:s.beautyCode,flag:s.flag,code:s.beautyCode,country:s.country})),formatOptionLabel:({flag:s,code:r,country:p})=>{var Pe,Ee;const k=i.find(le=>le.country===p),J=((Ee=(Pe=k==null?void 0:k.isoCode)==null?void 0:Pe.ISO1)==null?void 0:Ee.toLowerCase())||p.toLowerCase().substring(0,2),A=[`https://flagsapi.com/${J.toUpperCase()}/flat/24.png`,`https://flagcdn.com/${J}.svg`,`https://purecatamphetamine.github.io/country-flag-icons/3x2/${J.toUpperCase()}.svg`,`https://cdn.jsdelivr.net/gh/hampusborgos/country-flags@main/svg/${J}.svg`,`https://raw.githubusercontent.com/lipis/flag-icons/main/flags/4x3/${J}.svg`];let x=0;const oe=le=>{if(x++,x<A.length)le.target.src=A[x];else{le.target.style.display="none";const Te=le.target.parentNode.querySelector(".flag-fallback");Te&&(Te.style.display="flex")}};return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:A[0],alt:`Bandera de ${p}`,className:"w-6 h-4 object-cover rounded-sm flex-shrink-0 border border-gray-200",onError:oe,style:{minWidth:"24px",minHeight:"16px"}}),e.jsx("div",{className:"flag-fallback w-6 h-4 bg-gray-200 rounded-sm flex items-center justify-center flex-shrink-0 border border-gray-300",style:{display:"none",minWidth:"24px",minHeight:"16px"},children:e.jsx("span",{className:"text-xs text-gray-500",children:J.toUpperCase()})}),e.jsx("span",{className:"font-medium text-sm",children:r})]})},placeholder:"País",isClearable:!1,isSearchable:!0,styles:{control:s=>({...s,minHeight:"48px",border:"1px solid #d1d5db",borderRadius:"0.75rem",fontSize:"14px","&:hover":{borderColor:"#9ca3af"},"&:focus-within":{borderColor:"#3b82f6",boxShadow:"0 0 0 2px rgba(59, 130, 246, 0.1)"}}),option:(s,r)=>({...s,backgroundColor:r.isSelected?"#3b82f6":r.isFocused?"#f3f4f6":"white",color:r.isSelected?"white":"#374151",padding:"8px 12px"}),singleValue:s=>({...s,display:"flex",alignItems:"center",gap:"6px"}),menu:s=>({...s,zIndex:9999})},filterOption:(s,r)=>s.data.country.toLowerCase().includes(r.toLowerCase())||s.data.code.toLowerCase().includes(r.toLowerCase())})}),e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"tel",id:"phone",name:"phone",value:t.phone,onChange:m,className:`w-full border ${d.phone?"border-danger":"border-sections-color"} rounded-xl px-4 py-3 focus:ring-2 focus:ring-accent focus:border-transparent outline-none transition-all`,placeholder:"000 000 000"})})]}),d.phone&&e.jsx("p",{className:"customtext-danger text-xs mt-1",children:d.phone})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium customtext-neutral-dark mb-1",children:["Tipo de documento ",e.jsx("span",{className:"customtext-danger",children:"*"})]}),e.jsx("select",{name:"documentType",value:t.documentType,onChange:m,className:"w-full border border-sections-color rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-accent focus:border-transparent outline-none transition-all",children:V.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium customtext-neutral-dark mb-1",children:["Número de documento ",e.jsx("span",{className:"customtext-danger",children:"*"})]}),e.jsx("input",{type:"text",name:"document",value:t.document,onChange:m,className:`w-full border ${d.document?"border-danger":"border-sections-color"} rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-accent focus:border-transparent outline-none transition-all`,placeholder:t.documentType==="dni"?"12345678":"Número de documento",maxLength:t.documentType==="dni"?8:t.documentType==="ruc"?11:20}),d.document&&e.jsx("p",{className:"customtext-danger text-xs mt-1",children:d.document})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium customtext-neutral-dark mb-1",children:"Solicitudes especiales (opcional)"}),e.jsx("textarea",{name:"specialRequests",value:t.specialRequests,onChange:m,rows:3,className:"w-full border border-sections-color rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-accent focus:border-transparent outline-none transition-all resize-none",placeholder:"¿Tienes alguna solicitud especial? (cama extra, llegada tarde, etc.)"})]})]}),e.jsxs("div",{className:"bg-white border border-sections-color rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-semibold customtext-neutral-dark mb-4 flex items-center gap-2",children:[e.jsx(ps,{className:"w-5 h-5 customtext-primary"}),"Comprobante de pago"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("label",{className:`flex items-center gap-3 p-4 border-2 rounded-xl cursor-pointer transition-all ${t.invoiceType==="boleta"?"border-accent bg-accent/5":"border-sections-color hover:border-accent"}`,children:[e.jsx("input",{type:"radio",name:"invoiceType",value:"boleta",checked:t.invoiceType==="boleta",onChange:m,className:"text-accent focus:ring-accent"}),e.jsx("span",{className:"font-medium customtext-neutral-dark",children:"Boleta"})]}),e.jsxs("label",{className:`flex items-center gap-3 p-4 border-2 rounded-xl cursor-pointer transition-all ${t.invoiceType==="factura"?"border-accent bg-accent/5":"border-sections-color hover:border-accent"}`,children:[e.jsx("input",{type:"radio",name:"invoiceType",value:"factura",checked:t.invoiceType==="factura",onChange:m,className:"text-accent focus:ring-accent"}),e.jsx("span",{className:"font-medium",children:"Factura"})]})]}),t.invoiceType==="factura"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium customtext-neutral-dark mb-1",children:["Razón Social ",e.jsx("span",{className:"customtext-danger",children:"*"})]}),e.jsx("input",{type:"text",name:"businessName",value:t.businessName,onChange:m,className:`w-full border ${d.businessName?"border-danger":"border-sections-color"} rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-accent focus:border-transparent outline-none transition-all`,placeholder:"Nombre de la empresa"}),d.businessName&&e.jsx("p",{className:"customtext-danger text-xs mt-1",children:d.businessName})]})]}),e.jsx("div",{className:"lg:hidden",children:e.jsx("button",{onClick:O,className:"w-full py-3 px-6 text-center rounded-full font-semibold customtext-neutral-dark border-2 border-accent hover:bg-accent hover:text-white transition-all duration-300",children:"Volver al carrito"})})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white border border-sections-color rounded-2xl shadow-md p-6 sticky top-4",children:[e.jsx("h3",{className:"text-xl font-bold customtext-neutral-dark mb-6",children:"Resumen de pago"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 pb-6 border-b border-sections-color mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold customtext-primary",children:u.length}),e.jsx("div",{className:"text-xs customtext-neutral-light mt-1",children:u.length===1?"Habitación":"Habitaciones"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold customtext-primary",children:Ze}),e.jsx("div",{className:"text-xs customtext-neutral-light mt-1",children:"Noches"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold customtext-primary",children:es}),e.jsx("div",{className:"text-xs customtext-neutral-light mt-1",children:"Huéspedes"})]})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"customtext-neutral-light",children:"Subtotal"}),e.jsxs("span",{className:"font-medium customtext-neutral-dark",children:[E()," ",F(l)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"customtext-neutral-light",children:"Impuestos y cargos"}),e.jsxs("span",{className:"font-medium customtext-neutral-dark",children:[E()," ",F(N)]})]}),b&&D>0&&e.jsxs("div",{className:"flex justify-between text-sm customtext-success",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ie,{size:14}),"Cupón (",b.code,")"]}),e.jsxs("span",{className:"font-medium",children:["-",E()," ",F(D)]})]}),ge>0&&e.jsxs("div",{className:"flex justify-between text-sm customtext-warning",children:[e.jsxs("span",{children:["Comisión (",ne,"%)"]}),e.jsxs("span",{className:"font-medium",children:["+",E()," ",F(ge)]})]})]}),e.jsxs("div",{className:"mb-6 pb-6 border-b border-sections-color",children:[e.jsx("label",{className:"block text-sm font-medium customtext-neutral-dark mb-2",children:"¿Tienes un cupón?"}),b?e.jsxs("div",{className:"flex items-center justify-between bg-success/10 border border-success rounded-lg px-4 py-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{size:18,className:"customtext-success"}),e.jsx("span",{className:"font-medium customtext-success",children:b.code})]}),e.jsx("button",{onClick:Ve,className:"customtext-danger hover:text-danger text-sm font-medium",children:"Quitar"})]}):e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",ref:R,value:W,onChange:s=>Z(s.target.value.toUpperCase()),placeholder:"Código de cupón",className:"flex-1 border border-gray-300 rounded-full px-4 py-2.5 text-sm focus:ring-2 focus:ring-accent focus:border-transparent outline-none transition-all"}),e.jsx("button",{onClick:He,disabled:Ne,className:"px-6 py-2.5 bg-accent hover:bg-secondary text-white rounded-full text-sm font-bold hover:shadow-lg transition-all duration-300 disabled:opacity-50 hover:scale-105 active:scale-95",children:Ne?"...":"Aplicar"})]}),we&&e.jsx("p",{className:"customtext-danger text-xs mt-2",children:we})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-bold customtext-neutral-dark",children:"Total a pagar"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold customtext-primary",children:[E()," ",F(me)]}),e.jsx("div",{className:"text-xs customtext-neutral-light",children:"Incluye impuestos"})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:Xe,disabled:ae||!Y,className:`w-full py-4 px-6 rounded-full font-bold text-base transition-all duration-300 bg-primary hover:bg-secondary text-white hover:shadow-2xl hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed shadow-lg ${(z==null?void 0:z.class_button)||""}`,children:ae?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Procesando..."]}):"Confirmar y pagar"}),e.jsx("button",{onClick:O,className:"hidden lg:block w-full py-3 px-6 text-center rounded-full font-semibold customtext-primary border-2 border-accent hover:bg-accent hover:text-white transition-all duration-300 shadow-md hover:shadow-lg",children:"Volver al carrito"})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-sections-color",children:e.jsxs("p",{className:"text-xs customtext-neutral-light leading-relaxed",children:["Al proceder, aceptas nuestros"," ",e.jsx("button",{onClick:()=>_&&_(1),className:"customtext-accent font-medium hover:underline",children:"Términos y Condiciones"})," ","y"," ",e.jsx("button",{onClick:()=>_&&_(0),className:"customtext-accent font-medium hover:underline",children:"Política de Privacidad"})]})})]})}),e.jsx(ue,{isOpen:ze,onRequestClose:()=>he(!1),contentLabel:"Iniciar sesión",className:"fixed top-0 left-0 right-0 bottom-0 flex items-center justify-center p-4 z-50",overlayClassName:"fixed inset-0 bg-black bg-opacity-50 z-[999]",ariaHideApp:!1,children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(hs,{className:"w-16 h-16 customtext-neutral-light mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold customtext-neutral-dark mb-2",children:"Inicia sesión"}),e.jsx("p",{className:"customtext-neutral-light",children:"Para continuar con tu reserva, necesitas iniciar sesión o crear una cuenta."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("a",{href:"/login",className:"block w-full py-4 px-6 text-center rounded-full font-bold bg-primary hover:bg-secondary text-white hover:shadow-xl transition-all duration-300 shadow-lg hover:scale-105 active:scale-95",children:"Iniciar sesión"}),e.jsx("a",{href:"/register",className:"block w-full py-3 px-6 text-center rounded-full font-semibold customtext-primary border-2 border-accent hover:bg-accent hover:text-white transition-all duration-300 shadow-md hover:shadow-lg",children:"Crear cuenta"}),e.jsx("button",{onClick:()=>he(!1),className:"block w-full py-2 text-center customtext-neutral-light hover:customtext-neutral-dark text-sm font-medium transition-colors",children:"Cancelar"})]})]})}),e.jsx(ms,{isOpen:De,contacts:h,cart:u,totalFinal:b?me:H,onClose:()=>fe(!1),onPaymentComplete:Ye}),e.jsx(ns,{isOpen:Ge,onClose:()=>be(!1),onTokenCreated:Ke}),e.jsx(vs,{isOpen:We,cart:u,subTotal:l,igv:N,totalFinal:b?me:H,request:_e,onClose:()=>Ce(!1),contacts:h,coupon:b,descuentofinal:D}),e.jsx(Cs,{isOpen:Je,cart:u,subTotal:l,igv:N,totalFinal:b?me:H,contacts:h,request:_e,onClose:()=>ke(!1),coupon:b,descuentofinal:D})]})}const _s=({code:u})=>new Promise(async(n,o)=>{try{console.log("Codigo de reserva:",u);const{status:j,result:y}=await Q.Fetch("./api/hotels/bookings/order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:u})});if(!j||!y.order){Q.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:(y==null?void 0:y.message)||"Error: no se pudo cargar la reserva",type:"danger"}),o((y==null?void 0:y.message)||"Error: no se pudo cargar la reserva");return}n(y)}catch(j){console.error("Error en recoveryBookingData:",j),Q.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:j.message||"Error al cargar los datos de la reserva",type:"danger"}),o(j.message||"Error al cargar los datos de la reserva")}});function Ps({setCart:u,cart:n,code:o,data:j,couponDiscount:y=0,couponCode:O=null}){var R;const[l,N]=c.useState(null),[H,a]=c.useState(!0),[i,v]=c.useState(null);c.useEffect(()=>{o&&((async()=>{try{const C=await _s({code:o});N(C.order)}catch(C){v(C.message||C)}finally{a(!1)}})(),Q.Local.delete(`${q.APP_CORRELATIVE}_cart`))},[o]);const h=f=>{if(!f)return"";try{const C=new Date(f);return Fe(C,"dd 'de' MMMM, yyyy",{locale:Oe})}catch{return f}},S=f=>({standard:"Estándar",suite:"Suite",deluxe:"Deluxe",presidential:"Presidencial",family:"Familiar",executive:"Ejecutiva",single:"Individual",double:"Doble"})[f]||f;if(H)return e.jsx("div",{className:"mx-auto",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 font-paragraph text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{children:"Cargando detalles de tu reserva..."})]})});if(i)return e.jsx("div",{className:"mx-auto",children:e.jsx("div",{className:"bg-white rounded-lg shadow p-6 font-paragraph text-center text-red-500",children:e.jsxs("p",{children:["Error al cargar la reserva: ",i]})})});if(!l)return e.jsx("div",{className:"mx-auto",children:e.jsx("div",{className:"bg-white rounded-lg shadow p-6 font-paragraph text-center",children:e.jsx("p",{children:"No se encontraron datos de la reserva"})})});const z=((R=l==null?void 0:l.items)==null?void 0:R.reduce((f,C)=>{const V=C.final_price||C.price||0,t=C.nights||1;return f+V*t},0))||0,_=parseFloat((z/1.18).toFixed(2)),w=parseFloat((z-_).toFixed(2)),I=parseFloat(l.coupon_discount||0),X=parseFloat(l.payment_commission||0),T=parseFloat(_)+parseFloat(w)-I+X;return e.jsx("div",{className:"max-w-4xl mx-auto font-paragraph",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-success p-8 text-white text-center",children:[e.jsx(ie,{className:"w-16 h-16 mx-auto mb-4"}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"¡Reserva Confirmada!"}),e.jsxs("p",{className:"text-lg opacity-90",children:["Código de reserva: ",e.jsx("span",{className:"font-mono font-bold",children:l.code})]})]}),e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(xe,{className:"w-5 h-5 customtext-primary"}),"Información del Huésped"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 bg-sections-color rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ye,{className:"w-5 h-5 text-gray-400 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Nombre completo"}),e.jsxs("p",{className:"font-semibold",children:[l.name," ",l.lastname]})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ye,{className:"w-5 h-5 text-gray-400 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),e.jsx("p",{className:"font-semibold",children:l.email})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(gs,{className:"w-5 h-5 text-gray-400 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Teléfono"}),e.jsxs("p",{className:"font-semibold",children:["+",l.phone_prefix," ",l.phone]})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(fs,{className:"w-5 h-5 text-gray-400 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Documento"}),e.jsx("p",{className:"font-semibold",children:l.document})]})]})]})]}),e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Habitaciones Reservadas"}),e.jsx("div",{className:"space-y-4",children:l.items&&l.items.map((f,C)=>{const V=f.final_price||f.price||0,t=f.nights||1,M=V*t,Y=f.guests||2;return e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:f.image?`/storage/images/item/${f.image}`:"/assets/img/noimage/no_img.jpg",alt:f.name,className:"w-24 h-24 object-cover rounded-lg",onError:m=>m.target.src="/assets/img/noimage/no_img.jpg"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-lg mb-2",children:f.name}),f.room_type&&e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Tipo: ",S(f.room_type)]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{size:16,className:"customtext-info"}),e.jsx("span",{className:"text-gray-600",children:"Check-in:"}),e.jsx("span",{className:"font-semibold",children:h(f.check_in)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{size:16,className:"customtext-danger"}),e.jsx("span",{className:"text-gray-600",children:"Check-out:"}),e.jsx("span",{className:"font-semibold",children:h(f.check_out)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($e,{size:16,className:"customtext-secondary"}),e.jsx("span",{className:"text-gray-600",children:"Noches:"}),e.jsx("span",{className:"font-semibold",children:t})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{size:16,className:"customtext-success"}),e.jsx("span",{className:"text-gray-600",children:"Huéspedes:"}),e.jsx("span",{className:"font-semibold",children:Y})]})]}),e.jsxs("div",{className:"mt-3 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Precio por noche"}),e.jsxs("p",{className:"font-semibold",children:[E()," ",F(V)]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Total habitación"}),e.jsxs("p",{className:"font-bold text-lg customtext-primary",children:[E()," ",F(M)]})]})]})]})]})},C)})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Resumen de Pago"}),e.jsxs("div",{className:"space-y-3 bg-sections-color rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Subtotal"}),e.jsxs("span",{className:"font-semibold",children:[E()," ",F(_)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"IGV (18%)"}),e.jsxs("span",{className:"font-semibold",children:[E()," ",F(w)]})]}),l.coupon_id&&e.jsxs("div",{className:"flex justify-between items-center customtext-success border-t pt-2",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(ie,{size:16}),"Cupón aplicado (",l.coupon_code,")"]}),e.jsxs("span",{className:"font-semibold",children:["-",E()," ",F(I)]})]}),X>0&&e.jsxs("div",{className:"flex justify-between items-center customtext-warning border-t pt-2",children:[e.jsxs("span",{className:"text-sm",children:["Comisión método de pago (",l.payment_commission_percentage||0,"%)"]}),e.jsxs("span",{className:"font-semibold",children:["+",E()," ",F(X)]})]}),e.jsxs("div",{className:"flex justify-between items-center font-bold text-xl border-t-2 pt-3 mt-3",children:[e.jsx("span",{children:"Total Pagado"}),e.jsxs("span",{className:"customtext-primary",children:[E()," ",F(T)]})]}),l.payment_method&&e.jsxs("div",{className:"text-center text-sm text-gray-600 pt-2",children:["Método de pago: ",e.jsx("span",{className:"font-semibold capitalize",children:l.payment_method})]})]})]}),e.jsx("div",{className:"p-6 bg-sections-color border-t border-info",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ye,{className:"w-5 h-5 customtext-info mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold customtext-primary mb-2",children:"Confirmación enviada por email"}),e.jsxs("p",{className:"text-sm customtext-neutral-dark",children:["Hemos enviado un correo electrónico a ",e.jsx("span",{className:"font-semibold",children:l.email})," con todos los detalles de tu reserva. Por favor, revisa tu bandeja de entrada y la carpeta de spam."]})]})]})}),l.comment&&e.jsxs("div",{className:"p-6 bg-sections-color border-t border-warning",children:[e.jsx("h3",{className:"font-semibold customtext-primary mb-2",children:"Comentarios adicionales"}),e.jsx("p",{className:"text-sm customtext-neutral-dark",children:l.comment})]}),e.jsx("div",{className:"p-6 border-t border-gray-200",children:e.jsx(ds,{href:"/habitaciones",className:`w-full !rounded-full py-4 text-white ${j==null?void 0:j.class_button}`,children:"Ver más habitaciones"})}),e.jsxs("div",{className:"p-6 bg-sections-color text-center text-sm text-gray-600",children:[e.jsx("p",{children:"Si tienes alguna pregunta sobre tu reserva, no dudes en contactarnos."}),e.jsxs("p",{className:"mt-2",children:[e.jsx("span",{className:"font-semibold",children:"Código de reserva:"})," ",l.code]})]})]})})}function Nt({cart:u,setCart:n,user:o,prefixes:j,ubigeos:y,items:O,contacts:l,data:N,generals:H=[]}){const[a,i]=c.useState(1),v=c.useMemo(()=>u.filter(d=>d.type==="booking"),[u]),h=d=>{n(P=>{const W=P.filter(b=>b.type!=="booking"),Z=typeof d=="function"?d(P.filter(b=>b.type==="booking")):d;return[...W,...Z]})},S=v.reduce((d,P)=>{const W=P.final_price||P.price,Z=P.nights||1;return d+W*Z},0),z=parseFloat(K.igv_checkout||0);let _,w;z>0?(_=S,w=parseFloat((S*(z/100)).toFixed(2))):(_=parseFloat((S/1.18).toFixed(2)),w=parseFloat((S-_).toFixed(2)));const[I,X]=c.useState(0),[g,T]=c.useState(null),[R,f]=c.useState(null),C=d=>f(d),V=()=>f(null),t={privacy_policy:"Políticas de privacidad",terms_conditions:"Términos y condiciones",saleback_policy:"Políticas de cancelación y cambios"},M=_+w,Y=Math.max(0,M-I),[m,$]=c.useState([]),[B,ae]=c.useState([]);c.useEffect(()=>{const P=new URLSearchParams(window.location.search).get("code");P&&(ae(P),i(3))},[window.location.search]),c.useEffect(()=>{B&&n(d=>d.filter(P=>P.type!=="booking"))},[B]),c.useEffect(()=>{(()=>{const P=document.createElement("script");P.src="https://sdk.mercadopago.com/js/v2",P.async=!0,document.body.appendChild(P)})()},[]);const se=d=>{i(d),window.scrollTo({top:0,behavior:"smooth"})};return e.jsx("div",{className:"bg-sections-color",children:e.jsxs("div",{className:"min-h-screen  py-4 md:py-12 px-2 sm:px-primary 2xl:px-0 2xl:max-w-7xl mx-auto",children:[e.jsxs("div",{className:"bg-white p-3 md:p-8 rounded-xl md:rounded-3xl shadow-sm",children:[e.jsx("div",{className:"mb-6 md:mb-10",children:e.jsxs("div",{className:"flex items-center justify-between gap-1 md:gap-4 max-w-3xl mx-auto",children:[e.jsxs("div",{className:`flex flex-col items-center md:flex-row md:items-center gap-1 md:gap-2 transition-all duration-300 ${a>=1?"customtext-primary font-bold":"customtext-neutral-light"}`,children:[e.jsx("span",{className:`w-10 h-10 md:w-12 md:h-12 rounded-full border-2 flex items-center justify-center text-sm md:text-base font-bold shadow-lg transition-all duration-300 ${a>=1?"bg-primary text-white border-primary scale-110":"bg-white customtext-neutral-light border-gray-300"}`,children:"1"}),e.jsx("span",{className:"text-[10px] md:text-sm font-semibold text-center",children:"Carrito"})]}),e.jsx("div",{className:"mb-4 lg:mb-0 flex-1 h-1 bg-gray-200 relative rounded-full overflow-hidden",children:e.jsx("div",{className:"absolute inset-0 transition-all duration-700 bg-gradient-to-r from-primary to-secondary shadow-md",style:{width:a>1?"100%":"0%"}})}),e.jsxs("div",{className:`flex flex-col items-center md:flex-row md:items-center gap-1 md:gap-2 transition-all duration-300 ${a>1?"customtext-primary font-bold":"customtext-neutral-light"}`,children:[e.jsx("span",{className:`w-10 h-10 md:w-12 md:h-12 rounded-full border-2 flex items-center justify-center text-sm md:text-base font-bold shadow-lg transition-all duration-300 ${a>1?"bg-primary text-white border-primary scale-110":"bg-white customtext-neutral-light border-gray-300"}`,children:"2"}),e.jsx("span",{className:"text-[10px] md:text-sm font-semibold text-center",children:"Pago"})]}),e.jsx("div",{className:"mb-4 lg:mb-0 flex-1 h-1 bg-gray-200 relative rounded-full overflow-hidden",children:e.jsx("div",{className:"absolute inset-0 transition-all duration-700 bg-gradient-to-r from-primary to-secondary shadow-md",style:{width:a>2?"100%":"0%"}})}),e.jsxs("div",{className:`flex flex-col items-center md:flex-row md:items-center gap-1 md:gap-2 transition-all duration-300 ${a===3?"customtext-primary font-bold":"customtext-neutral-light"}`,children:[e.jsx("span",{className:`w-10 h-10 md:w-12 md:h-12 rounded-full border-2 flex items-center justify-center text-sm md:text-base font-bold shadow-lg transition-all duration-300 ${a===3?"bg-success text-white border-success scale-110":"bg-white customtext-neutral-light border-gray-300"}`,children:"3"}),e.jsx("span",{className:"text-[10px] md:text-sm font-semibold text-center",children:"Confirmación"})]})]})}),a===1&&e.jsx(ys,{data:N,cart:v,setCart:h,onContinue:()=>se(2),subTotal:_,totalPrice:S,igv:w,totalFinal:Y,openModal:C,totalWithoutDiscounts:M}),a===2&&e.jsx(ks,{data:N,setCode:ae,cart:v,setBooking:$,setCart:h,onContinue:()=>se(3),noContinue:()=>se(1),subTotal:_,totalPrice:S,igv:w,totalFinal:Y,user:o,prefixes:j,contacts:l,ubigeos:y,items:O,openModal:C,setCouponDiscount:X,setCouponCode:T,totalWithoutDiscounts:M}),a===3&&e.jsx(Ps,{data:N,code:B,setCart:h,cart:m,subTotal:_,totalPrice:S,igv:w,totalFinal:Y,couponDiscount:I,couponCode:g,totalWithoutDiscounts:M})]}),Object.keys(t).map((d,P)=>{var b;const W=t[d],Z=((b=H.find(de=>de.correlative==d))==null?void 0:b.description)??"";return e.jsx(ue,{isOpen:R===P,onRequestClose:V,contentLabel:W,className:"fixed top-0 left-0 right-0 bottom-0 flex items-center justify-center p-4 z-50",overlayClassName:"fixed inset-0 bg-black bg-opacity-50 z-[999]",ariaHideApp:!1,children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-primary to-secondary",children:[e.jsx("h2",{className:"text-2xl font-bold text-white pr-4",children:W}),e.jsx("button",{onClick:V,className:"flex-shrink-0 w-10 h-10 rounded-full bg-white/20 hover:bg-white/30 text-white transition-all duration-300 flex items-center justify-center hover:scale-110 shadow-lg","aria-label":"Cerrar modal",children:e.jsx(pe,{size:20,strokeWidth:2.5})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsx("div",{className:"prose prose-gray max-w-none",children:e.jsx(as,{html:Z})})}),e.jsx("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-200 bg-sections-color",children:e.jsx("button",{onClick:V,className:"px-8 py-3 bg-primary hover:bg-secondary text-white rounded-full transition-all duration-300 font-bold shadow-lg hover:shadow-xl hover:scale-105 active:scale-95",children:"Cerrar"})})]})},P)})]})})}export{Nt as default};
