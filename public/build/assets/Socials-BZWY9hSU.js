var e=Object.defineProperty,a=(a,i,n)=>((a,i,n)=>i in a?e(a,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[i]=n)(a,"symbol"!=typeof i?i+"":i,n);import{c as i,j as n,r as t,O as r,Q as o,V as s,W as c,Y as l,Z as d,_ as m,$ as f,a0 as u,a1 as p,a2 as b,a3 as h,s as j}from"./vendor-react-CtPXetfm.js";import{B as x}from"./Base-B2hVq4yw.js";import{I as g}from"./InputFormGroup-CRGKsLQr.js";import{S as R}from"./SelectFormGroup-2ND56lst.js";import{S as v}from"./SwitchFormGroup-CB0qoXn0.js";import{T as w}from"./TextareaFormGroup-DXMahSF1.js";import{S as k}from"./CartKuchara-Bi-J8T1O.js";import{B as T}from"./BasicRest-DtgqEuc9.js";import{M as S}from"./Modal-CUkY7A3F.js";import{T as y}from"./Table-Wc6W9AoI.js";import{D as F}from"./DxButton-C6FT_beP.js";import{C as N}from"./CreateReactScript-Cjoo020C.js";import{R as B}from"./ReactAppend-RIOEhuYO.js";import"./vendor-swiper-Cr_RrIb_.js";import"./Footer-coriRrmf.js";import"./TippyButton-Dqi9Vaf_.js";import"./Logout-DQyEsGXW.js";import"./MenuItemContainer-UDNHvqM7.js";import"./Menu-BjIZNCK0.js";import"./OpenPayCardModal-CbSnHq7o.js";import"./BooleanLimit-q2Ad9fGY.js";import"./General-ClVW7qxN.js";import"./LaravelSession-ByQnaUD3.js";const C=new class extends T{constructor(){super(...arguments),a(this,"path","admin/socials")}},D=[{id:"facebook",name:"Facebook",icon:r,iconRef:"fab fa-facebook"},{id:"instagram",name:"Instagram",icon:o,iconRef:"fab fa-instagram"},{id:"twitter",name:"Twitter/X",icon:s,iconRef:"fab fa-twitter"},{id:"linkedin",name:"LinkedIn",icon:c,iconRef:"fab fa-linkedin"},{id:"youtube",name:"YouTube",icon:l,iconRef:"fab fa-youtube"},{id:"tiktok",name:"TikTok",icon:d,iconRef:"fab fa-tiktok"},{id:"whatsapp",name:"WhatsApp",icon:m,iconRef:"fab fa-whatsapp"},{id:"telegram",name:"Telegram",icon:f,iconRef:"fab fa-telegram"},{id:"discord",name:"Discord",icon:u,iconRef:"fab fa-discord"},{id:"snapchat",name:"Snapchat",icon:p,iconRef:"fab fa-snapchat"},{id:"pinterest",name:"Pinterest",icon:b,iconRef:"fab fa-pinterest"},{id:"reddit",name:"Reddit",icon:h,iconRef:"fab fa-reddit"}],E=({})=>{const e=t.useRef(),a=t.useRef(),i=t.useRef(),r=t.useRef(),o=t.useRef(),s=t.useRef(),[c,l]=t.useState(!1),[d,m]=t.useState(null);t.useEffect(()=>{const e=()=>{r.current&&$(r.current).on("change",function(){(e=>{const a=D.find(a=>a.id===e);m(a)})($(this).val())})};return $(a.current).on("shown.bs.modal",e),()=>{r.current&&$(r.current).off("change"),$(a.current).off("shown.bs.modal",e)}},[]);const f=e=>{l(!!e?.id),i.current.value=e?.id??"",o.current.value=e?.name??"",s.current.value=e?.link??"";const n=D.find(a=>a.name===e?.description||a.iconRef===e?.icon);n?(m(n),setTimeout(()=>{$(r.current).val(n.id).trigger("change")},100)):(m(null),setTimeout(()=>{$(r.current).val("").trigger("change")},100)),$(a.current).modal("show")};return n.jsxs(n.Fragment,{children:[n.jsx(y,{gridRef:e,title:"Redes Sociales",rest:C,toolBar:a=>{a.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(e.current).dxDataGrid("instance").refresh()}}),a.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Nuevo registro",hint:"Nuevo registro",onClick:()=>f()}})},rowDragging:{allowReordering:!0,onReorder:async e=>{const a=e.toIndex;try{await C.reorder(e.itemData.id,a)&&await e.component.refresh()}catch(i){}},dropFeedbackMode:"push"},sorting:{mode:"single"},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"order_index",caption:"Orden",visible:!1,sortOrder:"asc",sortIndex:0},{dataField:"name",caption:"Usuario"},{dataField:"description",caption:"Red Social",cellTemplate:(e,{data:a})=>{const i=D.find(e=>e.name===a.description||e.iconRef===a.icon);if(i){const t=i.icon;e.html(j.renderToString(n.jsxs("span",{className:"d-flex align-items-center",children:[n.jsx(t,{className:"me-2",size:16}),a.description]})))}else e.html(j.renderToString(n.jsxs(n.Fragment,{children:[n.jsx("i",{className:`fab ${a.icon} me-1`}),a.description]})))}},{dataField:"link",caption:"Link"},{dataField:"visible",caption:"Visible",dataType:"boolean",cellTemplate:(a,{data:i})=>{$(a).empty(),B(a,n.jsx(v,{checked:1==i.visible,onChange:()=>(async({id:a,value:i})=>{await C.boolean({id:a,field:"visible",value:i})&&$(e.current).dxDataGrid("instance").refresh()})({id:i.id,value:!i.visible})}))}},{caption:"Acciones",cellTemplate:(a,{data:i})=>{a.css("text-overflow","unset"),a.append(F({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>f(i)})),a.append(F({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>(async a=>{const{isConfirmed:i}=await k.fire({title:"Eliminar registro",text:"Â¿Estas seguro de eliminar este registro?",icon:"warning",showCancelButton:!0,confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"});if(!i)return;await C.delete(a)&&$(e.current).dxDataGrid("instance").refresh()})(i.id)}))},allowFiltering:!1,allowExporting:!1}]}),n.jsx(S,{modalRef:a,title:c?"Editar red social":"Agregar red social",onSubmit:async n=>{if(n.preventDefault(),!d)return void k.fire("Error","Por favor selecciona una red social","error");const t={id:i.current.value||void 0,icon:d.iconRef,name:o.current.value,description:d.name,link:s.current.value};await C.save(t)&&($(e.current).dxDataGrid("instance").refresh(),$(a.current).modal("hide"))},size:"md",children:n.jsxs("div",{className:"row",id:"socials-container",children:[n.jsx("input",{ref:i,type:"hidden"}),n.jsxs("div",{className:"col-12 mb-3",children:[n.jsxs("label",{className:"form-label",children:["Red Social ",n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsxs(R,{eRef:r,dropdownParent:"#socials-container",required:!0,children:[n.jsx("option",{value:"",children:"Seleccionar red social..."}),D.map(e=>n.jsx("option",{value:e.id,children:e.name},e.id))]})]}),d&&n.jsx("div",{className:"col-12 mb-3",children:n.jsxs("div",{className:"alert alert-info d-flex align-items-center",children:[n.jsx(d.icon,{className:"me-2",size:20}),n.jsxs("span",{children:["Red social seleccionada:"," ",n.jsx("strong",{children:d.name})]})]})}),n.jsx(g,{eRef:o,label:"Usuario/Nombre de cuenta",col:"col-12",required:!0}),n.jsx(w,{eRef:s,label:"Enlace (https://...)",col:"col-12",rows:2,required:!0})]})})]})};N((e,a)=>{i.createRoot(e).render(n.jsx(x,{...a,title:"Redes Sociales",children:n.jsx(E,{...a})}))});
