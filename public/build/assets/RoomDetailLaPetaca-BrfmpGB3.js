import{j as s}from"./AboutSimple-Cf8x2fCZ.js";import{r as f}from"./index-BOnQTV8N.js";import{g as Z,k as ee,e as se,S as R,a as V}from"./BlogCarousel-BF9OZIup.js";import{N as q}from"./navigation-CnDykVkE.js";import{f as H}from"./free-mode-CWrQt1Zr.js";/* empty css               *//* empty css                  */import"./BlogCarrusel-Ba-c3mJi.js";import"./thumbs-l0sNRNKZ.js";import{D as z}from"./index.es-dHJjrRSZ.js";import"./SearchWidget-D7iHOckK.js";import{S as v}from"./CartKuchara-D9l7c7at.js";import{C as N}from"./Number2Currency-jIsa99f9.js";import{e as W}from"./es-QTeD0CGG.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./create-element-if-not-defined-dvZas9uG.js";import"./floating-ui.react-GLcD_k_x.js";import"./floating-ui.dom-VJ4vUqp9.js";import"./index-pSueRYGM.js";import"./index-B6ujFmsw.js";import"./format-B6vr9H0z.js";import"./General-apRuNwp7.js";function G(e){let{swiper:t,extendParams:$,on:S}=e;$({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-thumbs"}});let g=!1,o=!1;t.thumbs={swiper:null};function I(){const l=t.thumbs.swiper;if(!l||l.destroyed)return;const r=l.clickedIndex,p=l.clickedSlide;if(p&&p.classList.contains(t.params.thumbs.slideThumbActiveClass)||typeof r>"u"||r===null)return;let n;l.params.loop?n=parseInt(l.clickedSlide.getAttribute("data-swiper-slide-index"),10):n=r,t.params.loop?t.slideToLoop(n):t.slideTo(n)}function C(){const{thumbs:l}=t.params;if(g)return!1;g=!0;const r=t.constructor;if(l.swiper instanceof r){if(l.swiper.destroyed)return g=!1,!1;t.thumbs.swiper=l.swiper,Object.assign(t.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(t.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1}),t.thumbs.swiper.update()}else if(ee(l.swiper)){const p=Object.assign({},l.swiper);Object.assign(p,{watchSlidesProgress:!0,slideToClickedSlide:!1}),t.thumbs.swiper=new r(p),o=!0}return t.thumbs.swiper.el.classList.add(t.params.thumbs.thumbsContainerClass),t.thumbs.swiper.on("tap",I),!0}function k(l){const r=t.thumbs.swiper;if(!r||r.destroyed)return;const p=r.params.slidesPerView==="auto"?r.slidesPerViewDynamic():r.params.slidesPerView;let n=1;const u=t.params.thumbs.slideThumbActiveClass;if(t.params.slidesPerView>1&&!t.params.centeredSlides&&(n=t.params.slidesPerView),t.params.thumbs.multipleActiveThumbs||(n=1),n=Math.floor(n),r.slides.forEach(c=>c.classList.remove(u)),r.params.loop||r.params.virtual&&r.params.virtual.enabled)for(let c=0;c<n;c+=1)se(r.slidesEl,`[data-swiper-slide-index="${t.realIndex+c}"]`).forEach(d=>{d.classList.add(u)});else for(let c=0;c<n;c+=1)r.slides[t.realIndex+c]&&r.slides[t.realIndex+c].classList.add(u);const h=t.params.thumbs.autoScrollOffset,y=h&&!r.params.loop;if(t.realIndex!==r.realIndex||y){const c=r.activeIndex;let d,m;if(r.params.loop){const A=r.slides.find(w=>w.getAttribute("data-swiper-slide-index")===`${t.realIndex}`);d=r.slides.indexOf(A),m=t.activeIndex>t.previousIndex?"next":"prev"}else d=t.realIndex,m=d>t.previousIndex?"next":"prev";y&&(d+=m==="next"?h:-1*h),r.visibleSlidesIndexes&&r.visibleSlidesIndexes.indexOf(d)<0&&(r.params.centeredSlides?d>c?d=d-Math.floor(p/2)+1:d=d+Math.floor(p/2)-1:d>c&&r.params.slidesPerGroup,r.slideTo(d,l?0:void 0))}}S("beforeInit",()=>{const{thumbs:l}=t.params;if(!(!l||!l.swiper))if(typeof l.swiper=="string"||l.swiper instanceof HTMLElement){const r=Z(),p=()=>{const u=typeof l.swiper=="string"?r.querySelector(l.swiper):l.swiper;if(u&&u.swiper)l.swiper=u.swiper,C(),k(!0);else if(u){const h=`${t.params.eventsPrefix}init`,y=c=>{l.swiper=c.detail[0],u.removeEventListener(h,y),C(),k(!0),l.swiper.update(),t.update()};u.addEventListener(h,y)}return u},n=()=>{if(t.destroyed)return;p()||requestAnimationFrame(n)};requestAnimationFrame(n)}else C(),k(!0)}),S("slideChange update resize observerUpdate",()=>{k()}),S("setTransition",(l,r)=>{const p=t.thumbs.swiper;!p||p.destroyed||p.setTransition(r)}),S("beforeDestroy",()=>{const l=t.thumbs.swiper;!l||l.destroyed||o&&l.destroy()}),Object.assign(t.thumbs,{init:C,update:k})}const Ce=({item:e,data:t,cart:$,setCart:S,generals:g})=>{var M;const o=(t==null?void 0:t.accentColor)||"#78673A",[I,C]=f.useState(null),[k,l]=f.useState(0),[r,p]=f.useState(null),[n,u]=f.useState(null),[h,y]=f.useState(2),[c,d]=f.useState(!1),[m,A]=f.useState([]),[w,L]=f.useState(!0);f.useEffect(()=>{(async()=>{var i;if(e!=null&&e.id){L(!0);try{const T=await(await fetch(`/api/hotels/rooms/${e.id}/blocked-dates`)).json();if(T.status===200&&((i=T.data)!=null&&i.blocked_dates)){const j=T.data.blocked_dates.map(X=>new Date(X+"T00:00:00"));A(j)}}catch(x){console.error("Error al cargar fechas bloqueadas:",x)}L(!1)}})()},[e==null?void 0:e.id]),f.useEffect(()=>{const a=document.createElement("style");return a.textContent=`
            .react-datepicker__day--excluded,
            .react-datepicker__day--disabled {
                background-color: #fee2e2 !important;
                color: #dc2626 !important;
                text-decoration: line-through;
                cursor: not-allowed !important;
            }
            .react-datepicker__day--excluded:hover,
            .react-datepicker__day--disabled:hover {
                background-color: #fecaca !important;
            }
            .blocked-date {
                background-color: #fee2e2 !important;
                color: #dc2626 !important;
            }
        `,document.head.appendChild(a),()=>{document.head.removeChild(a)}},[]);const D=a=>{const i=a.toISOString().split("T")[0];return m.some(x=>{const T=x.toISOString().split("T")[0];return i===T})},U={standard:"Estándar",suite:"Suite",deluxe:"Deluxe",presidential:"Presidencial",family:"Familiar",executive:"Ejecutiva",single:"Individual",double:"Doble"},b=r&&n?Math.ceil((n-r)/(1e3*60*60*24)):0,_=parseFloat((e==null?void 0:e.final_price)||(e==null?void 0:e.price))||0,P=_*b,F=(e==null?void 0:e.price)&&(e==null?void 0:e.discount)&&parseFloat(e.discount)>0,E=parseFloat(e==null?void 0:e.price)||0,Y=F?Math.round((E-parseFloat(e.discount))/E*100):0,B=[{url:e==null?void 0:e.image,type:"main",alt:(e==null?void 0:e.name)||"Habitación"},...((e==null?void 0:e.images)||[]).map((a,i)=>({url:a.url,type:"gallery",index:i,alt:`${e==null?void 0:e.name} - Imagen ${i+1}`}))].filter(a=>a.url),J=()=>{if(!r||!n||m.length===0)return!1;let a=new Date(r);for(;a<n;){if(D(a))return!0;a.setDate(a.getDate()+1)}return!1},K=async()=>{if(!r||!n){v.fire({icon:"warning",title:"Fechas requeridas",text:"Por favor selecciona las fechas de check-in y check-out",confirmButtonColor:o});return}if(b<=0){v.fire({icon:"warning",title:"Fechas inválidas",text:"La fecha de check-out debe ser posterior a la de check-in",confirmButtonColor:o});return}if(J()){v.fire({icon:"error",title:"Fechas no disponibles",text:"Algunas fechas en el rango seleccionado no están disponibles. Por favor elige otras fechas.",confirmButtonColor:o});return}if(h>((e==null?void 0:e.max_occupancy)||2)){v.fire({icon:"warning",title:"Capacidad excedida",text:`Esta habitación tiene capacidad máxima para ${(e==null?void 0:e.max_occupancy)||2} personas`,confirmButtonColor:o});return}d(!0);try{if($.find(j=>j.type==="booking"&&j.id===e.id&&j.check_in===r.toISOString().split("T")[0]&&j.check_out===n.toISOString().split("T")[0])){(await v.fire({icon:"info",title:"Ya en el carrito",text:"Esta reserva ya está en tu carrito",confirmButtonText:"Ir al carrito",showCancelButton:!0,cancelButtonText:"Continuar viendo",confirmButtonColor:o})).isConfirmed&&(window.location.href="/cart"),d(!1);return}const i={id:e.id,type:"booking",name:e.name,slug:e.slug,image:e.image,price:_,final_price:_,discount:e.discount||0,check_in:r.toISOString().split("T")[0],check_out:n.toISOString().split("T")[0],nights:b,guests:h,max_occupancy:e.max_occupancy,beds_count:e.beds_count,room_type:e.room_type,amenities:e.amenities||[],quantity:1,total_price:P},x=[...$,i];S(x),(await v.fire({icon:"success",title:"¡Reserva agregada!",html:`
                    <div class="text-left">
                        <p class="font-bold mb-2">${e.name}</p>
                        <p class="text-sm text-gray-600">
                            <strong>Check-in:</strong> ${r.toLocaleDateString("es-PE")}<br/>
                            <strong>Check-out:</strong> ${n.toLocaleDateString("es-PE")}<br/>
                            <strong>${b} noche${b!==1?"s":""}</strong> - ${h} huésped${h!==1?"es":""}
                        </p>
                        <p class="text-lg font-bold mt-2" style="color: ${o}">
                            Total: ${N()} ${P.toFixed(2)}
                        </p>
                    </div>
                `,confirmButtonText:"Ir al carrito",showCancelButton:!0,cancelButtonText:"Continuar viendo",confirmButtonColor:o})).isConfirmed&&(window.location.href="/cart")}catch(a){v.fire({icon:"error",title:"Error",text:a.message||"Ocurrió un error al procesar la reserva",confirmButtonColor:o})}finally{d(!1)}},O=(M=g==null?void 0:g.find(a=>a.correlative==="phone_whatsapp"))==null?void 0:M.description,Q=()=>{if(!O)return;let a=`Hola, me interesa la habitación "${e==null?void 0:e.name}"`;r&&n&&(a+=`

Fechas de interés:
- Check-in: ${r.toLocaleDateString("es-PE")}
- Check-out: ${n.toLocaleDateString("es-PE")}
- ${b} noche(s)
- ${h} huésped(es)`);const i=`https://wa.me/${O.replace(/\D/g,"")}?text=${encodeURIComponent(a)}`;window.open(i,"_blank")};return s.jsxs("div",{className:"bg-gradient-to-b from-[#0a0604] to-[#281409] min-h-screen text-white",children:[s.jsx("div",{className:"px-[5%] py-4",children:s.jsx("nav",{className:"max-w-7xl mx-auto","aria-label":"breadcrumb",children:s.jsxs("ol",{className:"flex flex-wrap items-center gap-2 text-sm",children:[s.jsx("li",{children:s.jsx("a",{href:"/",className:"text-gray-400 hover:text-white transition-colors",children:"Inicio"})}),s.jsx("li",{className:"text-gray-600",children:"/"}),s.jsx("li",{children:s.jsx("a",{href:"/#habitaciones",className:"text-gray-400 hover:text-white transition-colors",children:"Habitaciones"})}),s.jsx("li",{className:"text-gray-600",children:"/"}),s.jsx("li",{style:{color:o},children:e==null?void 0:e.name})]})})}),s.jsx("div",{className:"px-[5%] pb-16",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"grid lg:grid-cols-2 gap-8 lg:gap-12",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"relative rounded-2xl overflow-hidden bg-[#281409]/50",children:[s.jsx(R,{spaceBetween:10,navigation:!0,thumbs:{swiper:I&&!I.destroyed?I:null},modules:[H,q,G],className:"aspect-[4/3]",children:B.map((a,i)=>s.jsx(V,{children:s.jsx("img",{src:`/storage/images/item/${a.url}`,alt:a.alt,className:"w-full h-full object-cover",onError:x=>{x.target.src="/assets/img/noimage/no_img.jpg"}})},i))}),F&&s.jsxs("div",{className:"absolute top-4 left-4 bg-red-600 text-white px-3 py-1 rounded-lg text-sm font-bold z-10",children:["-",Y,"% OFF"]})]}),B.length>1&&s.jsx(R,{onSwiper:C,spaceBetween:10,slidesPerView:4,freeMode:!0,watchSlidesProgress:!0,modules:[H,q,G],className:"thumbs-swiper",children:B.map((a,i)=>s.jsx(V,{className:"cursor-pointer",children:s.jsx("div",{className:"aspect-square rounded-lg overflow-hidden border-2 border-transparent hover:border-opacity-100 transition-all",style:{borderColor:`${o}50`},children:s.jsx("img",{src:`/storage/images/item/${a.url}`,alt:a.alt,className:"w-full h-full object-cover",onError:x=>{x.target.src="/assets/img/noimage/no_img.jpg"}})})},i))})]}),s.jsxs("div",{className:"space-y-6",children:[(e==null?void 0:e.room_type)&&s.jsx("span",{className:"inline-block px-4 py-1 rounded-full text-sm font-medium",style:{backgroundColor:`${o}33`,color:o},children:U[e.room_type]||e.room_type}),s.jsx("h1",{className:"text-3xl lg:text-4xl font-bold",style:{color:o},children:e==null?void 0:e.name}),s.jsxs("div",{className:"flex flex-wrap gap-6 text-gray-300",children:[(e==null?void 0:e.max_occupancy)>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("i",{className:"fas fa-users",style:{color:o}}),s.jsxs("span",{children:[e.max_occupancy," personas máx."]})]}),(e==null?void 0:e.beds_count)>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("i",{className:"fas fa-bed",style:{color:o}}),s.jsxs("span",{children:[e.beds_count," cama",e.beds_count!==1?"s":""]})]}),(e==null?void 0:e.size_m2)>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("i",{className:"fas fa-ruler-combined",style:{color:o}}),s.jsxs("span",{children:[e.size_m2," m²"]})]})]}),s.jsxs("div",{className:"py-4 border-y border-gray-700",children:[s.jsxs("div",{className:"flex items-baseline gap-3",children:[s.jsxs("span",{className:"text-3xl font-bold",style:{color:o},children:[N()," ",_.toFixed(2)]}),s.jsx("span",{className:"text-gray-400",children:"/ noche"})]}),F&&s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsxs("span",{className:"text-gray-500 line-through",children:[N()," ",E.toFixed(2)]}),s.jsxs("span",{className:"bg-red-600 text-white px-2 py-0.5 rounded text-xs font-bold",children:["Ahorras ",N()," ",(E-_).toFixed(2)]})]})]}),(e==null?void 0:e.amenities)&&e.amenities.length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",style:{color:o},children:"Amenidades incluidas"}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:e.amenities.map((a,i)=>s.jsxs("div",{className:"flex items-center gap-2 text-gray-300",children:[s.jsx("i",{className:a.icon||"fas fa-check",style:{color:o}}),s.jsx("span",{className:"text-sm",children:a.name})]},a.id||i))})]}),s.jsxs("div",{className:"bg-[#281409]/80 rounded-2xl p-6 space-y-4 border",style:{borderColor:`${o}33`},children:[s.jsx("h3",{className:"text-lg font-semibold",style:{color:o},children:"Reserva tu estadía"}),w?s.jsxs("div",{className:"text-sm text-gray-400 flex items-center gap-2",children:[s.jsx("i",{className:"fas fa-spinner fa-spin"}),"Verificando disponibilidad..."]}):m.length>0&&s.jsxs("div",{className:"text-sm text-yellow-500 flex items-center gap-2",children:[s.jsx("i",{className:"fas fa-info-circle"}),"Las fechas en rojo no están disponibles"]}),s.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Check-in"}),s.jsx(z,{selected:r,onChange:a=>{p(a),n&&a>=n&&u(null)},selectsStart:!0,startDate:r,endDate:n,minDate:new Date,excludeDates:m,filterDate:a=>!D(a),locale:W,dateFormat:"dd/MM/yyyy",placeholderText:w?"Cargando...":"Selecciona fecha",disabled:w,className:"w-full bg-[#0a0604] border border-gray-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-opacity-100 disabled:opacity-50",style:{borderColor:`${o}50`},dayClassName:a=>D(a)?"blocked-date":void 0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Check-out"}),s.jsx(z,{selected:n,onChange:a=>u(a),selectsEnd:!0,startDate:r,endDate:n,minDate:r||new Date,excludeDates:m,filterDate:a=>!D(a),locale:W,dateFormat:"dd/MM/yyyy",placeholderText:w?"Cargando...":"Selecciona fecha",disabled:w||!r,className:"w-full bg-[#0a0604] border border-gray-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-opacity-100 disabled:opacity-50",style:{borderColor:`${o}50`},dayClassName:a=>D(a)?"blocked-date":void 0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Huéspedes"}),s.jsx("select",{value:h,onChange:a=>y(parseInt(a.target.value)),className:"w-full bg-[#0a0604] border border-gray-700 rounded-lg px-4 py-3 text-white focus:outline-none",style:{borderColor:`${o}50`},children:[...Array((e==null?void 0:e.max_occupancy)||4)].map((a,i)=>s.jsxs("option",{value:i+1,children:[i+1," huésped",i>0?"es":""]},i+1))})]}),b>0&&s.jsxs("div",{className:"border-t border-gray-700 pt-4 space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-gray-400",children:[s.jsxs("span",{children:[N()," ",_.toFixed(2)," x ",b," noche",b!==1?"s":""]}),s.jsxs("span",{children:[N()," ",P.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between text-xl font-bold",style:{color:o},children:[s.jsx("span",{children:"Total"}),s.jsxs("span",{children:[N()," ",P.toFixed(2)]})]})]}),s.jsx("button",{onClick:K,disabled:c,className:"w-full py-4 text-white font-bold rounded-lg transition-all duration-300 transform hover:translate-y-[-2px] shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:o},children:c?s.jsxs("span",{className:"flex items-center justify-center gap-2",children:[s.jsx("i",{className:"fas fa-spinner fa-spin"}),"Procesando..."]}):"Reservar Ahora"}),O&&s.jsxs("button",{onClick:Q,className:"w-full py-3 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-lg transition-all duration-300 flex items-center justify-center gap-2",children:[s.jsx("i",{className:"fab fa-whatsapp text-xl"}),"Consultar por WhatsApp"]})]})]})]}),s.jsxs("div",{className:"mt-12 grid lg:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"bg-[#281409]/50 rounded-2xl p-6 border",style:{borderColor:`${o}33`},children:[s.jsx("h3",{className:"text-xl font-bold mb-4",style:{color:o},children:"Descripción"}),s.jsx("div",{className:"prose prose-invert max-w-none text-gray-300",dangerouslySetInnerHTML:{__html:(e==null?void 0:e.description)||(e==null?void 0:e.summary)||"<p>Sin descripción disponible.</p>"}})]}),(e==null?void 0:e.features)&&e.features.length>0&&s.jsxs("div",{className:"bg-[#281409]/50 rounded-2xl p-6 border",style:{borderColor:`${o}33`},children:[s.jsx("h3",{className:"text-xl font-bold mb-4",style:{color:o},children:"Características"}),s.jsx("ul",{className:"space-y-3",children:e.features.map((a,i)=>s.jsxs("li",{className:"flex items-start gap-3 text-gray-300",children:[s.jsx("i",{className:"fas fa-check mt-1",style:{color:o}}),s.jsx("span",{children:typeof a=="object"?a.feature:a})]},i))})]})]})]})})]})};export{Ce as default};
