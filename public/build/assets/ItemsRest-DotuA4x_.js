var e=Object.defineProperty,t=(t,o,r)=>((t,o,r)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[o]=r)(t,"symbol"!=typeof o?o+"":o,r);import{m as o}from"./vendor-react-DD0uBW7s.js";import{B as r}from"./BasicRest-BuuGWTMX.js";import{t as a}from"./GoogleSignInButton-BciphYP2.js";class s extends r{constructor(){super(...arguments),t(this,"path","admin/items"),t(this,"hasFiles",!0),t(this,"clone",async e=>{try{const t=await fetch(`/api/${this.path}/${e}/clone`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(o.Cookies.get("XSRF-TOKEN"))}}),r=await t.json();if(!t.ok)throw new Error(r?.message||"Error al clonar el item");return a.success("¡Excelente!",{description:r.message||"Item clonado exitosamente",duration:3e3,position:"bottom-center",richColors:!0}),r}catch(t){return a.error("¡Error!",{description:t.message,duration:3e3,position:"bottom-center",richColors:!0}),null}}),t(this,"importData",async e=>{try{const t=await fetch("/api/unified-import",{method:"POST",body:e}),o=await t.json();if(!t.ok)throw new Error(o?.error??o?.message??"Error en la importación");return o}catch(t){throw t}}),t(this,"exportData",async()=>{try{const e=await fetch(`/api/${this.path}/export`,{method:"GET",headers:{Accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","X-Requested-With":"XMLHttpRequest"}});if(!e.ok){const t=e.headers.get("content-type");if(t&&t.includes("application/json")){const t=await e.json();throw new Error(t?.message||t?.error||"Error al exportar items")}await e.text();throw new Error(`Error del servidor (${e.status}): Revisa la consola del navegador y los logs de Laravel`)}const t=await e.blob();if("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!==t.type&&"application/octet-stream"!==t.type)throw new Error("El servidor no devolvió un archivo Excel válido");const o=`items_export_${(new Date).toISOString().split("T")[0]}.xlsx`,r=window.URL.createObjectURL(t),a=document.createElement("a");return a.href=r,a.download=o,document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(r),document.body.removeChild(a),!0}catch(e){throw e}})}}export{s as I};
