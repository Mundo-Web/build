var B=Object.defineProperty;var S=(n,o,l)=>o in n?B(n,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):n[o]=l;var b=(n,o,l)=>S(n,typeof o!="symbol"?o+"":o,l);import{j as t}from"./AboutSimple-Cf8x2fCZ.js";import{r}from"./index-BOnQTV8N.js";import{c as E}from"./ReactAppend-QR5TrZfj.js";import{C as M}from"./CreateReactScript-DDkb82ME.js";import{B as V}from"./Base-DYFgQtBT.js";import{T as k}from"./Table-BplAdTCi.js";import{M as A}from"./Modal-xDw9ufjg.js";import{S as G}from"./ProductCard-D9l7c7at.js";import{B as I}from"./BasicRest-BML1C-ua.js";import{I as m}from"./InputFormGroup-iZIO11ZN.js";import{T as q}from"./TextareaFormGroup-CliirJM1.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./index-B6ujFmsw.js";import"./index.esm-C48oHfFw.js";import"./index-ngrFHoWO.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./main-B6F2O9-U.js";import"./Global-CazroCzF.js";/* empty css               *//* empty css              */import"./General-apRuNwp7.js";import"./LaravelSession-Dz9cpV3l.js";import"./CanAccess-DqqErOtT.js";import"./BooleanLimit-D-OsQsek.js";import"./tippy-react.esm-DmkRJDEW.js";import"./index-pSueRYGM.js";import"./Logout-BpuTJ_83.js";import"./MenuItemContainer-DcxtOi47.js";import"./CardProductKatya-ncpmQ0JU.js";class O extends I{constructor(){super(...arguments);b(this,"path","admin/job-applications");b(this,"hasFiles",!0)}}const u=new O,P=()=>{const n=r.useRef(),o=r.useRef(),l=r.useRef(),d=r.useRef(),p=r.useRef(),f=r.useRef(),h=r.useRef(),x=r.useRef(),v=r.useRef(),[j,w]=r.useState(!1),[g,C]=r.useState(null),R=e=>{e!=null&&e.id?w(!0):w(!1),l.current.value=(e==null?void 0:e.id)??"",d.current.value=(e==null?void 0:e.name)??"",p.current.value=(e==null?void 0:e.email)??"",f.current.value=(e==null?void 0:e.phone)??"",h.current.value=(e==null?void 0:e.position)??"",x.current.value=(e==null?void 0:e.message)??"",v.current.value=null,C((e==null?void 0:e.cv)??null),$(o.current).modal("show")},F=async e=>{e.preventDefault();const i={id:l.current.value||void 0,name:d.current.value,email:p.current.value,phone:f.current.value,position:h.current.value,message:x.current.value},s=new FormData;for(const a in i)i[a]!==void 0&&i[a]!==null&&s.append(a,i[a]);const c=v.current.files[0];c&&s.append("cv",c),await u.save(s)&&($(n.current).dxDataGrid("instance").refresh(),$(o.current).modal("hide"))},T=async({id:e,value:i})=>{await u.boolean({id:e,field:"reviewed",value:i})||$(n.current).dxDataGrid("instance").refresh()},y=async e=>{const{isConfirmed:i}=await G.fire({title:"¿Estás seguro?",text:"¡No podrás revertir esto!",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminarlo",cancelButtonText:"Cancelar"});!i||!await u.delete(e.id)||$(n.current).dxDataGrid("instance").refresh()},N=e=>{e&&window.open(`/storage/documents/cv/${e}`,"_blank")};return t.jsxs(t.Fragment,{children:[t.jsx(k,{gridRef:n,title:"Solicitudes de Trabajo",rest:u,toolBar:e=>{e.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(n.current).dxDataGrid("instance").refresh()}}),e.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Agregar solicitud",hint:"Agregar solicitud",onClick:()=>R()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"name",caption:"Nombre",width:"20%"},{dataField:"email",caption:"Email",width:"18%"},{dataField:"phone",caption:"Teléfono",width:"12%"},{dataField:"position",caption:"Posición",width:"15%"},{dataField:"message",caption:"Mensaje",width:"20%",cellTemplate:(e,{data:i})=>{const s=i.message||"",c=s.length>50?s.substring(0,50)+"...":s;e.text(c),s.length>50&&e.attr("title",s)}},{dataField:"cv",caption:"CV",width:"80px",allowFiltering:!1,cellTemplate:(e,{data:i})=>{if(i.cv){const s=$("<button>").addClass("btn btn-sm btn-info").html('<i class="fa fa-download"></i>').attr("title","Descargar CV").on("click",()=>N(i.cv));e.append(s)}else e.text("Sin CV")}},{dataField:"reviewed",caption:"Revisado",dataType:"boolean",width:"100px",cellTemplate:(e,{data:i})=>{const s=$("<div>").dxSwitch({value:i.reviewed,onValueChanged:({value:c,previousValue:D})=>{T({id:i.id,value:c})}});e.append(s)}},{dataField:"created_at",caption:"Fecha",dataType:"date",width:"120px",format:"dd/MM/yyyy"},{caption:"Acciones",width:"100px",cellTemplate:(e,{data:i})=>{const s=$("<button>").addClass("btn btn-sm btn-warning me-2").html('<i class="fa fa-edit"></i>').on("click",()=>R(i)),c=$("<button>").addClass("btn btn-sm btn-danger").html('<i class="fa fa-trash"></i>').on("click",()=>y(i));e.append(s,c)},allowFiltering:!1,allowExporting:!1}]}),t.jsxs(A,{modalRef:o,title:j?"Editar solicitud":"Agregar solicitud",onSubmit:F,children:[t.jsx("input",{ref:l,type:"hidden"}),t.jsxs("div",{className:"row",children:[t.jsx("div",{className:"col-md-6",children:t.jsx(m,{eRef:d,label:"Nombre completo",required:!0})}),t.jsx("div",{className:"col-md-6",children:t.jsx(m,{eRef:p,label:"Email",type:"email",required:!0})}),t.jsx("div",{className:"col-md-6",children:t.jsx(m,{eRef:f,label:"Teléfono",type:"tel"})}),t.jsx("div",{className:"col-md-6",children:t.jsx(m,{eRef:h,label:"Posición deseada"})}),t.jsx("div",{className:"col-md-12",children:t.jsx(q,{eRef:x,label:"Mensaje",rows:3})}),t.jsx("div",{className:"col-md-12",children:t.jsxs("div",{className:"mb-3",children:[t.jsxs("label",{className:"form-label",children:["CV (PDF, DOC, DOCX)",g&&t.jsxs("span",{className:"text-muted ms-2",children:["(Actual: ",g,")"]})]}),t.jsx("input",{ref:v,type:"file",className:"form-control",accept:".pdf,.doc,.docx"})]})})]})]})]})};M((n,o)=>{E.createRoot(n).render(t.jsx(V,{...o,title:"Solicitudes de Trabajo",children:t.jsx(P,{...o})}))});
