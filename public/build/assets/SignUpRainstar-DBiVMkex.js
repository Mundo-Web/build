import{r as e,m as a,j as t,an as s,o as r}from"./vendor-react-C1oWoR6m.js";import{J as n}from"./JSEncrypt-ewRYZc2G.js";import{G as l}from"./Footer-Cr_V_wDJ.js";import{S as i}from"./CartKuchara-BuGNrbqJ.js";import{A as o}from"./AuthClientRest-DsuAOgfF.js";import{I as c}from"./InputForm-BF_JdRtw.js";import{G as d}from"./GoogleSignInButton-CrDhz2kh.js";import"./vendor-swiper-Cr_RrIb_.js";import"./OpenPayCardModal-DoDTV5Bn.js";function m({data:m}){const p=new n;p.setPublicKey(l.PUBLIC_RSA_KEY);const[x,u]=e.useState(!1),[h,g]=e.useState(!1),[b,f]=e.useState(null),[j,v]=e.useState({name:"",lastname:"",email:"",password:"",confirmation:""});e.useEffect(()=>{const e=new URLSearchParams(window.location.search),a=e.get("type"),t=e.get("token");"provider"===a&&t&&fetch(`/api/provider-invitation/${t}`).then(e=>e.json()).then(e=>{if(e.success&&e.data){f({email:e.data.email,name:e.data.name,phone:e.data.phone,token:t,type:a});const s=e.data.name?e.data.name.trim().split(" "):[];v(a=>({...a,email:e.data.email||"",name:s.length>0?s[0]:"",lastname:s.length>1?s.slice(1).join(" "):""}))}}).catch(e=>{})},[]);const N=e=>{const{name:a,value:t}=e.target;v(e=>({...e,[a]:t}))};e.useEffect(()=>{a.GET.message&&i.fire({icon:"info",title:"Mensaje",text:a.GET.message,showConfirmButton:!1,timer:3e3})},[]);const w="!rounded-none !border-x-0 !border-t-0 border-b border-neutral-900 !px-0 py-4 bg-transparent focus:!ring-0 focus:!outline-none focus:!border-x-0 focus:!border-t-0 focus:border-b-1 text-xs uppercase tracking-widest placeholder:text-neutral-300 transition-all font-medium",y="text-[10px] font-black uppercase tracking-[0.2em] text-neutral-400 mb-2 block";return t.jsx("section",{id:m?.element_id||null,className:"bg-white min-h-screen pt-20 pb-32 flex items-center",children:t.jsx("div",{className:"container mx-auto px-primary 2xl:px-0 2xl:max-w-7xl",children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-16 items-start",children:[t.jsx("div",{className:"lg:col-span-5 order-2 lg:order-1 sticky top-32",children:t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-[10px] font-bold uppercase tracking-[0.3em] text-neutral-400 mb-4 block",children:"Únete a Nosotros"}),t.jsxs("h1",{className:"text-4xl md:text-5xl font-black uppercase tracking-tighter leading-none mb-6",children:["Crear ",t.jsx("br",{})," Cuenta"]}),t.jsx("p",{className:"text-neutral-500 text-sm uppercase tracking-widest leading-relaxed max-w-md",children:"Regístrate para acceder a ofertas exclusivas, seguimiento de pedidos y más."})]}),t.jsxs("div",{className:"border-t border-neutral-100 pt-8",children:[t.jsx("p",{className:"text-[10px] text-neutral-400 uppercase tracking-widest mb-4",children:"¿Ya tienes cuenta?"}),t.jsxs("a",{href:"/login",className:"group inline-flex items-center gap-2 text-xs font-bold uppercase tracking-[0.2em]",children:["Iniciar Sesión",t.jsx(s,{size:14,className:"group-hover:translate-x-1 transition-transform"})]})]})]})}),t.jsx("div",{className:"lg:col-span-1 hidden lg:block order-1 lg:order-2",children:t.jsx("div",{className:"w-[1px] h-full min-h-[400px] bg-neutral-100 mx-auto"})}),t.jsx("div",{className:"lg:col-span-6 order-1 lg:order-3",children:t.jsxs("form",{onSubmit:async e=>{e.preventDefault(),u(!0);const{name:a,lastname:t,email:s,password:r,confirmation:n}=j;if(r!==n)return i.fire({icon:"error",title:"Error",text:"Las contraseñas no coinciden",showConfirmButton:!1,timer:3e3}),void u(!1);const l={name:p.encrypt(a),lastname:p.encrypt(t),email:p.encrypt(s),password:p.encrypt(r),confirmation:p.encrypt(n)};b&&(l.invitation_type=b.type,l.invitation_token=b.token);const c=await o.signup(l);u(!1),c&&(window.location.href="/")},className:"space-y-12",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[t.jsxs("div",{children:[t.jsx(c,{label:"Nombres",type:"text",name:"name",value:j.name,onChange:N,placeholder:"JUAN",className:w,labelClass:y}),b?.name&&t.jsx("p",{className:"text-[9px] font-bold uppercase tracking-[0.2em] text-neutral-400 mt-1",children:"Datos de tu solicitud"})]}),t.jsxs("div",{children:[" ",t.jsx(c,{label:"Apellidos",type:"text",name:"lastname",value:j.lastname,onChange:N,placeholder:"PÉREZ",className:w,labelClass:y}),b?.name&&t.jsx("p",{className:"text-[9px] font-bold uppercase tracking-[0.2em] text-neutral-400 mt-1",children:"Datos de tu solicitud"})]})]}),t.jsxs("div",{children:[t.jsx(c,{label:"Email",type:"email",name:"email",value:j.email,onChange:N,placeholder:"HOLA@MAIL.COM",className:w,labelClass:y,readOnly:null!==b,disabled:null!==b}),b&&t.jsx("p",{className:"text-[9px] font-bold uppercase tracking-[0.2em] text-neutral-400 mt-1",children:"Este email está vinculado a tu invitación como proveedor"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:y,htmlFor:"password",children:"Contraseña"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{id:"password",value:j.password,onChange:N,name:"password",type:h?"text":"password",className:`border ${w} w-full pr-10`,required:!0}),t.jsx("button",{type:"button",onClick:()=>{g(!h)},className:"absolute right-0 top-1/2 transform -translate-y-1/2 text-neutral-400 hover:text-black transition-colors",children:h?t.jsx("span",{className:"text-[10px] uppercase font-bold tracking-widest",children:"Ocultar"}):t.jsx("span",{className:"text-[10px] uppercase font-bold tracking-widest",children:"Ver"})})]})]}),t.jsxs("div",{className:"space-y-0 w-full",children:[t.jsx("label",{className:y,htmlFor:"confirmation",children:"Confirmar Contraseña"}),t.jsx("input",{id:"confirmation",value:j.confirmation,onChange:N,name:"confirmation",type:h?"text":"password",className:`${w} w-full`,required:!0})]})]}),t.jsx("div",{className:"pt-8",children:t.jsx("button",{type:"submit",disabled:x,className:"w-full sm:w-auto px-12 py-5 text-[10px] font-bold uppercase tracking-[0.2em] bg-black text-white hover:brightness-125 disabled:bg-neutral-200 disabled:text-neutral-400 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-4 group shadow-2xl shadow-black/10 ml-auto",children:x?t.jsx(r,{className:"animate-spin",size:16}):t.jsxs(t.Fragment,{children:["REGISTRARME",t.jsx(s,{size:14,className:"group-hover:translate-x-1 transition-transform"})]})})}),l.GOOGLE_OAUTH_ENABLED&&t.jsxs("div",{className:"pt-8 border-t border-neutral-100 mt-8",children:[t.jsx("p",{className:"text-center text-[10px] text-neutral-400 uppercase tracking-widest mb-6",children:"O regístrate con"}),t.jsx("div",{className:"flex justify-center",children:t.jsx(d,{onSuccess:()=>window.location.href="/",text:"Google",className:"px-8 py-4 border border-neutral-200 text-[10px] font-bold uppercase tracking-widest hover:border-black hover:bg-black hover:text-white transition-all duration-300 flex items-center gap-3"})})]})]})})]})})})}export{m as default};
