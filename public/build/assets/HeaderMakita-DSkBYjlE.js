import{r as e,j as s,S as a,u as t,w as r,X as i,R as l,J as n,E as o,y as c,z as d,v as m}from"./vendor-react-CtPXetfm.js";import{G as x}from"./Footer-coriRrmf.js";import{C as h}from"./CartModal-CVzP9hNx.js";import{L as p}from"./Logout-DQyEsGXW.js";import"./MobileMenu-D1i5uXb9.js";import"./ShippingStep-DsTnA0_3.js";import{A as u,m as b}from"./vendor-motion-CThzL09Q.js";import"./vendor-swiper-Cr_RrIb_.js";import"./CartItemRow-DGY_lV8-.js";import"./Number2Currency-BX4epFEo.js";import"./General-ClVW7qxN.js";import"./CartKuchara-Bi-J8T1O.js";import"./OpenPayCardModal-CbSnHq7o.js";import"./BasicRest-DtgqEuc9.js";import"./BooleanLimit-q2Ad9fGY.js";const g=({items:g,data:j,cart:f,setCart:w,isUser:y,pages:v,generals:N=[]})=>{N.find(e=>"phone_whatsapp"===e.correlative),N.find(e=>"message_whatsapp"===e.correlative);const[k,C]=e.useState(!1),[S,E]=e.useState(!1),[z,L]=e.useState(!1),[M,$]=e.useState(""),[A,B]=e.useState(!1),[R,O]=e.useState(!1),[U,I]=e.useState(!1),[P,W]=e.useState(!1),[J,_]=e.useState(null),[F,T]=e.useState(null),[D,G]=e.useState(null),[H,q]=e.useState(""),[K,X]=e.useState(!1),Y=Array.from(new Set(g.map(e=>JSON.stringify(e.category)))).map(e=>JSON.parse(e)),V=Array.from(new Set(g.map(e=>JSON.stringify(e.brand)))).map(e=>JSON.parse(e)),Z=e=>V.filter(s=>g.some(a=>a.category?.id===e&&a.brand&&a?.brand?.id===s?.id)),Q=(e,s)=>{const a=[],t=new Set;return g.forEach(r=>{if(r.category?.id===e&&r.brand?.id===s&&r.subcategory){const e=r.subcategory.name.trim().toUpperCase();t.has(e)||(a.push(r.subcategory),t.add(e))}}),a},ee=e=>{const s=[],a=new Set;return g.forEach(t=>{if(t.category?.id===e&&t.subcategory){const e=t.subcategory.name.trim().toUpperCase();a.has(e)||(s.push(t.subcategory),a.add(e))}}),s},se=e.useRef(null),ae=e.useRef(null),te=f.reduce((e,s)=>Number(e)+Number(s.quantity),0);e.useEffect(()=>{function e(e){se.current&&!se.current.contains(e.target)&&B(!1),ae.current&&!ae.current.contains(e.target)&&L(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),e.useEffect(()=>{const e=()=>{window.scrollY>0?O(!0):O(!1)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]);const re=[{icon:s.jsx(c,{size:16}),label:"Mi Perfil",href:"/profile"},{icon:s.jsx(r,{size:16}),label:"Mis Pedidos",href:"/customer/dashboard"},{icon:s.jsx(d,{size:16}),label:"Configuración",href:"/account"},{icon:s.jsx(m,{size:16}),label:"Cerrar Sesión",onClick:p}];return s.jsxs(s.Fragment,{children:[s.jsx("style",{children:"\n    .custom-scrollbar::-webkit-scrollbar {\n      width: 8px;\n      height: 8px;\n    }\n    \n    .custom-scrollbar::-webkit-scrollbar-track {\n      background: rgba(255, 255, 255, 0.2);\n      border-radius: 20px;\n    }\n    \n    .custom-scrollbar::-webkit-scrollbar-thumb {\n      background: rgba(255, 255, 255, 0.8);\n      border-radius: 20px;\n      border: 2px solid transparent;\n      background-clip: padding-box;\n    }\n  "}),s.jsxs("header",{id:j?.element_id||null,className:`w-full top-0 left-0 z-50 transition-all duration-300 ${R?"fixed":"relative"} bg-primary`,style:{boxShadow:R?"0 2px 8px rgba(0,0,0,0.08)":"none"},children:[s.jsxs("div",{className:"hidden md:flex px-4 2xl:px-0 2xl:max-w-7xl items-center justify-between mx-auto py-3 font-paragraph text-base font-semibold text-white",children:[s.jsx("a",{href:"/",className:"flex items-center gap-2 z-[51] py-2 rounded",children:s.jsx("img",{src:`/assets/resources/logo.png?v=${crypto.randomUUID()}`,alt:x.APP_NAME,className:"h-8 object-contain object-center",onError:e=>{e.target.onerror=null,e.target.src="/assets/img/logo-bk.svg"}})}),s.jsx("nav",{className:"flex gap-1 relative flex-1 justify-center",children:Y.map(e=>s.jsx("div",{className:"relative",children:s.jsx("button",{className:"font-medium px-4 py-2 text-sm uppercase tracking-wide hover:bg-white/10 transition-colors duration-200 "+(J?.id===e.id&&P?"bg-white/20":""),onMouseEnter:()=>{I(!1),W(!0),_(e),T(null)},onClick:()=>{J?.id===e.id&&P?(W(!1),_(null)):(W(!0),_(e),T(null))},children:e.name})},e.id))}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"relative",children:s.jsx("button",{onClick:()=>{W(!1),_(null),I(!U)},className:"p-2 bg-secondary hover:bg-secondary rounded transition-colors",children:s.jsx(a,{size:20})})}),j?.showLoginCart&&s.jsxs("div",{className:"flex items-center gap-4 relative text-sm",children:[s.jsxs("div",{ref:se,children:[y?s.jsxs("button",{"aria-label":"user",className:"flex items-center gap-2 hover:bg-white/10 px-3 py-2 rounded transition-colors duration-300",onClick:()=>B(!A),children:[s.jsx(t,{size:20}),s.jsx("span",{className:"hidden lg:inline",children:y.name})]}):s.jsxs("a",{href:"/iniciar-sesion",className:"flex items-center gap-2 text-sm hover:bg-white/10 px-3 py-2 rounded transition-colors duration-300",children:[s.jsx(t,{size:20}),s.jsx("span",{className:"hidden lg:inline",children:"Iniciar Sesión"})]}),s.jsx(u,{children:A&&s.jsx(b.div,{initial:"hidden",animate:"visible",exit:"exit",variants:{hidden:{opacity:0,y:-10,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:400,damping:25}},exit:{opacity:0,y:-10,scale:.95,transition:{duration:.2}}},className:"absolute z-50 top-full right-0 bg-white shadow-xl border rounded-lg w-48 mt-2",children:s.jsx("div",{className:"p-4",children:s.jsx("ul",{className:"space-y-3",children:re.map((e,a)=>s.jsx("li",{children:e.onClick?s.jsxs("button",{"aria-label":"menu-items",onClick:e.onClick,className:"flex w-full items-center gap-3 text-gray-700 text-sm hover:text-[#00B5CE] transition-colors duration-300",children:[e.icon,s.jsx("span",{children:e.label})]}):s.jsxs("a",{href:e.href,className:"flex items-center gap-3 text-gray-700 text-sm hover:text-[#00B5CE] transition-colors duration-300",children:[e.icon,s.jsx("span",{children:e.label})]})},a))})})})})]}),s.jsxs("button",{"aria-label":"cart",onClick:()=>C(!0),className:"flex items-center relative p-2 hover:bg-white/10 rounded transition-colors",children:[s.jsx(r,{size:20}),te>0&&s.jsx("span",{className:"absolute -right-1 -top-1 inline-flex items-center justify-center w-5 h-5 bg-red-500 text-white rounded-full text-xs font-bold",children:te})]})]})]})]}),s.jsxs("div",{className:"flex md:hidden items-center justify-between px-4 py-2",children:[s.jsx("a",{href:"/",className:"flex items-center justify-start z-[51]",children:s.jsx("img",{src:`/assets/resources/logo.png?v=${crypto.randomUUID()}`,alt:x.APP_NAME,className:"h-10 object-contain object-center",onError:e=>{e.target.onerror=null,e.target.src="/assets/img/logo-bk.svg"}})}),s.jsx("button",{"aria-label":"Menú",onClick:()=>E(!S),className:"flex items-center justify-center bg-secondary p-2 rounded-lg text-white z-[51]",children:S?s.jsx(i,{size:24}):s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[s.jsx("path",{d:"M10 5H20",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"M4 12H20",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"M4 19H14",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})})]}),s.jsx(h,{data:j,cart:f,setCart:w,modalOpen:k,setModalOpen:C})]}),s.jsx(u,{children:P&&J&&s.jsxs(b.div,{initial:{opacity:0,y:-20,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.98},transition:{duration:.35,ease:[.4,0,.2,1]},className:"fixed left-0 right-0 z-40 w-full bg-secondary text-white shadow-2xl hidden md:block",style:{top:R?64:120},onMouseLeave:()=>{W(!1),_(null)},children:[s.jsx("div",{className:"max-w-7xl mx-auto px-6 py-8 max-h-[calc(80vh-100px)] overflow-hidden",children:Z(J.id).length>0?s.jsx("div",{className:"flex gap-8 overflow-x-auto pb-2 custom-scrollbar",style:{WebkitOverflowScrolling:"touch",maxWidth:"100%",overflowX:"auto"},children:Z(J.id).map(e=>{const a="min(400px, 33vw)";return s.jsxs("div",{className:"flex-shrink-0 space-y-4 bg-secondary rounded-lg p-4",style:{minWidth:a,maxWidth:a,width:a,boxSizing:"border-box"},children:[s.jsx("div",{className:"pb-2",children:s.jsx("img",{src:`/storage/images/brand/${e.image}`,alt:e.name,className:"h-10 object-contain",onError:e=>e.target.src="/api/cover/thumbnail/null"})}),s.jsx("ul",{className:"space-y-2 max-h-[320px] overflow-y-auto pr-2 custom-scrollbar",children:Q(J.id,e.id).map(e=>s.jsx("li",{children:s.jsxs("a",{href:`/categoria/${J.slug}/${e.slug}`,className:"text-white hover:customtext-primary border-b pb-2 border-white/40 transition-colors text-sm flex items-center gap-2",children:[s.jsx("span",{className:"text-[#00B5CE]",children:"•"}),s.jsx("span",{children:e.name})]})},e.id))})]},e.id)})}):s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 max-h-[500px] overflow-y-auto pr-2 custom-scrollbar",children:ee(J.id).map(e=>s.jsx("a",{href:`/categoria/${J.slug}/${e.slug}`,className:"bg-secondary hover:bg-white/10 rounded-lg p-4 transition-colors",children:s.jsx("h3",{className:"text-white font-medium text-sm",children:e.name})},e.id))})}),s.jsx("div",{className:"bg-secondary border-t border-gray-600",children:s.jsx("div",{className:"max-w-7xl mx-auto px-6 py-6",children:s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[s.jsx("h4",{className:"text-2xl font-bold text-white",children:"Nuestro Blog"}),s.jsx("div",{className:"flex flex-wrap items-center gap-4 md:gap-6",children:["CONSTRUCCIÓN","CARPINTERÍA","MAESTRANZA","MINERÍA"].map((e,a,t)=>s.jsxs(l.Fragment,{children:[s.jsx("a",{href:`/categoria/${e.toLowerCase()}`,className:"text-sm font-medium text-white hover:customtext-primary transition-colors uppercase tracking-wide",children:e}),a<t.length-1&&s.jsx("span",{className:"text-white hidden md:inline",children:"|"})]},e))})]})})})]})}),s.jsx(u,{children:U&&s.jsx(b.div,{initial:{opacity:0,y:-20,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.98},transition:{duration:.35,ease:[.4,0,.2,1]},className:"fixed left-0 right-0 z-40 w-full bg-white text-black shadow-2xl hidden md:block",style:{top:R?64:125},onMouseLeave:()=>{I(!1)},children:s.jsx("div",{className:"max-w-7xl mx-auto px-6 py-8 max-h-[calc(80vh-100px)] overflow-hidden",children:s.jsxs("div",{className:"block relative w-full max-w-xl",children:[s.jsx("a",{href:M.trim()?`/catalogo?search=${encodeURIComponent(M)}`:"#",className:"absolute left-3 top-1/2 transform -translate-y-1/2 p-2 customtext-neutral-dark transition-colors","aria-label":"Buscar",children:s.jsx(a,{})}),s.jsx("input",{type:"search",placeholder:"Buscar productos",value:M,onChange:e=>$(e.target.value),className:"w-full pl-20 py-2 border-none rounded-full focus:ring-0 focus:outline-none"})]})})})}),s.jsx(u,{children:S&&s.jsxs(b.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},className:"md:hidden bg-primary fixed left-0 w-full h-[calc(100vh-56px)] z-40 overflow-hidden",style:{top:R?50:110},children:[s.jsx("div",{className:"px-4 py-3 border-b border-white/10 bg-white",children:s.jsxs("div",{className:"relative flex items-center",children:[s.jsx(a,{className:"absolute left-3 customtext-neutral-dark",size:20}),s.jsx("input",{type:"search",placeholder:"Búsqueda",value:H,onChange:e=>q(e.target.value),className:"w-full pl-10 py-2 bg-transparent border-b border-white/40 customtext-neutral-dark placeholder-black focus:outline-none focus:border-white"})]})}),K?s.jsxs("div",{className:"h-full flex flex-col bg-secondary",children:[s.jsx("div",{className:"sticky top-0 bg-secondary border-b border-white/10",children:s.jsxs("button",{onClick:()=>{X(!1),G(null)},className:"flex items-center gap-2 p-4 text-white",children:[s.jsx(o,{size:20}),s.jsx("span",{className:"text-sm font-medium uppercase",children:D?.name})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar pt-4 pb-14",children:Z(D?.id).length>0?s.jsx("div",{className:"p-4 space-y-6",children:Z(D?.id).map(e=>s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsx("img",{src:`/storage/images/brand/${e.image}`,alt:e.name,className:"h-6 w-auto object-contain",onError:e=>e.target.src="/api/cover/thumbnail/null"})}),s.jsx("ul",{className:"pl-4 space-y-2",children:Q(D?.id,e.id).map(e=>s.jsx("li",{children:s.jsxs("a",{href:`/categoria/${e.slug}/${e.slug}`,className:"text-white hover:customtext-primary border-b pb-2 border-white/40 transition-colors text-sm flex items-center gap-2",children:[s.jsx("span",{className:"text-[#00B5CE]",children:"•"}),s.jsx("span",{children:e.name})]})},e.id))})]},e.id))}):s.jsx("ul",{className:"p-4 space-y-2",children:ee(D?.id).map(e=>s.jsx("li",{children:s.jsxs("a",{href:`/categoria/${e.slug}/${e.slug}`,className:"text-white hover:customtext-primary border-b pb-2 border-white/40 transition-colors text-sm flex items-center gap-2",children:[s.jsx("span",{className:"text-[#00B5CE]",children:"•"}),s.jsx("span",{children:e.name})]})},e.id))})})]}):s.jsx("div",{className:"h-full flex flex-col",children:s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:s.jsxs("ul",{className:"divide-y divide-white/10",children:[Y.map(e=>s.jsx("li",{className:"border-b border-white/10 text-white",children:s.jsxs("button",{onClick:()=>(e=>{G(e),X(!0)})(e),className:"flex items-center justify-between w-full p-4 text-left hover:bg-white/5",children:[s.jsx("span",{className:"text-base font-medium uppercase",children:e.name}),s.jsx(n,{size:20})]})},e.id)),s.jsx("li",{className:"border-b border-white/10 text-white",children:s.jsxs("a",{href:"/blog",className:"flex items-center justify-between w-full p-4 text-left hover:bg-white/5",children:[s.jsx("span",{className:"text-base font-medium uppercase",children:"NUESTRO BLOG"}),s.jsx(n,{size:20})]})})]})})})]})})]})};export{g as default};
