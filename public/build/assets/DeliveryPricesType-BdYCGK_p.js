var je=Object.defineProperty;var Ne=(c,a,t)=>a in c?je(c,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):c[a]=t;var q=(c,a,t)=>Ne(c,typeof a!="symbol"?a+"":a,t);import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as l}from"./index-BOnQTV8N.js";import{c as ve}from"./ReactAppend-QR5TrZfj.js";import{s as n}from"./server.browser-Bf4gQIc7.js";import{D as ye}from"./DeliveryPricesRest-Dr3vM_Yk.js";import"./main-B6F2O9-U.js";import{B as _e}from"./BasicRest-BML1C-ua.js";import{S as ke}from"./StoresRest-Bb6TODpG.js";import{C as we}from"./CreateReactScript-d60iGIqA.js";import{S as Se}from"./CartKuchara-D9l7c7at.js";import{B as Re}from"./Base-B7OhQLEN.js";import{D as M}from"./DxButton-CsjWvhyj.js";import{M as V}from"./Modal-xDw9ufjg.js";import{T as ae}from"./Table-hR1LHIgy.js";import{I as v}from"./InputFormGroup-iZIO11ZN.js";import{S as Te}from"./SelectFormGroup-X8WqJHHl.js";import{C as U,N as H}from"./Number2Currency-ld0bFawA.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./index-B6ujFmsw.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./CardProductKatya-ncpmQ0JU.js";import"./index-pSueRYGM.js";import"./BooleanLimit-D-OsQsek.js";import"./index.esm-C48oHfFw.js";import"./index-ngrFHoWO.js";import"./Global-Bz6gVLc5.js";/* empty css               *//* empty css              */import"./General-CE1RDd44.js";import"./LaravelSession-Dz9cpV3l.js";import"./CanAccess-D2C6GWbm.js";import"./tippy-react.esm-DmkRJDEW.js";import"./Logout-BpuTJ_83.js";import"./MenuItemContainer-DcxtOi47.js";class Ce extends _e{constructor(){super(...arguments);q(this,"path","admin/types_delivery");q(this,"hasFiles",!0)}}const R=new ye,ce=new Ce,Ee=new ke,Fe=({ubigeo:c=[]})=>{const a=l.useRef(),t=l.useRef(),T=l.useRef(),J=l.useRef(),C=l.useRef(),E=l.useRef(),y=l.useRef(),_=l.useRef(),F=l.useRef(),D=l.useRef(),A=l.useRef(),P=l.useRef(),k=l.useRef(),w=l.useRef();l.useRef();const[L,K]=l.useState(!1),[ne,Q]=l.useState(!1),[De,Ae]=l.useState(!1),[f,W]=l.useState(!1),[u,X]=l.useState(!1),[N,Y]=l.useState(!1),[d,Z]=l.useState(!1),[g,I]=l.useState(!1),[te,ee]=l.useState("0.00"),[p,se]=l.useState(!1),[Pe,$e]=l.useState([]),[S,G]=l.useState([]),[o,b]=l.useState([]),ie=s=>{s!=null&&s.id?K(!0):K(!1),b([]),E.current.value=(s==null?void 0:s.id)??"",$(y.current).val((s==null?void 0:s.ubigeo)??null).trigger("change");const i=(s==null?void 0:s.price)&&parseFloat(s.price)>0,r=(s==null?void 0:s.express_price)&&parseFloat(s.express_price)>0;s!=null&&s.agency_price&&parseFloat(s.agency_price)>0,W((s==null?void 0:s.is_standard)??(i||!(s!=null&&s.id))),X(r),Y((s==null?void 0:s.is_free)??!1),Z((s==null?void 0:s.is_agency)??!1),I((s==null?void 0:s.agency_payment_on_delivery)??!1),se((s==null?void 0:s.is_store_pickup)??!1);const m=s!=null&&s.agency_payment_on_delivery?"0.00":s!=null&&s.agency_price?parseFloat(s.agency_price).toFixed(2):"0.00";ee(m),s!=null&&s.is_store_pickup&&(re(),s!=null&&s.selected_stores&&Array.isArray(s.selected_stores)&&b(s.selected_stores)),$(T.current).modal("show"),setTimeout(()=>{F.current&&(F.current.checked=(s==null?void 0:s.is_free)??!1),D.current&&(D.current.checked=(s==null?void 0:s.is_express)??!1),A.current&&(A.current.checked=(s==null?void 0:s.is_agency)??!1),P.current&&(P.current.checked=(s==null?void 0:s.is_store_pickup)??!1),_.current&&(_.current.value=(s==null?void 0:s.price)??""),k.current&&(k.current.value=(s==null?void 0:s.express_price)??""),w.current&&(w.current.value=s!=null&&s.agency_payment_on_delivery?"":(s==null?void 0:s.agency_price)??"")},100)},re=async()=>{try{const s=await Ee.paginate({page:1,per_page:100,status:!0,visible:!0});if(s&&s.data&&Array.isArray(s.data)){const i=s.data.filter(r=>{const m=r.visible===!0||r.visible===1,x=r.status===!0||r.status===1,be=r.pickup_available===!0||r.pickup_available===1||r.pickup_available===void 0;return m&&x&&be});console.log("üè™ Tiendas disponibles para retiro:",i.length),G(i)}else G([])}catch(s){console.error("Error loading stores:",s),G([])}},oe=async s=>{s.preventDefault();const i=c.find(x=>x.reniec==y.current.value),r={id:E.current.value||void 0,name:`${i.distrito}, ${i.provincia} - ${i.departamento}`.toTitleCase(),price:f&&_.current.value||0,is_free:N,is_standard:f,is_express:u,is_agency:d,is_store_pickup:p,express_price:u&&k.current.value||0,agency_price:d&&!g&&w.current.value||0,agency_payment_on_delivery:d?g:!1,ubigeo:y.current.value,selected_stores:p&&o.length>0?o:null};await R.save(r)&&(b([]),$(a.current).dxDataGrid("instance").refresh(),$(T.current).modal("hide"))},B=l.useRef(),O=l.useRef(),z=l.useRef(),[h,j]=l.useState([{value:""}]),me=()=>{j([...h,{value:""}])},de=(s,i)=>{const r=[...h];r[s].value=i,j(r)},pe=s=>{if(h.length<=1)return;const i=h.filter((r,m)=>m!==s);j(i)},he=()=>{$(J.current).modal("show")},xe=s=>{s!=null&&s.id?Q(!0):Q(!1),B.current.value=(s==null?void 0:s.id)??"",O.current.value=(s==null?void 0:s.name)??"",z.current.value=(s==null?void 0:s.description)??"",s!=null&&s.characteristics&&s.characteristics.length>0?j(s.characteristics.map(i=>({value:i}))):j([{value:""}]),$(C.current).modal("show")},fe=async s=>{s.preventDefault();const i=new FormData;i.append("name",O.current.value),i.append("description",z.current.value),ne&&i.append("id",B.current.value);const r=h.map(x=>x.value.trim()).filter(x=>x.length>0);i.append("characteristics",JSON.stringify(r)),await ce.save(i)&&($(t.current).dxDataGrid("instance").refresh(),$(C.current).modal("hide"),j([{value:""}]))},ue=async s=>{const{isConfirmed:i}=await Se.fire({title:"Eliminar registro",text:"¬øEstas seguro de eliminar este registro?",icon:"warning",showCancelButton:!0,confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"});!i||!await R.delete(s)||$(a.current).dxDataGrid("instance").refresh()},le=s=>$(n.renderToString(e.jsxs("span",{children:[e.jsx("span",{className:"d-block w-100 text-truncate",children:s.text.replace(s.id,"")}),e.jsxs("small",{className:"d-block",children:["Ubigeo: ",s.id]})]}))),ge=async s=>{const i=s.target.files[0];if(!i)return;s.target.value=null;const r=new FormData;r.append("excel",i),await R.upload(r)&&$(a.current).dxDataGrid("instance").refresh()};return e.jsxs(e.Fragment,{children:[e.jsx("input",{id:"file-input",type:"file",accept:".xlsx, .xls",style:{display:"none"},onChange:ge}),e.jsx(ae,{gridRef:a,title:"Costos de env√≠o",rest:R,exportable:!0,exportableName:"delivery.prices",toolBar:s=>{s.unshift({widget:"dxButton",location:"after",options:{icon:"upload",hint:"Cargar archivo Excel",onClick:()=>document.getElementById("file-input").click()}}),s.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(a.current).dxDataGrid("instance").refresh()}}),s.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Nuevo registro",hint:"Nuevo registro",onClick:()=>ie()}}),s.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",text:"Actualizar datos de Delivery",hint:"Actualizar datos de Delivery",onClick:()=>he()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"ubigeo",caption:"Ubigeo (RENIEC)",width:"150px"},{dataField:"name",caption:"Env√≠o a",allowExporting:!1,calculateCellValue:s=>s.data&&s.data.distrito?`${s.data.distrito}, ${s.data.provincia} - ${s.data.departamento}`:s.name},{dataField:"active_options_search",dataType:"string",caption:"Tipos de delivery",width:"250px",allowFiltering:!0,calculateCellValue:s=>{const i=[];return s.price&&parseFloat(s.price)>0&&!s.is_free&&i.push("Est√°ndar"),(s.is_express||s.express_price&&parseFloat(s.express_price)>0)&&i.push("Express"),s.is_free&&i.push("Gratis"),s.is_agency&&i.push("Agencia"),s.is_store_pickup&&i.push("Tienda"),i.join(", ")},cellTemplate:(s,{data:i})=>{const r=[];i.price&&parseFloat(i.price)>0&&!i.is_free&&r.push(e.jsxs("span",{className:"badge bg-primary me-1 mb-1",children:[e.jsx("i",{className:"fas fa-truck me-1"}),"Est√°ndar"]},"standard")),(i.is_express||i.express_price&&parseFloat(i.express_price)>0)&&r.push(e.jsxs("span",{className:"badge bg-warning text-dark me-1 mb-1",children:[e.jsx("i",{className:"fas fa-bolt me-1"}),"Express"]},"express")),i.is_free&&r.push(e.jsxs("span",{className:"badge bg-success me-1 mb-1",children:[e.jsx("i",{className:"fas fa-gift me-1"}),"Gratis"]},"free")),i.is_agency&&r.push(e.jsxs("span",{className:"badge bg-info me-1 mb-1",children:[e.jsx("i",{className:"fas fa-building me-1"}),"Agencia ",i.agency_payment_on_delivery?"(Pago Destino)":""]},"agency")),i.is_store_pickup&&r.push(e.jsxs("span",{className:"badge bg-primary me-1 mb-1",children:[e.jsx("i",{className:"fas fa-store me-1"}),"Tienda"]},"store")),r.length===0?s.html(n.renderToString(e.jsxs("span",{className:"text-muted font-italic",children:[e.jsx("i",{className:"fas fa-times-circle me-1"}),"Sin opciones"]}))):s.html(n.renderToString(e.jsx("div",{className:"d-flex flex-wrap",children:r})))}},{dataField:"price",caption:"Precios",dataType:"number",width:"200px",cellTemplate:(s,{data:i})=>{const r=[];i.price&&parseFloat(i.price)>0&&r.push(e.jsxs("div",{className:"mb-1",children:[e.jsx("span",{className:"badge bg-primary me-1",children:"Est."}),e.jsxs("strong",{children:[U()," ",H(i.price)]})]},"standard")),i.express_price&&parseFloat(i.express_price)>0&&r.push(e.jsxs("div",{className:"mb-1",children:[e.jsx("span",{className:"badge bg-warning text-dark me-1",children:"Exp."}),e.jsxs("strong",{children:[U()," ",H(i.express_price)]})]},"express")),i.is_agency&&(i.agency_payment_on_delivery?r.push(e.jsxs("div",{className:"mb-1",children:[e.jsx("span",{className:"badge bg-info me-1",children:"Age."}),e.jsx("strong",{className:"text-info",children:"Pago en Destino"})]},"agency")):i.agency_price&&r.push(e.jsxs("div",{className:"mb-1",children:[e.jsx("span",{className:"badge bg-info me-1",children:"Age."}),e.jsxs("strong",{children:[U()," ",H(i.agency_price)]})]},"agency"))),i.is_free&&r.push(e.jsxs("div",{className:"mb-1",children:[e.jsx("span",{className:"badge bg-success me-1",children:"Free"}),e.jsx("strong",{className:"text-success",children:"GRATIS*"})]},"free")),i.is_store_pickup&&r.push(e.jsxs("div",{className:"mb-1",children:[e.jsx("span",{className:"badge bg-primary me-1",children:"Tienda"}),e.jsx("strong",{className:"text-success",children:"GRATIS"})]},"store")),r.length===0?s.html(n.renderToString(e.jsx("span",{className:"text-muted font-italic",children:"- Sin precios -"}))):s.html(n.renderToString(e.jsxs("div",{className:"d-flex flex-column",children:[r,i.is_free&&e.jsx("small",{className:"text-muted",children:"* Condicional"})]})))}},{dataField:"selected_stores",caption:"Tiendas",width:"200px",cellTemplate:(s,{data:i})=>{i.is_store_pickup||i.is_free?i.selected_stores&&Array.isArray(i.selected_stores)&&i.selected_stores.length>0?s.html(n.renderToString(e.jsx("div",{children:e.jsxs("span",{className:"badge bg-primary",children:[i.selected_stores.length," tienda",i.selected_stores.length>1?"s":""," espec√≠fica",i.selected_stores.length>1?"s":""]})}))):s.html(n.renderToString(e.jsx("span",{className:"badge bg-success",children:"Todas las tiendas"}))):s.html(n.renderToString(e.jsx("span",{className:"text-muted font-italic",children:"No aplica"})))},allowFiltering:!1,allowExporting:!1},{caption:"Acciones",width:"100px",cellTemplate:(s,{data:i})=>{s.css("text-overflow","unset"),s.append(M({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>ie(i)})),s.append(M({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>ue(i.id)}))},allowFiltering:!1,allowExporting:!1}]}),e.jsxs(V,{modalRef:T,title:L?"Editar Costo de env√≠o":"Agregar Costo de env√≠o",onSubmit:oe,size:"lg",children:[e.jsx("input",{ref:E,type:"hidden"}),e.jsxs("div",{id:"form-container",className:"row",children:[e.jsx(Te,{eRef:y,label:"Distrito/Ubigeo",templateResult:le,templateSelection:le,dropdownParent:"#form-container",required:!0,children:c.map((s,i)=>e.jsxs("option",{value:s.reniec,children:[s.reniec," ",s.distrito," ",s.provincia," ",s.departamento]},i))}),e.jsx("div",{className:"col-12 mb-4",children:e.jsx("div",{className:"alert alert-primary border-0 shadow-sm",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"},children:e.jsxs("div",{className:"d-flex align-items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("i",{className:"fas fa-info-circle fa-2x me-3 opacity-75"})}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsxs("h5",{className:"alert-heading mb-2",children:[e.jsx("i",{className:"fas fa-truck me-2"}),"¬øC√≥mo configurar las opciones de delivery?"]}),e.jsxs("p",{className:"mb-2",children:["Selecciona ",e.jsx("strong",{children:"UNA O VARIAS"})," opciones de env√≠o para esta ubicaci√≥n. Los clientes ver√°n todas las opciones activas en el checkout y podr√°n elegir la que m√°s les convenga."]}),e.jsx("hr",{className:"my-2",style:{borderColor:"rgba(255,255,255,0.3)"}}),e.jsxs("div",{className:"small",children:[e.jsx("strong",{children:"üí° Ejemplo:"}),' Puedes activar "Delivery Est√°ndar" + "Delivery Express" + "Retiro en Tienda" al mismo tiempo.']})]})]})})}),e.jsx("div",{className:"col-md-6 mb-3",children:e.jsx("div",{className:`card h-100 border-2 ${f?"border-primary shadow-sm":"border-light"}`,children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-start mb-3",children:[e.jsxs("div",{className:"form-check flex-grow-1",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:"enableStandard",checked:f,onChange:s=>W(s.target.checked),style:{width:"1.2em",height:"1.2em"}}),e.jsxs("label",{className:"form-check-label fw-bold ms-2",htmlFor:"enableStandard",style:{fontSize:"1.1rem"},children:[e.jsx("i",{className:"fas fa-truck text-primary me-2"}),"Delivery Est√°ndar"]})]}),f&&e.jsx("span",{className:"badge bg-primary",children:"Activo"})]}),e.jsxs("p",{className:"text-muted small mb-3",children:[e.jsx("i",{className:"fas fa-clock me-1"})," Entrega en 3-5 d√≠as h√°biles",e.jsx("br",{}),e.jsx("i",{className:"fas fa-box me-1"})," Opci√≥n m√°s com√∫n para env√≠os regulares"]}),f&&e.jsxs("div",{className:"mt-3 pt-3 border-top",children:[e.jsx(v,{eRef:_,label:e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-money-bill-wave me-1"})," Costo de env√≠o (S/)"]}),col:"col-12",type:"number",step:.01,placeholder:"Ej: 15.00",required:!0}),e.jsxs("div",{className:"alert alert-light border mb-0",children:[e.jsx("small",{className:"text-muted d-block mb-1",children:e.jsx("strong",{children:"üí° Sugerencia:"})}),e.jsx("small",{className:"text-muted",children:"Este es el precio est√°ndar que pagar√°n los clientes por env√≠o regular."})]})]})]})})}),e.jsx("div",{className:"col-md-6 mb-3",children:e.jsx("div",{className:`card h-100 border-2 ${u?"border-warning shadow-sm":"border-light"}`,children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-start mb-3",children:[e.jsxs("div",{className:"form-check flex-grow-1",children:[e.jsx("input",{ref:D,className:"form-check-input",type:"checkbox",id:"enableExpress",checked:u,onChange:s=>X(s.target.checked),style:{width:"1.2em",height:"1.2em"}}),e.jsxs("label",{className:"form-check-label fw-bold ms-2",htmlFor:"enableExpress",style:{fontSize:"1.1rem"},children:[e.jsx("i",{className:"fas fa-bolt text-warning me-2"}),"Delivery Express"]})]}),u&&e.jsx("span",{className:"badge bg-warning text-dark",children:"‚ö° R√°pido"})]}),e.jsxs("p",{className:"text-muted small mb-3",children:[e.jsx("i",{className:"fas fa-shipping-fast me-1"})," Entrega en 24-48 horas",e.jsx("br",{}),e.jsx("i",{className:"fas fa-star me-1"})," Env√≠o prioritario con costo adicional"]}),u&&e.jsxs("div",{className:"mt-3 pt-3 border-top",children:[e.jsx(v,{eRef:k,label:e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-money-bill-wave me-1"})," Costo express (S/)"]}),col:"col-12",type:"number",step:.01,placeholder:"Ej: 25.00",required:!0}),e.jsxs("div",{className:"alert alert-warning border mb-0",children:[e.jsx("small",{className:"text-dark d-block mb-1",children:e.jsx("strong",{children:"‚ö° Importante:"})}),e.jsx("small",{className:"text-dark",children:"Precio premium por entrega r√°pida. Generalmente mayor que el est√°ndar."})]})]})]})})}),e.jsx("div",{className:"col-md-6 mb-3",children:e.jsx("div",{className:`card h-100 border-2 ${N?"border-success shadow-sm":"border-light"}`,children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-start mb-3",children:[e.jsxs("div",{className:"form-check flex-grow-1",children:[e.jsx("input",{ref:F,className:"form-check-input",type:"checkbox",id:"enableFree",checked:N,onChange:s=>Y(s.target.checked),style:{width:"1.2em",height:"1.2em"}}),e.jsxs("label",{className:"form-check-label fw-bold ms-2",htmlFor:"enableFree",style:{fontSize:"1.1rem"},children:[e.jsx("i",{className:"fas fa-gift text-success me-2"}),"Delivery Gratis"]})]}),N&&e.jsx("span",{className:"badge bg-success",children:"üéÅ Gratis"})]}),e.jsxs("p",{className:"text-muted small mb-3",children:[e.jsx("i",{className:"fas fa-check-circle me-1"})," Condicional (monto m√≠nimo)",e.jsx("br",{}),e.jsx("i",{className:"fas fa-heart me-1"})," Incentiva compras mayores"]}),N&&e.jsx("div",{className:"alert alert-success border-0 mb-0 mt-3",children:e.jsxs("div",{className:"d-flex align-items-start",children:[e.jsx("i",{className:"fas fa-info-circle me-2 mt-1"}),e.jsxs("div",{children:[e.jsx("strong",{className:"d-block mb-1",children:"¬øC√≥mo funciona?"}),e.jsxs("small",{children:["El env√≠o ser√° ",e.jsx("strong",{children:"GRATIS"})," cuando el cliente alcance el monto m√≠nimo de compra configurado en el sistema."]}),e.jsx("hr",{className:"my-2"}),e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fas fa-cog me-1"})," Configura el monto m√≠nimo en: ",e.jsx("strong",{children:"Configuraciones ‚Üí General"})]})]})]})})]})})}),e.jsx("div",{className:"col-md-6 mb-3",children:e.jsx("div",{className:`card h-100 border-2 ${d?"border-info shadow-sm":"border-light"}`,children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-start mb-3",children:[e.jsxs("div",{className:"form-check flex-grow-1",children:[e.jsx("input",{ref:A,className:"form-check-input",type:"checkbox",id:"enableAgency",checked:d,onChange:s=>Z(s.target.checked),style:{width:"1.2em",height:"1.2em"}}),e.jsxs("label",{className:"form-check-label fw-bold ms-2",htmlFor:"enableAgency",style:{fontSize:"1.1rem"},children:[e.jsx("i",{className:"fas fa-building text-info me-2"}),"Recojo en Agencia"]})]}),d&&e.jsx("span",{className:"badge bg-info",children:"üì¶ Agencia"})]}),e.jsxs("p",{className:"text-muted small mb-3",children:[e.jsx("i",{className:"fas fa-map-marker-alt me-1"})," Olva, Shalom, Cruz del Sur, etc.",e.jsx("br",{}),e.jsx("i",{className:"fas fa-hand-holding-usd me-1"})," Dos modalidades disponibles"]}),d&&e.jsxs("div",{className:"mt-3 pt-3 border-top",children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"form-label fw-bold",children:[e.jsx("i",{className:"fas fa-money-check-alt me-1"}),"Tipo de cobro:"]}),e.jsxs("div",{className:"btn-group w-100",role:"group",children:[e.jsx("input",{type:"radio",className:"btn-check",name:"agencyPaymentType",id:"agencyFixedPrice",checked:!g,onChange:()=>I(!1)}),e.jsxs("label",{className:"btn btn-outline-primary",htmlFor:"agencyFixedPrice",children:[e.jsx("i",{className:"fas fa-dollar-sign me-1"}),"Nosotros cobramos"]}),e.jsx("input",{type:"radio",className:"btn-check",name:"agencyPaymentType",id:"agencyPaymentOnDelivery",checked:g,onChange:()=>I(!0)}),e.jsxs("label",{className:"btn btn-outline-info",htmlFor:"agencyPaymentOnDelivery",children:[e.jsx("i",{className:"fas fa-hand-holding-usd me-1"}),"Pago en Destino"]})]})]}),!g&&e.jsxs("div",{className:"animate__animated animate__fadeIn",children:[e.jsx(v,{eRef:w,label:e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-money-bill-wave me-1"})," Precio que cobramos (S/)"]}),col:"col-12",type:"number",step:.01,placeholder:"Ej: 10.00",onChange:s=>ee(s.target.value||"0.00"),required:!0}),e.jsx("div",{className:"alert alert-primary border-0 mb-0",children:e.jsxs("div",{className:"d-flex align-items-start",children:[e.jsx("i",{className:"fas fa-info-circle me-2 mt-1"}),e.jsxs("div",{children:[e.jsx("strong",{className:"d-block mb-1",children:"Nosotros cobramos el env√≠o"}),e.jsxs("small",{children:["El cliente paga ",e.jsxs("strong",{children:["S/ ",te]})," en el checkout. Con esta opci√≥n, el cliente ",e.jsx("strong",{children:"ya NO paga nada adicional"})," al recoger en la agencia."]})]})]})})]}),g&&e.jsx("div",{className:"animate__animated animate__fadeIn",children:e.jsx("div",{className:"alert alert-info border-0 mb-0",children:e.jsxs("div",{className:"d-flex align-items-start",children:[e.jsx("i",{className:"fas fa-hand-holding-usd fa-2x me-3 mt-1"}),e.jsxs("div",{children:[e.jsx("strong",{className:"d-block mb-2",children:"Cliente paga contra entrega"}),e.jsxs("ul",{className:"mb-0 ps-3",children:[e.jsxs("li",{className:"mb-1",children:[e.jsx("strong",{children:"Nosotros NO cobramos"})," por el env√≠o"]}),e.jsxs("li",{className:"mb-1",children:["El cliente paga directamente a la ",e.jsx("strong",{children:"agencia de transporte"})," al recoger"]}),e.jsxs("li",{children:["Ideal para agencias como: ",e.jsx("span",{className:"badge bg-info ms-1",children:"Olva"})," ",e.jsx("span",{className:"badge bg-info",children:"Shalom"})," ",e.jsx("span",{className:"badge bg-info",children:"Cruz del Sur"})]})]})]})]})})})]})]})})}),e.jsx("div",{className:"col-12 mb-3",children:e.jsx("div",{className:`card border-2 ${p?"border-primary shadow-sm":"border-light"}`,children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-start mb-3",children:[e.jsxs("div",{className:"form-check flex-grow-1",children:[e.jsx("input",{ref:P,className:"form-check-input",type:"checkbox",id:"enableStorePickup",checked:p,onChange:s=>{se(s.target.checked),s.target.checked?re():b([])},style:{width:"1.2em",height:"1.2em"}}),e.jsxs("label",{className:"form-check-label fw-bold ms-2",htmlFor:"enableStorePickup",style:{fontSize:"1.1rem"},children:[e.jsx("i",{className:"fas fa-store text-primary me-2"}),"Retiro en Tienda"]})]}),p&&e.jsx("span",{className:"badge bg-primary",children:"üè™ Sin costo"})]}),e.jsxs("p",{className:"text-muted small mb-3",children:[e.jsx("i",{className:"fas fa-map-marked-alt me-1"})," Cliente recoge en tienda f√≠sica",e.jsx("br",{}),e.jsx("i",{className:"fas fa-dollar-sign me-1"})," ",e.jsx("strong",{className:"text-success",children:"Totalmente GRATIS"})," (sin costo de env√≠o)"]}),p&&e.jsx("div",{className:"alert alert-primary border-0 mb-0 mt-3",children:e.jsxs("div",{className:"d-flex align-items-start",children:[e.jsx("i",{className:"fas fa-check-circle me-2 mt-1"}),e.jsxs("div",{children:[e.jsx("strong",{className:"d-block mb-1",children:"Beneficio para el cliente"}),e.jsx("small",{children:"El cliente ahorra el costo de env√≠o recogiendo su pedido directamente en tu tienda."})]})]})})]})})}),p&&e.jsx("div",{className:"col-12 mb-3",children:e.jsxs("div",{className:"card border-0 bg-light",children:[e.jsx("div",{className:"card-header bg-primary text-white",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-store-alt me-2"}),"Selecciona las tiendas para retiro"]})}),e.jsx("div",{className:"card-body",children:S.length>0?e.jsxs("div",{children:[e.jsx("div",{className:"alert alert-info border-0 mb-3",children:e.jsxs("div",{className:"d-flex align-items-start",children:[e.jsx("i",{className:"fas fa-lightbulb fa-lg me-2 mt-1"}),e.jsxs("div",{children:[e.jsx("strong",{className:"d-block mb-2",children:"¬øC√≥mo funciona?"}),e.jsxs("ul",{className:"mb-0 ps-3",children:[e.jsxs("li",{className:"mb-1",children:[e.jsx("strong",{children:"Sin selecci√≥n:"})," Retiro disponible en ",e.jsx("span",{className:"badge bg-success",children:"TODAS las tiendas"})]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Con selecci√≥n:"})," Retiro solo en ",e.jsx("span",{className:"badge bg-primary",children:"tiendas marcadas"})]})]}),e.jsxs("small",{className:"text-muted d-block mt-2",children:[e.jsx("i",{className:"fas fa-info-circle me-1"}),"Solo se muestran tiendas del tipo ",e.jsx("strong",{children:"Tienda"})," y ",e.jsx("strong",{children:"Tienda Principal"})]})]})]})}),e.jsx("div",{className:"row",children:S.map(s=>e.jsx("div",{className:"col-md-6 mb-3",children:e.jsx("div",{className:`card border ${o.includes(s.id)?"border-primary bg-light":""}`,children:e.jsx("div",{className:"card-body p-3",children:e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:`store_${s.id}`,checked:o.includes(s.id),onChange:i=>{i.target.checked?b([...o,s.id]):b(o.filter(r=>r!==s.id))}}),e.jsx("label",{className:"form-check-label w-100",htmlFor:`store_${s.id}`,children:e.jsxs("div",{className:"d-flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:`/storage/images/store/${s.image}`,alt:s.name,className:"rounded",style:{width:"50px",height:"50px",objectFit:"cover"},onError:i=>i.target.src="/api/cover/thumbnail/null"})}),e.jsxs("div",{className:"flex-grow-1 ms-3",children:[e.jsxs("div",{className:"d-flex align-items-center gap-2 mb-1",children:[e.jsx("h6",{className:"mb-0",children:s.name}),e.jsx("span",{className:`badge ${s.type==="tienda_principal"?"bg-warning text-dark":"bg-info"}`,children:s.type==="tienda_principal"?"Tienda Principal":"Tienda"})]}),e.jsxs("small",{className:"text-muted d-block",children:[e.jsx("i",{className:"fas fa-map-marker-alt me-1"}),s.address]}),s.phone&&e.jsxs("small",{className:"text-muted d-block",children:[e.jsx("i",{className:"fas fa-phone me-1"}),s.phone]})]})]})})]})})})},s.id))}),e.jsx("div",{className:"mt-3 pt-3 border-top",children:e.jsxs("div",{className:"d-flex align-items-center justify-content-between bg-white p-3 rounded border",children:[e.jsx("div",{children:e.jsxs("strong",{className:"text-primary",children:[e.jsx("i",{className:"fas fa-check-circle me-1"}),"Tiendas seleccionadas:"]})}),e.jsx("div",{children:o.length===0?e.jsxs("span",{className:"badge bg-success fs-6",children:[e.jsx("i",{className:"fas fa-store me-1"}),"Todas (",S.length,")"]}):e.jsxs("span",{className:"badge bg-primary fs-6",children:[e.jsx("i",{className:"fas fa-map-marker-alt me-1"}),o.length," de ",S.length]})})]})})]}):e.jsx("div",{className:"alert alert-warning border-0 mb-0",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("i",{className:"fas fa-exclamation-triangle fa-2x me-3"}),e.jsxs("div",{children:[e.jsx("strong",{className:"d-block mb-1",children:"No hay tiendas disponibles"}),e.jsx("small",{children:"No se encontraron tiendas activas en esta ubicaci√≥n."}),e.jsx("div",{className:"mt-2",children:e.jsxs("a",{href:"/admin/stores",target:"_blank",className:"btn btn-sm btn-warning",children:[e.jsx("i",{className:"fas fa-plus me-1"}),"Administrar tiendas"]})})]})]})})})]})})]})]}),e.jsx(V,{modalRef:J,title:"Tipos de Delivery",size:"lg",children:e.jsx(ae,{gridRef:t,title:"Tipos de Delivery",rest:ce,toolBar:s=>{s.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(t.current).dxDataGrid("instance").refresh()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"name",caption:"Nombre",width:"150px",allowExporting:!1},{dataField:"description",caption:"Descripci√≥n",width:"300px",cellTemplate:(s,{data:i})=>{s.html(i.description||'<i class="text-muted">- Sin descripci√≥n -</i>')}},{dataField:"characteristics",caption:"Caracteristicas",width:"200px",cellTemplate:(s,{data:i})=>{i.characteristics&&i.characteristics.forEach(r=>{s.css("text-overflow","unset"),s.append(n.renderToString(e.jsx("li",{className:"d-flex gap-2",children:e.jsxs("i",{className:"text-muted font-italic d-block",children:["- ",r]})})))})}},{caption:"Acciones",width:"50px",cellTemplate:(s,{data:i})=>{s.css("text-overflow","unset"),s.append(M({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>xe(i)}))},allowFiltering:!1,allowExporting:!1}]})}),e.jsxs(V,{modalRef:C,title:L?"Editar tipo de Delivery":"Agregar tipo de Delivery",onSubmit:fe,size:"sm",children:[e.jsx("input",{ref:B,type:"hidden"}),e.jsxs("div",{id:"form-container",className:"row",children:[e.jsxs("div",{className:"col-12",children:[e.jsx(v,{eRef:O,label:"Nombre",col:"col-12",type:"string"}),e.jsx(v,{eRef:z,label:"descripcion",col:"col-12",type:"string",required:!0})]}),e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Caracter√≠sticas"}),h.map((s,i)=>e.jsxs("div",{className:"input-group mb-2",children:[e.jsx("input",{type:"text",className:"form-control",placeholder:"Ej: Egresada de la Universidad Nacional Federico Villarreal.",value:s.value,onChange:r=>de(i,r.target.value)}),e.jsx("button",{type:"button",className:"btn btn-outline-danger",onClick:()=>pe(i),disabled:h.length<=1,children:e.jsx("i",{className:"fas fa-times"})})]},i)),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:me,children:[e.jsx("i",{className:"fas fa-plus me-1"})," Agregar caracter√≠stica"]})]})})]})]})]})};we((c,a)=>{ve.createRoot(c).render(e.jsx(Re,{...a,title:"Costos de envio",children:e.jsx(Fe,{...a})}))});
