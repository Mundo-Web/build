var l=Object.defineProperty;var d=(s,r,e)=>r in s?l(s,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[r]=e;var i=(s,r,e)=>d(s,typeof r!="symbol"?r+"":r,e);import"./main-iQpBVKTZ.js";import{B as m}from"./BasicRest-tjV1jpAY.js";class v extends m{constructor(){super(...arguments);i(this,"path","admin/items");i(this,"hasFiles",!0);i(this,"importData",async e=>{console.log("FormData recibido en importData:",[...e.entries()]);try{const o=await fetch("/api/unified-import",{method:"POST",body:e}),t=await o.json();if(console.log("Respuesta del servidor:",t),!o.ok)throw new Error((t==null?void 0:t.error)??(t==null?void 0:t.message)??"Error en la importación");return t}catch(o){throw console.error("Error en importData:",o.message),o}});i(this,"exportData",async()=>{try{const e=await fetch(`/api/${this.path}/export`,{method:"GET",headers:{Accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","X-Requested-With":"XMLHttpRequest"}});if(!e.ok){const p=e.headers.get("content-type");if(p&&p.includes("application/json")){const a=await e.json();throw new Error((a==null?void 0:a.message)||(a==null?void 0:a.error)||"Error al exportar items")}else{const a=await e.text();throw console.error("Error HTML:",a),new Error(`Error del servidor (${e.status}): Revisa la consola del navegador y los logs de Laravel`)}}const o=await e.blob();if(o.type!=="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"&&o.type!=="application/octet-stream")throw console.error("Tipo de archivo recibido:",o.type),new Error("El servidor no devolvió un archivo Excel válido");const t=`items_export_${new Date().toISOString().split("T")[0]}.xlsx`,c=window.URL.createObjectURL(o),n=document.createElement("a");return n.href=c,n.download=t,document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(c),document.body.removeChild(n),!0}catch(e){throw console.error("Error en exportData:",e.message),e}})}}export{v as I};
