import{j as s}from"./AboutSimple-Cf8x2fCZ.js";import{r as t}from"./index-BH53Isel.js";import{I as _}from"./ItemsRest-BIADNguh.js";import"./main-BvVILmTO.js";import q from"./ProductInfinite-B30_yxao.js";import{C as D}from"./HeaderSearch-ugNpoW7D.js";import{M as O}from"./minus-jyhodMPN.js";import{P as f}from"./plus-Bot15Khs.js";import{C as U}from"./circle-check-CPWcvHtC.js";import{C as V}from"./chevron-up-D78jyEhP.js";import{C as G}from"./chevron-down-DS-mdh9v.js";import{S as N}from"./shopping-cart-CZEUxbmv.js";import{H as Q,C as z}from"./house-D7iMwGag.js";import{S as H}from"./store-BlkTk2Px.js";import{P as T}from"./phone-BZ94M50k.js";import"./index-yBjzXJbu.js";import"./BasicRest-C_0LADdJ.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";import"./BlogCarousel-DpjB9swg.js";import"./navigation-CLaRFmip.js";import"./create-element-if-not-defined-BzEE3aGu.js";/* empty css               */import"./InfiniteCategory-BwYXk1Kq.js";import"./ProductDetailB-Bd5QTXQc.js";import"./ProductNavigation-DnTkJEj2.js";import"./ProductCard-erObE6pO.js";import"./adjustTextColor-FzLvY4Q1.js";import"./tag-BY9rARtP.js";import"./createLucideIcon-Cy5Ya80P.js";import"./chevron-left-B2s3ZsB7.js";import"./chevron-right-Ckt5D2ka.js";import"./index-Bv81MoWS.js";import"./index-fNjTmf9T.js";import"./index-Chjiymov.js";import"./CartItemRow-BhtCHp_j.js";import"./tippy-react.esm-BWiGTO87.js";import"./index-rimy3MAc.js";import"./Number2Currency-e57Tgsuk.js";const As=({item:e,data:y,setCart:i,cart:x})=>{const m=new _,[b,p]=t.useState(!1),[h,g]=t.useState({url:e==null?void 0:e.image,type:"main"}),[n,u]=t.useState(1),[B,K]=t.useState(!1),[c,v]=t.useState([]),[j,w]=t.useState([]),[d,C]=t.useState(!1),[L,J]=t.useState(!1),S=()=>{n<10&&u(n+1)},k=()=>{n>1&&u(n-1)},I=a=>{let r=parseInt(a.target.value,10);(isNaN(r)||r<1)&&(r=1),r>10&&(r=10),u(r)},E=a=>{const r=structuredClone(x),l=r.findIndex(o=>o.id==a.id);l==-1?r.push({...a,quantity:n}):r[l].quantity++,i(r),p(!0),setTimeout(()=>p(!1),3e3)};t.useEffect(()=>{e!=null&&e.id&&(P(e),M(e),F(e))},[e]);const F=async a=>{try{if(!await m.updateViews({id:a==null?void 0:a.id}))return}catch{return}},M=async a=>{try{const r=await m.verifyCombo({id:a==null?void 0:a.id});if(!r)return;const l=r[0].associated_items;v(Object.values(l))}catch{return}},P=async a=>{try{const r=await m.productsRelations({id:a==null?void 0:a.id});if(!r)return;w(Object.values(r))}catch{return}},R=c.reduce((a,r)=>a+parseFloat(r.final_price),0),$=()=>{i(a=>{const r=structuredClone(a);return[...c,e].forEach(l=>{const o=r.findIndex(A=>A.id===l.id);o===-1?r.push({...l,quantity:n}):r[o].quantity++}),r}),toast.success("Carrito de Compras",{description:"Se agregaron con éxito los productos",icon:s.jsx(N,{className:"h-5 w-5 text-green-500"}),duration:3e3,position:"bottom-center"})};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"px-4 md:px-primary mx-auto py-6 md:py-12 bg-[#F7F9FB]",children:[s.jsx("div",{className:"bg-white rounded-xl p-4 md:p-8",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"md:hidden space-y-4",children:[s.jsxs("p",{className:"text-sm text-gray-500",children:["Marca: ",s.jsx("span",{className:"text-gray-900",children:e==null?void 0:e.brand.name})]}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e==null?void 0:e.name})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"aspect-square rounded-lg overflow-hidden bg-gray-100",children:s.jsx("img",{src:`/storage/images/item/${h.url}`,alt:e==null?void 0:e.name,className:"w-full h-full object-contain",onError:a=>a.target.src="/api/cover/thumbnail/null"})}),s.jsxs("div",{className:"mt-4 flex gap-2 overflow-x-auto pb-2",children:[s.jsx("button",{onClick:()=>g({url:e==null?void 0:e.image,type:"main"}),className:`flex-shrink-0 w-16 h-16 rounded-lg border-2 p-1
                                            ${h.url===(e==null?void 0:e.image)?"border-primary":"border-gray-200"}`,children:s.jsx("img",{src:`/storage/images/item/${e==null?void 0:e.image}`,alt:"Main",className:"w-full h-full object-contain",onError:a=>a.target.src="/api/cover/thumbnail/null"})}),e==null?void 0:e.images.filter((a,r,l)=>r===l.findIndex(o=>o.url===a.url)).map((a,r)=>s.jsx("button",{onClick:()=>g({url:a.url,type:"gallery"}),className:`flex-shrink-0 w-16 h-16 rounded-lg border-2 p-1
                                                ${h.url===a.url?"border-primary":"border-gray-200"}`,children:s.jsx("img",{src:`/storage/images/item/${a.url}`,alt:`Gallery ${r+1}`,className:"w-full h-full object-contain",onError:l=>l.target.src="/api/cover/thumbnail/null"})},r))]})]}),s.jsxs("div",{className:"md:hidden space-y-6",children:[s.jsxs("div",{className:"flex justify-between text-sm text-gray-500",children:[s.jsxs("span",{children:["SKU: ",s.jsx("span",{className:"text-gray-900",children:e==null?void 0:e.sku})]}),s.jsxs("span",{children:["Disponibilidad:",s.jsx("span",{className:"text-gray-900 ml-1",children:(e==null?void 0:e.stock)>0?"En stock":"Agotado"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-baseline gap-2",children:[s.jsxs("span",{className:"text-sm text-gray-500 line-through",children:["S/ ",e==null?void 0:e.price]}),s.jsxs("span",{className:"bg-red-500 text-white text-xs px-2 py-1 rounded",children:["-",Number(e==null?void 0:e.discount_percent).toFixed(1),"%"]})]}),s.jsxs("span",{className:"text-3xl font-bold",children:["S/ ",e==null?void 0:e.final_price]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Cantidad"}),s.jsxs("div",{className:"flex items-center border rounded-lg",children:[s.jsx("button",{onClick:k,className:"p-2 hover:bg-gray-100",children:s.jsx(O,{className:"w-4 h-4"})}),s.jsx("input",{type:"number",value:n,onChange:I,className:"w-12 text-center border-x",min:"1",max:"10"}),s.jsx("button",{onClick:S,className:"p-2 hover:bg-gray-100",children:s.jsx(f,{className:"w-4 h-4"})})]}),s.jsx("span",{className:"text-sm text-gray-500",children:"Máx. 10"})]}),s.jsx("button",{onClick:()=>E(e),className:"w-full bg-primary text-white py-3 rounded-xl font-medium hover:opacity-90",children:"Agregar al carrito"}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h3",{className:"font-medium mb-4",children:"Especificaciones principales"}),s.jsx("ul",{className:`space-y-2 ${!d&&"max-h-24 overflow-hidden"}`,children:e==null?void 0:e.specifications.filter(a=>a.type==="principal").map((a,r)=>s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx(U,{className:"text-primary w-5 h-5"}),s.jsx("span",{className:"text-sm",children:a.description})]},r))}),s.jsxs("button",{onClick:()=>C(!d),className:"text-primary text-sm font-medium mt-4 flex items-center gap-1",children:[d?"Ver menos":"Ver más",d?s.jsx(V,{size:16}):s.jsx(G,{size:16})]})]}),c.length>0&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(N,{className:"text-primary w-5 h-5"}),s.jsx("h3",{className:"font-medium",children:"Productos complementarios"})]}),s.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:c.map((a,r)=>s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-lg p-2",children:s.jsx("img",{src:`/storage/images/item/${a.image}`,alt:a.name,className:"w-full h-full object-contain",onError:l=>l.target.src="/api/cover/thumbnail/null"})}),r<c.length-1&&s.jsx(f,{className:"w-4 h-4"})]},r))}),s.jsx("div",{className:"space-y-2",children:c.map((a,r)=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-gray-500",children:a.brand.name}),s.jsx("p",{className:"text-sm font-medium",children:a.name})]}),s.jsxs("span",{className:"font-bold",children:["S/ ",parseFloat(a.final_price).toFixed(2)]})]},r))}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Total"}),s.jsxs("span",{className:"text-lg font-bold",children:["S/ ",R.toFixed(2)]})]}),s.jsx("button",{onClick:$,className:"w-full bg-primary text-white py-2 rounded-lg font-medium",children:"Agregar conjunto"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 border rounded-lg p-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"bg-gray-50 p-3 rounded-full w-max mx-auto mb-2",children:s.jsx(Q,{className:"w-6 h-6 text-primary"})}),s.jsx("p",{className:"text-sm font-medium",children:"Despacho a domicilio"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"bg-gray-50 p-3 rounded-full w-max mx-auto mb-2",children:s.jsx(H,{className:"w-6 h-6 text-primary"})}),s.jsx("p",{className:"text-sm font-medium",children:"Retiro en tienda"})]})]}),s.jsxs("div",{className:"space-y-3 bg-gray-50 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(T,{className:"w-5 h-5 text-primary"}),s.jsx("span",{className:"text-sm font-medium",children:"¿Necesitas ayuda? Llámanos al 012037074"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(z,{className:"w-5 h-5 text-primary"}),s.jsx("span",{className:"text-sm font-medium",children:"Soporte técnico"})]})]})]}),s.jsx("div",{className:"hidden md:block"})]})}),s.jsx("div",{className:"grid gap-20 md:grid-cols-2 bg-white rounded-xl p-8 mt-12"})]}),j.length>0&&s.jsx(q,{data:{title:"Productos relacionados"},items:j,cart:x,setCart:i}),s.jsx(D,{data:y,cart:x,setCart:i,modalOpen:b,setModalOpen:p})]})};export{As as default};
