import{j as e,aq as s,c3 as t,r as a,X as r}from"./vendor-react-SBvaUJTK.js";import{C as l,N as i}from"./Number2Currency-BX4epFEo.js";import{S as n}from"./StoresRest-BOjvDtH9.js";const o=({children:s,className:t="",...a})=>e.jsx("a",{className:`w-full block border-primary cursor-pointer border-2 text-center font-bold customtext-primary py-3 px-4  hover:opacity-90 hover:shadow-md transition-all duration-300 focus:outline-none active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl ${t}`,...a,children:s});function c({onClick:a,className:r=""}){return e.jsxs("div",{className:`relative ${r}`,children:[e.jsx(s,{size:12,className:"absolute -top-1 -left-1 text-yellow-400 animate-ping",style:{animationDelay:"0s"}}),e.jsx(s,{size:10,className:"absolute -top-2 -right-1 text-pink-400 animate-ping",style:{animationDelay:"0.5s"}}),e.jsx(s,{size:8,className:"absolute -bottom-1 -left-2 text-blue-400 animate-ping",style:{animationDelay:"1s"}}),e.jsx(s,{size:14,className:"absolute -bottom-2 -right-2 text-purple-400 animate-ping",style:{animationDelay:"1.5s"}}),e.jsxs("button",{onClick:a,className:"relative group bg-primary p-2 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-110 animate-bounce cursor-pointer",style:{animationDuration:"2s",animationIterationCount:"infinite"},children:[e.jsx("div",{className:"absolute inset-0 bg-primary rounded-xl opacity-0 group-hover:opacity-50 transition-opacity duration-300 blur-lg"}),e.jsx(t,{size:24,className:"text-white relative z-10 drop-shadow-sm"}),e.jsx("div",{className:"absolute inset-0 bg-primary rounded-xl animate-pulse opacity-30"})]}),e.jsx("div",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-20",children:"Â¡PromociÃ³n disponible!"})]})}function d({isOpen:i,onClose:n,suggestion:o,onAddToCart:c,productName:d}){const[m,x]=a.useState(!1);if(!i||!o)return null;return e.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity duration-300",onClick:n}),e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl max-w-md w-full mx-auto transform transition-all duration-300 scale-100",children:[e.jsx("button",{onClick:n,className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-gray-600 transition-colors rounded-full hover:bg-gray-100",children:e.jsx(r,{size:20})}),e.jsxs("div",{className:"text-center pt-8 pb-6 px-6",children:[e.jsxs("div",{className:"relative inline-block mb-4",children:[e.jsx("div",{className:"animate-bounce",children:e.jsx(t,{size:48,className:"customtext-primary mx-auto"})}),e.jsx(s,{size:20,className:"absolute -top-2 -right-2 text-yellow-400 animate-pulse"}),e.jsx(s,{size:16,className:"absolute -bottom-1 -left-2 text-yellow-400 animate-pulse delay-300"})]}),e.jsx("h2",{className:"text-2xl font-bold customtext-neutral-dark mb-2",children:"ðŸŽ‰ Â¡PromociÃ³n Especial!"}),e.jsx("p",{className:"text-gray-600",children:"Tienes un producto que califica para una promociÃ³n"})]}),e.jsxs("div",{className:"px-6 pb-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Al tener  ",e.jsxs("span",{className:"font-semibold customtext-primary",children:[o.current_quantity," ",d]})," en tu carrito"]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[e.jsx("p",{className:"font-bold text-lg customtext-primary mb-1",children:o.rule_name}),e.jsx("p",{className:"text-sm customtext-neutral-light",children:o.description||"ObtÃ©n un producto gratis"})]})]})}),e.jsx("div",{className:"border-2 border-dashed rounded-xl p-4 mb-6 bg-green-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 w-9/12",children:[e.jsx("div",{className:"w-12 h-12  rounded-full flex items-center justify-center",children:e.jsx(t,{className:"customtext-primary",size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold customtext-neutral-dark",children:o.item_name}),e.jsxs("p",{className:"text-sm customtext-primary",children:["Cantidad: ",o.suggested_quantity]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-lg font-bold customtext-primary",children:"Â¡GRATIS!"}),e.jsxs("p",{className:"text-xs text-gray-500 line-through",children:[l()," ",Number(o.value||0).toFixed(2)]})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:async()=>{x(!0);try{await c(o),n()}catch(e){}finally{x(!1)}},disabled:m,className:"w-full bg-primary text-white font-semibold py-3 px-6 rounded-xl hover:from-green-600 hover:to-green-700 transition-all duration-200 transform hover:scale-105 disabled:opacity-50 disabled:transform-none shadow-lg",children:m?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Agregando..."})]}):e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(t,{size:20}),e.jsx("span",{children:"Â¡Agregar Regalo!"})]})}),e.jsx("button",{onClick:n,className:"w-full bg-gray-100 customtext-neutral-light font-medium py-3 px-6 rounded-xl hover:bg-gray-200 transition-colors duration-200",children:"Tal vez despuÃ©s"})]}),e.jsx("p",{className:"text-xs text-gray-500 text-center mt-4",children:"* PromociÃ³n vÃ¡lida mientras tengas los productos requeridos en tu carrito"})]})]})})]})}const m=({title:s,description:t,price:r,selected:n,className:o,onSelect:c,disabled:d,paymentOnDelivery:m=!1,showConsultButton:x=!1,advisors:u=[],consultMessage:h="",class_advisors:p=""})=>{const[b,g]=a.useState(!1),j=a.useRef(null);a.useEffect(()=>{const e=e=>{j.current&&!j.current.contains(e.target)&&g(!1)};return b&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[b]);return e.jsxs("div",{className:`flex flex-col w-full gap-3 p-4 border-2 rounded-xl transition-all duration-300 customtext-neutral-dark ${n?"border-primary bg-primary/5":"border-gray-200 hover:border-gray-300"} ${d?"opacity-50 cursor-not-allowed":"cursor-pointer"} ${o}`,onClick:d?void 0:c,children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 w-full",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("div",{className:"w-5 h-5 border-2 rounded-full flex items-center justify-center flex-shrink-0 "+(n?"border-primary":"border-gray-300"),children:n&&e.jsx("div",{className:"w-3 h-3 bg-primary rounded-full"})}),e.jsxs("div",{className:"customtext-neutral-light flex-1",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("h4",{className:"text-sm font-medium",children:s})}),e.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:t})]})]}),e.jsx("div",{className:"flex-shrink-0",children:m&&!x?e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-xs text-gray-500",children:"Pagas al recoger"})}):x||void 0===r?null:e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-sm font-bold customtext-primary",children:0===r?"GRATIS":`${l()} ${i(r)}`})})})]}),x&&u.length>0&&e.jsxs("div",{className:"relative",ref:j,children:[e.jsxs("button",{type:"button",onClick:e=>{if(e.stopPropagation(),0!==u.length)if(1===u.length){const e=u[0];window.open(`https://api.whatsapp.com/send?phone=${e.phone}&text=${encodeURIComponent(h||"Â¡Hola! Necesito informaciÃ³n sobre el costo de envÃ­o")}`,"_blank")}else g(!b)},className:`w-full mt-1 px-4 py-2.5 bg-green-500 hover:bg-green-600 text-white text-sm font-medium transition-colors duration-200 flex items-center justify-center gap-2 ${p}`,children:[e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"Consultar costo de envÃ­o"]}),b&&u.length>1&&e.jsxs("div",{className:"absolute bottom-full left-0 right-0 mb-2 bg-white rounded-xl shadow-2xl overflow-hidden z-50 border border-gray-200",onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-green-600 p-3 text-white",children:[e.jsx("h3",{className:"font-bold text-sm",children:"Elige un asesor"}),e.jsx("p",{className:"text-xs text-green-100",children:"Â¿Con quiÃ©n quieres hablar?"})]}),e.jsx("div",{className:"max-h-[250px] overflow-y-auto",children:u.map((s,t)=>e.jsxs("button",{type:"button",onClick:()=>(e=>{window.open(`https://api.whatsapp.com/send?phone=${e.phone}&text=${encodeURIComponent(h||"Â¡Hola! Necesito informaciÃ³n sobre el costo de envÃ­o")}`,"_blank"),g(!1)})(s),className:"w-full flex items-center gap-3 p-3 hover:bg-green-50 transition-colors border-b border-gray-100 last:border-b-0 text-left",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border-2 border-green-200",children:s.photo?e.jsx("img",{src:`/assets/resources/${s.photo}`,alt:s.name,className:"w-full h-full object-cover",onError:e=>{e.target.src="/api/cover/thumbnail/null"}}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-green-400 to-green-600 flex items-center justify-center text-white text-sm font-bold",children:s.name?.charAt(0).toUpperCase()})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-gray-900 text-sm truncate",children:s.name}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:s.position||"Asesor"})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-green-500",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})})})]},t))})]})]})]})},x=({ubigeoCode:s,ubigeo:t,onStoreSelect:r,selectedStore:l=null,specificStores:i=null,className:o=""})=>{const[c,d]=a.useState([]),[m,x]=a.useState(!1),[u,h]=a.useState(null);a.useEffect(()=>{p()},[i]);const p=async()=>{x(!0),h(null);try{const e=new n,s=await e.paginate({status:!0,visible:!0});let t=s?.data||[];t=t.filter(e=>{const s=!0===e.visible||1===e.visible,t=!0===e.status||1===e.status,a=!0===e.pickup_available||1===e.pickup_available||void 0===e.pickup_available,r=s&&t&&a;return r}),i&&Array.isArray(i)&&i.length>0&&(t=t.filter(e=>i.includes(e.id))),d(t)}catch(e){h("No se pudieron cargar las tiendas disponibles"),d([])}finally{x(!1)}};return m?e.jsxs("div",{className:`text-center p-6 ${o}`,children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-primary/10 rounded-full mb-4",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}),e.jsx("h3",{className:"text-lg font-semibold customtext-neutral-dark mb-2",children:"Cargando tiendas..."}),e.jsx("p",{className:"customtext-neutral-light text-sm",children:"Buscando tiendas disponibles en tu ubicaciÃ³n"})]}):u?e.jsxs("div",{className:`bg-red-50 border border-red-200 rounded-xl p-4 md:p-6 ${o}`,children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-red-100 rounded-full mx-auto mb-4",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h3",{className:"text-lg font-semibold text-red-800 text-center mb-2",children:"Error al cargar tiendas"}),e.jsx("p",{className:"text-red-600 text-center text-sm",children:u})]}):0===c.length?e.jsxs("div",{className:`bg-secondary/30 border border-accent rounded-xl p-4 md:p-6 ${o}`,children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-primary rounded-full mx-auto mb-4",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h3",{className:"text-lg font-semibold customtext-neutral-dark text-center mb-2",children:"Sin tiendas disponibles"}),e.jsx("p",{className:"customtext-neutral-light text-center text-sm",children:"No hay tiendas disponibles para retiro en esta ubicaciÃ³n. Por favor, selecciona otra opciÃ³n de envÃ­o."})]}):e.jsxs("div",{className:o,children:[e.jsxs("div",{className:"mb-4 md:mb-6",children:[e.jsx("h3",{className:"text-lg md:text-xl font-semibold customtext-neutral-dark mb-2",children:"Selecciona una tienda para retiro"}),e.jsx("p",{className:"customtext-neutral-light text-sm md:text-base",children:"Elige la tienda mÃ¡s conveniente para retirar tu pedido"})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 md:gap-4",children:c.map(s=>e.jsxs("div",{className:"relative border-2 rounded-xl cursor-pointer transition-all duration-200 hover:shadow-lg "+(l?.id===s.id?"border-primary bg-primary/5 shadow-md":"border-gray-200 bg-white hover:border-primary/50 hover:shadow-md"),onClick:()=>(e=>{r(e)})(s),children:[e.jsx("div",{className:"absolute top-3 right-3 z-10",children:e.jsx("div",{className:"w-5 h-5 rounded-full border-2 flex items-center justify-center transition-all "+(l?.id===s.id?"border-primary bg-primary":"border-gray-300 bg-white"),children:l?.id===s.id&&e.jsx("div",{className:"w-2.5 h-2.5 bg-white rounded-full"})})}),e.jsxs("div",{className:"p-4 pr-10",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:`/storage/images/store/${s.image}`,alt:s.name,className:"w-16 h-16 object-cover rounded-lg border border-gray-200",onError:e=>e.target.src="/api/cover/thumbnail/null"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold customtext-neutral-dark text-base mb-1 truncate",children:s.name}),e.jsx("span",{className:"inline-block px-2 py-1 rounded-full text-xs font-medium bg-primary/10 customtext-primary",children:"tienda"===s.type?"Tienda":"tienda_principal"===s.type?"Tienda Principal":s.type||"Tienda"})]})]}),e.jsx("p",{className:"text-sm customtext-neutral-light mb-3 line-clamp-2",children:s.address}),e.jsxs("div",{className:"space-y-2 text-sm customtext-neutral-light mb-3",children:[s.phone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),e.jsx("span",{className:"truncate",children:s.phone})]}),s.manager&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),e.jsxs("span",{className:"truncate",children:["Encargado: ",s.manager]})]})]}),s.business_hours&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs font-medium customtext-neutral-dark mb-1",children:"Horario de hoy:"}),e.jsx("div",{className:"text-xs",children:(()=>{try{const t="string"==typeof s.business_hours?JSON.parse(s.business_hours):s.business_hours,a=(new Date).toLocaleDateString("es-PE",{weekday:"long"}),r={lunes:"Lunes",martes:"Martes","miÃ©rcoles":"MiÃ©rcoles",jueves:"Jueves",viernes:"Viernes","sÃ¡bado":"SÃ¡bado",domingo:"Domingo"}[a.toLowerCase()]||a,l=t.find(e=>e.day.toLowerCase()===r.toLowerCase());if(l){const s=l.closed?"Cerrado":`${l.open} - ${l.close}`,t=!l.closed&&(()=>{const e=new Date,s=60*e.getHours()+e.getMinutes(),[t,a]=l.open.split(":").map(Number),[r,i]=l.close.split(":").map(Number);return s>=60*t+a&&s<=60*r+i})();return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"customtext-neutral-light",children:s}),e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium "+(t?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:t?"Abierto":"Cerrado"})]})}return e.jsx("span",{className:"customtext-neutral-light",children:"Horarios disponibles"})}catch(t){return e.jsx("span",{className:"customtext-neutral-light",children:"Horarios disponibles"})}})()})]})]})]},s.id))})]})};export{c as A,o as B,m as O,d as P,x as S};
