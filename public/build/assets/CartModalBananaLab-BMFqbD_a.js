import{j as e,l as t,P as a,i as s,T as i,r,f as l,bf as n,X as o,w as c,aj as d}from"./vendor-react-CZUvQwNQ.js";import{C as m,N as x}from"./Number2Currency-BX4epFEo.js";import"./CartKuchara-C7vqSevl.js";import"./TippyButton-Gia9IjJq.js";import{m as p,A as h}from"./vendor-motion-mZjvfsLz.js";const u=({setCart:r,...l})=>{const n=e=>{r(t=>t.filter(t=>t.id!==e))};return e.jsxs(p.tr,{className:"border-b border-gray-100 font-paragraph hover:bg-gray-50 transition-colors",initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,x:50},transition:{duration:.3},children:[e.jsx("td",{className:"p-4 w-28",children:e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:`/storage/images/item/${l.image}`,className:"block bg-white rounded-lg p-0 aspect-square w-20 h-20 object-cover object-center shadow-sm",alt:l.name,onError:e=>e.target.src="/placeholder-product.jpg"}),l.discount>0&&e.jsxs(p.div,{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500},children:["-",Math.round(l.discount/l.price*100),"%"]})]})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex flex-col h-full justify-between",children:[e.jsxs("div",{children:[l?.category&&e.jsx("span",{className:"block text-xs text-gray-500 mb-1",children:l?.category?.name??"Sin categoría"}),e.jsx("h3",{className:"font-semibold text-gray-800 line-clamp-2",children:l.name})]}),e.jsx("div",{className:"flex items-center gap-4 mt-3",children:e.jsxs(p.div,{className:"flex items-center border border-gray-200 rounded-lg overflow-hidden",whileHover:{boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e.jsx(p.button,{type:"button",onClick:()=>{r(e=>e.map(e=>{if(e.id===l.id){const t=(e.quantity||1)-1;return t<=0?(n(l.id),null):{...e,quantity:t}}return e}).filter(Boolean))},className:"w-8 h-8 flex justify-center items-center bg-gray-50 hover:bg-gray-100 transition-colors",whileTap:{scale:.9},children:e.jsx(t,{size:16,className:"text-gray-600"})}),e.jsx("div",{className:"w-8 h-8 flex justify-center items-center bg-white",children:e.jsx("span",{className:"font-medium text-sm text-gray-800",children:l.quantity||1})}),e.jsx(p.button,{type:"button",onClick:()=>{r(e=>e.map(e=>e.id===l.id?{...e,quantity:(e.quantity||1)+1}:e))},className:"w-8 h-8 flex justify-center items-center bg-gray-50 hover:bg-gray-100 transition-colors",whileTap:{scale:.9},children:e.jsx(a,{size:16,className:"text-gray-600"})})]})})]})}),e.jsx("td",{className:"p-4 text-right w-28",children:e.jsxs("div",{className:"flex flex-col items-end h-full justify-between",children:[e.jsxs("div",{children:[l?.discount>0&&e.jsxs("span",{className:"block text-xs text-gray-400 line-through mb-1",children:[m()," ",x(l?.price)]}),e.jsxs("p",{className:"font-bold customtext-neutral-dark text-base",children:[m()," ",x(l?.final_price)]})]}),e.jsx(s,{content:"Eliminar",placement:"left",animation:"scale",children:e.jsx(p.button,{type:"button",onClick:()=>n(l?.id),className:"mt-3 p-2 rounded-full hover:bg-red-50 text-gray-400 hover:text-red-500 transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(i,{size:18})})})]})})]})};l.setAppElement("#app");const y=({data:t,cart:a,setCart:s,modalOpen:i,setModalOpen:y})=>{const[f,b]=r.useState(!1),[g,j]=r.useState(!1);r.useEffect(()=>{i?(document.body.classList.add("overflow-hidden"),document.documentElement.classList.add("overflow-hidden")):(document.body.classList.remove("overflow-hidden"),document.documentElement.classList.remove("overflow-hidden"))},[i]);const v=()=>{b(!0),setTimeout(()=>{y(!1),b(!1)},300)},w=a.reduce((e,t)=>e+t.final_price*t.quantity,0),N=a.reduce((e,t)=>e+t.quantity,0),C=()=>{j(!0),setTimeout(()=>j(!1),1e3)},T={hidden:{opacity:0,y:20},visible:e=>({opacity:1,y:0,transition:{delay:.05*e,duration:.4}}),exit:{opacity:0,x:50}};return e.jsx(h,{children:i&&e.jsx(l,{isOpen:i,onRequestClose:v,closeTimeoutMS:300,contentLabel:"Carrito de compras",className:"absolute right-0 top-0 bottom-0 bg-white p-6 rounded-l-2xl shadow-2xl w-full max-w-md outline-none h-screen flex flex-col",overlayClassName:"fixed inset-0 z-50",children:e.jsxs(p.div,{className:"flex-1 flex flex-col",initial:"hidden",animate:f?"exit":"visible",exit:"exit",variants:{hidden:{x:"100%",opacity:0},visible:{x:0,opacity:1,transition:{type:"spring",damping:25,stiffness:300}},exit:{x:"100%",opacity:0,transition:{ease:"easeInOut",duration:.3}}},children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-gray-100",children:[e.jsxs(p.div,{className:"flex items-center gap-3",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},children:[e.jsx(n,{className:"text-primary",size:24}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Tu Carrito"}),e.jsxs(p.span,{className:"bg-primary text-white text-sm font-medium px-2 py-1 rounded-full",animate:g?{scale:[1,1.1,1],rotate:[0,5,-5,0]}:{},transition:{duration:.6},children:[N," ",1===N?"ítem":"ítems"]})]}),e.jsx(p.button,{onClick:v,whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-1 rounded-full hover:bg-gray-100 transition-colors","aria-label":"Cerrar carrito",children:e.jsx(o,{size:24,className:"text-gray-500"})})]}),a.length>0?e.jsx(p.div,{className:"flex-1 overflow-y-auto pr-2 scroll__carrito",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:e.jsx(h,{children:a.map((t,a)=>e.jsx(p.table,{custom:a,initial:"hidden",animate:"visible",exit:"exit",variants:T,layout:!0,className:"mb-4",children:e.jsx(u,{...t,setCart:s,triggerShake:C})},`${t.id}-${a}`))})}):e.jsxs(p.div,{className:"flex-1 flex flex-col items-center justify-center gap-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:[e.jsx(c,{size:48,className:"text-gray-300"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"Tu carrito está vacío"}),e.jsx(p.button,{onClick:v,whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-6 py-2 bg-primary text-white rounded-lg font-medium",children:"Seguir comprando"})]}),a.length>0&&e.jsxs(p.div,{className:"pt-4 border-t border-gray-100",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Subtotal"}),e.jsxs("span",{className:"text-gray-900 font-bold text-xl",children:[m()," ",x(w)]})]}),e.jsxs(p.a,{href:"/cart",whileHover:{scale:1.02,boxShadow:"0 5px 15px rgba(0,0,0,0.1)"},whileTap:{scale:.98},className:"w-full bg-primary hover:bg-primary-dark text-white py-3 px-6 rounded-xl font-semibold flex items-center justify-center gap-2 transition-colors",children:["Proceder al pago",e.jsx(d,{size:20})]}),e.jsx(p.button,{onClick:v,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full mt-3 bg-white text-primary border border-primary py-3 px-6 rounded-xl font-medium flex items-center justify-center gap-2 transition-colors",children:"Seguir comprando"})]})]})})})};export{y as C};
