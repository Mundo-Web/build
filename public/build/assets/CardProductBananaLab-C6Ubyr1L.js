import{j as s}from"./AboutSimple-Cf8x2fCZ.js";import{r}from"./index-BOnQTV8N.js";import"./ProductCard-Lp5WfZrB.js";import{I as P}from"./ItemsRest-9bICvOQx.js";import"./HeaderSearch-B0sdNQso.js";import{t as h}from"./index-DRg3WPTA.js";import{C as E}from"./HeaderBananaLab-DTdJPBcS.js";import{i as R}from"./tippy-react.esm-Ce0cOK54.js";import{m}from"./proxy-ByjeBI6i.js";import{H as y}from"./heart-DG8R4_Y8.js";import{c as L}from"./createLucideIcon-DfjclApS.js";import{S as M}from"./shopping-cart-DLRnxGTD.js";import{C as f}from"./circle-check-big-CYWUGR3Z.js";/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=L("CircleChevronRight",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m10 8 4 4-4 4",key:"1wy4r4"}]]),Y=({data:n,product:e,widthClass:N="lg:w-1/4",setCart:g,cart:c,setFavorites:k,favorites:w})=>{var v;const C=new P,[$,S]=r.useState(!1),[b,j]=r.useState(!1),[o,d]=r.useState([]),q=w.some(i=>i.id===(e==null?void 0:e.id)),_=(n==null?void 0:n.style_offer)||"square",F=(i,l)=>{i.preventDefault(),i.stopPropagation();const a=structuredClone(c),t=a.findIndex(x=>x.id==(l==null?void 0:l.id));t==-1?a.push({...l,quantity:1}):a[t].quantity++,g(a),h.success("Producto agregado",{description:`${l==null?void 0:l.name} se ha añadido al carrito.`,icon:s.jsx(f,{className:"h-5 w-5 text-green-500"}),duration:3e3,position:"bottom-center"})},H=(i,l)=>{i.preventDefault(),i.stopPropagation();const a=structuredClone(w),t=a.findIndex(x=>x.id==(l==null?void 0:l.id));t==-1?(a.push({...l,quantity:1}),h.success("Producto agregado",{description:`${l==null?void 0:l.name} se ha añadido a los favoritos.`,icon:s.jsx(f,{className:"h-5 w-5 text-green-500"}),duration:3e3,position:"bottom-center"})):(a.splice(t,1),h.info("Producto removido",{description:`${l==null?void 0:l.name} se ha quitado de los favoritos.`,icon:s.jsx(f,{className:"h-5 w-5 text-blue-500"}),duration:3e3,position:"bottom-center"})),k(a)},I=async i=>{try{const l={slug:i==null?void 0:i.slug},a=await C.getVariations(l);if(!a)return;d(a.variants)}catch{return}};return r.useEffect(()=>{e!=null&&e.id&&I(e)},[e]),s.jsxs(s.Fragment,{children:[s.jsx(m.a,{href:`/product/${e==null?void 0:e.slug}`,initial:{scale:1,boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.1)"},whileHover:{scale:1.02,boxShadow:"0px 8px 16px rgba(0, 0, 0, 0.2)",transition:{duration:.3}},className:`group px-1 md:px-2 w-1/2 sm:w-1/3 ${N} rounded-b-3xl overflow-hidden flex-shrink-0 font-font-secondary cursor-pointer relative `,onMouseEnter:()=>j(!0),onMouseLeave:()=>j(!1),children:s.jsxs("div",{className:"bg-white rounded-md lg:p-4 h-full  flex flex-col ",children:[s.jsxs("div",{className:"relative",children:[(e==null?void 0:e.discount)!=null&&!isNaN(e==null?void 0:e.discount)&&(_==="square"?s.jsx("span",{className:"absolute top-3 -right-1 lg:-right-2 bg-[#F93232] text-white text-xs font-bold px-2 py-2 shadow-md z-20",children:"Oferta"}):s.jsxs("span",{className:"absolute top-2 right-2 bg-[#F93232] text-white text-base font-medium px-2 py-1 rounded-full z-20",children:["-",Number(100-Number((e==null?void 0:e.discount)*100/(e==null?void 0:e.price))).toFixed(0),"%"]})),s.jsx(m.div,{className:"aspect-square rounded-t-md overflow-hidden flex items-center justify-center",whileHover:{scale:1.05},transition:{duration:.3},children:s.jsx("img",{src:`/storage/images/item/${e==null?void 0:e.image}`,onError:i=>i.target.src="/api/cover/thumbnail/null",alt:e==null?void 0:e.name,className:"w-full h-full object-cover",loading:"lazy"})})]}),s.jsxs("div",{className:"p-3 flex-grow flex flex-col",children:[s.jsx("div",{className:"flex gap-1",children:(n==null?void 0:n.visible_variations)&&o&&(o==null?void 0:o.map(i=>s.jsx(R,{content:i.color,children:s.jsx(m.a,{href:`/product/${i.slug}`,className:"variant-option rounded-full object-fit-cover",whileHover:{scale:1.1},whileTap:{scale:.9},children:s.jsx("img",{className:"color-box rounded-full h-3 w-3 lg:w-4 lg:h-4 object-fit-cover",src:`/storage/images/item/${i.texture}`})})},i.slug)))}),s.jsx("h2",{className:"block customtext-accent font-semibold",children:(v=e==null?void 0:e.category)==null?void 0:v.name}),s.jsxs("div",{className:"flex justify-between items-start w-full mt-2",children:[s.jsx("h3",{className:` customtext-neutral-dark text-xs lg:text-[15px] leading-4 font-semibold mb-2 line-clamp-3 ${n!=null&&n.support_favorite?"w-11/12 lg:w-10/12":"w-full"}`,children:e==null?void 0:e.name}),(n==null?void 0:n.support_favorite)&&s.jsx("button",{onClick:i=>H(i,e),className:"customtext-primary brightness-125 hover:brightness-100 hover:customtext-primary fill-primary transition-colors duration-200",children:q?s.jsx(y,{width:18,strokeWidth:3,fill:"current"}):s.jsx(y,{width:18,strokeWidth:1.5})})]}),s.jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-between items-baseline mt-1",children:[s.jsxs("span",{className:"customtext-neutral-dark text-[20px] md:text-2xl font-bold",children:["S/ ",e==null?void 0:e.final_price]}),(e==null?void 0:e.discount)>0&&(e==null?void 0:e.discount)!=null&&!isNaN(e==null?void 0:e.discount)&&(e==null?void 0:e.discount)<(e==null?void 0:e.final_price)&&s.jsxs("span",{className:"text-xs lg:text-sm customtext-neutral-dark line-through",children:["S/ ",e==null?void 0:e.discount]})]}),s.jsx("div",{className:"mt-3 overflow-hidden block lg:hidden",children:s.jsxs("a",{href:`/product/${e==null?void 0:e.slug}`,className:`w-full text-[10px] font-light lg:font-normal flex items-center justify-center bg-primary text-white lg:text-sm py-2 lg:py-3 px-4 rounded-full shadow-md hover:bg-primary-dark transition-all duration-300 ${(n==null?void 0:n.class_button)||""}`,children:[s.jsx("span",{className:"mr-2",children:"Ir a detalle"}),s.jsx(O,{className:"w-3 h-3 lg:w-4 lg:h-4",strokeWidth:2})]})}),s.jsx(m.div,{initial:{opacity:0,height:0},animate:{opacity:b?1:0,height:b?"auto":0},transition:{duration:.2},className:"hidden lg:block mt-3 overflow-hidden",children:s.jsxs("button",{onClick:i=>F(i,e),className:`w-full text-[10px] font-light lg:font-normal flex items-center justify-center bg-primary  lg:text-sm py-2 lg:py-3 px-4 rounded-full shadow-md hover:bg-primary-dark transition-all duration-300 ${(n==null?void 0:n.class_button)||"text-white"}`,children:[s.jsx("span",{className:"mr-2",children:"Agregar al carrito"}),s.jsx(M,{className:"w-3 h-3 lg:w-4 lg:h-4",strokeWidth:2})]})})]})]})}),s.jsx(E,{data:n,cart:c,setCart:g,modalOpen:$,setModalOpen:S})]})};export{Y as C};
