import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as n,R as le}from"./index-BH53Isel.js";import{C as ie}from"./ProductNavigation-YZHGnkU3.js";import{I as ce}from"./ItemsRest-DGjwRLrz.js";import{A as f}from"./ArrayJoin-2k6ba35P.js";import{N as ne}from"./NoResult-C9qZVva5.js";import{S as oe}from"./SelectForm-G0J6yhhv.js";import{m}from"./main-BvVILmTO.js";import{F as $}from"./filter-Ci9tsc_e.js";import{X as me}from"./x-DBMwyD6F.js";import{C as b}from"./chevron-down-DS-mdh9v.js";import{S as N}from"./search-TwiiKGP5.js";import{m as u}from"./proxy-BTYtmp9V.js";import{A as de}from"./index-CFtDjG4d.js";import{C as ue}from"./chevron-left-B2s3ZsB7.js";import{C as xe}from"./chevron-right-Ckt5D2ka.js";import"./index-yBjzXJbu.js";import"./ProductCard-Ap6bpF1Q.js";import"./HeaderSearch-BBbwBxaK.js";import"./PaymentModal-Bxx5p2o_.js";import"./index-fNjTmf9T.js";import"./index-Chjiymov.js";import"./CartItemRow-4VUVjpPz.js";import"./Number2Currency-e57Tgsuk.js";import"./tippy-react.esm-BWiGTO87.js";import"./index-rimy3MAc.js";import"./trash-2-DK1wnsDn.js";import"./createLucideIcon-Cy5Ya80P.js";import"./plus-Bot15Khs.js";import"./eye-CKCH9ORv.js";import"./BasicRest-B3rfI5GY.js";import"./index-CMHsc23u.js";import"./check-DQ7QoS0v.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";const he=new ce,pe=()=>e.jsx("div",{className:"group animate-pulse transition-transform duration-300 hover:scale-105 w-1/2 lg:w-1/4 flex-shrink-0 font-font-general customtext-primary cursor-pointer",children:e.jsx("div",{className:"px-4",children:e.jsx("div",{className:"bg-white rounded-3xl",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"aspect-square bg-gray-300 rounded-3xl overflow-hidden flex items-center justify-center bg-secondary",children:e.jsx("svg",{className:"w-10 h-10 text-gray-200","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 18",children:e.jsx("path",{d:"M18 0H2a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2Zm-5.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm4.376 10.481A1 1 0 0 1 16 15H4a1 1 0 0 1-.895-1.447l3.5-7A1 1 0 0 1 7.468 6a.965.965 0 0 1 .9.5l2.775 4.757 1.546-1.887a1 1 0 0 1 1.618.1l2.541 4a1 1 0 0 1 .028 1.011Z"})})})})})})}),ts=({items:ge,data:p,filteredData:fe,cart:R,setCart:M})=>{const[be,je]=n.useState(null),[v,B]=n.useState([]),[G,L]=n.useState([]),[C,H]=n.useState([]),[P,I]=n.useState([]),[Z,O]=n.useState([]),[we,ye]=n.useState(null),[d,V]=n.useState({marca:!0,precio:!0,categoria:!0,subcategoria:!0,colores:!1,coleccion:!0}),[o,_]=n.useState({collection_id:m.GET.collection?m.GET.collection.split(","):[],category_id:m.GET.category?m.GET.category.split(","):[],brand_id:m.GET.brand?m.GET.brand.split(","):[],subcategory_id:m.GET.subcategory?m.GET.subcategory.split(","):[],price:null,name:m.GET.search||null,sort_by:"created_at",order:"desc"}),[z,D]=n.useState([]),[x,K]=n.useState([]),[J,S]=n.useState(!0),[i,X]=n.useState({currentPage:1,totalPages:1,totalItems:0,itemsPerPage:24,from:0,to:0}),Q=s=>{const r=[];if(s.collection_id.length>0){const a=s.collection_id.map(l=>["collection.slug","=",l]);r.push(f(a,"or"))}if(s.category_id.length>0){const a=s.category_id.map(l=>["category.slug","=",l]);r.push(f(a,"or"))}if(s.subcategory_id.length>0){const a=s.subcategory_id.map(l=>["subcategory.slug","=",l]);r.push(f(a,"or"))}if(s.brand_id.length>0){const a=s.brand_id.map(l=>["brand.slug","=",l]);r.push([...a])}return s.price&&r.push(["or",[["final_price",">=",s.price.min],"and",["final_price","<=",s.price.max]]]),s.name&&r.push(["name","contains",s.name]),f(r,"and")},k=async(s=1,r=!1)=>{S(!0),r&&window.scrollTo({top:0,behavior:"smooth"});try{const l={filter:Q(o),sort:o.sort,skip:(s-1)*i.itemsPerPage,take:i.itemsPerPage,requireTotalCount:!0,filterSequence:z,brand_id:v.filter(c=>o.brand_id.includes(c.slug)).map(c=>c.id),category_id:C.filter(c=>o.category_id.includes(c.slug)).map(c=>c.id),collection_id:P?P.filter(c=>o.collection_id.includes(c.slug)).map(c=>c.id):[]},t=await he.paginate(l);K(t.data),X({currentPage:s,totalPages:Math.ceil(t.totalCount/i.itemsPerPage),totalItems:t.totalCount,itemsPerPage:i.itemsPerPage,from:(s-1)*i.itemsPerPage+1,to:Math.min(s*i.itemsPerPage,t.totalCount)}),B((t==null?void 0:t.summary.brands)||[]),H((t==null?void 0:t.summary.categories)||[]),L((t==null?void 0:t.summary.subcategories)||[]),I((t==null?void 0:t.summary.collections)||[]),O((t==null?void 0:t.summary.priceRanges)||[])}catch(a){console.log("Error fetching products:",a)}finally{S(!1)}};n.useEffect(()=>{k(1,!0)},[o]);const j=s=>{s>=1&&s<=i.totalPages&&(window.scrollTo({top:0,behavior:"smooth"}),k(s))},U=()=>{const s=[],r=i.totalPages,a=i.currentPage,l=2;for(let t=1;t<=r;t++)t===1||t===r||t>=a-l&&t<=a+l?s.push(t):(t===a-l-1||t===a+l+1)&&s.push("...");return s.filter((t,c,A)=>t!=="..."||A[c-1]!=="...")},W=[{value:"created_at:desc",label:"Más reciente"},{value:"created_at:asc",label:"Mas antiguo"},{value:"final_price:asc",label:"Precio: Menor a Mayor"},{value:"final_price:desc",label:"Precio: Mayor a Menor"},{value:"name:asc",label:"Nombre: A-Z"},{value:"name:desc",label:"Nombre: Z-A"}],h=(s,r)=>{_(a=>{if(s==="price")return{...a,price:a.price&&a.price.min===r.min&&a.price.max===r.max?null:r};const l=Array.isArray(a[s])?a[s]:[];let t;return l.includes(r)?t=l.filter(c=>c!==r):t=[...l,r],{...a,[s]:t}}),D(a=>{var t,c;return["brand_id","category_id","collection_id"].includes(s)?(t=o[s])!=null&&t.includes(r)?(((c=o[s])==null?void 0:c.filter(y=>y!==r))||[]).length===0?a.filter(y=>y!==s):a:a.includes(s)?a:[...a,s]:a})},g=s=>{V(r=>({...r,[s]:!r[s]}))},[T,Y]=n.useState(""),[F,q]=n.useState(""),[E,ee]=n.useState(""),se=C.filter(s=>s.name.toLowerCase().includes(T.toLowerCase())),te=G.filter(s=>s.name.toLowerCase().includes(F.toLowerCase())),ae=v.filter(s=>s.name.toLowerCase().includes(E.toLowerCase())),[re,w]=n.useState(!1);return e.jsx("section",{className:"py-12 bg-sections-color customtext-neutral-dark",children:e.jsxs("div",{className:"mx-auto px-primary 2xl:px-0 2xl:max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between items-center mb-8 pb-4 border-b-2",children:[e.jsx("h2",{className:"text-[32px] md:text-4xl font-bold md:w-6/12",children:p==null?void 0:p.title}),e.jsxs("div",{className:"flex flex-col w-full  items-center gap-4 md:flex-row md:w-5/12",children:[e.jsxs("span",{className:"block md:w-6/12 order-1 md:order-none",children:["Productos seleccionados:"," ",e.jsx("strong",{children:x==null?void 0:x.length})]}),e.jsx("div",{className:"w-full md:w-6/12",children:e.jsx(oe,{options:W,placeholder:"Ordenar por",onChange:s=>{const[r,a]=s.split(":"),l=[{selector:r,desc:a==="desc"}];_(t=>({...t,sort:l}))},labelKey:"label",valueKey:"value"})})]})]}),e.jsxs("div",{className:"relative flex flex-col lg:flex-row gap-4",children:[e.jsxs("button",{className:"w-full flex lg:hidden gap-2 items-center",onClick:()=>w(!0),children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Filtros"}),e.jsx($,{className:"h-5 w-5"})]}),e.jsxs("div",{className:`${re?"fixed inset-0  bg-white flex flex-col h-screen z-[999]":"hidden"} lg:block lg:w-3/12 lg:bg-white lg:p-4 lg:rounded-lg lg:h-max`,children:[e.jsxs("div",{className:"fixed top-0 left-0 right-0 bg-white p-4 border-b z-10 h-16 flex items-center justify-between lg:relative lg:p-0 lg:border-none lg:h-auto",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Filtros"}),e.jsx("button",{className:"lg:hidden",onClick:()=>w(!1),children:e.jsx(me,{className:"h-5 w-5"})}),e.jsx($,{className:"hidden lg:block h-5 w-5"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-4 mt-16 pb-20 lg:mt-0 lg:pb-0 lg:px-0",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>g("marca"),className:"flex items-center justify-between w-full mb-4 p-2 lg:p-0",children:[e.jsx("span",{className:"font-medium",children:"Marca"}),e.jsx(b,{className:`h-5 w-5 transform transition-transform ${d.marca?"":"-rotate-180"}`})]}),d.marca&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(N,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar",className:"w-full pl-10 pr-4 py-3 border rounded-xl focus:ring-0 focus:outline-0",value:E,onChange:s=>ee(s.target.value)})]}),e.jsx("div",{className:"space-y-3 max-h-[200px] overflow-y-auto p-1",children:ae.map(s=>e.jsxs("label",{className:"flex items-center gap-2 py-1.5",children:[e.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded border-gray-300 accent-primary",onChange:()=>h("brand_id",s.slug)}),e.jsx("span",{className:"text-sm lg:text-base",children:s.name})]},s.id))})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>g("categoria"),className:"flex items-center justify-between w-full mb-4 p-2 lg:p-0",children:[e.jsx("span",{className:"font-medium",children:"Categoría"}),e.jsx(b,{className:`h-5 w-5 transform transition-transform ${d.categoria?"":"-rotate-180"}`})]}),d.categoria&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(N,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar",className:"w-full pl-10 pr-4 py-3 border rounded-xl focus:ring-0 focus:outline-0",value:T,onChange:s=>Y(s.target.value)})]}),e.jsx("div",{className:"space-y-3 max-h-[200px] overflow-y-auto p-1",children:se.map(s=>{var r,a,l;return e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 py-1.5",children:[e.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded border-gray-300 accent-primary",onChange:()=>h("category_id",s.slug),checked:(r=o.category_id)==null?void 0:r.includes(s.slug)}),e.jsx("span",{className:"text-sm lg:text-base",children:s.name})]}),((a=o.category_id)==null?void 0:a.includes(s.slug))&&e.jsx("ul",{className:"ml-4 pl-3 mt-1 space-y-2 border-l-2 border-gray-200",children:(l=s.subcategories)==null?void 0:l.map(t=>{var c;return e.jsxs("label",{className:"flex items-center gap-2 py-1.5",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 accent-primary",onChange:()=>h("subcategory_id",t.slug),checked:(c=o.subcategory_id)==null?void 0:c.includes(t.slug)}),e.jsx("span",{className:"text-sm lg:text-base",children:t.name})]},t.id)})})]},s.id)})})]})]}),e.jsxs(u.div,{className:"mb-6",children:[e.jsxs(u.button,{onClick:()=>g("subcategoria"),className:"flex items-center justify-between w-full mb-4 p-2 lg:p-0",whileHover:{x:3},children:[e.jsx("span",{className:"font-medium",children:"Sub Categorías"}),e.jsx(b,{className:`h-5 w-5 transform transition-transform ${d.subcategoria?"":"-rotate-180"}`})]}),e.jsx(de,{children:d.subcategoria&&e.jsxs(u.div,{className:"space-y-1",initial:"hidden",animate:"visible",exit:"hidden",variants:{hidden:{opacity:0,height:0},visible:{opacity:1,height:"auto"}},children:[e.jsxs("div",{className:"relative",children:[e.jsx(N,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar",className:"w-full pl-10 pr-4 py-3 border rounded-xl focus:ring-0 focus:outline-0",value:F,onChange:s=>q(s.target.value)})]}),e.jsx("div",{className:"space-y-3 max-h-[200px] overflow-y-auto p-1",children:te.map(s=>{var r;return e.jsxs("label",{className:"flex items-center gap-2 py-1.5",children:[e.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded border-gray-300 accent-primary",onChange:()=>h("subcategory_id",s.slug),checked:(r=o.subcategory_id)==null?void 0:r.includes(s.slug)}),e.jsx("span",{className:"text-sm lg:text-base",children:s.name})]},s.id)})})]})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>g("precio"),className:"flex items-center justify-between w-full mb-4 p-2 lg:p-0",children:[e.jsx("span",{className:"font-medium",children:"Precio"}),e.jsx(b,{className:`h-5 w-5 transform transition-transform ${d.precio?"":"-rotate-180"}`})]}),d.precio&&e.jsx("div",{className:"space-y-3 p-1",children:Z.map(s=>{var r,a;return e.jsxs("label",{className:"flex items-center gap-2 py-1.5",children:[e.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded border-gray-300 accent-primary",onChange:()=>h("price",s),checked:((r=o.price)==null?void 0:r.min)===s.min&&((a=o.price)==null?void 0:a.max)===s.max}),e.jsx("span",{className:"text-sm lg:text-base",children:`S/ ${s.min} - S/ ${s.max}`})]},`${s.min}-${s.max}`)})})]})]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t p-4 h-20 flex items-center lg:hidden",children:e.jsx("button",{className:"w-full bg-primary text-white py-3 rounded-xl font-bold hover:bg-primary-dark transition-colors",onClick:()=>{w(!1),window.scrollTo({top:0,behavior:"smooth"})},children:"Ver resultados"})})]}),e.jsxs("div",{className:"w-full lg:w-9/12 py-4",children:[J?e.jsx("div",{className:"flex items-center flex-wrap gap-y-8 transition-all duration-300 ease-in-out",children:[1,2,3,4,5,6,7,8,9,10,11,12].map(s=>e.jsx(pe,{},s))}):e.jsx("div",{className:"flex items-center flex-wrap gap-y-8 transition-all duration-300 ease-in-out",children:Array.isArray(x)&&x.length>0?x.map(s=>e.jsx("div",{className:"   w-1/2 lg:w-1/3 xl:w-1/4 lg:h-[460px] lg:max-h-[460px]  xl:h-[400px] xl:max-h-[400px] 2xl:h-[430px] 2xl:max-h-[430px] flex items-center justify-center",children:e.jsx(ie,{data:p,product:s,widthClass:"w-full sm:w-full lg:w-full",cart:R,setCart:M})},s.id)):e.jsx(ne,{})}),e.jsxs(u.div,{className:"flex flex-col md:flex-row justify-between items-center mb-4 w-full mt-8 gap-4",children:[e.jsx("div",{className:"customtext-primary font-semibold w-full md:w-auto",children:e.jsx("div",{className:"overflow-x-auto pb-2",children:e.jsxs("nav",{className:"flex items-center gap-x-2 min-w-max",children:[e.jsx(u.button,{className:`p-4 inline-flex items-center ${i.currentPage===1?"opacity-50 cursor-not-allowed":""}`,onClick:()=>j(i.currentPage-1),disabled:i.currentPage===1,whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(ue,{})}),U().map((s,r)=>e.jsx(le.Fragment,{children:s==="..."?e.jsx("span",{className:"w-10 h-10 bg-transparent p-2 inline-flex items-center justify-center rounded-full",children:"..."}):e.jsx(u.button,{className:`w-10 h-10 p-2 inline-flex items-center justify-center rounded-full transition-all duration-300 
                                                        ${s===i.currentPage?"bg-primary text-white":"bg-transparent hover:text-white hover:bg-primary"}`,onClick:()=>j(s),whileHover:{scale:1.05},whileTap:{scale:.95},children:s})},r)),e.jsx(u.button,{className:`p-4 inline-flex items-center ${i.currentPage===i.totalPages?"opacity-50 cursor-not-allowed":""}`,onClick:()=>j(i.currentPage+1),disabled:i.currentPage===i.totalPages,whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(xe,{})})]})})}),e.jsx("div",{className:"w-full md:w-auto text-center md:text-right",children:e.jsxs("p",{className:"font-semibold",children:[i.from," - ",i.to," de"," ",i.totalItems," Resultados"]})})]})]})]})]})})};export{ts as default};
