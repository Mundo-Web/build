import{j as t}from"./AboutSimple-Cf8x2fCZ.js";import{r as c}from"./index-BH53Isel.js";import{N as T}from"./Number2Currency-e57Tgsuk.js";import{D as Me,A as qe,O as Oe,B as Re,a as Fe}from"./OptionCard-BDGI5_vR.js";import{m as Q}from"./main-BSEyQEJW.js";import{t as R}from"./index-CMHsc23u.js";import{I as b}from"./InputForm-ZnsQvLid.js";import{s as Ie}from"./server.browser-Bf4gQIc7.js";import{l as Be}from"./lodash-CblvOeJM.js";import{M as Le}from"./PaymentModal-Bxx5p2o_.js";import{G as _}from"./General-BmbBKdsB.js";import{a as F,U as Ue,b as Ae,C as ze}from"./CouponsRest-CzW6KL41.js";import{i as xe}from"./tippy-react.esm-BWiGTO87.js";import"./ProductNavigation-CvlcDKCL.js";import"./ProductCard-C2H10lUi.js";/* empty css              */import"./BlogCarousel-DpjB9swg.js";/* empty css               */import"./InfiniteCategory-BwYXk1Kq.js";import"./index-yBjzXJbu.js";import"./useStateManager-7e1e8489.esm-oj4m82YY.js";import"./hoist-non-react-statics.cjs-kbdZbs82.js";import"./index-rimy3MAc.js";import"./index-fNjTmf9T.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";import"./index-Chjiymov.js";import"./Global-ErywZRdd.js";import"./VoucherUpload-CDIGI_CU.js";import"./filepond-plugin-image-preview-B3bH-pD8.js";import"./SalesRest-DghNnnQN.js";import"./BasicRest-CtWwZ3Gl.js";import"./chevron-up-D78jyEhP.js";import"./createLucideIcon-Cy5Ya80P.js";import"./chevron-down-DS-mdh9v.js";import"./ItemsRest-ByrPg2Go.js";import"./HeaderSearch-B_41BEro.js";import"./CartItemRow-4VUVjpPz.js";import"./proxy-BTYtmp9V.js";import"./trash-2-DK1wnsDn.js";import"./plus-Bot15Khs.js";import"./index-CFtDjG4d.js";import"./eye-CKCH9ORv.js";const Ve=p=>new Promise(async(N,w)=>{try{console.log("Datos para MercadoPago:",p);const{status:h,result:i}=await Q.Fetch("./api/mercadopago/preference",{method:"POST",body:JSON.stringify(p)});if(!h||!i.preference_id){Q.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:(i==null?void 0:i.message)||"Error al crear la preferencia de pago",type:"danger"}),w((i==null?void 0:i.message)||"Error al crear la preferencia de pago");return}console.log("✅ Preferencia creada:",i);const g=new window.MercadoPago(i.public_key,{locale:"es-PE"});setTimeout(()=>{window.location.href=i.redirect_url},500),N(i)}catch(h){console.error("Error en processMercadoPagoPayment:",h),Q.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:h.message||"Error en la integración con MercadoPago",type:"danger"}),w(h.message||"Error en la integración con MercadoPago")}});function Ge({isOpen:p,onClose:N,onPaymentComplete:w,contacts:h}){const[i,g]=c.useState(null),[C,x]=c.useState(!1);c.useEffect(()=>{p||(x(!1),g(null))},[p]);const y=()=>{i&&(x(!0),w(i))},f=C||!i,n=h.find(E=>E.correlative==="checkout_mercadopago");return console.log(n),t.jsx(Le,{isOpen:p,onRequestClose:N,className:"absolute left-1/2 -translate-x-1/2 bg-white rounded-2xl shadow-lg w-[95%] max-w-4xl top-1/2 -translate-y-1/2 overflow-hidden",overlayClassName:"fixed inset-0 bg-black bg-opacity-50 z-50",ariaHideApp:!1,children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2",children:[t.jsx("div",{className:"hidden md:block bg-[#f8f5f2] h-full",children:t.jsx("img",{src:"/assets/img/salafabulosa/portadapagos.png",alt:"Métodos de pago",className:"h-full w-full object-cover"})}),t.jsxs("div",{className:"p-6 max-h-[90vh] md:max-h-[100vh] flex flex-col justify-center ",children:[t.jsxs("div",{className:"mb-0 md:mb-4",children:[t.jsx("h2",{className:"text-xl md:text-2xl 2xl:text-3xl font-bold customtext-primary",children:"¿Cómo deseas pagar tu pedido?"}),t.jsx("p",{className:"mt-2 text-sm 2xl:text-base",children:"Elige una de las opciones disponibles para completar tu pago de forma segura."})]}),n.description!=="true"&&_.get("checkout_dwallet")!=="true"&&_.get("checkout_transfer")!=="true"?t.jsx("div",{className:"text-gray-500 text-center py-4",children:"Sin opciones de pago"}):t.jsx(t.Fragment,{children:t.jsxs("div",{className:"mt-3 space-y-3",children:[n.description=="true"&&t.jsx("div",{className:`border-2 rounded-lg p-3 cursor-pointer transition-colors ${i==="tarjeta"?"border-primary bg-[#f8f5f2]":"border-gray-200 hover:border-2 hover:border-[#3a2723]"}`,onClick:()=>g("tarjeta"),children:t.jsxs("div",{className:"flex flex-row items-center justify-between gap-2",children:[t.jsxs("div",{className:"flex flex-col items-start justify-center space-x-2",children:[t.jsx("input",{type:"radio",id:"tarjeta",name:"paymentMethod",checked:i==="tarjeta",onChange:()=>g("tarjeta"),className:"h-5 w-5 text-primary focus:ring-primary hidden"}),t.jsx("label",{htmlFor:"tarjeta",className:"font-medium text-base 2xl:text-lg",children:"Pago con Tarjeta"}),t.jsx("p",{className:"text-[#5c504c] text-sm 2xl:text-base ml-7 mt-1",children:"Renueva tus espacios con estilo: Fundas exclusivas para cada temporada."})]}),t.jsx("div",{className:"min-w-5 flex items-center justify-center",children:t.jsx("div",{className:`h-5 w-5 rounded-full flex items-center justify-center ${i==="tarjeta"?"bg-[#3a2723]":"border-2 border-[#d0ccca]"}`,children:t.jsx("div",{className:`h-2 w-2 rounded-full ${i==="tarjeta"?"bg-white":""}`})})})]})}),_.get("checkout_dwallet")=="true"&&t.jsx("div",{className:`border-2 rounded-lg p-3 cursor-pointer transition-colors ${i==="yape"?"border-primary bg-[#f8f5f2]":"border-gray-200 hover:border-2 hover:border-[#3a2723]"}`,onClick:()=>g("yape"),children:t.jsxs("div",{className:"flex flex-row items-center justify-between gap-2",children:[t.jsxs("div",{className:"flex flex-col items-start justify-center space-x-2",children:[t.jsx("input",{type:"radio",id:"yape",name:"paymentMethod",checked:i==="yape",onChange:()=>g("yape"),className:"h-5 w-5 text-primary focus:ring-[#3a2723] hidden"}),t.jsx("label",{htmlFor:"yape",className:"font-medium text-base 2xl:text-lg",children:"Yape / Plin"}),t.jsx("p",{className:"text-[#5c504c] text-sm 2xl:text-base ml-7 mt-1",children:"Realiza el pago desde tu celular sin comisiones."})]}),t.jsx("div",{className:"min-w-5 flex items-center justify-center",children:t.jsx("div",{className:`h-5 w-5 rounded-full flex items-center justify-center ${i==="yape"?"bg-[#3a2723]":"border-2 border-[#d0ccca]"}`,children:t.jsx("div",{className:`h-2 w-2 rounded-full ${i==="yape"?"bg-white":""}`})})})]})}),_.get("checkout_transfer")=="true"&&t.jsx("div",{className:`border-2 rounded-lg p-3 cursor-pointer transition-colors ${i==="transferencia"?"border-primary bg-[#f8f5f2]":"border-gray-200 hover:border-2 hover:border-[#3a2723]"}`,onClick:()=>g("transferencia"),children:t.jsxs("div",{className:"flex flex-row items-center justify-between gap-2",children:[t.jsxs("div",{className:"flex flex-col items-start justify-center space-x-2",children:[t.jsx("input",{type:"radio",id:"transferencia",name:"paymentMethod",checked:i==="transferencia",onChange:()=>g("transferencia"),className:"h-5 w-5 text-primary focus:ring-[#3a2723] hidden"}),t.jsx("label",{htmlFor:"transferencia",className:"font-medium text-base 2xl:text-lg",children:"Pago por Transferencia"}),t.jsx("p",{className:"text-[#5c504c] text-sm 2xl:text-base ml-7 mt-1",children:"Haz una transferencia bancaria desde tu app o banca por internet."})]}),t.jsx("div",{className:"min-w-5 flex items-center justify-center",children:t.jsx("div",{className:`h-5 w-5 rounded-full flex items-center justify-center ${i==="transferencia"?"bg-[#3a2723]":"border-2 border-[#d0ccca]"}`,children:t.jsx("div",{className:`h-2 w-2 rounded-full ${i==="transferencia"?"bg-white":""}`})})})]})})]})}),t.jsxs("div",{className:"mt-4 space-y-3",children:[(n.description==="true"||_.get("checkout_dwallet")==="true"||_.get("checkout_transfer")==="true")&&t.jsx("button",{className:`w-full bg-[#3a2723] hover:bg-[#2a1d1a] text-white py-3 rounded-3xl text-base 2xl:text-lg leading-normal font-medium transition-colors 
                            ${f?"opacity-70 cursor-not-allowed":""}`,onClick:y,disabled:C,children:C?"Procesando...":"Confirmar pago"}),t.jsx("button",{className:"w-full border border-[#3a2723] text-[#3a2723] hover:bg-[#f8f5f2] py-3 text-base 2xl:text-lg leading-normal rounded-3xl font-medium transition-colors",onClick:N,disabled:C,children:"Volver"})]})]})]})})}const He=new ze;function At({cart:p,setSale:N,setCode:w,setDelivery:h,setCart:i,onContinue:g,noContinue:C,subTotal:x,igv:y,totalFinal:f,user:n,setEnvio:E,envio:k,prefixes:ue,ubigeos:Ye=[],contacts:I,totalPrice:S,descuentofinal:j,setDescuentoFinal:B}){var re,ie;const L=c.useRef(null),[d,U]=c.useState(null),[A,W]=c.useState(null),[Ke,he]=c.useState(null),[e,z]=c.useState({name:(n==null?void 0:n.name)||"",lastname:(n==null?void 0:n.lastname)||"",email:(n==null?void 0:n.email)||"",phone_prefix:(n==null?void 0:n.phone_prefix)||"51",phone:(n==null?void 0:n.phone)||"",department:(n==null?void 0:n.department)||"",province:(n==null?void 0:n.province)||"",district:(n==null?void 0:n.district)||"",address:(n==null?void 0:n.address)||"",number:(n==null?void 0:n.number)||"",comment:(n==null?void 0:n.comment)||"",shippingOption:"delivery",ubigeo:(n==null?void 0:n.ubigeo)||null,invoiceType:(n==null?void 0:n.invoiceType)||"boleta",documentType:(n==null?void 0:n.documentType)||"dni",document:(n==null?void 0:n.dni)||"",businessName:(n==null?void 0:n.businessName)||""});c.useEffect(()=>{if(n!=null&&n.ubigeo&&(n!=null&&n.district)&&(n!=null&&n.province)&&(n!=null&&n.department)){const s={value:n.ubigeo,label:`${n.district}, ${n.province}, ${n.department}`,data:{reniec:n.ubigeo,departamento:n.department,provincia:n.province,distrito:n.district}};he(s),W(s),Y(s)}},[n]);const ge=s=>{var a;return((a=I.find(r=>r.correlative===s))==null?void 0:a.description)||""},m=s=>{const{name:a,value:r}=s.target;z(o=>({...o,[a]:r})),a==="invoiceType"&&z(o=>({...o,documentType:r==="factura"?"ruc":"dni",document:"",businessName:r==="factura"?o.businessName:""}))},[Je,Qe]=c.useState(0),[V,X]=c.useState(!1),[P,Z]=c.useState([]),[M,G]=c.useState(null),[We,Xe]=c.useState(null),[u,H]=c.useState({}),be=typeof x=="number"?x:parseFloat(x)||0,ye=typeof y=="number"?y:parseFloat(y)||0,q=parseFloat(ge("shipping_free")),D=be+ye-j,Y=async s=>{var r;if(!s)return;H(o=>({...o,ubigeo:""}));const{data:a}=s;z(o=>({...o,department:a.departamento,province:a.provincia,district:a.distrito,ubigeo:a.reniec})),X(!0);try{const o=await Me.getShippingCost({ubigeo:a.reniec}),l=[],O=D>=q;if(O?l.push({type:"free",price:0,description:`Compra mayor a S/ ${q}`,deliveryType:"Envío gratuito"}):o.data.is_free?l.push({type:"free",price:0,description:o.data.standard.description,deliveryType:o.data.standard.type,characteristics:o.data.standard.characteristics}):o.data.is_agency?l.push({type:"agency",price:0,description:o.data.agency.description,deliveryType:o.data.agency.type,characteristics:o.data.agency.characteristics}):l.push({type:"standard",price:o.data.standard.price,description:o.data.standard.description,deliveryType:o.data.standard.type,characteristics:o.data.standard.characteristics}),((r=o.data.express)==null?void 0:r.price)>0&&o.data.is_free&&!O&&l.push({type:"express",price:o.data.express.price,description:o.data.express.description,deliveryType:o.data.express.type,characteristics:o.data.express.characteristics}),l.length===0)throw new Error("No hay opciones de envío disponibles");Z(l),G(l[0].type),E(l[0].price)}catch(o){console.error("Error al obtener precios de envío:",o),R.success("Sin cobertura",{description:"No realizamos envíos a esta ubicación",icon:t.jsx(F,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"top-right"}),Z([]),G(null),E(0)}X(!1)};c.useEffect(()=>{A&&Y(A)},[p,x,j]);const fe=c.useCallback(Be.debounce((s,a)=>{if(s.length<3){a([]);return}fetch(`/api/ubigeo/search?q=${encodeURIComponent(s)}`).then(r=>{if(!r.ok)throw new Error("Error en la respuesta");return r.json()}).then(r=>{const o=r.map(l=>({value:l.reniec,label:`${l.distrito}, ${l.provincia}, ${l.departamento}`,data:{inei:l.inei,reniec:l.reniec,departamento:l.departamento,provincia:l.provincia,distrito:l.distrito}}));a(o)}).catch(r=>{console.error("Error:",r),a([])})},300),[]);c.useEffect(()=>{const s=a=>{const r=a.element.dataset.code,o=a.element.dataset.flag;return Ie.renderToString(t.jsxs("span",{children:[t.jsx("span",{className:"inline-block w-8 font-emoji text-center",children:o}),t.jsx("b",{className:"me-1",children:a.text}),t.jsx("span",{className:"text-sm text-opacity-20",children:r})]}))};$(".select2-prefix-selector").select2({dropdownCssClass:"py-1",containerCssClass:"!border !border-gray-300 !rounded p-2 !h-[42px]",arrowCssClass:'!text-primary top-1/2 -translate-y-1/2"',templateResult:function(a){if(!a.id)return a.text;var r=$(s(a));return r},templateSelection:function(a){if(!a.id)return a.text;var r=$(s(a));return r},matcher:function(a,r){if(!a.term||!r.element)return r;const o=r.element.dataset.country||"",l=r.text||"";return o.toLowerCase().includes(a.term.toLowerCase())||l.toLowerCase().includes(a.term.toLowerCase())?r:null}})},[e.phone_prefix]);const[je,K]=c.useState(!1),[ve,ee]=c.useState(!1),[Ne,te]=c.useState(!1),[se,we]=c.useState(null),[ne,ae]=c.useState(null),Ce=s=>{if(s.preventDefault(),s&&s.preventDefault&&s.preventDefault(),!!ke()){if(!M){R.success("Seleccione envío",{description:"Debe elegir un método de envío",icon:t.jsx(F,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"top-right"});return}K(!0)}},ke=()=>{const s={};e.name||(s.name="Nombre es requerido"),e.lastname||(s.lastname="Apellido es requerido"),e.email||(s.email="Email es requerido"),e.phone||(s.phone="Teléfono es requerido"),e.ubigeo||(s.ubigeo="Ubigeo es requerido"),e.address||(s.address="Dirección es requerida"),e.document||(s.document="Documento es requerido"),e.number||(s.number="Numero es requerido"),H(s);const a=(r,o=800)=>{const l=r.getBoundingClientRect().top+window.pageYOffset-window.innerHeight/2+r.offsetHeight/2,O=window.pageYOffset;let J=null;const le=ce=>{J===null&&(J=ce);const de=ce-J,$e=((v,pe,me,Pe)=>(v/=Pe/2,v<1?me/2*v*v+pe:(v--,-me/2*(v*(v-2)-1)+pe)))(de,O,l-O,o);window.scrollTo(0,$e),de<o?requestAnimationFrame(le):["INPUT","SELECT","TEXTAREA"].includes(r.tagName)&&r.focus()};requestAnimationFrame(le)};if(Object.keys(s).length>0){const r=Object.keys(s)[0];setTimeout(()=>{var l;let o=null;r==="ubigeo"?o=document.getElementById("ubigeo-select-container"):r==="phone_prefix"?o=(l=document.querySelector(".select2-prefix-selector"))==null?void 0:l.parentElement:o=document.querySelector(`[name="${r}"]`),o&&(o.classList.add("highlight-error"),setTimeout(()=>o.classList.remove("highlight-error"),2e3),a(o,600))},100)}return Object.keys(s).length===0},Se=async s=>{try{if(K(!1),we(s),s==="tarjeta"){if(!window.MercadoPago){console.error("❌ MercadoPago aún no se ha cargado.");return}const a={user_id:(n==null?void 0:n.id)||"",name:(e==null?void 0:e.name)||"",lastname:(e==null?void 0:e.lastname)||"",fullname:`${e==null?void 0:e.name} ${e==null?void 0:e.lastname}`,phone_prefix:(e==null?void 0:e.phone_prefix)||"51",email:(e==null?void 0:e.email)||"",phone:`${e.phone_prefix}${e.phone}`,country:"Perú",department:(e==null?void 0:e.department)||"",province:(e==null?void 0:e.province)||"",district:(e==null?void 0:e.district)||"",ubigeo:(e==null?void 0:e.ubigeo)||"",address:(e==null?void 0:e.address)||"",number:(e==null?void 0:e.number)||"",comment:(e==null?void 0:e.comment)||"",amount:S||0,delivery:k,cart:p,invoiceType:e.invoiceType||"",documentType:e.documentType||"",document:e.document||"",businessName:e.businessName||"",payment_method:s||null,coupon_id:d?d.id:null,coupon_discount:j||0,total_amount:f||0};try{const o=await Ve(a);o.status?(N(o.sale),h(o.delivery),w(o.code)):R.success("Error en el Pago",{description:"El pago ha sido rechazado",icon:t.jsx(F,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"top-right"})}catch(r){console.log(r),R.success("Error en el Pago",{description:"No se llegó a procesar el pago",icon:t.jsx(F,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"top-right"})}}else if(s==="yape"){const a={user_id:(n==null?void 0:n.id)||"",name:(e==null?void 0:e.name)||"",lastname:(e==null?void 0:e.lastname)||"",fullname:`${e==null?void 0:e.name} ${e==null?void 0:e.lastname}`,phone_prefix:(e==null?void 0:e.phone_prefix)||"51",email:(e==null?void 0:e.email)||"",phone:`${e.phone_prefix}${e.phone}`,country:"Perú",department:(e==null?void 0:e.department)||"",province:(e==null?void 0:e.province)||"",district:(e==null?void 0:e.district)||"",ubigeo:(e==null?void 0:e.ubigeo)||"",address:(e==null?void 0:e.address)||"",number:(e==null?void 0:e.number)||"",comment:(e==null?void 0:e.comment)||"",amount:S||0,delivery:k,cart:p,invoiceType:e.invoiceType||"",documentType:e.documentType||"",document:e.document||"",businessName:e.businessName||"",payment_method:s||null,payment_proof:null,coupon_id:d?d.id:null,coupon_discount:j||0,total_amount:f||0};ae(a),ee(!0)}else if(s==="transferencia"){const a={user_id:(n==null?void 0:n.id)||"",name:(e==null?void 0:e.name)||"",lastname:(e==null?void 0:e.lastname)||"",fullname:`${e==null?void 0:e.name} ${e==null?void 0:e.lastname}`,phone_prefix:(e==null?void 0:e.phone_prefix)||"51",email:(e==null?void 0:e.email)||"",phone:`${e.phone_prefix}${e.phone}`,country:"Perú",department:(e==null?void 0:e.department)||"",province:(e==null?void 0:e.province)||"",district:(e==null?void 0:e.district)||"",ubigeo:(e==null?void 0:e.ubigeo)||"",address:(e==null?void 0:e.address)||"",number:(e==null?void 0:e.number)||"",comment:(e==null?void 0:e.comment)||"",amount:S||0,delivery:k,cart:p,invoiceType:e.invoiceType||"",documentType:e.documentType||"",document:e.document||"",businessName:e.businessName||"",payment_method:s||null,payment_proof:null,coupon_id:d?d.id:null,coupon_discount:j||0,total_amount:f||0};ae(a),te(!0)}}catch(a){console.error("Error en el pago:",a),R.success("Error en el Pago",{description:"No se llegó a procesar el pago",icon:t.jsx(F,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"top-right"})}};c.useEffect(()=>{H(s=>{const a={...s};return Object.keys(e).forEach(r=>{e[r]&&delete a[r]}),a})},[e]);const Te=s=>({control:a=>({...a,border:`1px solid ${s?"#ef4444":"#e5e7eb"}`,boxShadow:"none",minHeight:"50px","&:hover":{borderColor:s?"#ef4444":"#6b7280"},borderRadius:"0.75rem",padding:"2px 8px"}),menu:a=>({...a,zIndex:9999,marginTop:"4px",borderRadius:"8px"}),option:a=>({...a,color:"#1f2937",backgroundColor:"white","&:hover":{backgroundColor:"#f3f4f6"},padding:"12px 16px"})}),_e={control:(s,a)=>({...s,padding:"0.5rem",borderColor:(a.isFocused,"#d1d5db"),borderRadius:"0.75rem",boxShadow:"none","&:hover":{borderColor:"#9ca3af"}}),input:s=>({...s,color:"#374151"}),option:(s,a)=>({...s,backgroundColor:a.isSelected?"#3b82f6":"white",color:a.isSelected?"white":"#374151","&:hover":{backgroundColor:"#e5e7eb"}}),singleValue:s=>({...s,color:"#374151"})};c.useEffect(()=>{if(d){let s=0;d.type==="percentage"?s=S*(d.amount/100):s=d.amount,B(s)}else B(0)},[S,d]);const oe=s=>{s.preventDefault();const a=(L.current.value||"").trim().toUpperCase();a&&He.save({coupon:a,amount:S,email:"basiliohinostroza2003bradneve@gmail.com"}).then(r=>{r&&r.id?U(r):(U(null),B(0))})},Ee=s=>{s.key=="Enter"&&oe(s)};return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-y-8 lg:gap-8 ",children:[t.jsx("div",{className:"lg:col-span-3",children:t.jsxs("form",{className:"space-y-6 bg-[#f9f9f9] py-6 px-4 sm:px-6 rounded-2xl font-font-general",onSubmit:s=>s.preventDefault(),children:[t.jsxs("div",{className:"sectionInformation space-y-3.5",children:[t.jsx("h3",{className:"block text-xl 2xl:text-2xl font-bold mb-4 customtext-neutral-dark ",children:"Información del contacto"}),t.jsxs("div",{className:"grid lg:grid-cols-2 gap-4",children:[t.jsx(b,{type:"text",label:"Nombres",name:"name",value:e.name,error:u.name,onChange:m,placeholder:"Nombres",required:!0}),t.jsx(b,{label:"Apellidos",type:"text",name:"lastname",value:e.lastname,error:u.lastname,onChange:m,placeholder:"Apellidos",required:!0})]}),t.jsxs("div",{className:"grid lg:grid-cols-2 gap-4 ",children:[t.jsx(b,{label:"Correo electrónico",type:"email",name:"email",value:e.email,error:u.email,onChange:m,placeholder:"Ej. hola@gmail.com",required:!0}),t.jsxs("div",{className:"w-full",children:[t.jsxs("label",{htmlFor:"phone",className:"block text-sm mb-1",children:["Celular ",t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"flex gap-2 w-full",children:[t.jsxs("select",{className:"select2-prefix-selector max-w-[120px] p-2 border border-gray-300 rounded",onChange:s=>setSelectedPrefix(s.target.value),name:"phone_prefix",value:e.phone_prefix,styles:_e,classNamePrefix:"select",children:[t.jsx("option",{value:"",children:"Selecciona un país"}),ue.sort((s,a)=>s.country.localeCompare(a.country)).map((s,a)=>t.jsx("option",{value:s.realCode,"data-code":s.beautyCode,"data-flag":s.flag,"data-country":s.country},a))]}),t.jsx(b,{type:"text",id:"phone",name:"phone",value:e.phone,error:u.phone,onChange:m,placeholder:"000 000 000"})]})]})]})]}),t.jsx("div",{className:"bg-[#66483966] py-[0.6px]"}),t.jsxs("div",{className:"sectionDelivery space-y-3.5",children:[t.jsx("h3",{className:"block text-xl 2xl:text-2xl font-bold mb-4 customtext-neutral-dark",children:"Dirección de envío"}),t.jsxs("div",{id:"ubigeo-select-container",className:"form-group",children:[t.jsx("label",{className:"block text-sm 2xl:text-base mb-1 customtext-neutral-dark ",children:"Ubicación de entrega (Distrito)"}),t.jsx(qe,{name:"ubigeo",cacheOptions:!0,value:A,loadOptions:fe,onChange:s=>{W(s),Y(s)},placeholder:"Buscar por distrito | provincia | departamento ...",loadingMessage:()=>"Buscando ubicaciones...",noOptionsMessage:({inputValue:s})=>s.length<3?"Ingrese al menos 3 caracteres...":"No se encontraron resultados",isLoading:V,styles:Te(!!u.ubigeo),formatOptionLabel:({data:s})=>t.jsxs("div",{className:"text-sm py-1",children:[t.jsx("div",{className:"font-medium",children:s.distrito}),t.jsxs("div",{className:"text-gray-500",children:[s.provincia,", ",s.departamento]})]}),className:"w-full rounded-xl transition-all duration-300",menuPortalTarget:document.body,isClearable:!0,components:{ClearIndicator:s=>t.jsx("div",{...s.innerProps,className:"p-1 cursor-pointer",children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-400 hover:text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})}}),u.ubigeo&&t.jsx("div",{className:"text-red-500 text-sm mt-1",children:u.ubigeo})]}),t.jsx(b,{label:"Avenida / Calle / Jirón",type:"text",name:"address",value:e.address,error:u.address,onChange:m,placeholder:"Ingresa el nombre de la calle",required:!0}),t.jsxs("div",{className:"grid lg:grid-cols-2 gap-4",children:[t.jsx(b,{label:"Número",type:"text",name:"number",value:e.number,error:u.number,onChange:m,placeholder:"Ingresa el número de la calle",required:!0}),t.jsx(b,{label:"Dpto./ Interior/ Piso/ Lote/ Bloque (opcional)",type:"text",name:"comment",value:e.comment,onChange:m,placeholder:"Ej. Casa 3, Dpto 101"})]}),P.length>0&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"block text-xl 2xl:text-2xl font-bold mb-4 customtext-neutral-dark",children:"Método de envío"}),t.jsx("div",{className:"grid grid-cols-2 gap-4",children:P.map(s=>t.jsx(Oe,{title:(s.type==="free"||s.type==="express"||s.type==="agency",s.deliveryType),price:s.price,description:s.description,selected:M===s.type,onSelect:()=>{G(s.type),E(s.price)}},s.type))}),console.log(P.find(s=>s.type===M)),M&&P.length>0&&t.jsx("div",{className:"space-y-4 mt-4",children:(ie=(re=P.find(s=>s.type===M))==null?void 0:re.characteristics)==null?void 0:ie.map((s,a)=>t.jsxs("div",{className:"flex items-start gap-4 bg-[#F7F9FB] p-4 rounded-xl",children:[t.jsx("div",{className:"w-5 flex-shrink-0",children:t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-info customtext-primary",children:[t.jsx("circle",{cx:"12",cy:"12",r:"10"}),t.jsx("path",{d:"M12 16v-4"}),t.jsx("path",{d:"M12 8h.01"})]})}),t.jsx("div",{className:"flex-1",children:t.jsx("p",{className:"text-sm font-medium customtext-neutral-dark",children:s})})]},`char-${a}`))})]})]}),t.jsx("div",{className:"bg-[#66483966] py-[0.6px]"}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-medium customtext-neutral-dark",children:"Tipo de comprobante"}),t.jsxs("div",{className:"flex gap-4",children:[t.jsxs("label",{className:"inline-flex items-center",children:[t.jsx("input",{type:"radio",className:"form-radio",name:"invoiceType",value:"boleta",checked:e.invoiceType==="boleta",onChange:m}),t.jsx("span",{className:"ml-2",children:"Boleta"})]}),t.jsxs("label",{className:"inline-flex items-center",children:[t.jsx("input",{type:"radio",className:"form-radio",name:"invoiceType",value:"factura",checked:e.invoiceType==="factura",onChange:m}),t.jsx("span",{className:"ml-2",children:"Factura"})]})]})]}),t.jsx(b,{label:e.documentType==="dni"?"DNI":"RUC",type:"text",name:"document",value:e.document,error:u.document,onChange:m,placeholder:`Ingrese su ${e.documentType==="dni"?"DNI":"RUC"}`,maxLength:e.documentType==="dni"?"8":"11",required:!0}),e.invoiceType==="factura"&&t.jsx(b,{label:"Razón Social",type:"text",name:"businessName",value:e.businessName,onChange:m,placeholder:"Ingrese la razón social"})]})}),t.jsxs("div",{className:"bg-[#F7F9FB] rounded-xl shadow-lg p-6 col-span-2 h-max font-font-general",children:[t.jsx("h3",{className:"text-2xl font-bold pb-6 customtext-neutral-dark",children:"Resumen de compra"}),t.jsx("div",{className:"space-y-6 border-b-2 pb-6",children:p.map((s,a)=>t.jsx("div",{className:"rounded-lg",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"bg-white p-0 rounded-xl",children:t.jsx("img",{src:`/storage/images/item/${s.image}`,alt:s.name,className:"w-20 h-20 object-cover rounded  "})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-semibold customtext-neutral-dark text-base 2xl:text-lg mb-2",children:s.name}),t.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Color:"," ",t.jsx("span",{className:"customtext-neutral-dark",children:s.color})]}),t.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Cantidad:"," ",t.jsxs("span",{className:"customtext-neutral-dark",children:[s.quantity," "]})]})]})]})},s.id))}),!d&&t.jsxs("div",{className:"mt-6 flex",children:[t.jsx("input",{ref:L,type:"text",placeholder:"Código de cupón",className:"w-full rounded-l-md border border-gray-300 p-2 px-4 text-sm outline-none uppercase focus:border-[#C5B8D4]",value:d==null?void 0:d.name,onKeyDown:Ee,disabled:V}),t.jsx("button",{className:"rounded-r-md bg-[#5339B1] px-4 py-2 text-sm text-white",type:"button",onClick:oe,disabled:V,children:"Aplicar"})]}),t.jsxs("div",{className:"space-y-4 mt-6",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"customtext-neutral-dark",children:"Subtotal"}),t.jsxs("span",{className:"font-semibold",children:["S/ ",T(x)]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"customtext-neutral-dark",children:"IGV"}),t.jsxs("span",{className:"font-semibold",children:["S/ ",T(y)]})]}),d&&t.jsxs("div",{className:"mb-2 mt-2 flex justify-between items-center border-b pb-2 text-sm font-bold",children:[t.jsxs("span",{children:["Cupón aplicado"," ",t.jsx(xe,{content:"Eliminar",children:t.jsx("i",{className:"mdi mdi-close text-red-500 cursor-pointer",onClick:()=>{U(null),L.current.value=""}})}),t.jsxs("small",{className:"block text-xs font-light",children:[d.name," ",t.jsx(xe,{content:d.description,children:t.jsx("i",{className:"mdi mdi-information-outline ms-1"})})," ","(",d.type==="percentage"?`-${Math.round(d.amount*100)/100}%`:`S/ -${T(d.amount)}`,")"]})]}),t.jsxs("span",{children:["S/ -",T(j)]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"customtext-neutral-dark",children:"Envío"}),t.jsx("span",{className:"font-semibold",children:q!=null&&D>=q?t.jsxs("span",{className:"customtext-neutral-dark",children:["Gratis (Compra mayor a S/",q,")"]}):`S/ ${T(k)}`})]}),t.jsx("div",{className:"py-3 border-y-2 mt-6",children:t.jsxs("div",{className:"flex justify-between font-bold text-[20px] items-center",children:[t.jsx("span",{children:"Total"}),t.jsxs("span",{children:["S/ ",T(f)]})]})}),t.jsxs("div",{className:"space-y-2 pt-4",children:[t.jsxs(Re,{className:"payment-button",onClick:Ce,children:[" ","Continuar"]}),t.jsx("div",{id:"mercadopago-button-container"}),t.jsxs(Fe,{onClick:C,children:[" ","Cancelar"]})]}),t.jsx("div",{children:t.jsxs("p",{className:"text-sm customtext-neutral-dark",children:["Al realizar tu pedido, aceptas los",t.jsx("a",{className:"customtext-primary font-bold",children:"Términos y Condiciones"}),", y que nosotros usaremos sus datos personales de acuerdo con nuestra",t.jsx("a",{className:"customtext-primary font-bold",children:"Política de Privacidad"}),"."]})})]})]})]}),t.jsx(Ge,{isOpen:je,contacts:I,onClose:()=>K(!1),onPaymentComplete:Se}),t.jsx(Ue,{isOpen:ve,cart:p,subTotal:x,igv:y,totalFinal:f,envio:k,request:ne,onClose:()=>ee(!1),paymentMethod:se,coupon:d,descuentofinal:j}),t.jsx(Ae,{isOpen:Ne,cart:p,subTotal:x,igv:y,totalFinal:f,envio:k,contacts:I,request:ne,onClose:()=>te(!1),paymentMethod:se,coupon:d,descuentofinal:j})]})}export{At as S};
