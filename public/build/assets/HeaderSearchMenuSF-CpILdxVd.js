var e,t=Object.defineProperty;import{m as s,r,j as a,S as o,X as n,J as i}from"./vendor-react-CZUvQwNQ.js";import{G as l}from"./Footer-DAm0kDL9.js";import"./OpenPayCardModal-BHkRoVZ6.js";import{C as c}from"./Number2Currency-BX4epFEo.js";import d from"./TopBar-BltElHVx.js";import{A as m,m as x}from"./vendor-motion-mZjvfsLz.js";import"./vendor-swiper-Cr_RrIb_.js";import"./General-ClVW7qxN.js";import"./preload-helper-DAHR15QK.js";class h{}((e,s,r)=>{s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[s]=r})(h,"symbol"!=typeof(e="getProducts")?e+"":e,async e=>{try{const{status:t,result:r}=await s.Fetch("/api/items/searchProducts",{method:"POST",body:JSON.stringify(e)});if(!t)throw new Error(r?.message||"Error al obtener datos");return r}catch(t){return!1}});const u=({search:e,setSearch:t})=>{const[s,n]=r.useState([]),[i,l]=r.useState(!1),[d,m]=r.useState(!1),x=r.useRef(null),u=r.useRef();return r.useEffect(()=>{const e=e=>{u.current&&!u.current.contains(e.target)&&l(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),r.useEffect(()=>{if(x.current&&clearTimeout(x.current),0===e.trim().length)return n([]),void l(!1);x.current=setTimeout(async()=>{m(!0);const t={query:e.trim()},s=await h.getProducts(t);s&&s.data?.length?(n(s.data),l(!0)):(n([]),l(!1)),m(!1)},300)},[e]),a.jsxs("div",{className:"relative w-80",ref:u,children:[a.jsx("input",{type:"search",placeholder:"Buscar productos",value:e,onChange:e=>t(e.target.value),className:"w-full pr-14 py-4 pl-4 border rounded-full border-primary focus:ring-0 focus:outline-none placeholder:text-gray-400"}),a.jsx("a",{href:e.trim()?`/catalogo?search=${encodeURIComponent(e)}`:"#",className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-2 bg-primary text-white rounded-lg","aria-label":"Buscar",children:a.jsx(o,{})}),i&&a.jsx("div",{className:"absolute mt-2 w-full bg-white border rounded-lg shadow-lg z-50 max-h-60 overflow-y-auto",children:d?a.jsx("div",{className:"px-4 py-2 text-gray-500",children:"Buscando..."}):s.length>0?s.map(e=>{const t=parseFloat(e.price),s=parseFloat(e.discount);return a.jsx("a",{href:`/item/${e.slug}`,className:"block px-1 py-1 hover:bg-gray-100 transition text-sm !font-paragraph",children:a.jsxs("div",{className:"flex items-center gap-3 px-2 py-2",children:[a.jsx("div",{className:"w-12 h-12 shrink-0",children:a.jsx("img",{src:`/storage/images/item/${e.image}`,alt:e.name,onError:e=>e.target.src="/assets/img/noimage/no_img.jpg",className:"w-full h-full object-cover rounded",loading:"lazy"})}),a.jsx("div",{className:"flex-1",children:a.jsx("h2",{className:"text-[13px] font-medium customtext-neutral-dark leading-tight line-clamp-3",children:e.name})}),a.jsxs("div",{className:"text-right text-sm min-w-[80px] customtext-neutral-dark",children:[a.jsxs("p",{className:"text-primary font-semibold",children:[c()," ",s>0?s.toFixed(2):t.toFixed(2)]}),s>0&&a.jsxs("p",{className:"text-xs text-gray-500 line-through",children:[c()," ",t.toFixed(2)]})]})]})},e.id)}):a.jsx("div",{className:"px-4 py-2 text-gray-500",children:"Sin resultados"})})]})},g=({items:e,data:t,cart:s,setCart:o,isUser:c,pages:h,headerPosts:g,contacts:p,generals:y=[]})=>{const[j,f]=r.useState(!1),[b,v]=r.useState(!1),[N,w]=r.useState(""),[k,C]=r.useState(!1),[S,E]=r.useState("main"),[L,P]=r.useState(null),B=r.useRef(null);r.useEffect(()=>(k?document.body.classList.add("overflow-hidden"):document.body.classList.remove("overflow-hidden"),()=>{document.body.classList.remove("overflow-hidden")}),[k]),s.reduce((e,t)=>Number(e)+Number(t.quantity),0),r.useEffect(()=>{function e(e){B.current&&!B.current.contains(e.target)&&C(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const F=()=>{"subcategories"===S?E("categories"):"categories"===S&&E("main")};return a.jsxs("header",{id:t?.element_id||"main-header",className:"sticky top-0 w-full z-[50] bg-white font-paragraph",children:[a.jsx(d,{data:t,which:t?.type_topbar||"TopBarCart",items:y,cart:s,setCart:o,isUser:c,pages:h}),a.jsx("div",{className:"w-full border-b border-gray-100",children:a.jsx("div",{className:"flex justify-between w-full px-[5%] py-2 lg:py-4 mx-auto replace-max-w-here 2xl:max-w-7xl 2xl:px-0",children:a.jsxs("nav",{className:"flex h-[80px] items-center justify-between gap-10 w-full",children:[a.jsx("button",{onClick:()=>C(!k),className:"lg:hidden flex items-center justify-center bg-primary rounded-xl w-auto h-auto p-2 text-white transition-all duration-300 hover:scale-105","aria-label":"Toggle menu",children:k?a.jsx(n,{className:"h-8 w-8"}):a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",children:[a.jsx("path",{d:"M10 5H20",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M4 12H20",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M4 19H14",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}),a.jsx("div",{className:"flex justify-center items-center",children:a.jsx("a",{href:"/",className:"flex items-center gap-2",children:a.jsx("img",{src:`/assets/resources/logo.png?v=${crypto.randomUUID()}`,alt:l.APP_NAME,className:"h-20 lg:h-20 object-contain object-center",onError:e=>{e.target.onerror=null,e.target.src="/assets/img/logo-bk.svg"}})})}),a.jsx("nav",{className:"hidden lg:flex items-center justify-center flex-1",children:a.jsx("ul",{className:"flex items-center gap-8 font-gilroy_regular font-semibold text-lg",children:h.map((e,t)=>e.menuable&&("Blogs"!==e.name||g.length>0)&&a.jsx("li",{children:a.jsx("a",{href:e.path,className:"hover:text-primary cursor-pointer transition-all duration-300",children:e.name})},t))})}),a.jsx("div",{className:"hidden lg:flex",children:a.jsx(u,{search:N,setSearch:w})})]})})}),a.jsx(m,{children:k&&a.jsx(a.Fragment,{children:a.jsx(x.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},className:"lg:hidden bg-white border-b border-gray-200 shadow-xl z-40 relative",ref:B,children:a.jsxs("div",{className:"px-[5%] py-6 max-h-[70vh] overflow-y-auto",children:[a.jsx("div",{className:"mb-6",children:a.jsx(u,{search:N,setSearch:w})}),(()=>{if("main"===S)return a.jsxs("nav",{className:"space-y-1",children:[a.jsx("div",{className:"pb-2 border-b border-gray-100",children:a.jsxs("button",{className:"w-full text-left py-3 px-2 text-lg font-semibold text-gray-800 hover:text-primary hover:bg-gray-50 rounded-lg transition-all duration-300 flex justify-between items-center",onClick:()=>{E("categories")},children:[a.jsx("span",{children:"Categorías"}),a.jsx(i,{className:"h-5 w-5 text-gray-400"})]})}),h.map((e,t)=>e.menuable&&("Blogs"!==e.name||g.length>0)&&a.jsx("div",{className:"py-1",children:a.jsx("a",{href:e.path,className:"block py-3 px-2 text-lg font-medium text-gray-800 hover:text-primary hover:bg-gray-50 rounded-lg transition-all duration-300",onClick:()=>C(!1),children:e.name})},t))]});if("categories"===S)return a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"pb-4 border-b border-gray-100 mb-4",children:a.jsxs("button",{onClick:F,className:"flex items-center gap-2 py-2 px-2 text-sm text-gray-600 hover:text-primary transition-colors",children:[a.jsx(i,{className:"h-4 w-4 rotate-180"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-800 px-2",children:"Categorías"})]})}),a.jsx("div",{className:"h-80 max-h-80 overflow-y-auto",children:e&&e.length>0?e.map(e=>a.jsx("div",{className:"py-1",children:a.jsxs("div",{className:"flex  items-center justify-between py-3 px-2 text-gray-800 hover:text-primary hover:bg-gray-50 rounded-lg transition-all duration-300",children:[a.jsx("a",{href:`/catalogo?category=${e.slug}`,className:"flex-1",onClick:()=>C(!1),children:e.name}),e.subcategories&&e.subcategories.length>0&&a.jsx("button",{onClick:()=>{return t=e.name,P(t),void E("subcategories");var t},className:"p-1 hover:bg-gray-100 rounded",children:a.jsx(i,{className:"h-4 w-4 text-gray-400"})})]})},e.id)):a.jsx("div",{className:"py-4 text-center text-gray-500",children:"No hay categorías disponibles"})})]});if("subcategories"===S&&L){const t=e.find(e=>e.name===L);return a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"pb-4 border-b border-gray-100 mb-4",children:[a.jsxs("button",{onClick:F,className:"flex items-center gap-2 py-2 px-2 text-sm text-gray-600 hover:text-primary transition-colors",children:[a.jsx(i,{className:"h-4 w-4 rotate-180"}),"Volver a Categorías"]}),a.jsx("h3",{className:"text-lg font-semibold text-gray-800 px-2",children:L})]}),t&&t.subcategories&&t.subcategories.length>0?t.subcategories.map((e,t)=>a.jsx("div",{className:"py-1",children:a.jsx("a",{href:`/catalogo?subcategory=${e.slug}`,className:"block py-3 px-2 text-gray-800 hover:text-primary hover:bg-gray-50 rounded-lg transition-all duration-300",onClick:()=>C(!1),children:e.name})},t)):a.jsx("div",{className:"py-4 text-center text-gray-500",children:"No hay subcategorías disponibles"})]})}})()]})})})})]})};export{g as default};
