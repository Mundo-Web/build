var ge=Object.defineProperty;var we=(h,i,c)=>i in h?ge(h,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):h[i]=c;var je=(h,i,c)=>we(h,typeof i!="symbol"?i+"":i,c);import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as x}from"./index-BOnQTV8N.js";import{c as Ce}from"./ReactAppend-QR5TrZfj.js";import{s as Se}from"./server.browser-Bf4gQIc7.js";import{B as _e}from"./Base-BtKyxfJk.js";import{B as Re}from"./BasicRest-BML1C-ua.js";import{m as fe}from"./main-B6F2O9-U.js";import{T as Ee}from"./Table-BkLpM5NU.js";import{D as Ne}from"./DxButton-DV0H-ZcL.js";import{M as Te}from"./Modal-xDw9ufjg.js";import{S as $e}from"./SelectFormGroup-X8WqJHHl.js";import{C as Be}from"./CreateReactScript-HF4HuQek.js";import{R as u}from"./ReactAppend-Vm5G2nof.js";import{S as v}from"./CartKuchara-D9l7c7at.js";import{G as ye}from"./Global-Bz6gVLc5.js";import{C as w,N as C}from"./Number2Currency-ld0bFawA.js";import{i as Ae}from"./tippy-react.esm-DmkRJDEW.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./index-B6ujFmsw.js";/* empty css              */import"./Logout-BpuTJ_83.js";import"./MenuItemContainer-DcxtOi47.js";import"./index.esm-C48oHfFw.js";import"./index-ngrFHoWO.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./CanAccess-BOTQKW2g.js";import"./CardProductKatya-ncpmQ0JU.js";import"./index-pSueRYGM.js";import"./BooleanLimit-D-OsQsek.js";/* empty css               */import"./General-CE1RDd44.js";import"./LaravelSession-Dz9cpV3l.js";class Fe extends Re{constructor(){super(...arguments);je(this,"path","admin/bookings")}async confirm(c){return await this.postRequest(`/api/admin/bookings/${c}/confirm`)}async complete(c){return await this.postRequest(`/api/admin/bookings/${c}/complete`)}async cancel(c,d){return await this.postRequest(`/api/admin/bookings/${c}/cancel`,d)}async noShow(c){return await this.postRequest(`/api/admin/bookings/${c}/no-show`)}async updateSaleStatus(c,d){return await this.postRequest(`/api/admin/bookings/${c}/update-sale-status`,d)}async postRequest(c,d={}){try{const m=await fetch(c,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(fe.Cookies.get("XSRF-TOKEN"))},body:JSON.stringify(d)});if(!m.ok){const n=await m.json().catch(()=>({}));throw new Error((n==null?void 0:n.message)||`Error ${m.status}: ${m.statusText}`)}return await m.json()}catch(m){throw console.error("Error en petición POST:",m),m}}async getSaleStatusHistory(c){try{const d=await fetch(`/api/admin/bookings/${c}/sale-status-history`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(fe.Cookies.get("XSRF-TOKEN"))}});if(!d.ok)throw new Error(`Error ${d.status}: ${d.statusText}`);return(await d.json()).data||[]}catch(d){return console.error("Error al obtener historial de estados:",d),[]}}}const j=new Fe,He=({statuses:h=[]})=>{var O,I,z,Y,q,G,W,V,X,J,K,U,Q,Z,k,L,ee,te,se,ae,re,le,ce,ie,ne,de,oe,me,he,xe,pe,ue;const i=x.useRef(),c=x.useRef(),d=x.useRef(),m=x.useRef(!1),[n,f]=x.useState("all"),[t,S]=x.useState(null),[N,_]=x.useState([]),[B,R]=x.useState([]),[A,F]=x.useState(!1);x.useEffect(()=>{const s=document.createElement("style");return s.textContent=`
      .select2-container--default .select2-results__option {
        padding: 4px !important;
        background: white !important;
      }
      .select2-container--default .select2-results__option--highlighted[aria-selected] {
        background-color: #f8f9fa !important;
      }
      .select2-container--default .select2-results__option:hover {
        background-color: #f8f9fa !important;
      }
      .select2-container--default .select2-selection--single {
        border: 1px solid #e3ebf0 !important;
      }
    `,document.head.appendChild(s),()=>{document.head.removeChild(s)}},[]);const g=s=>{if(!s)return"N/A";const a=new Date(s),r=String(a.getDate()).padStart(2,"0"),l=String(a.getMonth()+1).padStart(2,"0"),o=a.getFullYear();return`${r}/${l}/${o}`},E=s=>{if(!s)return"N/A";const a=new Date(s);return moment(a).format("YYYY-MM-DD HH:mm")},H=()=>n==="all"?[]:["status","=",n];x.useEffect(()=>{if(i.current){const s=$(i.current).dxDataGrid("instance");s&&(s.option("filterValue",H()),s.refresh())}},[n]);const D=async s=>{try{const a=await j.get(s);a&&a.data?(S(a.data),_(a.all_bookings||[]),await P(s)):a?(S(a),_([]),R([])):v.fire("Error","No se pudo cargar la reserva","error")}catch(a){console.error("Error al cargar reserva:",a),v.fire("Error","No se pudo cargar la reserva","error")}},be=async s=>{const{isConfirmed:a}=await v.fire({title:"Eliminar reserva",text:"¿Estás seguro de eliminar esta reserva? Esta acción no se puede deshacer.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"});!a||!await j.delete(s)||$(i.current).dxDataGrid("instance").refresh()};x.useEffect(()=>{t&&c.current&&$(c.current).modal("show")},[t]);const P=async s=>{if(s)try{const a=await j.getSaleStatusHistory(s);R(a||[])}catch(a){console.error("Error al cargar historial de estados:",a),R([])}},ve=async(s,a)=>{var o;a!=null&&a.sale||(t==null||t.sale);const r=(a==null?void 0:a.id)||(t==null?void 0:t.id);if(m.current)return;const l=h.find(p=>p.id==s.target.value);if(l){if(l.reversible==0){const{isConfirmed:p}=await v.fire({title:"Cambiar estado",text:`¿Estás seguro de cambiar el estado a ${l.name}?
Esta acción no se puede revertir`,icon:"warning",showCancelButton:!0});if(!p)return}m.current=!0,F(!0);try{const p=await j.updateSaleStatus(r,{status_id:l.id,notify_client:((o=d.current)==null?void 0:o.checked)||!1});if(p!=null&&p.status){const b=await j.get(r);b!=null&&b.data&&(S(b.data),_(b.all_bookings||[])),await P(r),$(i.current).dxDataGrid("instance").refresh()}}catch(p){console.error("Error al cambiar estado:",p),v.fire("Error","No se pudo cambiar el estado","error")}F(!1),setTimeout(()=>{m.current=!1},500)}},y=s=>({pending:{badge:"badge-warning",label:"Pendiente",color:"#f1b44c",bg:"#fff3cd"},confirmed:{badge:"badge-success",label:"Confirmada",color:"#28a745",bg:"#d4edda"},cancelled:{badge:"badge-danger",label:"Cancelada",color:"#dc3545",bg:"#f8d7da"},completed:{badge:"badge-info",label:"Completada",color:"#17a2b8",bg:"#d1ecf1"},no_show:{badge:"badge-secondary",label:"No Show",color:"#6c757d",bg:"#e2e3e5"}})[s]||{badge:"badge-secondary",label:s||"Sin estado",color:"#6c757d",bg:"#e2e3e5"},M=s=>{const a=$(s.element).data("status");if(!s.id)return;const r=(a==null?void 0:a.color)||"#333";return $(Se.renderToString(e.jsxs("span",{title:(a==null?void 0:a.description)||"",className:"d-flex align-items-center",style:{color:r,padding:"4px 8px",fontSize:"14px",fontWeight:"500"},children:[e.jsx("i",{className:`${(a==null?void 0:a.icon)||"mdi mdi-circle"} me-2`,style:{color:r,fontSize:"12px"}}),s.text]})))},T=N.length===0&&t?{totalRooms:1,totalNights:t.nights||0,totalAmount:Number(t.total_price||0)}:N.reduce((s,a)=>({totalRooms:s.totalRooms+1,totalNights:s.totalNights+(a.nights||0),totalAmount:s.totalAmount+Number(a.total_price||0)}),{totalRooms:0,totalNights:0,totalAmount:0});return e.jsxs(e.Fragment,{children:[e.jsx(Ee,{gridRef:i,title:"Reservas de Hotel",rest:j,filterValue:H(),withRelations:"item,sale,sale.status",toolBar:s=>{s.unshift({widget:"dxButton",location:"before",options:{text:"Todas",type:n==="all"?"default":"normal",stylingMode:n==="all"?"contained":"outlined",onClick:()=>f("all")}},{widget:"dxButton",location:"before",options:{text:"Pendientes",type:n==="pending"?"default":"normal",stylingMode:n==="pending"?"contained":"outlined",onClick:()=>f("pending")}},{widget:"dxButton",location:"before",options:{text:"Confirmadas",type:n==="confirmed"?"default":"normal",stylingMode:n==="confirmed"?"contained":"outlined",onClick:()=>f("confirmed")}},{widget:"dxButton",location:"before",options:{text:"Completadas",type:n==="completed"?"default":"normal",stylingMode:n==="completed"?"contained":"outlined",onClick:()=>f("completed")}},{widget:"dxButton",location:"before",options:{text:"Canceladas",type:n==="cancelled"?"default":"normal",stylingMode:n==="cancelled"?"contained":"outlined",onClick:()=>f("cancelled")}}),s.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(i.current).dxDataGrid("instance").refresh()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"sale.code",caption:"Orden",width:"250px",cellTemplate:(s,{data:a})=>{var r,l,o;s.css("cursor","pointer"),s.on("click",()=>{D(a.id)}),u(s,e.jsxs("p",{className:"mb-0",style:{width:"100%"},children:[e.jsx("b",{className:"d-block",children:((r=a.sale)==null?void 0:r.fullname)||((l=a.sale)==null?void 0:l.name)||"N/A"}),e.jsxs("small",{className:"text-nowrap text-muted",style:{overflow:"hidden",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2,fontFamily:"monospace"},children:["#",ye.APP_CORRELATIVE,"-",((o=a.sale)==null?void 0:o.code)||"N/A"]})]}))}},{dataField:"created_at",caption:"Fecha",dataType:"date",sortOrder:"desc",cellTemplate:(s,{data:a})=>{s.text(moment(a.created_at).subtract(5,"hours").format("LLL"))}},{dataField:"item.name",caption:"Habitación",cellTemplate:(s,{data:a})=>{var r,l;u(s,e.jsxs("div",{children:[e.jsx("strong",{children:((r=a.item)==null?void 0:r.name)||"N/A"}),e.jsx("div",{className:"small text-muted text-capitalize",children:((l=a.item)==null?void 0:l.room_type)||""})]}))}},{dataField:"check_in",caption:"Check In / Out",cellTemplate:(s,{data:a})=>{u(s,e.jsxs("div",{children:[e.jsxs("div",{className:"small",children:[e.jsx("i",{className:"mdi mdi-calendar-arrow-right text-success mr-1"}),g(a.check_in)]}),e.jsxs("div",{className:"small",children:[e.jsx("i",{className:"mdi mdi-calendar-arrow-left text-danger mr-1"}),g(a.check_out)]}),e.jsxs("div",{className:"small text-muted",children:[e.jsx("i",{className:"mdi mdi-weather-night mr-1"}),a.nights," noche",a.nights!==1?"s":""]})]}))}},{dataField:"guests",caption:"Huéspedes",width:"90px",cellTemplate:(s,{data:a})=>{u(s,e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"mdi mdi-account-multiple text-primary"})," ",a.guests]}))}},{dataField:"total_price",caption:"Total",cellTemplate:(s,{data:a})=>{u(s,e.jsx("div",{children:e.jsxs("strong",{className:"text-success",children:[w()," ",C(a.total_price||0)]})}))}},{dataField:"sale.status.name",caption:"Estado Pago",cellTemplate:(s,{data:a})=>{var l;const r=(l=a.sale)==null?void 0:l.status;u(s,e.jsx("span",{className:"badge rounded-pill",style:{backgroundColor:r!=null&&r.color?`${r.color}2e`:"#3333332e",color:(r==null?void 0:r.color)??"#333"},children:(r==null?void 0:r.name)||"Sin estado"}))}},{dataField:"status",caption:"Estado Reserva",cellTemplate:(s,{data:a})=>{const{badge:r,label:l,color:o,bg:p}=y(a.status);u(s,e.jsx("span",{className:"badge",style:{backgroundColor:p,color:o,fontWeight:"500"},children:l}))}},{caption:"Acciones",width:"100px",cellTemplate:(s,{data:a})=>{s.css("text-overflow","unset"),s.append(Ne({className:"btn btn-xs btn-light mr-1",title:"Ver pedido",icon:"fa fa-eye",onClick:()=>D(a.id)})),s.append(Ne({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>be(a.id)}))},allowFiltering:!1,allowExporting:!1}]}),e.jsx(Te,{modalRef:c,title:`Detalles de la reserva #${ye.APP_CORRELATIVE}-${((O=t==null?void 0:t.sale)==null?void 0:O.code)||""}`,size:"xl",bodyStyle:{backgroundColor:"#ebeff2"},hideButtonSubmit:!0,children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-8",children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header p-2",children:e.jsxs("h5",{className:"card-title mb-0",children:[e.jsx("i",{className:"mdi mdi-account mr-1"}),"Información del Cliente"]})}),e.jsx("div",{className:"card-body p-2",children:e.jsx("table",{className:"table table-borderless table-sm mb-0",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("th",{width:"30%",children:"Nombre:"}),e.jsx("td",{children:((I=t==null?void 0:t.sale)==null?void 0:I.fullname)||((z=t==null?void 0:t.sale)==null?void 0:z.name)||"N/A"})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Email:"}),e.jsx("td",{children:e.jsx("a",{href:`mailto:${(Y=t==null?void 0:t.sale)==null?void 0:Y.email}`,children:((q=t==null?void 0:t.sale)==null?void 0:q.email)||"N/A"})})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Teléfono:"}),e.jsx("td",{children:e.jsxs("a",{href:`tel:${(G=t==null?void 0:t.sale)==null?void 0:G.phone}`,children:[((W=t==null?void 0:t.sale)==null?void 0:W.phone_prefix)||"",((V=t==null?void 0:t.sale)==null?void 0:V.phone)||"N/A"]})})]}),(((X=t==null?void 0:t.sale)==null?void 0:X.documentType)||((J=t==null?void 0:t.sale)==null?void 0:J.document_type))&&e.jsxs("tr",{children:[e.jsx("th",{children:"Documento:"}),e.jsxs("td",{children:[((K=t==null?void 0:t.sale)==null?void 0:K.documentType)||((U=t==null?void 0:t.sale)==null?void 0:U.document_type),": ",((Q=t==null?void 0:t.sale)==null?void 0:Q.document)||"N/A"]})]}),((Z=t==null?void 0:t.sale)==null?void 0:Z.businessName)&&e.jsxs("tr",{children:[e.jsx("th",{children:"Razón Social:"}),e.jsx("td",{children:(k=t==null?void 0:t.sale)==null?void 0:k.businessName})]}),((L=t==null?void 0:t.sale)==null?void 0:L.invoiceType)&&e.jsxs("tr",{children:[e.jsx("th",{children:"Comprobante:"}),e.jsx("td",{className:"text-capitalize",children:(ee=t==null?void 0:t.sale)==null?void 0:ee.invoiceType})]}),((te=t==null?void 0:t.sale)==null?void 0:te.payment_method)&&e.jsxs("tr",{children:[e.jsx("th",{children:"Método de Pago:"}),e.jsx("td",{className:"text-capitalize",children:(se=t==null?void 0:t.sale)==null?void 0:se.payment_method})]})]})})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header p-2",children:e.jsxs("h5",{className:"card-title mb-0",children:[e.jsx("i",{className:"mdi mdi-bed-double mr-1"}),"Habitaciones Reservadas (",N.length||1,")"]})}),e.jsx("div",{className:"card-body p-2 table-responsive",children:e.jsxs("table",{className:"table table-striped table-bordered table-sm table-hover mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Habitación"}),e.jsx("th",{children:"Check In"}),e.jsx("th",{children:"Check Out"}),e.jsx("th",{children:"Noches"}),e.jsx("th",{children:"Huéspedes"}),e.jsx("th",{children:"Precio/Noche"}),e.jsx("th",{children:"Total"}),e.jsx("th",{children:"Estado"})]})}),e.jsx("tbody",{children:(N.length>0?N:[t]).map((s,a)=>{var l,o;if(!s)return null;const r=y(s.status);return e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsx("strong",{children:((l=s.item)==null?void 0:l.name)||"N/A"}),e.jsx("div",{className:"small text-muted text-capitalize",children:((o=s.item)==null?void 0:o.room_type)||""})]}),e.jsxs("td",{children:[e.jsx("i",{className:"mdi mdi-calendar-arrow-right text-success mr-1"}),g(s.check_in)]}),e.jsxs("td",{children:[e.jsx("i",{className:"mdi mdi-calendar-arrow-left text-danger mr-1"}),g(s.check_out)]}),e.jsx("td",{className:"text-center",children:s.nights}),e.jsxs("td",{className:"text-center",children:[s.guests,e.jsxs("div",{className:"small text-muted",children:[s.adults||s.guests," adulto",(s.adults||s.guests)!==1?"s":"",s.children>0&&`, ${s.children} niño${s.children!==1?"s":""}`]})]}),e.jsxs("td",{className:"text-right",children:[w()," ",C(s.price_per_night||0)]}),e.jsx("td",{className:"text-right",children:e.jsxs("strong",{children:[w()," ",C(s.total_price||0)]})}),e.jsx("td",{children:e.jsx("span",{className:"badge",style:{backgroundColor:r.bg,color:r.color,fontWeight:"500"},children:r.label})})]},a)})})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header p-2",children:e.jsxs("h5",{className:"card-title mb-0",children:[e.jsx("i",{className:"mdi mdi-calculator mr-1"}),"Resumen"]})}),e.jsxs("div",{className:"card-body p-2",children:[e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("b",{children:"Total Habitaciones:"}),e.jsx("span",{children:T.totalRooms})]}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("b",{children:"Total Noches:"}),e.jsx("span",{children:T.totalNights})]}),e.jsx("hr",{className:"my-2"}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("b",{children:"Total:"}),e.jsx("span",{children:e.jsxs("strong",{children:[w()," ",C(T.totalAmount)]})})]})]})]}),((ae=t==null?void 0:t.sale)==null?void 0:ae.payment_proof)&&e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header p-2",children:e.jsxs("h5",{className:"card-title mb-0",children:[e.jsx("i",{className:"mdi mdi-file-image mr-1"}),"Comprobante de Pago"]})}),e.jsx("div",{className:"card-body p-2 text-center",children:e.jsx(Ae,{content:"Ver comprobante de pago",placement:"top",children:e.jsx("a",{href:`/storage/images/sale/${t.sale.payment_proof}`,target:"_blank",children:e.jsx("img",{src:`/storage/images/sale/${t.sale.payment_proof}`,alt:"Comprobante de pago",className:"img-thumbnail",style:{maxWidth:"200px",cursor:"pointer"}})})})})]}),(t==null?void 0:t.special_requests)&&e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header p-2",children:e.jsxs("h5",{className:"card-title mb-0",children:[e.jsx("i",{className:"mdi mdi-note-text mr-1"}),"Solicitudes Especiales"]})}),e.jsx("div",{className:"card-body p-2",children:e.jsx("div",{className:"alert alert-light border mb-0",children:t.special_requests})})]}),((re=t==null?void 0:t.sale)==null?void 0:re.comment)&&e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header p-2",children:e.jsxs("h5",{className:"card-title mb-0",children:[e.jsx("i",{className:"mdi mdi-comment-text mr-1"}),"Comentarios del Cliente"]})}),e.jsx("div",{className:"card-body p-2",children:e.jsx("div",{className:"alert alert-info mb-0",children:t.sale.comment})})]}),(t==null?void 0:t.cancellation_reason)&&e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header p-2 bg-danger text-white",children:e.jsxs("h5",{className:"card-title mb-0",children:[e.jsx("i",{className:"mdi mdi-alert-circle mr-1"}),"Razón de Cancelación"]})}),e.jsx("div",{className:"card-body p-2",children:e.jsx("div",{className:"alert alert-danger mb-0",children:t.cancellation_reason})})]})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header p-2",children:e.jsxs("h5",{className:"card-title mb-0",children:[e.jsx("i",{className:"mdi mdi-clipboard-check mr-1"}),"Estado del Pedido"]})}),e.jsxs("div",{className:"card-body p-2 position-relative",id:"statusSelectContainer",children:[A&&e.jsx("div",{className:"position-absolute d-flex align-items-center justify-content-center",style:{top:0,left:0,right:0,bottom:0,zIndex:1,backgroundColor:"rgba(255, 255, 255, 0.125)",backdropFilter:"blur(2px)",cursor:"not-allowed"},children:e.jsx("div",{className:"spinner-border spinner-border-sm",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})}),e.jsx($e,{label:"Estado actual",dropdownParent:"#statusSelectContainer",minimumResultsForSearch:-1,templateResult:M,templateSelection:M,onChange:s=>ve(s,t),value:(le=t==null?void 0:t.sale)==null?void 0:le.status_id,changeWith:[t],disabled:A||((ie=(ce=t==null?void 0:t.sale)==null?void 0:ce.status)==null?void 0:ie.reversible)==0,children:h.map((s,a)=>e.jsx("option",{value:s.id,"data-status":JSON.stringify(s),children:s.name},a))}),e.jsxs("div",{className:"form-check",style:{cursor:((de=(ne=t==null?void 0:t.sale)==null?void 0:ne.status)==null?void 0:de.reversible)==0?"not-allowed":"pointer"},children:[e.jsx("input",{ref:d,className:"form-check-input",type:"checkbox",id:"notifyClient",defaultChecked:!0,disabled:((me=(oe=t==null?void 0:t.sale)==null?void 0:oe.status)==null?void 0:me.reversible)==0,style:{cursor:((xe=(he=t==null?void 0:t.sale)==null?void 0:he.status)==null?void 0:xe.reversible)==0?"not-allowed":"pointer"}}),e.jsx("label",{className:"form-check-label",htmlFor:"notifyClient",style:{cursor:((ue=(pe=t==null?void 0:t.sale)==null?void 0:pe.status)==null?void 0:ue.reversible)==0?"not-allowed":"pointer"},children:"Notificar al cliente"})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header p-2",children:e.jsxs("h5",{className:"card-title mb-0",children:[e.jsx("i",{className:"mdi mdi-history mr-1"}),"Historial de Estados"]})}),e.jsx("div",{className:"card-body p-2 d-flex flex-column gap-1",style:{maxHeight:"300px",overflowY:"auto"},children:B.length>0?B.map((s,a)=>{const r=h.find(o=>o.id===s.status_id||o.name===s.name),l=(r==null?void 0:r.color)||s.color||"#333";return e.jsxs("article",{className:"border py-1 px-2 ms-3",style:{position:"relative",borderRadius:"16px 4px 4px 16px",backgroundColor:`${l}2e`},children:[e.jsx("i",{className:`${s.icon||(r==null?void 0:r.icon)||"mdi mdi-circle"} left-2`,style:{color:l,position:"absolute",left:"-25px",top:"50%",transform:"translateY(-50%)"}}),e.jsx("b",{style:{color:l},children:s==null?void 0:s.name}),e.jsxs("small",{className:"d-block text-truncate",children:[s==null?void 0:s.user_name," ",s==null?void 0:s.user_lastname]}),e.jsx("small",{className:"d-block text-muted",children:moment(s.created_at).format("YYYY-MM-DD HH:mm")})]},a)}):e.jsxs("div",{className:"text-muted text-center py-2",children:[e.jsx("i",{className:"mdi mdi-information-outline mr-1"}),"Sin historial de estados"]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header p-2",children:e.jsxs("h5",{className:"card-title mb-0",children:[e.jsx("i",{className:"mdi mdi-calendar-check mr-1"}),"Estado de la Reserva"]})}),e.jsxs("div",{className:"card-body p-2",children:[e.jsxs("div",{className:"alert alert-light mb-0 d-flex align-items-center justify-content-between",children:[e.jsx("span",{children:e.jsx("strong",{children:"Estado actual:"})}),e.jsx("span",{className:"badge",style:{backgroundColor:y(t==null?void 0:t.status).bg,color:y(t==null?void 0:t.status).color,fontWeight:"500",fontSize:"0.9rem",padding:"0.35rem 0.65rem"},children:y(t==null?void 0:t.status).label})]}),e.jsxs("small",{className:"text-muted d-block mt-2",children:[e.jsx("i",{className:"mdi mdi-information-outline mr-1"}),"El check-in/check-out se gestiona desde el calendario de disponibilidad de habitaciones."]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header p-2",children:e.jsxs("h5",{className:"card-title mb-0",children:[e.jsx("i",{className:"mdi mdi-clock-outline mr-1"}),"Información de Registro"]})}),e.jsx("div",{className:"card-body p-2",children:e.jsx("table",{className:"table table-sm table-borderless mb-0",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Creado:"})}),e.jsx("td",{children:E(t==null?void 0:t.created_at)})]}),(t==null?void 0:t.confirmed_at)&&e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Confirmado:"})}),e.jsx("td",{children:E(t==null?void 0:t.confirmed_at)})]}),(t==null?void 0:t.cancelled_at)&&e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Cancelado:"})}),e.jsx("td",{children:E(t==null?void 0:t.cancelled_at)})]})]})})})]})]})]})})]})};Be((h,i)=>{Ce.createRoot(h).render(e.jsx(_e,{...i,title:"Reservas de Hotel",children:e.jsx(He,{...i})}))});
