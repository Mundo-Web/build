import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as i}from"./index-BOnQTV8N.js";import{t as L}from"./MobileMenu-CbySVH7I.js";import{B as _}from"./BasicRest-DJtN-L6Q.js";import{T as E}from"./tag-Dgi-uTqk.js";import{C as T}from"./chevron-up-Mt3xll-e.js";import{C as P}from"./chevron-down-uIVDLcM-.js";import{c as F}from"./createLucideIcon-DfjclApS.js";import{X as M}from"./x-fof_H3Vv.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./main-B6F2O9-U.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./CardProductMultivet-ncpmQ0JU.js";import"./index-pSueRYGM.js";import"./index-B6ujFmsw.js";/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=F("PawPrint",[["circle",{cx:"11",cy:"4",r:"2",key:"vol9p0"}],["circle",{cx:"18",cy:"8",r:"2",key:"17gozi"}],["circle",{cx:"20",cy:"16",r:"2",key:"1v9bxh"}],["path",{d:"M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z",key:"1ydw1z"}]]),Z=({pages:y=[],items:N,data:x,visible:p=!1})=>{const[d,h]=i.useState(!1),[l,C]=i.useState([]),[m,b]=i.useState(0),[g,k]=i.useState([]),[$,v]=i.useState(!1),u=i.useRef(null);i.useEffect(()=>{function s(t){u.current&&!u.current.contains(t.target)&&h(!1)}return document.addEventListener("pointerdown",s),()=>document.removeEventListener("pointerdown",s)},[]),i.useEffect(()=>{if(d&&window.innerWidth>=1024){const s=window.scrollY,t=window.innerWidth-document.documentElement.clientWidth;return document.documentElement.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top=`-${s}px`,document.body.style.left="0",document.body.style.right="0",document.body.style.width="100%",document.body.style.overflow="hidden",t>0&&(document.body.style.paddingRight=`${t}px`),()=>{document.documentElement.style.overflow="",document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.width="",document.body.style.overflow="",document.body.style.paddingRight="",window.scrollTo(0,s)}}},[d]),i.useEffect(()=>{(async()=>{try{console.log("Fetching active tags...");const t=await L.getTags();if(console.log("Tags response:",t),t!=null&&t.data){const a=t.data.filter(o=>o.promotional_status==="permanent"||o.promotional_status==="active"&&o.menu==="1"||o.menu===1).sort((o,n)=>o.promotional_status==="active"&&n.promotional_status!=="active"?-1:n.promotional_status==="active"&&o.promotional_status!=="active"?1:o.name.localeCompare(n.name));C(a),console.log("Active tags set:",a);const c=a.filter(o=>o.promotional_status==="active").length,r=a.filter(o=>o.promotional_status==="permanent").length;if(console.log(`🎯 Tags cargados: ${c} promocionales activos, ${r} permanentes`),c>0){const o=a.filter(n=>n.promotional_status==="active");console.log("🎉 Promociones activas:",o.map(n=>`${n.name} (${n.start_date} - ${n.end_date})`))}}}catch(t){console.error("Error fetching tags:",t)}})()},[]),i.useEffect(()=>{if(l.length>2&&window.innerWidth<1024){const s=setInterval(()=>{b(t=>{const a=t+2;return a>=l.length?0:a})},3e3);return()=>clearInterval(s)}},[l.length]),i.useEffect(()=>{(async()=>{v(!0);try{const t=new _;t.path="items",t.is_use_notify=!1;const a=await t.paginate({take:3,skip:0,filter:[["status","=",1],"and",["featured","=",1]],sort:[{selector:"created_at",desc:!0}],requireTotalCount:!1,with:"category,brand"});console.log("Featured products response:",a),(a==null?void 0:a.status)===200&&Array.isArray(a.data)?(k(a.data),console.log("Featured products set:",a.data)):console.log("No featured products found or invalid response:",a)}catch(t){console.error("Error fetching featured products:",t)}finally{v(!1)}})()},[]);const f=window.innerWidth<1024,j=f?p&&l.length>0:!0,w=l.length>0&&f&&p;return console.log("items",x),console.log("tags",l),console.log("isMobile",f),console.log("shouldShowMenu",j),j?e.jsxs(e.Fragment,{children:[d&&e.jsx("div",{className:"fixed inset-0 bg-black/40 z-40",style:{top:u.current?u.current.offsetTop+u.current.offsetHeight:"0"},onClick:()=>h(!1)}),e.jsx("nav",{className:`${w?" block w-full relative md:block bg-white font-paragraph text-sm":" relative w-full md:block bg-white font-paragraph text-sm"}`,ref:u,children:e.jsx("div",{className:"px-primary  2xl:px-0 2xl:max-w-7xl mx-auto",children:e.jsx("ul",{className:"flex items-center gap-4 lg:gap-6 text-sm justify-between",children:w?e.jsx("div",{className:"w-full py-3 px-4",children:e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3 h-10",children:[l.slice(m,m+2).map((s,t)=>{const a=m+t;return e.jsxs("a",{href:`/catalogo?tag=${s.id}`,className:"group relative border-white border-2 overflow-hidden rounded-full shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-[1.02]",style:{background:`linear-gradient(135deg, ${s.background_color||"#3b82f6"}, ${s.background_color||"#3b82f6"}dd)`},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent"}),e.jsx("div",{className:"relative h-full flex items-center justify-center p-3",children:e.jsxs("div",{className:"flex items-center gap-2 text-center",children:[s.icon?e.jsx("img",{src:`/storage/images/tag/${s.icon}`,alt:s.name,className:"w-6 h-6 object-contain filter brightness-0 invert",onError:c=>c.target.src="/api/cover/thumbnail/null"}):e.jsx(E,{size:20,style:{color:s.text_color||"#ffffff"}}),e.jsx("span",{className:"text-xs font-semibold leading-tight",style:{color:s.text_color||"#ffffff"},children:s.name})]})}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-all duration-300"})]},`${s.id}-${a}`)}),l.slice(m,m+2).length<2&&e.jsx("div",{className:"rounded-2xl bg-white/10 flex items-center justify-center",children:e.jsx("div",{className:"text-white/50 text-xs",children:"Más próximamente"})})]}),l.length>2&&e.jsx("div",{className:"flex justify-center mt-2 gap-1",children:Array.from({length:Math.ceil(l.length/2)}).map((s,t)=>e.jsx("button",{onClick:()=>b(t*2),className:`w-2 h-2 rounded-full transition-all duration-300 ${Math.floor(m/2)===t?"bg-primary shadow-lg":"bg-neutral-light hover:bg-white/60"}`},t))})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("ul",{className:"flex items-center gap-4 lg:gap-6 text-base",children:[(x==null?void 0:x.showCategories)&&e.jsxs("li",{className:"relative py-3",children:[e.jsxs("button",{className:"font-semibold customtext-neutral-dark flex items-center gap-2 hover:customtext-primary pr-6 transition-colors duration-300 relative  ",onClick:()=>h(!d),children:["Categorías",d?e.jsx(T,{size:20}):e.jsx(P,{size:20})]}),d&&e.jsx("div",{className:"absolute z-50 top-14 left-0 bg-white shadow-2xl border border-gray-100 rounded-2xl transition-all duration-500 ease-in-out w-[90vw] max-w-6xl overflow-hidden",children:e.jsxs("div",{className:"max-h-[calc(100vh-13rem)] overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:[e.jsx("div",{className:"bg-gray-50 p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-primary text-white rounded-full flex items-center justify-center shadow-lg",children:e.jsx(S,{})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold customtext-primary mb-1",children:"Catálogo de Productos"}),e.jsx("p",{className:"customtext-neutral-dark",children:"Encuentra todo lo que necesitas para el cuidado de tu mascota"})]})]}),e.jsx("button",{onClick:()=>h(!1),className:"p-2 customtext-primary hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(M,{})})]})}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[...N].sort((s,t)=>s.name.localeCompare(t.name)).map((s,t)=>{var a,c;return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-lg transition-all duration-300 hover:scale-105 group",children:[e.jsxs("div",{className:"w-full h-24 bg-gray-50 rounded-lg mb-3 overflow-hidden relative",children:[s.image?e.jsx("img",{src:`/storage/images/category/${s.image}`,alt:s.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300",onError:r=>{r.target.style.display="none",r.target.nextSibling.style.display="flex"}}):null,e.jsx("div",{className:`w-full h-full flex items-center justify-center text-3xl customtext-neutral-dark ${s.image?"hidden":"flex"}`,children:s.name.toLowerCase().includes("perro")||s.name.toLowerCase().includes("dog")?"🐕":s.name.toLowerCase().includes("gato")||s.name.toLowerCase().includes("cat")?"🐱":s.name.toLowerCase().includes("ave")||s.name.toLowerCase().includes("bird")?"🐦":s.name.toLowerCase().includes("pez")||s.name.toLowerCase().includes("fish")?"🐠":s.name.toLowerCase().includes("alimento")||s.name.toLowerCase().includes("food")?"🍖":s.name.toLowerCase().includes("juguete")||s.name.toLowerCase().includes("toy")?"🎾":s.name.toLowerCase().includes("salud")||s.name.toLowerCase().includes("health")?"💊":s.name.toLowerCase().includes("higiene")||s.name.toLowerCase().includes("clean")?"🧼":"🐾"})]}),e.jsx("a",{href:`/catalogo?category=${s.slug}`,className:"block customtext-primary font-bold text-base mb-2 hover:customtext-secondary transition-colors duration-300",children:s.name}),e.jsxs("div",{className:"space-y-1",children:[(a=s.subcategories)==null?void 0:a.slice(0,4).map((r,o)=>e.jsxs("a",{href:`/catalogo?subcategory=${r.slug}`,className:"flex items-center gap-2 p-2 hover:bg-gray-50 rounded-lg transition-all duration-200 group",children:[e.jsxs("div",{className:"w-6 h-6 bg-gray-100 rounded flex items-center justify-center flex-shrink-0",children:[r.image?e.jsx("img",{src:`/storage/images/subcategory/${r.image}`,alt:r.name,className:"w-full h-full object-cover rounded",onError:n=>{n.target.style.display="none",n.target.nextSibling.style.display="flex"}}):null,e.jsx("span",{className:`text-xs customtext-neutral-dark ${r.image?"hidden":"flex"}`,children:r.name.toLowerCase().includes("collar")?"🦴":r.name.toLowerCase().includes("correa")?"🎗️":r.name.toLowerCase().includes("cama")?"🛏️":r.name.toLowerCase().includes("bowl")||r.name.toLowerCase().includes("plato")?"🥣":r.name.toLowerCase().includes("shampoo")?"🧴":"•"})]}),e.jsx("span",{className:"text-sm customtext-neutral-dark hover:customtext-secondary transition-colors line-clamp-1",children:r.name})]},o)),((c=s.subcategories)==null?void 0:c.length)>4&&e.jsxs("a",{href:`/catalogo?category=${s.slug}`,className:"block text-xs customtext-primary hover:customtext-secondary transition-colors pl-2 font-medium mt-2",children:["Ver ",s.subcategories.length-4," más..."]})]})]},t)})})}),g.length>0&&e.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[e.jsxs("h4",{className:"text-xl font-bold customtext-primary mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:"⭐"}),"Productos Destacados"]}),$?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"flex items-center gap-2 customtext-neutral-dark",children:[e.jsx("div",{className:"w-6 h-6 border-2 border-pink-400 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Cargando productos destacados..."})]})}):g.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:g.map(s=>e.jsxs("a",{href:s.slug?`/product/${s.slug}`:`/catalogo?search=${encodeURIComponent(s.name)}`,className:"group bg-gradient-to-br from-white via-orange-50 to-pink-50 border-2 border-orange-200 rounded-2xl p-6 hover:shadow-2xl hover:border-orange-400 transition-all duration-300 transform hover:scale-105 hover:-translate-y-2",children:[e.jsxs("div",{className:"w-full h-48 bg-gradient-to-br from-orange-100 via-pink-100 to-purple-100 rounded-xl mb-4 overflow-hidden relative border-2 border-orange-200",children:[s.image?e.jsx("img",{src:`/api/items/media/${s.image}`,alt:s.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500",onError:t=>{t.target.style.display="none",t.target.nextSibling.style.display="flex"}}):null,e.jsx("div",{className:`absolute inset-0 flex items-center justify-center text-6xl ${s.image?"hidden":"flex"}`,children:"🎁"}),e.jsx("div",{className:"absolute top-3 right-3 bg-gradient-to-r from-yellow-400 to-orange-400 text-white px-3 py-2 rounded-full text-xs font-bold shadow-lg",children:"⭐ ¡Favorito!"}),e.jsx("div",{className:"absolute top-3 left-3 bg-green-400 text-white px-3 py-2 rounded-full text-xs font-bold shadow-lg",children:"✅ Garantizado"})]}),e.jsx("h5",{className:"font-bold customtext-primary mb-3 group-hover:text-orange-600 transition-colors text-lg leading-snug",children:s.name}),e.jsxs("div",{className:"bg-white/80 rounded-lg p-3 mb-3 border border-orange-200",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs customtext-neutral-dark mb-1",children:[e.jsx("span",{children:"🐾"}),e.jsx("span",{className:"font-medium",children:"Beneficios:"})]}),e.jsx("p",{className:"text-xs text-gray-700",children:"✓ Calidad premium ✓ Seguro para mascotas ✓ Resultados garantizados"})]}),s.category&&e.jsxs("p",{className:"text-sm text-orange-600 mb-3 font-medium",children:["📂 ",s.category.name]}),e.jsxs("div",{className:"flex items-center justify-between",children:[s.final_price?e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"text-lg font-bold text-pink-600",children:["S/ ",parseFloat(s.final_price).toFixed(2)]}),s.price&&s.price!==s.final_price&&e.jsxs("span",{className:"text-sm text-gray-400 line-through",children:["S/ ",parseFloat(s.price).toFixed(2)]})]}):e.jsx("span",{className:"text-lg font-bold customtext-neutral-dark",children:"Consultar precio"}),e.jsxs("div",{className:"flex items-center gap-1 text-pink-500 group-hover:translate-x-1 transition-transform",children:[e.jsx("span",{className:"text-sm font-medium",children:"Ver más"}),e.jsx("span",{children:"→"})]})]})]},s.id))}):e.jsxs("div",{className:"text-center py-8 customtext-neutral-dark",children:[e.jsx("div",{className:"text-4xl mb-2",children:"🎁"}),e.jsx("p",{children:"No hay productos destacados disponibles"})]})]})]})]})})]}),y.filter(s=>s.menuable).map((s,t,a)=>e.jsx("li",{className:"py-3",children:e.jsx("a",{href:s.path,className:"font-semibold hover:customtext-primary cursor-pointer transition-all duration-300",children:s.name})},t))]}),l.length>0&&e.jsx("div",{className:"flex items-center gap-4 lg:gap-4 text-sm",children:l.map((s,t)=>e.jsx("li",{className:"",children:e.jsxs("a",{href:`/catalogo?tag=${s.id}`,className:"font-medium rounded-full p-2 hover:brightness-105 cursor-pointer transition-all duration-300 relative flex items-center gap-2",style:{backgroundColor:s.background_color||"#3b82f6",color:s.text_color||"#ffffff"},title:s.description||s.name,children:[s.icon&&e.jsx("img",{src:`/storage/images/tag/${s.icon}`,alt:s.name,className:"w-4 h-4",onError:a=>a.target.src="/api/cover/thumbnail/null"}),s.name]})},s.id))})]})})})})]}):null};export{Z as default};
