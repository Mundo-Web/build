import{c as e,j as a,r as t}from"./vendor-react-SBvaUJTK.js";import{B as i}from"./Base-BQaY-qII.js";import{A as r}from"./AmenitiesRest-BBCqBxrP.js";import{T as s}from"./Table-Bf8C5yZH.js";import{M as n}from"./Modal-ClgvT3ku.js";import{I as o}from"./ImageFormGroup-DPkM2HLo.js";import{I as l}from"./InputFormGroup-DuKrUAYJ.js";import{T as d}from"./TextareaFormGroup-B0EP8gtW.js";import{S as m}from"./SwitchFormGroup-DGsB37aq.js";import{D as c}from"./DxButton-C6FT_beP.js";import{C as p,F as u}from"./CreateReactScript-BZ6xEkMS.js";import{R as f}from"./ReactAppend-Ix4YwdVY.js";import{S as g}from"./CartKuchara-8a8jAeu-.js";import"./vendor-swiper-Cr_RrIb_.js";import"./Footer-BligNWSa.js";import"./TippyButton-C4KoE0lc.js";import"./Logout-BgttE_VN.js";import"./MenuItemContainer-CwLbZhxp.js";import"./Menu-CqnWUuE2.js";import"./BasicRest-Cgj77E-j.js";import"./OpenPayCardModal-C0HhlOHJ.js";import"./BooleanLimit-q2Ad9fGY.js";import"./General-ClVW7qxN.js";import"./LaravelSession-ByQnaUD3.js";const b=new r,j=()=>{const e=t.useRef(),i=t.useRef(),r=t.useRef(),p=t.useRef(),j=t.useRef(),h=t.useRef(),[x,v]=t.useState(!1),w=e=>{v(!!e?.id),j.current&&j.resetDeleteFlag&&j.resetDeleteFlag(),r.current.value=e?.id??"",p.current.value=e?.name??"",h.current.value=e?.description??"",j.current&&j.image&&(j.image.src=e?.image?`/storage/images/amenity/${e.image}`:"",j.current.value=null),$(i.current).modal("show")};return a.jsxs(a.Fragment,{children:[a.jsx(s,{gridRef:e,title:"Amenidades",rest:b,toolBar:a=>{a.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(e.current).dxDataGrid("instance").refresh()}}),a.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Nueva amenidad",hint:"Nueva amenidad",onClick:()=>w()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"image",caption:"Imagen/Icono",width:"100px",allowFiltering:!1,cellTemplate:(e,{data:t})=>{t.image&&f(e,a.jsx("img",{src:`/storage/images/amenity/${t.image}`,alt:t.name,style:{width:"70px",height:"70px",objectFit:"contain",borderRadius:"4px",padding:"5px",background:"#f8f9fa"},onError:e=>e.target.src="/api/cover/thumbnail/null"}))}},u.has("amenities","name")&&{dataField:"name",caption:"Nombre",width:"30%"},u.has("amenities","description")&&{dataField:"description",caption:"Descripción",width:"40%"},u.has("amenities","slug")&&{dataField:"slug",caption:"Slug",width:"20%"},{dataField:"visible",caption:"Visible",dataType:"boolean",cellTemplate:(t,{data:i})=>{$(t).empty(),f(t,a.jsx(m,{checked:1==i.visible,onChange:()=>(async({id:a,value:t})=>{await b.boolean({id:a,field:"visible",value:t})&&$(e.current).dxDataGrid("instance").refresh()})({id:i.id,value:!i.visible})}))}},{dataField:"status",caption:"Activo",dataType:"boolean",cellTemplate:(t,{data:i})=>{$(t).empty(),f(t,a.jsx(m,{checked:1==i.status,onChange:()=>(async({id:a,value:t})=>{await b.boolean({id:a,field:"status",value:t})&&$(e.current).dxDataGrid("instance").refresh()})({id:i.id,value:!i.status})}))}},{caption:"Acciones",cellTemplate:(a,{data:t})=>{a.css("text-overflow","unset"),a.append(c({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>w(t)})),a.append(c({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>(async a=>{const{isConfirmed:t}=await g.fire({title:"Eliminar amenidad",text:"¿Estás seguro de eliminar esta amenidad?",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"});if(!t)return;await b.delete(a)&&$(e.current).dxDataGrid("instance").refresh()})(t.id)}))},allowFiltering:!1,allowExporting:!1}].filter(e=>!!e&&!("image"===e.dataField&&!u.has("amenities","image")))}),a.jsxs(n,{modalRef:i,title:x?"Editar amenidad":"Nueva amenidad",onSubmit:async a=>{a.preventDefault();const t={id:r.current.value||void 0,name:p.current.value,description:h.current.value},s=new FormData;for(const e in t)s.append(e,t[e]);if(j.current){const e=j.current.files[0];e&&s.append("image",e),j.getDeleteFlag&&j.getDeleteFlag()&&s.append("image_delete","DELETE")}await b.save(s)&&(j.current&&j.resetDeleteFlag&&j.resetDeleteFlag(),$(e.current).dxDataGrid("instance").refresh(),$(i.current).modal("hide"))},size:"md",children:[a.jsx("input",{ref:r,type:"hidden"}),a.jsxs("div",{className:"row",id:"amenities-container",children:[a.jsxs("div",{className:"col-md-5",children:[a.jsx(o,{eRef:j,name:"image",label:"Imagen/Icono",aspect:1,required:!0}),a.jsxs("small",{className:"text-muted mb-3",children:[a.jsx("i",{className:"fas fa-info-circle me-1"}),"formato cuadrado, PNG con fondo transparente"]})]}),a.jsxs("div",{className:"col-md-7",children:[a.jsx(l,{eRef:p,label:"Nombre",required:!0}),a.jsx(d,{eRef:h,label:"Descripción",rows:3,hidden:!u.has("amenities","description")})]})]})]})]})};p((t,r)=>{e.createRoot(t).render(a.jsx(i,{...r,title:"Amenidades",children:a.jsx(j,{...r})}))});
