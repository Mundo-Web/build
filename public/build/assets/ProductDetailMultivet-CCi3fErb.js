import{r as e,bD as t,bJ as s,bK as a,bL as r,bM as l,bE as i,bF as n,bG as o,bH as c,j as d,bV as m,bS as x,ap as h,ag as u,J as p,aZ as f,C as g,aA as b,bz as j,w as v,bW as y,bI as w,X as N,aI as k}from"./vendor-react-CtPXetfm.js";import"./vendor-swiper-Cr_RrIb_.js";import{t as C}from"./OpenPayCardModal-Dy4WIZ0X.js";import{I as M}from"./ItemsRest-BWs_Glww.js";import"./ProductDetailB-SK_tZlp9.js";import{G as F}from"./General-ClVW7qxN.js";import E from"./ProductMultivet-D2y0MHbC.js";import{A as _,m as S}from"./vendor-motion-CThzL09Q.js";import"./BasicRest-DpoFkM_z.js";import"./BooleanLimit-q2Ad9fGY.js";import"./CartKuchara-CLqHnhL7.js";import"./CartModal-D1PZOJvB.js";import"./CartItemRow-BsuK_3Dc.js";import"./Number2Currency-BX4epFEo.js";import"./Footer-coriRrmf.js";import"./CardProductMultivet-BO__zhEa.js";import"./CardProductKatya-CastNWhI.js";import"./CardProductBananaLab-SsBfPo_Z.js";import"./CartModalBananaLab-DhRmBLoO.js";import"./TippyButton-Dqi9Vaf_.js";const P=({item:P,data:$,setCart:A,cart:q,generals:z,favorites:R,setFavorites:D,onViewUpdate:I})=>{const B=new M,[L,O]=e.useState({url:P?.image,type:"main"}),[T,H]=e.useState(!1),[W,V]=e.useState({x:50,y:50}),[X,Y]=e.useState(!1),[G,U]=e.useState({x:0,y:0}),K=e.useRef(null),[J,Z]=e.useState(1),[Q,ee]=e.useState([]),[te,se]=e.useState(!1),[ae,re]=e.useState(!1),[le,ie]=e.useState(!1),ne=e.useRef(null),oe=e.useRef(null),[ce,de]=e.useState(!1),[me,xe]=e.useState(!1),[he,ue]=e.useState(!1);e.useRef(null),e.useRef(null);const[pe,fe]=e.useState(null),[ge,be]=e.useState(!1),[je,ve]=e.useState("consult"),[ye,we]=e.useState(!1),{refs:Ne,floatingStyles:ke,context:Ce}=t({open:ge&&"quote"===je,onOpenChange:e=>{e&&"quote"!==je||be(e)},placement:"bottom-start",middleware:[a(10),r({fallbackPlacements:["top-start","bottom-end","top-end"]}),l({padding:8})],whileElementsMounted:s}),{refs:Me,floatingStyles:Fe,context:Ee}=t({open:ge&&"quote-mobile"===je,onOpenChange:e=>{e&&"quote-mobile"!==je||be(e)},placement:"top-end",middleware:[a(10),r({fallbackPlacements:["top-start","bottom-end","bottom-start"]}),l({padding:8})],whileElementsMounted:s}),_e=i(Ce),Se=n(Ce),Pe=o(Ce),$e=i(Ee),Ae=n(Ee),qe=o(Ee),{getReferenceProps:ze,getFloatingProps:Re}=c([_e,Se,Pe]),{getReferenceProps:De,getFloatingProps:Ie}=c([$e,Ae,qe]),Be=F.whatsapp_advisors||[],Le=z?.find(e=>"phone_whatsapp"===e.correlative),Oe=Le?.description;e.useEffect(()=>{R&&P&&ie(R.some(e=>e.id===P.id))},[R,P]),e.useEffect(()=>{P?.id&&(I&&I(P),We(P))},[P,I]),e.useEffect(()=>{const e=setTimeout(()=>{if(ne.current){const e=ne.current.scrollHeight>150;de(e)}if(oe.current){const e=oe.current.scrollHeight>150;xe(e)}},100);return()=>clearTimeout(e)},[P,P?.specifications]);const Te=e=>{if(T&&!X){const t=K.current.getBoundingClientRect(),s=(e.clientX-t.left)/t.width*100,a=(e.clientY-t.top)/t.height*100;V({x:Math.max(0,Math.min(100,s)),y:Math.max(0,Math.min(100,a))})}else if(X&&T){const t=e.clientX-G.x,s=e.clientY-G.y;V(e=>({x:Math.max(0,Math.min(100,e.x-t/3)),y:Math.max(0,Math.min(100,e.y-s/3))})),U({x:e.clientX,y:e.clientY})}},He=()=>{Y(!1)};e.useEffect(()=>{if(X)return document.addEventListener("mousemove",Te),document.addEventListener("mouseup",He),()=>{document.removeEventListener("mousemove",Te),document.removeEventListener("mouseup",He)}},[X,T,G]);const We=async e=>{try{const t={id:e?.id},s=await B.productsRelations(t);if(!s)return void ee([]);const a=s,r=Object.values(a);ee(r)}catch(t){ee([])}},Ve=e=>{const t=`https://wa.me/${e?.phone||Oe}?text=${encodeURIComponent(`¡Hola! Me gustaría cotizar este producto: ${P?.name}\n\nCantidad: ${J} unidades\n\n¿Podrían enviarme más información y precios?`)}`;window.open(t,"_blank"),be(!1)},Xe=e=>{if(!q||!A)return void C.error("Error al agregar al carrito");const t=structuredClone(q),s=t.findIndex(t=>t.id==e?.id);-1==s?t.push({...e,quantity:J}):t[s].quantity+=J,A(t),C.success("Producto agregado al carrito",{description:`${e?.name} (${J} ${1===J?"unidad":"unidades"})`,duration:2e3})},Ye=e=>e?new Intl.NumberFormat("es-PE",{style:"currency",currency:"PEN",minimumFractionDigits:2}).format(e):"Consultar precio",Ge=P?.price&&P?.final_price&&parseFloat(P.price)>parseFloat(P.final_price),Ue=Ge?Math.round((parseFloat(P.price)-parseFloat(P.final_price))/parseFloat(P.price)*100):0,Ke=P?.final_price&&parseFloat(P.final_price)>0||P?.price&&parseFloat(P.price)>0,Je=q?.find(e=>e.id==P?.id),Ze=Je?.quantity||0,Qe=[{url:P?.image,type:"main",alt:"Imagen principal"},...(P?.images||[]).filter((e,t,s)=>t===s.findIndex(t=>t.url===e.url)).map((e,t)=>({url:e.url,type:"gallery",index:t,alt:`Imagen ${t+1}`}))];return d.jsxs("div",{id:$?.element_id||null,className:"bg-gray-50 min-h-screen overflow-x-hidden",children:[d.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4 lg:py-8",children:[d.jsxs("div",{className:"grid lg:grid-cols-2 gap-6 lg:gap-12",children:[d.jsxs("div",{className:"space-y-3 lg:space-y-4",children:[d.jsxs("div",{className:"relative bg-white rounded-lg shadow-lg overflow-hidden",children:[d.jsxs("div",{className:"aspect-square flex items-center justify-center p-4 lg:p-8 relative "+(T?"cursor-zoom-out":"cursor-zoom-in"),onClick:()=>{T?(H(!1),V({x:50,y:50})):H(!0)},onMouseDown:e=>{T&&(Y(!0),U({x:e.clientX,y:e.clientY}))},onMouseMove:Te,onMouseLeave:()=>{Y(!1)},children:[d.jsx("img",{ref:K,src:L.url?`/storage/images/item/${L.url}`:"/api/cover/thumbnail/null",alt:P?.name||"Producto",className:"w-full h-full object-contain transition-transform duration-300 "+(T?"scale-150":"scale-100"),style:T?{transformOrigin:`${W.x}% ${W.y}%`}:{},onError:e=>{e.target.src="/api/cover/thumbnail/null"}}),d.jsx("div",{className:"absolute top-4 left-4 bg-black bg-opacity-50 text-white px-2 py-2 rounded text-sm",children:T?d.jsx(m,{className:"w-4 h-4"}):d.jsx(x,{className:"w-4 h-4"})})]}),d.jsxs("div",{className:"absolute top-4 right-4 space-y-2",children:[Ge&&d.jsxs("div",{className:"bg-red-500 text-white px-3 py-2 rounded-full text-sm font-bold",children:["-",Ue,"% OFF"]}),P?.is_new&&d.jsx("div",{className:"bg-accent customtext-primary px-3 py-2 rounded-full text-sm font-bold",children:"¡Nuevo!"})]}),d.jsx("div",{className:"absolute bottom-4 right-4 flex space-x-2",children:d.jsx("button",{onClick:()=>{navigator.share?.({title:P?.name,text:P?.description,url:window.location.href})||navigator.clipboard.writeText(window.location.href),C.success("Enlace copiado al portapapeles")},className:"w-10 h-10 bg-secondary  backdrop-blur-sm rounded-full flex items-center justify-center hover:bg-opacity-100 transition-all shadow-lg",children:d.jsx(h,{className:"w-5 h-5 text-white"})})})]}),Qe.length>1&&d.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-5 gap-2",children:Qe.map((e,t)=>d.jsx("button",{onClick:()=>O(e),className:"aspect-square bg-white rounded-lg overflow-hidden border-2 transition-all hover:border-primary "+(L.url===e.url?"border-primary":"border-gray-200"),children:d.jsx("img",{src:`/storage/images/item/${e.url}`,alt:e.alt,className:"w-full h-full object-contain p-2",onError:e=>{e.target.src="/api/cover/thumbnail/null"}})},t))})]}),Ke&&d.jsx("div",{className:"lg:hidden ",children:d.jsxs("div",{className:"text-start",children:[d.jsx("div",{className:"text-3xl sm:text-4xl font-bold font-title customtext-neutral-dark",children:Ye(P?.final_price||P?.price)}),Ge&&d.jsxs("div",{className:"flex items-center justify-start space-x-2 mt-2",children:[d.jsx("span",{className:"text-base customtext-neutral-light line-through",children:Ye(P.price)}),d.jsxs("span",{className:"bg-red-100 customtext-secondary px-2 py-1 rounded-full text-xs font-bold",children:["Ahorras ",Ye(parseFloat(P.price)-parseFloat(P.final_price))]})]})]})}),d.jsxs("div",{className:"space-y-4 lg:space-y-6 pb-20 lg:pb-0",children:[d.jsxs("div",{className:"flex flex-row  items-center justify-between gap-3",children:[P?.category&&d.jsx("span",{className:`bg-accent bg-opacity-10 customtext-primary font-bold px-3 py-1 sm:px-4 sm:py-2 rounded-full text-xs sm:text-sm ${$?.class_badge_category}`,children:P.category.name}),P?.brand&&d.jsx("img",{src:P.brand.image?`/api/brands/media/${P.brand.image}`:"/assets/img/noimage/no_img.jpg",alt:P.brand.name||"Marca",className:"max-h-12 sm:max-h-16 lg:max-h-20 max-w-24 lg:max-w-40 object-contain",onError:e=>{e.target.src="/assets/img/noimage/no_img.jpg"}})]}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl xl:text-4xl font-title font-bold customtext-neutral-dark mb-3",children:P?.name}),d.jsx("div",{className:"flex items-center space-x-4 mb-4",children:P?.rating&&d.jsxs("div",{className:"flex items-center space-x-1",children:[(e=>{const t=parseFloat(e)||0;return Array.from({length:5},(e,s)=>d.jsx(k,{className:"w-4 h-4 "+(s<Math.floor(t)?"text-yellow-400 fill-current":"text-gray-300")},s))})(P.rating),d.jsxs("span",{className:"text-sm text-gray-600 ml-2",children:["(",parseFloat(P.rating).toFixed(1),")"]})]})})]}),d.jsx("div",{className:" ",children:P?.description&&d.jsx("div",{ref:ne,className:"prose max-w-none customtext-neutral-light transition-all duration-300 ",dangerouslySetInnerHTML:{__html:P?.description||"<p>Sin descripción disponible.</p>"}})}),P?.specifications&&Array.isArray(P.specifications)&&P.specifications.length>0&&d.jsxs("div",{className:"",children:[d.jsx("div",{ref:oe,className:"space-y-3 transition-all duration-300 "+(ae?"":"max-h-40 overflow-hidden"),children:P.specifications.map((e,t)=>"general"===e.type&&d.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[d.jsx(u,{className:"customtext-secondary w-4 h-4 flex-shrink-0"}),d.jsxs("span",{className:"font-bold customtext-neutral-dark",children:[e.title||"Especificación",":"]}),d.jsx("span",{className:"customtext-neutral-light",children:e.description||e.value||"No especificado"})]},t))}),me&&d.jsxs("button",{onClick:()=>re(!ae),className:"mt-4 customtext-secondary hover:customtext-neutral-dark font-medium transition-colors flex items-center gap-2 text-sm",children:[ae?"Ver menos":"Ver más características",d.jsx(p,{className:"w-4 h-4 transform transition-transform "+(ae?"rotate-90":"")})]})]}),P?.pdf&&Array.isArray(P.pdf)&&P.pdf.length>0&&d.jsxs("div",{className:"relative hidden lg:flex justify-end mt-4",children:[d.jsxs("button",{onClick:()=>we(!ye),className:"bg-white border-2 border-primary text-primary py-3 px-5 rounded-xl font-bold flex items-center gap-2 hover:bg-primary hover:text-white transition-all shadow-md hover:shadow-lg",children:[d.jsx(f,{className:"w-5 h-5"}),d.jsx("span",{className:"text-sm",children:"Fichas Técnicas"}),d.jsx(g,{className:"w-4 h-4 transition-transform duration-300 "+(ye?"rotate-180":"")})]}),ye&&d.jsx("div",{className:"fixed inset-0 z-[9998]",onClick:()=>we(!1)}),ye&&d.jsxs("div",{className:"absolute top-full right-0 min-w-[300px] mt-2 bg-white rounded-xl shadow-2xl border border-gray-100 overflow-hidden z-[9999]",children:[d.jsxs("div",{className:"bg-primary p-3 text-white",children:[d.jsx("h4",{className:"font-bold text-sm",children:"Documentos disponibles"}),d.jsxs("p",{className:"text-xs text-white opacity-90 mt-0.5",children:[P.pdf.length," ",1===P.pdf.length?"archivo":"archivos"]})]}),d.jsx("div",{className:"max-h-64 overflow-y-auto",children:P.pdf.map((e,t)=>d.jsxs("a",{href:`/storage/images/item/${e.url||e}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-3 hover:bg-gray-50 transition-colors border-b last:border-b-0 group",children:[d.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center group-hover:bg-red-200 transition-colors",children:d.jsx(f,{className:"w-5 h-5 text-red-600"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"font-semibold customtext-neutral-dark text-sm truncate",children:e.name||("string"==typeof e?e.split("/").pop().replace(".pdf",""):"Documento")}),d.jsx("p",{className:"text-xs text-gray-400",children:"Documento PDF"})]}),d.jsx(b,{className:"w-4 h-4 text-gray-400 group-hover:text-primary transition-colors"})]},t))})]})]}),P?.pdf&&Array.isArray(P.pdf)&&P.pdf.length>0&&d.jsxs("div",{className:"lg:hidden bg-white rounded-2xl shadow-sm overflow-hidden mt-6 max-w-full",children:[d.jsx("div",{className:"border-b",children:d.jsxs("button",{onClick:()=>we(!ye),className:"w-full p-4 flex justify-between items-center",children:[d.jsxs("span",{className:"font-medium",children:["Fichas Técnicas (",P.pdf.length,")"]}),d.jsx(g,{className:"transform transition-transform "+(ye?"rotate-180":"")})]})}),ye&&d.jsx("div",{className:"p-4 space-y-2 max-w-full",children:P.pdf.map((e,t)=>d.jsxs("a",{href:`/storage/images/item/${e.url||e}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-3 w-full border border-gray-200 rounded-xl hover:border-primary hover:shadow-md transition-all group max-w-full",children:[d.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center group-hover:bg-red-200 transition-colors",children:d.jsx(f,{className:"w-5 h-5 text-red-600"})}),d.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",children:[d.jsx("p",{className:"font-semibold customtext-neutral-dark text-sm truncate break-words",children:e.name||("string"==typeof e?e.split("/").pop().replace(".pdf",""):"Documento")}),d.jsx("p",{className:"text-xs cusomtext-neutral-light",children:"Documento PDF"})]}),d.jsx(b,{className:"w-4 h-4 flex-shrink-0 text-gray-400 group-hover:text-primary transition-colors"})]},t))})]}),d.jsxs("div",{className:"hidden lg:block bg-white rounded-lg p-6 shadow-xl",children:[Ke&&d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-4xl font-bold font-title customtext-neutral-dark",children:Ye(P?.final_price||P?.price)}),Ge&&d.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[d.jsx("span",{className:"text-lg customtext-neutral-light line-through",children:Ye(P.price)}),d.jsxs("span",{className:"bg-red-100 customtext-secondary px-2 py-1 rounded-full text-sm font-bold",children:["Ahorras ",Ye(parseFloat(P.price)-parseFloat(P.final_price))]})]})]}),d.jsx("div",{className:"space-y-4 mt-4",children:d.jsx("div",{className:"flex items-center gap-3",children:d.jsxs("div",{className:"flex items-center bg-gray-50 rounded-xl border border-gray-200 p-1",children:[d.jsx("button",{onClick:()=>Z(Math.max(1,J-1)),className:"w-10 h-10 flex items-center justify-center rounded-lg hover:bg-white hover:shadow-sm active:scale-95 transition-all duration-200 customtext-neutral-dark font-bold text-xl",disabled:J<=1,children:"−"}),d.jsx("div",{className:"w-16 h-10 flex items-center justify-center",children:d.jsx("span",{className:"customtext-neutral-dark font-bold text-lg",children:J})}),d.jsx("button",{onClick:()=>Z(Math.min(10,J+1)),className:"w-10 h-10 flex items-center justify-center rounded-lg hover:bg-white hover:shadow-sm active:scale-95 transition-all duration-200 customtext-neutral-dark font-bold text-xl",disabled:J>=10,children:"+"})]})})})]}),d.jsxs("div",{className:"space-y-3 mt-6",children:[$?.buyButton&&Ke&&(P?.sold_out?d.jsxs("button",{disabled:!0,className:"w-full py-4 px-6 rounded-xl font-bold flex items-center justify-center space-x-2 bg-danger text-white ",children:[d.jsx(j,{className:"w-5 h-5"}),d.jsx("span",{children:"Agotado"})]}):d.jsxs("button",{onClick:()=>Xe(P),className:"w-full py-4 px-6 rounded-xl font-bold flex items-center justify-center space-x-2 hover:scale-105 transition-all shadow-lg hover:shadow-xl transform duration-500 "+(Je?"bg-accent text-white":"bg-primary text-white"),children:[d.jsx(v,{className:"w-5 h-5"}),d.jsx("span",{children:Je?`En carrito (${Ze})`:"Comprar ahora"})]})),d.jsxs("button",{ref:Ne.setReference,...ze(),onClick:e=>{e.preventDefault(),e.stopPropagation(),Be&&Be.length>1?(ve("quote"),be(!ge)):Ve(Be?.[0]||{phone:Oe})},className:"w-full py-4 px-6 rounded-xl font-bold flex items-center justify-center space-x-2 hover:scale-105 transition-all shadow-lg hover:shadow-xl transform duration-500  bg-secondary text-white\n                                            ",children:[d.jsx(y,{className:"w-5 h-5"}),d.jsx("span",{children:"Solicitar Cotización"})]}),ge&&"quote"===je&&Be&&Be.length>1&&d.jsx(w,{context:Ce,modal:!1,children:d.jsxs("div",{ref:Ne.setFloating,style:ke,...Re(),className:"bg-white rounded-2xl shadow-2xl overflow-hidden border border-gray-100 z-[1000]",children:[d.jsxs("div",{className:"bg-primary p-4 text-white",children:[d.jsx("h3",{className:"font-bold text-base",children:"Elige un asesor"}),d.jsx("p",{className:"text-xs text-white mt-1",children:"¿Con quién quieres cotizar?"})]}),d.jsx("div",{className:"max-h-[400px] overflow-y-auto",style:{minWidth:"280px",maxWidth:"320px"},children:Be.map((e,t)=>d.jsxs("button",{onClick:()=>Ve(e),className:"w-full flex items-center gap-3 p-3 hover:bg-gray-50 transition-colors border-b border-gray-100 last:border-b-0 text-left",children:[d.jsx("div",{className:"flex-shrink-0",children:d.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden border-2 border-primary",children:e.photo?d.jsx("img",{src:`/assets/resources/${e.photo}`,alt:e.name,className:"w-full h-full object-cover",onError:e=>{e.target.src="/assets/img/placeholder-user.png"}}):d.jsx("div",{className:"w-full h-full bg-gradient-to-br from-green-400 to-green-600 flex items-center justify-center text-white text-lg font-bold",children:e.name?.charAt(0).toUpperCase()})})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"font-semibold customtext-neutral-dark text-sm truncate",children:e.name}),d.jsx("p",{className:"text-xs cusomtext-neutral-light truncate",children:e.position||"Asesor"})]}),d.jsx("div",{className:"flex-shrink-0",children:d.jsx("svg",{className:"w-5 h-5 text-green-500",fill:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.892 3.386"})})})]},t))})]})})]})]})]})]}),Q&&Q.length>0&&d.jsx(E,{items:Q,data:$,setCart:A,cart:q,favorites:R,setFavorites:D})]}),d.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-4 z-40 shadow-lg",children:d.jsxs("div",{className:"flex items-center gap-3",children:[Ke&&d.jsxs("div",{className:"flex items-center bg-gray-50 rounded-xl border border-gray-200 p-1",children:[d.jsx("button",{onClick:()=>Z(Math.max(1,J-1)),className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-white hover:shadow-sm active:scale-95 transition-all duration-200 customtext-neutral-dark font-bold text-lg",disabled:J<=1,children:"−"}),d.jsx("div",{className:"w-12 h-8 flex items-center justify-center",children:d.jsx("span",{className:"customtext-neutral-dark font-bold text-sm",children:J})}),d.jsx("button",{onClick:()=>Z(Math.min(10,J+1)),className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-white hover:shadow-sm active:scale-95 transition-all duration-200 customtext-neutral-dark font-bold text-lg",disabled:J>=10,children:"+"})]}),$?.buyButton&&Ke&&(P?.sold_out?d.jsxs("button",{disabled:!0,className:"flex-1 py-3 px-4 rounded-xl font-bold flex items-center justify-center space-x-2 bg-gray-400 text-white cursor-not-allowed opacity-75",children:[d.jsx(j,{className:"w-4 h-4"}),d.jsx("span",{className:"text-sm",children:"Agotado"})]}):d.jsxs("button",{onClick:()=>Xe(P),className:"flex-1 py-3 px-4 rounded-xl font-bold flex items-center justify-center space-x-2 transition-all shadow-lg active:scale-95 "+(Je?"bg-secondary text-white":"bg-primary customtext-neutral-dark hover:bg-accent"),children:[d.jsx(v,{className:"w-4 h-4"}),d.jsx("span",{className:"text-sm",children:Je?`En carrito (${Ze})`:"Comprar"})]})),d.jsxs("button",{ref:Me.setReference,...De(),onClick:e=>{e.preventDefault(),e.stopPropagation(),Be&&Be.length>1?(ve("quote-mobile"),be(!ge)):Ve(Be?.[0]||{phone:Oe})},className:($?.buyButton&&Ke?"w-auto":"flex-1")+" bg-secondary text-white py-3 px-4 rounded-xl font-bold flex items-center justify-center space-x-2 hover:bg-accent hover:customtext-primary transition-all shadow-lg active:scale-95",children:[d.jsx(y,{className:"w-4 h-4"}),d.jsx("span",{className:"text-sm",children:"Solicitar Cotización"})]}),ge&&"quote-mobile"===je&&Be&&Be.length>1&&d.jsx(w,{context:Ee,modal:!1,children:d.jsxs("div",{ref:Me.setFloating,style:Fe,...Ie(),className:"bg-white rounded-2xl shadow-2xl overflow-hidden border border-gray-100 z-[1000]",children:[d.jsxs("div",{className:"bg-primary p-4 text-white",children:[d.jsx("h3",{className:"font-bold text-base",children:"Elige un asesor"}),d.jsx("p",{className:"text-xs text-white mt-1",children:"¿Con quién quieres cotizar?"})]}),d.jsx("div",{className:"max-h-[400px] overflow-y-auto",style:{minWidth:"280px",maxWidth:"320px"},children:Be.map((e,t)=>d.jsxs("button",{onClick:()=>Ve(e),className:"w-full flex items-center gap-3 p-3 hover:bg-gray-50 transition-colors border-b border-gray-100 last:border-b-0 text-left",children:[d.jsx("div",{className:"flex-shrink-0",children:d.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden border-2 border-primary",children:e.photo?d.jsx("img",{src:`/assets/resources/${e.photo}`,alt:e.name,className:"w-full h-full object-cover",onError:e=>{e.target.src="/assets/img/placeholder-user.png"}}):d.jsx("div",{className:"w-full h-full bg-gradient-to-br from-green-400 to-green-600 flex items-center justify-center text-white text-lg font-bold",children:e.name?.charAt(0).toUpperCase()})})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"font-semibold customtext-neutral-dark text-sm truncate",children:e.name}),d.jsx("p",{className:"text-xs cusomtext-neutral-light truncate",children:e.position||"Asesor"})]}),d.jsx("div",{className:"flex-shrink-0",children:d.jsx("svg",{className:"w-5 h-5 text-green-500",fill:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.892 3.386"})})})]},t))})]})})]})}),d.jsx(_,{children:he&&d.jsx(S.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",onClick:()=>ue(!1),children:d.jsxs(S.div,{initial:{scale:.8},animate:{scale:1},exit:{scale:.8},className:"relative max-w-4xl max-h-full",onClick:e=>e.stopPropagation(),children:[d.jsx("button",{onClick:()=>ue(!1),className:"absolute top-4 right-4 text-white bg-black bg-opacity-50 rounded-full p-2 hover:bg-opacity-75 transition-all z-10",children:d.jsx(N,{className:"w-6 h-6"})}),d.jsx("img",{src:L.url?`/storage/images/item/${L.url}`:"/api/cover/thumbnail/null",alt:P?.name,className:"max-w-full max-h-full object-contain rounded-lg",onError:e=>{e.target.src="/api/cover/thumbnail/null"}})]})})})]})};export{P as default};
