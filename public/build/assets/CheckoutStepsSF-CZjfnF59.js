import{j as e,m as s,r as a,b as t}from"./System-Bybt2Brn.js";import{N as l}from"./Number2Currency-DExzICY3.js";import{B as n,a as r,D as i}from"./DeliveryPricesRest-B14vrbQt.js";import{T as o}from"./trash-2-CDXts6on.js";import{M as c}from"./minus-BhdGy6sP.js";import{P as d}from"./plus-4JHYG4O1.js";import{u as m,S as x}from"./SelectForm-VZyUjjW4.js";import{I as u}from"./InputForm-EZKSO4Do.js";import"./vendor-BiOv2i5T.js";import"./createLucideIcon-oahCLV50.js";import"./chevron-down-r_B4RFE6.js";import"./search--TD4pUuj.js";import"./check-BqyWwvbE.js";const p=({setCart:s,...a})=>{const t=()=>{s((e=>e.filter((e=>e.id!==a.id))))},l=()=>{s((e=>e.map((e=>e.id===a.id?{...e,quantity:(e.quantity||1)+1}:e))))},n=()=>{s((e=>e.map((e=>{if(e.id===a.id){const s=(e.quantity||1)-1;return s<=0?(t(a.id),null):{...e,quantity:s}}return e})).filter(Boolean)))};return e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"hidden md:table-row border-b bg-gray-50 font-font-general",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:`/storage/images/item/${a.image}`,alt:a.name,className:"w-16 h-16 object-cover rounded mr-4"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm 2xl:text-base font-semibold customtext-neutral-dark",children:a.name}),e.jsxs("div",{className:"text-[12px] 2xl:text-sm customtext-neutral-dark space-y-1 mt-1",children:[e.jsx("p",{children:"Color: varios"}),e.jsx("button",{onClick:t,className:" text-red-500 transition-colors duration-200 rounded-full hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-red-200","aria-label":"Remove item",children:e.jsx(o,{size:18})})]})]})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"flex items-center border border-gray-200 rounded-lg overflow-hidden shadow-sm",children:[e.jsx("button",{type:"button",onClick:n,className:"p-2 text-gray-600 hover:bg-gray-100 transition-colors","aria-label":"Decrease quantity",children:e.jsx(c,{size:16})}),e.jsx("div",{className:"w-12 h-8 flex justify-center items-center bg-white",children:e.jsx("span",{className:"font-semibold text-sm",children:a.quantity||1})}),e.jsx("button",{type:"button",onClick:l,className:"p-2 text-gray-600 hover:bg-gray-100 transition-colors","aria-label":"Increase quantity",children:e.jsx(d,{size:16})})]})})}),e.jsxs("td",{className:"px-4 py-4 text-right",children:[e.jsxs("div",{className:"text-xs text-gray-500 line-through",children:["S/ ",Number(a.price).toFixed(2)]}),e.jsxs("div",{className:"font-bold",children:["S/ ",Number(a.final_price).toFixed(2)]})]}),e.jsxs("td",{className:"px-4 py-4 text-right font-bold",children:["S/ ",Number(a.final_price*a.quantity).toFixed(2)]})]},a.id),e.jsx("div",{className:"md:hidden bg-gray-50  rounded-lg shadow p-4 mb-4 w-full font-font-general",children:e.jsxs("div",{className:"flex items-start gap-4 relative",children:[e.jsx("img",{src:`/storage/images/item/${a.image}`,alt:a.name,className:"w-20 h-20 object-cover rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg mb-1 leading-tight customtext-neutral-dark",children:a.name}),e.jsx("p",{className:"text-sm text-gray-500",children:"Color: varios"}),e.jsxs("div",{className:"mt-1 flex flex-col",children:[e.jsxs("div",{className:"flex items-center border border-gray-200 rounded-lg overflow-hidden shadow-sm w-24",children:[e.jsx("button",{onClick:n,className:"p-2 text-gray-600 hover:bg-gray-100",children:e.jsx(c,{size:16})}),e.jsx("div",{className:"w-12 h-8 flex justify-center items-center bg-white",children:e.jsx("span",{className:"font-semibold text-sm",children:a.quantity||1})}),e.jsx("button",{onClick:l,className:"p-2 text-gray-600 hover:bg-gray-100",children:e.jsx(d,{size:16})})]}),e.jsxs("div",{className:"text-right mt-2",children:[e.jsxs("div",{className:"text-xs text-gray-500 line-through",children:["S/ ",Number(a.price).toFixed(2)]}),e.jsxs("div",{className:"font-bold",children:["S/ ",Number(a.final_price).toFixed(2)]}),e.jsxs("div",{className:"text-sm font-bold mt-1",children:["Subtotal: S/ ",Number(a.final_price*a.quantity).toFixed(2)]})]})]})]}),e.jsx("button",{onClick:t,className:"absolute -top-2 -right-2 text-red-500 transition-colors duration-200 rounded-full hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-red-200","aria-label":"Remove item",children:e.jsx(o,{size:18})})]})})]})};function h({cart:s,setCart:a,onContinue:t,subTotal:i,envio:o,igv:c,totalFinal:d}){return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-y-8 md:gap-8",children:[e.jsxs("div",{className:"lg:col-span-3 flex flex-row w-full",children:[e.jsx("div",{className:"hidden md:block overflow-x-auto rounded-lg w-full",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{className:"!font-font-general",children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-sm 2xl:text-base font-semibold customtext-neutral-dark",children:"Producto"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-center text-sm 2xl:text-base font-semibold customtext-neutral-dark",children:"Cantidad"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-center text-sm 2xl:text-base font-semibold customtext-neutral-dark",children:"Precio"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-center text-sm 2xl:text-base font-semibold customtext-neutral-dark",children:"Subtotal"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(((s,t)=>e.jsx(p,{...s,setCart:a},t)))})]})}),e.jsx("div",{className:"md:hidden space-y-4 w-full",children:s.map(((s,t)=>e.jsx(p,{...s,setCart:a},t)))})]}),e.jsxs("div",{className:"bg-[#F7F9FB] rounded-xl shadow-lg p-6 col-span-2 h-max font-font-general",children:[e.jsx("h3",{className:"text-2xl font-bold pb-6 customtext-neutral-dark",children:"Resumen de compra"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Subtotal"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",l(i)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"IGV"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",l(c)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Envío"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",l(o)]})]}),e.jsx("div",{className:"py-3 border-y-2 mt-6",children:e.jsxs("div",{className:"flex justify-between font-bold text-[20px] items-center",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["S/ ",l(d)]})]})}),e.jsxs("div",{className:"space-y-2 pt-4",children:[e.jsx(n,{className:"rounded-2xl xl:rounded-3xl",onClick:t,children:"  Continuar"}),e.jsx(r,{className:"rounded-2xl xl:rounded-3xl",href:"/",children:" Cancelar"})]}),e.jsx("div",{children:e.jsxs("p",{className:"text-sm customtext-neutral-dark",children:["Al realizar tu pedido, aceptas los ",e.jsx("a",{className:"customtext-primary font-bold",children:"Términos y Condiciones"}),", y que nosotros usaremos sus datos personales de acuerdo con nuestra ",e.jsx("a",{className:"customtext-primary font-bold",children:"Política de Privacidad"}),"."]})})]})]})]})}function g({cart:t,setSale:o,setCode:c,setDelivery:d,setCart:p,onContinue:h,noContinue:g,subTotal:j,igv:f,totalFinal:v,user:b,setEnvio:N,envio:y}){const[w,C]=a.useState({name:(null==b?void 0:b.name)||"",lastname:(null==b?void 0:b.lastname)||"",email:(null==b?void 0:b.email)||"",department:(null==b?void 0:b.department)||"",province:(null==b?void 0:b.province)||"",district:(null==b?void 0:b.district)||"",address:(null==b?void 0:b.address)||"",number:(null==b?void 0:b.number)||"",comment:(null==b?void 0:b.comment)||"",reference:(null==b?void 0:b.reference)||"",shippingOption:"delivery",invoiceType:(null==b?void 0:b.invoiceType)||"boleta",documentType:(null==b?void 0:b.documentType)||"dni",document:(null==b?void 0:b.document)||"",businessName:(null==b?void 0:b.businessName)||""}),S=e=>{const{name:s,value:a}=e.target;C((e=>({...e,[s]:a}))),"invoiceType"===s&&C((e=>({...e,documentType:"factura"===a?"ruc":"dni",document:"",businessName:"factura"===a?e.businessName:""})))},[k,E]=a.useState(""),[F,T]=a.useState(""),[P,I]=a.useState(""),[R,D]=a.useState([]),[q,_]=a.useState([]),[A,$]=a.useState([]),[z,L]=a.useState(0);a.useEffect((()=>{const e=[...new Set(m.map((e=>e.departamento)))];D(e)}),[]),a.useEffect((()=>{if(k){const e=[...new Set(m.filter((e=>e.departamento===k)).map((e=>e.provincia)))];_(e),T(""),I(""),$([]),C((e=>({...e,department:k,province:"",district:""})))}}),[k]),a.useEffect((()=>{if(F){const e=m.filter((e=>e.departamento===k&&e.provincia===F)).map((e=>e.distrito));$(e),I(""),C((e=>({...e,province:F,district:""})))}}),[F]),a.useEffect((()=>{if(P){C((e=>({...e,district:P})));(async()=>{try{const e=await i.getShippingCost({department:k,district:P});N(e.data.price),l(e.data.price)>0?B("express"):B("free")}catch(e){alert("No se pudo obtener el costo de envío.")}})()}}),[P]);const[O,B]=a.useState("free");return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-y-8 lg:gap-8 ",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("form",{className:"space-y-6 bg-[#f9f9f9] p-6 rounded-2xl font-font-general",onSubmit:e=>e.preventDefault(),children:[e.jsxs("div",{className:"grid lg:grid-cols-2 gap-4 ",children:[e.jsx(u,{type:"text",label:"Nombres",name:"name",value:w.name,onChange:S,placeholder:"Nombres"}),e.jsx(u,{label:"Apellidos",type:"text",name:"lastname",value:w.lastname,onChange:S,placeholder:"Apellidos"})]}),e.jsx(u,{label:"Correo electrónico",type:"email",name:"email",value:w.email,onChange:S,placeholder:"Ej. hola@gmail.com"}),e.jsx(x,{label:"Departamento",options:R,placeholder:"Selecciona un Departamento",onChange:e=>{E(e),C((e=>({...e,department:k})))}}),e.jsx(x,{disabled:!k,label:"Provincia",options:q,placeholder:"Selecciona una Provincia",onChange:e=>{T(e),C((e=>({...e,province:F})))}}),e.jsx(x,{disabled:!F,label:"Distrito",options:A,placeholder:"Selecciona un Distrito",onChange:e=>{I(e),C((e=>({...e,district:P})))}}),e.jsx(u,{label:"Avenida / Calle / Jirón",type:"text",name:"address",value:w.address,onChange:S,placeholder:"Ingresa el nombre de la calle"}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-4",children:[e.jsx(u,{label:"Número",type:"text",name:"number",value:w.number,onChange:S,placeholder:"Ingresa el número de la calle"}),e.jsx(u,{label:"Dpto./ Interior/ Piso/ Lote/ Bloque (opcional)",type:"text",name:"comment",value:w.comment,onChange:S,placeholder:"Ej. Casa 3, Dpto 101"})]}),e.jsx(u,{label:"Referencia",type:"text",name:"reference",value:w.reference,onChange:S,placeholder:"Ejem. Altura de la avenida..."}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium customtext-neutral-dark",children:"Tipo de comprobante"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"radio",className:"form-radio",name:"invoiceType",value:"boleta",checked:"boleta"===w.invoiceType,onChange:S}),e.jsx("span",{className:"ml-2",children:"Boleta"})]}),e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"radio",className:"form-radio",name:"invoiceType",value:"factura",checked:"factura"===w.invoiceType,onChange:S}),e.jsx("span",{className:"ml-2",children:"Factura"})]})]})]}),e.jsx(u,{label:"dni"===w.documentType?"DNI":"RUC",type:"text",name:"document",value:w.document,onChange:S,placeholder:"Ingrese su "+("dni"===w.documentType?"DNI":"RUC"),maxLength:"dni"===w.documentType?"8":"11"}),"factura"===w.invoiceType&&e.jsx(u,{label:"Razón Social",type:"text",name:"businessName",value:w.businessName,onChange:S,placeholder:"Ingrese la razón social"})]})}),e.jsxs("div",{className:"bg-[#F7F9FB] rounded-xl shadow-lg p-6 col-span-2 h-max font-font-general",children:[e.jsx("h3",{className:"text-2xl font-bold pb-6 customtext-neutral-dark",children:"Resumen de compra"}),e.jsx("div",{className:"space-y-6 border-b-2 pb-6",children:t.map(((s,a)=>e.jsx("div",{className:"rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-white p-0 rounded-xl",children:e.jsx("img",{src:`/storage/images/item/${s.image}`,alt:s.name,className:"w-20 h-20 object-cover rounded  "})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold customtext-neutral-dark text-base 2xl:text-lg mb-2",children:s.name}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Color:"," ",e.jsx("span",{className:"customtext-neutral-dark",children:s.color})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Cantidad:"," ",e.jsxs("span",{className:"customtext-neutral-dark",children:[s.quantity," "]})]})]})]})},s.id)))}),e.jsxs("div",{className:"space-y-4 mt-6",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Subtotal"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",l(j)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"IGV"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",l(f)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Envío"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",l(y)]})]}),e.jsx("div",{className:"py-3 border-y-2 mt-6",children:e.jsxs("div",{className:"flex justify-between font-bold text-[20px] items-center",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["S/ ",l(v)]})]})}),e.jsxs("div",{className:"space-y-2 pt-4",children:[e.jsxs(n,{className:"payment-button",onClick:async a=>{if(a.preventDefault(),b)if(w.document)if("factura"!==w.invoiceType||w.businessName)if(w.department&&w.province&&w.district&&w.name&&w.lastname&&w.email&&w.address&&w.reference){if(window.MercadoPago)try{const e={user_id:(null==b?void 0:b.id)||"",name:(null==w?void 0:w.name)||"",lastname:(null==w?void 0:w.lastname)||"",fullname:`${null==w?void 0:w.name} ${null==w?void 0:w.lastname}`,email:(null==w?void 0:w.email)||"",phone:"",country:"Perú",department:k||"",province:F||"",district:P||"",ubigeo:null,address:(null==w?void 0:w.address)||"",number:(null==w?void 0:w.number)||"",comment:(null==w?void 0:w.comment)||"",reference:(null==w?void 0:w.reference)||"",amount:v||0,delivery:y,cart:t,invoiceType:w.invoiceType||"",documentType:w.documentType||"",document:w.document||"",businessName:w.businessName||""},a=await(e=>new Promise((async(a,t)=>{try{const{status:l,result:n}=await s.Fetch("./api/mercadopago/preference",{method:"POST",body:JSON.stringify(e)});if(!l||!n.preference_id)return s.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:(null==n?void 0:n.message)||"Error al crear la preferencia de pago",type:"danger"}),void t((null==n?void 0:n.message)||"Error al crear la preferencia de pago");new window.MercadoPago(n.public_key,{locale:"es-PE"}),setTimeout((()=>{window.location.href=n.redirect_url}),500),a(n)}catch(l){s.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:l.message||"Error en la integración con MercadoPago",type:"danger"}),t(l.message||"Error en la integración con MercadoPago")}})))(e),l=a;l.status?(o(l.sale),d(l.delivery),c(l.code)):s.Notify.add({icon:"/assets/img/icon.svg",title:"Error en el Pago",body:"El pago ha sido rechazado",type:"danger"})}catch(l){s.Notify.add({icon:"/assets/img/icon.svg",title:"Error en el Pago",body:"No se llegó a procesar el pago",type:"danger"})}}else s.Notify.add({icon:"/assets/img/icon.svg",title:"Error en el Formulario",body:"Completar los datos de envío",type:"danger"});else s.Notify.add({icon:"/assets/img/icon.svg",title:"Error en el Formulario",body:"El campo Razón Social es obligatorio para factura",type:"danger"});else s.Notify.add({icon:"/assets/img/icon.svg",title:"Error en el Formulario",body:`El campo ${"dni"===w.documentType?"DNI":"RUC"} es obligatorio`,type:"danger"});else toast.error("Acceso requerido",{description:"Debe iniciar sesión para continuar.",icon:e.jsx(UserRoundX,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"})},children:[" ","Continuar"]}),e.jsx("div",{id:"mercadopago-button-container"}),e.jsxs(r,{onClick:g,children:[" ","Cancelar"]})]}),e.jsx("div",{children:e.jsxs("p",{className:"text-sm customtext-neutral-dark",children:["Al realizar tu pedido, aceptas los",e.jsx("a",{className:"customtext-primary font-bold",children:"Términos y Condiciones"}),", y que nosotros usaremos sus datos personales de acuerdo con nuestra",e.jsx("a",{className:"customtext-primary font-bold",children:"Política de Privacidad"}),"."]})})]})]})]})}function j({setCart:r,cart:i,code:o,delivery:c}){var d;const[m,x]=a.useState(null),[u,p]=a.useState(!0),[h,g]=a.useState(null);if(a.useEffect((()=>{const e=async()=>{try{const e=await(({code:e})=>new Promise((async(a,t)=>{try{const{status:l,result:n}=await s.Fetch("./api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:e})});if(!l||!n.order)return s.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:(null==n?void 0:n.message)||"Error no se pudo cargar la orden",type:"danger"}),void t((null==n?void 0:n.message)||"Error no se pudo cargar la orde");a(n)}catch(h){s.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:h.message||"Error en la integración con MercadoPago",type:"danger"}),t(h.message||"Error en la integración con MercadoPago")}})))({code:o});x(e.order)}catch(e){g(e.message)}finally{p(!1)}};o&&(e(),s.Local.delete(`${t.APP_CORRELATIVE}_cart`),s.Local.set(`${t.APP_CORRELATIVE}_cart`,[]))}),[o]),u)return e.jsx("div",{className:"mx-auto",children:e.jsx("div",{className:"bg-white rounded-lg shadow p-6 font-font-general text-center",children:e.jsx("p",{children:"Cargando detalles de la orden..."})})});if(h)return e.jsx("div",{className:"mx-auto",children:e.jsx("div",{className:"bg-white rounded-lg shadow p-6 font-font-general text-center text-red-500",children:e.jsxs("p",{children:["Error al cargar la orden: ",h]})})});if(!m)return e.jsx("div",{className:"mx-auto",children:e.jsx("div",{className:"bg-white rounded-lg shadow p-6 font-font-general text-center",children:e.jsx("p",{children:"No se encontraron datos de la orden"})})});const j=(((null==(d=null==m?void 0:m.items)?void 0:d.reduce(((e,s)=>e+(s.price||0)*(s.quantity||0)),0))||0)/1.18).toFixed(2),f=(.18*j).toFixed(2),v=parseFloat(j)+parseFloat(f)+parseFloat(m.delivery);return e.jsx("div",{className:"mx-auto",children:e.jsx("div",{className:"bg-white rounded-lg shadow p-6 font-font-general",children:e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h2",{className:"text-base xl:text-xl customtext-neutral-light",children:"Gracias por tu compra 🎉"}),e.jsx("p",{className:"customtext-neutral-dark text-2xl xl:text-5xl font-semibold",children:"Tu orden ha sido recibida"}),e.jsxs("div",{className:"py-4",children:[e.jsx("div",{className:" customtext-neutral-light",children:"Código de pedido"}),e.jsxs("div",{className:"customtext-neutral-dark text-lg font-semibold",children:["#",m.code]})]}),e.jsxs("div",{className:"space-y-4 max-w-lg bg-[#F7F9FB] mx-auto p-8 rounded-xl",children:[e.jsx("div",{className:"space-y-6 border-b-2 pb-6",children:m.items.map(((s,a)=>e.jsx("div",{className:"rounded-lg",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"bg-white rounded-xl w-max",children:e.jsx("img",{src:s.image?`/storage/images/item/${s.image}`:"/assets/img/noimage/no_img.jpg",alt:s.name,className:"w-20 h-20 object-cover rounded",onError:e=>e.target.src="/assets/img/noimage/no_img.jpg"})}),e.jsxs("div",{className:"text-start",children:[e.jsx("h3",{className:"font-medium text-lg",children:s.name}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Color: ",e.jsx("span",{className:"customtext-neutral-dark",children:s.color})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Cantidad: ",e.jsx("span",{className:"customtext-neutral-dark",children:parseInt(s.quantity)})," - Precio: ",e.jsxs("span",{className:"customtext-neutral-dark",children:[" S/ ",l(s.price)]})]})]})]})},a)))}),e.jsxs("div",{className:"space-y-4 mt-6",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Subtotal"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",l(j)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"IGV"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",l(f)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Envío"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",l(m.delivery)]})]}),e.jsx("div",{className:"py-3 border-y-2 mt-6",children:e.jsxs("div",{className:"flex justify-between font-bold text-[20px] items-center",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["S/ ",l(v)]})]})})]}),e.jsx("div",{className:"pt-3",children:e.jsx(n,{href:"/catalogo",children:"  Seguir Comprando"})})]})]})})})}function f({cart:l,setCart:n,user:r}){const[i,o]=a.useState(1),c=(l.reduce(((e,s)=>e+s.final_price*s.quantity),0)/1.18).toFixed(2),d=(.18*c).toFixed(2),[m,x]=a.useState(0),u=parseFloat(c)+parseFloat(d)+parseFloat(m),[p,f]=a.useState([]),[v,b]=a.useState([]),[N,y]=a.useState([]);return a.useEffect((()=>{const e=new URLSearchParams(window.location.search).get("code");e&&(b(e),o(3))}),[window.location.search]),a.useEffect((()=>{v&&s.Local.delete(`${t.APP_CORRELATIVE}_cart`)}),[v]),a.useEffect((()=>{(()=>{const e=document.createElement("script");e.src="https://sdk.mercadopago.com/js/v2",e.async=!0,document.body.appendChild(e)})()}),[]),e.jsxs("div",{className:"min-h-screen bg-white py-6 px-primary",children:[e.jsxs("div",{className:"bg-white  py-8 sm:p-8 rounded-xl",children:[e.jsxs("div",{className:`mb-4 xl:mb-8 grid lg:grid-cols-5 !font-font-general ${3===i?"mx-auto max-w-3xl":""} `,children:[e.jsxs("div",{className:`flex items-center justify-between  mx-1 gap-2 lg:mx-5 ${3===i?"lg:col-span-5":"lg:col-span-3"}  text-center`,children:[e.jsx("div",{className:"text-sm sm:text-base 2xl:text-lg tracking-tight "+(1===i?"customtext-primary font-semibold":"customtext-neutral-dark"),children:"Carrito de compra"}),e.jsx("div",{className:"text-sm sm:text-base 2xl:text-lg tracking-tight "+(2===i?"customtext-primary font-semibold":"customtext-neutral-dark"),children:"Detalles de envío"}),e.jsx("div",{className:"text-sm sm:text-base 2xl:text-lg tracking-tight "+(3===i?"customtext-primary font-semibold":"customtext-neutral-dark"),children:"Orden confirmada"})]}),e.jsx("div",{className:`mt-4 h-1 max-w-3xl bg-gray-200 ${3===i?"lg:col-span-5":"lg:col-span-3"} `,children:e.jsx("div",{className:"h-1 bg-primary transition-all duration-500",style:{width:(i-1)/2*100+"%"}})})]}),1===i&&e.jsx(h,{cart:l,setCart:n,onContinue:()=>o(2),subTotal:c,envio:m,igv:d,totalFinal:u}),2===i&&e.jsx(g,{setCode:b,setDelivery:y,cart:l,setSale:f,setCart:n,onContinue:()=>o(3),noContinue:()=>o(1),subTotal:c,envio:m,setEnvio:x,igv:d,totalFinal:u,user:r}),3===i&&e.jsx(j,{code:v,setCart:n,delivery:N,cart:p,subTotal:c,envio:m,igv:d,totalFinal:u})]}),e.jsx("section",{className:"px-[5%] xl:px-[8%] bg-white py-12 xl:py-16 font-paragraph",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-start items-center bg-gradient-to-br from-[#FFFFFF] to-[#91502D1A] w-full rounded-3xl relative",children:[e.jsxs("div",{className:"flex flex-col gap-5 py-8 px-5 lg:pl-16 xl:pl-20  justify-start items-start w-full 2xl:w-3/5 max-w-xl 2xl:max-w-5xl text-white text-left",children:[e.jsx("h1",{className:"customtext-primary text-opacity-20 font-bold text-3xl md:text-4xl xl:text-5xl",children:"¡Tu compra merece un envío GRATIS!"}),e.jsx("p",{className:"customtext-primary  font-normal text-base xl:text-lg 2xl:text-xl",children:"Llévate tus regalos favoritos y obtén envío gratis en compras mayores a S/100."}),e.jsx("div",{className:"flex flex-col",children:e.jsx("a",{className:"w-auto bg-primary px-6 py-3 2xl:py-4 2xl:px-8 rounded-3xl text-white font-font-general leading-none text-base 2xl:text-xl",children:"Seguir comprando"})})]}),e.jsx("div",{className:"xl:absolute right-0 bottom-0 flex flex-col ml-5 w-full items-end  md:w-6/12 2xl:w-2/5 mt-0 md:-mb-14 ",children:e.jsx("img",{src:"/assets/img/backgrounds/resources/image-cart.png",onError:e=>e.target.src="/assets/img/noimage/no_img.jpg",className:"object-contain min-h-[300px] max-h-[500px] md:object-contain  xl:max-h-[400px]  md:max-h-none w-full object-bottom"})})]})})]})}export{f as default};
