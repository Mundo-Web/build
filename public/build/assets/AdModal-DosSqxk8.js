import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as n}from"./index-BOnQTV8N.js";import{R as j}from"./PolicyModal-C80IvD61.js";import{S as A,a as N}from"./BlogCarousel-CSSJauGD.js";import{N as k}from"./navigation-MWoTpsXy.js";import{P as S}from"./pagination-pES01fIc.js";import{A as M}from"./autoplay-E5bqrXsF.js";import{H as C}from"./HtmlContent-ghmllTyl.js";/* empty css               */import"./Strengths-B42DHEXW.js";import"./BlogCarrusel-yPzlLR5S.js";import{X as E}from"./x-fof_H3Vv.js";import{c as O}from"./createLucideIcon-DfjclApS.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./index-B6ujFmsw.js";import"./index-Chjiymov.js";import"./create-element-if-not-defined-CLdVNY0a.js";/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=O("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),Q=({data:r,items:i=[]})=>{const[w,d]=n.useState(!1),[c,v]=n.useState(!1),[a,b]=n.useState([]),m=t=>`mblens_ad_seen_${t.id||t.image}`;n.useEffect(()=>{const t=i.filter(o=>o&&o.image);console.log("AdModal: Procesando anuncios...",t);const s=t.filter(o=>{const l=m(o),h=localStorage.getItem(l);if(!h)return!0;const y=Date.now(),g=parseInt(h,10);return isNaN(g)||y>g?(console.log(`AdModal: Anuncio ${o.id||o.image} expiró su marca de visto. Mostrando de nuevo.`),localStorage.removeItem(l),!0):(console.log(`AdModal: Anuncio ${o.id||o.image} ya fue visto. Ocultando.`),!1)});b(s)},[i]),n.useEffect(()=>{if(a.length===0||c)return;const s=(a[0].seconds||0)*1e3;console.log(`AdModal: Programando apertura en ${s}ms`);const o=setTimeout(()=>{d(!0),v(!0)},s);return()=>clearTimeout(o)},[a,c]);const u=()=>{console.log("AdModal: Cerrando y guardando estado 'visto'..."),d(!1);const t=1440*60*1e3,s=Date.now()+t;a.forEach(o=>{const l=m(o);localStorage.setItem(l,s.toString()),console.log(`AdModal: Guardado ${l} expira en ${new Date(s).toLocaleString()}`)})},p=t=>{t&&window.open(t,"_blank","noopener,noreferrer")};if(a.length===0)return null;const f=a.some(t=>t.invasivo);return e.jsxs(j,{isOpen:w,shouldCloseOnOverlayClick:!f,shouldCloseOnEsc:!f,onRequestClose:u,contentLabel:"Anuncio",className:"absolute left-1/2 -translate-x-1/2 top-1/2 -translate-y-1/2 bg-white w-[90%] max-w-4xl outline-none shadow-2xl rounded-lg overflow-visible",overlayClassName:"fixed inset-0 bg-black/70 backdrop-blur-sm z-[9999] flex items-center justify-center",ariaHideApp:!1,children:[e.jsx("button",{onClick:u,className:"absolute -top-4 -right-4 md:-top-5 md:-right-5 z-[9999] p-2 bg-white text-gray-800 rounded-full shadow-xl border-2 border-gray-100 hover:bg-gray-50 hover:scale-110 transition-all duration-200 flex items-center justify-center","aria-label":"Cerrar anuncio",style:{width:"40px",height:"40px"},children:e.jsx(E,{size:24,strokeWidth:3,className:"text-gray-800"})}),e.jsx("div",{className:"w-full h-full bg-white rounded-lg overflow-hidden relative z-10",children:a.length===1?e.jsx(x,{ad:a[0],handleAdClick:p}):e.jsx(A,{modules:[M,S,k],autoplay:{delay:5e3,disableOnInteraction:!1,pauseOnMouseEnter:!0},pagination:{clickable:!0},navigation:!0,loop:a.length>1,className:"w-full h-full ad-swiper-custom",children:a.map((t,s)=>e.jsx(N,{children:e.jsx(x,{ad:t,handleAdClick:p})},t.id||s))})})]})},x=({ad:r,handleAdClick:i})=>e.jsxs("div",{className:"flex flex-col md:flex-row w-full min-h-[450px] md:h-[500px]",children:[e.jsxs("div",{className:"w-full md:w-1/2 h-64 md:h-full relative bg-gray-100 overflow-hidden group",children:[e.jsx("img",{src:`/api/ads/media/${r.image}`,alt:r.name||"Anuncio",className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent md:bg-gradient-to-r md:from-transparent md:to-black/5 pointer-events-none"})]}),e.jsx("div",{className:"w-full md:w-1/2 p-8 md:p-12 flex flex-col justify-center items-start text-left bg-white relative",children:e.jsxs("div",{className:"w-full",children:[r.name&&e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-4 leading-tight",children:r.name}),r.description&&e.jsx("div",{className:"prose prose-sm md:prose-base text-gray-600 mb-8 line-clamp-4 md:line-clamp-6",children:e.jsx(C,{html:r.description})}),r.link&&e.jsxs("button",{onClick:()=>i(r.link),className:"w-full md:w-auto bg-primary hover:bg-secondary text-white font-bold py-3 px-8 rounded-md transition-all duration-300 shadow-lg hover:shadow-xl flex items-center justify-center gap-2 group",children:[e.jsx("span",{children:"Ver más detalles"}),e.jsx(I,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]})]})})]});export{Q as default};
