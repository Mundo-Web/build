var e=Object.defineProperty,t=(t,a,i)=>((t,a,i)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[a]=i)(t,"symbol"!=typeof a?a+"":a,i);import{c as a,j as i,r}from"./vendor-react-SBvaUJTK.js";import{B as n}from"./Base-BQaY-qII.js";import{S as s}from"./SwitchFormGroup-DGsB37aq.js";import{T as o}from"./TextareaFormGroup-B0EP8gtW.js";import{S as l}from"./CartKuchara-8a8jAeu-.js";import{B as c}from"./BasicRest-Cgj77E-j.js";import{I as d}from"./ImageFormGroup-DPkM2HLo.js";import{M as m}from"./Modal-ClgvT3ku.js";import{T as p}from"./Table-Bf8C5yZH.js";import{D as u}from"./DxButton-C6FT_beP.js";import{C as f}from"./CreateReactScript-BZ6xEkMS.js";import{R as b}from"./ReactAppend-Ix4YwdVY.js";import{I as g}from"./InputFormGroup-DuKrUAYJ.js";import"./vendor-swiper-Cr_RrIb_.js";import"./Footer-BligNWSa.js";import"./TippyButton-C4KoE0lc.js";import"./Logout-BgttE_VN.js";import"./MenuItemContainer-CwLbZhxp.js";import"./Menu-CqnWUuE2.js";import"./OpenPayCardModal-C0HhlOHJ.js";import"./BooleanLimit-q2Ad9fGY.js";import"./General-ClVW7qxN.js";import"./LaravelSession-ByQnaUD3.js";const v=new class extends c{constructor(){super(...arguments),t(this,"path","admin/innovations"),t(this,"hasFiles",!0)}},j=()=>{const e=r.useRef(),t=r.useRef(),a=r.useRef(),n=r.useRef(),c=r.useRef(),f=r.useRef(),[j,h]=r.useState(!1),x=e=>{h(!!e?.id),a.current.value=e?.id??"",n.current.value=e?.name??"",c.current.value=e?.description??"",f.image.src=e?.image?`/storage/images/innovation/${e.image}`:"",f.current.value=null,f.resetDeleteFlag&&f.resetDeleteFlag(),$(t.current).modal("show")};return i.jsxs(i.Fragment,{children:[i.jsx(p,{gridRef:e,title:"Innovaciones",rest:v,toolBar:t=>{t.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(e.current).dxDataGrid("instance").refresh()}}),t.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Nuevo registro",hint:"Nuevo registro",onClick:()=>x()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"name",caption:"Innovación",width:"30%"},{dataField:"description",caption:"Descripción",width:"40%"},{dataField:"image",caption:"Imagen",width:"90px",allowFiltering:!1,cellTemplate:(e,{data:t})=>{b(e,i.jsx("img",{src:`/storage/images/innovation/${t.image}`,style:{width:"80px",height:"48px",objectFit:"cover",objectPosition:"center",borderRadius:"4px"},onError:e=>e.target.src="/api/cover/thumbnail/null"}))}},{dataField:"visible",caption:"Visible",dataType:"boolean",cellTemplate:(t,{data:a})=>{$(t).empty(),b(t,i.jsx(s,{checked:1==a.visible,onChange:()=>(async({id:t,value:a})=>{await v.boolean({id:t,field:"visible",value:a})&&$(e.current).dxDataGrid("instance").refresh()})({id:a.id,value:!a.visible})}))}},{dataField:"status",caption:"Estado",dataType:"boolean",cellTemplate:(t,{data:a})=>{$(t).empty(),b(t,i.jsx(s,{checked:1==a.status,onChange:()=>(async({id:t,value:a})=>{await v.boolean({id:t,field:"status",value:a})&&$(e.current).dxDataGrid("instance").refresh()})({id:a.id,value:!a.status})}))}},{caption:"Acciones",cellTemplate:(t,{data:a})=>{t.css("text-overflow","unset"),t.append(u({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>x(a)})),t.append(u({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>(async t=>{const{isConfirmed:a}=await l.fire({title:"Eliminar registro",text:"¿Estas seguro de eliminar este registro?",icon:"warning",showCancelButton:!0,confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"});if(!a)return;await v.delete(t.id)&&$(e.current).dxDataGrid("instance").refresh()})(a)}))},allowFiltering:!1,allowExporting:!1}]}),i.jsxs(m,{modalRef:t,title:j?"Editar innovación":"Agregar innovación",onSubmit:async i=>{i.preventDefault();const r={id:a.current.value||void 0,name:n.current.value,description:c.current.value},s=new FormData;for(const e in r)void 0!==r[e]&&s.append(e,r[e]);const o=f.current.files[0];o&&s.append("image",o),f.getDeleteFlag&&f.getDeleteFlag()&&s.append("image_delete","DELETE");for(let[e,t]of s.entries());await v.save(s)&&(f.resetDeleteFlag&&f.resetDeleteFlag(),$(e.current).dxDataGrid("instance").refresh(),$(t.current).modal("hide"))},children:[i.jsx("input",{ref:a,type:"hidden"}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(d,{eRef:f,name:"image",label:"Imagen",col:"col-12",aspect:16/9})}),i.jsxs("div",{className:"col-md-6",children:[i.jsx(g,{eRef:n,label:"Innovación",required:!0}),i.jsx(o,{eRef:c,label:"Descripción",rows:5})]})]})]})]})};f((e,t)=>{a.createRoot(e).render(i.jsx(n,{...t,title:"Innovaciones",children:i.jsx(j,{...t})}))});
