import{j as s}from"./AboutSimple-Cf8x2fCZ.js";import{r as o}from"./index-BOnQTV8N.js";const E=({id:l,col:p,label:d,eRef:r,required:f=!1,onChange:g=()=>{},aspect:x="21/9",hidden:b=!1,name:c})=>{l||(l=`ck-${crypto.randomUUID()}`),r||(r=o.useRef()),c||(c=l);const a=o.useRef(),[h,n]=o.useState(!1),[m,u]=o.useState(!1),j=async e=>{const t=e.target.files[0];if(t){const i=await File.toURL(t);a.current.src=i,n(!0),u(!1)}g(e)},F=()=>{a.current.src="/api/cover/thumbnail/null",r.current.value="",n(!1),u(!0),console.log(`Setting delete flag for ${c}: DELETE`),g({target:{files:[]}})},I=()=>m,v=()=>u(!1);return o.useEffect(()=>{r.image=a.current,r.getDeleteFlag=I,r.resetDeleteFlag=v,console.log(`ImageFormGroup ${c} - Setting up refs`),(()=>{var i;const t=(i=a.current)==null?void 0:i.src;n(t&&t!=="/api/cover/thumbnail/null"&&!t.includes("null"))})()},[m]),s.jsxs("div",{className:`form-group ${p} mb-2`,hidden:b,children:[s.jsxs("label",{htmlFor:l,className:"form-label",children:[d," ",f&&s.jsx("b",{className:"text-danger",children:"*"})]}),s.jsxs("div",{style:{position:"relative",width:"100%"},children:[s.jsx("label",{htmlFor:l,style:{width:"100%"},children:s.jsx("img",{ref:a,className:"d-block border",src:"",onError:e=>e.target.src="/api/cover/thumbnail/null",onLoad:()=>{var t;const e=(t=a.current)==null?void 0:t.src;n(e&&e!=="/api/cover/thumbnail/null"&&!e.includes("null"))},style:{width:"100%",borderRadius:"4px",cursor:"pointer",aspectRatio:x,objectFit:"cover",objectPosition:"center",boxShadow:"2.5px 2.5px 5px rgba(0,0,0,.125)"}})}),h&&s.jsx("button",{type:"button",onClick:F,className:"btn btn-danger btn-sm",style:{position:"absolute",top:"8px",right:"8px",padding:"4px 8px",fontSize:"12px",borderRadius:"4px",zIndex:10},title:"Eliminar imagen",children:s.jsx("i",{className:"fa fa-trash"})})]}),s.jsx("input",{ref:r,id:l,type:"file",src:"",alt:"",hidden:!0,accept:"image/*",onChange:j})]})};export{E as I};
