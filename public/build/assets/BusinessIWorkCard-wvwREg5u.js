var p=Object.defineProperty;var l=(u,r,o)=>r in u?p(u,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):u[r]=o;var i=(u,r,o)=>l(u,typeof r!="symbol"?r+"":r,o);import"./AboutSimple-Cf8x2fCZ.js";import"./index-BOnQTV8N.js";import{m as n}from"./main-B6F2O9-U.js";import{t as a}from"./CardProductKatya-ncpmQ0JU.js";import{B as d}from"./BooleanLimit-D-OsQsek.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./index-pSueRYGM.js";import"./index-B6ujFmsw.js";class m{constructor(){i(this,"is_use_notify",!0);i(this,"path",null);i(this,"hasFiles",!1);i(this,"controller",null);i(this,"booleanLimitKey",null);i(this,"resolveBooleanLimitKey",()=>{if(this.booleanLimitKey)return this.booleanLimitKey;if(!this.path)return null;const r=this.path.split("/").filter(Boolean);if(r.length===0)return null;const o=r[r.length-1];return o?o.replace(/-/g,"_"):null});i(this,"simpleGet",async(r,o,t=!0)=>{try{const{status:e,result:s}=await n.Fetch(r,o);if(!e)throw new Error((s==null?void 0:s.message)||"Ocurrio un error inesperado");return s.data??!0}catch(e){return t&&a.error("¡Error!",{description:e.message,duration:3e3,position:"bottom-center",richColors:!0}),null}});i(this,"paginate",async r=>{this.controller.abort("Nothing"),this.controller=new AbortController;const o=this.controller.signal;return await(await fetch(`/api/${this.path}/paginate`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(n.Cookies.get("XSRF-TOKEN"))},body:JSON.stringify(r),signal:o})).json()});i(this,"save",async(r,o=()=>{})=>{try{let t=!1,e={};if(this.hasFiles){const s=await fetch(`/api/${this.path}`,{method:"POST",headers:{"X-Xsrf-Token":decodeURIComponent(n.Cookies.get("XSRF-TOKEN"))},body:r});t=s.ok,e=JSON.parseable(await s.text())}else{const s=await n.Fetch(`/api/${this.path}`,{method:"POST",body:JSON.stringify(r)});t=s.status,e=s.result}if(!t)throw new Error((e==null?void 0:e.message)||"Ocurrio un error inesperado");return this.is_use_notify&&a.success("¡Excelente!",{description:e.message,duration:3e3,position:"bottom-center",richColors:!0}),o==null||o(),(e==null?void 0:e.data)??!0}catch(t){return a.error("¡Error!",{description:t.message,duration:3e3,position:"bottom-center",richColors:!0}),null}});i(this,"status",async({id:r,status:o})=>{try{const{status:t,result:e}=await n.Fetch(`/api/${this.path}/status`,{method:"PATCH",body:JSON.stringify({id:r,status:o})});if(!t)throw new Error((e==null?void 0:e.message)??"Ocurrio un error inesperado");return a.success("¡Excelente!",{description:e.message,duration:3e3,position:"bottom-center",richColors:!0}),!0}catch(t){return a.error("¡Error!",{description:t.message,duration:3e3,position:"bottom-center",richColors:!0}),!1}});i(this,"boolean",async({id:r,field:o,value:t})=>{var e;try{const{status:s,result:c}=await n.Fetch(`/api/${this.path}/boolean`,{method:"PATCH",body:JSON.stringify({id:r,field:o,value:t})}),h=this.resolveBooleanLimitKey();if(h&&((e=c==null?void 0:c.data)!=null&&e.limit)&&d.updateFromServer(h,c.data),!s)throw new Error((c==null?void 0:c.message)??"Ocurrio un error inesperado");return a.success("¡Excelente!",{description:c.message,duration:3e3,position:"bottom-center",richColors:!0}),(c==null?void 0:c.data)??!0}catch(s){return a.error("¡Error!",{description:s.message,duration:3e3,position:"bottom-center",richColors:!0}),!1}});i(this,"delete",async r=>{try{const{status:o,result:t}=await n.Fetch(`/api/${this.path}/${r}`,{method:"DELETE"});if(!o)throw new Error((t==null?void 0:t.message)??"Ocurrio un error inesperado");return a.success("¡Excelente!",{description:t.message,duration:3e3,position:"bottom-center",richColors:!0}),!0}catch(o){return a.error("¡Error!",{description:o.message,duration:3e3,position:"bottom-center",richColors:!0}),!1}});i(this,"get",async(r={},o=[])=>{try{let t=`/api/${this.path}`;if(typeof r=="string"||typeof r=="number")t+=`/${r}`;else if(typeof r=="object"&&Object.keys(r).length>0){const s=new URLSearchParams(r).toString();t+=`?${s}`}if(o.length>0){const s=o.join(",");t+=`${t.includes("?")?"&":"?"}with=${s}`}const e=await fetch(t,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(n.Cookies.get("XSRF-TOKEN"))}});if(!e.ok)throw new Error(`Error ${e.status}: ${e.statusText}`);return await e.json()}catch(t){return a.error("¡Error!",{description:t.message,duration:3e3,position:"bottom-center",richColors:!0}),null}});i(this,"reorder",async(r,o)=>{try{const t=await fetch(`/api/${this.path}/${r}/reorder`,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(n.Cookies.get("XSRF-TOKEN"))},body:JSON.stringify({order_index:o})});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const e=await t.json();return this.is_use_notify&&e.success&&a.success("¡Excelente!",{description:e.message,duration:3e3,position:"bottom-center",richColors:!0}),e}catch(t){return this.is_use_notify&&a.error("¡Error!",{description:t.message,duration:3e3,position:"bottom-center",richColors:!0}),console.error("Error reordering:",t),!1}});this.controller=new AbortController}}class g extends m{constructor(){super(...arguments);i(this,"path","users-by-services-by-business");i(this,"inviteUser",async(o,t)=>{try{const{status:e,result:s}=await n.Fetch(`/api/${this.path}`,{method:"POST",body:JSON.stringify({email:o,match:t})});if(!e)throw new Error((s==null?void 0:s.message)||"Ocurrio un error al agregar el usuario");return n.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:s.message,type:"success"}),!0}catch(e){return n.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:e.message,type:"danger"}),!1}});i(this,"authorize",async o=>{try{const{status:t,result:e}=await n.Fetch(`/api/${this.path}/authorize`,{method:"POST",body:JSON.stringify(o)});if(!t)throw new Error((e==null?void 0:e.message)||"Ocurrio un error al abrir el servicio");return n.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:e.message,type:"success"}),!0}catch(t){return n.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:t.message,type:"danger"}),!1}})}}new g;
