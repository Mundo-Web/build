var e=Object.defineProperty,a=(a,s,t)=>((a,s,t)=>s in a?e(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t)(a,"symbol"!=typeof s?s+"":s,t);import{c as s,j as t,r}from"./vendor-react-BX-OgZ1w.js";import{B as i}from"./Base-D1ePwdy7.js";import{S as l}from"./CartKuchara-BRbOrA8K.js";import{B as n}from"./BasicRest-qY-8D5Ep.js";import{B as o}from"./BasicEditing--xhIZlHi.js";import{I as c}from"./ImageFormGroup-Cmh-hBDC.js";import{I as d}from"./InputFormGroup-EFtQ7_4Q.js";import{Q as m}from"./QuillFormGroup-C_tO7TVd.js";import{S as p}from"./SelectAPIFormGroup-C8Bb3iVN.js";import{M as u}from"./Modal-8M1u2XTi.js";import{T as h}from"./Table-D-WA49us.js";import{D as g}from"./DxButton-C6FT_beP.js";import{C as x,F as j}from"./CreateReactScript-A9ZGwbIB.js";import{h as b}from"./html2string-Xrf4P-xU.js";import{R as f}from"./ReactAppend-S9ISIyFy.js";import{S as v}from"./SetSelectValue-DCHQOIKz.js";import{T as N}from"./TextareaFormGroup-EzJS_9vv.js";import{G as y}from"./Footer-CrpKyZX2.js";import"./vendor-swiper-Cr_RrIb_.js";import"./TippyButton-DqdjTa95.js";import"./Logout-BWCHsJMV.js";import"./MenuItemContainer-Dgmk4LC8.js";import"./Menu-BGctQja3.js";import"./OpenPayCardModal-DKUbGzgl.js";import"./BooleanLimit-q2Ad9fGY.js";import"./ArrayDetails2Object-BtdyATqd.js";import"./em-C3Rv_rIE.js";import"./HtmlContent-CuAGKuc9.js";import"./WebDetailsRest-zoGwMf4I.js";import"./General-ClVW7qxN.js";import"./LaravelSession-ByQnaUD3.js";const R=new class extends n{constructor(){super(...arguments),a(this,"path","admin/posts"),a(this,"hasFiles",!0)}},w=({details:e})=>{const a=r.useRef(),s=r.useRef(),i=r.useRef(),n=r.useRef(),x=r.useRef(),w=r.useRef(),F=r.useRef(),_=r.useRef(),S=r.useRef(),C=r.useRef(),D=r.useRef(),B=r.useRef(),T=r.useRef(),k=r.useRef(),[E,P]=r.useState(!1),[I,M]=r.useState(""),[q,G]=r.useState(0),[L,A]=r.useState(0),O=e=>{P(!!e?.id),_.resetDeleteFlag&&_.resetDeleteFlag(),i.current.value=e?.id??"",n.current.value=e?.name??"",v(x.current,e?.category?.id,e?.category?.name),w.editor.root.innerHTML=e?.description??"",_.image.src=e?.image?`/storage/images/post/${e.image}`:"",_.current.value=null,v(F.current,e?.tags??[],"id","name"),S.current.value=e?.post_date??moment().format("YYYY-MM-DD"),C.current.value=e?.slug??"",D.current.value=e?.meta_title??"",B.current.value=e?.meta_description??"",T.current.value=e?.meta_keywords??"",k.current.value=e?.canonical_url??"",M(e?.slug??""),G((e?.meta_title??"").length),A((e?.meta_description??"").length),$(s.current).modal("show")},W=e=>j.has("posts",e)&&j.get("posts",e)?.required;return t.jsxs(t.Fragment,{children:[t.jsx(h,{gridRef:a,title:t.jsx(o,{correlative:"blog",details:e}),rest:R,toolBar:e=>{e.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(a.current).dxDataGrid("instance").refresh()}}),e.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Nuevo registro",hint:"Nuevo registro",onClick:()=>O()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"category.name",caption:"Categoría"},{dataField:"name",caption:"Título",cellTemplate:(e,{data:a})=>{f(e,t.jsxs(t.Fragment,{children:[a.name,t.jsx("br",{}),a.tags?.map((e,a)=>t.jsx("span",{className:"badge badge-soft-success me-1",children:e.name},a))]}))}},{dataField:"image",caption:"Imagen",width:"90px",cellTemplate:(e,{data:a})=>{f(e,t.jsx("img",{src:`/storage/images/post/${a.image}`,style:{width:"80px",height:"48px",objectFit:"cover",objectPosition:"center",borderRadius:"4px"},onError:e=>e.target.src="/api/cover/thumbnail/null"}))}},{caption:"Acciones",cellTemplate:(e,{data:s})=>{e.append(g({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>O(s)})),e.append(g({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>(async e=>{const{isConfirmed:s}=await l.fire({title:"Eliminar registro",text:"¿Estas seguro de eliminar este registro?",icon:"warning",showCancelButton:!0,confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"});if(!s)return;await R.delete(e)&&$(a.current).dxDataGrid("instance").refresh()})(s.id)}))},allowFiltering:!1,allowExporting:!1}]}),t.jsxs(u,{modalRef:s,title:E?"Editar post":"Agregar post",onSubmit:async e=>{e.preventDefault();const t={id:i.current.value||void 0,name:n.current.value,category_id:x.current.value,summary:b(w.current.value),description:w.current.value,tags:$(F.current).val(),post_date:S.current.value,slug:C.current.value,meta_title:D.current.value,meta_description:B.current.value,meta_keywords:T.current.value,canonical_url:k.current.value},r=new FormData;for(const a in t)r.append(a,t[a]);const l=_.current.files[0];l&&r.append("image",l),_.getDeleteFlag&&_.getDeleteFlag()&&r.append("image_delete","DELETE");await R.save(r)&&(_.resetDeleteFlag&&_.resetDeleteFlag(),$(a.current).dxDataGrid("instance").refresh(),$(s.current).modal("hide"))},size:"xl",children:[t.jsx("input",{ref:i,type:"hidden"}),t.jsxs("div",{id:"posts-container",children:[t.jsxs("ul",{className:"nav nav-pills nav-justified mb-4",role:"tablist",style:{backgroundColor:"#f8f9fa",borderRadius:"8px",padding:"4px",border:"1px solid #e9ecef"},children:[t.jsx("li",{className:"nav-item",role:"presentation",children:t.jsxs("button",{className:"nav-link active",id:"basic-info-tab","data-bs-toggle":"pill","data-bs-target":"#basic-info",type:"button",role:"tab","aria-controls":"basic-info","aria-selected":"true",style:{borderRadius:"6px",fontWeight:"500",transition:"all 0.3s ease"},children:[t.jsx("i",{className:"fas fa-info-circle me-2"}),"Información Básica"]})}),t.jsx("li",{className:"nav-item",role:"presentation",children:t.jsxs("button",{className:"nav-link",id:"contenido-tab","data-bs-toggle":"pill","data-bs-target":"#contenido",type:"button",role:"tab","aria-controls":"contenido","aria-selected":"false",style:{borderRadius:"6px",fontWeight:"500",transition:"all 0.3s ease"},children:[t.jsx("i",{className:"fas fa-align-left me-2"}),"Contenido"]})}),t.jsx("li",{className:"nav-item",role:"presentation",children:t.jsxs("button",{className:"nav-link",id:"multimedia-tab","data-bs-toggle":"pill","data-bs-target":"#multimedia",type:"button",role:"tab","aria-controls":"multimedia","aria-selected":"false",style:{borderRadius:"6px",fontWeight:"500",transition:"all 0.3s ease"},children:[t.jsx("i",{className:"fas fa-images me-2"}),"Multimedia"]})}),t.jsx("li",{className:"nav-item",role:"presentation",children:t.jsxs("button",{className:"nav-link",id:"seo-tab","data-bs-toggle":"pill","data-bs-target":"#seo",type:"button",role:"tab","aria-controls":"seo","aria-selected":"false",style:{borderRadius:"6px",fontWeight:"500",transition:"all 0.3s ease"},children:[t.jsx("i",{className:"fas fa-search me-2"}),"SEO"]})})]}),t.jsxs("div",{className:"tab-content",children:[t.jsx("div",{className:"tab-pane fade show active",id:"basic-info",role:"tabpanel","aria-labelledby":"basic-info-tab",children:t.jsx("div",{className:"row g-3",children:t.jsx("div",{className:"col-12",children:t.jsxs("div",{className:"card border-0 shadow-sm",children:[t.jsx("div",{className:"card-header bg-light",children:t.jsxs("h6",{className:"mb-0",children:[t.jsx("i",{className:"fas fa-tag me-2 text-primary"}),"Identificación"]})}),t.jsx("div",{className:"card-body",children:t.jsxs("div",{className:"row",children:[j.has("posts","name")&&t.jsx("div",{className:"col-md-12",children:t.jsx(d,{eRef:n,label:"Título del Post",placeholder:"Ej: Cómo mejorar tu SEO",required:W("name")})}),j.has("posts","post_date")&&t.jsx("div",{className:"col-md-6",children:t.jsx(d,{eRef:S,label:"Fecha de publicación",type:"date",required:W("post_date")})}),j.has("posts","category_id")&&t.jsx("div",{className:"col-md-6",children:t.jsx(p,{eRef:x,searchAPI:"/api/admin/blog-categories/paginate",searchBy:"name",label:"Categoría",required:W("category_id"),dropdownParent:"#posts-container"})}),j.has("posts","summary")&&t.jsx("div",{className:"col-12",children:t.jsx(N,{eRef:w,label:"Resumen",rows:2,placeholder:"Resumen breve del post...",required:W("summary")})}),j.has("posts","is_tags")&&t.jsx("div",{className:"col-md-12",children:t.jsx(p,{id:"tags",eRef:F,searchAPI:"/api/admin/post-tags/paginate",searchBy:"name",label:"Tags",dropdownParent:"#posts-container",tags:!0,multiple:!0})})]})})]})})})}),t.jsx("div",{className:"tab-pane fade",id:"contenido",role:"tabpanel","aria-labelledby":"contenido-tab",children:t.jsx("div",{className:"row g-3",children:t.jsx("div",{className:"col-12",children:t.jsxs("div",{className:"card border-0 shadow-sm",children:[t.jsx("div",{className:"card-header bg-light",children:t.jsxs("h6",{className:"mb-0",children:[t.jsx("i",{className:"fas fa-align-left me-2 text-primary"}),"Contenido del Post"]})}),t.jsx("div",{className:"card-body",children:t.jsx("div",{className:"row",children:j.has("posts","description")&&t.jsx("div",{className:"col-12",children:t.jsx(m,{eRef:w,label:"Contenido",required:W("description"),height:"1000px"})})})})]})})})}),t.jsx("div",{className:"tab-pane fade",id:"multimedia",role:"tabpanel","aria-labelledby":"multimedia-tab",children:t.jsx("div",{className:"row g-3",children:t.jsx("div",{className:"col-12",children:t.jsxs("div",{className:"card border-0 shadow-sm",children:[t.jsx("div",{className:"card-header bg-light",children:t.jsxs("h6",{className:"mb-0",children:[t.jsx("i",{className:"fas fa-images me-2 text-success"}),"Imágenes"]})}),t.jsx("div",{className:"card-body",children:t.jsx("div",{className:"row g-3",children:j.has("posts","image")&&t.jsx("div",{className:"col-md-12",children:t.jsx(c,{eRef:_,name:"image",label:"Imagen",col:"col-12",aspect:"16/9"})})})})]})})})}),t.jsx("div",{className:"tab-pane fade",id:"seo",role:"tabpanel","aria-labelledby":"seo-tab",children:t.jsx("div",{className:"row g-3",children:t.jsx("div",{className:"col-12",children:t.jsxs("div",{className:"card border-0 shadow-sm",children:[t.jsx("div",{className:"card-header bg-light",children:t.jsxs("h6",{className:"mb-0",children:[t.jsx("i",{className:"fas fa-search me-2 text-info"}),"Configuración SEO"]})}),t.jsx("div",{className:"card-body",children:t.jsxs("div",{className:"row g-3",children:[j.has("posts","slug")&&t.jsxs("div",{className:"col-md-12",children:[t.jsx(d,{eRef:C,label:t.jsxs(t.Fragment,{children:[t.jsx("i",{className:"fas fa-link me-1"}),"Slug (URL amigable)"]}),placeholder:"mi-post-ejemplo",onChange:e=>{const a=e.target.value;M(a),k.current&&(k.current.value=`${y.APP_URL}/post/${a}`)},required:W("slug")}),t.jsxs("small",{className:"text-muted d-block mt-1",children:[t.jsx("i",{className:"fas fa-globe me-1"}),"Vista previa: ",t.jsxs("span",{className:"text-primary",children:[y.APP_URL,"/post/",I||"slug-del-post"]})]})]}),j.has("posts","meta_title")&&t.jsxs("div",{className:"col-md-12",children:[t.jsx(d,{eRef:D,label:t.jsxs(t.Fragment,{children:[t.jsx("i",{className:"fas fa-heading me-1"}),"Meta Title (SEO)",t.jsxs("span",{className:"badge ms-2 "+(q>60?"bg-danger":"bg-info"),children:[q,"/60"]})]}),placeholder:"Título optimizado para buscadores",maxLength:60,onChange:e=>{const a=e.target.value;G(a.length)},required:W("meta_title")}),t.jsx("small",{className:"text-muted",children:"Máximo 60 caracteres. Se auto-completa si se deja vacío."})]}),j.has("posts","meta_description")&&t.jsxs("div",{className:"col-12",children:[t.jsx(N,{eRef:B,label:t.jsxs(t.Fragment,{children:[t.jsx("i",{className:"fas fa-align-left me-1"}),"Meta Description (SEO)",t.jsxs("span",{className:"badge ms-2 "+(L>160?"bg-danger":"bg-info"),children:[L,"/160"]})]}),rows:3,placeholder:"Descripción breve del post para buscadores",maxLength:160,onChange:e=>{const a=e.target.value;A(a.length)},required:W("meta_description")}),t.jsx("small",{className:"text-muted",children:"Máximo 160 caracteres. Se auto-completa si se deja vacío."})]}),j.has("posts","meta_keywords")&&t.jsxs("div",{className:"col-md-12",children:[t.jsx(d,{eRef:T,label:t.jsxs(t.Fragment,{children:[t.jsx("i",{className:"fas fa-tags me-1"}),"Meta Keywords"]}),placeholder:"palabra1, palabra2, palabra3",required:W("meta_keywords")}),t.jsx("small",{className:"text-muted d-block mt-n2 mb-2",children:"Separadas por comas"})]}),j.has("posts","canonical_url")&&t.jsxs("div",{className:"col-md-12",children:[t.jsx(d,{eRef:k,label:t.jsxs(t.Fragment,{children:[t.jsx("i",{className:"fas fa-external-link-alt me-1"}),"URL Canónica"]}),placeholder:"Se genera automáticamente",readOnly:!0,required:W("canonical_url")}),t.jsx("small",{className:"text-muted",children:"Se genera automáticamente desde el slug"})]})]})})]})})})})]})]})]})]})};x((e,a)=>{s.createRoot(e).render(t.jsx(i,{...a,title:"Posts",children:t.jsx(w,{...a})}))});
