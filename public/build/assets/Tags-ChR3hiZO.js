var N=Object.defineProperty;var S=(i,o,n)=>o in i?N(i,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[o]=n;var g=(i,o,n)=>S(i,typeof o!="symbol"?o+"":o,n);import{j as t}from"./AboutSimple-Cf8x2fCZ.js";import{B as T}from"./Base-BmKI3G_h.js";import{S as D}from"./SwitchFormGroup-CGYpv_4Q.js";import{T as k}from"./TextareaFormGroup-DVzYJtLM.js";import{I as R}from"./ImageFormGroup-BPR9pDAU.js";import{r as s}from"./index-BH53Isel.js";import{c as B}from"./ReactAppend-DTVVXReZ.js";import{S as I}from"./ProductCard-CRhBSmWZ.js";import{B as G}from"./BasicRest-DXMDQ7uA.js";import{I as q}from"./InputFormGroup-D5I6zpZc.js";import{M as _}from"./Modal-CIqmjseY.js";import{T as P}from"./Table-DitbKwtZ.js";import{D as v}from"./DxButton-DV0H-ZcL.js";import{C as A}from"./CreateReactScript-BOgKzS03.js";import{R as x}from"./ReactAppend-D7S498fx.js";import{G as M}from"./Global-ErywZRdd.js";import"./index-yBjzXJbu.js";import"./tippy-react.esm-BWiGTO87.js";import"./index-rimy3MAc.js";import"./index-fNjTmf9T.js";/* empty css              */import"./Logout-TGKOqZqZ.js";import"./main-6DCdASTx.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";import"./MenuItemContainer-CY0sLPNq.js";import"./index.esm-POOiSFi2.js";import"./index-Dq7h7Pqt.js";import"./index-BZYhE2TF.js";/* empty css               */import"./General-BmbBKdsB.js";import"./LaravelSession-Dz9cpV3l.js";class V extends G{constructor(){super(...arguments);g(this,"path","admin/tags");g(this,"hasFiles",!0)}}const m=new V,O=()=>{const i=s.useRef(),o=s.useRef(),n=s.useRef(),p=s.useRef(),f=s.useRef(),u=s.useRef(),d=s.useRef(),l=s.useRef(),c=s.useRef(),[w,b]=s.useState(!1),h=e=>{e!=null&&e.id?b(!0):b(!1),n.current.value=(e==null?void 0:e.id)??"",p.current.value=(e==null?void 0:e.name)??"",f.current.value=(e==null?void 0:e.description)??"",u.current.value=(e==null?void 0:e.background_color)??M.APP_COLOR_PRIMARY,d.current.value=(e==null?void 0:e.text_color)??"#ffffff",l.current&&(e!=null&&e.icon)&&(l.current.src=`/storage/images/tag/${e.icon}`),c.current&&(e!=null&&e.image)&&(c.current.src=`/storage/images/tag/${e.image}`),$(o.current).modal("show")},j=async e=>{e.preventDefault();const r=new FormData;r.append("id",n.current.value||""),r.append("name",p.current.value),r.append("description",f.current.value),r.append("background_color",u.current.value),r.append("text_color",d.current.value),l.current.src&&l.current.src&&r.append("icon",l.current.files[0]),c.current.files&&c.current.files[0]&&r.append("image",c.current.files[0]),await m.save(r)&&($(i.current).dxDataGrid("instance").refresh(),$(o.current).modal("hide"))},C=async({id:e,value:r})=>{await m.boolean({id:e,field:"visible",value:r})&&$(i.current).dxDataGrid("instance").refresh()},F=async e=>{const{isConfirmed:r}=await I.fire({title:"Eliminar registro",text:"¿Estas seguro de eliminar este registro?",icon:"warning",showCancelButton:!0,confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"});!r||!await m.delete(e)||$(i.current).dxDataGrid("instance").refresh()};return t.jsxs(t.Fragment,{children:[t.jsx(P,{gridRef:i,title:"Etiquetas",rest:m,toolBar:e=>{e.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(i.current).dxDataGrid("instance").refresh()}}),e.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Nuevo registro",hint:"Nuevo registro",onClick:()=>h()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"name",caption:"Etiqueta",width:"25%"},{dataField:"description",caption:"Descripción",width:"25%"},{dataField:"preview",caption:"Vista Previa",width:"20%",allowSorting:!1,allowFiltering:!1,cellTemplate:(e,{data:r})=>{$(e).empty();const a={backgroundColor:r.background_color||"#3b82f6",color:r.text_color||"#ffffff",padding:"4px 8px",borderRadius:"12px",fontSize:"12px",display:"inline-flex",alignItems:"center",gap:"4px",maxWidth:"150px"},y=t.jsxs("span",{style:a,children:[r.icon&&t.jsx("img",{src:`/storage/images/tag/${r.icon}`,style:{width:"16px",height:"16px",borderRadius:"2px"},alt:"icon",onError:E=>E.target.src="/api/cover/thumbnail/null"}),t.jsx("span",{children:r.name})]});x(e,y)}},{dataField:"image",caption:"Imagen Principal",width:"15%",allowSorting:!1,allowFiltering:!1,cellTemplate:(e,{data:r})=>{if($(e).empty(),r.image){const a=t.jsx("img",{src:`/storage/${r.image}`,style:{width:"40px",height:"24px",objectFit:"cover",borderRadius:"4px",border:"1px solid #ddd"},alt:"imagen principal"});x(e,a)}else e.text("Sin imagen")}},{dataField:"visible",caption:"Visible",dataType:"boolean",cellTemplate:(e,{data:r})=>{$(e).empty(),x(e,t.jsx(D,{checked:r.visible==1,onChange:()=>C({id:r.id,value:!r.visible})}))}},{caption:"Acciones",cellTemplate:(e,{data:r})=>{e.css("text-overflow","unset"),e.append(v({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>h(r)})),e.append(v({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>F(r.id)}))},allowFiltering:!1,allowExporting:!1}]}),t.jsx(_,{modalRef:o,title:w?"Editar etiqueta":"Agregar etiqueta",onSubmit:j,size:"lg",children:t.jsxs("div",{className:"row",id:"tags-container",children:[t.jsx("input",{ref:n,type:"hidden"}),t.jsx(q,{eRef:p,label:"Nombre de la Etiqueta",col:"col-12",required:!0}),t.jsx(k,{eRef:f,label:"Descripción",col:"col-12",rows:2}),t.jsx("div",{className:"col-md-6",children:t.jsxs("div",{className:"form-group mb-2",children:[t.jsx("label",{className:"form-label",children:"Color de Fondo"}),t.jsx("input",{ref:u,type:"color",className:"form-control form-control-color",defaultValue:"#3b82f6"})]})}),t.jsx("div",{className:"col-md-6",children:t.jsxs("div",{className:"form-group mb-2",children:[t.jsx("label",{className:"form-label",children:"Color de Texto"}),t.jsx("input",{ref:d,type:"color",className:"form-control form-control-color",defaultValue:"#ffffff"})]})}),t.jsx(R,{eRef:l,label:"Icono (imagen pequeña que aparece al lado del texto)",col:"col-md-6",aspect:"1/1"}),t.jsx(R,{eRef:c,label:"Imagen Principal (para otros fines)",col:"col-md-6",aspect:"16/9"})]})})]})};A((i,o)=>{B.createRoot(i).render(t.jsx(T,{...o,title:"Etiquetas",children:t.jsx(O,{...o})}))});
