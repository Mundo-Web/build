var ss=Object.defineProperty;var ts=(u,r,l)=>r in u?ss(u,r,{enumerable:!0,configurable:!0,writable:!0,value:l}):u[r]=l;var ce=(u,r,l)=>ts(u,typeof r!="symbol"?r+"":r,l);import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as m}from"./index-BOnQTV8N.js";import{R as ue}from"./PolicyModal-C80IvD61.js";import{H as as}from"./HtmlContent-ghmllTyl.js";import{C as E,N as $}from"./Number2Currency-jIsa99f9.js";import{U as xe}from"./users-w-WaEtvX.js";import{M as $e}from"./moon-BU5XInRR.js";import{c as rs}from"./createLucideIcon-DfjclApS.js";import{C as ae}from"./calendar-BSC6xbA7.js";import{X as pe}from"./x-fof_H3Vv.js";import{f as Fe}from"./format-B6vr9H0z.js";import{e as Oe}from"./es-QTeD0CGG.js";import{O as ns,p as os,a as ls}from"./OpenPayCardModal-n1KG45qI.js";import{C as cs,p as is,B as ds}from"./culqiPayment-BOuHXhF8.js";import{P as ms}from"./PaymentModal-6XGx0IRq.js";import{G as q}from"./Global-Bz6gVLc5.js";import{G as Y}from"./General-apRuNwp7.js";import{m as J}from"./main-B6F2O9-U.js";import{t as z}from"./CardProductKatya-ncpmQ0JU.js";import{U as Me}from"./upload-GO9GDST_.js";import{C as A}from"./circle-x-5vreeYph.js";import{B as xs}from"./building-2-DSFvhCB-.js";import{C as Se}from"./check-D5vaIe6v.js";import{C as Re}from"./copy-BnGV3h9k.js";import{S as us}from"./react-select.esm-H4wpMl-h.js";import{C as ps}from"./credit-card-MgdEzS7h.js";import{C as ie}from"./circle-check-big-CYWUGR3Z.js";import{U as hs}from"./user-round-x-C2OImLTZ.js";import{M as ye}from"./mail-drJGpT4k.js";import{P as gs}from"./phone-ZNY-sPqk.js";import{M as fs}from"./map-pin-Cj3PUWlD.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./index-B6ujFmsw.js";import"./index-Chjiymov.js";import"./loader-circle-CSFYLd5m.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./index-pSueRYGM.js";import"./useStateManager-7e1e8489.esm-C6DnWqDr.js";import"./hoist-non-react-statics.cjs-Dk09vysS.js";import"./floating-ui.dom-CID5cQpR.js";/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=rs("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),js=({setCart:u,...r})=>{const l=()=>{u(a=>a.filter(p=>p.id!==r.id||p.check_in!==r.check_in))},v=a=>{if(!a)return"";try{const p=new Date(a);return Fe(p,"dd 'de' MMMM",{locale:Oe})}catch{return a}},y=r.final_price||r.price,O=r.nights||1,i=y*O,C=r.guests||2,B=a=>({standard:"Estándar",suite:"Suite",deluxe:"Deluxe",presidential:"Presidencial",family:"Familiar",executive:"Ejecutiva",single:"Individual",double:"Doble"})[a]||a;return e.jsx("div",{className:"bg-white border border-gray-200 rounded-2xl overflow-hidden hover:shadow-lg transition-all duration-300 font-paragraph",children:e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsxs("div",{className:"md:w-64 h-48 md:h-auto relative flex-shrink-0",children:[e.jsx("img",{src:`/storage/images/item/${r.image}`,alt:r.name,className:"w-full h-full object-cover",onError:a=>a.target.src="/assets/img/noimage/no_img.jpg"}),r.room_type&&e.jsx("div",{className:"absolute top-3 left-3 bg-white/95 backdrop-blur-sm px-3 py-1 rounded-full text-xs font-semibold text-gray-700 shadow-md",children:B(r.room_type)})]}),e.jsxs("div",{className:"flex-1 p-5 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg md:text-xl font-bold text-gray-900 mb-2",children:r.name}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(xe,{size:16,className:"text-blue-600"}),e.jsxs("span",{children:[C," ",C===1?"huésped":"huéspedes"]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx($e,{size:16,className:"text-indigo-600"}),e.jsxs("span",{children:[O," ",O===1?"noche":"noches"]})]}),r.amenities&&r.amenities.includes("wifi")&&e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(bs,{size:16,className:"text-green-600"}),e.jsx("span",{children:"WiFi"})]})]}),e.jsxs("div",{className:"inline-flex items-center gap-3 bg-gray-50 rounded-xl px-4 py-2.5 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{size:16,className:"text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Check-in"}),e.jsx("div",{className:"font-semibold text-gray-900",children:v(r.check_in)})]})]}),e.jsx("div",{className:"w-8 h-px bg-gray-300"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{size:16,className:"text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Check-out"}),e.jsx("div",{className:"font-semibold text-gray-900",children:v(r.check_out)})]})]})]})]}),e.jsx("button",{onClick:l,className:"ml-4 p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-all","aria-label":"Eliminar reserva",title:"Eliminar reserva",children:e.jsx(pe,{size:20})})]}),e.jsxs("div",{className:"flex items-end justify-between pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Precio por noche:"}),e.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:[E()," ",y.toFixed(2)]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Total a pagar"}),e.jsxs("div",{className:"text-2xl font-bold text-primary",children:[E()," ",i.toFixed(2)]})]})]})]})]})})};function ys({data:u,cart:r,setCart:l,onContinue:v,subTotal:y,igv:O,totalFinal:i,openModal:C,totalWithoutDiscounts:B}){const a=r.length===0;return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 font-paragraph",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-2",children:a?"Tu carrito está vacío":"Revisa tu reserva"}),!a&&e.jsxs("p",{className:"text-gray-600",children:[r.length," ",r.length===1?"habitación seleccionada":"habitaciones seleccionadas"]})]}),e.jsx("div",{className:"space-y-4",children:a?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 bg-gray-50 rounded-2xl",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-full flex items-center justify-center mb-4",children:e.jsx("svg",{className:"w-10 h-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No hay habitaciones seleccionadas"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Explora nuestras opciones de alojamiento"}),e.jsx("a",{href:"/habitaciones",className:"px-8 py-3 bg-primary hover:bg-secondary text-white rounded-full hover:shadow-xl transition-all duration-300 font-bold hover:scale-105 active:scale-95",children:"Ver habitaciones disponibles"})]}):r.map((p,F)=>e.jsx(js,{...p,setCart:l},`${p.id}-${p.checkIn}-${F}`))})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl shadow-sm p-6 sticky top-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Resumen de reserva"}),!a&&e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3 pb-6 border-b",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:r.length}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:r.length===1?"Habitación":"Habitaciones"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:r.reduce((p,F)=>p+(F.nights||1),0)}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Noches"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:r.reduce((p,F)=>p+(F.guests||2),0)}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Huéspedes"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[E()," ",$(y)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Impuestos y cargos"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[E()," ",$(O)]})]})]}),e.jsx("div",{className:"pt-4 border-t",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900",children:"Total"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-primary",children:[E()," ",$(i)]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Incluye impuestos"})]})]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:v,disabled:a,className:`w-full py-4 px-6 rounded-full font-bold text-base transition-all duration-300 shadow-lg ${a?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-primary hover:bg-secondary text-white hover:shadow-2xl hover:scale-[1.02] active:scale-[0.98]"} ${(u==null?void 0:u.class_button)||""}`,children:a?"Carrito vacío":"Continuar con la reserva"}),e.jsx("a",{href:"/habitaciones",className:"block w-full py-3 px-6 text-center rounded-full font-semibold customtext-primary border-2 border-accent hover:bg-accent hover:text-white transition-all duration-300 shadow-md hover:shadow-lg",children:a?"Explorar habitaciones":"Agregar más habitaciones"})]}),e.jsx("div",{className:"mt-6 pt-6 border-t",children:e.jsxs("p",{className:"text-xs text-gray-500 leading-relaxed",children:["Al proceder, aceptas nuestros"," ",e.jsx("button",{onClick:()=>C&&C(1),className:"text-primary font-medium hover:underline",children:"Términos y Condiciones"})," ","y"," ",e.jsx("button",{onClick:()=>C&&C(0),className:"text-primary font-medium hover:underline",children:"Política de Privacidad"}),"."]})})]})})]})}class Le{constructor(){ce(this,"checkout",async r=>{try{const l=await fetch(`${this.baseUrl}/checkout`,{method:"POST",body:r}),v=await l.json();if(!l.ok||v.status>=400)throw new Error(v.message||"Error al procesar la reserva");return v}catch(l){throw console.error("Error en checkout de booking:",l),l}});ce(this,"search",async r=>{try{return await J.Fetch("/api/hotels/rooms/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})}catch(l){throw console.error("Error buscando habitaciones:",l),l}});ce(this,"track",async r=>{try{return await J.Fetch(`${this.baseUrl}/${r}/track`,{method:"GET"})}catch(l){throw console.error("Error rastreando reserva:",l),l}});ce(this,"create",async r=>{try{return await J.Fetch(this.baseUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})}catch(l){throw console.error("Error creando reserva:",l),l}});this.baseUrl="/api/hotels/bookings"}}const Ns=new Le;function vs({isOpen:u,onClose:r,cart:l=[],subTotal:v,igv:y,totalFinal:O,request:i,coupon:C=null,descuentofinal:B=0,setCode:a,setBooking:p,onContinue:F}){const[b,T]=m.useState(!1),[S,j]=m.useState(null),w=m.useRef(null),M=o=>{const x=o.target.files[0];x&&j(x)},D=()=>{j(null),w.current&&(w.current.value="")},H=async()=>{if(!b){if(!S){z.error("Error al subir comprobante",{description:"Por favor, sube tu comprobante de pago",icon:e.jsx(A,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"top-right"});return}T(!0);try{const o=new FormData;Object.keys(i).forEach(k=>{i[k]!==null&&i[k]!==void 0&&o.append(k,i[k])}),o.append("payment_proof",S);const x=await Ns.checkout(o);console.log("✅ Respuesta del checkout:",x),x&&x.data&&x.data.code?(J.Local.set(`${q.APP_CORRELATIVE}_cart`,(J.Local.get(`${q.APP_CORRELATIVE}_cart`)||[]).filter(k=>k.type!=="booking")),p(x.data.sale||x.data),a(x.data.code),r(),F()):(console.error("❌ Respuesta inválida del servidor:",x),z.error("Error al procesar la reserva",{description:(x==null?void 0:x.message)||"No se recibió el código de confirmación",icon:e.jsx(A,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"top-right"}))}catch(o){console.error("Error al procesar el pago:",o),z.error("Error al procesar el pago",{description:o.message||"Ocurrió un error al procesar tu pago",icon:e.jsx(A,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"top-right"})}finally{T(!1)}}},Q=l.reduce((o,x)=>o+(x.nights||1),0),X=l.reduce((o,x)=>o+(x.guests||2),0);return e.jsx(ue,{isOpen:u,onRequestClose:r,className:"absolute left-1/2 -translate-x-1/2 bg-[#f5f5f5] rounded-2xl shadow-lg w-[95%] max-w-lg top-1/2 -translate-y-1/2 overflow-hidden font-paragraph",overlayClassName:"fixed inset-0 bg-black bg-opacity-50 z-50",ariaHideApp:!1,children:e.jsxs("div",{className:"py-6 px-6 md:px-10 flex flex-col gap-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("img",{src:`/assets/resources/logo.png?v=${crypto.randomUUID()}`,alt:q.APP_NAME,className:"h-12 object-contain",onError:o=>{o.target.onerror=null,o.target.src="/assets/img/logo-bk.svg"}})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:Y.get("checkout_dwallet_name")||"Pago con Yape / Plin"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:Y.get("checkout_dwallet_description")||"Sube tu comprobante de pago para confirmar tu reserva"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 space-y-3",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(ae,{size:18}),"Resumen de tu reserva"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[e.jsx("div",{className:"text-lg font-bold text-primary",children:l.length}),e.jsx("div",{className:"text-xs text-gray-500",children:"Habitación(es)"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[e.jsx("div",{className:"text-lg font-bold text-primary",children:Q}),e.jsx("div",{className:"text-xs text-gray-500",children:"Noche(s)"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[e.jsx("div",{className:"text-lg font-bold text-primary",children:X}),e.jsx("div",{className:"text-xs text-gray-500",children:"Huésped(es)"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Escanea el código QR para pagar"}),Y.get("checkout_dwallet_qr")?e.jsx("img",{src:`/assets/resources/${Y.get("checkout_dwallet_qr")}`,alt:Y.get("checkout_dwallet_name")||"QR Yape",className:"mx-auto max-w-[200px] rounded-lg",onError:o=>{o.currentTarget.src="/assets/img/salafabulosa/logoyape.png"}}):e.jsx("div",{className:"w-[200px] h-[200px] mx-auto bg-gray-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-gray-400 text-sm",children:"QR no configurado"})}),Y.get("checkout_dwallet_phone")&&e.jsxs("p",{className:"mt-3 text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"O transfiere a: "}),e.jsx("span",{className:"font-bold text-primary",children:Y.get("checkout_dwallet_phone")})]})]}),e.jsxs("div",{className:"bg-primary text-white rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-sm opacity-90",children:"Total a pagar"}),e.jsxs("p",{className:"text-2xl font-bold",children:[E()," ",$(O)]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Sube tu comprobante de pago *"}),e.jsx("input",{type:"file",ref:w,onChange:M,accept:"image/*",className:"hidden"}),S?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:URL.createObjectURL(S),alt:"Comprobante",className:"w-full max-h-48 object-contain rounded-lg"}),e.jsx("button",{type:"button",onClick:D,className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",children:e.jsx(pe,{size:16})})]}):e.jsxs("button",{type:"button",onClick:()=>{var o;return(o=w.current)==null?void 0:o.click()},className:"w-full border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-primary transition-colors",children:[e.jsx(Me,{className:"mx-auto h-8 w-8 text-gray-400"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Haz clic para subir tu comprobante"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"PNG, JPG hasta 5MB"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:H,disabled:b||!S,className:`w-full py-3 px-6 rounded-full font-semibold text-white transition-all ${b||!S?"bg-gray-400 cursor-not-allowed":"bg-primary hover:opacity-90"}`,children:b?"Procesando...":"Confirmar Reserva"}),e.jsx("button",{onClick:r,disabled:b,className:"w-full py-3 px-6 rounded-full font-semibold border border-gray-300 text-gray-700 hover:bg-gray-50 transition-all",children:"Cancelar"})]})]})})}const ws=new Le;function Cs({isOpen:u,onClose:r,cart:l=[],subTotal:v,igv:y,totalFinal:O,request:i,contacts:C=[],coupon:B=null,descuentofinal:a=0,setCode:p,setBooking:F,onContinue:b}){const[T,S]=m.useState(!1),[j,w]=m.useState(null),[M,D]=m.useState(null),H=m.useRef(null),Q=f=>{const h=f.target.files[0];h&&w(h)},X=()=>{w(null),H.current&&(H.current.value="")},o=(f,h)=>{navigator.clipboard.writeText(f),D(h),setTimeout(()=>D(null),2e3)},x=async()=>{if(!T){if(!j){z.error("Error al subir comprobante",{description:"Por favor, sube tu comprobante de pago",icon:e.jsx(A,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"top-right"});return}S(!0);try{const f=new FormData;Object.keys(i).forEach(c=>{i[c]!==null&&i[c]!==void 0&&f.append(c,i[c])}),f.append("payment_proof",j);const h=await ws.checkout(f);console.log("✅ Respuesta del checkout:",h),h&&h.data&&h.data.code?(J.Local.set(`${q.APP_CORRELATIVE}_cart`,(J.Local.get(`${q.APP_CORRELATIVE}_cart`)||[]).filter(c=>c.type!=="booking")),F(h.data.sale||h.data),p(h.data.code),r(),b()):(console.error("❌ Respuesta inválida del servidor:",h),z.error("Error al procesar la reserva",{description:(h==null?void 0:h.message)||"No se recibió el código de confirmación",icon:e.jsx(A,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"top-right"}))}catch(f){console.error("Error al procesar el pago:",f),z.error("Error al procesar el pago",{description:f.message||"Ocurrió un error al procesar tu pago",icon:e.jsx(A,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"top-right"})}finally{S(!1)}}},k=f=>{var h;return((h=C.find(c=>c.correlative===f))==null?void 0:h.description)||""},t=l.reduce((f,h)=>f+(h.nights||1),0),U=l.reduce((f,h)=>f+(h.guests||2),0),K=k("checkout_bank_name")||"Banco",R=k("checkout_account_number"),te=k("checkout_cci_number"),se=k("checkout_account_holder");return e.jsx(ue,{isOpen:u,onRequestClose:r,className:"absolute left-1/2 -translate-x-1/2 bg-[#f5f5f5] rounded-2xl shadow-lg w-[95%] max-w-lg top-1/2 -translate-y-1/2 overflow-hidden font-paragraph",overlayClassName:"fixed inset-0 bg-black bg-opacity-50 z-50",ariaHideApp:!1,children:e.jsxs("div",{className:"py-6 px-6 md:px-10 flex flex-col gap-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("img",{src:`/assets/resources/logo.png?v=${crypto.randomUUID()}`,alt:q.APP_NAME,className:"h-12 object-contain",onError:f=>{f.target.onerror=null,f.target.src="/assets/img/logo-bk.svg"}})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Pago por Transferencia"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Realiza la transferencia y sube tu comprobante"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 space-y-3",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(ae,{size:18}),"Resumen de tu reserva"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[e.jsx("div",{className:"text-lg font-bold text-primary",children:l.length}),e.jsx("div",{className:"text-xs text-gray-500",children:"Habitación(es)"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[e.jsx("div",{className:"text-lg font-bold text-primary",children:t}),e.jsx("div",{className:"text-xs text-gray-500",children:"Noche(s)"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[e.jsx("div",{className:"text-lg font-bold text-primary",children:U}),e.jsx("div",{className:"text-xs text-gray-500",children:"Huésped(es)"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 space-y-3",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(xs,{size:18}),"Datos para transferencia"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded-lg",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Banco"}),e.jsx("p",{className:"font-medium text-gray-800",children:K})]})}),R&&e.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Número de cuenta"}),e.jsx("p",{className:"font-medium text-gray-800",children:R})]}),e.jsx("button",{onClick:()=>o(R,"account"),className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:M==="account"?e.jsx(Se,{size:18,className:"text-green-500"}):e.jsx(Re,{size:18,className:"text-gray-400"})})]}),te&&e.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"CCI (Interbancario)"}),e.jsx("p",{className:"font-medium text-gray-800",children:te})]}),e.jsx("button",{onClick:()=>o(te,"cci"),className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:M==="cci"?e.jsx(Se,{size:18,className:"text-green-500"}):e.jsx(Re,{size:18,className:"text-gray-400"})})]}),se&&e.jsx("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded-lg",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Titular"}),e.jsx("p",{className:"font-medium text-gray-800",children:se})]})})]})]}),e.jsxs("div",{className:"bg-primary text-white rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-sm opacity-90",children:"Total a transferir"}),e.jsxs("p",{className:"text-2xl font-bold",children:[E()," ",$(O)]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Sube tu comprobante de transferencia *"}),e.jsx("input",{type:"file",ref:H,onChange:Q,accept:"image/*",className:"hidden"}),j?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:URL.createObjectURL(j),alt:"Comprobante",className:"w-full max-h-48 object-contain rounded-lg"}),e.jsx("button",{type:"button",onClick:X,className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",children:e.jsx(pe,{size:16})})]}):e.jsxs("button",{type:"button",onClick:()=>{var f;return(f=H.current)==null?void 0:f.click()},className:"w-full border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-primary transition-colors",children:[e.jsx(Me,{className:"mx-auto h-8 w-8 text-gray-400"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Haz clic para subir tu comprobante"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"PNG, JPG hasta 5MB"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:x,disabled:T||!j,className:`w-full py-3 px-6 rounded-full font-semibold text-white transition-all ${T||!j?"bg-gray-400 cursor-not-allowed":"bg-primary hover:opacity-90"}`,children:T?"Procesando...":"Confirmar Reserva"}),e.jsx("button",{onClick:r,disabled:T,className:"w-full py-3 px-6 rounded-full font-semibold border border-gray-300 text-gray-700 hover:bg-gray-50 transition-all",children:"Cancelar"})]})]})})}function ks({cart:u,setBooking:r,setCode:l,setCart:v,onContinue:y,noContinue:O,subTotal:i,igv:C,totalFinal:B,user:a,prefixes:p=[],ubigeos:F=[],contacts:b=[],totalPrice:T,data:S,openModal:j,setCouponDiscount:w,setCouponCode:M,totalWithoutDiscounts:D}){const H=(s,n)=>n?n.startsWith(s)?n:`${s}${n}`:"",Q=(s,n)=>s?s.startsWith(n)?s.substring(n.length):s:"",X=m.useRef(null),[o,x]=m.useState(null),k=[{value:"dni",label:"DNI"},{value:"ruc",label:"RUC"},{value:"ce",label:"CE"},{value:"pasaporte",label:"Pasaporte"}],[t,U]=m.useState(()=>{var g;const s=(a==null?void 0:a.phone_prefix)||"51",n=Q((a==null?void 0:a.phone)||"",s);return{name:(a==null?void 0:a.name)||"",lastname:(a==null?void 0:a.lastname)||"",email:(a==null?void 0:a.email)||"",phone_prefix:s,phone:n,documentType:((g=a==null?void 0:a.document_type)==null?void 0:g.toLowerCase())||"dni",document:(a==null?void 0:a.document_number)||"",comment:"",specialRequests:"",invoiceType:(a==null?void 0:a.invoiceType)||"boleta",businessName:(a==null?void 0:a.businessName)||""}});m.useEffect(()=>{if(a){const s=a.phone_prefix||"51",n=Q(a.phone||"",s);U(g=>{var _;return{...g,name:a.name||"",lastname:a.lastname||"",email:a.email||"",phone_prefix:s,phone:n,documentType:((_=a.document_type)==null?void 0:_.toLowerCase())||"dni",document:a.document_number||"",invoiceType:a.invoiceType||"boleta",businessName:a.businessName||""}})}},[a]);const K=(()=>{const s=b==null?void 0:b.find(_=>_.correlative==="checkout_mercadopago"),n=b==null?void 0:b.find(_=>_.correlative==="checkout_openpay"),g=b==null?void 0:b.find(_=>_.correlative==="checkout_culqi");return(s==null?void 0:s.description)==="true"||(n==null?void 0:n.description)==="true"||(g==null?void 0:g.description)==="true"||Y.get("checkout_dwallet")==="true"||Y.get("checkout_transfer")==="true"})(),R=s=>{const{name:n,value:g}=s.target;U(_=>({..._,[n]:g})),n==="invoiceType"&&U(_=>({..._,documentType:g==="factura"?"ruc":"dni",document:"",businessName:g==="factura"?_.businessName:""}))},[te,se]=m.useState(!1),[f,h]=m.useState(!1),[c,P]=m.useState({}),[G,Z]=m.useState(""),[N,de]=m.useState(null),[Es,Ts]=m.useState(0),[Ne,ve]=m.useState(!1),[we,re]=m.useState(""),[ze,he]=m.useState(!1),[ne,Ie]=m.useState(0),[Ae,Ue]=m.useState(null),L=s=>Math.round((s+Number.EPSILON)*100)/100,V=(()=>{if(!N)return 0;const s=L(i+C);if(N.discount_type==="percentage"){const n=parseFloat(N.discount_value)||0;return L(s*(n/100))}else return L(parseFloat(N.discount_value)||0)})(),ee=L(i+C),ge=(()=>{if(!Ae||ne<=0)return 0;const s=Math.max(0,L(ee-V));return L(s*(ne/100))})(),me=(()=>{const s=L(ee),n=Math.max(0,L(s-V)),g=L(n+ge);return Math.max(0,g)})(),qe=()=>{const s={};return t.name||(s.name="Nombre es requerido"),t.lastname||(s.lastname="Apellido es requerido"),t.email||(s.email="Email es requerido"),t.phone||(s.phone="Teléfono es requerido"),t.document||(s.document="Documento es requerido"),t.email&&!/\S+@\S+\.\S+/.test(t.email)&&(s.email="Email inválido"),t.document&&(t.documentType==="dni"&&t.document.length!==8?s.document="DNI debe tener 8 dígitos":t.documentType==="ruc"&&t.document.length!==11&&(s.document="RUC debe tener 11 dígitos")),t.invoiceType==="factura"&&!t.businessName&&(s.businessName="Razón social es requerida para factura"),P(s),Object.keys(s).length===0},Be=s=>{const n=Object.keys(s)[0];setTimeout(()=>{let g=document.querySelector(`[name="${n}"]`);g&&(g.classList.add("highlight-error"),setTimeout(()=>g.classList.remove("highlight-error"),2e3),g.scrollIntoView({behavior:"smooth",block:"center"}),["INPUT","SELECT","TEXTAREA"].includes(g.tagName)&&g.focus())},100)},He=async()=>{if(!G.trim()){re("Ingresa un código de cupón");return}ve(!0),re("");try{const s=await cs.validate({code:G,total:ee});if(s.valid){if(de(s.coupon),x(s.coupon),w)if(s.coupon.discount_type==="percentage"){const n=ee*(parseFloat(s.coupon.discount_value)/100);w(L(n))}else w(L(parseFloat(s.coupon.discount_value)));M&&M(G),z.success("Cupón aplicado",{description:`Descuento de ${s.coupon.discount_type==="percentage"?s.coupon.discount_value+"%":E()+" "+s.coupon.discount_value}`,icon:e.jsx(ie,{className:"h-5 w-5 text-green-500"}),duration:3e3,position:"top-right"})}else re(s.message||"Cupón no válido")}catch(s){console.error("Error validating coupon:",s),re("Error al validar el cupón")}finally{ve(!1)}},Ve=()=>{de(null),x(null),Z(""),re(""),w&&w(0),M&&M(null)},[De,fe]=m.useState(!1),[Ge,be]=m.useState(!1),[Ss,Rs]=m.useState(null),[We,Ce]=m.useState(!1),[Je,ke]=m.useState(!1),[$s,Qe]=m.useState(null),[_e,je]=m.useState(null),Xe=s=>{if(s.preventDefault(),!a){he(!0);return}if(!qe()){Be(c);return}fe(!0)},Ye=async s=>{try{let n=0;switch(s){case"tarjeta":n=parseFloat(q.get("checkout_mercadopago_commission")||0);break;case"culqi":n=parseFloat(q.get("checkout_culqi_commission")||0);break;case"openpay":n=parseFloat(q.get("checkout_openpay_commission")||0);break;case"yape":n=parseFloat(q.get("checkout_dwallet_commission")||0);break;case"transferencia":n=parseFloat(q.get("checkout_transfer_commission")||0);break;default:n=0}if(Ie(n),Ue(s),fe(!1),Qe(s),s==="openpay"){be(!0);return}const g=L((ee-V)*(n/100)),_=L(ee-V+g),W=u.map(d=>({id:d.id,name:d.name,room_type:d.room_type,check_in:d.check_in||d.checkIn,check_out:d.check_out||d.checkOut,nights:d.nights||1,guests:d.guests||2,adults:d.adults||d.guests||2,children:d.children||0,price:d.price,final_price:d.final_price||d.price,image:d.image})),I={user_id:(a==null?void 0:a.id)||"",name:(t==null?void 0:t.name)||"",lastname:(t==null?void 0:t.lastname)||"",fullname:`${t==null?void 0:t.name} ${t==null?void 0:t.lastname}`,phone_prefix:(t==null?void 0:t.phone_prefix)||"51",email:(t==null?void 0:t.email)||"",phone:H(t.phone_prefix||"51",t.phone),country:"Perú",comment:(t==null?void 0:t.comment)||"",special_requests:(t==null?void 0:t.specialRequests)||"",amount:_||0,delivery_type:"domicilio",details:JSON.stringify(W),cart:W,booking_type:"rooms",invoiceType:t.invoiceType||"",documentType:t.documentType||"",document:t.document||"",businessName:t.businessName||"",payment_method:s||null,coupon_id:N?N.id:null,coupon_discount:V||0,payment_commission:g||0,payment_commission_percentage:n||0,total_amount:_||0};if(je(I),s==="tarjeta"){if(!window.MercadoPago){console.error("❌ MercadoPago aún no se ha cargado.");return}try{const oe=await os(I);oe.status?(r(oe.sale),l(oe.code),y()):z.error("Error en el Pago",{description:"El pago ha sido rechazado",icon:e.jsx(A,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"})}catch{z.error("Error en el Pago",{description:"No se llegó a procesar el pago",icon:e.jsx(A,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"})}}else if(s==="culqi"){h(!0);try{if(!q.CULQI_ENABLED){z.error("Método de pago no disponible",{description:"El procesamiento de pagos con Culqi está temporalmente deshabilitado",icon:e.jsx(A,{className:"h-5 w-5 text-red-500"}),duration:4e3,position:"top-center"}),h(!1);return}const d=await is(I);d.status?(r(d.sale),l(d.code),y()):z.error("Error en el Pago",{description:d.message||"El pago ha sido rechazado",icon:e.jsx(A,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"})}catch{z.error("Error en el Pago",{description:"No se llegó a procesar el pago",icon:e.jsx(A,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"})}finally{h(!1)}}else s==="yape"?(je(I),Ce(!0)):s==="transferencia"&&(je(I),ke(!0))}catch(n){console.error("Error en pago:",n),z.error("Error",{description:"Ocurrió un error inesperado",icon:e.jsx(A,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"})}},Ke=async s=>{be(!1);try{const n=L((ee-V)*(ne/100)),g=L(ee-V+n),_=u.map(d=>({id:d.id,name:d.name,room_type:d.room_type,checkIn:d.checkIn,checkOut:d.checkOut,nights:d.nights||1,guests:d.guests||2,adults:d.adults||d.guests||2,children:d.children||0,price:d.price,final_price:d.final_price||d.price,image:d.image})),W={...s,user_id:(a==null?void 0:a.id)||"",name:(t==null?void 0:t.name)||"",lastname:(t==null?void 0:t.lastname)||"",fullname:`${t==null?void 0:t.name} ${t==null?void 0:t.lastname}`,phone_prefix:(t==null?void 0:t.phone_prefix)||"51",email:(t==null?void 0:t.email)||"",phone:H(t.phone_prefix||"51",t.phone),country:"Perú",comment:(t==null?void 0:t.comment)||"",special_requests:(t==null?void 0:t.specialRequests)||"",amount:g||0,cart:_,booking_type:"rooms",invoiceType:t.invoiceType||"",documentType:t.documentType||"",document:t.document||"",businessName:t.businessName||"",payment_method:"openpay",coupon_id:N?N.id:null,coupon_discount:V||0,payment_commission:n||0,payment_commission_percentage:ne||0,total_amount:g||0},I=await ls(W);I.status?(r(I.sale),l(I.code),y()):z.error("Error en el Pago",{description:I.message||"El pago ha sido rechazado",icon:e.jsx(A,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"})}catch(n){console.error("Error en pago OpenPay:",n),z.error("Error en el Pago",{description:"No se llegó a procesar el pago",icon:e.jsx(A,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"})}},Ze=u.reduce((s,n)=>s+(n.nights||1),0),es=u.reduce((s,n)=>s+(n.guests||2),0);return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 font-paragraph",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold customtext-neutral-dark mb-2",children:"Datos de la reserva"}),e.jsx("p",{className:"customtext-neutral-light",children:"Completa tus datos para confirmar la reserva"})]}),e.jsxs("div",{className:"bg-white border border-sections-color rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-semibold customtext-neutral-dark mb-4 flex items-center gap-2",children:[e.jsx(xe,{className:"w-5 h-5 customtext-primary"}),"Datos del huésped principal"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium customtext-neutral-dark mb-1",children:["Nombre ",e.jsx("span",{className:"customtext-danger",children:"*"})]}),e.jsx("input",{type:"text",name:"name",value:t.name,onChange:R,className:`w-full border ${c.name?"border-danger":"border-sections-color"} rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-accent focus:border-transparent outline-none transition-all`,placeholder:"Tu nombre"}),c.name&&e.jsx("p",{className:"customtext-danger text-xs mt-1",children:c.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium customtext-neutral-dark mb-1",children:["Apellido ",e.jsx("span",{className:"customtext-danger",children:"*"})]}),e.jsx("input",{type:"text",name:"lastname",value:t.lastname,onChange:R,className:`w-full border ${c.lastname?"border-danger":"border-sections-color"} rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-accent focus:border-transparent outline-none transition-all`,placeholder:"Tu apellido"}),c.lastname&&e.jsx("p",{className:"customtext-danger text-xs mt-1",children:c.lastname})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium customtext-neutral-dark mb-1",children:["Email ",e.jsx("span",{className:"customtext-danger",children:"*"})]}),e.jsx("input",{type:"email",name:"email",value:t.email,onChange:R,className:`w-full border ${c.email?"border-danger":"border-sections-color"} rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-accent focus:border-transparent outline-none transition-all`,placeholder:"tu@email.com"}),c.email&&e.jsx("p",{className:"customtext-danger text-xs mt-1",children:c.email})]}),e.jsxs("div",{className:"w-full",children:[e.jsxs("label",{htmlFor:"phone",className:"block text-sm font-medium customtext-neutral-dark mb-1",children:["Celular ",e.jsx("span",{className:"customtext-danger",children:"*"})]}),e.jsxs("div",{className:"flex gap-2 w-full",children:[e.jsx("div",{className:"max-w-[120px]",children:e.jsx(us,{name:"phone_prefix",value:p.find(s=>s.realCode===t.phone_prefix)?{value:p.find(s=>s.realCode===t.phone_prefix).realCode,label:`${p.find(s=>s.realCode===t.phone_prefix).beautyCode}`,flag:p.find(s=>s.realCode===t.phone_prefix).flag,code:p.find(s=>s.realCode===t.phone_prefix).beautyCode,country:p.find(s=>s.realCode===t.phone_prefix).country}:null,onChange:s=>U(n=>({...n,phone_prefix:(s==null?void 0:s.value)||""})),options:p.sort((s,n)=>s.country.localeCompare(n.country)).map(s=>({value:s.realCode,label:s.beautyCode,flag:s.flag,code:s.beautyCode,country:s.country})),formatOptionLabel:({flag:s,code:n,country:g})=>{var Pe,Ee;const _=p.find(le=>le.country===g),W=((Ee=(Pe=_==null?void 0:_.isoCode)==null?void 0:Pe.ISO1)==null?void 0:Ee.toLowerCase())||g.toLowerCase().substring(0,2),I=[`https://flagsapi.com/${W.toUpperCase()}/flat/24.png`,`https://flagcdn.com/${W}.svg`,`https://purecatamphetamine.github.io/country-flag-icons/3x2/${W.toUpperCase()}.svg`,`https://cdn.jsdelivr.net/gh/hampusborgos/country-flags@main/svg/${W}.svg`,`https://raw.githubusercontent.com/lipis/flag-icons/main/flags/4x3/${W}.svg`];let d=0;const oe=le=>{if(d++,d<I.length)le.target.src=I[d];else{le.target.style.display="none";const Te=le.target.parentNode.querySelector(".flag-fallback");Te&&(Te.style.display="flex")}};return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:I[0],alt:`Bandera de ${g}`,className:"w-6 h-4 object-cover rounded-sm flex-shrink-0 border border-gray-200",onError:oe,style:{minWidth:"24px",minHeight:"16px"}}),e.jsx("div",{className:"flag-fallback w-6 h-4 bg-gray-200 rounded-sm flex items-center justify-center flex-shrink-0 border border-gray-300",style:{display:"none",minWidth:"24px",minHeight:"16px"},children:e.jsx("span",{className:"text-xs text-gray-500",children:W.toUpperCase()})}),e.jsx("span",{className:"font-medium text-sm",children:n})]})},placeholder:"País",isClearable:!1,isSearchable:!0,styles:{control:s=>({...s,minHeight:"48px",border:"1px solid #d1d5db",borderRadius:"0.75rem",fontSize:"14px","&:hover":{borderColor:"#9ca3af"},"&:focus-within":{borderColor:"#3b82f6",boxShadow:"0 0 0 2px rgba(59, 130, 246, 0.1)"}}),option:(s,n)=>({...s,backgroundColor:n.isSelected?"#3b82f6":n.isFocused?"#f3f4f6":"white",color:n.isSelected?"white":"#374151",padding:"8px 12px"}),singleValue:s=>({...s,display:"flex",alignItems:"center",gap:"6px"}),menu:s=>({...s,zIndex:9999})},filterOption:(s,n)=>s.data.country.toLowerCase().includes(n.toLowerCase())||s.data.code.toLowerCase().includes(n.toLowerCase())})}),e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"tel",id:"phone",name:"phone",value:t.phone,onChange:R,className:`w-full border ${c.phone?"border-danger":"border-sections-color"} rounded-xl px-4 py-3 focus:ring-2 focus:ring-accent focus:border-transparent outline-none transition-all`,placeholder:"000 000 000"})})]}),c.phone&&e.jsx("p",{className:"customtext-danger text-xs mt-1",children:c.phone})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium customtext-neutral-dark mb-1",children:["Tipo de documento ",e.jsx("span",{className:"customtext-danger",children:"*"})]}),e.jsx("select",{name:"documentType",value:t.documentType,onChange:R,className:"w-full border border-sections-color rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-accent focus:border-transparent outline-none transition-all",children:k.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium customtext-neutral-dark mb-1",children:["Número de documento ",e.jsx("span",{className:"customtext-danger",children:"*"})]}),e.jsx("input",{type:"text",name:"document",value:t.document,onChange:R,className:`w-full border ${c.document?"border-danger":"border-sections-color"} rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-accent focus:border-transparent outline-none transition-all`,placeholder:t.documentType==="dni"?"12345678":"Número de documento",maxLength:t.documentType==="dni"?8:t.documentType==="ruc"?11:20}),c.document&&e.jsx("p",{className:"customtext-danger text-xs mt-1",children:c.document})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium customtext-neutral-dark mb-1",children:"Solicitudes especiales (opcional)"}),e.jsx("textarea",{name:"specialRequests",value:t.specialRequests,onChange:R,rows:3,className:"w-full border border-sections-color rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-accent focus:border-transparent outline-none transition-all resize-none",placeholder:"¿Tienes alguna solicitud especial? (cama extra, llegada tarde, etc.)"})]})]}),e.jsxs("div",{className:"bg-white border border-sections-color rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-semibold customtext-neutral-dark mb-4 flex items-center gap-2",children:[e.jsx(ps,{className:"w-5 h-5 customtext-primary"}),"Comprobante de pago"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("label",{className:`flex items-center gap-3 p-4 border-2 rounded-xl cursor-pointer transition-all ${t.invoiceType==="boleta"?"border-accent bg-accent/5":"border-sections-color hover:border-accent"}`,children:[e.jsx("input",{type:"radio",name:"invoiceType",value:"boleta",checked:t.invoiceType==="boleta",onChange:R,className:"text-accent focus:ring-accent"}),e.jsx("span",{className:"font-medium customtext-neutral-dark",children:"Boleta"})]}),e.jsxs("label",{className:`flex items-center gap-3 p-4 border-2 rounded-xl cursor-pointer transition-all ${t.invoiceType==="factura"?"border-accent bg-accent/5":"border-sections-color hover:border-accent"}`,children:[e.jsx("input",{type:"radio",name:"invoiceType",value:"factura",checked:t.invoiceType==="factura",onChange:R,className:"text-accent focus:ring-accent"}),e.jsx("span",{className:"font-medium",children:"Factura"})]})]}),t.invoiceType==="factura"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium customtext-neutral-dark mb-1",children:["Razón Social ",e.jsx("span",{className:"customtext-danger",children:"*"})]}),e.jsx("input",{type:"text",name:"businessName",value:t.businessName,onChange:R,className:`w-full border ${c.businessName?"border-danger":"border-sections-color"} rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-accent focus:border-transparent outline-none transition-all`,placeholder:"Nombre de la empresa"}),c.businessName&&e.jsx("p",{className:"customtext-danger text-xs mt-1",children:c.businessName})]})]}),e.jsx("div",{className:"lg:hidden",children:e.jsx("button",{onClick:O,className:"w-full py-3 px-6 text-center rounded-full font-semibold customtext-neutral-dark border-2 border-accent hover:bg-accent hover:text-white transition-all duration-300",children:"Volver al carrito"})})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white border border-sections-color rounded-2xl shadow-md p-6 sticky top-4",children:[e.jsx("h3",{className:"text-xl font-bold customtext-neutral-dark mb-6",children:"Resumen de pago"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 pb-6 border-b border-sections-color mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold customtext-primary",children:u.length}),e.jsx("div",{className:"text-xs customtext-neutral-light mt-1",children:u.length===1?"Habitación":"Habitaciones"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold customtext-primary",children:Ze}),e.jsx("div",{className:"text-xs customtext-neutral-light mt-1",children:"Noches"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold customtext-primary",children:es}),e.jsx("div",{className:"text-xs customtext-neutral-light mt-1",children:"Huéspedes"})]})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"customtext-neutral-light",children:"Subtotal"}),e.jsxs("span",{className:"font-medium customtext-neutral-dark",children:[E()," ",$(i)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"customtext-neutral-light",children:"Impuestos y cargos"}),e.jsxs("span",{className:"font-medium customtext-neutral-dark",children:[E()," ",$(C)]})]}),N&&V>0&&e.jsxs("div",{className:"flex justify-between text-sm customtext-success",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ie,{size:14}),"Cupón (",N.code,")"]}),e.jsxs("span",{className:"font-medium",children:["-",E()," ",$(V)]})]}),ge>0&&e.jsxs("div",{className:"flex justify-between text-sm customtext-warning",children:[e.jsxs("span",{children:["Comisión (",ne,"%)"]}),e.jsxs("span",{className:"font-medium",children:["+",E()," ",$(ge)]})]})]}),e.jsxs("div",{className:"mb-6 pb-6 border-b border-sections-color",children:[e.jsx("label",{className:"block text-sm font-medium customtext-neutral-dark mb-2",children:"¿Tienes un cupón?"}),N?e.jsxs("div",{className:"flex items-center justify-between bg-success/10 border border-success rounded-lg px-4 py-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{size:18,className:"customtext-success"}),e.jsx("span",{className:"font-medium customtext-success",children:N.code})]}),e.jsx("button",{onClick:Ve,className:"customtext-danger hover:text-danger text-sm font-medium",children:"Quitar"})]}):e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",ref:X,value:G,onChange:s=>Z(s.target.value.toUpperCase()),placeholder:"Código de cupón",className:"flex-1 border border-gray-300 rounded-full px-4 py-2.5 text-sm focus:ring-2 focus:ring-accent focus:border-transparent outline-none transition-all"}),e.jsx("button",{onClick:He,disabled:Ne,className:"px-6 py-2.5 bg-accent hover:bg-secondary text-white rounded-full text-sm font-bold hover:shadow-lg transition-all duration-300 disabled:opacity-50 hover:scale-105 active:scale-95",children:Ne?"...":"Aplicar"})]}),we&&e.jsx("p",{className:"customtext-danger text-xs mt-2",children:we})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-bold customtext-neutral-dark",children:"Total a pagar"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold customtext-primary",children:[E()," ",$(me)]}),e.jsx("div",{className:"text-xs customtext-neutral-light",children:"Incluye impuestos"})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:Xe,disabled:f||!K,className:`w-full py-4 px-6 rounded-full font-bold text-base transition-all duration-300 bg-primary hover:bg-secondary text-white hover:shadow-2xl hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed shadow-lg ${(S==null?void 0:S.class_button)||""}`,children:f?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Procesando..."]}):"Confirmar y pagar"}),e.jsx("button",{onClick:O,className:"hidden lg:block w-full py-3 px-6 text-center rounded-full font-semibold customtext-primary border-2 border-accent hover:bg-accent hover:text-white transition-all duration-300 shadow-md hover:shadow-lg",children:"Volver al carrito"})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-sections-color",children:e.jsxs("p",{className:"text-xs customtext-neutral-light leading-relaxed",children:["Al proceder, aceptas nuestros"," ",e.jsx("button",{onClick:()=>j&&j(1),className:"customtext-accent font-medium hover:underline",children:"Términos y Condiciones"})," ","y"," ",e.jsx("button",{onClick:()=>j&&j(0),className:"customtext-accent font-medium hover:underline",children:"Política de Privacidad"})]})})]})}),e.jsx(ue,{isOpen:ze,onRequestClose:()=>he(!1),contentLabel:"Iniciar sesión",className:"fixed top-0 left-0 right-0 bottom-0 flex items-center justify-center p-4 z-50",overlayClassName:"fixed inset-0 bg-black bg-opacity-50 z-[999]",ariaHideApp:!1,children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(hs,{className:"w-16 h-16 customtext-neutral-light mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold customtext-neutral-dark mb-2",children:"Inicia sesión"}),e.jsx("p",{className:"customtext-neutral-light",children:"Para continuar con tu reserva, necesitas iniciar sesión o crear una cuenta."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("a",{href:"/login",className:"block w-full py-4 px-6 text-center rounded-full font-bold bg-primary hover:bg-secondary text-white hover:shadow-xl transition-all duration-300 shadow-lg hover:scale-105 active:scale-95",children:"Iniciar sesión"}),e.jsx("a",{href:"/register",className:"block w-full py-3 px-6 text-center rounded-full font-semibold customtext-primary border-2 border-accent hover:bg-accent hover:text-white transition-all duration-300 shadow-md hover:shadow-lg",children:"Crear cuenta"}),e.jsx("button",{onClick:()=>he(!1),className:"block w-full py-2 text-center customtext-neutral-light hover:customtext-neutral-dark text-sm font-medium transition-colors",children:"Cancelar"})]})]})}),e.jsx(ms,{isOpen:De,contacts:b,cart:u,totalFinal:N?me:B,onClose:()=>fe(!1),onPaymentComplete:Ye}),e.jsx(ns,{isOpen:Ge,onClose:()=>be(!1),onTokenCreated:Ke}),e.jsx(vs,{isOpen:We,cart:u,subTotal:i,igv:C,totalFinal:N?me:B,request:_e,onClose:()=>Ce(!1),contacts:b,coupon:N,descuentofinal:V,setCode:l,setBooking:r,onContinue:y}),e.jsx(Cs,{isOpen:Je,cart:u,subTotal:i,igv:C,totalFinal:N?me:B,contacts:b,request:_e,onClose:()=>ke(!1),coupon:N,descuentofinal:V,setCode:l,setBooking:r,onContinue:y})]})}const _s=({code:u})=>new Promise(async(r,l)=>{try{console.log("Codigo de reserva:",u);const{status:v,result:y}=await J.Fetch("./api/hotels/bookings/order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:u})});if(!v||!y.order){J.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:(y==null?void 0:y.message)||"Error: no se pudo cargar la reserva",type:"danger"}),l((y==null?void 0:y.message)||"Error: no se pudo cargar la reserva");return}r(y)}catch(v){console.error("Error en recoveryBookingData:",v),J.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:v.message||"Error al cargar los datos de la reserva",type:"danger"}),l(v.message||"Error al cargar los datos de la reserva")}});function Ps({setCart:u,cart:r,code:l,data:v,couponDiscount:y=0,couponCode:O=null}){var X;const[i,C]=m.useState(null),[B,a]=m.useState(!0),[p,F]=m.useState(null);m.useEffect(()=>{l&&((async()=>{try{const x=await _s({code:l});C(x.order)}catch(x){F(x.message||x)}finally{a(!1)}})(),J.Local.delete(`${q.APP_CORRELATIVE}_cart`))},[l]);const b=o=>{if(!o)return"";try{const x=new Date(o);return Fe(x,"dd 'de' MMMM, yyyy",{locale:Oe})}catch{return o}},T=o=>({standard:"Estándar",suite:"Suite",deluxe:"Deluxe",presidential:"Presidencial",family:"Familiar",executive:"Ejecutiva",single:"Individual",double:"Doble"})[o]||o;if(B)return e.jsx("div",{className:"mx-auto",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 font-paragraph text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{children:"Cargando detalles de tu reserva..."})]})});if(p)return e.jsx("div",{className:"mx-auto",children:e.jsx("div",{className:"bg-white rounded-lg shadow p-6 font-paragraph text-center text-red-500",children:e.jsxs("p",{children:["Error al cargar la reserva: ",p]})})});if(!i)return e.jsx("div",{className:"mx-auto",children:e.jsx("div",{className:"bg-white rounded-lg shadow p-6 font-paragraph text-center",children:e.jsx("p",{children:"No se encontraron datos de la reserva"})})});const S=((X=i==null?void 0:i.items)==null?void 0:X.reduce((o,x)=>{const k=x.final_price||x.price||0,t=x.nights||1;return o+k*t},0))||0,j=parseFloat((S/1.18).toFixed(2)),w=parseFloat((S-j).toFixed(2)),M=parseFloat(i.coupon_discount||0),D=parseFloat(i.payment_commission||0),Q=parseFloat(j)+parseFloat(w)-M+D;return e.jsx("div",{className:"max-w-4xl mx-auto font-paragraph",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-success p-8 text-white text-center",children:[e.jsx(ie,{className:"w-16 h-16 mx-auto mb-4"}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"¡Reserva Confirmada!"}),e.jsxs("p",{className:"text-lg opacity-90",children:["Código de reserva: ",e.jsx("span",{className:"font-mono font-bold",children:i.code})]})]}),e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(xe,{className:"w-5 h-5 customtext-primary"}),"Información del Huésped"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 bg-sections-color rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ye,{className:"w-5 h-5 text-gray-400 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Nombre completo"}),e.jsxs("p",{className:"font-semibold",children:[i.name," ",i.lastname]})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ye,{className:"w-5 h-5 text-gray-400 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),e.jsx("p",{className:"font-semibold",children:i.email})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(gs,{className:"w-5 h-5 text-gray-400 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Teléfono"}),e.jsxs("p",{className:"font-semibold",children:["+",i.phone_prefix," ",i.phone]})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(fs,{className:"w-5 h-5 text-gray-400 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Documento"}),e.jsx("p",{className:"font-semibold",children:i.document})]})]})]})]}),e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Habitaciones Reservadas"}),e.jsx("div",{className:"space-y-4",children:i.items&&i.items.map((o,x)=>{const k=o.final_price||o.price||0,t=o.nights||1,U=k*t,K=o.guests||2;return e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:o.image?`/storage/images/item/${o.image}`:"/assets/img/noimage/no_img.jpg",alt:o.name,className:"w-24 h-24 object-cover rounded-lg",onError:R=>R.target.src="/assets/img/noimage/no_img.jpg"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-lg mb-2",children:o.name}),o.room_type&&e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Tipo: ",T(o.room_type)]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{size:16,className:"customtext-info"}),e.jsx("span",{className:"text-gray-600",children:"Check-in:"}),e.jsx("span",{className:"font-semibold",children:b(o.check_in)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{size:16,className:"customtext-danger"}),e.jsx("span",{className:"text-gray-600",children:"Check-out:"}),e.jsx("span",{className:"font-semibold",children:b(o.check_out)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($e,{size:16,className:"customtext-secondary"}),e.jsx("span",{className:"text-gray-600",children:"Noches:"}),e.jsx("span",{className:"font-semibold",children:t})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{size:16,className:"customtext-success"}),e.jsx("span",{className:"text-gray-600",children:"Huéspedes:"}),e.jsx("span",{className:"font-semibold",children:K})]})]}),e.jsxs("div",{className:"mt-3 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Precio por noche"}),e.jsxs("p",{className:"font-semibold",children:[E()," ",$(k)]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Total habitación"}),e.jsxs("p",{className:"font-bold text-lg customtext-primary",children:[E()," ",$(U)]})]})]})]})]})},x)})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Resumen de Pago"}),e.jsxs("div",{className:"space-y-3 bg-sections-color rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Subtotal"}),e.jsxs("span",{className:"font-semibold",children:[E()," ",$(j)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"IGV (18%)"}),e.jsxs("span",{className:"font-semibold",children:[E()," ",$(w)]})]}),i.coupon_id&&e.jsxs("div",{className:"flex justify-between items-center customtext-success border-t pt-2",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(ie,{size:16}),"Cupón aplicado (",i.coupon_code,")"]}),e.jsxs("span",{className:"font-semibold",children:["-",E()," ",$(M)]})]}),D>0&&e.jsxs("div",{className:"flex justify-between items-center customtext-warning border-t pt-2",children:[e.jsxs("span",{className:"text-sm",children:["Comisión método de pago (",i.payment_commission_percentage||0,"%)"]}),e.jsxs("span",{className:"font-semibold",children:["+",E()," ",$(D)]})]}),e.jsxs("div",{className:"flex justify-between items-center font-bold text-xl border-t-2 pt-3 mt-3",children:[e.jsx("span",{children:"Total Pagado"}),e.jsxs("span",{className:"customtext-primary",children:[E()," ",$(Q)]})]}),i.payment_method&&e.jsxs("div",{className:"text-center text-sm text-gray-600 pt-2",children:["Método de pago: ",e.jsx("span",{className:"font-semibold capitalize",children:i.payment_method})]})]})]}),e.jsx("div",{className:"p-6 bg-sections-color border-t border-info",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ye,{className:"w-5 h-5 customtext-info mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold customtext-primary mb-2",children:"Confirmación enviada por email"}),e.jsxs("p",{className:"text-sm customtext-neutral-dark",children:["Hemos enviado un correo electrónico a ",e.jsx("span",{className:"font-semibold",children:i.email})," con todos los detalles de tu reserva. Por favor, revisa tu bandeja de entrada y la carpeta de spam."]})]})]})}),i.comment&&e.jsxs("div",{className:"p-6 bg-sections-color border-t border-warning",children:[e.jsx("h3",{className:"font-semibold customtext-primary mb-2",children:"Comentarios adicionales"}),e.jsx("p",{className:"text-sm customtext-neutral-dark",children:i.comment})]}),e.jsx("div",{className:"p-6 border-t border-gray-200",children:e.jsx(ds,{href:"/habitaciones",className:`w-full !rounded-full py-4 text-white ${v==null?void 0:v.class_button}`,children:"Ver más habitaciones"})}),e.jsxs("div",{className:"p-6 bg-sections-color text-center text-sm text-gray-600",children:[e.jsx("p",{children:"Si tienes alguna pregunta sobre tu reserva, no dudes en contactarnos."}),e.jsxs("p",{className:"mt-2",children:[e.jsx("span",{className:"font-semibold",children:"Código de reserva:"})," ",i.code]})]})]})})}function Nt({cart:u,setCart:r,user:l,prefixes:v,ubigeos:y,items:O,contacts:i,data:C,generals:B=[]}){const[a,p]=m.useState(1),F=m.useMemo(()=>u.filter(c=>c.type==="booking"),[u]),b=c=>{r(P=>{const G=P.filter(N=>N.type!=="booking"),Z=typeof c=="function"?c(P.filter(N=>N.type==="booking")):c;return[...G,...Z]})},T=F.reduce((c,P)=>{const G=P.final_price||P.price,Z=P.nights||1;return c+G*Z},0),S=parseFloat(Y.igv_checkout||0);let j,w;S>0?(j=T,w=parseFloat((T*(S/100)).toFixed(2))):(j=parseFloat((T/1.18).toFixed(2)),w=parseFloat((T-j).toFixed(2)));const[M,D]=m.useState(0),[H,Q]=m.useState(null),[X,o]=m.useState(null),x=c=>o(c),k=()=>o(null),t={privacy_policy:"Políticas de privacidad",terms_conditions:"Términos y condiciones",saleback_policy:"Políticas de cancelación y cambios"},U=j+w,K=Math.max(0,U-M),[R,te]=m.useState([]),[se,f]=m.useState([]);m.useEffect(()=>{const P=new URLSearchParams(window.location.search).get("code");P&&(f(P),p(3))},[window.location.search]),m.useEffect(()=>{se&&r(c=>c.filter(P=>P.type!=="booking"))},[se]),m.useEffect(()=>{(()=>{const P=document.createElement("script");P.src="https://sdk.mercadopago.com/js/v2",P.async=!0,document.body.appendChild(P)})()},[]);const h=c=>{p(c),window.scrollTo({top:0,behavior:"smooth"})};return e.jsx("div",{className:"bg-sections-color",children:e.jsxs("div",{className:"min-h-screen  py-4 md:py-12 px-2 sm:px-primary 2xl:px-0 2xl:max-w-7xl mx-auto",children:[e.jsxs("div",{className:"bg-white p-3 md:p-8 rounded-xl md:rounded-3xl shadow-sm",children:[e.jsx("div",{className:"mb-6 md:mb-10",children:e.jsxs("div",{className:"flex items-center justify-between gap-1 md:gap-4 max-w-3xl mx-auto",children:[e.jsxs("div",{className:`flex flex-col items-center md:flex-row md:items-center gap-1 md:gap-2 transition-all duration-300 ${a>=1?"customtext-primary font-bold":"customtext-neutral-light"}`,children:[e.jsx("span",{className:`w-10 h-10 md:w-12 md:h-12 rounded-full border-2 flex items-center justify-center text-sm md:text-base font-bold shadow-lg transition-all duration-300 ${a>=1?"bg-primary text-white border-primary scale-110":"bg-white customtext-neutral-light border-gray-300"}`,children:"1"}),e.jsx("span",{className:"text-[10px] md:text-sm font-semibold text-center",children:"Carrito"})]}),e.jsx("div",{className:"mb-4 lg:mb-0 flex-1 h-1 bg-gray-200 relative rounded-full overflow-hidden",children:e.jsx("div",{className:"absolute inset-0 transition-all duration-700 bg-gradient-to-r from-primary to-secondary shadow-md",style:{width:a>1?"100%":"0%"}})}),e.jsxs("div",{className:`flex flex-col items-center md:flex-row md:items-center gap-1 md:gap-2 transition-all duration-300 ${a>1?"customtext-primary font-bold":"customtext-neutral-light"}`,children:[e.jsx("span",{className:`w-10 h-10 md:w-12 md:h-12 rounded-full border-2 flex items-center justify-center text-sm md:text-base font-bold shadow-lg transition-all duration-300 ${a>1?"bg-primary text-white border-primary scale-110":"bg-white customtext-neutral-light border-gray-300"}`,children:"2"}),e.jsx("span",{className:"text-[10px] md:text-sm font-semibold text-center",children:"Pago"})]}),e.jsx("div",{className:"mb-4 lg:mb-0 flex-1 h-1 bg-gray-200 relative rounded-full overflow-hidden",children:e.jsx("div",{className:"absolute inset-0 transition-all duration-700 bg-gradient-to-r from-primary to-secondary shadow-md",style:{width:a>2?"100%":"0%"}})}),e.jsxs("div",{className:`flex flex-col items-center md:flex-row md:items-center gap-1 md:gap-2 transition-all duration-300 ${a===3?"customtext-primary font-bold":"customtext-neutral-light"}`,children:[e.jsx("span",{className:`w-10 h-10 md:w-12 md:h-12 rounded-full border-2 flex items-center justify-center text-sm md:text-base font-bold shadow-lg transition-all duration-300 ${a===3?"bg-success text-white border-success scale-110":"bg-white customtext-neutral-light border-gray-300"}`,children:"3"}),e.jsx("span",{className:"text-[10px] md:text-sm font-semibold text-center",children:"Confirmación"})]})]})}),a===1&&e.jsx(ys,{data:C,cart:F,setCart:b,onContinue:()=>h(2),subTotal:j,totalPrice:T,igv:w,totalFinal:K,openModal:x,totalWithoutDiscounts:U}),a===2&&e.jsx(ks,{data:C,setCode:f,cart:F,setBooking:te,setCart:b,onContinue:()=>h(3),noContinue:()=>h(1),subTotal:j,totalPrice:T,igv:w,totalFinal:K,user:l,prefixes:v,contacts:i,ubigeos:y,items:O,openModal:x,setCouponDiscount:D,setCouponCode:Q,totalWithoutDiscounts:U}),a===3&&e.jsx(Ps,{data:C,code:se,setCart:b,cart:R,subTotal:j,totalPrice:T,igv:w,totalFinal:K,couponDiscount:M,couponCode:H,totalWithoutDiscounts:U})]}),Object.keys(t).map((c,P)=>{var N;const G=t[c],Z=((N=B.find(de=>de.correlative==c))==null?void 0:N.description)??"";return e.jsx(ue,{isOpen:X===P,onRequestClose:k,contentLabel:G,className:"fixed top-0 left-0 right-0 bottom-0 flex items-center justify-center p-4 z-50",overlayClassName:"fixed inset-0 bg-black bg-opacity-50 z-[999]",ariaHideApp:!1,children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-primary to-secondary",children:[e.jsx("h2",{className:"text-2xl font-bold text-white pr-4",children:G}),e.jsx("button",{onClick:k,className:"flex-shrink-0 w-10 h-10 rounded-full bg-white/20 hover:bg-white/30 text-white transition-all duration-300 flex items-center justify-center hover:scale-110 shadow-lg","aria-label":"Cerrar modal",children:e.jsx(pe,{size:20,strokeWidth:2.5})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsx("div",{className:"prose prose-gray max-w-none",children:e.jsx(as,{html:Z})})}),e.jsx("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-200 bg-sections-color",children:e.jsx("button",{onClick:k,className:"px-8 py-3 bg-primary hover:bg-secondary text-white rounded-full transition-all duration-300 font-bold shadow-lg hover:shadow-xl hover:scale-105 active:scale-95",children:"Cerrar"})})]})},P)})]})})}export{Nt as default};
