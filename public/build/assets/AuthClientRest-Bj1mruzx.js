var d=Object.defineProperty;var l=(a,o,r)=>o in a?d(a,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[o]=r;var i=(a,o,r)=>l(a,typeof o!="symbol"?o+"":o,r);import{m as n}from"./main-BvVILmTO.js";import{t}from"./index-CMHsc23u.js";import{G as u}from"./Global-ErywZRdd.js";class c{}i(c,"login",async o=>{var r;console.log(o);try{const{status:e,result:s}=await n.Fetch("./api/login-client",{method:"POST",body:JSON.stringify(o)});return!e||s.status!==200?(t.error("Error al iniciar sesión",{description:s.message||"Ocurrió un error inesperado.",duration:3e3,position:"top-right",richColors:!0}),!1):(t.success("¡Inicio de sesión exitoso!",{description:`Bienvenido${(r=s==null?void 0:s.data)!=null&&r.name?`, ${s.data.name}`:""} a ${u.APP_NAME}.`,duration:3e3,position:"top-right",richColors:!0}),s)}catch(e){return t.error("Error al iniciar sesión",{description:e.message||"Ocurrió un error inesperado.",duration:3e3,position:"top-right",richColors:!0}),!1}}),i(c,"signup",async o=>{var r;try{const{status:e,result:s}=await n.Fetch("./api/signup-client",{method:"POST",body:JSON.stringify(o)});if(!e)throw new Error((s==null?void 0:s.message)||"Error al registrar el usuario");return t.success("¡Registro exitoso!",{description:`Bienvenido${(r=s==null?void 0:s.data)!=null&&r.name?`, ${s.data.name}`:""} a ${u.APP_NAME}. Tu cuenta ha sido creada correctamente.`,duration:3e3,position:"top-right",richColors:!0}),s.data}catch(e){return t.error("¡Registro fallido!",{description:e.message||"Ocurrió un error inesperado.",duration:3e3,position:"top-right",richColors:!0}),null}}),i(c,"forgotPassword",async o=>{try{const{status:r,result:e}=await n.Fetch("./api/forgot-password-client",{method:"POST",body:JSON.stringify(o)});if(!r)throw new Error((e==null?void 0:e.message)||"Error al solicitar el restablecimiento de contraseña");return e.data&&e.data.user_exists===!1?(t.warning("Cuenta no encontrada",{description:"No tienes una cuenta registrada con este correo. ¿Deseas crear una cuenta?",duration:5e3,position:"top-right",richColors:!0,action:{label:"Crear cuenta",onClick:()=>{window.location.href="/register"}}}),{success:!1,user_exists:!1,message:"Email no registrado"}):(t.success("¡Correo enviado!",{description:"Se ha enviado un enlace para restablecer tu contraseña a tu correo electrónico.",duration:3e3,position:"top-right",richColors:!0}),{success:!0,user_exists:!0,message:e.message})}catch(r){return t.error("Error al solicitar el restablecimiento de contraseña",{description:r.message||"Ocurrió un error inesperado.",duration:3e3,position:"top-right",richColors:!0}),{success:!1,user_exists:null,message:r.message}}}),i(c,"resetPassword",async o=>{try{const{status:r,result:e}=await n.Fetch("./api/reset-password-client",{method:"POST",body:JSON.stringify(o)});if(!r)throw new Error((e==null?void 0:e.message)||"Error al restablecer la contraseña");return t.success("¡Contraseña restablecida!",{description:"Tu contraseña ha sido restablecida correctamente. Puedes iniciar sesión con tu nueva contraseña.",duration:3e3,position:"top-right",richColors:!0}),!0}catch(r){return t.error("Error al restablecer la contraseña",{description:r.message||"Ocurrió un error inesperado.",duration:3e3,position:"top-right",richColors:!0}),!1}});export{c as A};
