var e=Object.defineProperty,a=(a,l,t)=>((a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t)(a,"symbol"!=typeof l?l+"":l,t);import{c as l,j as t,r as i}from"./vendor-react-DD0uBW7s.js";import{B as s}from"./Base-DQk4WKCZ.js";import{S as o}from"./SwitchFormGroup-Dk6WRclX.js";import{T as r}from"./TextareaFormGroup-4KXpt4Nc.js";import{S as n}from"./CartKuchara-BG_NtHiU.js";import{B as c}from"./BasicRest-BuuGWTMX.js";import{I as d}from"./ImageFormGroup-DBShHzxF.js";import{I as m}from"./InputFormGroup-DY-ZEW8l.js";import{M as u}from"./Modal-DUl7LQD_.js";import{T as g}from"./Table-CLY50rKz.js";import{D as b}from"./DxButton-C6FT_beP.js";import{C as h,F as p}from"./CreateReactScript-C92mMLGn.js";import{R as v}from"./ReactAppend-D5wf6JB3.js";import{g as x}from"./getYTVideoId-Y8XMBBj_.js";import"./vendor-swiper-BQwfPLwm.js";import"./Global-BAGAPG-V.js";import"./TippyButton-BXJTBPrK.js";import"./Logout-CJj-4dQc.js";import"./MenuItemContainer--0h9gV_W.js";import"./Menu-Cmvatiox.js";import"./GoogleSignInButton-BciphYP2.js";import"./BooleanLimit-q2Ad9fGY.js";import"./General-ClVW7qxN.js";import"./LaravelSession-ByQnaUD3.js";const j=new class extends c{constructor(){super(...arguments),a(this,"path","admin/sliders"),a(this,"hasFiles",!0)}},f=()=>{const e=i.useRef(),a=i.useRef(),l=i.useRef(),s=i.useRef(),c=i.useRef(),h=i.useRef(),f=i.useRef(),_=i.useRef(),N=i.useRef(),w=i.useRef(),y=i.useRef(),R=i.useRef(),k=i.useRef(),C=i.useRef(),D=i.useRef(),F=i.useRef(),[S,I]=i.useState(!1),[E,T]=i.useState("image"),[B,A]=i.useState("content"),[G,q]=i.useState(""),[M,L]=i.useState(!0),[O,z]=i.useState(50),[V,P]=i.useState("to-b"),[U,Y]=i.useState("#000000"),[K,H]=i.useState("gradient"),[J,Q]=i.useState(!1),W=e=>{I(!!e?.id),l.current.value=e?.id??"",s.current.value=e?.name??"",c.current.value=e?.subtitle??"",h.current.value=e?.description??"",T(e?.bg_type??"image"),A("content"),q(e?.bg_video??""),f.current.value=null,f.image.src=e?.image?`/storage/images/slider/${e.image}`:"",_.current.value=null,_.image.src=e?.bg_image?`/storage/images/slider/${e.bg_image}`:"",N.current.value=null,N.image.src=e?.bg_image_mobile?`/storage/images/slider/${e.bg_image_mobile}`:"",w.current.value=e?.bg_video?`https://youtu.be/${e.bg_video}`:"",y.current.value=e?.button_text??"",R.current.value=e?.button_link??"",k.current.value=e?.secondary_button_text??"",C.current.value=e?.secondary_button_link??"",D.current.value=e?.title_color??"#000000",F.current.value=e?.description_color??"#000000",L(!1!==e?.show_overlay&&0!==e?.show_overlay),Y(e?.overlay_color??"#000000"),z(e?.overlay_opacity??50),P(e?.overlay_direction??"to-b"),H(e?.overlay_type??"gradient"),Q(!0===e?.button_new_tab||1===e?.button_new_tab),$(a.current).modal("show")};return t.jsxs(t.Fragment,{children:[t.jsx(g,{gridRef:e,title:"Sliders",rest:j,toolBar:a=>{a.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(e.current).dxDataGrid("instance").refresh()}}),a.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Nuevo slider",hint:"Nuevo slider",onClick:()=>W()}})},rowDragging:{allowReordering:!0,onReorder:async e=>{const a=e.toIndex;try{await j.reorder(e.itemData.id,a)&&await e.component.refresh()}catch(l){}},dropFeedbackMode:"push"},sorting:{mode:"single"},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"order_index",caption:"Orden",visible:!1,sortOrder:"asc",sortIndex:0},p.has("sliders","name")&&{dataField:"name",caption:"Titulo",width:"75%"},p.has("sliders","bg_image")&&{dataField:"bg_image",caption:"Imagen",width:"90px",allowFiltering:!1,cellTemplate:(e,{data:a})=>{v(e,t.jsx("img",{src:"image"==a.bg_type?`/storage/images/slider/${a.bg_image}`:`//img.youtube.com/vi/${a.bg_video}/mqdefault.jpg`,style:{width:"80px",height:"48px",objectFit:"cover",objectPosition:"center",borderRadius:"4px"},onError:e=>e.target.src="/api/cover/thumbnail/null"}))}},p.has("sliders","bg_image_mobile")&&{dataField:"bg_image_mobile",caption:"Imagen Mobile",width:"90px",allowFiltering:!1,cellTemplate:(e,{data:a})=>{v(e,t.jsx("img",{src:"image"==a.bg_type?`/storage/images/slider/${a.bg_image_mobile}`:`//img.youtube.com/vi/${a.bg_video}/mqdefault.jpg`,style:{width:"80px",height:"48px",objectFit:"cover",objectPosition:"center",borderRadius:"4px"},onError:e=>e.target.src="/api/cover/thumbnail/null"}))}},p.has("sliders","image")&&{dataField:"image",caption:"Imagen",width:"90px",allowFiltering:!1,cellTemplate:(e,{data:a})=>{v(e,t.jsx("img",{src:"image"==a.bg_type?`/storage/images/slider/${a.image}`:`//img.youtube.com/vi/${a.bg_video}/mqdefault.jpg`,style:{width:"80px",height:"48px",objectFit:"cover",objectPosition:"center",borderRadius:"4px"},onError:e=>e.target.src="/api/cover/thumbnail/null"}))}},{dataField:"visible",caption:"Visible",dataType:"boolean",cellTemplate:(a,{data:l})=>{$(a).empty(),v(a,t.jsx(o,{checked:1==l.visible,onChange:()=>(async({id:a,value:l})=>{await j.boolean({id:a,field:"visible",value:l})&&$(e.current).dxDataGrid("instance").refresh()})({id:l.id,value:!l.visible})}))}},{caption:"Acciones",cellTemplate:(a,{data:l})=>{a.css("text-overflow","unset"),a.append(b({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>W(l)})),a.append(b({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>(async a=>{const{isConfirmed:l}=await n.fire({title:"Eliminar slider",text:"¿Estas seguro de eliminar este slider?",icon:"warning",showCancelButton:!0,confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"});if(!l)return;await j.delete(a)&&$(e.current).dxDataGrid("instance").refresh()})(l.id)}))},allowFiltering:!1,allowExporting:!1}]}),t.jsx(u,{modalRef:a,title:S?"Editar slider":"Agregar slider",onSubmit:async t=>{t.preventDefault();const i={id:l.current.value||void 0,name:s.current.value,subtitle:c.current.value,description:h.current.value,button_text:y.current.value,button_link:R.current.value,button_new_tab:J?1:0,secondary_button_text:k.current.value,secondary_button_link:C.current.value,title_color:D.current.value,description_color:F.current.value,show_overlay:M?1:0,overlay_color:U,overlay_opacity:O,overlay_direction:V,overlay_type:K,bg_type:E,bg_video:"video"==E?G:null},o=new FormData;for(const e in i)o.append(e,i[e]);if("image"==E){const e=_.current.files[0];e&&o.append("bg_image",e);const a=N.current.files[0];a&&o.append("bg_image_mobile",a);const l=f.current.files[0];l&&o.append("image",l)}else o.append("bg_image",null),o.append("bg_image_mobile",null);_.getDeleteFlag&&_.getDeleteFlag()&&o.append("bg_image_delete","DELETE"),N.getDeleteFlag&&N.getDeleteFlag()&&o.append("bg_image_mobile_delete","DELETE"),f.getDeleteFlag&&f.getDeleteFlag()&&o.append("image_delete","DELETE");await j.save(o)&&(_.resetDeleteFlag&&_.resetDeleteFlag(),N.resetDeleteFlag&&N.resetDeleteFlag(),f.resetDeleteFlag&&f.resetDeleteFlag(),$(e.current).dxDataGrid("instance").refresh(),$(a.current).modal("hide"))},size:"lg",children:t.jsxs("div",{className:"row",id:"sliders-container",children:[t.jsx("input",{ref:l,type:"hidden"}),t.jsx("div",{className:"col-12 mb-3",children:t.jsxs("ul",{className:"nav nav-pills nav-fill",children:[t.jsx("li",{className:"nav-item",children:t.jsx("a",{href:"#form-tab-content",className:"nav-link "+("content"===B?"active":""),onClick:()=>A("content"),children:"Contenido"})}),t.jsx("li",{className:"nav-item",children:t.jsx("a",{href:"#form-tab-media",className:"nav-link "+("media"===B?"active":""),onClick:()=>A("media"),children:"Multimedia"})}),t.jsx("li",{className:"nav-item",children:t.jsx("a",{href:"#form-tab-buttons",className:"nav-link "+("buttons"===B?"active":""),onClick:()=>A("buttons"),children:"Botones"})}),t.jsx("li",{className:"nav-item",children:t.jsx("a",{href:"#form-tab-colors",className:"nav-link "+("colors"===B?"active":""),onClick:()=>A("colors"),children:"Colores"})})]})}),t.jsx("div",{className:"col-12 "+("content"!==B?"d-none":""),children:t.jsxs("div",{className:"row",children:[t.jsx(r,{eRef:s,label:"Título principal",col:"col-12",rows:2,required:!0}),t.jsx(r,{eRef:c,label:"Subtítulo (aparecerá resaltado)",col:"col-12",rows:2}),t.jsx(r,{eRef:h,label:"Descripción",rows:3,col:"col-12"})]})}),t.jsxs("div",{className:"col-12 "+("media"!==B?"d-none":""),children:[t.jsxs("ul",{hidden:!p.has("sliders","image")||!p.has("sliders","bg_image")||!p.has("sliders","bg_video"),className:"nav nav-pills navtab-bg nav-justified",children:[t.jsx("li",{className:"nav-item",children:t.jsx("a",{href:"#tab-image","data-bs-toggle":"tab","aria-expanded":"false",className:`nav-link ${"image"==E&&"active"}`,onClick:()=>T("image"),children:"Imagen"})}),t.jsx("li",{className:"nav-item",children:t.jsx("a",{href:"#tab-video","data-bs-toggle":"tab","aria-expanded":"true",className:`nav-link ${"video"==E&&"active"}`,onClick:()=>T("video"),children:"Video"})})]}),t.jsxs("div",{className:"tab-content",children:[t.jsxs("div",{className:`tab-pane ${"image"==E&&"show active"}`,id:"tab-image",children:[t.jsxs("div",{className:"row",children:[t.jsx(d,{hidden:!p.has("sliders","bg_image"),eRef:_,name:"bg_image",aspect:p.has("sliders","bg_image_mobile")?"4/3":"16/9",label:"Imagen de fondo (Desktop)",col:p.has("sliders","bg_image_mobile")?"col-md-8":"col-12"}),t.jsx(d,{hidden:!p.has("sliders","bg_image_mobile"),eRef:N,name:"bg_image_mobile",aspect:"9/14",label:"Imagen (Mobile)",col:"col-md-4"})]}),t.jsx(d,{hidden:!p.has("sliders","image"),eRef:f,name:"image",label:"Imagen"})]}),t.jsxs("div",{hidden:!p.has("sliders","bg_video"),className:`tab-pane ${"video"==E&&"show active"}`,id:"tab-video",children:[t.jsx(m,{eRef:w,label:"URL (Youtube)",type:"link",onChange:e=>q(x(e.target.value))}),t.jsx("iframe",{src:`https://www.youtube.com/embed/${G}`,className:"w-100 rounded border mb-2",style:{aspectRatio:21/9}})]})]})]}),t.jsx("div",{className:"col-12 "+("buttons"!==B?"d-none":""),children:t.jsxs("div",{className:"row",children:[t.jsx("div",{className:"col-12 mb-3",children:t.jsx("h6",{className:"text-muted",children:"Botón Principal"})}),t.jsx(m,{eRef:y,label:"Texto del botón",col:"col-sm-6",required:!0}),t.jsx(m,{eRef:R,label:"URL del botón",col:"col-sm-6",required:!0}),t.jsxs("div",{className:"col-sm-6 mt-2",children:[t.jsx("label",{className:"form-label",children:"Abrir en nueva pestaña"}),t.jsxs("div",{className:"form-check form-switch",children:[t.jsx("input",{className:"form-check-input",type:"checkbox",checked:J,onChange:e=>Q(e.target.checked),style:{width:"50px",height:"25px"}}),t.jsx("label",{className:"form-check-label ms-2",children:J?"Sí":"No"})]})]}),t.jsx("div",{className:"col-12 mt-3 mb-3",children:t.jsx("h6",{className:"text-muted",children:"Botón Secundario"})}),t.jsx(m,{eRef:k,label:"Texto del botón secundario",col:"col-sm-6"}),t.jsx(m,{eRef:C,label:"URL del botón secundario",col:"col-sm-6"})]})}),t.jsx("div",{className:"col-12 "+("colors"!==B?"d-none":""),children:t.jsxs("div",{className:"row",children:[t.jsxs("div",{className:"col-sm-6",children:[t.jsx("label",{className:"form-label",children:"Color del título"}),t.jsx("input",{ref:D,type:"color",className:"form-control form-control-color",defaultValue:"#000000",title:"Seleccionar color del título"})]}),t.jsxs("div",{className:"col-sm-6",children:[t.jsx("label",{className:"form-label",children:"Color de la descripción"}),t.jsx("input",{ref:F,type:"color",className:"form-control form-control-color",defaultValue:"#000000",title:"Seleccionar color de la descripción"})]}),t.jsx("div",{className:"col-12 mt-4 mb-3",children:t.jsx("h6",{className:"text-muted border-bottom pb-2",children:"Configuración del Overlay"})}),t.jsxs("div",{className:"col-sm-3",children:[t.jsx("label",{className:"form-label",children:"Mostrar Overlay"}),t.jsxs("div",{className:"form-check form-switch",children:[t.jsx("input",{className:"form-check-input",type:"checkbox",checked:M,onChange:e=>L(e.target.checked),style:{width:"50px",height:"25px"}}),t.jsx("label",{className:"form-check-label ms-2",children:M?"Sí":"No"})]})]}),t.jsxs("div",{className:"col-sm-3",children:[t.jsx("label",{className:"form-label",children:"Tipo de Overlay"}),t.jsxs("select",{className:"form-select",value:K,onChange:e=>H(e.target.value),disabled:!M,children:[t.jsx("option",{value:"gradient",children:"Gradiente"}),t.jsx("option",{value:"solid",children:"Color Sólido"})]})]}),t.jsxs("div",{className:"col-sm-3",children:[t.jsx("label",{className:"form-label",children:"Color del Overlay"}),t.jsx("input",{type:"color",className:"form-control form-control-color w-100",value:U,onChange:e=>Y(e.target.value),title:"Seleccionar color del overlay",disabled:!M})]}),"gradient"===K&&t.jsxs("div",{className:"col-sm-3",children:[t.jsx("label",{className:"form-label",children:"Dirección"}),t.jsxs("select",{className:"form-select",value:V,onChange:e=>P(e.target.value),disabled:!M,children:[t.jsx("option",{value:"to-r",children:"→ Izquierda a Derecha"}),t.jsx("option",{value:"to-l",children:"← Derecha a Izquierda"}),t.jsx("option",{value:"to-b",children:"↓ Arriba a Abajo"}),t.jsx("option",{value:"to-t",children:"↑ Abajo a Arriba"}),t.jsx("option",{value:"to-tr",children:"↗ Diagonal Arriba-Derecha"}),t.jsx("option",{value:"to-tl",children:"↖ Diagonal Arriba-Izquierda"}),t.jsx("option",{value:"to-br",children:"↘ Diagonal Abajo-Derecha"}),t.jsx("option",{value:"to-bl",children:"↙ Diagonal Abajo-Izquierda"})]})]}),t.jsxs("div",{className:"gradient"===K?"col-sm-12 mt-2":"col-sm-3",children:[t.jsxs("label",{className:"form-label",children:["Opacidad: ",O,"%"]}),t.jsx("input",{type:"range",className:"form-range",min:"0",max:"100",value:O,onChange:e=>z(parseInt(e.target.value)),disabled:!M})]}),M&&t.jsxs("div",{className:"col-12 mt-3",children:[t.jsx("label",{className:"form-label",children:"Vista previa del overlay"}),t.jsx("div",{className:"rounded border position-relative overflow-hidden",style:{height:"80px",background:"solid"===K?`${U}${Math.round(2.55*O).toString(16).padStart(2,"0")}`:`linear-gradient(${"to-r"===V?"to right":"to-l"===V?"to left":"to-t"===V?"to top":"to-b"===V?"to bottom":"to-tr"===V?"to top right":"to-tl"===V?"to top left":"to-br"===V?"to bottom right":"to bottom left"}, ${U}${Math.round(2.55*O).toString(16).padStart(2,"0")}, transparent)`},children:t.jsx("div",{className:"position-absolute w-100 h-100",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='10' height='10' fill='%23ccc'/%3E%3Crect x='10' y='10' width='10' height='10' fill='%23ccc'/%3E%3C/svg%3E\")",backgroundSize:"20px 20px",zIndex:-1}})}),t.jsx("small",{className:"text-muted",children:"solid"===K?"Color sólido con la opacidad seleccionada":"El gradiente irá desde el color seleccionado hasta transparente"})]})]})})]})})]})};h((e,a)=>{l.createRoot(e).render(t.jsx(s,{...a,title:"Sliders",children:t.jsx(f,{...a})}))});
