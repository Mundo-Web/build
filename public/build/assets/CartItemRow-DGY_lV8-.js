import{j as e,B as s,i as a,T as t,g as i,h as r,U as n,k as l,l as c,P as o}from"./vendor-react-CtPXetfm.js";import{C as m,N as d}from"./Number2Currency-BX4epFEo.js";import{S as x}from"./CartKuchara-Bi-J8T1O.js";import{m as h}from"./vendor-motion-CThzL09Q.js";const g=({setCart:g,index:u,...p})=>{const j="combo"===p.type,b="booking"===p.type,y=()=>{b?x.fire({title:"¿Eliminar reserva?",html:`\n                    <p class="mb-2">¿Deseas eliminar esta reserva del carrito?</p>\n                    <p class="text-sm text-gray-600">\n                        ${p.name}<br/>\n                        ${f(p.check_in)} - ${f(p.check_out)}\n                    </p>\n                `,icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar",confirmButtonColor:"#dc3545"}).then(e=>{e.isConfirmed&&(g(e=>e.filter(e=>!("booking"===e.type&&e.id===p.id&&e.check_in===p.check_in&&e.check_out===p.check_out))),x.fire({icon:"success",title:"Reserva eliminada",text:"La reserva ha sido eliminada del carrito",timer:2e3,showConfirmButton:!1}))}):g(e=>e.filter(e=>e.id!==p.id||e.type!==p.type))},N=e=>{if(e<1)return y();g(s=>s.map(s=>s.id===p.id&&s.type===p.type?{...s,quantity:e}:s))},f=e=>new Date(e).toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric"}),v={standard:"Estándar",suite:"Suite",deluxe:"Deluxe",presidential:"Presidencial",family:"Familiar",executive:"Ejecutiva"},w=b?p.total_price:j?p.final_price||p.price:p.discount>0?Math.min(p.price,p.discount):p.price;return b?e.jsx(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:50},transition:{delay:.05*u},className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl shadow-sm hover:shadow-md transition-shadow p-4 border border-blue-100",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-shrink-0 relative",children:[e.jsx("img",{src:p.image?`/api/items/media/${p.image}`:"/images/placeholder-room.jpg",onError:e=>e.target.src="/assets/img/noimage/no_img.jpg",className:"w-24 h-24 rounded-lg object-cover border-2 border-white shadow-sm",alt:p.name}),e.jsx("div",{className:"absolute -top-2 -right-2 bg-blue-600 text-white rounded-full p-1.5 shadow-md",children:e.jsx(s,{size:14})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-gray-900 mb-1",children:p.name}),e.jsxs("span",{className:"inline-block px-2 py-1 text-xs font-medium text-blue-700 bg-blue-100 rounded-full mb-2",children:[e.jsx(s,{className:"inline-block w-3 h-3 mr-1"}),v[p.room_type]||"Habitación"]})]}),e.jsx(a,{content:"Eliminar reserva",children:e.jsx("button",{onClick:y,className:"text-gray-400 hover:text-red-500 transition-colors self-start",children:e.jsx(t,{size:18})})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3 text-sm",children:[e.jsxs("div",{className:"flex items-center text-gray-700",children:[e.jsx(i,{size:14,className:"mr-1 text-green-600"}),e.jsx("span",{className:"font-medium",children:"Check-in:"}),e.jsx("span",{className:"ml-1",children:f(p.check_in)})]}),e.jsxs("div",{className:"flex items-center text-gray-700",children:[e.jsx(i,{size:14,className:"mr-1 text-red-600"}),e.jsx("span",{className:"font-medium",children:"Check-out:"}),e.jsx("span",{className:"ml-1",children:f(p.check_out)})]}),e.jsxs("div",{className:"flex items-center text-gray-700",children:[e.jsx(r,{size:14,className:"mr-1 text-indigo-600"}),e.jsxs("span",{className:"font-medium",children:[p.nights," noche",1!==p.nights?"s":""]})]}),e.jsxs("div",{className:"flex items-center text-gray-700",children:[e.jsx(n,{size:14,className:"mr-1 text-blue-600"}),e.jsxs("span",{className:"font-medium",children:[p.guests," huésped",1!==p.guests?"es":""]})]})]}),p.amenities&&p.amenities.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[p.amenities.slice(0,3).map(s=>e.jsxs("span",{className:"text-xs px-2 py-1 bg-white text-gray-600 rounded-full border border-gray-200",children:[e.jsx("i",{className:`${s.icon||"fas fa-check"} mr-1`}),s.name]},s.id)),p.amenities.length>3&&e.jsxs("span",{className:"text-xs px-2 py-1 bg-white text-gray-600 rounded-full border border-gray-200",children:["+",p.amenities.length-3]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-blue-200",children:[e.jsx("div",{className:"text-xs text-gray-600 bg-white px-3 py-1.5 rounded-full border border-blue-200",children:e.jsxs("span",{className:"font-medium",children:["S/ ",(p.total_price/p.nights).toFixed(2)," × ",p.nights," ",1===p.nights?"noche":"noches"]})}),e.jsxs("span",{className:"font-bold text-xl text-blue-700",children:[m()," ",d(p.total_price)]})]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-600 bg-white px-3 py-2 rounded-lg border border-blue-100",children:[e.jsx("i",{className:"fas fa-info-circle mr-1 text-blue-600"}),"Las reservas no requieren envío. Cancela hasta 24h antes del check-in."]})]})]})}):e.jsxs(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:50},transition:{delay:.05*u},className:"flex gap-4 p-4 bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex-shrink-0 relative",children:[e.jsx("img",{src:j&&p.image?`/storage/images/combo/${p.image}`:`/storage/images/item/${p.image}`,onError:e=>e.target.src="/assets/img/noimage/no_img.jpg",className:"w-20 h-20 rounded-lg object-cover border border-gray-100",alt:p.name}),j&&e.jsx("div",{className:"absolute -top-1 -right-1 bg-primary text-white rounded-full p-1",children:e.jsx(l,{size:12})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"max-w-52",children:[e.jsx("h3",{className:"font-semibold line-clamp-2  text-gray-900 truncate",children:p.name}),j&&e.jsxs("span",{className:"text-xs customtext-primary font-medium",children:["Combo (",p.combo_items?.length||0," productos)"]})]}),e.jsx(a,{content:"Eliminar",children:e.jsx("button",{onClick:y,className:"text-gray-400 hover:text-red-500 transition-colors",children:e.jsx(t,{size:18})})})]}),!j&&p?.discount>0&&e.jsxs("div",{className:"text-sm text-gray-500 mb-2",children:[e.jsx("span",{className:"line-through mr-2",children:d(p.price)}),e.jsxs("span",{className:"text-red-500",children:["-",Number(p.discount_percent).toFixed(0),"%"]})]}),j&&p?.discount>0&&e.jsxs("div",{className:"text-sm text-gray-500 mb-2",children:[e.jsxs("span",{className:"line-through mr-2",children:[m()," ",d(p.price)]}),e.jsxs("span",{className:"text-red-500",children:["-",Number(p.discount_percent).toFixed(0),"%"]})]}),j&&p.combo_items&&e.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:["Incluye: ",p.combo_items.map(e=>e.name).join(", ")]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center border border-gray-200 rounded-lg",children:[e.jsx("button",{onClick:()=>N(p.quantity-1),className:"p-2 hover:bg-gray-50 transition-colors",children:e.jsx(c,{size:16,className:"text-gray-600"})}),e.jsx("span",{className:"w-8 text-center font-medium",children:p.quantity}),e.jsx("button",{onClick:()=>N(p.quantity+1),className:"p-2 hover:bg-gray-50 transition-colors",children:e.jsx(o,{size:16,className:"text-gray-600"})})]}),e.jsxs("span",{className:"font-semibold text-gray-900",children:[m()," ",d(w*p.quantity)]})]})]})]})};export{g as C};
