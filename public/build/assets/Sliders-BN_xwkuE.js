var oe=Object.defineProperty;var re=(t,r,a)=>r in t?oe(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a;var O=(t,r,a)=>re(t,typeof r!="symbol"?r+"":r,a);import{j as l}from"./AboutSimple-Cf8x2fCZ.js";import{B as te}from"./Base-CHWft3X0.js";import{S as ne}from"./SwitchFormGroup-DXN0cwVk.js";import{T as A}from"./TextareaFormGroup-CliirJM1.js";import{r as s}from"./index-BOnQTV8N.js";import{c as ce}from"./ReactAppend-QR5TrZfj.js";import{S as ae}from"./CartKuchara-D9l7c7at.js";import{B as me}from"./BasicRest-BML1C-ua.js";import"./main-B6F2O9-U.js";import{I as M}from"./ImageFormGroup-40MuGzez.js";import{I as j}from"./InputFormGroup-iZIO11ZN.js";import{M as de}from"./Modal-xDw9ufjg.js";import{T as ue}from"./Table-BBh2JpCs.js";import{D as X}from"./DxButton-DV0H-ZcL.js";import{C as ge,F as n}from"./CreateReactScript-C-lKJ7Gs.js";import{R as N}from"./ReactAppend-Vm5G2nof.js";import{g as be}from"./getYTVideoId-BoKZ01zP.js";import"./index-yBjzXJbu.js";import"./Global-Bz6gVLc5.js";import"./tippy-react.esm-DmkRJDEW.js";import"./index-pSueRYGM.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./index-B6ujFmsw.js";/* empty css              */import"./Logout-BpuTJ_83.js";import"./MenuItemContainer-DcxtOi47.js";import"./index.esm-C48oHfFw.js";import"./index-ngrFHoWO.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./CanAccess-UkN68hbD.js";import"./CardProductKatya-ncpmQ0JU.js";import"./BooleanLimit-D-OsQsek.js";/* empty css               */import"./General-CE1RDd44.js";import"./LaravelSession-Dz9cpV3l.js";class pe extends me{constructor(){super(...arguments);O(this,"path","admin/sliders");O(this,"hasFiles",!0)}}const _=new pe,he=()=>{const t=s.useRef(),r=s.useRef(),a=s.useRef(),w=s.useRef(),R=s.useRef(),k=s.useRef(),m=s.useRef(),d=s.useRef(),u=s.useRef(),q=s.useRef(),C=s.useRef(),D=s.useRef(),F=s.useRef(),S=s.useRef(),T=s.useRef(),E=s.useRef(),[Z,G]=s.useState(!1),[p,I]=s.useState("image"),[g,v]=s.useState("content"),[L,V]=s.useState(""),[b,z]=s.useState(!0),[f,P]=s.useState(50),[c,U]=s.useState("to-b"),[y,Y]=s.useState("#000000"),[h,H]=s.useState("gradient"),[B,J]=s.useState(!1),K=e=>{e!=null&&e.id?G(!0):G(!1),a.current.value=(e==null?void 0:e.id)??"",w.current.value=(e==null?void 0:e.name)??"",R.current.value=(e==null?void 0:e.subtitle)??"",k.current.value=(e==null?void 0:e.description)??"",I((e==null?void 0:e.bg_type)??"image"),v("content"),V((e==null?void 0:e.bg_video)??""),m.current.value=null,m.image.src=e!=null&&e.image?`/storage/images/slider/${e.image}`:"",d.current.value=null,d.image.src=e!=null&&e.bg_image?`/storage/images/slider/${e.bg_image}`:"",u.current.value=null,u.image.src=e!=null&&e.bg_image_mobile?`/storage/images/slider/${e.bg_image_mobile}`:"",q.current.value=e!=null&&e.bg_video?`https://youtu.be/${e.bg_video}`:"",C.current.value=(e==null?void 0:e.button_text)??"",D.current.value=(e==null?void 0:e.button_link)??"",F.current.value=(e==null?void 0:e.secondary_button_text)??"",S.current.value=(e==null?void 0:e.secondary_button_link)??"",T.current.value=(e==null?void 0:e.title_color)??"#000000",E.current.value=(e==null?void 0:e.description_color)??"#000000",z((e==null?void 0:e.show_overlay)!==!1&&(e==null?void 0:e.show_overlay)!==0),Y((e==null?void 0:e.overlay_color)??"#000000"),P((e==null?void 0:e.overlay_opacity)??50),U((e==null?void 0:e.overlay_direction)??"to-b"),H((e==null?void 0:e.overlay_type)??"gradient"),J((e==null?void 0:e.button_new_tab)===!0||(e==null?void 0:e.button_new_tab)===1),$(r.current).modal("show")},ee=async e=>{e.preventDefault();const i={id:a.current.value||void 0,name:w.current.value,subtitle:R.current.value,description:k.current.value,button_text:C.current.value,button_link:D.current.value,button_new_tab:B?1:0,secondary_button_text:F.current.value,secondary_button_link:S.current.value,title_color:T.current.value,description_color:E.current.value,show_overlay:b?1:0,overlay_color:y,overlay_opacity:f,overlay_direction:c,overlay_type:h,bg_type:p,bg_video:p=="video"?L:null},o=new FormData;for(const x in i)o.append(x,i[x]);if(p=="image"){const x=d.current.files[0];x&&o.append("bg_image",x);const Q=u.current.files[0];Q&&o.append("bg_image_mobile",Q);const W=m.current.files[0];W&&o.append("image",W)}else o.append("bg_image",null),o.append("bg_image_mobile",null);d.getDeleteFlag&&d.getDeleteFlag()&&o.append("bg_image_delete","DELETE"),u.getDeleteFlag&&u.getDeleteFlag()&&o.append("bg_image_mobile_delete","DELETE"),m.getDeleteFlag&&m.getDeleteFlag()&&o.append("image_delete","DELETE"),await _.save(o)&&(d.resetDeleteFlag&&d.resetDeleteFlag(),u.resetDeleteFlag&&u.resetDeleteFlag(),m.resetDeleteFlag&&m.resetDeleteFlag(),$(t.current).dxDataGrid("instance").refresh(),$(r.current).modal("hide"))},le=async({id:e,value:i})=>{await _.boolean({id:e,field:"visible",value:i})&&$(t.current).dxDataGrid("instance").refresh()},ie=async e=>{const{isConfirmed:i}=await ae.fire({title:"Eliminar slider",text:"¿Estas seguro de eliminar este slider?",icon:"warning",showCancelButton:!0,confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"});!i||!await _.delete(e)||$(t.current).dxDataGrid("instance").refresh()},se=async e=>{const i=e.toIndex;try{await _.reorder(e.itemData.id,i)&&await e.component.refresh()}catch(o){console.error("Error reordering slider:",o)}};return l.jsxs(l.Fragment,{children:[l.jsx(ue,{gridRef:t,title:"Sliders",rest:_,toolBar:e=>{e.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(t.current).dxDataGrid("instance").refresh()}}),e.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Nuevo slider",hint:"Nuevo slider",onClick:()=>K()}})},rowDragging:{allowReordering:!0,onReorder:se,dropFeedbackMode:"push"},sorting:{mode:"single"},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"order_index",caption:"Orden",visible:!1,sortOrder:"asc",sortIndex:0},n.has("sliders","name")&&{dataField:"name",caption:"Titulo",width:"75%"},n.has("sliders","bg_image")&&{dataField:"bg_image",caption:"Imagen",width:"90px",allowFiltering:!1,cellTemplate:(e,{data:i})=>{N(e,l.jsx("img",{src:i.bg_type=="image"?`/storage/images/slider/${i.bg_image}`:`//img.youtube.com/vi/${i.bg_video}/mqdefault.jpg`,style:{width:"80px",height:"48px",objectFit:"cover",objectPosition:"center",borderRadius:"4px"},onError:o=>o.target.src="/api/cover/thumbnail/null"}))}},n.has("sliders","bg_image_mobile")&&{dataField:"bg_image_mobile",caption:"Imagen Mobile",width:"90px",allowFiltering:!1,cellTemplate:(e,{data:i})=>{N(e,l.jsx("img",{src:i.bg_type=="image"?`/storage/images/slider/${i.bg_image_mobile}`:`//img.youtube.com/vi/${i.bg_video}/mqdefault.jpg`,style:{width:"80px",height:"48px",objectFit:"cover",objectPosition:"center",borderRadius:"4px"},onError:o=>o.target.src="/api/cover/thumbnail/null"}))}},n.has("sliders","image")&&{dataField:"image",caption:"Imagen",width:"90px",allowFiltering:!1,cellTemplate:(e,{data:i})=>{N(e,l.jsx("img",{src:i.bg_type=="image"?`/storage/images/slider/${i.image}`:`//img.youtube.com/vi/${i.bg_video}/mqdefault.jpg`,style:{width:"80px",height:"48px",objectFit:"cover",objectPosition:"center",borderRadius:"4px"},onError:o=>o.target.src="/api/cover/thumbnail/null"}))}},{dataField:"visible",caption:"Visible",dataType:"boolean",cellTemplate:(e,{data:i})=>{$(e).empty(),N(e,l.jsx(ne,{checked:i.visible==1,onChange:()=>le({id:i.id,value:!i.visible})}))}},{caption:"Acciones",cellTemplate:(e,{data:i})=>{e.css("text-overflow","unset"),e.append(X({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>K(i)})),e.append(X({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>ie(i.id)}))},allowFiltering:!1,allowExporting:!1}]}),l.jsx(de,{modalRef:r,title:Z?"Editar slider":"Agregar slider",onSubmit:ee,size:"lg",children:l.jsxs("div",{className:"row",id:"sliders-container",children:[l.jsx("input",{ref:a,type:"hidden"}),l.jsx("div",{className:"col-12 mb-3",children:l.jsxs("ul",{className:"nav nav-pills nav-fill",children:[l.jsx("li",{className:"nav-item",children:l.jsx("a",{href:"#form-tab-content",className:`nav-link ${g==="content"?"active":""}`,onClick:()=>v("content"),children:"Contenido"})}),l.jsx("li",{className:"nav-item",children:l.jsx("a",{href:"#form-tab-media",className:`nav-link ${g==="media"?"active":""}`,onClick:()=>v("media"),children:"Multimedia"})}),l.jsx("li",{className:"nav-item",children:l.jsx("a",{href:"#form-tab-buttons",className:`nav-link ${g==="buttons"?"active":""}`,onClick:()=>v("buttons"),children:"Botones"})}),l.jsx("li",{className:"nav-item",children:l.jsx("a",{href:"#form-tab-colors",className:`nav-link ${g==="colors"?"active":""}`,onClick:()=>v("colors"),children:"Colores"})})]})}),l.jsx("div",{className:`col-12 ${g!=="content"?"d-none":""}`,children:l.jsxs("div",{className:"row",children:[l.jsx(A,{eRef:w,label:"Título principal",col:"col-12",rows:2,required:!0}),l.jsx(A,{eRef:R,label:"Subtítulo (aparecerá resaltado)",col:"col-12",rows:2}),l.jsx(A,{eRef:k,label:"Descripción",rows:3,col:"col-12"})]})}),l.jsxs("div",{className:`col-12 ${g!=="media"?"d-none":""}`,children:[l.jsxs("ul",{hidden:!n.has("sliders","image")||!n.has("sliders","bg_image")||!n.has("sliders","bg_video"),className:"nav nav-pills navtab-bg nav-justified",children:[l.jsx("li",{className:"nav-item",children:l.jsx("a",{href:"#tab-image","data-bs-toggle":"tab","aria-expanded":"false",className:`nav-link ${p=="image"&&"active"}`,onClick:()=>I("image"),children:"Imagen"})}),l.jsx("li",{className:"nav-item",children:l.jsx("a",{href:"#tab-video","data-bs-toggle":"tab","aria-expanded":"true",className:`nav-link ${p=="video"&&"active"}`,onClick:()=>I("video"),children:"Video"})})]}),l.jsxs("div",{className:"tab-content",children:[l.jsxs("div",{className:`tab-pane ${p=="image"&&"show active"}`,id:"tab-image",children:[l.jsxs("div",{className:"row",children:[l.jsx(M,{hidden:!n.has("sliders","bg_image"),eRef:d,name:"bg_image",aspect:n.has("sliders","bg_image_mobile")?"4/3":"16/9",label:"Imagen de fondo (Desktop)",col:n.has("sliders","bg_image_mobile")?"col-md-8":"col-12"}),l.jsx(M,{hidden:!n.has("sliders","bg_image_mobile"),eRef:u,name:"bg_image_mobile",aspect:"9/14",label:"Imagen (Mobile)",col:"col-md-4"})]}),l.jsx(M,{hidden:!n.has("sliders","image"),eRef:m,name:"image",label:"Imagen"})]}),l.jsxs("div",{hidden:!n.has("sliders","bg_video"),className:`tab-pane ${p=="video"&&"show active"}`,id:"tab-video",children:[l.jsx(j,{eRef:q,label:"URL (Youtube)",type:"link",onChange:e=>V(be(e.target.value))}),l.jsx("iframe",{src:`https://www.youtube.com/embed/${L}`,className:"w-100 rounded border mb-2",style:{aspectRatio:21/9}})]})]})]}),l.jsx("div",{className:`col-12 ${g!=="buttons"?"d-none":""}`,children:l.jsxs("div",{className:"row",children:[l.jsx("div",{className:"col-12 mb-3",children:l.jsx("h6",{className:"text-muted",children:"Botón Principal"})}),l.jsx(j,{eRef:C,label:"Texto del botón",col:"col-sm-6",required:!0}),l.jsx(j,{eRef:D,label:"URL del botón",col:"col-sm-6",required:!0}),l.jsxs("div",{className:"col-sm-6 mt-2",children:[l.jsx("label",{className:"form-label",children:"Abrir en nueva pestaña"}),l.jsxs("div",{className:"form-check form-switch",children:[l.jsx("input",{className:"form-check-input",type:"checkbox",checked:B,onChange:e=>J(e.target.checked),style:{width:"50px",height:"25px"}}),l.jsx("label",{className:"form-check-label ms-2",children:B?"Sí":"No"})]})]}),l.jsx("div",{className:"col-12 mt-3 mb-3",children:l.jsx("h6",{className:"text-muted",children:"Botón Secundario"})}),l.jsx(j,{eRef:F,label:"Texto del botón secundario",col:"col-sm-6"}),l.jsx(j,{eRef:S,label:"URL del botón secundario",col:"col-sm-6"})]})}),l.jsx("div",{className:`col-12 ${g!=="colors"?"d-none":""}`,children:l.jsxs("div",{className:"row",children:[l.jsxs("div",{className:"col-sm-6",children:[l.jsx("label",{className:"form-label",children:"Color del título"}),l.jsx("input",{ref:T,type:"color",className:"form-control form-control-color",defaultValue:"#000000",title:"Seleccionar color del título"})]}),l.jsxs("div",{className:"col-sm-6",children:[l.jsx("label",{className:"form-label",children:"Color de la descripción"}),l.jsx("input",{ref:E,type:"color",className:"form-control form-control-color",defaultValue:"#000000",title:"Seleccionar color de la descripción"})]}),l.jsx("div",{className:"col-12 mt-4 mb-3",children:l.jsx("h6",{className:"text-muted border-bottom pb-2",children:"Configuración del Overlay"})}),l.jsxs("div",{className:"col-sm-3",children:[l.jsx("label",{className:"form-label",children:"Mostrar Overlay"}),l.jsxs("div",{className:"form-check form-switch",children:[l.jsx("input",{className:"form-check-input",type:"checkbox",checked:b,onChange:e=>z(e.target.checked),style:{width:"50px",height:"25px"}}),l.jsx("label",{className:"form-check-label ms-2",children:b?"Sí":"No"})]})]}),l.jsxs("div",{className:"col-sm-3",children:[l.jsx("label",{className:"form-label",children:"Tipo de Overlay"}),l.jsxs("select",{className:"form-select",value:h,onChange:e=>H(e.target.value),disabled:!b,children:[l.jsx("option",{value:"gradient",children:"Gradiente"}),l.jsx("option",{value:"solid",children:"Color Sólido"})]})]}),l.jsxs("div",{className:"col-sm-3",children:[l.jsx("label",{className:"form-label",children:"Color del Overlay"}),l.jsx("input",{type:"color",className:"form-control form-control-color w-100",value:y,onChange:e=>Y(e.target.value),title:"Seleccionar color del overlay",disabled:!b})]}),h==="gradient"&&l.jsxs("div",{className:"col-sm-3",children:[l.jsx("label",{className:"form-label",children:"Dirección"}),l.jsxs("select",{className:"form-select",value:c,onChange:e=>U(e.target.value),disabled:!b,children:[l.jsx("option",{value:"to-r",children:"→ Izquierda a Derecha"}),l.jsx("option",{value:"to-l",children:"← Derecha a Izquierda"}),l.jsx("option",{value:"to-b",children:"↓ Arriba a Abajo"}),l.jsx("option",{value:"to-t",children:"↑ Abajo a Arriba"}),l.jsx("option",{value:"to-tr",children:"↗ Diagonal Arriba-Derecha"}),l.jsx("option",{value:"to-tl",children:"↖ Diagonal Arriba-Izquierda"}),l.jsx("option",{value:"to-br",children:"↘ Diagonal Abajo-Derecha"}),l.jsx("option",{value:"to-bl",children:"↙ Diagonal Abajo-Izquierda"})]})]}),l.jsxs("div",{className:h==="gradient"?"col-sm-12 mt-2":"col-sm-3",children:[l.jsxs("label",{className:"form-label",children:["Opacidad: ",f,"%"]}),l.jsx("input",{type:"range",className:"form-range",min:"0",max:"100",value:f,onChange:e=>P(parseInt(e.target.value)),disabled:!b})]}),b&&l.jsxs("div",{className:"col-12 mt-3",children:[l.jsx("label",{className:"form-label",children:"Vista previa del overlay"}),l.jsx("div",{className:"rounded border position-relative overflow-hidden",style:{height:"80px",background:h==="solid"?`${y}${Math.round(f*2.55).toString(16).padStart(2,"0")}`:`linear-gradient(${c==="to-r"?"to right":c==="to-l"?"to left":c==="to-t"?"to top":c==="to-b"?"to bottom":c==="to-tr"?"to top right":c==="to-tl"?"to top left":c==="to-br"?"to bottom right":"to bottom left"}, ${y}${Math.round(f*2.55).toString(16).padStart(2,"0")}, transparent)`},children:l.jsx("div",{className:"position-absolute w-100 h-100",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='10' height='10' fill='%23ccc'/%3E%3Crect x='10' y='10' width='10' height='10' fill='%23ccc'/%3E%3C/svg%3E")`,backgroundSize:"20px 20px",zIndex:-1}})}),l.jsx("small",{className:"text-muted",children:h==="solid"?"Color sólido con la opacidad seleccionada":"El gradiente irá desde el color seleccionado hasta transparente"})]})]})})]})})]})};ge((t,r)=>{ce.createRoot(t).render(l.jsx(te,{...r,title:"Sliders",children:l.jsx(he,{...r})}))});
