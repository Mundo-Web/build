import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{A as v}from"./AuthClientRest-Bj1mruzx.js";import{r as s}from"./index-BH53Isel.js";import{J as j}from"./JSEncrypt-BF8AmNNu.js";import{S as N}from"./ProductCard-Ap6bpF1Q.js";import{t as n}from"./index-CMHsc23u.js";import{m as d}from"./main-BvVILmTO.js";import{G as k}from"./Global-ErywZRdd.js";import{m as t}from"./proxy-BTYtmp9V.js";import{A as C}from"./index-CFtDjG4d.js";import"./index-yBjzXJbu.js";import"./index-rimy3MAc.js";import"./index-fNjTmf9T.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";function M(){const l=new j;l.setPublicKey(k.PUBLIC_RSA_KEY);const[c,r]=s.useState(!1),[u,p]=s.useState(!1),m=s.useRef(),x={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,when:"beforeChildren"}}},a={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{duration:.5,ease:"easeOut"}}},h={y:-5,boxShadow:"0 10px 25px rgba(0, 0, 0, 0.1)",transition:{type:"spring",stiffness:300}},f={scale:1.02,boxShadow:"0 5px 15px rgba(0, 0, 0, 0.2)"},y={scale:.98};s.useEffect(()=>{d.GET.message&&N.fire({icon:"info",title:"Mensaje",text:d.GET.message,showConfirmButton:!1,timer:3e3})},[]);const b=async w=>{w.preventDefault(),r(!0);try{const o=m.current.value,g={email:l.encrypt(o)},i=await v.forgotPassword(g);if(r(!1),!i||!i.success){i&&i.user_exists===!1&&setTimeout(()=>{n.info("¿Ya tienes cuenta?",{description:"Puedes intentar iniciar sesión aquí",duration:4e3,position:"top-right",action:{label:"Ir al login",onClick:()=>{window.location.href="/login"}}})},2e3);return}p(!0),n.success("¡Revisa tu correo!",{description:"Te hemos enviado las instrucciones para restablecer tu contraseña.",duration:4e3,position:"top-right",action:{label:"Ir al login",onClick:()=>{window.location.href="/login"}}}),setTimeout(()=>{window.location.href="/login"},4e3)}catch(o){n.error("Error inesperado",{description:o.message||"Ocurrió un error al procesar tu solicitud",duration:3e3,position:"top-right"}),r(!1)}};return e.jsx(t.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"w-full px-primary mx-auto py-16",children:e.jsx(t.div,{className:"flex items-center justify-center",variants:x,initial:"hidden",animate:"visible",children:e.jsxs(t.div,{className:"mx-auto w-full max-w-md bg-sections-color rounded-3xl p-8 space-y-6 shadow-lg",variants:a,whileHover:h,children:[e.jsxs(t.div,{className:"space-y-2",variants:a,children:[e.jsx(t.h5,{className:"customtext-primary font-medium",initial:{x:-10},animate:{x:0},children:"Restaurar contraseña"}),e.jsx(t.h1,{className:"text-3xl font-bold customtext-neutral-dark",initial:{y:10},animate:{y:0},transition:{delay:.1},children:"Ops, olvidé mi contraseña"}),e.jsx(t.p,{className:"customtext-neutral-light",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:"Ingresa tu correo electrónico y te enviaremos un enlace para restablecer tu contraseña."})]}),e.jsx(C,{mode:"wait",children:u?e.jsxs(t.div,{className:"text-center py-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[e.jsx(t.div,{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",animate:{scale:[1,1.1,1],rotate:[0,10,-10,0]},transition:{duration:.6},children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h3",{className:"text-xl font-bold customtext-neutral-dark mb-2",children:"¡Correo enviado!"}),e.jsx("p",{className:"customtext-neutral-light mb-6",children:"Revisa tu bandeja de entrada y sigue las instrucciones para restablecer tu contraseña."}),e.jsx(t.a,{href:"/iniciar-sesion",className:"inline-block customtext-primary font-medium border-b border-primary",whileHover:{scale:1.05},children:"Volver al inicio de sesión"})]}):e.jsxs(t.form,{className:"space-y-4",onSubmit:b,initial:{opacity:1},exit:{opacity:0},variants:a,children:[e.jsxs(t.div,{className:"space-y-2",variants:a,children:[e.jsx("label",{className:"block text-sm mb-1 customtext-neutral-dark",htmlFor:"email",children:"Email"}),e.jsx(t.input,{id:"email",ref:m,name:"email",type:"email",placeholder:"hola@mail.com",className:"w-full px-4 py-3 border customtext-neutral-dark border-neutral-ligth rounded-xl focus:ring-0 focus:outline-0 transition-all duration-300",required:!0,whileFocus:{borderColor:"#3B82F6",boxShadow:"0 0 0 3px rgba(59, 130, 246, 0.2)"}})]}),e.jsx(t.button,{type:"submit",className:"w-full rounded-xl font-semibold bg-primary px-4 py-3 text-white hover:opacity-90 focus:outline-none",variants:a,whileHover:f,whileTap:y,disabled:c,children:c?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Enviando..."]}):"Enviar enlace de recuperación"})]})})]})})})}export{M as default};
