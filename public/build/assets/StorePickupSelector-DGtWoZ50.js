var he=Object.defineProperty;var fe=(i,s,t)=>s in i?he(i,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[s]=t;var G=(i,s,t)=>fe(i,typeof s!="symbol"?s+"":s,t);import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as o}from"./index-BOnQTV8N.js";import{S as O}from"./sparkles-DvmvZ6mJ.js";import{a as ge}from"./index-ngrFHoWO.js";import{C as W,N as be}from"./Number2Currency-ld0bFawA.js";import{X as ye}from"./x-fof_H3Vv.js";import{c as ve}from"./createLucideIcon-DfjclApS.js";import{a as je,b as N,h as Ne,c as M,d as we,u as _e,S as ke,_ as Se}from"./useStateManager-7e1e8489.esm-C6DnWqDr.js";import"./index-pSueRYGM.js";import{m as Z}from"./main-B6F2O9-U.js";import"./CardProductKatya-ncpmQ0JU.js";import{S as Ce}from"./StoresRest-Bb6TODpG.js";/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=ve("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),Ge=({children:i,className:s="",...t})=>e.jsx("a",{className:`w-full block border-primary cursor-pointer border-2 text-center font-bold customtext-primary py-3 px-4  hover:opacity-90 hover:shadow-md transition-all duration-300 focus:outline-none active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl ${s}`,...t,children:i});function We({onClick:i,className:s=""}){return e.jsxs("div",{className:`relative ${s}`,children:[e.jsx(O,{size:12,className:"absolute -top-1 -left-1 text-yellow-400 animate-ping",style:{animationDelay:"0s"}}),e.jsx(O,{size:10,className:"absolute -top-2 -right-1 text-pink-400 animate-ping",style:{animationDelay:"0.5s"}}),e.jsx(O,{size:8,className:"absolute -bottom-1 -left-2 text-blue-400 animate-ping",style:{animationDelay:"1s"}}),e.jsx(O,{size:14,className:"absolute -bottom-2 -right-2 text-purple-400 animate-ping",style:{animationDelay:"1.5s"}}),e.jsxs("button",{onClick:i,className:"relative group bg-primary p-2 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-110 animate-bounce cursor-pointer",style:{animationDuration:"2s",animationIterationCount:"infinite"},children:[e.jsx("div",{className:"absolute inset-0 bg-primary rounded-xl opacity-0 group-hover:opacity-50 transition-opacity duration-300 blur-lg"}),e.jsx(R,{size:24,className:"text-white relative z-10 drop-shadow-sm"}),e.jsx("div",{className:"absolute inset-0 bg-primary rounded-xl animate-pulse opacity-30"})]}),e.jsx("div",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-20",children:"Â¡PromociÃ³n disponible!"})]})}const Ae="/api";class Ue{static async applyToCart(s,t,a=null){var d;try{if(console.log("ðŸ›’ Applying discount rules to cart:",{cartItems:s,totalAmount:t,customerEmail:a}),!Array.isArray(s)||s.length===0)return{success:!1,error:"Carrito vacÃ­o o invÃ¡lido",data:null};const l={cart_items:s.map(c=>{const x={item_id:String(c.item_id||c.id||""),quantity:parseInt(c.quantity)||1,price:parseFloat(c.price||c.final_price||0),name:String(c.name||c.description||"Producto sin nombre"),category_id:c.category_id?String(c.category_id):null,type:c.type||"item",combo_id:c.type==="combo"?c.id:null};return console.log("ðŸ“¦ Processing cart item:",x),x}),total_amount:parseFloat(t)||0,customer_email:a||null};console.log("ðŸ“¤ Sending payload to API:",l);const m=await ge.post(`${Ae}/discount-rules/apply-to-cart`,l);return m.data.status===200?{success:!0,data:m.data.data,message:m.data.message}:{success:!1,error:m.data.message||"Error al aplicar descuentos",data:null}}catch(l){return console.error("Error applying discount rules:",l),(d=l.response)!=null&&d.data?{success:!1,error:l.response.data.message||"Error del servidor",data:l.response.data.data||null}:{success:!1,error:"Error de conexiÃ³n",data:null}}}static formatDiscounts(s){return!s||!Array.isArray(s)?[]:s.map(t=>({id:t.rule_id,name:t.rule_name||"Descuento automÃ¡tico",description:t.description||"",amount:parseFloat(t.discount_amount||0),type:t.discount_type||"fixed",promotion_type:t.promotion_type||null,free_items:t.free_items||[],formatted_amount:t.discount_type==="percentage"?`${t.discount_amount}%`:`${W()} ${parseFloat(t.discount_amount||0).toFixed(2)}`}))}static getFreeItems(s){if(!s||!Array.isArray(s))return[];const t=[];return s.forEach(a=>{a.free_items&&Array.isArray(a.free_items)&&t.push(...a.free_items)}),t}static calculateTotalDiscount(s){return!s||!Array.isArray(s)?0:s.reduce((t,a)=>t+parseFloat(a.discount_amount||0),0)}}function Je({isOpen:i,onClose:s,suggestion:t,onAddToCart:a,productName:d}){const[l,m]=o.useState(!1);if(!i||!t)return null;const c=async()=>{m(!0);try{await a(t),s()}catch(x){console.error("Error adding promotional item:",x)}finally{m(!1)}};return e.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity duration-300",onClick:s}),e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl max-w-md w-full mx-auto transform transition-all duration-300 scale-100",children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-gray-600 transition-colors rounded-full hover:bg-gray-100",children:e.jsx(ye,{size:20})}),e.jsxs("div",{className:"text-center pt-8 pb-6 px-6",children:[e.jsxs("div",{className:"relative inline-block mb-4",children:[e.jsx("div",{className:"animate-bounce",children:e.jsx(R,{size:48,className:"customtext-primary mx-auto"})}),e.jsx(O,{size:20,className:"absolute -top-2 -right-2 text-yellow-400 animate-pulse"}),e.jsx(O,{size:16,className:"absolute -bottom-1 -left-2 text-yellow-400 animate-pulse delay-300"})]}),e.jsx("h2",{className:"text-2xl font-bold customtext-neutral-dark mb-2",children:"ðŸŽ‰ Â¡PromociÃ³n Especial!"}),e.jsx("p",{className:"text-gray-600",children:"Tienes un producto que califica para una promociÃ³n"})]}),e.jsxs("div",{className:"px-6 pb-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Al tener  ",e.jsxs("span",{className:"font-semibold customtext-primary",children:[t.current_quantity," ",d]})," en tu carrito"]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[e.jsx("p",{className:"font-bold text-lg customtext-primary mb-1",children:t.rule_name}),e.jsx("p",{className:"text-sm customtext-neutral-light",children:t.description||"ObtÃ©n un producto gratis"})]})]})}),e.jsx("div",{className:"border-2 border-dashed rounded-xl p-4 mb-6 bg-green-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 w-9/12",children:[e.jsx("div",{className:"w-12 h-12  rounded-full flex items-center justify-center",children:e.jsx(R,{className:"customtext-primary",size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold customtext-neutral-dark",children:t.item_name}),e.jsxs("p",{className:"text-sm customtext-primary",children:["Cantidad: ",t.suggested_quantity]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-lg font-bold customtext-primary",children:"Â¡GRATIS!"}),e.jsxs("p",{className:"text-xs text-gray-500 line-through",children:[W()," ",Number(t.value||0).toFixed(2)]})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:c,disabled:l,className:"w-full bg-primary text-white font-semibold py-3 px-6 rounded-xl hover:from-green-600 hover:to-green-700 transition-all duration-200 transform hover:scale-105 disabled:opacity-50 disabled:transform-none shadow-lg",children:l?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Agregando..."})]}):e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(R,{size:20}),e.jsx("span",{children:"Â¡Agregar Regalo!"})]})}),e.jsx("button",{onClick:s,className:"w-full bg-gray-100 customtext-neutral-light font-medium py-3 px-6 rounded-xl hover:bg-gray-200 transition-colors duration-200",children:"Tal vez despuÃ©s"})]}),e.jsx("p",{className:"text-xs text-gray-500 text-center mt-4",children:"* PromociÃ³n vÃ¡lida mientras tengas los productos requeridos en tu carrito"})]})]})})]})}var Oe=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"];function $e(i){var s=i.defaultOptions,t=s===void 0?!1:s,a=i.cacheOptions,d=a===void 0?!1:a,l=i.loadOptions;i.options;var m=i.isLoading,c=m===void 0?!1:m,x=i.onInputChange,g=i.filterOption,_=g===void 0?null:g,k=je(i,Oe),j=k.inputValue,y=o.useRef(void 0),r=o.useRef(!1),h=o.useState(Array.isArray(t)?t:void 0),u=N(h,2),n=u[0],b=u[1],p=o.useState(typeof j<"u"?j:""),v=N(p,2),w=v[0],C=v[1],I=o.useState(t===!0),P=N(I,2),D=P[0],S=P[1],F=o.useState(void 0),z=N(F,2),$=z[0],V=z[1],te=o.useState([]),U=N(te,2),se=U[0],q=U[1],ae=o.useState(!1),J=N(ae,2),re=J[0],T=J[1],ne=o.useState({}),X=N(ne,2),E=X[0],K=X[1],ie=o.useState(void 0),Q=N(ie,2),oe=Q[0],le=Q[1],ce=o.useState(void 0),Y=N(ce,2),de=Y[0],ue=Y[1];d!==de&&(K({}),ue(d)),t!==oe&&(b(Array.isArray(t)?t:void 0),le(t)),o.useEffect(function(){return r.current=!0,function(){r.current=!1}},[]);var B=o.useCallback(function(L,A){if(!l)return A();var f=l(L,A);f&&typeof f.then=="function"&&f.then(A,function(){return A()})},[l]);o.useEffect(function(){t===!0&&B(w,function(L){r.current&&(b(L||[]),S(!!y.current))})},[]);var me=o.useCallback(function(L,A){var f=Ne(L,A,x);if(!f){y.current=void 0,C(""),V(""),q([]),S(!1),T(!1);return}if(d&&E[f])C(f),V(f),q(E[f]),S(!1),T(!1);else{var xe=y.current={};C(f),S(!0),T(!$),B(f,function(H){r&&xe===y.current&&(y.current=void 0,S(!1),V(f),q(H||[]),T(!1),K(H?M(M({},E),{},we({},f,H)):E))})}},[d,B,$,E,x]),pe=re?[]:w&&$?se:n||[];return M(M({},k),{},{options:pe,isLoading:D||c,onInputChange:me,filterOption:_})}var Ee=o.forwardRef(function(i,s){var t=$e(i),a=_e(t);return o.createElement(ke,Se({ref:s},a))}),Xe=Ee;class ee{}G(ee,"getShippingCost",async s=>{try{const{status:t,result:a}=await Z.Fetch("./api/delivery-prices",{method:"POST",body:JSON.stringify(s)});if(!t)throw new Error((a==null?void 0:a.message)||"Error al obtener datos");return a}catch{return!1}}),G(ee,"getCosts",async s=>{try{const{status:t,result:a}=await Z.Fetch("./api/prices-type",{method:"POST"});if(!t)throw new Error((a==null?void 0:a.message)||"Error al obtener datos");return a}catch{return!1}});const Ke=({title:i,description:s,price:t,selected:a,className:d,onSelect:l,disabled:m,paymentOnDelivery:c=!1,showConsultButton:x=!1,advisors:g=[],consultMessage:_="",class_advisors:k=""})=>{const[j,y]=o.useState(!1),r=o.useRef(null);o.useEffect(()=>{const n=b=>{r.current&&!r.current.contains(b.target)&&y(!1)};return j&&document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}},[j]);const h=n=>{if(n.stopPropagation(),g.length!==0)if(g.length===1){const b=g[0];window.open(`https://api.whatsapp.com/send?phone=${b.phone}&text=${encodeURIComponent(_||"Â¡Hola! Necesito informaciÃ³n sobre el costo de envÃ­o")}`,"_blank")}else y(!j)},u=n=>{window.open(`https://api.whatsapp.com/send?phone=${n.phone}&text=${encodeURIComponent(_||"Â¡Hola! Necesito informaciÃ³n sobre el costo de envÃ­o")}`,"_blank"),y(!1)};return e.jsxs("div",{className:`flex flex-col w-full gap-3 p-4 border-2 rounded-xl transition-all duration-300 customtext-neutral-dark ${a?"border-primary bg-primary/5":"border-gray-200 hover:border-gray-300"} ${m?"opacity-50 cursor-not-allowed":"cursor-pointer"} ${d}`,onClick:m?void 0:l,children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 w-full",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("div",{className:`w-5 h-5 border-2 rounded-full flex items-center justify-center flex-shrink-0 ${a?"border-primary":"border-gray-300"}`,children:a&&e.jsx("div",{className:"w-3 h-3 bg-primary rounded-full"})}),e.jsxs("div",{className:"customtext-neutral-light flex-1",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("h4",{className:"text-sm font-medium",children:i})}),e.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:s})]})]}),e.jsx("div",{className:"flex-shrink-0",children:c&&!x?e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-xs text-gray-500",children:"Pagas al recoger"})}):!x&&t!==void 0?e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-sm font-bold customtext-primary",children:t===0?"GRATIS":`${W()} ${be(t)}`})}):null})]}),x&&g.length>0&&e.jsxs("div",{className:"relative",ref:r,children:[e.jsxs("button",{type:"button",onClick:h,className:`w-full mt-1 px-4 py-2.5 bg-green-500 hover:bg-green-600 text-white text-sm font-medium transition-colors duration-200 flex items-center justify-center gap-2 ${k}`,children:[e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"Consultar costo de envÃ­o"]}),j&&g.length>1&&e.jsxs("div",{className:"absolute bottom-full left-0 right-0 mb-2 bg-white rounded-xl shadow-2xl overflow-hidden z-50 border border-gray-200",onClick:n=>n.stopPropagation(),children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-green-600 p-3 text-white",children:[e.jsx("h3",{className:"font-bold text-sm",children:"Elige un asesor"}),e.jsx("p",{className:"text-xs text-green-100",children:"Â¿Con quiÃ©n quieres hablar?"})]}),e.jsx("div",{className:"max-h-[250px] overflow-y-auto",children:g.map((n,b)=>{var p;return e.jsxs("button",{type:"button",onClick:()=>u(n),className:"w-full flex items-center gap-3 p-3 hover:bg-green-50 transition-colors border-b border-gray-100 last:border-b-0 text-left",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border-2 border-green-200",children:n.photo?e.jsx("img",{src:`/assets/resources/${n.photo}`,alt:n.name,className:"w-full h-full object-cover",onError:v=>{v.target.src="/api/cover/thumbnail/null"}}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-green-400 to-green-600 flex items-center justify-center text-white text-sm font-bold",children:(p=n.name)==null?void 0:p.charAt(0).toUpperCase()})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-gray-900 text-sm truncate",children:n.name}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:n.position||"Asesor"})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-green-500",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})})})]},b)})})]})]})]})},Qe=({ubigeoCode:i,ubigeo:s,onStoreSelect:t,selectedStore:a=null,specificStores:d=null,className:l=""})=>{const[m,c]=o.useState([]),[x,g]=o.useState(!1),[_,k]=o.useState(null);o.useEffect(()=>{j()},[d]);const j=async()=>{console.log("ðŸ” StorePickupSelector - Iniciando carga de tiendas..."),console.log("ðŸ“ specificStores recibido:",d),g(!0),k(null);try{const h=await new Ce().paginate({status:!0,visible:!0});console.log("ðŸ“¦ Resultado completo del API:",h);let u=(h==null?void 0:h.data)||[];console.log("ðŸ¬ Total de tiendas recibidas del API:",u.length),console.log("ðŸ¬ Tiendas completas:",u),u=u.filter(n=>{const b=n.type==="tienda"||n.type==="tienda_principal",p=n.visible===!0||n.visible===1,v=n.status===!0||n.status===1,w=b&&p&&v;return w||console.log(`âŒ Tienda rechazada: ${n.name} - type: ${n.type}, visible: ${n.visible}, status: ${n.status}`),w}),console.log("âœ… Tiendas despuÃ©s de filtrar por tipo/visible/activo:",u.length),d&&Array.isArray(d)&&d.length>0?(console.log("ðŸŽ¯ Filtrando por IDs especÃ­ficos:",d),u=u.filter(n=>d.includes(n.id)),console.log("âœ… Tiendas despuÃ©s de filtrar por IDs especÃ­ficos:",u.length)):console.log("ðŸª Mostrando TODAS las tiendas disponibles:",u.length),console.log("ðŸŽ‰ Tiendas finales a mostrar:",u),c(u)}catch(r){console.error("âŒ Error cargando tiendas:",r),k("No se pudieron cargar las tiendas disponibles"),c([])}finally{g(!1)}},y=r=>{t(r)};return x?e.jsxs("div",{className:`text-center p-6 ${l}`,children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-primary/10 rounded-full mb-4",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}),e.jsx("h3",{className:"text-lg font-semibold customtext-neutral-dark mb-2",children:"Cargando tiendas..."}),e.jsx("p",{className:"customtext-neutral-light text-sm",children:"Buscando tiendas disponibles en tu ubicaciÃ³n"})]}):_?e.jsxs("div",{className:`bg-red-50 border border-red-200 rounded-xl p-4 md:p-6 ${l}`,children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-red-100 rounded-full mx-auto mb-4",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h3",{className:"text-lg font-semibold text-red-800 text-center mb-2",children:"Error al cargar tiendas"}),e.jsx("p",{className:"text-red-600 text-center text-sm",children:_})]}):m.length===0?e.jsxs("div",{className:`bg-secondary/30 border border-accent rounded-xl p-4 md:p-6 ${l}`,children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-primary rounded-full mx-auto mb-4",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h3",{className:"text-lg font-semibold customtext-neutral-dark text-center mb-2",children:"Sin tiendas disponibles"}),e.jsx("p",{className:"customtext-neutral-light text-center text-sm",children:"No hay tiendas disponibles para retiro en esta ubicaciÃ³n. Por favor, selecciona otra opciÃ³n de envÃ­o."})]}):e.jsxs("div",{className:l,children:[e.jsxs("div",{className:"mb-4 md:mb-6",children:[e.jsx("h3",{className:"text-lg md:text-xl font-semibold customtext-neutral-dark mb-2",children:"Selecciona una tienda para retiro"}),e.jsx("p",{className:"customtext-neutral-light text-sm md:text-base",children:"Elige la tienda mÃ¡s conveniente para retirar tu pedido"})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 md:gap-4",children:m.map(r=>e.jsxs("div",{className:`relative border-2 rounded-xl cursor-pointer transition-all duration-200 hover:shadow-lg ${(a==null?void 0:a.id)===r.id?"border-primary bg-primary/5 shadow-md":"border-gray-200 bg-white hover:border-primary/50 hover:shadow-md"}`,onClick:()=>y(r),children:[e.jsx("div",{className:"absolute top-3 right-3 z-10",children:e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center transition-all ${(a==null?void 0:a.id)===r.id?"border-primary bg-primary":"border-gray-300 bg-white"}`,children:(a==null?void 0:a.id)===r.id&&e.jsx("div",{className:"w-2.5 h-2.5 bg-white rounded-full"})})}),e.jsxs("div",{className:"p-4 pr-10",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:`/storage/images/store/${r.image}`,alt:r.name,className:"w-16 h-16 object-cover rounded-lg border border-gray-200",onError:h=>h.target.src="/api/cover/thumbnail/null"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold customtext-neutral-dark text-base mb-1 truncate",children:r.name}),e.jsx("span",{className:"inline-block px-2 py-1 rounded-full text-xs font-medium bg-primary/10 customtext-primary",children:r.type==="tienda"?"Tienda":r.type==="tienda_principal"?"Tienda Principal":r.type||"Tienda"})]})]}),e.jsx("p",{className:"text-sm customtext-neutral-light mb-3 line-clamp-2",children:r.address}),e.jsxs("div",{className:"space-y-2 text-sm customtext-neutral-light mb-3",children:[r.phone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),e.jsx("span",{className:"truncate",children:r.phone})]}),r.manager&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),e.jsxs("span",{className:"truncate",children:["Encargado: ",r.manager]})]})]}),r.business_hours&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs font-medium customtext-neutral-dark mb-1",children:"Horario de hoy:"}),e.jsx("div",{className:"text-xs",children:(()=>{try{const h=typeof r.business_hours=="string"?JSON.parse(r.business_hours):r.business_hours,u=new Date().toLocaleDateString("es-PE",{weekday:"long"}),b={lunes:"Lunes",martes:"Martes",miÃ©rcoles:"MiÃ©rcoles",jueves:"Jueves",viernes:"Viernes",sÃ¡bado:"SÃ¡bado",domingo:"Domingo"}[u.toLowerCase()]||u,p=h.find(v=>v.day.toLowerCase()===b.toLowerCase());if(p){const v=p.closed?"Cerrado":`${p.open} - ${p.close}`,w=!p.closed&&(()=>{const C=new Date,I=C.getHours()*60+C.getMinutes(),[P,D]=p.open.split(":").map(Number),[S,F]=p.close.split(":").map(Number),z=P*60+D,$=S*60+F;return I>=z&&I<=$})();return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"customtext-neutral-light",children:v}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${w?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:w?"Abierto":"Cerrado"})]})}return e.jsx("span",{className:"customtext-neutral-light",children:"Horarios disponibles"})}catch{return e.jsx("span",{className:"customtext-neutral-light",children:"Horarios disponibles"})}})()})]})]})]},r.id))})]})};export{We as A,Ge as B,Ue as D,Ke as O,Je as P,Qe as S,ee as a,Xe as b};
