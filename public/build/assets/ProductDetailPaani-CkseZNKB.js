import{r as e,bD as s,bJ as t,bK as a,bL as l,bM as r,bE as i,bF as n,bG as c,bH as o,j as d,ak as m,al as x,E as p,J as h,C as u,be as f,N as g,bI as j}from"./vendor-react-BX-OgZ1w.js";import{I as b}from"./ItemsRest-DjHqxCcq.js";import"./CartKuchara-BRbOrA8K.js";import{N,P as v}from"./vendor-swiper-Cr_RrIb_.js";import"./ProductDetailB-C49I7CBl.js";import"./OpenPayCardModal-DKUbGzgl.js";import{C as w}from"./Number2Currency-BX4epFEo.js";import{C as y}from"./CartModal-BIIcKn3E.js";import k from"./ProductNavigationSwiperPaani-Dw-DMtvL.js";import{G as C}from"./General-ClVW7qxN.js";import{m as _}from"./vendor-motion-0lf5WkjI.js";import"./BasicRest-qY-8D5Ep.js";import"./BooleanLimit-q2Ad9fGY.js";import"./Footer-CrpKyZX2.js";import"./CartItemRow-CxYlbkTa.js";import"./adjustTextColor-69KGUbTd.js";import"./ProductCardColorsBoton-RjThZCEZ.js";import"./TippyButton-DqdjTa95.js";import"./TextWithHighlight-Dtm1FT0T.js";const F=({item:F,data:E,setCart:S,cart:R,generals:$,favorites:z,setFavorites:P})=>{const M=new b,[I,T]=e.useState(!1),[H,q]=e.useState({url:F?.image,type:"main"}),[B,A]=e.useState(1),[O,D]=e.useState(!1),[U,V]=e.useState([]);R?.find(e=>e.id==F?.id),e.useEffect(()=>{F?.id&&(G(F),L(F))},[F]);const L=async e=>{try{const s={id:e?.id};if(!(await M.updateViews(s)))return}catch(s){return}},G=async e=>{try{const s={id:e?.id},t=await M.productsRelations(s);if(!t)return;const a=t;V(Object.values(a))}catch(s){return}},[K,W]=e.useState(!1),[J,Q]=e.useState(!1),[X,Y]=e.useState(null),Z=e.useRef(null);e.useRef(null);const ee=e.useRef(null),se=e.useRef(null),te=C.whatsapp_advisors||[],{refs:ae,floatingStyles:le,context:re}=s({open:J,onOpenChange:Q,placement:"bottom-start",middleware:[a(10),l({fallbackPlacements:["top-start","bottom-end","top-end"],padding:8}),r({padding:8})],whileElementsMounted:t}),ie=i(re),ne=n(re),ce=c(re),{getReferenceProps:oe,getFloatingProps:de}=o([ie,ne,ce]),{refs:me,floatingStyles:xe,context:pe}=s({open:J&&"consult"===X,onOpenChange:e=>{"consult"===X&&Q(e)},placement:"bottom-start",middleware:[a(10),l({fallbackPlacements:["top-start","bottom-end","top-end"],padding:8}),r({padding:8})],whileElementsMounted:t}),he=i(pe),ue=n(pe),fe=c(pe),{getReferenceProps:ge,getFloatingProps:je}=o([he,ue,fe]),be=e=>{const s=`¡Hola! Me gustaría cotizar este producto: ${F?.name}`;if(0!==te.length)if(1===te.length){const e=te[0];window.open(`https://api.whatsapp.com/send?phone=${e.phone}&text=${encodeURIComponent(s)}`,"_blank")}else Y("quote"),Q(!J)};return d.jsxs(d.Fragment,{children:[d.jsxs("div",{id:E?.element_id||null,className:"md:hidden  min-h-screen font-paragraph",children:[d.jsx("div",{className:"sticky top-0 bg-white shadow-sm z-20",children:d.jsx("div",{className:"flex items-center p-4 gap-4 border-b",children:d.jsx("h1",{className:"text-lg font-bold flex-1 line-clamp-5",children:F?.name})})}),d.jsxs("div",{className:"p-4 pb-10",children:[d.jsxs("div",{className:"relative aspect-square mb-4 rounded-2xl overflow-hidden shadow-lg",children:[d.jsx(m,{ref:Z,modules:[N,v],navigation:{prevEl:ee.current,nextEl:se.current},pagination:{clickable:!0,renderBullet:(e,s)=>`<span class="${s} !w-2 !h-2 !bg-white/50 !mx-1"></span>`},loop:!0,onSwiper:e=>{Z.current=e},className:"h-full",children:[F?.image,...F?.images].filter((e,s,t)=>s===t.findIndex(s=>s.url===e.url)).map((e,s)=>d.jsx(x,{children:d.jsx("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center",children:d.jsx("img",{src:`/storage/images/item/${e.url||e}`,className:"w-full h-full object-contain",loading:"lazy",onError:e=>e.target.src="/api/cover/thumbnail/null"})})},s))}),d.jsxs("div",{className:"absolute top-1/2 w-full flex justify-between px-2 transform -translate-y-1/2 z-10",children:[d.jsx("button",{ref:ee,className:"w-8 h-8 flex items-center justify-center rounded-full bg-white/80 shadow-lg hover:scale-110 transition-transform",children:d.jsx(p,{className:"text-gray-800",size:20})}),d.jsx("button",{ref:se,className:"w-8 h-8 flex items-center justify-center rounded-full bg-white/80 shadow-lg hover:scale-110 transition-transform",children:d.jsx(h,{className:"text-gray-800",size:20})})]})]}),d.jsx("div",{className:"bg-white p-4 rounded-2xl shadow-sm mb-4",children:d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{children:[d.jsxs("div",{className:"text-3xl font-bold customtext-primary",children:[w()," ",F?.final_price,d.jsxs("span",{className:"ml-2 text-sm line-through text-gray-400",children:[w()," ",F?.price]})]}),d.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["SKU: ",F?.sku]})]}),d.jsxs("div",{className:"bg-secondary customtext-primary px-3 py-1 rounded-full text-sm",children:[Number(F?.discount_percent).toFixed(0),"% OFF"]})]})}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden",children:[d.jsx("div",{className:"border-b",children:d.jsxs("button",{onClick:()=>W(!K),className:"w-full p-4 flex justify-between items-center",children:[d.jsx("span",{className:"font-medium",children:"Especificaciones técnicas"}),d.jsx(u,{className:"transform transition-transform "+(K?"rotate-180":"")})]})}),K&&d.jsx("div",{className:"p-4",children:F?.specifications.map((e,s)=>d.jsxs("div",{className:"flex items-start gap-3 text-sm mb-2",children:[d.jsx(f,{className:"min-w-4 min-h-4 max-w-4 max-h-4 mt-0.5 customtext-primary"}),d.jsx("span",{children:e.description})]},s))})]}),d.jsxs("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden",children:[d.jsx("div",{className:"border-b",children:d.jsxs("button",{onClick:()=>D(!O),className:"w-full p-4 flex justify-between items-center",children:[d.jsx("span",{className:"font-medium",children:"Descripción del producto"}),d.jsx(u,{className:"transform transition-transform "+(O?"rotate-180":"")})]})}),O&&d.jsxs("div",{className:"p-4",children:[d.jsx("div",{dangerouslySetInnerHTML:{__html:F?.description}}),d.jsx("ul",{className:"list-disc pl-5 mt-2",children:F?.features?.map((e,s)=>d.jsx("li",{className:"text-sm",children:e.feature},s))})]})]})]})]}),d.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t shadow-lg z-[99]",children:d.jsx("div",{className:"p-4 flex gap-4",children:d.jsx("button",{ref:ae.setReference,...oe(),onClick:e=>{be()},className:"flex-1 bg-primary text-white py-3 rounded-full font-medium active:scale-95 transition-transform",children:"Quiero Cotizar"})})})]}),d.jsxs("div",{className:"px-primary mx-auto py-12  hidden md:block font-paragraph",children:[d.jsx("div",{className:"bg-white rounded-xl p-4 md:p-8",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex gap-6",children:[d.jsxs("div",{className:"flex flex-col gap-4",children:[d.jsx("button",{onClick:()=>q({url:F?.image,type:"main"}),className:"w-16 h-16  rounded-lg p-2 border-2 "+(H.url===F?.image?"border-primary ":"border-gray-200"),children:d.jsx("img",{src:`/storage/images/item/${F?.image}`,alt:"Main Thumbnail",className:"w-full h-full object-contain",onError:e=>e.target.src="/api/cover/thumbnail/null"})}),F?.images.filter((e,s,t)=>s===t.findIndex(s=>s.url===e.url)).map((e,s)=>d.jsx("button",{onClick:()=>q({url:e.url,type:"gallery"}),className:"w-16 h-16 border-2 rounded-lg p-2 "+(H.url===e.url?"border-primary":"border-gray-200"),children:d.jsx("img",{src:`/storage/images/item/${e.url}`,alt:`Thumbnail ${s+1}`,className:"w-full h-full object-contain",onError:e=>e.target.src="/api/cover/thumbnail/null"})},s))]}),d.jsx("div",{className:"flex-1",children:d.jsx("img",{src:(H.type,`/storage/images/item/${H.url}`),onError:e=>e.target.src="/api/cover/thumbnail/null",alt:"Product main",className:"w-full h-auto object-contain"})})]}),d.jsx("div",{className:"flex lg:hidden gap-8 border-b-2 pb-8",children:d.jsxs("div",{className:" w-full ",children:[d.jsxs("p",{className:"text-sm customtext-neutral-light mb-1",children:["Precio:"," ",d.jsxs("span",{className:"line-through line-clamp-1",children:[w()," ",F?.price]})]}),d.jsxs("div",{className:"flex items-center gap-4 ",children:[d.jsxs("span",{className:"text-[40px] font-bold line-clamp-1",children:[w()," ",F?.final_price]}),d.jsxs("span",{className:"bg-[#F93232] text-white font-bold px-3 py-2 rounded-xl",children:["-",Number(F?.discount_percent).toFixed(1),"%"]})]}),d.jsx("div",{className:"mt-4",children:d.jsx("div",{className:"flex items-center gap-4 mb-2",children:d.jsxs("div",{className:"flex items-center space-x-4 customtext-neutral-light text-sm",children:[d.jsx("span",{className:"",children:"Cantidad"}),d.jsx("div",{className:"relative flex items-center border rounded-md px-2 py-1",children:d.jsx("input",{type:"number",value:B,onChange:e=>{let s=parseInt(e.target.value,10);(isNaN(s)||s<1)&&(s=1),s>10&&(s=10),A(s)},min:"1",max:"10",className:"w-10 py-1 customtext-neutral-dark text-center bg-transparent outline-none appearance-none"})}),d.jsx("span",{className:"",children:"Máximo 10 unidades."})]})})}),d.jsx("button",{ref:ae.setReference,...oe(),onClick:e=>{be()},className:"w-full bg-primary text-white py-3 font-bold shadow-lg rounded-full hover:opacity-90 transition-all duration-300 mt-4",children:"Quiero Cotizar"})]})}),d.jsx("div",{className:"block lg:hidden flex-1 w-full ",children:d.jsxs("div",{className:"bg-[#F7F9FB] rounded-lg p-6",children:[d.jsx("h3",{className:"font-medium text-sm mb-4",children:"Especificaciones principales"}),d.jsx("ul",{className:"space-y-2  customtext-neutral-light mb-4 transition-all duration-300 "+(K?"max-h-full":"max-h-24 overflow-hidden"),style:{listStyleType:"disc"},children:F?.specifications.map((e,s)=>"principal"===e.type&&d.jsxs("li",{className:"flex gap-2",children:[d.jsx(f,{className:"customtext-primary"}),e.description]},s))}),d.jsxs("button",{className:"customtext-primary text-sm font-semibold hover:underline flex items-center gap-1 transition-all duration-300",onClick:()=>W(!K),children:[K?"Ver menos":"Ver más especificaciones",K?d.jsx(g,{className:"w-4 h-4"}):d.jsx(u,{className:"w-4 h-4"})]})]})})]}),d.jsxs("div",{className:"hidden md:block font-paragraph",children:[d.jsxs("div",{className:"mb-6",children:[d.jsxs("div",{className:"font-paragraph flex customtext-neutral-light items-center gap-8 text-sm mb-6",children:[d.jsxs("span",{className:"customtext-neutral-light text-sm",children:["Marca:"," ",d.jsx("span",{className:"customtext-neutral-dark font-medium",children:F?.brand?.name})]}),d.jsxs("span",{className:"customtext-neutral-light text-sm",children:["SKU:"," ",d.jsx("span",{className:"customtext-neutral-dark font-medium",children:F?.sku})]}),d.jsxs("span",{className:"ustomtext-neutral-light text-sm",children:["Disponibilidad:"," ",d.jsx("span",{className:"customtext-neutral-dark  font-medium",children:F?.stock>0?"En stock":"Agotado"})]})]}),d.jsx("h1",{className:"customtext-neutral-dark text-[40px] font-title font-bold mt-2",children:F?.name})]}),d.jsxs("div",{className:"flex flex-col gap-8 pb-8",children:[d.jsxs("div",{className:" w-full ",children:[d.jsxs("div",{className:"flex gap-8",children:[d.jsxs("div",{children:[d.jsxs("p",{className:"text-sm customtext-neutral-light mb-1 font-bold",children:["Precio:"," ",d.jsxs("span",{className:"line-through",children:[w()," ",F?.price]})]}),d.jsx("div",{className:"flex items-center gap-4 relative customtext-neutral-dark font-extrabold",children:d.jsxs("span",{className:"text-[40px] font-bold ",children:[w()," ",F?.final_price]})})]}),d.jsx("div",{className:"flex items-center gap-4 mt-4",children:d.jsxs("span",{className:" bg-[#F93232] text-white font-bold px-3 py-2 rounded-xl",children:["-",Number(F?.discount_percent).toFixed(0),"%"]})})]}),d.jsx("button",{ref:ae.setReference,...oe(),onClick:e=>{be()},className:"w-full bg-primary text-white py-3 font-bold shadow-lg rounded-full hover:opacity-90 transition-all duration-300 mt-4",children:"Quiero Cotizar"})]}),d.jsx("div",{className:"flex-1 w-full ",children:d.jsxs("div",{className:"bg-secondary rounded-lg p-6",children:[d.jsx("h3",{className:"font-bold text-lg mb-4 customtext-neutral-dark",children:"Especificaciones principales"}),d.jsx("ul",{className:"space-y-2  customtext-neutral-light mb-4 transition-all duration-300 "+(K?"max-h-full":"max-h-24 overflow-hidden"),style:{listStyleType:"disc"},children:F?.specifications.map((e,s)=>"principal"===e.type&&d.jsxs("li",{className:"flex items-center gap-2",children:[d.jsx(f,{className:"customtext-primary min-h-4 min-w-4 max-h-4 max-w-4"}),e.description]},s))}),d.jsxs("button",{className:"customtext-primary text-sm font-semibold hover:underline flex items-center gap-1 transition-all duration-300",onClick:()=>W(!K),children:[K?"Ver menos":"Ver más especificaciones",K?d.jsx(g,{className:"w-4 h-4"}):d.jsx(u,{className:"w-4 h-4"})]})]})})]}),d.jsx(_.div,{variants:{hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{duration:.5}}},className:"w-full mt-5",children:d.jsxs(_.div,{className:"bg-secondary flex flex-row rounded-xl p-5 gap-3",whileHover:{y:-2},children:[d.jsx("img",{src:"/assets/img/whatsapp.svg",onError:e=>e.target.src="assets/img/noimage/no_imagen_circular.png",className:"w-12 h-12 object-contain",loading:"lazy"}),d.jsx("div",{className:"customtext-neutral-dark cursor-pointer font-paragraph text-base 2xl:text-lg font-semibold",children:d.jsxs("p",{children:["¿Tienes dudas sobre este producto? Haz"," ",d.jsx("a",{ref:me.setReference,...ge(),className:"underline",onClick:e=>(()=>{const e=`¡Hola! Tengo dudas sobre este producto: ${F?.name}`;if(0!==te.length)if(1===te.length){const s=te[0];window.open(`https://api.whatsapp.com/send?phone=${s.phone}&text=${encodeURIComponent(e)}`,"_blank")}else Y("consult"),Q(!J)})(),children:"clic aquí"})," ","y chatea con nosotros por WhatsApp"]})})]})})]})]})}),d.jsxs("div",{className:" grid gap-20 md:grid-cols-2 bg-white rounded-xl p-8 mt-12",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-bold customtext-neutral-dark mb-4 pb-4",children:"Especificaciones"}),d.jsx("div",{className:"space-y-1",children:F?.specifications.map((e,s)=>"general"===e.type&&d.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 "+(s%2==0?"bg-secondary":"bg-white"),children:[d.jsx("div",{className:"customtext-neutral-light",children:e.title}),d.jsx("div",{className:"customtext-neutral-dark",children:e.description})]},s))})]}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-bold customtext-neutral-dark mb-4  pb-4",children:"Información adicional"}),d.jsxs("div",{className:"space-y-2 "+(O?"":"max-h-[400px] overflow-hidden"),children:[d.jsx("h3",{className:"text-xl font-semibold customtext-neutral-dark mb-4",children:"Acerca de este artículo"}),d.jsx("div",{className:"customtext-neutral-dark",dangerouslySetInnerHTML:{__html:F?.description}}),d.jsx("div",{className:"pl-10",children:d.jsx("ul",{className:"list-disc pl-5 space-y-2",children:F?.features.map((e,s)=>d.jsx("li",{className:"customtext-neutral-dark",children:e.feature},s))})})]}),d.jsxs("button",{variant:"ghost",className:"border-2 border-primary  w-max px-5 py-3  my-8  rounded-xl flex items-center gap-2 customtext-primary font-semibold cursor-pointer",onClick:()=>D(!O),children:["Ver más",d.jsx(u,{className:"transform transition-transform "+(O?"rotate-180":"")})]})]})]})]}),U.length>0&&d.jsx(k,{data:{title:"Te puede interesar",style_offer:"circle",background:"",backgroundboton:"bg-[linear-gradient(90deg,_#003D52_0%,_#0075A7_118.41%)]"},items:U,cart:R,setCart:S,favorites:z,setFavorites:P,textcolor:"customtext-neutral-dark"}),d.jsx(y,{data:E,cart:R,setCart:S,modalOpen:I,setModalOpen:T}),J&&te.length>1&&d.jsx(j,{context:"consult"===X?pe:re,modal:!1,children:d.jsxs("div",{ref:"consult"===X?me.setFloating:ae.setFloating,style:"consult"===X?xe:le,..."consult"===X?je():de(),className:"bg-white rounded-2xl shadow-2xl overflow-hidden border border-gray-100 z-[1000]",children:[d.jsxs("div",{className:"bg-primary p-4 text-white",children:[d.jsx("h3",{className:"font-bold text-base",children:"Elige un asesor"}),d.jsx("p",{className:"text-xs text-white mt-1",children:"quote"===X?"¿Con quién quieres cotizar?":"¿Con quién quieres hablar?"})]}),d.jsx("div",{className:"max-h-[400px] overflow-y-auto",style:{minWidth:"280px",maxWidth:"320px"},children:te.map((e,s)=>d.jsxs("button",{onClick:()=>(e=>{const s="quote"===X?`¡Hola! Me gustaría cotizar este producto: ${F?.name}`:`¡Hola! Tengo dudas sobre este producto: ${F?.name}`;window.open(`https://api.whatsapp.com/send?phone=${e.phone}&text=${encodeURIComponent(s)}`,"_blank"),Q(!1)})(e),className:"w-full flex items-center gap-3 p-3 hover:bg-gray-50 transition-colors border-b border-gray-100 last:border-b-0 text-left",children:[d.jsx("div",{className:"flex-shrink-0",children:d.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden border-2 border-primary",children:e.photo?d.jsx("img",{src:`/assets/resources/${e.photo}`,alt:e.name,className:"w-full h-full object-cover",onError:e=>{e.target.src="/assets/img/placeholder-user.png"}}):d.jsx("div",{className:"w-full h-full bg-gradient-to-br from-green-400 to-green-600 flex items-center justify-center text-white text-lg font-bold",children:e.name?.charAt(0).toUpperCase()})})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"font-semibold text-gray-900 text-sm truncate",children:e.name}),d.jsx("p",{className:"text-xs text-gray-500 truncate",children:e.position||"Asesor"})]}),d.jsx("div",{className:"flex-shrink-0",children:d.jsx("svg",{className:"w-5 h-5 text-green-500",fill:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})})})]},s))})]})})]})};export{F as default};
