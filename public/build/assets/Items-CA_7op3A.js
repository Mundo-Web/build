import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{B as Me}from"./Base-7gkrOv9S.js";import{S as L}from"./SwitchFormGroup-DXN0cwVk.js";import{T as Be}from"./TextareaFormGroup-CliirJM1.js";import{r as t}from"./index-BOnQTV8N.js";import{c as ze}from"./ReactAppend-DTVVXReZ.js";import{s as X}from"./server.browser-Bf4gQIc7.js";import{S as Oe}from"./ProductCard-Lp5WfZrB.js";import{I as ye}from"./ItemsRest-C_YH-lNL.js";import{M as ge}from"./Modal-BYL-UsqM.js";import{T as Ue}from"./Table-BJzmvxTZ.js";import{I as Y}from"./ImageFormGroup-DkVgPNU5.js";import{I as C}from"./InputFormGroup-iZIO11ZN.js";import{Q as Ve}from"./QuillFormGroup-ShbNmC_h.js";import{S as xe}from"./SelectAPIFormGroup-1XgklNMJ.js";import{S as z}from"./SelectFormGroup-D63EMIiA.js";import{D as be}from"./DxButton-DV0H-ZcL.js";import{C as qe,F as m}from"./CreateReactScript-BXKjjBW1.js";import{N as je}from"./Number2Currency-B5ZenVq9.js";import{R as T}from"./ReactAppend-D7S498fx.js";import{S as ve}from"./SetSelectValue-UxyCmHse.js";import"./main-DKOTUah5.js";import{t as We}from"./index-DRg3WPTA.js";import"./index-yBjzXJbu.js";import"./Global-DWbVqTT_.js";import"./tippy-react.esm-Ce0cOK54.js";import"./index-C0Swrixi.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./index-fNjTmf9T.js";/* empty css              */import"./Logout-W0zm0J8x.js";import"./MenuItemContainer-CEON2wjZ.js";import"./index.esm-BNsoPXs8.js";import"./index-NIGUFBhG.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./CanAccess-CiBvBfVT.js";import"./BasicRest-BCYKfs4R.js";/* empty css               */import"./General-BmbBKdsB.js";import"./LaravelSession-Dz9cpV3l.js";const Ne=({label:F,structure:v,value:R=[],onChange:S,typeOptions:w=[]})=>{const[N,p]=t.useState([]),f=typeof v=="object"&&!Array.isArray(v);t.useEffect(()=>{p(f?R.map(n=>{var o,d;return{...n,type:((o=n.type)==null?void 0:o.charAt(0).toUpperCase())+((d=n.type)==null?void 0:d.slice(1).toLowerCase())}}):R.map(n=>typeof n=="object"?n.feature||"":n))},[R]);const k=()=>{const n=f?{...v}:"",o=[...N,n];p(o),S(o)},j=n=>{const o=N.filter((d,u)=>u!==n);p(o),S(o)},y=(n,o,d)=>{const u=[...N];f?u[n][o]=o==="type"?d.charAt(0).toUpperCase()+d.slice(1).toLowerCase():d:u[n]=d,p(u),S(u)},E=(n,o)=>o==="Icono"?"Url de icono":n;return e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"form-label fw-semibold text-dark mb-3",children:[e.jsx("i",{className:`fas ${f?"fa-cogs":"fa-list-ul"} me-2 text-primary`}),F]}),e.jsxs("div",{className:"dynamic-fields-container",children:[N.map((n,o)=>e.jsx("div",{className:"dynamic-field-item mb-3 p-3 border rounded-3 bg-light position-relative",style:{borderLeft:"4px solid #0d6efd",transition:"all 0.3s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.05)"},children:f?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"row g-3 mb-2",children:[e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"form-label small text-muted text-uppercase fw-bold mb-1",children:"Tipo"}),e.jsxs("select",{className:"form-select form-select-sm border-0 bg-white shadow-sm",value:n.type||"",onChange:d=>y(o,"type",d.target.value),style:{fontSize:"0.9rem"},children:[e.jsx("option",{value:"",children:"Seleccionar tipo..."}),w.map(d=>e.jsx("option",{value:d,children:d},d))]})]}),e.jsxs("div",{className:"col-md-8",children:[e.jsx("label",{className:"form-label small text-muted text-uppercase fw-bold mb-1",children:"Título"}),e.jsx("input",{type:"text",className:"form-control form-control-sm border-0 bg-white shadow-sm",value:n.title||"",onChange:d=>y(o,"title",d.target.value),placeholder:E("title",n.type),style:{fontSize:"0.9rem"}})]})]}),e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col",children:[e.jsx("label",{className:"form-label small text-muted text-uppercase fw-bold mb-1",children:"Descripción"}),e.jsx("input",{type:"text",className:"form-control form-control-sm border-0 bg-white shadow-sm",value:n.description||"",onChange:d=>y(o,"description",d.target.value),placeholder:"Descripción de la especificación",style:{fontSize:"0.9rem"}})]}),e.jsx("div",{className:"col-auto d-flex align-items-end",children:e.jsx("button",{type:"button",className:"btn btn-outline-danger btn-sm rounded-circle d-flex align-items-center justify-content-center",onClick:()=>j(o),style:{width:"32px",height:"32px"},title:"Eliminar especificación",children:e.jsx("i",{className:"fas fa-times"})})})]})]}):e.jsx("div",{className:"row g-3",children:e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex align-items-center gap-3",children:[e.jsx("input",{type:"text",className:"form-control border-0 shadow-sm flex-grow-1",value:n,onChange:d=>y(o,null,d.target.value),placeholder:"Escriba la característica del producto...",style:{fontSize:"0.95rem"}}),e.jsx("button",{type:"button",className:"btn btn-outline-danger rounded-circle d-flex align-items-center justify-content-center flex-shrink-0",onClick:()=>j(o),title:"Eliminar característica",style:{width:"40px",height:"40px"},children:e.jsx("i",{className:"fas fa-times"})})]})})})},o)),N.length===0&&e.jsxs("div",{className:"text-center py-4 text-muted",children:[e.jsx("i",{className:`fas ${f?"fa-cogs":"fa-list-ul"} fa-2x mb-2 opacity-50`}),e.jsxs("p",{className:"mb-0",children:["No hay ",f?"especificaciones":"características"," agregadas"]}),e.jsx("small",{children:'Haga clic en "Agregar" para comenzar'})]}),e.jsx("div",{className:"text-center mt-3",children:e.jsxs("button",{type:"button",className:"btn btn-primary btn-sm px-4 py-2 rounded-pill shadow-sm",onClick:k,style:{border:"none",fontWeight:"500"},children:[e.jsx("i",{className:"fas fa-plus me-2"}),"Agregar ",f?"Especificación":"Característica"]})})]})]})},He=new ye,Qe=({gridRef:F,modalRef:v})=>{const[R,S]=t.useState(null),[w,N]=t.useState(!1),[p,f]=t.useState(""),[k,j]=t.useState(!1),y=n=>{S(n.target.files[0])},E=async()=>{var o,d;if(!R){f("Por favor, selecciona un archivo."),j(!0);return}const n=new FormData;n.append("file",R),N(!0);try{const u=await He.importData(n);if(console.log(u),u.error){const _=Array.isArray(u.error)?u.error.join(`
`):u.error;f(`Error en la importación:
${_}`),j(!0)}else f(u.message),j(!1),$(F.current).dxDataGrid("instance").refresh(),$(v.current).modal("hide"),We.success("Importacion completada con exito",{description:"Todos tus productos han sido importados correctamente.",duration:3e3,position:"bottom-center",richColors:!0})}catch(u){f("Error al importar: "+(((d=(o=u.response)==null?void 0:o.data)==null?void 0:d.error)||u.message)),j(!0)}N(!1)};return e.jsx("div",{className:"bg-white",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("div",{className:"mb-1",children:e.jsx("a",{href:"/assets/img/salafabulosa/formato_import_products.xlsx",download:!0,children:"Descargar formato .xlsx"})}),e.jsx("div",{children:e.jsx("input",{className:"form-control",type:"file",accept:".xlsx",onChange:y})}),e.jsx("button",{onClick:E,disabled:w,className:"btn btn-primary mt-2",type:"button",children:w?"Subiendo...":"Subir Archivo"}),p&&e.jsx("div",{className:`alert ${k?"alert-danger":"alert-success"} mt-2`,role:"alert",children:e.jsx("div",{className:"alert-message",children:p})})]})})},M=new ye,Je=({categories:F,brands:v,collections:R,stores:S})=>{//!FALTA EDIT AND DELETEDE GALERIA
const[w,N]=t.useState([]),p=t.useRef(),f=t.useRef(),k=t.useRef(),j=t.useRef(),y=t.useRef(),E=t.useRef(),n=t.useRef(),o=t.useRef(),d=t.useRef(),u=t.useRef(),_=t.useRef(),O=t.useRef(),U=t.useRef(),V=t.useRef(),h=t.useRef(),g=t.useRef(),x=t.useRef(),q=t.useRef(),W=t.useRef(),Z=t.useRef(),H=t.useRef(),Q=t.useRef(),P=t.useRef(),we=t.useRef([]),Re=t.useRef([]),[De,ee]=t.useState(!1),[Ce,Fe]=t.useState(null),[Ke,Se]=t.useState(null),[Xe,ke]=t.useState(null),[se,re]=t.useState(""),[A,D]=t.useState([]),te=t.useRef(),Ee=s=>{const a=Array.from(s.target.files).map(i=>({file:i,url:URL.createObjectURL(i)}));D(i=>[...i,...a])},Ie=s=>{s.preventDefault();const a=Array.from(s.dataTransfer.files).map(i=>({file:i,url:URL.createObjectURL(i)}));D(i=>[...i,...a])},Te=s=>{s.preventDefault()},_e=(s,r)=>{s.preventDefault(),A[r].id?D(i=>i.map((l,b)=>b===r?{...l,toDelete:!0}:l)):D(i=>i.filter((l,b)=>b!==r))};t.useEffect(()=>{if(w&&w.images){const s=w.images.map(r=>({id:r.id,url:`/storage/images/item/${r.url}`}));D(s)}},[w]);const ie=s=>{var r,a,i;if(N(s||null),s!=null&&s.id?ee(!0):ee(!1),re(s!=null&&s.pdf?`/storage/images/item/${s.pdf}`:""),k.current.value=(s==null?void 0:s.id)||"",$(j.current).val((s==null?void 0:s.category_id)||null).trigger("change"),$(y.current).val((s==null?void 0:s.collection_id)||null).trigger("change"),ve(E.current,(r=s==null?void 0:s.subcategory)==null?void 0:r.id,(a=s==null?void 0:s.subcategory)==null?void 0:a.name),$(n.current).val((s==null?void 0:s.brand_id)||null).trigger("change"),console.log("data item:",s),$(P.current).val(s!=null&&s.store_id&&s.store_id!==""?s.store_id:"").trigger("change"),o.current.value=(s==null?void 0:s.name)||"",W.current.value=(s==null?void 0:s.sku)||"",d.current.value=(s==null?void 0:s.color)||"",u.current.value=(s==null?void 0:s.size)||"",_.current.value=(s==null?void 0:s.summary)||"",Q.current.value=(s==null?void 0:s.linkvideo)||"",O.current.value=(s==null?void 0:s.price)||0,U.current.value=(s==null?void 0:s.discount)||0,ve(V.current,(s==null?void 0:s.tags)??[],"id","name"),h.current.value=null,g.current.value=null,h.image.src=s!=null&&s.banner?`/storage/images/item/${s.banner}`:"",g.image.src=s!=null&&s.image?`/storage/images/item/${s.image}`:"",x.image.src=s!=null&&s.texture?`/storage/images/item/${s.texture}`:"",re(s!=null&&s.pdf?`/storage/images/item/${s==null?void 0:s.pdf}`:""),q.editor.root.innerHTML=(s==null?void 0:s.description)??"",s!=null&&s.images){const l=s.images.map(b=>({id:b.id,url:`/storage/images/item/${b.url}`}));D(l)}else D([]);s!=null&&s.specifications?J(s.specifications.map(l=>({type:l.type,title:l.title,description:l.description,image:l.image||""}))):J([]),ae(((i=s==null?void 0:s.features)==null?void 0:i.map(l=>typeof l=="object"?l:{feature:l}))||[]),H.current.value=s==null?void 0:s.stock,h.deleteRef&&(h.deleteRef.value=""),g.deleteRef&&(g.deleteRef.value=""),x.deleteRef&&(x.deleteRef.value=""),$(f.current).modal("show")},$e=async s=>{var fe,pe,he;s.preventDefault();const r=le.filter(c=>{var I;return typeof c=="string"?c.trim()!=="":typeof c=="object"?((I=c.feature)==null?void 0:I.trim())!=="":!1}),a=ne.filter(c=>c.title&&c.title.trim()!==""||c.description&&c.description.trim()!==""),i={id:k.current.value||void 0,category_id:j.current.value,collection_id:y.current.value||null,subcategory_id:E.current.value,brand_id:n.current.value,name:o.current.value,sku:W.current.value,color:d.current.value,size:u.current.value,summary:_.current.value,price:O.current.value,discount:U.current.value,tags:$(V.current).val(),description:q.current.value,stock:H.current.value||0,features:r,specifications:a,linkvideo:Q.current.value,store_id:P.current.value&&P.current.value!==""?P.current.value:null},l=new FormData;for(const c in i)c==="features"||c==="specifications"?l.append(c,JSON.stringify(i[c])):l.append(c,i[c]);const b=g.current.files[0];b&&l.append("image",b);const G=x.current.files[0];G&&l.append("texture",G);const ce=h.current.files[0];ce&&l.append("banner",ce);const oe=Z.current.files[0];oe&&l.append("pdf",oe),console.log("Checking delete flags:"),console.log("bannerRef.getDeleteFlag():",(fe=h.getDeleteFlag)==null?void 0:fe.call(h)),console.log("imageRef.getDeleteFlag():",(pe=g.getDeleteFlag)==null?void 0:pe.call(g)),console.log("textureRef.getDeleteFlag():",(he=x.getDeleteFlag)==null?void 0:he.call(x)),h.getDeleteFlag&&h.getDeleteFlag()&&(l.append("banner_delete","DELETE"),console.log("Adding banner delete flag: DELETE")),g.getDeleteFlag&&g.getDeleteFlag()&&(l.append("image_delete","DELETE"),console.log("Adding image delete flag: DELETE")),x.getDeleteFlag&&x.getDeleteFlag()&&(l.append("texture_delete","DELETE"),console.log("Adding texture delete flag: DELETE"));let de=0,me=0;A.forEach(c=>{c.toDelete||(c.file?(l.append(`gallery[${de}]`,c.file),de++):(l.append(`gallery_ids[${me}]`,c.id),me++))});const ue=A.filter(c=>c.toDelete).map(c=>c.id);ue.length>0&&ue.forEach((c,I)=>{l.append(`deleted_images[${I}]`,c)}),console.log("FormData contents:");for(let[c,I]of l.entries())console.log(`${c}: ${I}`);await M.save(l)&&(h.resetDeleteFlag&&h.resetDeleteFlag(),g.resetDeleteFlag&&g.resetDeleteFlag(),x.resetDeleteFlag&&x.resetDeleteFlag(),$(p.current).dxDataGrid("instance").refresh(),$(f.current).modal("hide"),D([]))},Pe=async({id:s,value:r})=>{await M.boolean({id:s,field:"visible",value:r})&&$(p.current).dxDataGrid("instance").refresh()},B=async({id:s,field:r,value:a})=>{await M.boolean({id:s,field:r,value:a})&&$(p.current).dxDataGrid("instance").refresh()},Ae=async s=>{const{isConfirmed:r}=await Oe.fire({title:"Eliminar item",text:"¿Estás seguro de eliminar este item?",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"});!r||!await M.delete(s)||$(p.current).dxDataGrid("instance").refresh()},[le,ae]=t.useState([]),[ne,J]=t.useState([]),Ge=["Principal","General"],[Ye,Ze]=t.useState(!1),K=t.useRef(),Le=()=>{$(K.current).modal("show")};return e.jsxs(e.Fragment,{children:[e.jsx(Ue,{gridRef:p,title:"Items",rest:M,toolBar:s=>{s.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(p.current).dxDataGrid("instance").refresh()}}),s.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Agregar",hint:"Agregar",onClick:()=>ie()}}),s.unshift({widget:"dxButton",location:"after",options:{icon:"upload",text:"Importar Datos",hint:"Importar Datos",onClick:()=>Le()}})},exportable:!0,exportableName:"Items",columns:[{dataField:"id",caption:"ID",visible:!1},m.has("items","category_id")&&{dataField:"category.name",caption:"Categoría",width:"120px",cellTemplate:(s,{data:r})=>{var a,i,l;s.html(X.renderToString(e.jsxs(e.Fragment,{children:[e.jsx("b",{className:"d-block fst-italic text-muted",children:(a=r.collection)==null?void 0:a.name}),e.jsx("b",{className:"d-block",children:(i=r.category)==null?void 0:i.name}),e.jsx("small",{className:"text-muted",children:(l=r.subcategory)==null?void 0:l.name})]})))}},m.has("items","subcategory_id")&&{dataField:"subcategory.name",caption:"Subcategoría",visible:!1},m.has("items","brand_id")&&{dataField:"brand.name",caption:"Marca",width:"120px"},{dataField:"name",caption:"Nombre",minWidth:"300px",cellTemplate:(s,{data:r})=>{const i=((l,b)=>{if(!l)return"";const G=l.split(" ");return G.length>b?G.slice(0,b).join(" ")+"...":l})(r.summary,12);s.html(X.renderToString(e.jsxs(e.Fragment,{children:[e.jsx("b",{children:r.name}),e.jsx("br",{}),e.jsx("span",{children:i})]})))}},{dataField:"final_price",caption:"Precio",dataType:"number",width:"75px",cellTemplate:(s,{data:r})=>{s.html(X.renderToString(e.jsxs(e.Fragment,{children:[r.discount>0&&e.jsxs("small",{className:"d-block text-muted",style:{textDecoration:"line-through"},children:["S/.",je(r.price)]}),e.jsxs("span",{children:["S/.",je(r.discount>0?r.discount:r.price)]})]})))}},{dataField:"image",caption:"Imagen",width:"90px",allowFiltering:!1,cellTemplate:(s,{data:r})=>{T(s,e.jsx("img",{src:`/storage/images/item/${r.image}`,style:{width:"80px",height:"48px",objectFit:"cover",objectPosition:"center",borderRadius:"4px"},onError:a=>a.target.src="/api/cover/thumbnail/null"}))}},m.has("items","is_new")&&{dataField:"is_new",caption:"Nuevo",dataType:"boolean",width:"80px",cellTemplate:(s,{data:r})=>{const a=r.is_new===1||r.is_new==="1"||r.is_new===!0;T(s,e.jsx(L,{checked:a,onChange:i=>B({id:r.id,field:"is_new",value:i.target.checked?1:0})}))}},m.has("items","offering")&&{dataField:"offering",caption:"En oferta",dataType:"boolean",width:"80px",cellTemplate:(s,{data:r})=>{const a=r.offering===1||r.offering==="1"||r.offering===!0;T(s,e.jsx(L,{checked:a,onChange:i=>B({id:r.id,field:"offering",value:i.target.checked?1:0})}))}},m.has("items","recommended")&&{dataField:"recommended",caption:"Recomendado",dataType:"boolean",width:"80px",cellTemplate:(s,{data:r})=>{const a=r.recommended===1||r.recommended==="1"||r.recommended===!0;T(s,e.jsx(L,{checked:a,onChange:i=>B({id:r.id,field:"recommended",value:i.target.checked?1:0})}))}},m.has("items","featured")&&{dataField:"featured",caption:"Destacado",dataType:"boolean",width:"80px",cellTemplate:(s,{data:r})=>{const a=r.featured===1||r.featured==="1"||r.featured===!0;T(s,e.jsx(L,{checked:a,onChange:i=>B({id:r.id,field:"featured",value:i.target.checked?1:0})}))}},m.has("items","visible")&&{dataField:"visible",caption:"Visible",dataType:"boolean",width:"80px",cellTemplate:(s,{data:r})=>{T(s,e.jsx(L,{checked:r.visible,onChange:a=>Pe({id:r.id,value:a.target.checked})}))}},{caption:"Acciones",width:"100px",cellTemplate:(s,{data:r})=>{s.css("text-overflow","unset"),s.append(be({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>ie(r)})),s.append(be({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>Ae(r.id)}))},allowFiltering:!1,allowExporting:!1}]}),e.jsx(ge,{modalRef:f,title:De?"Editar item":"Agregar item",onSubmit:$e,size:"xl",children:e.jsxs("div",{id:"principal-container",children:[e.jsx("input",{ref:k,type:"hidden"}),e.jsxs("ul",{className:"nav nav-pills nav-justified mb-4",role:"tablist",style:{backgroundColor:"#f8f9fa",borderRadius:"8px",padding:"4px",border:"1px solid #e9ecef"},children:[e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link active",id:"basic-info-tab","data-bs-toggle":"pill","data-bs-target":"#basic-info",type:"button",role:"tab","aria-controls":"basic-info","aria-selected":"true",style:{borderRadius:"6px",fontWeight:"500",transition:"all 0.3s ease"},children:[e.jsx("i",{className:"fas fa-info-circle me-2"}),"Información Básica"]})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link",id:"pricing-tab","data-bs-toggle":"pill","data-bs-target":"#pricing",type:"button",role:"tab","aria-controls":"pricing","aria-selected":"false",style:{borderRadius:"6px",fontWeight:"500",transition:"all 0.3s ease"},children:[e.jsx("i",{className:"fas fa-dollar-sign me-2"}),"Precios y Stock"]})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link",id:"multimedia-tab","data-bs-toggle":"pill","data-bs-target":"#multimedia",type:"button",role:"tab","aria-controls":"multimedia","aria-selected":"false",style:{borderRadius:"6px",fontWeight:"500",transition:"all 0.3s ease"},children:[e.jsx("i",{className:"fas fa-images me-2"}),"Multimedia"]})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link",id:"features-tab","data-bs-toggle":"pill","data-bs-target":"#features",type:"button",role:"tab","aria-controls":"features","aria-selected":"false",style:{borderRadius:"6px",fontWeight:"500",transition:"all 0.3s ease"},children:[e.jsx("i",{className:"fas fa-list-ul me-2"}),"Características"]})})]}),e.jsxs("div",{className:"tab-content",children:[e.jsx("div",{className:"tab-pane fade show active",id:"basic-info",role:"tabpanel","aria-labelledby":"basic-info-tab",children:e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-tag me-2"}),"Identificación"]})}),e.jsxs("div",{className:"card-body",children:[e.jsx(C,{eRef:W,label:"SKU",required:!0,hidden:!m.has("items","sku")}),e.jsx(C,{eRef:o,label:"Nombre del Producto",required:!0,hidden:!m.has("items","name")}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(C,{eRef:d,label:"Color",required:!0,hidden:!m.has("items","color")})}),e.jsx("div",{className:"col-md-6",children:e.jsx(C,{eRef:u,label:"Talla",required:!0,hidden:!m.has("items","size")})})]})]})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-sitemap me-2"}),"Categorización"]})}),e.jsxs("div",{className:"card-body",children:[e.jsx(z,{eRef:j,label:"Categoría",required:!0,dropdownParent:"#principal-container",onChange:s=>Fe(s.target.value),hidden:!m.has("items","category_id"),children:F.map((s,r)=>e.jsx("option",{value:s.id,children:s.name},r))}),e.jsx(z,{eRef:y,label:"Colección",dropdownParent:"#principal-container",onChange:s=>Se(s.target.value),hidden:!m.has("items","collection_id"),children:R.map((s,r)=>e.jsx("option",{value:s.id,children:s.name},r))}),e.jsx(xe,{eRef:E,label:"Subcategoría",searchAPI:"/api/admin/subcategories/paginate",searchBy:"name",filter:["category_id","=",Ce],dropdownParent:"#principal-container",hidden:!m.has("items","subcategory_id")}),e.jsx(z,{eRef:n,label:"Marca",dropdownParent:"#principal-container",hidden:!m.has("items","brand_id"),children:v.map((s,r)=>e.jsx("option",{value:s.id,children:s.name},r))})]})]})}),e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card border-0 shadow-sm",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-align-left me-2"}),"Descripción"]})}),e.jsxs("div",{className:"card-body",children:[e.jsx(Be,{eRef:_,label:"Resumen",rows:3,hidden:!m.has("items","summary")}),e.jsxs(z,{eRef:P,label:"Tienda",dropdownParent:"#principal-container",onChange:s=>ke(s.target.value),hidden:!m.has("items","store_id"),children:[e.jsx("option",{value:"",children:"Seleccionar tienda (opcional)"}),S.map((s,r)=>e.jsx("option",{value:s.id,children:s.name},r))]}),e.jsx(xe,{id:"tags",eRef:V,searchAPI:"/api/admin/tags/paginate",searchBy:"name",label:"Tags",dropdownParent:"#principal-container",tags:!0,multiple:!0})]})]})})]})}),e.jsx("div",{className:"tab-pane fade",id:"pricing",role:"tabpanel","aria-labelledby":"pricing-tab",children:e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-dollar-sign me-2"}),"Precios"]})}),e.jsxs("div",{className:"card-body",children:[e.jsx(C,{eRef:O,label:"Precio Regular",type:"number",step:"0.01",required:!0,hidden:!m.has("items","price")}),e.jsx(C,{eRef:U,label:"Precio con Descuento",type:"number",step:"0.01"})]})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-boxes me-2"}),"Inventario"]})}),e.jsx("div",{className:"card-body",children:e.jsx(C,{label:"Stock Disponible",eRef:H,type:"number",required:!0,hidden:!m.has("items","stock")})})]})})]})}),e.jsx("div",{className:"tab-pane fade",id:"multimedia",role:"tabpanel","aria-labelledby":"multimedia-tab",children:e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-image me-2"}),"Imágenes Principales"]})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsx(Y,{eRef:h,name:"banner",label:"Banner",aspect:2/1,col:"col-12",hidden:!m.has("items","banner")}),e.jsx(Y,{eRef:g,name:"image",label:"Imagen Principal",aspect:1,col:"col-md-6",hidden:!m.has("items","image")}),e.jsx(Y,{eRef:x,name:"texture",label:"Textura",aspect:1,col:"col-md-6",hidden:!m.has("items","texture")})]})})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-photo-video me-2"}),"Galería y Multimedia"]})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-bold",children:"Galería de Imágenes"}),e.jsx("input",{id:"input-item-gallery",ref:te,type:"file",multiple:!0,accept:"image/*",hidden:!0,onChange:Ee}),e.jsxs("div",{className:"d-flex flex-wrap gap-2 align-items-start",children:[A.filter(s=>!s.toDelete).map((s,r)=>{const a=A.findIndex(i=>i===s);return e.jsxs("div",{className:"position-relative",style:{width:"100px",height:"100px"},children:[e.jsx("img",{src:s.url,alt:"preview",className:"rounded",style:{width:"100%",height:"100%",objectFit:"cover"}}),e.jsx("button",{type:"button",className:"btn btn-danger btn-sm position-absolute top-0 end-0",style:{width:"20px",height:"20px",padding:"0",fontSize:"12px",lineHeight:"1"},onClick:i=>_e(i,a),children:"×"})]},a)}),e.jsx("div",{className:"border-2 border-dashed rounded d-flex align-items-center justify-content-center",style:{borderColor:"#dee2e6",cursor:"pointer",height:"100px",width:"100px",backgroundColor:"#f8f9fa",transition:"all 0.3s ease"},onClick:()=>te.current.click(),onDrop:Ie,onDragOver:Te,onMouseEnter:s=>{s.target.style.borderColor="#0d6efd",s.target.style.backgroundColor="#e7f1ff"},onMouseLeave:s=>{s.target.style.borderColor="#dee2e6",s.target.style.backgroundColor="#f8f9fa"},children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-plus fa-lg text-muted mb-1"}),e.jsx("p",{className:"mb-0 text-muted",style:{fontSize:"10px"},children:"Subir"})]})})]})]}),e.jsx(C,{eRef:Q,label:"Link de Video",placeholder:"https://youtube.com/watch?v=...",hidden:!m.has("items","linkvideo")}),e.jsxs("div",{className:"mb-3",hidden:!m.has("items","pdf"),children:[e.jsx("label",{className:"form-label fw-bold",children:"Archivo PDF"}),e.jsx("input",{ref:Z,type:"file",className:"form-control",accept:".pdf"}),e.jsx("small",{className:"text-muted",children:"Catálogo, manual o documento relacionado"}),se&&e.jsx("div",{className:"mt-2",children:e.jsxs("a",{href:se,target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-outline-primary",children:[e.jsx("i",{className:"fas fa-file-pdf me-1"})," Ver PDF actual"]})})]})]})]})})]})}),e.jsx("div",{className:"tab-pane fade",id:"features",role:"tabpanel","aria-labelledby":"features-tab",children:e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-list-ul me-2"}),"Características"]})}),e.jsx("div",{className:"card-body",children:e.jsx(Ne,{ref:we,label:"Lista de Características",structure:"",value:le,onChange:ae})})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-cogs me-2"}),"Especificaciones"]})}),e.jsx("div",{className:"card-body",children:e.jsx(Ne,{ref:Re,label:"Especificaciones Técnicas",structure:{type:"",title:"",description:""},value:ne,onChange:J,typeOptions:Ge})})]})}),e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card border-0 shadow-sm",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-edit me-2"}),"Descripción Detallada"]})}),e.jsx("div",{className:"card-body",children:e.jsx(Ve,{eRef:q,label:"Descripción Completa"})})]})})]})})]})]})}),e.jsx(ge,{modalRef:K,title:"Importar Datos",size:"sm",children:e.jsx(Qe,{gridRef:p,modalRef:K})})]})};qe((F,v)=>{ze.createRoot(F).render(e.jsx(Me,{...v,title:"Items",children:e.jsx(Je,{...v})}))});
