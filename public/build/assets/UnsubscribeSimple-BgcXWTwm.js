import{r as e,m as s,j as r}from"./vendor-react-SBvaUJTK.js";import{G as t}from"./Footer-BligNWSa.js";import{S as a}from"./CartKuchara-8a8jAeu-.js";import{t as o}from"./OpenPayCardModal-C0HhlOHJ.js";import"./vendor-swiper-Cr_RrIb_.js";function i({data:i}){const[l,n]=e.useState(!1),[c,d]=e.useState(""),[m,x]=e.useState(!1),u=new URLSearchParams(window.location.search).get("token");e.useEffect(()=>{s.GET.message&&a.fire({icon:"info",title:"Mensaje",text:s.GET.message,showConfirmButton:!1,timer:3e3})},[]);return m?r.jsx("div",{id:i?.element_id||null,className:"py-8 lg:py-0 lg:min-h-screen flex items-center justify-center bg-[#F7F9FB] px-primary 2xl:px-0",children:r.jsx("div",{className:"2xl:max-w-7xl w-full mx-auto",children:r.jsx("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:r.jsxs("div",{className:"p-12 text-center",children:[r.jsx("div",{className:"mb-6",children:r.jsx("svg",{className:"w-24 h-24 mx-auto text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),r.jsx("h1",{className:"text-3xl font-bold customtext-neutral-dark mb-4",children:"¡Desuscripción exitosa!"}),r.jsx("p",{className:"customtext-neutral-light mb-6",children:"Lamentamos verte partir. Ya no recibirás más correos de nuestra parte."}),r.jsx("a",{href:"/",className:"inline-block bg-primary text-white px-6 py-3 rounded-xl font-semibold hover:opacity-90 transition-all",children:"Volver al inicio"})]})})})}):r.jsx("div",{id:i?.element_id||null,className:"py-8 lg:py-0 lg:min-h-screen flex items-center justify-center bg-sections-color px-primary 2xl:px-0",children:r.jsx("div",{className:"2xl:max-w-7xl w-full mx-auto",children:r.jsx("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:r.jsxs("div",{className:"flex flex-col lg:flex-row lg:min-h-[600px]",children:[r.jsxs("div",{className:"hidden lg:block lg:w-1/2 relative",children:[r.jsx("img",{src:`/assets/resources/unsubscribe.png?v=${crypto.randomUUID()}`,alt:t.APP_NAME,className:"absolute inset-0 w-full h-full object-cover",onError:e=>{e.target.onerror=null,e.target.src="/assets/img/logo-bk.svg"}}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/30 to-transparent"})]}),r.jsx("div",{className:"w-full lg:w-1/2 px-6 py-12 sm:px-12 lg:px-16",children:r.jsxs("div",{className:"max-w-md mx-auto h-full flex flex-col justify-center",children:[r.jsxs("div",{className:"space-y-2 mb-6",children:[r.jsx("h5",{className:"text-primary font-medium",children:"Desuscribirse"}),r.jsx("h1",{className:"text-3xl font-bold text-neutral-dark",children:"¿Quieres dejar de recibir nuestros correos?"}),r.jsx("p",{className:"text-neutral-light",children:"Lamentamos verte partir. Si confirmas, ya no recibirás más correos de nuestra parte."})]}),r.jsxs("form",{className:"space-y-4",onSubmit:async e=>{if(e.preventDefault(),u){n(!0);try{const e=await fetch("/api/unsubscribe",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")},body:JSON.stringify({token:u,reason:c})}),s=await e.json();if(n(!1),!s.success)return void o.error("Error",{description:s.message||"No se pudo procesar la desuscripción",duration:4e3,position:"top-right"});x(!0),o.success("¡Desuscripción exitosa!",{description:"Lamentamos verte partir. Ya no recibirás más correos de nuestra parte.",duration:4e3,position:"top-right"}),setTimeout(()=>{window.location.href="/"},3e3)}catch(s){n(!1),o.error("Error",{description:"Ocurrió un error al procesar tu solicitud",duration:4e3,position:"top-right"})}}else o.error("Token inválido",{description:"El enlace de desuscripción no es válido",duration:4e3,position:"top-right"})},children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm mb-1 customtext-neutral-dark",htmlFor:"reason",children:"¿Nos cuentas por qué? (Opcional)"}),r.jsx("textarea",{id:"reason",name:"reason",rows:"4",placeholder:"Tus comentarios nos ayudan a mejorar...",className:"w-full px-4 py-3 border customtext-neutral-dark border-neutral-ligth rounded-xl focus:ring-0 focus:outline-0 transition-all duration-300",value:c,onChange:e=>d(e.target.value),disabled:l,maxLength:"500"}),r.jsxs("small",{className:"text-neutral-light text-xs",children:[c.length,"/500 caracteres"]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{disabled:l,type:"submit",className:"flex-1 rounded-xl font-semibold bg-danger px-4 py-4 text-white hover:bg-opacity-60 hover:scale-105  focus:outline-none focus:ring-2 transition-all duration-300 flex items-center justify-center",children:[l?r.jsxs("svg",{className:"animate-spin h-5 w-5 mr-2 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}):null,l?"Procesando...":"Confirmar"]}),r.jsx("a",{href:"/",className:"flex-1 rounded-xl font-semibold bg-gray-200 px-4 py-3 text-gray-800 hover:bg-gray-300 focus:outline-none transition-all duration-300 flex items-center justify-center text-center",children:"Cancelar"})]})]})]})})]})})})})}export{i as default};
