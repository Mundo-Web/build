import{c as e,j as a,r as s}from"./vendor-react-CIhVE-fi.js";import{B as t}from"./Base-Dwd-EVOk.js";import{I as i}from"./ItemsRest-CJgcjzUH.js";import{A as l}from"./AmenitiesRest-BaP1usYf.js";import{T as r}from"./Table-z3FQB1jx.js";import{M as n}from"./Modal-Cuv1yX0O.js";import{I as d}from"./InputFormGroup-DMBz8i6i.js";import{S as c}from"./SelectFormGroup-B7LggFsz.js";import{S as o}from"./SelectAPIFormGroup-DXVmnZLQ.js";import{T as m}from"./TextareaFormGroup-BnU7pT8D.js";import{I as p}from"./ImageFormGroup-DE6YQ5va.js";import{S as u}from"./SwitchFormGroup-Co6umssC.js";import{Q as h}from"./QuillFormGroup-DoCjdAmj.js";import{D as f}from"./DynamicField-fKBfGjYm.js";import{D as x}from"./DxButton-C6FT_beP.js";import{C as b,F as j}from"./CreateReactScript-CJuSZN_P.js";import{R as g}from"./ReactAppend-CxpjMQWu.js";import{S as v}from"./SetSelectValue-DCHQOIKz.js";import{S as N}from"./CartKuchara-Dxib2Hfv.js";import"./vendor-swiper-Cr_RrIb_.js";import"./Footer-hpJm2-lL.js";import"./TippyButton-Cw7YfGyL.js";import"./Logout-DNvBtC9t.js";import"./MenuItemContainer-CJkb6HO0.js";import"./Menu-CIJEwm1o.js";import"./BasicRest-CNjqr-ae.js";import"./OpenPayCardModal-K84_M_7u.js";import"./BooleanLimit-q2Ad9fGY.js";import"./General-ClVW7qxN.js";import"./LaravelSession-ByQnaUD3.js";const y=()=>{const e=s.useRef(),t=s.useRef(),b=s.useRef(),y=s.useRef(),D=s.useRef(),w=s.useRef(),R=s.useRef(),S=s.useRef(),_=s.useRef(),C=s.useRef(),F=s.useRef(),k=s.useRef(),T=s.useRef(),E=s.useRef(),A=s.useRef(),I=s.useRef(),O=s.useRef(),P=s.useRef(),B=s.useRef([]),[z,G]=s.useState(!1),[L,H]=s.useState([]),[M,W]=s.useState([]),[U,q]=s.useState([]),[V,J]=s.useState([]),[K,Q]=s.useState(null),[Y,X]=s.useState(null),[Z,ee]=s.useState(null),ae=new i;new l;const se=()=>{Q(null)},te=e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},ie=()=>{X(null)},le=e=>{e.preventDefault()},re=()=>{ee(null)},ne=e=>{e.preventDefault()},de=async e=>{if(G(!!e?.id),E.current&&E.resetDeleteFlag&&E.resetDeleteFlag(),b.current.value=e?.id??"",y.current.value=e?.name??"",D.current.value=e?.sku??"",R.current.value=e?.summary??"",S.current.value=e?.description??"",_.current.value=e?.max_occupancy??2,C.current.value=e?.beds_count??1,F.current.value=e?.size_m2??0,k.current.value=e?.price??0,T.current.value=e?.discount??0,E.current&&E.image&&(E.image.src=e?.image?`/storage/images/item/${e.image}`:"",E.current.value=null),setTimeout(()=>{$(w.current).val(e?.room_type||"standard").trigger("change")},100),v(A.current,e?.amenities??[],"id","name"),e?.features)try{const a="string"==typeof e.features?JSON.parse(e.features):e.features,s=Array.isArray(a)?a.map(e=>"object"==typeof e&&e.feature||e):[];H(s)}catch(a){H([])}else H([]);if(e?.images&&Array.isArray(e.images)){const a=e.images.map(e=>({id:e.id,url:`/storage/images/item/${e.url}`,order:e.order,file:null,toDelete:!1}));W(a)}else W([]);e?.pdf&&Array.isArray(e.pdf)?q(e.pdf.map(e=>({id:e.id,name:e.name||e.path?.split("/").pop()||"Documento.pdf",url:`/storage/pdfs/item/${e.path}`,path:e.path,order:e.order,toDelete:!1}))):q([]),e?.linkvideo&&Array.isArray(e.linkvideo)?J(e.linkvideo.map(e=>({id:e.id,url:e.url,order:e.order,toDelete:!1}))):J([]),$(t.current).modal("show")},ce=async({id:a,value:s,field:t})=>{await ae.boolean({id:a,field:t,value:s})&&$(e.current).dxDataGrid("instance").refresh()},oe={standard:"Estándar",suite:"Suite",deluxe:"Deluxe",presidential:"Presidencial",family:"Familiar",executive:"Ejecutiva",single:"Individual",double:"Doble",triple:"Triple"};return a.jsxs(a.Fragment,{children:[a.jsx(r,{gridRef:e,title:"Habitaciones",rest:ae,restParams:{filters:JSON.stringify([["type","=","room"]])},toolBar:a=>{a.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(e.current).dxDataGrid("instance").refresh()}}),a.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Nueva habitación",hint:"Nueva habitación",onClick:()=>de()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"image",caption:"Imagen",width:"80px",allowFiltering:!1,cellTemplate:(e,{data:s})=>{s.image?g(e,a.jsx("img",{src:`/storage/images/item/${s.image}`,alt:s.name,style:{width:"60px",height:"60px",objectFit:"cover",borderRadius:"8px"},onError:e=>e.target.src="/api/cover/thumbnail/null"})):g(e,a.jsx("div",{className:"bg-light d-flex align-items-center justify-content-center",style:{width:"60px",height:"60px",borderRadius:"8px"},children:a.jsx("i",{className:"mdi mdi-bed-double text-muted",style:{fontSize:"32px"}})}))}},j.has("items","sku")?{dataField:"name",caption:"Habitación",cellTemplate:(e,{data:s})=>{g(e,a.jsxs("div",{children:[a.jsx("strong",{children:s.name}),a.jsxs("div",{className:"small text-muted",children:[a.jsx("span",{className:"badge badge-soft-secondary",children:s.sku}),s.room_type&&j.has("items","room_type")&&a.jsx("span",{className:"badge badge-soft-info ml-1",children:oe[s.room_type]||s.room_type})]})]}))}}:{dataField:"name",caption:"Habitación",width:"20%",cellTemplate:(e,{data:s})=>{g(e,a.jsxs("div",{children:[a.jsx("strong",{children:s.name}),s.room_type&&j.has("items","room_type")&&a.jsx("div",{className:"small text-muted",children:a.jsx("span",{className:"badge badge-soft-info",children:oe[s.room_type]||s.room_type})})]}))}},{dataField:"summary",caption:"Descripción",width:"20%",cellTemplate:(e,{data:s})=>{g(e,a.jsx("div",{children:a.jsx("p",{children:s.summary})}))}},{dataField:"max_occupancy",caption:"Capacidad",width:"15%",cellTemplate:(e,{data:s})=>{g(e,a.jsxs("div",{children:[j.has("items","max_occupancy")&&a.jsxs("div",{className:"small",children:[a.jsx("i",{className:"mdi mdi-account-multiple text-primary mr-1"}),s.max_occupancy||0," personas"]}),j.has("items","beds_count")&&a.jsxs("div",{className:"small",children:[a.jsx("i",{className:"mdi mdi-bed text-success mr-1"}),s.beds_count||0," cama",1!==s.beds_count?"s":""]}),j.has("items","size_m2")&&s.size_m2>0&&a.jsxs("div",{className:"small",children:[a.jsx("i",{className:"mdi mdi-ruler-square text-info mr-1"}),s.size_m2," m²"]})]}))},visible:j.has("items","max_occupancy")||j.has("items","beds_count")||j.has("items","size_m2")},{dataField:"price",caption:"Precio/Noche",width:"12%",cellTemplate:(e,{data:s})=>{g(e,a.jsxs("div",{children:[a.jsxs("strong",{className:"text-success",children:["S/ ",Number(s.price||0).toFixed(2)]}),s.discount>0&&a.jsx("div",{className:"small",children:a.jsxs("span",{className:"badge badge-soft-danger",children:["-",s.discount,"%"]})})]}))}},j.has("items","is_amenities")&&{dataField:"amenities",caption:"Amenidades",width:"15%",allowFiltering:!1,cellTemplate:(e,{data:s})=>{const t=s.amenities||[];g(e,a.jsx("div",{children:t.length>0?a.jsxs("div",{className:"d-flex flex-wrap gap-1",children:[t.slice(0,3).map((e,s)=>a.jsx("span",{className:"badge badge-soft-success",style:{fontSize:"10px"},children:e.name},s)),t.length>3&&a.jsxs("span",{className:"badge badge-soft-secondary",style:{fontSize:"10px"},children:["+",t.length-3]})]}):a.jsx("span",{className:"text-muted small",children:"Sin amenidades"})}))}},j.has("items","featured")&&{dataField:"featured",caption:"Destacado",dataType:"boolean",width:"80px",cellTemplate:(e,{data:s})=>{$(e).empty(),g(e,a.jsx(u,{checked:1==s.featured,onChange:()=>ce({id:s.id,value:!s.featured,field:"featured"})}))}},j.has("items","visible")&&{dataField:"visible",caption:"Visible",dataType:"boolean",width:"80px",cellTemplate:(e,{data:s})=>{$(e).empty(),g(e,a.jsx(u,{checked:1==s.visible,onChange:()=>ce({id:s.id,value:!s.visible,field:"visible"})}))}},{caption:"Acciones",width:"100px",cellTemplate:(a,{data:s})=>{a.css("text-overflow","unset"),a.append(x({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>de(s)})),a.append(x({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>(async a=>{const{isConfirmed:s}=await N.fire({title:"Eliminar habitación",text:"¿Estás seguro de eliminar esta habitación? Se eliminarán también las reservas asociadas.",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"});if(!s)return;await ae.delete(a)&&$(e.current).dxDataGrid("instance").refresh()})(s.id)}))},allowFiltering:!1,allowExporting:!1}]}),a.jsx(n,{modalRef:t,title:z?"Editar habitación":"Nueva habitación",onSubmit:async a=>{a.preventDefault();const s=L.filter(e=>"string"==typeof e?""!==e.trim():"object"==typeof e&&""!==e.feature?.trim()),i={id:b.current.value||void 0,type:"room",name:y.current.value,sku:D.current.value,room_type:$(w.current).val(),summary:R.current.value,description:S.current.value,max_occupancy:_.current.value,beds_count:C.current.value,size_m2:F.current.value,price:k.current.value,discount:T.current.value,features:s},l=new FormData;for(const e in i)"features"===e?l.append(e,JSON.stringify(i[e])):l.append(e,i[e]);if(E.current){const e=E.current.files[0];e&&l.append("image",e),E.getDeleteFlag&&E.getDeleteFlag()&&l.append("image_delete","DELETE")}M.forEach(e=>{e.toDelete||e.file&&l.append("gallery[]",e.file)});const r=M.filter(e=>e.toDelete&&e.id).map(e=>e.id);r.length>0&&r.forEach((e,a)=>{l.append(`deleted_images[${a}]`,e)}),U.forEach(e=>{!e.toDelete&&e.file&&l.append("pdf[]",e.file)});const n=U.filter(e=>e.toDelete&&e.path).map(e=>e.path);n.length>0&&l.append("deleted_pdfs",JSON.stringify(n));const d=V.filter(e=>!e.toDelete).map(e=>e.url);d.length>0&&l.append("linkvideo",JSON.stringify(d));const c=V.map((e,a)=>e.toDelete&&e.id?a:null).filter(e=>null!==e);c.length>0&&l.append("deleted_videos",JSON.stringify(c));const o=$(A.current).val()||[];o.length>0&&o.forEach((e,a)=>{l.append(`amenities[${a}]`,e)});await ae.save(l)&&(E.current&&E.resetDeleteFlag&&E.resetDeleteFlag(),$(e.current).dxDataGrid("instance").refresh(),$(t.current).modal("hide"),W([]),q([]),J([]),H([]))},size:"xl",children:a.jsxs("div",{id:"rooms-container",children:[a.jsx("input",{ref:b,type:"hidden"}),a.jsxs("ul",{className:"nav nav-pills nav-justified mb-4",role:"tablist",style:{backgroundColor:"#f8f9fa",borderRadius:"8px",padding:"4px",border:"1px solid #e9ecef"},children:[a.jsx("li",{className:"nav-item",role:"presentation",children:a.jsxs("button",{className:"nav-link active",id:"basic-info-tab","data-bs-toggle":"pill","data-bs-target":"#basic-info",type:"button",role:"tab","aria-controls":"basic-info","aria-selected":"true",style:{borderRadius:"6px",fontWeight:"500",transition:"all 0.3s ease"},children:[a.jsx("i",{className:"fas fa-info-circle me-2"}),"Información Básica"]})}),a.jsx("li",{className:"nav-item",role:"presentation",children:a.jsxs("button",{className:"nav-link",id:"details-tab","data-bs-toggle":"pill","data-bs-target":"#details",type:"button",role:"tab","aria-controls":"details","aria-selected":"false",style:{borderRadius:"6px",fontWeight:"500",transition:"all 0.3s ease"},children:[a.jsx("i",{className:"fas fa-bed me-2"}),"Detalles y Precios"]})}),a.jsx("li",{className:"nav-item",role:"presentation",children:a.jsxs("button",{className:"nav-link",id:"multimedia-tab","data-bs-toggle":"pill","data-bs-target":"#multimedia",type:"button",role:"tab","aria-controls":"multimedia","aria-selected":"false",style:{borderRadius:"6px",fontWeight:"500",transition:"all 0.3s ease"},children:[a.jsx("i",{className:"fas fa-images me-2"}),"Multimedia"]})}),a.jsx("li",{className:"nav-item",role:"presentation",children:a.jsxs("button",{className:"nav-link",id:"features-tab","data-bs-toggle":"pill","data-bs-target":"#features",type:"button",role:"tab","aria-controls":"features","aria-selected":"false",style:{borderRadius:"6px",fontWeight:"500",transition:"all 0.3s ease"},children:[a.jsx("i",{className:"fas fa-list-ul me-2"}),"Características"]})})]}),a.jsxs("div",{className:"tab-content",children:[a.jsx("div",{className:"tab-pane fade show active",id:"basic-info",role:"tabpanel","aria-labelledby":"basic-info-tab",children:a.jsxs("div",{className:"row g-3",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[a.jsx("div",{className:"card-header",children:a.jsxs("h6",{className:"mb-0",children:[a.jsx("i",{className:"fas fa-tag me-2"}),"Identificación"]})}),a.jsxs("div",{className:"card-body",children:[a.jsx(d,{eRef:y,label:"Nombre de la Habitación",required:!0,placeholder:"Ej: Suite Amazonas"}),a.jsx(d,{eRef:D,label:"SKU",placeholder:"Ej: ROOM-001",hidden:!j.has("items","sku")}),a.jsxs(c,{eRef:w,label:"Tipo de Habitación",dropdownParent:"#rooms-container",required:!0,hidden:!j.has("items","room_type"),children:[a.jsx("option",{value:"standard",children:"Estándar"}),a.jsx("option",{value:"single",children:"Individual"}),a.jsx("option",{value:"double",children:"Doble"}),a.jsx("option",{value:"triple",children:"Triple"}),a.jsx("option",{value:"suite",children:"Suite"}),a.jsx("option",{value:"deluxe",children:"Deluxe"}),a.jsx("option",{value:"presidential",children:"Presidencial"}),a.jsx("option",{value:"family",children:"Familiar"}),a.jsx("option",{value:"executive",children:"Ejecutiva"})]})]})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[a.jsx("div",{className:"card-header",children:a.jsxs("h6",{className:"mb-0",children:[a.jsx("i",{className:"fas fa-align-left me-2"}),"Descripción"]})}),a.jsx("div",{className:"card-body",children:a.jsx(m,{eRef:R,label:"Resumen",rows:4,placeholder:"Breve descripción de la habitación...",hidden:!j.has("items","summary")})})]})}),a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card border-0 shadow-sm",children:[a.jsx("div",{className:"card-header",children:a.jsxs("h6",{className:"mb-0",children:[a.jsx("i",{className:"fas fa-edit me-2"}),"Descripción Completa"]})}),a.jsx("div",{className:"card-body",children:a.jsx(h,{eRef:S,label:"Descripción Detallada",hidden:!j.has("items","description")})})]})})]})}),a.jsx("div",{className:"tab-pane fade",id:"details",role:"tabpanel","aria-labelledby":"details-tab",children:a.jsxs("div",{className:"row g-3",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[a.jsx("div",{className:"card-header",children:a.jsxs("h6",{className:"mb-0",children:[a.jsx("i",{className:"fas fa-users me-2"}),"Capacidad"]})}),a.jsxs("div",{className:"card-body",children:[a.jsx(d,{eRef:_,label:"Capacidad Máxima (personas)",type:"number",required:!0,min:"1",max:"10",hidden:!j.has("items","max_occupancy")}),a.jsx(d,{eRef:C,label:"Número de Camas",type:"number",required:!0,min:"1",max:"5",hidden:!j.has("items","beds_count")}),a.jsx(d,{eRef:F,label:"Tamaño (m²)",type:"number",min:"0",step:"0.1",hidden:!j.has("items","size_m2")})]})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[a.jsx("div",{className:"card-header",children:a.jsxs("h6",{className:"mb-0",children:[a.jsx("i",{className:"fas fa-dollar-sign me-2"}),"Precios"]})}),a.jsxs("div",{className:"card-body",children:[a.jsx(d,{eRef:k,label:"Precio por Noche (S/)",type:"number",required:!0,min:"0",step:"0.01",hidden:!j.has("items","price")}),a.jsx(d,{eRef:T,label:"Descuento (%)",type:"number",min:"0",max:"100",step:"0.01",hidden:!j.has("items","discount")})]})]})}),j.has("items","is_amenities")&&a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card border-0 shadow-sm",children:[a.jsx("div",{className:"card-header bg-light",children:a.jsxs("h6",{className:"mb-0",children:[a.jsx("i",{className:"fas fa-star-circle me-2 text-warning"}),"Cualidades / Amenidades"]})}),a.jsxs("div",{className:"card-body",children:[a.jsx(o,{eRef:A,searchAPI:"/api/admin/amenities/paginate",searchBy:"name",label:"Seleccionar Cualidades / Amenidades",dropdownParent:"#rooms-container",multiple:!0,additionalData:["image"]}),a.jsxs("small",{className:"text-muted",children:[a.jsx("i",{className:"fas fa-info-circle me-1"}),"Selecciona las cualidades o amenidades que destacan esta habitación"]})]})]})})]})}),a.jsx("div",{className:"tab-pane fade",id:"multimedia",role:"tabpanel","aria-labelledby":"multimedia-tab",children:a.jsxs("div",{className:"row g-3",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[a.jsx("div",{className:"card-header",children:a.jsxs("h6",{className:"mb-0",children:[a.jsx("i",{className:"fas fa-image me-2"}),"Imagen Principal"]})}),a.jsx("div",{className:"card-body",children:a.jsx(p,{eRef:E,name:"image",label:"Imagen Principal",aspect:16/9,hidden:!j.has("items","image")})})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[a.jsx("div",{className:"card-header",children:a.jsxs("h6",{className:"mb-0",children:[a.jsx("i",{className:"fas fa-images me-2 text-primary"}),"Galería de Imágenes",M.filter(e=>!e.toDelete).length>0&&a.jsx("span",{className:"badge bg-primary ms-2",children:M.filter(e=>!e.toDelete).length})]})}),a.jsxs("div",{className:"card-body",children:[a.jsx("input",{ref:I,type:"file",multiple:!0,accept:"image/*",hidden:!0,onChange:e=>{const a=Array.from(e.target.files).map(e=>({file:e,url:URL.createObjectURL(e),toDelete:!1}));W([...M,...a])}}),a.jsxs("div",{className:"gallery-container",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(100px, 1fr))",gap:"12px",padding:"12px",backgroundColor:"#f8f9fa",borderRadius:"12px",border:"2px dashed #dee2e6",minHeight:"140px"},children:[M.filter(e=>!e.toDelete).map((e,s)=>{const t=M.findIndex(a=>a===e);return a.jsxs("div",{className:"gallery-item position-relative",draggable:!0,onDragStart:e=>((e,a)=>{Q(a),e.dataTransfer.effectAllowed="move"})(e,t),onDragEnd:se,onDragOver:te,onDrop:e=>((e,a)=>{if(e.preventDefault(),null===K||K===a)return;const s=[...M],t=s[K];s.splice(K,1),s.splice(a,0,t),W(s),Q(null)})(e,t),style:{aspectRatio:"1",borderRadius:"8px",overflow:"hidden",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"all 0.3s ease",cursor:"grab",transform:K===t?"scale(1.05)":"scale(1)",opacity:K===t?.8:1,background:"white"},children:[a.jsx("div",{className:"position-absolute top-0 start-0 m-1",children:a.jsx("span",{className:"badge bg-primary rounded-circle",style:{width:"20px",height:"20px",fontSize:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:s+1})}),a.jsx("img",{src:e.url,alt:`Imagen ${s+1}`,className:"w-100 h-100",style:{objectFit:"cover",pointerEvents:"none"}}),a.jsx("div",{className:"position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center",style:{background:"rgba(0,0,0,0.7)",opacity:0,transition:"opacity 0.3s ease"},onMouseEnter:e=>e.currentTarget.style.opacity=1,onMouseLeave:e=>e.currentTarget.style.opacity=0,children:a.jsx("button",{type:"button",className:"btn btn-danger btn-sm rounded-circle",style:{width:"28px",height:"28px",padding:0},onClick:e=>((e,a)=>{e.preventDefault();const s=[...M];s[a].file?s.splice(a,1):s[a].toDelete=!0,W(s)})(e,t),title:"Eliminar",children:a.jsx("i",{className:"fas fa-trash text-white",style:{fontSize:"12px"}})})})]},t)}),a.jsx("div",{className:"gallery-add-button d-flex flex-column align-items-center justify-content-center",style:{aspectRatio:"1",border:"2px dashed #0d6efd",borderRadius:"8px",backgroundColor:"rgba(13, 110, 253, 0.05)",cursor:"pointer",transition:"all 0.3s ease",minHeight:"100px"},onClick:()=>I.current.click(),onDrop:e=>{e.preventDefault();const a=Array.from(e.dataTransfer.files).filter(e=>e.type.startsWith("image/")).map(e=>({file:e,url:URL.createObjectURL(e),toDelete:!1}));W([...M,...a])},onDragOver:e=>{e.preventDefault()},children:a.jsxs("div",{className:"text-center",children:[a.jsx("i",{className:"fas fa-plus text-primary fa-lg mb-1"}),a.jsx("p",{className:"mb-0 text-primary fw-semibold",style:{fontSize:"10px"},children:"Agregar"})]})})]})]})]})}),a.jsx("div",{className:"col-md-6",hidden:!j.has("items","pdf"),children:a.jsxs("div",{className:"card border-0 shadow-sm",children:[a.jsx("div",{className:"card-header",children:a.jsxs("h6",{className:"mb-0",children:[a.jsx("i",{className:"fas fa-file-pdf me-2 text-danger"}),"Documentos PDF",U.filter(e=>!e.toDelete).length>0&&a.jsx("span",{className:"badge bg-danger ms-2",children:U.filter(e=>!e.toDelete).length})]})}),a.jsxs("div",{className:"card-body",children:[a.jsx("input",{ref:O,type:"file",multiple:!0,accept:".pdf",hidden:!0,onChange:e=>{const a=Array.from(e.target.files).map(e=>({file:e,name:e.name,url:URL.createObjectURL(e),toDelete:!1}));q([...U,...a]),e.target.value=""}}),a.jsx("div",{className:"list-group mb-3",style:{maxHeight:"200px",overflowY:"auto"},children:U.filter(e=>!e.toDelete).map((e,s)=>{const t=U.findIndex(a=>a===e);return a.jsxs("div",{draggable:!0,onDragStart:e=>((e,a)=>{X(a)})(0,t),onDragEnd:ie,onDragOver:le,onDrop:e=>((e,a)=>{if(e.preventDefault(),null===Y||Y===a)return;const s=[...U],t=s[Y];s.splice(Y,1),s.splice(a,0,t),q(s),X(null)})(e,t),className:"list-group-item list-group-item-action d-flex align-items-center justify-content-between py-2",style:{cursor:"grab",opacity:Y===t?.5:1,transition:"all 0.2s ease"},children:[a.jsxs("div",{className:"d-flex align-items-center",style:{minWidth:0},children:[a.jsx("span",{className:"badge bg-danger me-2",children:s+1}),a.jsx("i",{className:"fas fa-grip-vertical text-muted me-2"}),a.jsx("i",{className:"fas fa-file-pdf text-danger me-2"}),a.jsx("span",{className:"text-truncate",style:{maxWidth:"150px"},children:e.name})]}),a.jsxs("div",{className:"d-flex gap-1",children:[!e.file&&a.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-outline-primary py-0",children:a.jsx("i",{className:"fas fa-eye"})}),a.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger py-0",onClick:e=>((e,a)=>{e.preventDefault();const s=[...U];s[a].file?s.splice(a,1):s[a].toDelete=!0,q(s)})(e,t),children:a.jsx("i",{className:"fas fa-trash"})})]})]},t)})}),a.jsxs("button",{type:"button",className:"btn btn-outline-danger btn-sm w-100",onClick:()=>O.current.click(),children:[a.jsx("i",{className:"fas fa-plus me-2"}),"Agregar PDFs"]})]})]})}),a.jsx("div",{className:"col-md-6",hidden:!j.has("items","linkvideo"),children:a.jsxs("div",{className:"card border-0 shadow-sm",children:[a.jsx("div",{className:"card-header",children:a.jsxs("h6",{className:"mb-0",children:[a.jsx("i",{className:"fas fa-video me-2 text-success"}),"Videos (Tour Virtual)",V.filter(e=>!e.toDelete).length>0&&a.jsx("span",{className:"badge bg-success ms-2",children:V.filter(e=>!e.toDelete).length})]})}),a.jsxs("div",{className:"card-body",children:[a.jsx("div",{className:"list-group mb-3",style:{maxHeight:"200px",overflowY:"auto"},children:V.filter(e=>!e.toDelete).map((e,s)=>{const t=V.findIndex(a=>a===e);return a.jsxs("div",{draggable:!0,onDragStart:e=>((e,a)=>{ee(a)})(0,t),onDragEnd:re,onDragOver:ne,onDrop:e=>((e,a)=>{if(e.preventDefault(),null===Z||Z===a)return;const s=[...V],t=s[Z];s.splice(Z,1),s.splice(a,0,t),J(s),ee(null)})(e,t),className:"list-group-item list-group-item-action d-flex align-items-center justify-content-between py-2",style:{cursor:"grab",opacity:Z===t?.5:1,transition:"all 0.2s ease"},children:[a.jsxs("div",{className:"d-flex align-items-center",style:{minWidth:0,overflow:"hidden"},children:[a.jsx("span",{className:"badge bg-success me-2",children:s+1}),a.jsx("i",{className:"fas fa-grip-vertical text-muted me-2"}),a.jsx("i",{className:"fas fa-video text-success me-2"}),a.jsx("span",{className:"text-truncate small",style:{maxWidth:"150px"},title:e.url,children:e.url})]}),a.jsxs("div",{className:"d-flex gap-1",children:[a.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-outline-primary py-0",children:a.jsx("i",{className:"fas fa-external-link-alt"})}),a.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger py-0",onClick:e=>((e,a)=>{e.preventDefault();const s=[...V];s[a].url&&!s[a].id?s.splice(a,1):s[a].toDelete=!0,J(s)})(e,t),children:a.jsx("i",{className:"fas fa-trash"})})]})]},t)})}),a.jsxs("div",{className:"input-group input-group-sm",children:[a.jsx("input",{ref:P,type:"url",className:"form-control",placeholder:"https://youtube.com/watch?v=..."}),a.jsxs("button",{type:"button",className:"btn btn-success",onClick:e=>{e.preventDefault();const a=P.current.value.trim();a&&(J([...V,{url:a,toDelete:!1}]),P.current.value="")},children:[a.jsx("i",{className:"fas fa-plus me-1"}),"Agregar"]})]})]})]})})]})}),a.jsx("div",{className:"tab-pane fade",id:"features",role:"tabpanel","aria-labelledby":"features-tab",children:a.jsx("div",{className:"row g-3",children:j.has("items","is_features")&&a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card border-0 shadow-sm",children:[a.jsx("div",{className:"card-header",children:a.jsxs("h6",{className:"mb-0",children:[a.jsx("i",{className:"fas fa-list-ul me-2"}),"Lista de Características"]})}),a.jsxs("div",{className:"card-body",children:[a.jsx(f,{ref:B,label:"Características de la Habitación",structure:"",value:L,onChange:H}),a.jsxs("small",{className:"text-muted",children:[a.jsx("i",{className:"fas fa-info-circle me-1"}),'Agrega características como: "Vista al río", "Balcón privado", "Servicio 24 horas", etc.']})]})]})})})})]})]})})]})};b((s,i)=>{e.createRoot(s).render(a.jsx(t,{...i,title:"Habitaciones",children:a.jsx(y,{...i})}))});
