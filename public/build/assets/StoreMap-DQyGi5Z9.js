import{r as e,j as t,L as s,G as a,M as r,b1 as l,ag as i,ah as n}from"./vendor-react-LJZQRWVP.js";import{N as o,P as c}from"./vendor-swiper-Cr_RrIb_.js";import{G as d}from"./Footer-DCwBNfoi.js";const m=["places"],x=({data:x,stores:p=[]})=>{const[h,u]=e.useState(null),[f,g]=e.useState({lat:-12.046374,lng:-77.042793}),[b,w]=e.useState(6),[j,y]=e.useState(!1),[N,v]=e.useState(!1),[k,C]=e.useState(0),F=e.useRef(null),S=e.useRef(null),_=p.filter(e=>e.visible&&e.latitude&&e.longitude&&!isNaN(parseFloat(e.latitude))&&!isNaN(parseFloat(e.longitude)));e.useEffect(()=>{if(_.length>0&&!h&&!N)if(1===_.length)g({lat:parseFloat(_[0].latitude),lng:parseFloat(_[0].longitude)}),w(15);else{const e=_.reduce((e,t)=>e+parseFloat(t.latitude),0)/_.length,t=_.reduce((e,t)=>e+parseFloat(t.longitude),0)/_.length;g({lat:e,lng:t});const s=_.map(e=>parseFloat(e.latitude)),a=_.map(e=>parseFloat(e.longitude)),r=Math.max(...s)-Math.min(...s),l=Math.max(...a)-Math.min(...a),i=Math.max(r,l);w(i>10?5:i>5?6:i>2?7:i>1?8:i>.5?10:12)}},[_,h,N]);const P=e=>{if(!e)return null;try{return"string"==typeof e?JSON.parse(e):e}catch(t){return null}},$=e=>{u(e),v(!1);const t=parseFloat(e.latitude),s=parseFloat(e.longitude),a=F.current?.getZoom()||b;g({lat:t+15/a*.005,lng:s})},M=({store:e,isSelected:s,onClick:a})=>t.jsxs("div",{onClick:()=>a(e),className:"group cursor-pointer rounded-none overflow-hidden transition-all duration-300 flex flex-col "+(s?"ring-4 ring-primary shadow-2xl  scale-[1.02]":"hover:shadow-lg hover:scale-[1.01]"),children:[t.jsx("div",{className:"relative h-48 bg-gradient-to-br from-white/20 to-white/5 overflow-hidden flex-shrink-0",children:e.image?t.jsx("img",{src:`/storage/images/store/${e.image}`,alt:e.name,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",onError:e=>{e.target.style.display="none"}}):t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsx("div",{className:"w-20 h-20 rounded-2xl flex items-center justify-center transition-all duration-300 "+(s?"bg-primary":"bg-white/20 group-hover:bg-white/30"),children:t.jsx("i",{className:"fas fa-map-marker-alt text-3xl "+(s?"text-white":"customtext-primary")})})})}),t.jsxs("div",{className:"flex-1 bg-secondary/95 backdrop-blur-sm p-4 flex flex-col",children:[t.jsxs("div",{className:"flex-1 flex flex-col gap-2",children:[t.jsx("h4",{className:"font-bold text-lg mb-1 line-clamp-2 transition-colors "+(s?"customtext-primary":"text-white"),children:e.name}),t.jsxs("p",{className:"text-sm text-white/70 line-clamp-2 flex items-start gap-2",children:[t.jsx("i",{className:"fas fa-location-dot text-xs customtext-primary flex-shrink-0 mt-1"}),t.jsx("span",{children:e.address})]}),e.phone&&t.jsxs("p",{className:"text-sm text-white/60 flex items-center gap-2",children:[t.jsx("i",{className:"fas fa-phone text-xs customtext-primary flex-shrink-0"}),t.jsx("span",{children:e.phone})]})]}),t.jsx("div",{className:"space-y-2 mt-4",children:t.jsxs("button",{className:"w-full py-2.5 px-4 rounded-none text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2 "+(s?"bg-primary text-white":"bg-white/10 text-white hover:bg-primary hover:text-white"),children:[t.jsx("i",{className:"fas fa-map"}),t.jsx("span",{children:s?"Seleccionado":"Ver en mapa"})]})})]})]});return t.jsxs("section",{id:x?.element_id||null,className:`bg-secondary ${x?.class_container||""}`,children:[t.jsx("style",{children:"\n                .gm-style-iw-c {\n                    padding: 0 !important;\n                    background: none !important;\n                    box-shadow: none !important;\n                    border-radius: 8px !important;\n                }\n                .gm-style-iw-d {\n                    overflow: visible !important; /* Permitir overflow para que el div interno maneje el scroll */\n                    max-height: none !important;\n                }\n                .gm-style .gm-style-iw-t::after {\n                    display: none !important;\n                }\n                /* Ocultar botón de cerrar por defecto de Google Maps */\n                .gm-ui-hover-effect {\n                    display: none !important;\n                }\n                \n                /* Custom Scrollbar para el InfoWindow */\n                .store-info-scroll::-webkit-scrollbar {\n                    width: 6px;\n                }\n                .store-info-scroll::-webkit-scrollbar-track {\n                    background: rgba(255, 255, 255, 0.1);\n                }\n                .store-info-scroll::-webkit-scrollbar-thumb {\n                    background: rgba(255, 255, 255, 0.3);\n                    border-radius: 3px;\n                }\n                .store-info-scroll::-webkit-scrollbar-thumb:hover {\n                    background: rgba(255, 255, 255, 0.5);\n                }\n            "}),t.jsxs("div",{className:"w-full",children:[(x?.title||x?.description)&&t.jsxs("div",{className:"text-center pt-12 pb-8 max-w-7xl mx-auto px-primary 2xl:px-0",children:[x?.title&&t.jsx("h2",{className:`text-3xl md:text-4xl font-bold mb-4 ${x?.class_title||"text-white"}`,children:x?.title}),x?.description&&t.jsx("p",{className:`text-lg max-w-3xl mx-auto ${x?.class_description||"text-white/70"}`,children:x?.description})]}),x?.stored_cards&&(()=>{if(0===_.length)return null;return _.length>4?t.jsx("div",{className:"pb-10",children:t.jsxs("div",{className:"relative max-w-7xl mx-auto px-primary 2xl:px-0",children:[t.jsx("button",{onClick:()=>S.current?.slidePrev(),className:"absolute left-0 top-1/2 -translate-y-1/2 z-20 w-12 h-12 rounded-full bg-white/15 backdrop-blur-sm border border-white/20 flex items-center justify-center transition-all duration-300 hover:bg-primary hover:border-primary -translate-x-2 lg:-translate-x-6","aria-label":"Anterior",children:t.jsx("i",{className:"fas fa-chevron-left text-white"})}),t.jsx("button",{onClick:()=>S.current?.slideNext(),className:"absolute right-0 top-1/2 -translate-y-1/2 z-20 w-12 h-12 rounded-full bg-white/15 backdrop-blur-sm border border-white/20 flex items-center justify-center transition-all duration-300 hover:bg-primary hover:border-primary translate-x-2 lg:translate-x-6","aria-label":"Siguiente",children:t.jsx("i",{className:"fas fa-chevron-right text-white"})}),t.jsx("div",{className:"px-8 lg:px-16",children:t.jsx(i,{modules:[o,c],spaceBetween:20,slidesPerView:1,loop:!0,centeredSlides:!1,onSwiper:e=>S.current=e,onSlideChange:e=>C(e.realIndex),breakpoints:{480:{slidesPerView:2,spaceBetween:16},768:{slidesPerView:3,spaceBetween:20},1024:{slidesPerView:3,spaceBetween:24},1280:{slidesPerView:4,spaceBetween:24}},className:"store-cards-swiper !px-2 !py-10",children:_.map(e=>t.jsx(n,{className:"h-auto",children:t.jsx(M,{store:e,isSelected:h?.id===e.id,onClick:$})},e.id))})}),t.jsx("div",{className:"flex justify-center items-center mt-8 gap-3",children:_.map((e,s)=>t.jsx("button",{onClick:()=>S.current?.slideTo(s),className:"transition-all duration-300 "+(s===k?"w-10 h-3 bg-primary rounded-full shadow-lg shadow-primary/50":"w-3 h-3 bg-white/50 rounded-full hover:bg-white/80 hover:scale-125"),"aria-label":`Ir a tienda ${s+1}`},s))}),t.jsx("style",{children:"\n                            .store-cards-swiper .swiper-slide {\n                                height: auto;\n                                display: flex;\n                            }\n                            .store-cards-swiper .swiper-slide > div {\n                                width: 100%;\n                            }\n                        "})]})}):t.jsx("div",{className:"py-10",children:t.jsx("div",{className:"max-w-7xl mx-auto px-primary 2xl:px-0",children:t.jsx("div",{className:"grid grid-cols-1 xs:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5",children:_.map(e=>t.jsx(M,{store:e,isSelected:h?.id===e.id,onClick:$},e.id))})})})})(),_.length>0?t.jsx("div",{className:"w-full relative",children:t.jsx(s,{googleMapsApiKey:d.GMAPS_API_KEY,libraries:m,onLoad:()=>y(!0),children:t.jsxs(a,{mapContainerStyle:{width:"100%",height:"80vh",minHeight:"600px"},center:f,zoom:b,onLoad:e=>F.current=e,onDragStart:()=>v(!0),onZoomChanged:()=>v(!0),options:{streetViewControl:!0,mapTypeControl:!0,fullscreenControl:!0,zoomControl:!0,gestureHandling:"cooperative",styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]},children:[j&&_.map(e=>t.jsx(r,{position:{lat:parseFloat(e.latitude),lng:parseFloat(e.longitude)},onClick:()=>$(e),title:e.name,icon:{path:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z",fillColor:d.APP_COLOR_PRIMARY||"#FF0000",fillOpacity:1,strokeWeight:1,strokeColor:"#FFFFFF",rotation:0,scale:2.5,anchor:new window.google.maps.Point(12,24)}},e.id)),j&&h&&t.jsx(l,{position:{lat:parseFloat(h.latitude),lng:parseFloat(h.longitude)},onCloseClick:()=>u(null),options:{pixelOffset:new window.google.maps.Size(0,-50),maxWidth:320},children:t.jsxs("div",{className:"bg-secondary text-white rounded-lg overflow-hidden shadow-xl store-info-scroll relative",style:{minWidth:"280px",maxHeight:"400px",overflowY:"auto"},children:[t.jsx("button",{onClick:()=>u(null),className:"absolute top-2 right-2 z-50 w-8 h-8 flex items-center justify-center bg-secondary rounded-full shadow-md hover:opacity-90 transition-opacity text-white border border-white/20","aria-label":"Cerrar",children:t.jsx("i",{className:"fas fa-times"})}),h.image&&t.jsxs("div",{className:"relative h-40 w-full flex-shrink-0",children:[t.jsx("img",{src:`/storage/images/store/${h.image}`,alt:h.name,className:"w-full h-full object-cover",onError:e=>e.target.style.display="none"}),t.jsx("div",{className:"absolute top-2 left-2",children:t.jsx("span",{className:"inline-block px-2 py-1 text-xs font-bold rounded bg-white customtext-primary shadow-sm",children:(z=h.type,{tienda_principal:"Tienda Principal",tienda:"Tienda",oficina:"Oficina",almacen:"Almacén",showroom:"Showroom",otro:"Otro"}[z]||"No especificado")})})]}),t.jsxs("div",{className:"p-4 pt-2",children:[t.jsx("h3",{className:"font-bold text-lg mb-3 customtext-primary "+(h.image?"":"pr-8"),children:h.name}),t.jsxs("p",{className:"text-sm mb-2 flex items-start",children:[t.jsx("i",{className:"fas fa-map-marker-alt mt-1 mr-2 customtext-primary flex-shrink-0"}),t.jsx("span",{className:"opacity-90",children:h.address})]}),h.phone&&t.jsxs("p",{className:"text-sm mb-2 flex items-center",children:[t.jsx("i",{className:"fas fa-phone mr-2 customtext-primary flex-shrink-0"}),t.jsx("a",{href:`tel:${h.phone}`,className:"hover:text-white hover:underline opacity-90 transition-opacity",children:h.phone})]}),h.email&&t.jsxs("p",{className:"text-sm mb-2 flex items-center",children:[t.jsx("i",{className:"fas fa-envelope mr-2 customtext-primary flex-shrink-0"}),t.jsx("a",{href:`mailto:${h.email}`,className:"hover:text-white hover:underline opacity-90 transition-opacity truncate",children:h.email})]}),h.description&&t.jsx("p",{className:"text-sm opacity-80 mb-3 mt-3 pt-3 border-t border-white/10",children:h.description}),h.manager&&t.jsxs("p",{className:"text-sm mb-2 opacity-90",children:[t.jsx("i",{className:"fas fa-user mr-2 customtext-primary"}),t.jsx("strong",{children:"Encargado:"})," ",h.manager]}),h.business_hours&&t.jsxs("div",{className:"mt-3 pt-3 border-t border-white/10",children:[t.jsxs("p",{className:"text-xs font-bold customtext-primary mb-2 flex items-center",children:[t.jsx("i",{className:"fas fa-clock mr-2"}),"Horarios de atención"]}),t.jsxs("div",{className:"space-y-1",children:[P(h.business_hours)?.slice(0,3).map((e,s)=>t.jsxs("p",{className:"text-xs opacity-80",children:[t.jsxs("strong",{className:"text-white",children:[e.day,":"]})," ",e.closed?"Cerrado":`${e.open} - ${e.close}`]},s)),P(h.business_hours)?.length>3&&t.jsxs("p",{className:"text-xs customtext-primary font-semibold mt-1",children:["+ ",P(h.business_hours).length-3," días más"]})]})]}),t.jsxs("div",{className:"mt-4 flex flex-col gap-2",children:[h.link&&t.jsxs("a",{href:h.link,target:"_blank",rel:"noopener noreferrer",className:"w-full py-2 px-4 rounded text-center text-sm font-semibold border border-white/20 hover:bg-white/10 transition-colors customtext-primary",children:[t.jsx("i",{className:"fas fa-external-link-alt mr-2"}),"Más información"]}),t.jsxs("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${h.latitude},${h.longitude}`,target:"_blank",rel:"noopener noreferrer",className:`w-full py-2 px-4 rounded text-center text-sm font-bold transition-colors shadow-lg ${x?.class_button||"bg-white customtext-primary hover:bg-gray-100"}`,children:[t.jsx("i",{className:"fas fa-directions mr-2"}),"Cómo llegar"]})]})]})]})})]})})}):t.jsxs("div",{className:"text-center py-12 px-primary",children:[t.jsx("i",{className:"fas fa-map-marked-alt text-6xl customtext-neutral-light mb-4"}),t.jsx("p",{className:"text-xl customtext-neutral-light",children:"No hay ubicaciones disponibles en este momento"})]})]})]});var z};export{x as default};
