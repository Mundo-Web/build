import{j as t}from"./AboutSimple-Cf8x2fCZ.js";import{r}from"./index-BOnQTV8N.js";import{G as K}from"./Global-CazroCzF.js";import"./HeaderSearch-j9L8kXPt.js";import"./main-B6F2O9-U.js";import{M as V}from"./MobileMenu-egRBzfV_.js";import{C as X}from"./HeaderIbergruas-CZLOHzk6.js";import{C as Y}from"./chevron-down-uIVDLcM-.js";import{S as J}from"./shopping-cart-DLRnxGTD.js";import{X as Q}from"./x-fof_H3Vv.js";import{A as U}from"./index-BZvh78jk.js";import{m as W}from"./proxy-B0QLMKEh.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./PolicyModal-C80IvD61.js";import"./index-B6ujFmsw.js";import"./index-Chjiymov.js";import"./CartItemRow-Dd2JdCJX.js";import"./Number2Currency-jIsa99f9.js";import"./General-apRuNwp7.js";import"./tippy-react.esm-DmkRJDEW.js";import"./index-pSueRYGM.js";import"./package-DBFPPBi1.js";import"./createLucideIcon-DfjclApS.js";import"./trash-2-DU7LB6-f.js";import"./minus-Db6MFKEO.js";import"./plus-CTIomuuF.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./MenuSimple-eF3Gua6U.js";import"./MobileMenu-pOsYkBXS.js";import"./CardProductKatya-ncpmQ0JU.js";import"./BasicRest-BML1C-ua.js";import"./BooleanLimit-D-OsQsek.js";import"./tag-Dgi-uTqk.js";import"./chevron-up-Mt3xll-e.js";import"./search-BQ59Robe.js";import"./chevron-left-JcR9Fe4w.js";import"./chevron-right-Cug7tVUE.js";const Te=({items:u,data:l,cart:j,setCart:_,isUser:d,pages:m,generals:p=[]})=>{const f=p.find(e=>e.correlative==="phone_whatsapp"),g=p.find(e=>e.correlative==="message_whatsapp");f==null||f.description,g==null||g.description;const h=p.find(e=>e.correlative==="header_menu_order"),S=(h==null?void 0:h.description)??null,O=(()=>{if(!S)return[...u.map(s=>({type:"category",data:s})),...m.filter(s=>s.menuable).map(s=>({type:"page",data:s}))];const e=S.split(",").map(s=>s.trim()).filter(Boolean),o=[];return e.forEach(s=>{const i=u.find(a=>a.alias&&a.alias.toLowerCase()===s.toLowerCase()||a.name.toLowerCase()===s.toLowerCase());if(i){o.push({type:"category",data:i});return}const n=m.find(a=>a.menuable&&a.name.toLowerCase()===s.toLowerCase());n&&o.push({type:"page",data:n})}),o})(),[P,k]=r.useState(!1),[x,N]=r.useState(!1),[b,C]=r.useState(!1),[w,E]=r.useState(""),[ee,F]=r.useState(!1),[B,L]=r.useState(!1),[te,D]=r.useState([]),[y,G]=r.useState(!1),[re,se]=r.useState(!1),[c,T]=r.useState(-1);r.useRef([]);const R=r.useRef(null),M=r.useRef(null),q=r.useRef(null),H=r.useRef(null),v=r.useRef(null),I=r.useRef(null),$=r.useRef([]),A=j.reduce((e,o)=>Number(e)+Number(o.quantity),0),z=()=>{G(!1),D([]),T(-1)};if(r.useEffect(()=>{function e(o){var s,i;R.current&&!R.current.contains(o.target)&&F(!1),M.current&&!M.current.contains(o.target)&&(w.trim()||C(!1)),v.current&&!v.current.contains(o.target)&&!((s=H.current)!=null&&s.contains(o.target))&&!((i=q.current)!=null&&i.contains(o.target))&&z()}return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}},[w]),r.useEffect(()=>{const e=()=>{window.scrollY>0?L(!0):L(!1)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),r.useEffect(()=>{const e=o=>{o.key==="Escape"&&(y?z():b&&(C(!1),E("")))};return(b||y)&&document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[b,y]),r.useEffect(()=>()=>{I.current&&clearTimeout(I.current)},[]),r.useEffect(()=>{c>=0&&$.current[c]&&v.current&&$.current[c].scrollIntoView({block:"nearest",behavior:"smooth"})},[c]),d&&Array.isArray(d.roles)){const e=d.roles.map(o=>{var s;return(s=o.name)==null?void 0:s.toLowerCase()});!e.includes("admin")&&e.includes("root")}return t.jsxs(t.Fragment,{children:[t.jsxs("header",{className:`w-full top-0 left-0 z-50 transition-all duration-300 ${B?"fixed shadow-lg":"relative"} ${l.backgroundColor||"bg-primary"}`,children:[t.jsx("div",{className:"max-w-7xl mx-auto px-[5%] 2xl:px-0",children:t.jsxs("div",{className:"flex justify-between items-center h-20",children:[t.jsx("div",{className:"flex items-center gap-6",children:t.jsx("a",{href:"/",className:"flex-shrink-0 flex items-center",children:t.jsx("img",{src:`/assets/resources/logo.png?v=${crypto.randomUUID()}`,alt:K.APP_NAME,className:`h-16 w-auto object-contain ${(l==null?void 0:l.class_logo)||""}`,onError:e=>{e.target.onerror=null,e.target.src="/assets/img/logo-bk.svg"}})})}),t.jsxs("nav",{className:"hidden lg:flex items-center gap-8",children:[O.map((e,o)=>{var s,i;if(e.type==="category"){const n=e.data;return t.jsxs("div",{className:"relative group",children:[t.jsxs("a",{href:`/catalogo?category=${n.slug}`,className:`
                                                    flex items-center gap-1 text-lg  font-bold transition-colors
                                                    ${n.alias?"bg-secondary text-white px-6 py-2.5 shadow-lg ":"customtext-neutral-dark "}
                                                `,children:[n.alias||n.name,((s=n.subcategories)==null?void 0:s.length)>0&&t.jsx(Y,{size:16,className:`transition-transform duration-200 group-hover:rotate-180 ${n.alias?"text-white":""}`})]}),((i=n.subcategories)==null?void 0:i.length)>0&&t.jsx("div",{className:"absolute top-full left-0 w-56 pt-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 transform group-hover:translate-y-0 translate-y-2 z-50",children:t.jsx("div",{className:"bg-white  shadow-xl overflow-hidden border border-gray-100",children:n.subcategories.map(a=>t.jsx("a",{href:`/catalogo?subcategory=${a.slug}`,className:"block px-4 py-3 text-base text-gray-700 hover:bg-primary hover:text-white transition-colors duration-300 last:border-0",children:a.name},a.id))})})]},`cat-${n.id}`)}else if(e.type==="page"){const n=e.data;return t.jsx("a",{href:n.path,className:"text-lg font-bold customtext-neutral-dark hover:text-black transition-colors",children:n.name},`page-${o}`)}return null}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("button",{onClick:()=>k(!0),className:"relative bg-black text-white p-2.5 hover:bg-gray-900 transition-colors group","aria-label":"Carrito de compras",children:[t.jsx(J,{size:20,className:"text-white"}),A>0&&t.jsx("span",{className:"absolute -top-2 -right-2 bg-white text-black text-xs font-bold w-5 h-5 flex items-center justify-center rounded-full border-2 border-black",children:A})]}),t.jsx("button",{onClick:()=>N(!x),className:"lg:hidden p-2 text-black hover:bg-black/5 rounded-lg transition-colors",children:x?t.jsx(Q,{size:24}):t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),t.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),t.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})})]})]})]})}),t.jsx(U,{children:x&&t.jsx(W.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},className:"lg:hidden bg-transparent text-textWhite shadow-lg w-full min-h-screen absolute z-10 top-20",children:t.jsx(V,{search:w,setSearch:E,pages:m,items:u,onClose:()=>N(!1),data:l})})})]}),t.jsx(X,{data:l,cart:j,setCart:_,modalOpen:P,setModalOpen:k})]})};export{Te as default};
