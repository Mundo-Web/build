import{r as e,j as t,aw as a,C as r,aW as s,w as i}from"./vendor-react-CWR92fp6.js";import"./HeaderSearch-QLz2ZTqy.js";import{C as l}from"./Number2Currency-BX4epFEo.js";import{C as n}from"./HeaderIbergruas-f9ggl1pY.js";import{m as o}from"./vendor-motion-CqnI0iCJ.js";const c=({data:c,product:m,setCart:d,cart:p})=>{const[x,u]=e.useState(!1),[h,f]=e.useState(!1),g=0===Number(m?.final_price),b=!1!==m?.is_detail&&0!==m?.is_detail&&"0"!==m?.is_detail,j=Array.isArray(m.pdf)?m?.pdf:[],y=!b&&j.length>0;return t.jsxs(t.Fragment,{children:[t.jsxs(o.a,{href:y?void 0:`/product/${m.slug}`,onClick:y?e=>e.preventDefault():void 0,className:"group flex flex-col h-full bg-transparent  border-0 transition-all duration-300 overflow-hidden",initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-5},children:[t.jsxs("div",{className:"relative aspect-square overflow-hidden",children:[m.discount>0&&t.jsxs("span",{className:"absolute top-3 right-3 z-10 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full shadow-sm",children:["-",Math.round((m.price-m?.discount)/m?.price*100),"%"]}),t.jsx(o.img,{src:`/storage/images/item/${m.image}`,onError:e=>e.target.src="/api/cover/thumbnail/null",alt:m.name,className:"w-full h-full object-cover aspect-square object-center transition-transform duration-500 group-hover:scale-110",loading:"lazy"})]}),t.jsxs("div",{className:"flex flex-col flex-grow p-5  rounded-b-2xl",children:[t.jsx("div",{className:"text-xs font-medium customtext-primary  mb-2 uppercase tracking-wide",children:m.brand?.name||m?.category?.name}),t.jsx("h3",{className:"text-xl  text-white mb-2 line-clamp-2 min-h-[2.5rem]",children:m.name}),t.jsx("div",{className:"text-base text-white mb-4 line-clamp-2 min-h-10",dangerouslySetInnerHTML:{__html:m?.description}}),!g&&t.jsx("div",{className:"mt-auto mb-4",children:m.static_price?t.jsxs("div",{className:"flex flex-col items-start gap-1",children:[t.jsx("span",{className:"text-xl text-white",children:m.static_price}),m.discount>0&&t.jsxs("span",{className:"text-sm text-gray-400 line-through",children:[l()," ",m.price]})]}):t.jsxs("div",{className:"flex items-baseline gap-2",children:[t.jsxs("span",{className:"text-xl font-bold text-white",children:[l()," ",m.final_price]}),m.discount>0&&t.jsxs("span",{className:"text-sm text-gray-400 line-through",children:[l()," ",m.price]})]})}),t.jsx("div",{className:`mt-auto ${g?"pt-4":""} relative`,children:y?t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),f(!h)},className:"w-full flex items-center justify-center gap-2 bg-transparent border-2 border-primary customtext-primary py-3 px-4 font-semibold hover:bg-primary hover:text-white transition-all duration-300",children:[t.jsx(a,{size:18}),"Descargar Fichas",t.jsx(r,{size:16,className:"transition-transform "+(h?"rotate-180":"")})]}),h&&t.jsx("div",{className:"absolute bottom-full left-0 right-0 mb-2 bg-white border-2 border-primary shadow-xl z-50 max-h-60 overflow-y-auto",children:t.jsx("div",{className:"p-2",children:j.map((e,r)=>t.jsxs("button",{onClick:t=>((e,t)=>{e.preventDefault(),e.stopPropagation(),window.open(`/storage/images/item/${t.url}`,"_blank"),f(!1)})(t,e),className:"w-full flex items-center gap-3 px-4 py-3 text-left customtext-neutral-dark hover:bg-gray-100 transition-colors rounded-lg",children:[t.jsx(s,{size:18,className:"customtext-primary flex-shrink-0"}),t.jsx("span",{className:"flex-1 truncate",children:e.title||`Ficha Técnica ${r+1}`}),t.jsx(a,{size:16,className:"customtext-primary flex-shrink-0"})]},r))})})]}):g?t.jsx("button",{className:"w-full flex items-center justify-center gap-2 bg-transparent border-2 border-primary customtext-primary py-3 px-4  font-semibold hover:bg-primary hover:text-white transition-all duration-300",children:"Ver más"}):t.jsxs("button",{onClick:e=>{e.preventDefault(),e.stopPropagation();const t=structuredClone(p),a=t.findIndex(e=>e.id==m?.id);-1==a?t.push({...m,quantity:1}):t[a].quantity++,d(t),u(!0),setTimeout(()=>u(!1),3e3)},className:"w-full flex items-center justify-center gap-2 bg-transparent border-2 border-primary customtext-primary py-3 px-4  font-semibold hover:bg-primary hover:text-white transition-all duration-300",children:[t.jsx(i,{size:18}),"Agregar al carrito"]})})]})]}),t.jsx(n,{data:c,cart:p,setCart:d,modalOpen:x,setModalOpen:u})]})};export{c as P};
