var S=Object.defineProperty;var E=(t,o,n)=>o in t?S(t,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[o]=n;var m=(t,o,n)=>E(t,typeof o!="symbol"?o+"":o,n);import{W as G}from"./index.esm-D6GvEWn_.js";import{m as p}from"./main-B6F2O9-U.js";import{G as A}from"./Global-DWbVqTT_.js";/* empty css               *//* empty css              */import{G as P}from"./General-BmbBKdsB.js";import{L as R}from"./LaravelSession-Dz9cpV3l.js";import{C as j}from"./CanAccess-CiBvBfVT.js";const r=class r{static get(o){return this.values[o]??null}static set(o,n){this.models=[...new Set([...this.models,o])],this.values[o]=n}};m(r,"models",[]),m(r,"values",{}),m(r,"has",(o,n)=>{var s;return(s=r.values[o])==null?void 0:s[n]});let f=r,C=[];const B=(...t)=>{const o=[];return Array.isArray(t)?o.push(...t):o.push(t),!!C.find(n=>o.includes(n.name))},O=t=>{G({resolve:o=>`/${o}.jsx`,setup:({el:o,props:n})=>{var d;const s=n.initialPage.props;for(const e in s.fillable??{})s.fillable[e]&&f.set(e,s.fillable[e]);for(const e of s.can_access??[])j[e.menu]=e.can_access==1;if(s!=null&&s.global)for(const e in s.global)A.set(e,s.global[e]);if(s!=null&&s.generals)for(const e in s.generals){const{correlative:c,description:i}=s.generals[e];P.set(c,i)}const u={...s==null?void 0:s.session};for(const e in u)R.set(`${e}`,u[e]);const k=(e,...c)=>{var h,g,v,y;const i=[];if(Array.isArray(e))for(const a of e)i.push(...c.map(l=>`${a}.${l}`));else i.push(...c.map(a=>`${e}.${a}`));if((g=(h=s==null?void 0:s.session)==null?void 0:h.permissions)!=null&&g.find(a=>i.includes(a.name)||a.name=="general.root"))return!0;const $=((v=s==null?void 0:s.session)==null?void 0:v.roles)??[];for(const a of $)if((y=a==null?void 0:a.permissions)!=null&&y.find(l=>i.includes(l.name)||l.name=="general.root"))return!0;return!1};C=((d=s==null?void 0:s.session)==null?void 0:d.roles)??[],p.FetchParams.headers={Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(p.Cookies.get("XSRF-TOKEN"))},t(o,{...s,can:k,hasRole:B}),A.APP_ENV==="local"&&document.querySelectorAll(".modal-backdrop").forEach(c=>{console.log(c),c.textContent||c.remove()})}})};export{O as C,f as F,B as h};
