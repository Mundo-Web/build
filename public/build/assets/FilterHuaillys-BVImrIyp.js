import{j as s}from"./AboutSimple-Cf8x2fCZ.js";import{r as n}from"./index-BOnQTV8N.js";import{S as T,a as B}from"./BlogCarousel-DCQ9UYu0.js";import{N as F}from"./navigation-BIDIUzpb.js";import{A as V}from"./autoplay-BjAsSK2h.js";/* empty css               */import"./CategoryInfiniteSlider-C6UMaVwV.js";import"./BlogCarrusel-klwTVD05.js";import{P as z}from"./ProductCardSelector-BXk6tEhb.js";import{I as A}from"./ItemsRest-Dp5IKigO.js";import{L as q}from"./Loading-B-FwDSWi.js";import{N as G}from"./NoResult-DlL_OOrq.js";import{m as w}from"./main-B6F2O9-U.js";import{C as M}from"./chevron-left-JcR9Fe4w.js";import{C as U}from"./chevron-right-Cug7tVUE.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./create-element-if-not-defined-DUWlnlug.js";import"./preload-helper-BfFHrpNk.js";import"./BasicRest-BML1C-ua.js";import"./CardProductKatya-ncpmQ0JU.js";import"./index-pSueRYGM.js";import"./index-B6ujFmsw.js";import"./BooleanLimit-D-OsQsek.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./createLucideIcon-DfjclApS.js";const W=new A,fe=({items:m,data:e,cart:N,setCart:_,filteredData:a,setFavorites:k,favorites:P})=>{const x=n.useRef(null),h=n.useRef(null),[u,E]=n.useState([]),[l,b]=n.useState(null),[p,g]=n.useState([]),[S,d]=n.useState(!0),[j,f]=n.useState({category_id:[]});n.useEffect(()=>{if(a!=null&&a.categories&&(E(a.categories),w.GET.category&&a.categories.length>0)){const r=a.categories.find(t=>t.slug===w.GET.category||t.id===parseInt(w.GET.category));r&&(b(r),f(t=>({...t,category_id:[r.id]})))}},[a]);const C=r=>{const t=[];if(r.category_id&&r.category_id.length>0){const i=r.category_id.map(o=>["category.id","=",o]);if(i.length===1)t.push(i[0]);else if(i.length>1){const o=i.reduce((c,y,I)=>I===0?y:[c,"or",y]);t.push(o)}}return t.length>0?t.length===1?t[0]:t.reduce((i,o,c)=>c===0?o:[i,"and",o]):[]},$=async(r=1)=>{d(!0);try{const t=C(j),i=24,o={filter:t,sort:[{selector:"final_price",desc:!0}],skip:(r-1)*i,take:i,requireTotalCount:!0},c=await W.paginate(o);if(c.status!==200)throw new Error(`API returned status ${c.status}`);g(c.data||[])}catch(t){console.error("Error fetching products:",t),g([])}finally{d(!1)}};n.useEffect(()=>{$()},[j]),n.useEffect(()=>{m&&m.length>0&&p.length===0&&(g(m),d(!1))},[m]);const R=r=>r.split(/(\*.*?\*)/g).map((i,o)=>{if(i.startsWith("*")&&i.endsWith("*")){const c=i.replace(/\*/g,"");return s.jsxs("span",{className:"font-title customtext-primary ",children:[s.jsx("br",{}),c]},o)}return s.jsx("span",{className:"font-title",children:i},o)}),v=r=>{if(b(r),r===null){f({category_id:[]});const t=new URL(window.location.href);t.searchParams.delete("category"),window.history.pushState({},"",t)}else{f({category_id:[r.id]});const t=new URL(window.location.href);t.searchParams.set("category",r.slug||r.id),window.history.pushState({},"",t)}},L=r=>{window.location.href=`/product/${r.slug}`};return s.jsxs("div",{className:"w-full bg-white font-paragraph",children:[(e==null?void 0:e.background_image)&&s.jsxs("div",{className:"relative w-full h-64 lg:h-72 bg-cover  flex items-center justify-center",style:{backgroundImage:`url(${e.background_image})`,backgroundSize:"cover",backgroundPosition:"center"},children:[s.jsx("div",{className:"absolute inset-0 bg-black/60"}),s.jsxs("div",{className:"relative w-full z-10 text-start px-[5%] 2xl:px-0 2xl:max-w-7xl mx-auto",children:[s.jsx("h1",{className:`text-3xl md:text-5xl font-title lg:text-7xl text-start text-white ${(e==null?void 0:e.class_hero_title)||""}`,children:R((e==null?void 0:e.hero_title)||"Nuestro *CatÃ¡logo*")}),(e==null?void 0:e.hero_subtitle)&&s.jsx("p",{className:`text-lg md:text-xl text-white/90 mt-4 font-paragraph ${(e==null?void 0:e.class_hero_subtitle)||""}`,children:e.hero_subtitle})]})]}),s.jsx("section",{className:"py-8 lg:py-16 bg-secondary",children:s.jsx("div",{className:"w-full px-[5%] 2xl:px-0 2xl:max-w-7xl mx-auto",children:u&&u.length>0&&s.jsxs("div",{className:"relative",children:[s.jsx(T,{modules:[V,F],spaceBetween:16,slidesPerView:1,autoplay:{delay:3e3,disableOnInteraction:!1,pauseOnMouseEnter:!0},navigation:{prevEl:x.current,nextEl:h.current},onBeforeInit:r=>{r.params.navigation.prevEl=x.current,r.params.navigation.nextEl=h.current},loop:u.length>4,speed:800,breakpoints:{640:{slidesPerView:2,spaceBetween:16},768:{slidesPerView:3,spaceBetween:20},1024:{slidesPerView:4,spaceBetween:24}},className:"category-swiper",children:u.map(r=>s.jsx(B,{children:s.jsxs("div",{className:`group cursor-pointer rounded-2xl overflow-hidden hover:shadow-xl transition-all duration-300 h-full my-4 ${(l==null?void 0:l.id)===r.id?`bg-white ${(e==null?void 0:e.class_category_card_selected)||""}`:"bg-white"}`,onClick:()=>v(r),children:[s.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden rounded-t-2xl bg-gray-100",children:[s.jsx("img",{src:`/storage/images/category/${r.image}`,alt:r.name||r.nombre,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",onError:t=>{t.target.src="/assets/img/noimage/no_img.jpg"}}),(l==null?void 0:l.id)===r.id&&s.jsx("div",{className:"absolute inset-0 bg-primary/20 flex items-center justify-center",children:s.jsx("div",{className:"w-16 h-16 bg-primary rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})})]}),s.jsxs("div",{className:`p-4 lg:px-6 transition-colors duration-300 rounded-b-2xl ${(l==null?void 0:l.id)===r.id?"bg-primary text-white":"bg-white group-hover:bg-primary group-hover:text-white"}`,children:[s.jsx("h3",{className:`text-lg lg:text-xl font-bold transition-colors duration-300 text-left ${(e==null?void 0:e.class_category_card_title)||""}`,children:r.name||r.nombre}),(r.description||r.descripcion)&&s.jsx("p",{className:`text-sm font-paragraph text-left mt-2 line-clamp-2 opacity-90 ${(e==null?void 0:e.class_category_card_description)||""}`,children:r.description||r.descripcion})]})]})},r.id))}),s.jsx("button",{ref:x,className:"absolute left-0 top-1/2 -translate-y-1/2 z-10 w-10 h-10 lg:w-12 lg:h-12 flex items-center justify-center rounded-full bg-white shadow-lg hover:bg-primary hover:text-white transition-all duration-300 -ml-5 lg:-ml-6 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Anterior",children:s.jsx(M,{className:"w-5 h-5 lg:w-6 lg:h-6"})}),s.jsx("button",{ref:h,className:"absolute right-0 top-1/2 -translate-y-1/2 z-10 w-10 h-10 lg:w-12 lg:h-12 flex items-center justify-center rounded-full bg-white shadow-lg hover:bg-primary hover:text-white transition-all duration-300 -mr-5 lg:-mr-6 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Siguiente",children:s.jsx(U,{className:"w-5 h-5 lg:w-6 lg:h-6"})})]})})}),s.jsx("section",{className:"py-8 lg:py-16 bg-white",children:s.jsxs("div",{className:"w-full px-[5%] 2xl:px-0 2xl:max-w-7xl mx-auto",children:[s.jsx("div",{className:"flex mb-8  w-full flex-col gap-6 lg:flex-row justify-between items-center",children:s.jsxs("div",{className:"text-left",children:[s.jsx("h2",{className:`text-3xl lg:text-5xl customtext-neutral-dark font-title mb-3  tracking-wide ${(e==null?void 0:e.class_product_title)||""}`,children:(e==null?void 0:e.product_title)||"Pide todo lo que quieras y comparte"}),(e==null?void 0:e.product_description)&&s.jsx("p",{className:`customtext-neutral-dark font-paragraph text-base ${(e==null?void 0:e.class_product_description)||""}`,children:e.product_description}),l&&s.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[s.jsx("span",{className:"text-sm customtext-neutral-light",children:"Mostrando:"}),s.jsx("span",{className:"bg-primary text-white px-4 py-2 rounded-full font-bold text-sm",children:l.name||l.nombre}),s.jsx("button",{onClick:()=>v(null),className:"text-sm text-gray-500 hover:text-primary transition-colors underline",children:"Ver todos"})]})]})}),S?s.jsx(q,{}):p&&p.length>0?s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 lg:gap-6",children:p.map(r=>s.jsx(z,{cardType:(e==null?void 0:e.type_card_product)||"ProductCard",product:r,data:e,cart:N,setCart:_,favorites:P,setFavorites:k,handleProductClick:L},r.id))}):s.jsx(G,{})]})})]})};export{fe as default};
