var e=Object.defineProperty,s=(s,a,r)=>((s,a,r)=>a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[a]=r)(s,"symbol"!=typeof a?a+"":a,r);import{c as a,j as r,r as n}from"./vendor-react-CIjjZrQp.js";import{B as t}from"./Base-D1FKaeZ5.js";import{C as i}from"./CreateReactScript-Do4erbmq.js";import{T as o}from"./Table-Ce5n_EEe.js";import{D as l}from"./DxButton-C6FT_beP.js";import{R as c}from"./ReactAppend-B_bliDNA.js";import{B as d}from"./BasicRest-Czelh5on.js";import{M as m}from"./Modal-Bmr1DkU1.js";import{S as p}from"./CartKuchara-CBARZO7P.js";import"./vendor-swiper-Cr_RrIb_.js";import"./Footer-BJbvhrcw.js";import"./TippyButton-B8BlKwat.js";import"./Logout-SKbOtRSV.js";import"./MenuItemContainer-D2xwtSPm.js";import"./Menu-C8sUAoYZ.js";import"./General-ClVW7qxN.js";import"./LaravelSession-ByQnaUD3.js";import"./BooleanLimit-q2Ad9fGY.js";import"./OpenPayCardModal-CwaBgze7.js";const j=new class extends d{constructor(){super(...arguments),s(this,"path","admin/messages")}},h=()=>{const e=n.useRef(),s=n.useRef(),[a,t]=n.useState(null),i=a=>{a.seen||(j.boolean({id:a.id,field:"seen",value:!0}),$(e.current).dxDataGrid("instance").refresh()),t(a),$(s.current).modal("show")};return r.jsxs(r.Fragment,{children:[r.jsx(o,{gridRef:e,title:"Mensajes",rest:j,toolBar:s=>{s.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(e.current).dxDataGrid("instance").refresh()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"name",caption:"Nombre",cellTemplate:(e,{data:s})=>{c(e,r.jsx("span",{style:{width:"100%",fontWeight:s.seen?"lighter":"bold",cursor:"pointer"},onClick:()=>i(s),children:s.name}))}},{dataField:"email",caption:"Correo"},{dataField:"created_at",caption:"Fecha",dataType:"datetime",format:"yyyy-MM-dd HH:mm:ss",sortOrder:"desc"},{dataField:"status",caption:"Estado",dataType:"boolean",cellTemplate:(e,{data:s})=>{s.seen?c(e,r.jsx("span",{className:"badge bg-success rounded-pill",children:"Leído"})):c(e,r.jsx("span",{className:"badge bg-danger rounded-pill",children:"No leído"}))}},{caption:"Acciones",cellTemplate:(s,{data:a})=>{s.append(l({className:"btn btn-xs btn-soft-dark",title:"Ver mensaje",icon:"fa fa-eye",onClick:()=>i(a)})),s.append(l({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>(async s=>{const{isConfirmed:a}=await p.fire({title:"Eliminar mensaje",text:"¿Estas seguro de eliminar este mensaje?",icon:"warning",showCancelButton:!0,confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"});if(!a)return;await j.delete(s)&&$(e.current).dxDataGrid("instance").refresh()})(a.id)}))},allowFiltering:!1,allowExporting:!1}]}),r.jsxs(m,{modalRef:s,title:"Mensaje",hideFooter:!0,children:[r.jsxs("p",{children:[r.jsx("b",{children:"Nombre"}),":",r.jsx("span",{className:"ms-1",children:a?.name})]}),r.jsxs("p",{children:[r.jsx("b",{children:"Correo"}),":",r.jsx("span",{className:"ms-1",children:a?.email||r.jsx("i",{className:"text-muted",children:"- Sin correo -"})})]}),a?.phone&&r.jsxs("p",{children:[r.jsx("b",{children:"Teléfono"}),":",r.jsx("span",{className:"ms-1",children:a?.phone})]}),a?.company&&r.jsxs("p",{children:[r.jsx("b",{children:"Empresa"}),":",r.jsx("span",{className:"ms-1",children:a?.company})]}),a?.ruc&&r.jsxs("p",{children:[r.jsx("b",{children:"RUC"}),":",r.jsx("span",{className:"ms-1",children:a?.ruc})]}),a?.subject&&r.jsxs("p",{children:[r.jsx("b",{children:"Asunto"}),":",r.jsx("span",{className:"ms-1",children:a?.subject})]}),a?.category&&r.jsxs("p",{children:[r.jsx("b",{children:"Categoría"}),":",r.jsx("span",{className:"ms-1",children:a?.category})]}),a?.subcategory&&r.jsxs("p",{children:[r.jsx("b",{children:"Subcategoría"}),":",r.jsx("span",{className:"ms-1",children:a?.subcategory})]}),a?.machinery&&r.jsxs("p",{children:[r.jsx("b",{children:"Maquinaria"}),":",r.jsx("span",{className:"ms-1",children:a?.machinery})]}),r.jsxs("p",{children:[r.jsx("b",{children:"Mensaje"}),":",r.jsx("span",{className:"ms-1",children:a?.description})]})]})]})};i((e,s)=>{a.createRoot(e).render(r.jsx(t,{...s,title:"Mensajes",children:r.jsx(h,{...s})}))});
