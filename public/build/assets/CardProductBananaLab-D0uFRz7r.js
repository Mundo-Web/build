import{r as e,j as t,i as s,a9 as a,bj as r,ag as i}from"./vendor-react-BX-OgZ1w.js";import"./CartKuchara-BRbOrA8K.js";import{I as l}from"./ItemsRest-CABlRwg_.js";import"./CartModal-BIIcKn3E.js";import{t as o}from"./OpenPayCardModal-DKUbGzgl.js";import{C as n}from"./CartModalBananaLab-fa9IWGP6.js";import{C as c}from"./Number2Currency-BX4epFEo.js";import{m as d}from"./vendor-motion-0lf5WkjI.js";import"./vendor-swiper-Cr_RrIb_.js";import"./BasicRest-qY-8D5Ep.js";import"./BooleanLimit-q2Ad9fGY.js";import"./CartItemRow-CxYlbkTa.js";import"./TippyButton-DqdjTa95.js";import"./General-ClVW7qxN.js";const m=({data:m,product:u,widthClass:p="lg:w-1/4",setCart:x,cart:h,setFavorites:f,favorites:g,onClickTracking:j})=>{const b=new l,[v,w]=e.useState(!1),[N,y]=e.useState(!1),[k,C]=e.useState([]),_=g.some(e=>e.id===u?.id),$=m?.style_offer||"square";e.useEffect(()=>{u?.id&&(async e=>{try{const t={slug:e?.slug},s=await b.getVariations(t);if(!s)return;C(s.variants)}catch(t){return}})(u)},[u]);return t.jsxs(t.Fragment,{children:[t.jsx(d.a,{href:`/product/${u?.slug}`,onClick:e=>{j&&u&&j(u)},initial:{scale:1},whileHover:{scale:1.02,transition:{duration:.3}},className:`group px-3  bg-transparent  ${p} rounded-b-3xl overflow-hidden flex-shrink-0 font-paragraph cursor-pointer relative `,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),children:t.jsxs("div",{className:"bg-transparent rounded-md  h-full  flex flex-col ",children:[t.jsxs("div",{className:"relative bg-white rounded-xl overflow-hidden",children:[null!=u?.final_price&&!isNaN(u?.final_price)&&Number(u?.final_price)>0&&Number(u?.final_price)<Number(u?.price)&&("square"===$?t.jsx("span",{className:"absolute top-3 right-0 lg:right-0 bg-[#F93232] text-white text-xs font-bold px-2 py-2 shadow-md z-20",children:"Oferta"}):t.jsxs("span",{className:"absolute top-2 right-2 bg-[#F93232] text-white text-base font-medium px-2 py-1 rounded-full z-20",children:["-",Number(100-Number(100*u?.discount/u?.price)).toFixed(0),"%"]})),t.jsx(d.div,{className:"aspect-square rounded-t-md overflow-hidden flex items-center justify-center",whileHover:{scale:1.05},transition:{duration:.3},children:t.jsx("img",{src:`/storage/images/item/${u?.image}`,onError:e=>e.target.src="/api/cover/thumbnail/null",alt:u?.name,className:"w-full h-full object-cover object-center",loading:"lazy"})})]}),t.jsxs("div",{className:"p-3 flex-grow flex flex-col",children:[t.jsx("div",{className:"flex gap-1",children:m?.visible_variations&&k&&k?.map(e=>t.jsx(s,{content:e.color,children:t.jsx(d.a,{href:`/product/${e.slug}`,className:"variant-option rounded-full object-fit-cover",whileHover:{scale:1.1},whileTap:{scale:.9},children:t.jsx("img",{className:"color-box rounded-full h-3 w-3 lg:w-4 lg:h-4 object-fit-cover",src:`/storage/images/item/${e.texture}`})})},e.slug))}),t.jsx("h2",{className:"block customtext-accent font-semibold line-clamp-1",children:u?.category?.name}),t.jsxs("div",{className:"flex justify-between items-start w-full mt-2",children:[t.jsx("h3",{className:" customtext-neutral-dark text-xs lg:text-[15px] leading-4 font-semibold mb-2 line-clamp-3 "+(m?.support_favorite?"w-11/12 lg:w-10/12":"w-full"),children:u?.name}),m?.support_favorite&&t.jsx("button",{onClick:e=>((e,s)=>{e.preventDefault(),e.stopPropagation();const a=structuredClone(g),r=a.findIndex(e=>e.id==s?.id);-1==r?(a.push({...s,quantity:1}),o.success("Producto agregado",{description:`${s?.name} se ha aÃ±adido a los favoritos.`,icon:t.jsx(i,{className:"h-5 w-5 text-green-500"}),duration:3e3,position:"bottom-center"})):(a.splice(r,1),o.info("Producto removido",{description:`${s?.name} se ha quitado de los favoritos.`,icon:t.jsx(i,{className:"h-5 w-5 text-blue-500"}),duration:3e3,position:"bottom-center"})),f(a)})(e,u),className:"customtext-primary brightness-125 hover:brightness-100 hover:customtext-primary fill-primary transition-colors duration-200",children:_?t.jsx(a,{width:18,strokeWidth:3,fill:"current"}):t.jsx(a,{width:18,strokeWidth:1.5})})]}),m?.show_price&&t.jsxs("div",{className:"flex flex-col lg:flex-row items-center gap-4 mt-1",children:[t.jsxs("span",{className:"customtext-neutral-dark text-[20px] md:text-2xl font-bold",children:[c()," ",u?.final_price]}),Number(u?.discount)>0&&Number(u?.final_price)<Number(u?.price)&&t.jsxs("span",{className:"text-base lg:text-base customtext-neutral-light line-through font-semibold",children:[c()," ",u?.price]})]}),t.jsx("div",{className:"mt-3 overflow-hidden block lg:hidden",children:t.jsxs("a",{href:`/product/${u?.slug}`,className:`w-full text-[10px] font-light lg:font-normal flex items-center justify-center bg-primary text-white lg:text-sm py-2 lg:py-3 px-4 rounded-full shadow-md hover:bg-primary-dark transition-all duration-300 ${m?.class_button||""}`,children:[t.jsx("span",{className:"mr-2",children:"Ir a detalle"}),t.jsx(r,{className:"w-3 h-3 lg:w-4 lg:h-4",strokeWidth:2})]})}),t.jsx("div",{className:"hidden lg:block mt-3 h-[48px]",children:t.jsx(d.div,{initial:{opacity:0,y:6},animate:{opacity:N?1:0,y:N?0:6},transition:{duration:.18},className:"w-full h-full flex items-center",children:t.jsxs("a",{href:`/product/${u?.slug}`,className:`w-full text-[10px] font-light lg:font-normal flex items-center justify-center bg-primary  lg:text-sm py-2 lg:py-3 px-4 rounded-full shadow-md hover:bg-primary-dark transition-all duration-300 ${m?.class_button||"text-white"}`,children:[t.jsx("span",{className:"mr-2",children:"Ir a detalle"}),t.jsx(r,{className:"w-3 h-3 lg:w-4 lg:h-4",strokeWidth:2})]})})})]})]})}),t.jsx(n,{data:m,cart:h,setCart:x,modalOpen:v,setModalOpen:w})]})};export{m as default};
