var E=Object.defineProperty;var C=(t,o,a)=>o in t?E(t,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[o]=a;var R=(t,o,a)=>C(t,typeof o!="symbol"?o+"":o,a);import{j as i}from"./AboutSimple-Cf8x2fCZ.js";import{B as N}from"./Base-C1Y36PX1.js";import{I as B}from"./InputFormGroup-iZIO11ZN.js";import{S as D}from"./SelectFormGroup-X8WqJHHl.js";import{S as y}from"./SwitchFormGroup-DXN0cwVk.js";import{T as G}from"./TextareaFormGroup-CliirJM1.js";import{r as s}from"./index-BOnQTV8N.js";import{c as I}from"./ReactAppend-QR5TrZfj.js";import{s as g}from"./server.browser-Bf4gQIc7.js";import{S as v}from"./ProductCard-D9l7c7at.js";import{B as A}from"./BasicRest-BML1C-ua.js";import{M as q}from"./Modal-xDw9ufjg.js";import{T as z}from"./Table-Cv1BshIS.js";import{D as S}from"./DxButton-DV0H-ZcL.js";import{C as M}from"./CreateReactScript-Bqovr-Zn.js";import{R as P}from"./ReactAppend-Vm5G2nof.js";import{v as L,w as U,x as V,y as W,z as Y,A as H,B as O,C as X,D as _,E as J,G as K,H as Q}from"./index-D_aREkSt.js";import"./index-yBjzXJbu.js";import"./Global-CazroCzF.js";import"./tippy-react.esm-DmkRJDEW.js";import"./index-pSueRYGM.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./index-B6ujFmsw.js";/* empty css              */import"./Logout-BpuTJ_83.js";import"./main-B6F2O9-U.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./MenuItemContainer-DcxtOi47.js";import"./index.esm-C48oHfFw.js";import"./index-ngrFHoWO.js";import"./CanAccess-BlvzCYjQ.js";import"./CardProductKatya-ncpmQ0JU.js";import"./BooleanLimit-D-OsQsek.js";/* empty css               */import"./General-apRuNwp7.js";import"./LaravelSession-Dz9cpV3l.js";class Z extends A{constructor(){super(...arguments);R(this,"path","admin/socials")}}const f=new Z,d=[{id:"facebook",name:"Facebook",icon:L,iconRef:"fab fa-facebook"},{id:"instagram",name:"Instagram",icon:U,iconRef:"fab fa-instagram"},{id:"twitter",name:"Twitter/X",icon:V,iconRef:"fab fa-twitter"},{id:"linkedin",name:"LinkedIn",icon:W,iconRef:"fab fa-linkedin"},{id:"youtube",name:"YouTube",icon:Y,iconRef:"fab fa-youtube"},{id:"tiktok",name:"TikTok",icon:H,iconRef:"fab fa-tiktok"},{id:"whatsapp",name:"WhatsApp",icon:O,iconRef:"fab fa-whatsapp"},{id:"telegram",name:"Telegram",icon:X,iconRef:"fab fa-telegram"},{id:"discord",name:"Discord",icon:_,iconRef:"fab fa-discord"},{id:"snapchat",name:"Snapchat",icon:J,iconRef:"fab fa-snapchat"},{id:"pinterest",name:"Pinterest",icon:K,iconRef:"fab fa-pinterest"},{id:"reddit",name:"Reddit",icon:Q,iconRef:"fab fa-reddit"}],ee=({})=>{const t=s.useRef(),o=s.useRef(),a=s.useRef(),c=s.useRef(),p=s.useRef(),u=s.useRef(),[w,x]=s.useState(!1),[l,h]=s.useState(null),j=e=>{const n=d.find(r=>r.id===e);h(n)};s.useEffect(()=>{const e=()=>{c.current&&$(c.current).on("change",function(){const n=$(this).val();j(n)})};return $(o.current).on("shown.bs.modal",e),()=>{c.current&&$(c.current).off("change"),$(o.current).off("shown.bs.modal",e)}},[]);const b=e=>{e!=null&&e.id?x(!0):x(!1),a.current.value=(e==null?void 0:e.id)??"",p.current.value=(e==null?void 0:e.name)??"",u.current.value=(e==null?void 0:e.link)??"";const n=d.find(r=>r.name===(e==null?void 0:e.description)||r.iconRef===(e==null?void 0:e.icon));n?(h(n),setTimeout(()=>{$(c.current).val(n.id).trigger("change")},100)):(h(null),setTimeout(()=>{$(c.current).val("").trigger("change")},100)),$(o.current).modal("show")},k=async e=>{if(e.preventDefault(),!l){v.fire("Error","Por favor selecciona una red social","error");return}const n={id:a.current.value||void 0,icon:l.iconRef,name:p.current.value,description:l.name,link:u.current.value};await f.save(n)&&($(t.current).dxDataGrid("instance").refresh(),$(o.current).modal("hide"))},F=async({id:e,value:n})=>{await f.boolean({id:e,field:"visible",value:n})&&$(t.current).dxDataGrid("instance").refresh()},T=async e=>{const{isConfirmed:n}=await v.fire({title:"Eliminar registro",text:"Â¿Estas seguro de eliminar este registro?",icon:"warning",showCancelButton:!0,confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"});!n||!await f.delete(e)||$(t.current).dxDataGrid("instance").refresh()};return i.jsxs(i.Fragment,{children:[i.jsx(z,{gridRef:t,title:"Redes Sociales",rest:f,toolBar:e=>{e.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(t.current).dxDataGrid("instance").refresh()}}),e.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Nuevo registro",hint:"Nuevo registro",onClick:()=>b()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"name",caption:"Usuario"},{dataField:"description",caption:"Red Social",cellTemplate:(e,{data:n})=>{const r=d.find(m=>m.name===n.description||m.iconRef===n.icon);if(r){const m=r.icon;e.html(g.renderToString(i.jsxs("span",{className:"d-flex align-items-center",children:[i.jsx(m,{className:"me-2",size:16}),n.description]})))}else e.html(g.renderToString(i.jsxs(i.Fragment,{children:[i.jsx("i",{className:`fab ${n.icon} me-1`}),n.description]})))}},{dataField:"link",caption:"Link"},{dataField:"visible",caption:"Visible",dataType:"boolean",cellTemplate:(e,{data:n})=>{$(e).empty(),P(e,i.jsx(y,{checked:n.visible==1,onChange:()=>F({id:n.id,value:!n.visible})}))}},{caption:"Acciones",cellTemplate:(e,{data:n})=>{e.css("text-overflow","unset"),e.append(S({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>b(n)})),e.append(S({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>T(n.id)}))},allowFiltering:!1,allowExporting:!1}]}),i.jsx(q,{modalRef:o,title:w?"Editar red social":"Agregar red social",onSubmit:k,size:"md",children:i.jsxs("div",{className:"row",id:"socials-container",children:[i.jsx("input",{ref:a,type:"hidden"}),i.jsxs("div",{className:"col-12 mb-3",children:[i.jsxs("label",{className:"form-label",children:["Red Social ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsxs(D,{eRef:c,dropdownParent:"#socials-container",required:!0,children:[i.jsx("option",{value:"",children:"Seleccionar red social..."}),d.map(e=>i.jsx("option",{value:e.id,children:e.name},e.id))]})]}),l&&i.jsx("div",{className:"col-12 mb-3",children:i.jsxs("div",{className:"alert alert-info d-flex align-items-center",children:[i.jsx(l.icon,{className:"me-2",size:20}),i.jsxs("span",{children:["Red social seleccionada: ",i.jsx("strong",{children:l.name})]})]})}),i.jsx(B,{eRef:p,label:"Usuario/Nombre de cuenta",col:"col-12",required:!0}),i.jsx(G,{eRef:u,label:"Enlace (https://...)",col:"col-12",rows:2,required:!0})]})})]})};M((t,o)=>{I.createRoot(t).render(i.jsx(N,{...o,title:"Redes Sociales",children:i.jsx(ee,{...o})}))});
