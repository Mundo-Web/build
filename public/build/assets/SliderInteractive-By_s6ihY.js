import{j as r}from"./AboutSimple-Cf8x2fCZ.js";import{r as a}from"./index-BOnQTV8N.js";import{a as re}from"./adjustTextColor-DJKJvkxA.js";import{G as A}from"./Global-DWbVqTT_.js";import{A as R}from"./index-BZvh78jk.js";import{m as d}from"./proxy-B0QLMKEh.js";import{T as se}from"./tag-Dgi-uTqk.js";import{M as ie}from"./message-circle-t1YvztHi.js";import{C as oe}from"./chevron-left-JcR9Fe4w.js";import{C as ae}from"./chevron-right-Cug7tVUE.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./createLucideIcon-DfjclApS.js";const je=({items:x,data:t,generals:f=[]})=>{const N={initial:{scale:1,opacity:1},animate:{scale:[1,1.2,1],x:[1,-50,1],opacity:1,transition:{duration:20,repeat:1/0,repeatType:"loop"}},exit:{scale:1,opacity:.8,transition:{duration:.3,ease:"easeInOut"}}},L={initial:{opacity:0,y:60,scale:.8},animate:{opacity:1,y:0,scale:1,transition:{duration:.8,delay:.8,ease:"easeOut"}},exit:{opacity:0,y:-30,scale:.9,transition:{duration:.4,ease:"easeInOut"}}},S={initial:{opacity:0,y:40,filter:"blur(10px)"},animate:{opacity:1,y:0,filter:"blur(0px)",transition:{duration:.7,delay:1.3,ease:"easeOut"}},exit:{opacity:0,y:-20,filter:"blur(8px)",transition:{duration:.3,ease:"easeInOut"}}},D={initial:{opacity:0,y:40,scale:.9},animate:{opacity:1,y:0,scale:1,transition:{duration:.6,delay:1.6,ease:"easeOut"}},exit:{opacity:0,y:20,scale:.8,transition:{duration:.2,ease:"easeInOut"}}},O={initial:{},animate:{transition:{staggerChildren:.1}},exit:{}},V=(e=>{const n=["true","si"],s=["false","no"];return n.includes(e==null?void 0:e.toLowerCase())?!0:(s.includes(e==null?void 0:e.toLowerCase()),!1)})(t==null?void 0:t.infiniteLoop),b=f==null?void 0:f.find(e=>e.correlative==="phone_whatsapp"),v=f==null?void 0:f.find(e=>e.correlative==="message_whatsapp"),k=(b==null?void 0:b.description)??null,B=(v==null?void 0:v.description)??null,[i,m]=a.useState(1),o=a.useRef(null),l=a.useRef(!1),w=a.useRef(0),c=a.useRef(0);console.log("sliders",x);const h=(x==null?void 0:x.sort((e,n)=>(e.order_index||0)-(n.order_index||0)))||[],u=[h[h.length-1],...h,h[0]],F=["center","left","right"],z=["yes","true","si"],_=F.includes(t==null?void 0:t.paginationAlignment),T=_?t==null?void 0:t.paginationAlignment:"center",C=z.includes(t==null?void 0:t.showNavigation);C&&(t==null||t.navigationAlignment);const y=()=>{m(e=>(e+1)%u.length)},j=()=>{m(e=>e===0?u.length-1:e-1)},I=e=>{let n=e.target;for(;n;){if(n.tagName==="A"||n.tagName==="BUTTON")return!0;n=n.parentElement}return!1},U=e=>{I(e)||(l.current=!0,w.current=e.touches[0].pageX,o.current.style.transition="none")},W=e=>{if(!l.current)return;const n=e.touches[0].pageX-w.current;c.current=-i*100+n/window.innerWidth*100,o.current.style.transform=`translateX(${c.current}%)`},q=e=>{if(!l.current)return;l.current=!1,o.current.style.transition="transform 0.5s ease-in-out",Math.abs((c.current+i*100)*(window.innerWidth/100))>20?c.current>-i*100?j():y():m(i),o.current.style.transform=`translateX(-${i*100}%)`},G=e=>{I(e)||(l.current=!0,w.current=e.pageX,o.current.style.transition="none")},H=e=>{if(!l.current)return;const n=e.pageX-w.current;c.current=-i*100+n/window.innerWidth*100,o.current.style.transform=`translateX(${c.current}%)`},M=e=>{if(!l.current)return;l.current=!1,o.current.style.transition="transform 0.5s ease-in-out",Math.abs((c.current+i*100)*(window.innerWidth/100))>20?c.current>-i*100?j():y():m(i),o.current.style.transform=`translateX(-${i*100}%)`},J=()=>{l.current&&M()};V&&a.useEffect(()=>{const e=setInterval(()=>{y()},5e3);return()=>clearInterval(e)},[i]),a.useEffect(()=>{i===0?setTimeout(()=>{o.current.style.transition="none",m(u.length-2),requestAnimationFrame(()=>{o.current.style.transform=`translateX(-${(u.length-2)*100}%)`,setTimeout(()=>{o.current.style.transition="transform 0.5s ease-in-out"},50)})},500):i===u.length-1&&setTimeout(()=>{o.current.style.transition="none",m(1),requestAnimationFrame(()=>{o.current.style.transform="translateX(-100%)",setTimeout(()=>{o.current.style.transition="transform 0.5s ease-in-out"},50)})},500)},[i]);const X=a.useRef([]);a.useEffect(()=>{X.current.forEach(e=>{e&&re(e)})},[h]);const[$,K]=a.useState(!1),Q=e=>{const n=new window.Image;n.crossOrigin="Anonymous",n.src=e,n.onload=function(){const s=document.createElement("canvas");s.width=n.width,s.height=n.height;const E=s.getContext("2d");E.drawImage(n,0,0,n.width,n.height);const g=E.getImageData(0,0,s.width,s.height);let P=0;for(let p=0;p<g.data.length;p+=4){const Z=g.data[p],ee=g.data[p+1],te=g.data[p+2],ne=(Z*299+ee*587+te*114)/1e3;P+=ne}const Y=P/(g.data.length/4);K(Y<128)}};return a.useEffect(()=>{const e=u[i];e!=null&&e.bg_image&&Q(`/storage/images/slider/${e.bg_image}`)},[i,u]),r.jsxs("div",{className:"relative w-full mx-auto",children:[r.jsx("div",{className:"overflow-hidden relative cursor-grab ease",onMouseDown:G,onMouseMove:H,onMouseUp:M,onMouseLeave:J,onTouchStart:U,onTouchMove:W,onTouchEnd:q,children:r.jsx("div",{ref:o,className:"flex",style:{transform:`translateX(-${i*100}%)`,transition:"transform 0.5s ease-in-out"},children:u.map((e,n)=>r.jsxs("div",{className:"w-full h-[589px] lg:h-auto  flex-shrink-0 relative",children:[r.jsx(R,{children:i===n&&r.jsxs(r.Fragment,{children:[r.jsx(d.img,{src:`/storage/images/slider/${e.bg_image||"undefined"}`,alt:e.name,loading:"lazy",className:`hidden md:block absolute top-0 left-0 h-full md:h-full w-screen md:w-full object-cover ${(t==null?void 0:t.imageBgPosition)||"object-right-25"} md:object-center z-0 md:mr-20 lg:mr-0`,variants:N,initial:"initial",animate:"animate",exit:"exit"},`image-desktop-${n}`),r.jsx(d.img,{src:`/storage/images/slider/${e.bg_image_mobile||e.bg_image||"undefined"}`,alt:e.name,loading:"lazy",className:`block md:hidden absolute top-0 left-0 h-full w-screen object-cover ${(t==null?void 0:t.imageBgPosition)||"object-right-25"} z-0`,variants:N,initial:"initial",animate:"animate",exit:"exit"},`image-mobile-${n}`)]})}),(t==null?void 0:t.overlayMobile)&&r.jsx("div",{className:"md:hidden absolute inset-0 bg-gradient-to-b from-transparent to-white"}),r.jsx("div",{className:`relative w-full px-primary 2xl:px-0 2xl:max-w-7xl  mx-auto  h-[530px] md:h-[600px] flex flex-col items-start justify-end md:justify-center ${$?"text-white":"customtext-neutral-dark"}`,children:r.jsx(R,{mode:"wait",children:r.jsxs(d.div,{variants:O,initial:"initial",animate:"animate",exit:"exit",className:"flex flex-col gap-5 lg:gap-10 items-start",children:[r.jsx(d.h2,{variants:L,className:`${A.APP_CORRELATIVE==="stechperu"?"w-9/12  md:w-full md:max-w-md ":"w-full  md:w-full md:max-w-lg "} font-title text-[40px] leading-tight sm:text-5xl md:text-6xl tracking-normal font-bold ${$?"text-white":"customtext-neutral-dark"} ${t==null?void 0:t.class_title}`,style:{textShadow:"0 0 20px rgba(0, 0, 0, .25)"},children:e.name}),r.jsx(d.p,{variants:S,className:`${A.APP_CORRELATIVE==="stechperu"?"w-8/12":"w-full"} md:w-full md:max-w-md text-lg leading-tight font-paragraph ${$?"text-white":"customtext-neutral-dark"} ${t==null?void 0:t.class_description}`,style:{textShadow:"0 0 20px rgba(0, 0, 0, .25)"},children:e.description}),e.button_text&&e.button_link&&r.jsxs(d.div,{variants:D,className:"flex flex-row gap-5 md:gap-10 justify-center items-start",children:[r.jsxs("a",{href:e.button_link,ref:s=>X.current[n]=s,className:`bg-primary border-none flex flex-row items-center gap-3 px-10 py-4 text-base rounded-xl tracking-wide font-bold text-white ${(t==null?void 0:t.class_button_primary)||"text-white"}`,onClick:s=>{s.stopPropagation()},onMouseDown:s=>s.stopPropagation(),onTouchStart:s=>s.stopPropagation(),children:[e.button_text,r.jsx(se,{width:"1.25rem",className:`transform rotate-90 ${(t==null?void 0:t.class_icon_primary)||""}`})]}),(t==null?void 0:t.whatsapp_info)&&k&&r.jsxs("a",{href:`https://wa.me/${k.replace(/\D/g,"")}?text=${encodeURIComponent(B||"¡Hola! Me interesa obtener más información sobre sus productos.")}`,target:"_blank",rel:"noopener noreferrer",className:"bg-white border-2 border-neutral-dark backdrop-blur-sm text-gray-800 flex flex-row items-center gap-3 px-6 lg:px-8 py-3 lg:py-4 text-sm lg:text-base rounded-xl tracking-wide font-bold",onClick:s=>{s.stopPropagation()},onMouseDown:s=>s.stopPropagation(),onTouchStart:s=>s.stopPropagation(),children:[r.jsx(ie,{width:"1.25rem",className:"customtext-neutral-dark"}),"Hablar con un asesor"]})]})]},`content-${i}-${e.name}`)})})]},`slide-${n}`))})}),C&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"absolute top-1/2 left-0 transform -translate-y-1/2 ",children:r.jsx("button",{onClick:j,className:"bg-secondary rounded-r-lg text-white w-12 h-12 flex items-center justify-center",children:r.jsx(oe,{width:"1rem"})})}),r.jsx("div",{className:"absolute top-1/2 right-0 transform -translate-y-1/2 ",children:r.jsx("button",{onClick:y,className:"bg-secondary rounded-l-lg text-white w-12 h-12 flex items-center justify-center",children:r.jsx(ae,{width:"1rem"})})})]}),_&&r.jsx("div",{className:"px-primary 2xl:px-0 2xl:max-w-7xl mx-auto ",children:r.jsx("div",{className:"relative",children:r.jsx("div",{className:`absolute bottom-4 ${T==="left"?"inset-x-0 left-0":T==="right"?"right-0":"left-1/2 transform -translate-x-1/2"}`,children:h.map((e,n)=>r.jsx("div",{className:`inline-flex mx-1 w-3 h-3 rounded-full ${i===n+1?"bg-white h-5 w-5 lg:w-6 lg:h-6 items-center justify-center border-2 border-primary":"bg-secondary"}`,onClick:()=>m(n+1),children:i===n+1&&r.jsx("div",{className:"w-3 h-3 bg-primary rounded-full items-center justify-center"})},`dot-${n}`))})})})]})};export{je as default};
