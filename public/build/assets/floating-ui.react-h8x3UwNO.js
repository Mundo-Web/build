import{r as a,a as vt}from"./index-BOnQTV8N.js";import{i as Ft,b as se,o as Ot,f as Nt,s as Lt,c as $t,d as Xe,e as ee,g as Me,h as _t,j as De,k as Bt,l as ht,m as Rt}from"./floating-ui.dom-CID5cQpR.js";import{j as Z}from"./AboutSimple-Cf8x2fCZ.js";import{r as Wt}from"./index-pSueRYGM.js";/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var jt=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],xe=jt.join(","),yt=typeof Element>"u",ve=yt?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Te=!yt&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e==null?void 0:e.ownerDocument},Se=function e(t,n){var r;n===void 0&&(n=!0);var o=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"inert"),s=o===""||o==="true",i=s||n&&t&&e(t.parentNode);return i},Kt=function(t){var n,r=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"contenteditable");return r===""||r==="true"},Et=function(t,n,r){if(Se(t))return[];var o=Array.prototype.slice.apply(t.querySelectorAll(xe));return n&&ve.call(t,xe)&&o.unshift(t),o=o.filter(r),o},wt=function e(t,n,r){for(var o=[],s=Array.from(t);s.length;){var i=s.shift();if(!Se(i,!1))if(i.tagName==="SLOT"){var u=i.assignedElements(),l=u.length?u:i.children,c=e(l,!0,r);r.flatten?o.push.apply(o,c):o.push({scopeParent:i,candidates:c})}else{var v=ve.call(i,xe);v&&r.filter(i)&&(n||!t.includes(i))&&o.push(i);var R=i.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(i),y=!Se(R,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(i));if(R&&y){var d=e(R===!0?i.children:R.children,!0,r);r.flatten?o.push.apply(o,d):o.push({scopeParent:i,candidates:d})}else s.unshift.apply(s,i.children)}}return o},xt=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},Tt=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||Kt(t))&&!xt(t)?0:t.tabIndex},Vt=function(t,n){var r=Tt(t);return r<0&&n&&!xt(t)?0:r},qt=function(t,n){return t.tabIndex===n.tabIndex?t.documentOrder-n.documentOrder:t.tabIndex-n.tabIndex},St=function(t){return t.tagName==="INPUT"},Ht=function(t){return St(t)&&t.type==="hidden"},Ut=function(t){var n=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(r){return r.tagName==="SUMMARY"});return n},Yt=function(t,n){for(var r=0;r<t.length;r++)if(t[r].checked&&t[r].form===n)return t[r]},Gt=function(t){if(!t.name)return!0;var n=t.form||Te(t),r=function(u){return n.querySelectorAll('input[type="radio"][name="'+u+'"]')},o;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")o=r(window.CSS.escape(t.name));else try{o=r(t.name)}catch(i){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",i.message),!1}var s=Yt(o,t.form);return!s||s===t},Xt=function(t){return St(t)&&t.type==="radio"},Zt=function(t){return Xt(t)&&!Gt(t)},zt=function(t){var n,r=t&&Te(t),o=(n=r)===null||n===void 0?void 0:n.host,s=!1;if(r&&r!==t){var i,u,l;for(s=!!((i=o)!==null&&i!==void 0&&(u=i.ownerDocument)!==null&&u!==void 0&&u.contains(o)||t!=null&&(l=t.ownerDocument)!==null&&l!==void 0&&l.contains(t));!s&&o;){var c,v,R;r=Te(o),o=(c=r)===null||c===void 0?void 0:c.host,s=!!((v=o)!==null&&v!==void 0&&(R=v.ownerDocument)!==null&&R!==void 0&&R.contains(o))}}return s},Ze=function(t){var n=t.getBoundingClientRect(),r=n.width,o=n.height;return r===0&&o===0},Jt=function(t,n){var r=n.displayCheck,o=n.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var s=ve.call(t,"details>summary:first-of-type"),i=s?t.parentElement:t;if(ve.call(i,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof o=="function"){for(var u=t;t;){var l=t.parentElement,c=Te(t);if(l&&!l.shadowRoot&&o(l)===!0)return Ze(t);t.assignedSlot?t=t.assignedSlot:!l&&c!==t.ownerDocument?t=c.host:t=l}t=u}if(zt(t))return!t.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return Ze(t);return!1},Qt=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var n=t.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var o=n.children.item(r);if(o.tagName==="LEGEND")return ve.call(n,"fieldset[disabled] *")?!0:!o.contains(t)}return!0}n=n.parentElement}return!1},Be=function(t,n){return!(n.disabled||Se(n)||Ht(n)||Jt(n,t)||Ut(n)||Qt(n))},We=function(t,n){return!(Zt(n)||Tt(n)<0||!Be(t,n))},en=function(t){var n=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},tn=function e(t){var n=[],r=[];return t.forEach(function(o,s){var i=!!o.scopeParent,u=i?o.scopeParent:o,l=Vt(u,i),c=i?e(o.candidates):u;l===0?i?n.push.apply(n,c):n.push(u):r.push({documentOrder:s,tabIndex:l,item:o,isScope:i,content:c})}),r.sort(qt).reduce(function(o,s){return s.isScope?o.push.apply(o,s.content):o.push(s.content),o},[]).concat(n)},Ve=function(t,n){n=n||{};var r;return n.getShadowRoot?r=wt([t],n.includeContainer,{filter:We.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:en}):r=Et(t,n.includeContainer,We.bind(null,n)),tn(r)},nn=function(t,n){n=n||{};var r;return n.getShadowRoot?r=wt([t],n.includeContainer,{filter:Be.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):r=Et(t,n.includeContainer,Be.bind(null,n)),r},Ct=function(t,n){if(n=n||{},!t)throw new Error("No node provided");return ve.call(t,xe)===!1?!1:We(n,t)};function rn(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function It(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function on(){return/apple/i.test(navigator.vendor)}function je(){const e=/android/i;return e.test(rn())||e.test(It())}function sn(){return It().includes("jsdom/")}const ze="data-floating-ui-focusable",an="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function pe(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function U(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&Ft(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function ce(e){return"composedPath"in e?e.composedPath()[0]:e.target}function Fe(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function un(e){return e.matches("html,body")}function J(e){return(e==null?void 0:e.ownerDocument)||document}function kt(e){return se(e)&&e.matches(an)}function Je(e){return e?e.getAttribute("role")==="combobox"&&kt(e):!1}function Ke(e){return e?e.hasAttribute(ze)?e:e.querySelector("["+ze+"]")||e:null}function me(e,t,n){return n===void 0&&(n=!0),e.filter(o=>{var s;return o.parentId===t&&(!n||((s=o.context)==null?void 0:s.open))}).flatMap(o=>[o,...me(e,o.id,n)])}function Qe(e,t){var n;let r=[],o=(n=e.find(s=>s.id===t))==null?void 0:n.parentId;for(;o;){const s=e.find(i=>i.id===o);o=s==null?void 0:s.parentId,s&&(r=r.concat(s))}return r}function Oe(e){e.preventDefault(),e.stopPropagation()}function cn(e){return"nativeEvent"in e}function ln(e){return e.mozInputSource===0&&e.isTrusted?!0:je()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function fn(e){return sn()?!1:!je()&&e.width===0&&e.height===0||je()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function et(e,t){return["mouse","pen"].includes(e)}var dn=typeof document<"u",gn=function(){},ne=dn?a.useLayoutEffect:gn;const pn={...vt};function Ne(e){const t=a.useRef(e);return ne(()=>{t.current=e}),t}const mn=pn.useInsertionEffect,bn=mn||(e=>e());function te(e){const t=a.useRef(()=>{});return bn(()=>{t.current=e}),a.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.current==null?void 0:t.current(...r)},[])}const ke=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function At(e,t){const n=Ve(e,ke()),r=n.length;if(r===0)return;const o=pe(J(e)),s=n.indexOf(o),i=s===-1?t===1?0:r-1:s+t;return n[i]}function vn(e){return At(J(e).body,1)||e}function hn(e){return At(J(e).body,-1)||e}function tt(e,t){const n=t||e.currentTarget,r=e.relatedTarget;return!r||!U(n,r)}var Rn=typeof document<"u",yn=function(){},we=Rn?a.useLayoutEffect:yn;function Ce(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Ce(e[r],t[r]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,o[r]))return!1;for(r=n;r--!==0;){const s=o[r];if(!(s==="_owner"&&e.$$typeof)&&!Ce(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Pt(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function nt(e,t){const n=Pt(e);return Math.round(t*n)/n}function Le(e){const t=a.useRef(e);return we(()=>{t.current=e}),t}function En(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:s,floating:i}={},transform:u=!0,whileElementsMounted:l,open:c}=e,[v,R]=a.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[y,d]=a.useState(r);Ce(y,r)||d(r);const[E,g]=a.useState(null),[S,T]=a.useState(null),p=a.useCallback(f=>{f!==B.current&&(B.current=f,g(f))},[]),h=a.useCallback(f=>{f!==P.current&&(P.current=f,T(f))},[]),k=s||E,N=i||S,B=a.useRef(null),P=a.useRef(null),F=a.useRef(v),Y=l!=null,q=Le(l),$=Le(o),K=Le(c),V=a.useCallback(()=>{if(!B.current||!P.current)return;const f={placement:t,strategy:n,middleware:y};$.current&&(f.platform=$.current),$t(B.current,P.current,f).then(M=>{const O={...M,isPositioned:K.current!==!1};m.current&&!Ce(F.current,O)&&(F.current=O,Wt.flushSync(()=>{R(O)}))})},[y,t,n,$,K]);we(()=>{c===!1&&F.current.isPositioned&&(F.current.isPositioned=!1,R(f=>({...f,isPositioned:!1})))},[c]);const m=a.useRef(!1);we(()=>(m.current=!0,()=>{m.current=!1}),[]),we(()=>{if(k&&(B.current=k),N&&(P.current=N),k&&N){if(q.current)return q.current(k,N,V);V()}},[k,N,V,q,Y]);const b=a.useMemo(()=>({reference:B,floating:P,setReference:p,setFloating:h}),[p,h]),D=a.useMemo(()=>({reference:k,floating:N}),[k,N]),L=a.useMemo(()=>{const f={position:n,left:0,top:0};if(!D.floating)return f;const M=nt(D.floating,v.x),O=nt(D.floating,v.y);return u?{...f,transform:"translate("+M+"px, "+O+"px)",...Pt(D.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:M,top:O}},[n,u,D.floating,v.x,v.y]);return a.useMemo(()=>({...v,update:V,refs:b,elements:D,floatingStyles:L}),[v,V,b,D,L])}const wn=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:o}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Xe({element:r.current,padding:o}).fn(n):{}:r?Xe({element:r,padding:o}).fn(n):{}}}},zn=(e,t)=>({...Ot(e),options:[e,t]}),Jn=(e,t)=>({...Lt(e),options:[e,t]}),Qn=(e,t)=>({...Nt(e),options:[e,t]}),er=(e,t)=>({...wn(e),options:[e,t]}),xn="data-floating-ui-focusable",rt="active",ot="selected",Tn={...vt};let st=!1,Sn=0;const it=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Sn++;function Cn(){const[e,t]=a.useState(()=>st?it():void 0);return ne(()=>{e==null&&t(it())},[]),a.useEffect(()=>{st=!0},[]),e}const In=Tn.useId,qe=In||Cn,tr=a.forwardRef(function(t,n){const{context:{placement:r,elements:{floating:o},middlewareData:{arrow:s,shift:i}},width:u=14,height:l=7,tipRadius:c=0,strokeWidth:v=0,staticOffset:R,stroke:y,d,style:{transform:E,...g}={},...S}=t,T=qe(),[p,h]=a.useState(!1);if(ne(()=>{if(!o)return;ht(o).direction==="rtl"&&h(!0)},[o]),!o)return null;const[k,N]=r.split("-"),B=k==="top"||k==="bottom";let P=R;(B&&i!=null&&i.x||!B&&i!=null&&i.y)&&(P=null);const F=v*2,Y=F/2,q=u/2*(c/-8+1),$=l/2*c/4,K=!!d,V=P&&N==="end"?"bottom":"top";let m=P&&N==="end"?"right":"left";P&&p&&(m=N==="end"?"left":"right");const b=(s==null?void 0:s.x)!=null?P||s.x:"",D=(s==null?void 0:s.y)!=null?P||s.y:"",L=d||"M0,0"+(" H"+u)+(" L"+(u-q)+","+(l-$))+(" Q"+u/2+","+l+" "+q+","+(l-$))+" Z",f={top:K?"rotate(180deg)":"",left:K?"rotate(90deg)":"rotate(-90deg)",bottom:K?"":"rotate(180deg)",right:K?"rotate(-90deg)":"rotate(90deg)"}[k];return Z.jsxs("svg",{...S,"aria-hidden":!0,ref:n,width:K?u:u+F,height:u,viewBox:"0 0 "+u+" "+(l>u?l:u),style:{position:"absolute",pointerEvents:"none",[m]:b,[V]:D,[k]:B||K?"100%":"calc(100% - "+F/2+"px)",transform:[f,E].filter(M=>!!M).join(" "),...g},children:[F>0&&Z.jsx("path",{clipPath:"url(#"+T+")",fill:"none",stroke:y,strokeWidth:F+(d?0:1),d:L}),Z.jsx("path",{stroke:F&&!d?S.fill:"none",d:L}),Z.jsx("clipPath",{id:T,children:Z.jsx("rect",{x:-Y,y:Y*(K?-1:1),width:u+F,height:u})})]})});function kn(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(o=>o(n))},on(t,n){e.has(t)||e.set(t,new Set),e.get(t).add(n)},off(t,n){var r;(r=e.get(t))==null||r.delete(n)}}}const An=a.createContext(null),Pn=a.createContext(null),Mt=()=>{var e;return((e=a.useContext(An))==null?void 0:e.id)||null},He=()=>a.useContext(Pn);function Ie(e){return"data-floating-ui-"+e}function Mn(e){e.current!==-1&&(clearTimeout(e.current),e.current=-1)}let at=0;function ge(e,t){t===void 0&&(t={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:o=!1}=t;r&&cancelAnimationFrame(at);const s=()=>e==null?void 0:e.focus({preventScroll:n});o?s():at=requestAnimationFrame(s)}function Dn(e){return(e==null?void 0:e.ownerDocument)||document}const be={inert:new WeakMap,"aria-hidden":new WeakMap,none:new WeakMap};function ut(e){return e==="inert"?be.inert:e==="aria-hidden"?be["aria-hidden"]:be.none}let ye=new WeakSet,Ee={},$e=0;const Fn=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,Dt=e=>e&&(e.host||Dt(e.parentNode)),On=(e,t)=>t.map(n=>{if(e.contains(n))return n;const r=Dt(n);return e.contains(r)?r:null}).filter(n=>n!=null);function Nn(e,t,n,r){const o="data-floating-ui-inert",s=r?"inert":n?"aria-hidden":null,i=On(t,e),u=new Set,l=new Set(i),c=[];Ee[o]||(Ee[o]=new WeakMap);const v=Ee[o];i.forEach(R),y(t),u.clear();function R(d){!d||u.has(d)||(u.add(d),d.parentNode&&R(d.parentNode))}function y(d){!d||l.has(d)||[].forEach.call(d.children,E=>{if(Rt(E)!=="script")if(u.has(E))y(E);else{const g=s?E.getAttribute(s):null,S=g!==null&&g!=="false",T=ut(s),p=(T.get(E)||0)+1,h=(v.get(E)||0)+1;T.set(E,p),v.set(E,h),c.push(E),p===1&&S&&ye.add(E),h===1&&E.setAttribute(o,""),!S&&s&&E.setAttribute(s,s==="inert"?"":"true")}})}return $e++,()=>{c.forEach(d=>{const E=ut(s),S=(E.get(d)||0)-1,T=(v.get(d)||0)-1;E.set(d,S),v.set(d,T),S||(!ye.has(d)&&s&&d.removeAttribute(s),ye.delete(d)),T||d.removeAttribute(o)}),$e--,$e||(be.inert=new WeakMap,be["aria-hidden"]=new WeakMap,be.none=new WeakMap,ye=new WeakSet,Ee={})}}function ct(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);const r=Dn(e[0]).body;return Nn(e.concat(Array.from(r.querySelectorAll('[aria-live],[role="status"],output'))),r,t,n)}const Ue={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0},lt=a.forwardRef(function(t,n){const[r,o]=a.useState();ne(()=>{on()&&o("button")},[]);const s={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[Ie("focus-guard")]:"",style:Ue};return Z.jsx("span",{...t,...s})}),Ln=a.createContext(null),$n=()=>a.useContext(Ln);function ft(e){return a.useMemo(()=>t=>{e.forEach(n=>{n&&(n.current=t)})},e)}const _n=20;let le=[];function Ye(){le=le.filter(e=>e.isConnected)}function Bn(e){Ye(),e&&Rt(e)!=="body"&&(le.push(e),le.length>_n&&(le=le.slice(-20)))}function dt(){return Ye(),le[le.length-1]}function Wn(e){const t=ke();return Ct(e,t)?e:Ve(e,t)[0]||e}function gt(e,t){var n;if(!t.current.includes("floating")&&!((n=e.getAttribute("role"))!=null&&n.includes("dialog")))return;const r=ke(),s=nn(e,r).filter(u=>{const l=u.getAttribute("data-tabindex")||"";return Ct(u,r)||u.hasAttribute("data-tabindex")&&!l.startsWith("-")}),i=e.getAttribute("tabindex");t.current.includes("floating")||s.length===0?i!=="0"&&e.setAttribute("tabindex","0"):(i!=="-1"||e.hasAttribute("data-tabindex")&&e.getAttribute("data-tabindex")!=="-1")&&(e.setAttribute("tabindex","-1"),e.setAttribute("data-tabindex","-1"))}const jn=a.forwardRef(function(t,n){return Z.jsx("button",{...t,type:"button",ref:n,tabIndex:-1,style:Ue})});function nr(e){const{context:t,children:n,disabled:r=!1,order:o=["content"],guards:s=!0,initialFocus:i=0,returnFocus:u=!0,restoreFocus:l=!1,modal:c=!0,visuallyHiddenDismiss:v=!1,closeOnFocusOut:R=!0,outsideElementsInert:y=!1,getInsideElements:d=()=>[]}=e,{open:E,onOpenChange:g,events:S,dataRef:T,elements:{domReference:p,floating:h}}=t,k=te(()=>{var w;return(w=T.current.floatingContext)==null?void 0:w.nodeId}),N=te(d),B=typeof i=="number"&&i<0,P=Je(p)&&B,F=Fn(),Y=F?s:!0,q=!Y||F&&y,$=Ne(o),K=Ne(i),V=Ne(u),m=He(),b=$n(),D=a.useRef(null),L=a.useRef(null),f=a.useRef(!1),M=a.useRef(!1),O=a.useRef(-1),z=a.useRef(-1),de=b!=null,C=Ke(h),Q=te(function(w){return w===void 0&&(w=C),w?Ve(w,ke()):[]}),W=te(w=>{const I=Q(w);return $.current.map(x=>p&&x==="reference"?p:C&&x==="floating"?C:I).filter(Boolean).flat()});a.useEffect(()=>{if(r||!c)return;function w(x){if(x.key==="Tab"){U(C,pe(J(C)))&&Q().length===0&&!P&&Oe(x);const _=W(),j=ce(x);$.current[0]==="reference"&&j===p&&(Oe(x),x.shiftKey?ge(_[_.length-1]):ge(_[1])),$.current[1]==="floating"&&j===C&&x.shiftKey&&(Oe(x),ge(_[0]))}}const I=J(C);return I.addEventListener("keydown",w),()=>{I.removeEventListener("keydown",w)}},[r,p,C,c,$,P,Q,W]),a.useEffect(()=>{if(r||!h)return;function w(I){const x=ce(I),j=Q().indexOf(x);j!==-1&&(O.current=j)}return h.addEventListener("focusin",w),()=>{h.removeEventListener("focusin",w)}},[r,h,Q]),a.useEffect(()=>{if(r||!R)return;function w(){M.current=!0,setTimeout(()=>{M.current=!1})}function I(j){const A=j.relatedTarget,re=j.currentTarget,X=ce(j);queueMicrotask(()=>{const H=k(),fe=!(U(p,A)||U(h,A)||U(A,h)||U(b==null?void 0:b.portalNode,A)||A!=null&&A.hasAttribute(Ie("focus-guard"))||m&&(me(m.nodesRef.current,H).find(ae=>{var oe,ue;return U((oe=ae.context)==null?void 0:oe.elements.floating,A)||U((ue=ae.context)==null?void 0:ue.elements.domReference,A)})||Qe(m.nodesRef.current,H).find(ae=>{var oe,ue,Ge;return[(oe=ae.context)==null?void 0:oe.elements.floating,Ke((ue=ae.context)==null?void 0:ue.elements.floating)].includes(A)||((Ge=ae.context)==null?void 0:Ge.elements.domReference)===A})));if(re===p&&C&&gt(C,$),l&&re!==p&&!(X!=null&&X.isConnected)&&pe(J(C))===J(C).body){se(C)&&C.focus();const ae=O.current,oe=Q(),ue=oe[ae]||oe[oe.length-1]||C;se(ue)&&ue.focus()}if(T.current.insideReactTree){T.current.insideReactTree=!1;return}(P||!c)&&A&&fe&&!M.current&&A!==dt()&&(f.current=!0,g(!1,j,"focus-out"))})}const x=!!(!m&&b);function _(){Mn(z),T.current.insideReactTree=!0,z.current=window.setTimeout(()=>{T.current.insideReactTree=!1})}if(h&&se(p))return p.addEventListener("focusout",I),p.addEventListener("pointerdown",w),h.addEventListener("focusout",I),x&&h.addEventListener("focusout",_,!0),()=>{p.removeEventListener("focusout",I),p.removeEventListener("pointerdown",w),h.removeEventListener("focusout",I),x&&h.removeEventListener("focusout",_,!0)}},[r,p,h,C,c,m,b,g,R,l,Q,P,k,$,T]);const G=a.useRef(null),ie=a.useRef(null),Ae=ft([G,b==null?void 0:b.beforeInsideRef]),Pe=ft([ie,b==null?void 0:b.afterInsideRef]);a.useEffect(()=>{var w,I;if(r||!h)return;const x=Array.from((b==null||(w=b.portalNode)==null?void 0:w.querySelectorAll("["+Ie("portal")+"]"))||[]),j=(I=(m?Qe(m.nodesRef.current,k()):[]).find(X=>{var H;return Je(((H=X.context)==null?void 0:H.elements.domReference)||null)}))==null||(I=I.context)==null?void 0:I.elements.domReference,A=[h,j,...x,...N(),D.current,L.current,G.current,ie.current,b==null?void 0:b.beforeOutsideRef.current,b==null?void 0:b.afterOutsideRef.current,$.current.includes("reference")||P?p:null].filter(X=>X!=null),re=c||P?ct(A,!q,q):ct(A);return()=>{re()}},[r,p,h,c,$,b,P,Y,q,m,k,N]),ne(()=>{if(r||!se(C))return;const w=J(C),I=pe(w);queueMicrotask(()=>{const x=W(C),_=K.current,j=(typeof _=="number"?x[_]:_.current)||C,A=U(C,I);!B&&!A&&E&&ge(j,{preventScroll:j===C})})},[r,E,C,B,W,K]),ne(()=>{if(r||!C)return;const w=J(C),I=pe(w);Bn(I);function x(A){let{reason:re,event:X,nested:H}=A;if(["hover","safe-polygon"].includes(re)&&X.type==="mouseleave"&&(f.current=!0),re==="outside-press")if(H)f.current=!1;else if(ln(X)||fn(X))f.current=!1;else{let fe=!1;document.createElement("div").focus({get preventScroll(){return fe=!0,!1}}),fe?f.current=!1:f.current=!0}}S.on("openchange",x);const _=w.createElement("span");_.setAttribute("tabindex","-1"),_.setAttribute("aria-hidden","true"),Object.assign(_.style,Ue),de&&p&&p.insertAdjacentElement("afterend",_);function j(){if(typeof V.current=="boolean"){const A=p||dt();return A&&A.isConnected?A:_}return V.current.current||_}return()=>{S.off("openchange",x);const A=pe(w),re=U(h,A)||m&&me(m.nodesRef.current,k(),!1).some(H=>{var fe;return U((fe=H.context)==null?void 0:fe.elements.floating,A)}),X=j();queueMicrotask(()=>{const H=Wn(X);V.current&&!f.current&&se(H)&&(!(H!==A&&A!==w.body)||re)&&H.focus({preventScroll:!0}),_.remove()})}},[r,h,C,V,T,S,m,de,p,k]),a.useEffect(()=>(queueMicrotask(()=>{f.current=!1}),()=>{queueMicrotask(Ye)}),[r]),ne(()=>{if(!r&&b)return b.setFocusManagerState({modal:c,closeOnFocusOut:R,open:E,onOpenChange:g,domReference:p}),()=>{b.setFocusManagerState(null)}},[r,b,c,E,g,R,p]),ne(()=>{r||C&&gt(C,$)},[r,C,$]);function he(w){return r||!v||!c?null:Z.jsx(jn,{ref:w==="start"?D:L,onClick:I=>g(!1,I.nativeEvent),children:typeof v=="string"?v:"Dismiss"})}const Re=!r&&Y&&(c?!P:!0)&&(de||c);return Z.jsxs(Z.Fragment,{children:[Re&&Z.jsx(lt,{"data-type":"inside",ref:Ae,onFocus:w=>{if(c){const x=W();ge(o[0]==="reference"?x[0]:x[x.length-1])}else if(b!=null&&b.preserveTabOrder&&b.portalNode)if(f.current=!1,tt(w,b.portalNode)){const x=vn(p);x==null||x.focus()}else{var I;(I=b.beforeOutsideRef.current)==null||I.focus()}}}),!P&&he("start"),n,he("end"),Re&&Z.jsx(lt,{"data-type":"inside",ref:Pe,onFocus:w=>{if(c)ge(W()[0]);else if(b!=null&&b.preserveTabOrder&&b.portalNode)if(R&&(f.current=!0),tt(w,b.portalNode)){const x=hn(p);x==null||x.focus()}else{var I;(I=b.afterOutsideRef.current)==null||I.focus()}}})]})}function pt(e){return se(e.target)&&e.target.tagName==="BUTTON"}function Kn(e){return se(e.target)&&e.target.tagName==="A"}function mt(e){return kt(e)}function rr(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:o,elements:{domReference:s}}=e,{enabled:i=!0,event:u="click",toggle:l=!0,ignoreMouse:c=!1,keyboardHandlers:v=!0,stickIfOpen:R=!0}=t,y=a.useRef(),d=a.useRef(!1),E=a.useMemo(()=>({onPointerDown(g){y.current=g.pointerType},onMouseDown(g){const S=y.current;g.button===0&&u!=="click"&&(et(S)&&c||(n&&l&&(!(o.current.openEvent&&R)||o.current.openEvent.type==="mousedown")?r(!1,g.nativeEvent,"click"):(g.preventDefault(),r(!0,g.nativeEvent,"click"))))},onClick(g){const S=y.current;if(u==="mousedown"&&y.current){y.current=void 0;return}et(S)&&c||(n&&l&&(!(o.current.openEvent&&R)||o.current.openEvent.type==="click")?r(!1,g.nativeEvent,"click"):r(!0,g.nativeEvent,"click"))},onKeyDown(g){y.current=void 0,!(g.defaultPrevented||!v||pt(g))&&(g.key===" "&&!mt(s)&&(g.preventDefault(),d.current=!0),!Kn(g)&&g.key==="Enter"&&r(!(n&&l),g.nativeEvent,"click"))},onKeyUp(g){g.defaultPrevented||!v||pt(g)||mt(s)||g.key===" "&&d.current&&(d.current=!1,r(!(n&&l),g.nativeEvent,"click"))}}),[o,s,u,c,v,r,n,R,l]);return a.useMemo(()=>i?{reference:E}:{},[i,E])}const Vn={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},qn={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},bt=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function or(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:o,dataRef:s}=e,{enabled:i=!0,escapeKey:u=!0,outsidePress:l=!0,outsidePressEvent:c="pointerdown",referencePress:v=!1,referencePressEvent:R="pointerdown",ancestorScroll:y=!1,bubbles:d,capture:E}=t,g=He(),S=te(typeof l=="function"?l:()=>!1),T=typeof l=="function"?S:l,p=a.useRef(!1),{escapeKey:h,outsidePress:k}=bt(d),{escapeKey:N,outsidePress:B}=bt(E),P=a.useRef(!1),F=te(m=>{var b;if(!n||!i||!u||m.key!=="Escape"||P.current)return;const D=(b=s.current.floatingContext)==null?void 0:b.nodeId,L=g?me(g.nodesRef.current,D):[];if(!h&&(m.stopPropagation(),L.length>0)){let f=!0;if(L.forEach(M=>{var O;if((O=M.context)!=null&&O.open&&!M.context.dataRef.current.__escapeKeyBubbles){f=!1;return}}),!f)return}r(!1,cn(m)?m.nativeEvent:m,"escape-key")}),Y=te(m=>{var b;const D=()=>{var L;F(m),(L=ce(m))==null||L.removeEventListener("keydown",D)};(b=ce(m))==null||b.addEventListener("keydown",D)}),q=te(m=>{var b;const D=s.current.insideReactTree;s.current.insideReactTree=!1;const L=p.current;if(p.current=!1,c==="click"&&L||D||typeof T=="function"&&!T(m))return;const f=ce(m),M="["+Ie("inert")+"]",O=J(o.floating).querySelectorAll(M);let z=ee(f)?f:null;for(;z&&!De(z);){const W=Bt(z);if(De(W)||!ee(W))break;z=W}if(O.length&&ee(f)&&!un(f)&&!U(f,o.floating)&&Array.from(O).every(W=>!U(z,W)))return;if(se(f)&&V){const W=De(f),G=ht(f),ie=/auto|scroll/,Ae=W||ie.test(G.overflowX),Pe=W||ie.test(G.overflowY),he=Ae&&f.clientWidth>0&&f.scrollWidth>f.clientWidth,Re=Pe&&f.clientHeight>0&&f.scrollHeight>f.clientHeight,w=G.direction==="rtl",I=Re&&(w?m.offsetX<=f.offsetWidth-f.clientWidth:m.offsetX>f.clientWidth),x=he&&m.offsetY>f.clientHeight;if(I||x)return}const de=(b=s.current.floatingContext)==null?void 0:b.nodeId,C=g&&me(g.nodesRef.current,de).some(W=>{var G;return Fe(m,(G=W.context)==null?void 0:G.elements.floating)});if(Fe(m,o.floating)||Fe(m,o.domReference)||C)return;const Q=g?me(g.nodesRef.current,de):[];if(Q.length>0){let W=!0;if(Q.forEach(G=>{var ie;if((ie=G.context)!=null&&ie.open&&!G.context.dataRef.current.__outsidePressBubbles){W=!1;return}}),!W)return}r(!1,m,"outside-press")}),$=te(m=>{var b;const D=()=>{var L;q(m),(L=ce(m))==null||L.removeEventListener(c,D)};(b=ce(m))==null||b.addEventListener(c,D)});a.useEffect(()=>{if(!n||!i)return;s.current.__escapeKeyBubbles=h,s.current.__outsidePressBubbles=k;let m=-1;function b(O){r(!1,O,"ancestor-scroll")}function D(){window.clearTimeout(m),P.current=!0}function L(){m=window.setTimeout(()=>{P.current=!1},_t()?5:0)}const f=J(o.floating);u&&(f.addEventListener("keydown",N?Y:F,N),f.addEventListener("compositionstart",D),f.addEventListener("compositionend",L)),T&&f.addEventListener(c,B?$:q,B);let M=[];return y&&(ee(o.domReference)&&(M=Me(o.domReference)),ee(o.floating)&&(M=M.concat(Me(o.floating))),!ee(o.reference)&&o.reference&&o.reference.contextElement&&(M=M.concat(Me(o.reference.contextElement)))),M=M.filter(O=>{var z;return O!==((z=f.defaultView)==null?void 0:z.visualViewport)}),M.forEach(O=>{O.addEventListener("scroll",b,{passive:!0})}),()=>{u&&(f.removeEventListener("keydown",N?Y:F,N),f.removeEventListener("compositionstart",D),f.removeEventListener("compositionend",L)),T&&f.removeEventListener(c,B?$:q,B),M.forEach(O=>{O.removeEventListener("scroll",b)}),window.clearTimeout(m)}},[s,o,u,T,c,n,r,y,i,h,k,F,N,Y,q,B,$]),a.useEffect(()=>{s.current.insideReactTree=!1},[s,T,c]);const K=a.useMemo(()=>({onKeyDown:F,...v&&{[Vn[R]]:m=>{r(!1,m.nativeEvent,"reference-press")},...R!=="click"&&{onClick(m){r(!1,m.nativeEvent,"reference-press")}}}}),[F,r,v,R]),V=a.useMemo(()=>({onKeyDown:F,onMouseDown(){p.current=!0},onMouseUp(){p.current=!0},[qn[c]]:()=>{s.current.insideReactTree=!0}}),[F,c,s]);return a.useMemo(()=>i?{reference:K,floating:V}:{},[i,K,V])}function Hn(e){const{open:t=!1,onOpenChange:n,elements:r}=e,o=qe(),s=a.useRef({}),[i]=a.useState(()=>kn()),u=Mt()!=null,[l,c]=a.useState(r.reference),v=te((d,E,g)=>{s.current.openEvent=d?E:void 0,i.emit("openchange",{open:d,event:E,reason:g,nested:u}),n==null||n(d,E,g)}),R=a.useMemo(()=>({setPositionReference:c}),[]),y=a.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return a.useMemo(()=>({dataRef:s,open:t,onOpenChange:v,elements:y,events:i,floatingId:o,refs:R}),[t,v,y,i,o,R])}function sr(e){e===void 0&&(e={});const{nodeId:t}=e,n=Hn({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,o=r.elements,[s,i]=a.useState(null),[u,l]=a.useState(null),v=(o==null?void 0:o.domReference)||s,R=a.useRef(null),y=He();ne(()=>{v&&(R.current=v)},[v]);const d=En({...e,elements:{...o,...u&&{reference:u}}}),E=a.useCallback(h=>{const k=ee(h)?{getBoundingClientRect:()=>h.getBoundingClientRect(),getClientRects:()=>h.getClientRects(),contextElement:h}:h;l(k),d.refs.setReference(k)},[d.refs]),g=a.useCallback(h=>{(ee(h)||h===null)&&(R.current=h,i(h)),(ee(d.refs.reference.current)||d.refs.reference.current===null||h!==null&&!ee(h))&&d.refs.setReference(h)},[d.refs]),S=a.useMemo(()=>({...d.refs,setReference:g,setPositionReference:E,domReference:R}),[d.refs,g,E]),T=a.useMemo(()=>({...d.elements,domReference:v}),[d.elements,v]),p=a.useMemo(()=>({...d,...r,refs:S,elements:T,nodeId:t}),[d,S,T,t,r]);return ne(()=>{r.dataRef.current.floatingContext=p;const h=y==null?void 0:y.nodesRef.current.find(k=>k.id===t);h&&(h.context=p)}),a.useMemo(()=>({...d,context:p,refs:S,elements:T}),[d,S,T,p])}function _e(e,t,n){const r=new Map,o=n==="item";let s=e;if(o&&e){const{[rt]:i,[ot]:u,...l}=e;s=l}return{...n==="floating"&&{tabIndex:-1,[xn]:""},...s,...t.map(i=>{const u=i?i[n]:null;return typeof u=="function"?e?u(e):null:u}).concat(e).reduce((i,u)=>(u&&Object.entries(u).forEach(l=>{let[c,v]=l;if(!(o&&[rt,ot].includes(c)))if(c.indexOf("on")===0){if(r.has(c)||r.set(c,[]),typeof v=="function"){var R;(R=r.get(c))==null||R.push(v),i[c]=function(){for(var y,d=arguments.length,E=new Array(d),g=0;g<d;g++)E[g]=arguments[g];return(y=r.get(c))==null?void 0:y.map(S=>S(...E)).find(S=>S!==void 0)}}}else i[c]=v}),i),{})}}function ir(e){e===void 0&&(e=[]);const t=e.map(u=>u==null?void 0:u.reference),n=e.map(u=>u==null?void 0:u.floating),r=e.map(u=>u==null?void 0:u.item),o=a.useCallback(u=>_e(u,e,"reference"),t),s=a.useCallback(u=>_e(u,e,"floating"),n),i=a.useCallback(u=>_e(u,e,"item"),r);return a.useMemo(()=>({getReferenceProps:o,getFloatingProps:s,getItemProps:i}),[o,s,i])}const Un=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function ar(e,t){var n,r;t===void 0&&(t={});const{open:o,elements:s,floatingId:i}=e,{enabled:u=!0,role:l="dialog"}=t,c=qe(),v=((n=s.domReference)==null?void 0:n.id)||c,R=a.useMemo(()=>{var p;return((p=Ke(s.floating))==null?void 0:p.id)||i},[s.floating,i]),y=(r=Un.get(l))!=null?r:l,E=Mt()!=null,g=a.useMemo(()=>y==="tooltip"||l==="label"?{["aria-"+(l==="label"?"labelledby":"describedby")]:o?R:void 0}:{"aria-expanded":o?"true":"false","aria-haspopup":y==="alertdialog"?"dialog":y,"aria-controls":o?R:void 0,...y==="listbox"&&{role:"combobox"},...y==="menu"&&{id:v},...y==="menu"&&E&&{role:"menuitem"},...l==="select"&&{"aria-autocomplete":"none"},...l==="combobox"&&{"aria-autocomplete":"list"}},[y,R,E,o,v,l]),S=a.useMemo(()=>{const p={id:R,...y&&{role:y}};return y==="tooltip"||l==="label"?p:{...p,...y==="menu"&&{"aria-labelledby":v}}},[y,R,v,l]),T=a.useCallback(p=>{let{active:h,selected:k}=p;const N={role:"option",...h&&{id:R+"-fui-option"}};switch(l){case"select":case"combobox":return{...N,"aria-selected":k}}return{}},[R,l]);return a.useMemo(()=>u?{reference:g,floating:S,item:T}:{},[u,g,S,T])}export{nr as F,rr as a,or as b,ar as c,ir as d,er as e,Qn as f,tr as g,zn as o,Jn as s,sr as u};
