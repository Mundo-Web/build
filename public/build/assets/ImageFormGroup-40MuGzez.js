import{j as s}from"./AboutSimple-Cf8x2fCZ.js";import{r as c}from"./index-BOnQTV8N.js";const N=({id:a,col:g,label:x,eRef:r,required:d=!1,onChange:u=()=>{},aspect:b="21/9",hidden:f=!1,name:m})=>{a||(a=`ck-${crypto.randomUUID()}`),r||(r=c.useRef()),m||(m=a);const l=c.useRef(),[h,n]=c.useState(!1),[p,i]=c.useState(!1),j=async e=>{const t=e.target.files[0];if(t){const o=await File.toURL(t);l.current.src=o,n(!0),i(!1)}u(e)},F=()=>{l.current.src="/api/cover/thumbnail/null",r.current.value="",n(!1),i(!0),u({target:{files:[]}})},I=()=>p,v=()=>i(!1);return c.useEffect(()=>{r.image=l.current,r.getDeleteFlag=I,r.resetDeleteFlag=v,(()=>{var o;const t=(o=l.current)==null?void 0:o.src;n(t&&t!=="/api/cover/thumbnail/null"&&!t.includes("null"))})()},[p]),s.jsxs("div",{className:`form-group ${g} mb-2`,hidden:f,children:[s.jsxs("label",{htmlFor:a,className:"form-label",children:[x," ",d&&s.jsx("b",{className:"text-danger",children:"*"})]}),s.jsxs("div",{style:{position:"relative",width:"100%"},children:[s.jsx("label",{htmlFor:a,style:{width:"100%"},children:s.jsx("img",{ref:l,className:"d-block border",src:"",onError:e=>e.target.src="/api/cover/thumbnail/null",onLoad:()=>{var t;const e=(t=l.current)==null?void 0:t.src;n(e&&e!=="/api/cover/thumbnail/null"&&!e.includes("null"))},style:{width:"100%",borderRadius:"4px",cursor:"pointer",aspectRatio:b,objectFit:"cover",objectPosition:"center",boxShadow:"2.5px 2.5px 5px rgba(0,0,0,.125)"}})}),h&&s.jsx("button",{type:"button",onClick:F,className:"btn btn-danger btn-sm",style:{position:"absolute",top:"8px",right:"8px",padding:"4px 8px",fontSize:"12px",borderRadius:"4px",zIndex:10},title:"Eliminar imagen",children:s.jsx("i",{className:"fa fa-trash"})})]}),s.jsx("input",{ref:r,id:a,type:"file",src:"",alt:"",hidden:!0,accept:"image/*",onChange:j})]})};export{N as I};
