import{r as e,j as a,i as t,bU as s,a9 as r}from"./vendor-react-CtPXetfm.js";import{I as l}from"./ItemsRest-ChbvlPS2.js";import{S as i}from"./CartKuchara-Bi-J8T1O.js";import"./vendor-swiper-Cr_RrIb_.js";import"./ProductDetailB-YKQDJdz1.js";import"./OpenPayCardModal-CbSnHq7o.js";import{C as n}from"./Number2Currency-BX4epFEo.js";import{C as c}from"./CartModal-CVzP9hNx.js";import"./TippyButton-Dqi9Vaf_.js";import o from"./ProductBananaLab-9j86eSoS.js";import{m as d}from"./vendor-motion-CThzL09Q.js";import"./BasicRest-DtgqEuc9.js";import"./BooleanLimit-q2Ad9fGY.js";import"./Footer-coriRrmf.js";import"./General-ClVW7qxN.js";import"./CartItemRow-DGY_lV8-.js";import"./CardProductBananaLab-Dbr8B0s-.js";import"./CartModalBananaLab-DOCeko3G.js";import"./TextWithHighlight-Dz4C6geJ.js";function m({item:m,data:x,setCart:p,cart:u}){const h=new l,[g,j]=e.useState(!1),[f,v]=e.useState({url:m?.image,type:"main"}),[b,y]=e.useState(1),[N,w]=e.useState(!1),[k,C]=e.useState([]),[H,T]=e.useState([]),[F,S]=e.useState([]);u?.find(e=>e.id==m?.id),e.useEffect(()=>{m?.id&&(M(m),I(m),E(m),P(m))},[m]);const _={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{duration:.5}}},B={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},E=async e=>{try{const a={id:e?.id};if(!(await h.updateViews(a)))return}catch(a){return}},I=async e=>{try{const a={id:e?.id},t=await h.verifyCombo(a);if(!t)return;const s=t[0].associated_items;C(Object.values(s))}catch(a){return}},M=async e=>{try{const a={id:e?.id},t=await h.productsRelations(a);if(!t)return;const s=t;T(Object.values(s))}catch(a){return}},P=async e=>{try{const a={slug:e?.slug},t=await h.getVariations(a);if(!t)return;S(t.variants)}catch(a){return}};k.reduce((e,a)=>e+parseFloat(a.final_price),0);return a.jsxs(d.div,{id:x?.element_id||null,initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{duration:.5}}},className:"px-primary mx-auto py-4 md:py-6 xl:py-8 bg-white font-paragraph",children:[a.jsx(d.div,{variants:_,className:"bg-white rounded-xl p-4 md:p-8",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 xl:gap-20 2xl:gap-32",children:[a.jsx("div",{className:"space-y-6",children:a.jsxs(d.div,{variants:B,className:"flex flex-col gap-6",children:[a.jsx(d.div,{variants:_,className:"flex-1",children:a.jsx(d.img,{src:(f.type,`/storage/images/item/${f.url}`),onError:e=>e.target.src="/api/cover/thumbnail/null",alt:"Product main",className:"w-full h-auto object-contain",whileHover:{scale:1.02},transition:{type:"spring",stiffness:400,damping:10}})}),a.jsxs(d.div,{variants:_,className:"flex flex-row gap-2",children:[a.jsx(d.button,{onClick:()=>v({url:m?.image,type:"main"}),whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-16 h-16 rounded-lg p-1 border-2 "+(f.url===m?.image?"border-primary ":"border-gray-200"),children:a.jsx("img",{src:`/storage/images/item/${m?.image}`,alt:"Main Thumbnail",className:"w-full h-full object-cover",onError:e=>e.target.src="/api/cover/thumbnail/null"})}),m?.images.map((e,t)=>a.jsx(d.button,{onClick:()=>v({url:e.url,type:"gallery"}),whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-16 h-16 border-2 rounded-lg p-1 "+(f.url===e.url?"border-primary":"border-gray-200"),children:a.jsx("img",{src:`/storage/images/item/${e.url}`||"/api/cover/thumbnail/null",alt:`Thumbnail ${t+1}`,className:"w-full h-full object-cover",onError:e=>e.target.src="/api/cover/thumbnail/null"})},t))]})]})}),a.jsxs(d.div,{variants:B,className:"flex flex-col gap-2",children:[a.jsxs(d.div,{variants:_,className:"font-paragraph",children:[m?.brand&&a.jsxs("p",{className:"customtext-neutral-light text-sm 2xl:text-lg",children:["Marca:"," ",a.jsx("span",{className:"customtext-neutral-dark",children:m?.brand.name})]}),a.jsx(d.h1,{className:"customtext-neutral-dark text-3xl lg:text-4xl 2xl:text-5xl font-bold mt-2",whileHover:{x:5},children:m?.name})]}),a.jsxs(d.div,{variants:_,className:"flex flex-wrap customtext-neutral-light items-center gap-y-2 gap-x-8 text-sm font-paragraph",children:[a.jsxs("span",{className:"customtext-neutral-light text-sm 2xl:text-base",children:["SKU:"," ",a.jsx("span",{className:"customtext-neutral-dark font-bold",children:m?.sku})]}),a.jsxs("span",{className:"customtext-neutral-light text-sm 2xl:text-base",children:["Disponibilidad:"," ",a.jsx("span",{className:"customtext-neutral-dark font-bold",children:m?.stock>0?"En stock":"Agotado"})]})]}),a.jsxs(d.div,{variants:_,className:"flex flex-col w-full xl:w-1/2 !font-paragraph max-w-xl mt-5",children:[a.jsxs("p",{className:"text-sm 2xl:text-base customtext-neutral-light",children:["Precio:"," ",a.jsxs("span",{className:"line-through",children:[n()," ",m?.price]})]}),a.jsxs("div",{className:"flex flex-row items-center gap-4 relative",children:[a.jsxs(d.span,{className:"text-[40px] font-bold customtext-neutral-dark",whileHover:{scale:1.05},children:[n()," ",m?.final_price]}),a.jsxs(d.span,{className:"bg-[#F93232] text-white font-bold px-3 py-2 rounded-xl text-base",whileHover:{scale:1.1},whileTap:{scale:.9},children:["-",Number(m?.discount_percent).toFixed(1),"%"]})]})]}),a.jsxs(d.div,{variants:_,className:"variants-selector flex flex-col gap-3",children:[a.jsx("h3",{className:"w-full block opacity-85 customtext-neutral-dark text-sm 2xl:text-base",children:"Colores"}),a.jsxs("div",{className:"flex gap-3 items-center justify-start w-full flex-wrap",children:[a.jsx(t,{content:m.color,children:a.jsx(d.a,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"variant-option rounded-full object-fit-cover "+(F.some(e=>e.slug===m.slug)?"":"active p-[2px] border-[1.5px] border-neutral-dark"),children:a.jsx("img",{className:"color-box rounded-full h-9 w-9 object-fit-cover",src:`/storage/images/item/${m.texture}`,onError:e=>e.target.src="/api/cover/thumbnail/null"})})}),F.map(e=>a.jsx(t,{content:e.color,children:a.jsx(d.a,{href:`/product/${e.slug}`,className:"variant-option rounded-full object-fit-cover",whileHover:{scale:1.1},whileTap:{scale:.9},children:a.jsx("img",{className:"color-box rounded-full h-9 w-9 object-fit-cover",src:`/storage/images/item/${e.texture}`})})},e.slug))]})]}),a.jsx(d.div,{variants:_,className:"flex flex-col mt-8",children:a.jsx("div",{className:"flex items-center gap-4 mb-2",children:a.jsxs("div",{className:"flex items-center space-x-4 customtext-neutral-light text-sm 2xl:text-base",children:[a.jsx("span",{className:"opacity-85",children:"Cantidad"}),a.jsx(d.div,{className:"relative flex items-center border rounded-md px-2 py-1",whileHover:{scale:1.05},children:a.jsx("input",{type:"number",value:b,onChange:e=>{let a=parseInt(e.target.value,10);(isNaN(a)||a<1)&&(a=1),a>10&&(a=10),y(a)},min:"1",max:"10",className:"w-10 py-1 customtext-neutral-dark text-center bg-transparent outline-none appearance-none"})})]})})}),a.jsxs(d.div,{variants:_,className:"flex flex-col",children:[a.jsxs(d.a,{href:"/canva1",className:"w-full flex gap-4 items-center justify-center font-paragraph text-base 2xl:text-lg bg-primary text-white py-3 font-semibold rounded-3xl hover:opacity-90 transition-all duration-300 mt-3",whileHover:{scale:1.02},whileTap:{scale:.98},children:["Crea y edita tu regalo",a.jsx(s,{width:20})]}),a.jsxs(d.button,{onClick:()=>{(e=>{const a=structuredClone(u),t=a.findIndex(a=>a.id==e.id);-1==t?a.push({...e,quantity:b}):a[t].quantity++,p(a),i.fire({title:"Producto agregado",text:`Se agregó ${e.name} al carrito`,icon:"success",timer:1500})})(m)},className:"w-full flex gap-4 items-center justify-center font-paragraph text-base 2xl:text-lg bg-white border-2 border-primary customtext-primary py-3 font-semibold rounded-3xl hover:opacity-90 transition-all duration-300 mt-3",whileHover:{scale:1.02},whileTap:{scale:.98},children:["Lista de deseos",a.jsx(r,{width:20})]})]}),a.jsx(d.div,{variants:_,className:"w-full mt-5",children:a.jsxs(d.div,{className:"bg-[#F7F9FB] flex flex-row rounded-xl p-5 gap-3",whileHover:{y:-2},children:[a.jsx("img",{src:"/assets/img/salafabulosa/whatsapp.png",onError:e=>e.target.src="assets/img/noimage/no_imagen_circular.png",className:"w-12 h-12 object-contain",loading:"lazy"}),a.jsx("div",{className:"customtext-neutral-dark font-paragraph text-base 2xl:text-xl font-semibold",children:a.jsxs("p",{children:["¿Tienes dudas sobre este producto? Haz"," ",a.jsx("span",{className:"underline",children:"clic aquí"})," ","y chatea con nosotros por WhatsApp"]})})]})})]})]})}),a.jsxs(d.div,{variants:_,className:"grid gap-10 lg:gap-20 md:grid-cols-2 bg-white rounded-xl p-4 sm:p-8 font-paragraph",children:[m?.specifications?.length>0&&a.jsxs(d.div,{variants:_,children:[a.jsx("h2",{className:"text-2xl font-bold customtext-neutral-dark mb-4 border-b pb-3",children:"Especificaciones"}),a.jsx("div",{className:"space-y-1",children:m.specifications.map((e,t)=>"general"===e.type&&a.jsxs(d.div,{className:"grid grid-cols-2 gap-4 p-3 "+(t%2==0?"bg-[#F7F9FB]":"bg-white"),whileHover:{x:5},children:[a.jsx("div",{className:"customtext-neutral-light opacity-85",children:e.title}),a.jsx("div",{className:"customtext-neutral-dark",children:e.description})]},t))})]}),a.jsxs(d.div,{variants:_,className:"font-paragraph",children:[m?.description?.replace(/<[^>]+>/g,"")&&a.jsx("h2",{className:"text-2xl font-bold customtext-neutral-dark mb-4 border-b pb-3",children:"Información adicional"}),a.jsxs(d.div,{className:"space-y-2 "+(N?"":"max-h-[400px] overflow-hidden"),children:[m?.description?.replace(/<[^>]+>/g,"")&&a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"text-xl font-semibold customtext-neutral-dark mb-4",children:"Acerca de este artículo"}),a.jsx(d.div,{className:"customtext-neutral-dark",dangerouslySetInnerHTML:{__html:m?.description},initial:{opacity:0},animate:{opacity:1},transition:{duration:.5}})]}),m?.features?.length>0&&a.jsx(d.div,{className:"pl-10",variants:B,children:a.jsx("ul",{className:"list-disc pl-5 space-y-2",children:m?.features.map((e,t)=>a.jsx(d.li,{className:"customtext-neutral-dark",variants:_,children:e.feature},t))})})]})]})]}),H.length>0&&a.jsx(d.div,{className:"my-10",initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},children:a.jsx(o,{data:{title:"Productos relacionados",link_catalog:"/catalogo"},items:H,cart:u,setCart:p})}),a.jsx(c,{cart:u,setCart:p,modalOpen:g,setModalOpen:j})]})}export{m as default};
