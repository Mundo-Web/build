import{r as e,j as t,S as s,y as a,z as r,a4 as i,a5 as l,X as n,a6 as o,a7 as c,i as d}from"./vendor-react-CIhVE-fi.js";import{G as x}from"./Footer-hpJm2-lL.js";import{P as p}from"./ProfileImage-MHRAaBQP.js";import{L as m}from"./Logout-DNvBtC9t.js";import{C as u}from"./CartModal-DEGaGNoe.js";import{C as h}from"./Number2Currency-BX4epFEo.js";import{S as g}from"./SocialsRest-CtCZuWPg.js";import{A as f,m as b}from"./vendor-motion-iF4wNZTr.js";import"./vendor-swiper-Cr_RrIb_.js";import"./CartItemRow-COcyJucy.js";import"./CartKuchara-Dxib2Hfv.js";import"./General-ClVW7qxN.js";import"./BasicRest-CNjqr-ae.js";import"./OpenPayCardModal-K84_M_7u.js";import"./BooleanLimit-q2Ad9fGY.js";const j=({isOpen:a,onClose:r})=>{const[i,l]=e.useState(""),[o,c]=e.useState([]),[d,x]=e.useState(!1),[p,m]=e.useState(!1),u=e.useRef(null);e.useRef(null);const g=e=>{l(e),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{(async e=>{if(!e.trim()||e.length<2)return c([]),void x(!1);m(!0);try{const t=await fetch("/api/items/paginate",{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({take:6,skip:0,filter:[["name","contains",e],"or",["summary","contains",e],"or",["description","contains",e],"or",["sku","contains",e]],with:"category,brand"})});if(!t.ok)throw new Error("Error en la búsqueda");const s=await t.json();200===s.status&&Array.isArray(s.data)?(c(s.data),x(s.data.length>0)):(c([]),x(!1))}catch(t){c([]),x(!1)}finally{m(!1)}})(e)},300)},j=(e,s)=>{if(!e||!s)return e;const a=s.trim().toLowerCase().split(/\s+/).filter(e=>e.length>=2);if(0===a.length)return e;const r=new RegExp(`(${a.map(e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).join("|")})`,"gi");return e.split(r).map((e,s)=>a.some(t=>e.toLowerCase()===t)?t.jsx("strong",{className:"text-primary font-black",children:e},s):t.jsx("span",{children:e},s))};return t.jsx(f,{children:a&&t.jsxs(b.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-white backdrop-blur-md z-[100] flex flex-col items-center justify-start pt-32 px-6",children:[t.jsx("button",{onClick:r,className:"absolute top-10 right-10 p-2 hover:rotate-90 transition-transform duration-500",children:t.jsx(n,{size:32,strokeWidth:1})}),t.jsxs("div",{className:"w-full max-w-4xl",children:[t.jsxs("form",{className:"relative group mb-12",onSubmit:e=>{e.preventDefault(),i.trim()&&(window.location.href=`/catalogo?search=${encodeURIComponent(i.trim())}`)},children:[t.jsx("input",{type:"text",placeholder:"¿QUÉ ESTÁS BUSCANDO?",className:"w-full bg-transparent border-b-[3px] border-black py-8 text-3xl md:text-6xl font-black uppercase tracking-tighter placeholder-gray-200 focus:outline-none transition-colors focus:border-primary",autoFocus:!0,value:i,onChange:e=>g(e.target.value)}),t.jsx("button",{type:"submit",className:"absolute right-0 bottom-10 text-sm font-bold uppercase tracking-[0.3em] hover:text-primary transition-colors",children:"Buscar"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 overflow-y-auto max-h-[50vh] pr-4 custom-scrollbar",children:p?t.jsxs("div",{className:"col-span-full py-12 flex items-center justify-center gap-3 text-neutral-light",children:[t.jsx("div",{className:"w-6 h-6 border-2 border-primary border-t-transparent rounded-full animate-spin"}),t.jsx("span",{className:"text-xs font-bold uppercase tracking-widest",children:"Buscando..."})]}):o.length>0?o.map(e=>t.jsxs("button",{onClick:()=>(e=>{r(),window.location.href=e.slug?`/product/${e.slug}`:`/catalogo?search=${encodeURIComponent(e.name)}`})(e),className:"flex items-center gap-6 p-4 rounded-2xl hover:bg-gray-50 transition-all text-left group",children:[t.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-xl overflow-hidden flex-shrink-0",children:e.image?t.jsx("img",{src:`/api/items/media/${e.image}`,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500",alt:e.name}):t.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-300",children:t.jsx(s,{size:24})})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-[10px] font-bold uppercase tracking-widest text-neutral-light mb-1",children:e.category?.name||"Producto"}),t.jsx("p",{className:"font-black uppercase tracking-tighter truncate text-lg",children:j(e.name,i)}),t.jsxs("p",{className:"text-primary font-bold",children:[h()," ",Number(e.final_price).toFixed(2)]})]})]},e.id)):i.length>=2?t.jsx("div",{className:"col-span-full py-12 text-center text-neutral-light",children:t.jsx("p",{className:"text-xs font-bold uppercase tracking-widest",children:"No se encontraron resultados"})}):t.jsxs("div",{className:"col-span-full hidden",children:[t.jsx("p",{className:"text-[10px] font-bold uppercase tracking-widest text-neutral-light mb-8 italic",children:"Explora Tendencias:"}),t.jsx("div",{className:"flex flex-wrap gap-4",children:["Nuevos","Ofertas","Best Sellers","Premium"].map(e=>t.jsx("a",{href:`/catalogo?search=${e}`,className:"px-6 py-3 rounded-full border border-gray-100 text-[10px] font-bold uppercase tracking-widest hover:bg-black hover:text-white transition-all",children:e},e))})]})})]})]})})},v=({data:h,cart:v,setCart:N,pages:y,isUser:w,generals:k=[]})=>{const[C,S]=e.useState(!1),[z,E]=e.useState(!1),[$,R]=e.useState(!1),[L,P]=e.useState(!1),[A,O]=e.useState(!1),[B,M]=e.useState([]),_=new g,I=e.useRef(null);e.useEffect(()=>{(async()=>{try{const e=await _.paginate({skip:0,take:10,status:1});e.data&&M(e.data)}catch(e){}})()},[]),e.useEffect(()=>{const e=()=>S(window.scrollY>20);window.addEventListener("scroll",e);const t=e=>{I.current&&!I.current.contains(e.target)&&O(!1)};return document.addEventListener("mousedown",t),()=>{window.removeEventListener("scroll",e),document.removeEventListener("mousedown",t)}},[]),e.useEffect(()=>(document.body.style.overflow=z||$?"hidden":"unset",()=>{document.body.style.overflow="unset"}),[z,$]);const U=v?.reduce((e,t)=>Number(e)+Number(t.quantity),0)||0;return t.jsxs(t.Fragment,{children:[t.jsx("header",{id:h?.element_id||null,className:`w-full left-0 z-50 transition-all duration-300 ease-in-out ${C?"fixed top-0 bg-white shadow-sm py-6 border-b border-gray-100 text-black":"relative py-6 bg-transparent text-black"} ${h?.class||""}`,children:t.jsxs("div",{className:"px-primary 2xl:px-0 2xl:max-w-7xl  mx-auto  flex items-center justify-between relative",children:[t.jsxs("div",{className:"flex items-center gap-6 flex-1",children:[t.jsx("button",{onClick:()=>E(!0),className:"group flex items-center gap-3 transition-colors",children:t.jsxs("div",{className:"flex flex-col gap-1.5 w-6",children:[t.jsx("span",{className:"h-0.5 w-full bg-current transition-all group-hover:w-4"}),t.jsx("span",{className:"h-0.5 w-full bg-current transition-all group-hover:w-6"})]})}),t.jsx("button",{onClick:()=>R(!0),className:"hidden md:block hover:opacity-100 opacity-70 transition-opacity",children:t.jsx(s,{size:22,strokeWidth:1.5})})]}),t.jsx("a",{href:"/",className:"absolute left-1/2 -translate-x-1/2 transition-transform duration-500 hover:scale-105",children:t.jsx("img",{src:`/assets/resources/logo.png?v=${crypto.randomUUID()}`,alt:x.APP_NAME,className:"h-12 object-contain",onError:e=>{e.target.onerror=null,e.target.src="/assets/img/logo-bk.svg"}})}),t.jsxs("div",{className:"flex items-center justify-end gap-6 flex-1",children:[t.jsxs("div",{className:"relative",ref:I,children:[w?t.jsxs("button",{onClick:()=>O(!A),className:"flex items-center gap-2 group",children:[t.jsx(p,{uuid:w.uuid,name:w.name,className:"w-8 h-8 rounded-full border-2 border-black transition-colors"}),t.jsx("span",{className:"hidden lg:block text-[10px] font-bold uppercase tracking-widest",children:w.name})]}):t.jsxs("a",{href:"/iniciar-sesion",className:"flex items-center gap-2 hover:opacity-70 transition-opacity",children:[t.jsx(a,{size:22,strokeWidth:1.5}),t.jsx("span",{className:"hidden lg:block text-[10px] font-bold uppercase tracking-widest",children:"Iniciar Sesión"})]}),t.jsx(f,{children:A&&t.jsxs(b.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"absolute right-0 mt-4 w-64 bg-white shadow-2xl rounded-2xl overflow-hidden text-black z-[60]",children:[t.jsxs("div",{className:"p-6 bg-gray-50 border-b border-gray-100 text-center",children:[t.jsx("p",{className:"text-[10px] uppercase tracking-widest text-neutral-light font-bold mb-1",children:"Bienvenido"}),t.jsx("p",{className:"font-black uppercase tracking-tighter truncate",children:w?.name})]}),t.jsxs("div",{className:"p-2",children:[t.jsxs("a",{href:"/profile",className:"flex items-center gap-3 p-3 hover:bg-gray-50 rounded-xl transition-colors group",children:[t.jsx(r,{size:18,className:"text-neutral-light group-hover:text-black"}),t.jsx("span",{className:"text-xs font-bold uppercase tracking-widest",children:"Mi Perfil"})]}),t.jsxs("button",{onClick:m,className:"w-full flex items-center gap-3 p-3 hover:bg-red-50 rounded-xl transition-colors group text-red-500",children:[t.jsx(i,{size:18}),t.jsx("span",{className:"text-xs font-bold uppercase tracking-widest",children:"Cerrar Sesión"})]})]})]})})]}),t.jsx("button",{onClick:()=>R(!0),className:"md:hidden",children:t.jsx(s,{size:22,strokeWidth:1.5})}),t.jsxs("button",{onClick:()=>P(!0),className:"relative group p-1",children:[t.jsx(l,{size:22,strokeWidth:1.5}),U>0&&t.jsx("span",{className:"absolute -top-1 -right-1 text-[9px] font-black w-4 h-4 flex items-center justify-center rounded-full bg-black text-white",children:U})]})]})]})}),t.jsx(f,{children:z&&t.jsxs(b.div,{initial:{y:"-100%"},animate:{y:0},exit:{y:"-100%"},transition:{type:"spring",damping:30,stiffness:200},className:"fixed inset-0 bg-white z-[100] flex flex-col",children:[t.jsx("button",{onClick:()=>E(!1),className:"absolute top-10 right-10 p-2 hover:rotate-90 transition-transform duration-500",children:t.jsx(n,{size:32,strokeWidth:1})}),t.jsxs("div",{className:"px-primary 2xl:px-0 2xl:max-w-7xl w-full  mx-auto grid grid-cols-1 md:grid-cols-2 gap-20 h-full relative",children:[t.jsx("nav",{className:"flex flex-col justify-center",children:t.jsx(b.ul,{className:"space-y-6",initial:"closed",animate:"open",variants:{open:{transition:{staggerChildren:.1,delayChildren:.2}},closed:{transition:{staggerChildren:.05,staggerDirection:-1}}},children:y.filter(e=>e.menuable).map((e,s)=>t.jsx(b.li,{variants:{open:{opacity:1,x:0},closed:{opacity:0,x:-20}},children:t.jsxs("a",{href:e.pseudo_path||e.path,className:"relative text-5xl md:text-8xl font-black uppercase tracking-tighter hover:text-primary transition-all inline-block group py-2 overflow-hidden",children:[t.jsx("span",{className:"relative z-10",children:e.name}),t.jsx("span",{className:"absolute bottom-0 left-0 w-full h-1 bg-black transform translate-x-[-101%] group-hover:translate-x-0 transition-transform duration-500 ease-out"})]})},s))})}),t.jsx("div",{className:"hidden md:flex flex-col justify-center border-l border-gray-100 pl-20 h-full",children:t.jsxs("div",{className:"space-y-16",children:[t.jsx("div",{className:"grid grid-cols-1 gap-12",children:t.jsxs("div",{className:"grid grid-cols-2 gap-12",children:[t.jsxs("div",{className:"group",children:[t.jsx("p",{className:"text-sm font-bold uppercase tracking-widest text-neutral-light mb-4 flex items-center gap-2",children:"Horarios"}),t.jsx("p",{className:"text-xs text-neutral-light font-bold leading-relaxed whitespace-pre-line group-hover:text-black transition-colors",children:k.find(e=>"opening_hours"===e.correlative)?.description||"Lunes a Sábado\n9:00 AM - 8:00 PM"})]}),t.jsxs("div",{className:"group",children:[t.jsx("p",{className:"text-sm font-bold uppercase tracking-widest text-neutral-light mb-4 flex items-center gap-2",children:"Atención Directa"}),t.jsxs("div",{className:"space-y-3",children:[(k.find(e=>"email_contact"===e.correlative)?.description||"ayuda@rainstarstore.com").split(",").map((e,s)=>t.jsxs("a",{href:`mailto:${e.trim()}`,className:"flex items-center gap-3 text-xs text-neutral-light font-bold group-hover:text-black transition-colors hover:text-primary w-fit",children:[t.jsx(o,{size:14,className:"text-primary flex-shrink-0"}),e.trim()]},`email-${s}`)),k.find(e=>"phone_contact"===e.correlative)?.description?.split(",").map((e,s)=>t.jsxs("a",{href:`tel:${e.trim()}`,className:"flex items-center gap-3 text-xs text-neutral-light font-bold group-hover:text-black transition-colors hover:text-primary w-fit",children:[t.jsx(c,{size:14,className:"text-primary flex-shrink-0"}),e.trim()]},`phone-${s}`))]})]})]})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-bold uppercase tracking-widest text-neutral-light mb-8",children:"Síguenos en Redes"}),t.jsx("div",{className:"flex flex-wrap gap-6",children:B.length>0?B.map((e,s)=>t.jsx(d,{content:e.name,children:t.jsx("div",{className:"relative",children:t.jsx("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 rounded-full  flex items-center justify-center text-xl transition-all duration-300 transform hover:bg-primary hover:text-white hover:scale-110 active:scale-95",children:t.jsx("i",{className:e.icon})})})},s)):t.jsxs("div",{className:"flex gap-4",children:[t.jsx("span",{className:"text-[10px] font-bold uppercase border-b border-black pb-1",children:"Instagram"}),t.jsx("span",{className:"text-[10px] font-bold uppercase border-b border-black pb-1",children:"Facebook"})]})})]})]})})]})]})}),t.jsx(j,{isOpen:$,onClose:()=>R(!1)}),t.jsx(u,{modalOpen:L,setModalOpen:P,cart:v,setCart:N,data:h})]})};export{v as default};
