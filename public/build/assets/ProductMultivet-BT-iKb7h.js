import{j as s}from"./AboutSimple-Cf8x2fCZ.js";import{r as l}from"./index-BOnQTV8N.js";import{t as C}from"./CardProductMultivet-ncpmQ0JU.js";import{C as F}from"./circle-chevron-right-Cragr8lM.js";import{u as N}from"./use-in-view-DtBxy-1R.js";import{m as t}from"./proxy-B0QLMKEh.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./index-pSueRYGM.js";import"./index-B6ujFmsw.js";import"./createLucideIcon-DfjclApS.js";const V=({product:e,data:i,favorites:m=[],setFavorites:f})=>{const[c,u]=l.useState(!1),x=m.some(n=>n.id===(e==null?void 0:e.id)),r=n=>n?new Intl.NumberFormat("es-PE",{style:"currency",currency:"PEN",minimumFractionDigits:2}).format(n):"",d=n=>{if(n.preventDefault(),n.stopPropagation(),f){const b=x?m.filter(v=>v.id!==e.id):[...m,e];f(b),C.success(x?"Producto eliminado de favoritos":"Producto agregado a favoritos",{description:e==null?void 0:e.name,duration:2e3,position:"bottom-center"})}},y=()=>{const n=(e==null?void 0:e.slug)||(e==null?void 0:e.id);window.location.href=`/product/${n}`},g=(e==null?void 0:e.price)&&(e==null?void 0:e.final_price)&&parseFloat(e.price)>parseFloat(e.final_price);return g&&Math.round((parseFloat(e.price)-parseFloat(e.final_price))/parseFloat(e.price)*100),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-2 group cursor-pointer flex flex-col h-full",onClick:y,children:[s.jsxs("div",{className:"relative overflow-hidden bg-gray-50 h-64 flex items-center justify-center p-4",children:[s.jsx("img",{src:e!=null&&e.image?`/api/items/media/${e.image}`:"/assets/img/noimage/no_img.jpg",alt:(e==null?void 0:e.name)||"Producto",className:"w-full h-full object-contain group-hover:scale-105 transition-transform duration-500",onError:n=>{n.target.src="/assets/img/noimage/no_img.jpg"}}),s.jsx("div",{className:"absolute top-3 left-3 bg-accent text-white rounded-full text-sm font-bold shadow-lg z-10",children:(e==null?void 0:e.category)&&s.jsx("span",{className:"bg-accent customtext-primary bg-opacity-10 customtext-primary px-3 py-2 rounded-full text-xs font-bold",children:e.category.name||e.category})}),s.jsx("p",{onClick:d,className:"absolute top-3 right-3     flex items-center justify-center  transition-all duration-300  z-10",children:(e==null?void 0:e.brand)&&s.jsx("img",{src:e.brand.image?`/api/brands/media/${e.brand.image}`:"/assets/img/noimage/no_img.jpg",alt:e.brand.name||"Marca",className:"max-h-14 max-w-full object-contain",onError:n=>{n.target.src="/assets/img/noimage/no_img.jpg"}})})]}),s.jsxs("div",{className:"p-5 flex-1 flex flex-col",children:[s.jsx("h3",{className:"text-lg font-bold customtext-neutral-dark mb-2 group-hover:customtext-primary transition-colors duration-300 font-title line-clamp-2 min-h-[3.5rem]",children:e==null?void 0:e.name}),(e==null?void 0:e.description)&&s.jsx("p",{className:"customtext-neutral-light text-sm mb-3 line-clamp-2 min-h-[2.5rem]",dangerouslySetInnerHTML:{__html:e.description}}),s.jsx("div",{className:"flex-1"}),s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-xl font-bold customtext-secondary font-title",children:r((e==null?void 0:e.final_price)||(e==null?void 0:e.price))}),g&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm customtext-neutral-light line-through",children:r(e.price)}),s.jsxs("span",{className:"text-xs bg-red-100 text-red-800 px-2 py-1 rounded-full font-bold",children:["Ahorra ",r(parseFloat(e.price)-parseFloat(e.final_price))]})]})]})}),s.jsx("div",{className:"flex space-x-2",children:s.jsxs("button",{onClick:n=>{n.stopPropagation(),y()},type:"button",disabled:!(e!=null&&e.stock)&&!(e!=null&&e.stock)>0,className:"flex-1 bg-secondary text-white py-3 rounded-lg font-semibold text-sm transition-all duration-300 flex items-center justify-center space-x-2 hover:bg-accent hover:customtext-primary disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx("span",{children:"Ver detalle"}),s.jsx(F,{className:"w-5 h-5"})]})})]})]})},z=({items:e,data:i,favorites:m=[],setFavorites:f})=>{const[c,u]=l.useState("Todos"),x=l.useRef(null),r=l.useRef(null),d=l.useRef(null),y=N(x,{once:!0}),g=N(r,{once:!0}),n=N(d,{once:!0});console.log("ProductMultivet items:",e),console.log("ProductMultivet data:",i);const b=l.useMemo(()=>{if(!e||e.length===0)return["Todos"];const a=["Todos"],h=new Set;return e.forEach(o=>{if(o.category){const j=o.category.name||o.category;h.has(j)||(h.add(j),a.push(j))}}),a},[e]),v=l.useMemo(()=>!e||e.length===0?[]:c==="Todos"?e:e.filter(a=>{var o;return(((o=a.category)==null?void 0:o.name)||a.category)===c}),[e,c]),_={hidden:{opacity:0,y:50},visible:{opacity:1,y:0,transition:{duration:.6,ease:"easeOut",staggerChildren:.2}}},w={hidden:{opacity:0,x:-50},visible:{opacity:1,x:0,transition:{duration:.7,ease:"easeOut"}}},p={hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{duration:.8,delay:.2,ease:"easeOut",staggerChildren:.1}}},P={hidden:{opacity:0,y:40,scale:.9},visible:{opacity:1,y:0,scale:1,transition:{duration:.5,ease:"easeOut"}}};return!e||e.length===0?s.jsx("div",{className:"hidden w-full px-primary p-4 mx-auto"}):s.jsx(t.section,{ref:x,variants:_,initial:"hidden",animate:y?"visible":"hidden",className:`py-16 bg-gray-50 ${(i==null?void 0:i.class_section)||""}`,children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[s.jsxs(t.div,{ref:r,className:"text-center mb-12",children:[s.jsx(t.h2,{variants:w,initial:"hidden",animate:g?"visible":"hidden",className:"text-3xl md:text-5xl font-bold customtext-secondary mb-4 font-title",children:(i==null?void 0:i.title)||"Productos Destacados"}),s.jsx(t.p,{variants:w,initial:"hidden",animate:g?"visible":"hidden",className:"customtext-neutral-light text-lg max-w-2xl mx-auto",children:(i==null?void 0:i.description)||"Descubre nuestra selecciÃ³n de productos veterinarios de las mejores marcas nacionales e internacionales"})]}),b.length>1&&s.jsx("div",{className:"flex flex-wrap justify-center gap-4 mb-12",children:b.map(a=>s.jsx("button",{onClick:()=>u(a),className:`px-6 py-3 rounded-full font-medium transition-all duration-300 ${c===a?"bg-secondary text-white shadow-lg":"bg-white customtext-neutral-light hover:bg-primary hover:text-white border border-gray-300"}`,children:a},a))}),s.jsx(t.div,{ref:d,variants:p,initial:"hidden",animate:n?"visible":"hidden",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:v.map((a,h)=>s.jsx(t.div,{variants:P,className:"flex",children:s.jsx(V,{product:a,data:i,favorites:m,setFavorites:f})},a.id||h))}),(i==null?void 0:i.link_catalog)&&s.jsx("div",{className:"text-center mt-12",children:s.jsx(t.a,{href:i.link_catalog,className:`inline-flex items-center gap-3 px-8 py-4 bg-primary font-bold customtext-primary  rounded-lg hover:bg-secondary hover:text-white transform hover:scale-105 transition-all duration-300 ${(i==null?void 0:i.class_button)||""}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:(i==null?void 0:i.text_button)||"Ver todos los productos"})})]})})};export{z as default};
