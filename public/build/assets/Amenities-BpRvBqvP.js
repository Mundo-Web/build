import{j as n}from"./AboutSimple-Cf8x2fCZ.js";import{r as s}from"./index-BOnQTV8N.js";import{c as A}from"./ReactAppend-CxMClIhj.js";import{s as j}from"./server.browser-Bf4gQIc7.js";import{B as G}from"./Base-7Lnuhu9D.js";import{A as z}from"./AmenitiesRest-CWcPI_jJ.js";import{T as P}from"./Table-Y6HnbrqJ.js";import{M}from"./Modal-xDw9ufjg.js";import{I as V}from"./ImageFormGroup-40MuGzez.js";import{I as q}from"./InputFormGroup-iZIO11ZN.js";import{S as L}from"./SelectFormGroup-X8WqJHHl.js";import{T as W}from"./TextareaFormGroup-CliirJM1.js";import{S as y}from"./SwitchFormGroup-DXN0cwVk.js";import{D as S}from"./DxButton-DV0H-ZcL.js";import{C as H,F as R}from"./CreateReactScript-Ci_XyXi1.js";import{R as F}from"./ReactAppend-C2Knef3a.js";import{S as D}from"./CartKuchara-CVImXKD8.js";import{F as U,a as _,b as J,c as O,d as K,e as Q,f as X,g as Y,h as Z,i as ee,j as ie,k as ne,l as ae,m as te,n as se,o as re,p as oe,q as ce,r as le,s as me,t as fe,u as ue}from"./index-D_aREkSt.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./index-BLHw34Di.js";import"./Global-Bz6gVLc5.js";import"./tippy-react.esm-BGU1pa2o.js";import"./index-B8-haksW.js";/* empty css              */import"./Logout-DK3gcKZh.js";import"./main-iQpBVKTZ.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./MenuItemContainer-B4uedZKJ.js";import"./index.esm-BaU9YRy4.js";import"./index-B9ygI19o.js";import"./CanAccess-BlvzCYjQ.js";import"./BasicRest-tjV1jpAY.js";import"./CardProductKatya-BPLqIfPk.js";import"./BooleanLimit-D-OsQsek.js";/* empty css               */import"./General-apRuNwp7.js";import"./LaravelSession-Dz9cpV3l.js";const u=new z,l=[{id:"wifi",name:"WiFi",icon:U,iconRef:"fas fa-wifi"},{id:"tv",name:"TV",icon:_,iconRef:"fas fa-tv"},{id:"aire",name:"Aire Acondicionado",icon:J,iconRef:"fas fa-snowflake"},{id:"estacionamiento",name:"Estacionamiento",icon:O,iconRef:"fas fa-parking"},{id:"piscina",name:"Piscina",icon:K,iconRef:"fas fa-swimming-pool"},{id:"gimnasio",name:"Gimnasio",icon:Q,iconRef:"fas fa-dumbbell"},{id:"desayuno",name:"Desayuno",icon:X,iconRef:"fas fa-coffee"},{id:"restaurante",name:"Restaurante",icon:Y,iconRef:"fas fa-utensils"},{id:"servicio-habitacion",name:"Servicio a la Habitación",icon:Z,iconRef:"fas fa-concierge-bell"},{id:"spa",name:"Spa",icon:ee,iconRef:"fas fa-spa"},{id:"no-fumar",name:"No Fumar",icon:ie,iconRef:"fas fa-smoking-ban"},{id:"pet-friendly",name:"Pet Friendly",icon:ne,iconRef:"fas fa-dog"},{id:"accesible",name:"Accesible",icon:ae,iconRef:"fas fa-wheelchair"},{id:"transfer",name:"Transfer Aeropuerto",icon:te,iconRef:"fas fa-shuttle-van"},{id:"business",name:"Centro de Negocios",icon:se,iconRef:"fas fa-briefcase"},{id:"cuna",name:"Cuna Disponible",icon:re,iconRef:"fas fa-baby"},{id:"caja-fuerte",name:"Caja Fuerte",icon:oe,iconRef:"fas fa-lock"},{id:"ventilador",name:"Ventilador",icon:ce,iconRef:"fas fa-fan"},{id:"jacuzzi",name:"Jacuzzi",icon:le,iconRef:"fas fa-hot-tub"},{id:"playa",name:"Acceso a Playa",icon:me,iconRef:"fas fa-umbrella-beach"},{id:"bar",name:"Bar",icon:fe,iconRef:"fas fa-glass-martini"},{id:"entretenimiento",name:"Entretenimiento",icon:ue,iconRef:"fas fa-gamepad"}],de=()=>{const r=s.useRef(),o=s.useRef(),g=s.useRef(),h=s.useRef(),d=s.useRef(),c=s.useRef(),t=s.useRef(),x=s.useRef(),[C,v]=s.useState(!1),[m,b]=s.useState(null),T=e=>{const i=l.find(a=>a.id===e);b(i)};s.useEffect(()=>{const e=()=>{c.current&&$(c.current).on("change",function(){const i=$(this).val();T(i)})};return $(o.current).on("shown.bs.modal",e),()=>{c.current&&$(c.current).off("change"),$(o.current).off("shown.bs.modal",e)}},[]);const w=e=>{e!=null&&e.id?v(!0):v(!1),t.current&&t.resetDeleteFlag&&t.resetDeleteFlag(),g.current.value=(e==null?void 0:e.id)??"",h.current.value=(e==null?void 0:e.name)??"",d.current.value=(e==null?void 0:e.slug)??"",x.current.value=(e==null?void 0:e.description)??"",t.current&&t.image&&(t.image.src=e!=null&&e.image?`/api/amenities/media/${e.id}`:"",t.current.value=null);const i=l.find(a=>a.iconRef===(e==null?void 0:e.icon));i?(b(i),setTimeout(()=>{$(c.current).val(i.id).trigger("change")},100)):(b(null),setTimeout(()=>{$(c.current).val("").trigger("change")},100)),$(o.current).modal("show")},E=async e=>{if(e.preventDefault(),!m){D.fire("Error","Por favor selecciona un icono","error");return}const i={id:g.current.value||void 0,name:h.current.value,slug:d.current.value,icon:m.iconRef,description:x.current.value},a=new FormData;for(const f in i)a.append(f,i[f]);if(t.current){const f=t.current.files[0];f&&a.append("image",f),t.getDeleteFlag&&t.getDeleteFlag()&&a.append("image_delete","DELETE")}await u.save(a)&&(t.current&&t.resetDeleteFlag&&t.resetDeleteFlag(),$(r.current).dxDataGrid("instance").refresh(),$(o.current).modal("hide"))},N=async({id:e,value:i})=>{await u.boolean({id:e,field:"visible",value:i})&&$(r.current).dxDataGrid("instance").refresh()},k=async({id:e,value:i})=>{await u.boolean({id:e,field:"status",value:i})&&$(r.current).dxDataGrid("instance").refresh()},B=async e=>{const{isConfirmed:i}=await D.fire({title:"Eliminar amenidad",text:"¿Estás seguro de eliminar esta amenidad?",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"});!i||!await u.delete(e)||$(r.current).dxDataGrid("instance").refresh()},I=e=>{const a=e.target.value.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s-]/g,"").trim().replace(/\s+/g,"-");d.current.value=a};return n.jsxs(n.Fragment,{children:[n.jsx(P,{gridRef:r,title:"Amenidades",rest:u,toolBar:e=>{e.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(r.current).dxDataGrid("instance").refresh()}}),e.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Nueva amenidad",hint:"Nueva amenidad",onClick:()=>w()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"image",caption:"Imagen",width:"80px",allowFiltering:!1,cellTemplate:(e,{data:i})=>{i.image&&F(e,n.jsx("img",{src:`/api/amenities/media/${i.id}`,alt:i.name,style:{width:"60px",height:"60px",objectFit:"cover",borderRadius:"4px"},onError:a=>a.target.src="/api/cover/thumbnail/null"}))}},{dataField:"icon",caption:"Icono",width:"80px",allowFiltering:!1,cellTemplate:(e,{data:i})=>{const a=l.find(p=>p.iconRef===i.icon);if(a){const p=a.icon;e.html(j.renderToString(n.jsx("div",{className:"d-flex justify-content-center align-items-center",children:n.jsx(p,{size:32})})))}else i.icon&&e.html(j.renderToString(n.jsx("div",{className:"d-flex justify-content-center align-items-center",children:n.jsx("i",{className:i.icon,style:{fontSize:"32px"}})})))}},{dataField:"name",caption:"Nombre",width:"30%"},{dataField:"description",caption:"Descripción",width:"40%"},{dataField:"slug",caption:"Slug",width:"20%"},{dataField:"visible",caption:"Visible",dataType:"boolean",cellTemplate:(e,{data:i})=>{$(e).empty(),F(e,n.jsx(y,{checked:i.visible==1,onChange:()=>N({id:i.id,value:!i.visible})}))}},{dataField:"status",caption:"Activo",dataType:"boolean",cellTemplate:(e,{data:i})=>{$(e).empty(),F(e,n.jsx(y,{checked:i.status==1,onChange:()=>k({id:i.id,value:!i.status})}))}},{caption:"Acciones",cellTemplate:(e,{data:i})=>{e.css("text-overflow","unset"),e.append(S({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>w(i)})),e.append(S({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>B(i.id)}))},allowFiltering:!1,allowExporting:!1}].filter(e=>!(!e||e.dataField==="image"&&!R.has("amenities","image")))}),n.jsxs(M,{modalRef:o,title:C?"Editar amenidad":"Nueva amenidad",onSubmit:E,size:"md",children:[n.jsx("input",{ref:g,type:"hidden"}),n.jsxs("div",{className:"row",id:"amenities-container",children:[R.has("amenities","image")&&n.jsx(V,{eRef:t,name:"image",label:"Imagen",col:"col-md-12",aspect:1}),n.jsxs("div",{className:"col-12 mb-3",children:[n.jsxs("label",{className:"form-label",children:["Icono ",n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsxs(L,{eRef:c,dropdownParent:"#amenities-container",required:!0,templateResult:e=>{if(!e.id)return e.text;const i=l.find(a=>a.id===e.id);return i?(i.icon,$(`<span><i class="${i.iconRef}" style="margin-right: 8px;"></i>${e.text}</span>`)):e.text},templateSelection:e=>{if(!e.id)return e.text;const i=l.find(a=>a.id===e.id);return i?$(`<span><i class="${i.iconRef}" style="margin-right: 8px;"></i>${e.text}</span>`):e.text},children:[n.jsx("option",{value:"",children:"Seleccionar icono..."}),l.map(e=>n.jsx("option",{value:e.id,children:e.name},e.id))]})]}),m&&n.jsx("div",{className:"col-12 mb-3",children:n.jsxs("div",{className:"alert alert-info d-flex align-items-center",children:[n.jsx(m.icon,{className:"me-2",size:24}),n.jsxs("span",{children:["Icono seleccionado: ",n.jsx("strong",{children:m.name})]})]})}),n.jsx(q,{eRef:h,label:"Nombre",col:"col-md-12",required:!0,onChange:I}),n.jsx("input",{ref:d,type:"hidden"}),n.jsx(W,{eRef:x,label:"Descripción",col:"col-md-12",rows:3,hidden:!R.has("amenities","description")})]})]})]})};H((r,o)=>{A.createRoot(r).render(n.jsx(G,{...o,title:"Amenidades",children:n.jsx(de,{...o})}))});
