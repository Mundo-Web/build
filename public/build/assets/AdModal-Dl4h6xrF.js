import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as n}from"./index-BOnQTV8N.js";import{R as C}from"./PolicyModal-C80IvD61.js";import{H as S}from"./HtmlContent-ghmllTyl.js";import{X as k}from"./x-fof_H3Vv.js";import{C as M}from"./chevron-left-JcR9Fe4w.js";import{C as $}from"./chevron-right-Cug7tVUE.js";import{c as E}from"./createLucideIcon-DfjclApS.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./index-B6ujFmsw.js";import"./index-Chjiymov.js";/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=E("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),G=({data:s,items:c=[]})=>{const[i,u]=n.useState(!1),[h,b]=n.useState(!1),[r,w]=n.useState([]),[d,m]=n.useState(0),p=t=>`mblens_ad_seen_${t.id||t.image}`;n.useEffect(()=>{const t=c.filter(a=>a&&a.image);console.log("AdModal: Procesando anuncios...",t);const o=t.filter(a=>{const l=p(a),x=localStorage.getItem(l);if(!x)return!0;const A=Date.now(),v=parseInt(x,10);return isNaN(v)||A>v?(console.log(`AdModal: Anuncio ${a.id||a.image} expiró su marca de visto. Mostrando de nuevo.`),localStorage.removeItem(l),!0):(console.log(`AdModal: Anuncio ${a.id||a.image} ya fue visto. Ocultando.`),!1)});w(o)},[c]),n.useEffect(()=>{if(r.length===0||h)return;const o=(r[0].seconds||0)*1e3;console.log(`AdModal: Programando apertura en ${o}ms`);const a=setTimeout(()=>{u(!0),b(!0)},o);return()=>clearTimeout(a)},[r,h]),n.useEffect(()=>{if(!i||r.length<=1)return;const t=r[d],o=((t==null?void 0:t.seconds)||5)*1e3;console.log(`AdModal: Slide ${d+1} durará ${o}ms`);const a=setTimeout(()=>{m(l=>(l+1)%r.length)},o);return()=>clearTimeout(a)},[i,r.length,d]);const y=()=>{m(t=>(t+1)%r.length)},j=()=>{m(t=>(t-1+r.length)%r.length)},g=()=>{console.log("AdModal: Cerrando y guardando estado 'visto'..."),u(!1);const t=1440*60*1e3,o=Date.now()+t;r.forEach(a=>{const l=p(a);localStorage.setItem(l,o.toString()),console.log(`AdModal: Guardado ${l} expira en ${new Date(o).toLocaleString()}`)})},N=t=>{t&&window.open(t,"_blank","noopener,noreferrer")};if(r.length===0)return null;const f=r.some(t=>t.invasivo);return e.jsxs(C,{isOpen:i,shouldCloseOnOverlayClick:!f,shouldCloseOnEsc:!f,onRequestClose:g,contentLabel:"Anuncio",className:"absolute left-1/2 -translate-x-1/2 top-1/2 -translate-y-1/2 bg-white w-[90%] max-w-4xl outline-none shadow-2xl rounded-2xl overflow-visible",overlayClassName:"fixed inset-0 bg-black/70 backdrop-blur-sm z-[9999] flex items-center justify-center",ariaHideApp:!1,children:[e.jsx("button",{onClick:g,className:"absolute -top-3 -right-3 md:-top-4 md:-right-4 z-[9999] w-10 h-10 md:w-12 md:h-12 bg-white text-gray-700 rounded-full shadow-xl border border-gray-100 hover:bg-gray-50 hover:scale-110 hover:text-red-500 transition-all duration-300 flex items-center justify-center group","aria-label":"Cerrar anuncio",children:e.jsx(k,{size:22,strokeWidth:2.5,className:"transition-transform group-hover:rotate-90 duration-300"})}),e.jsxs("div",{className:"w-full h-full bg-white rounded-2xl overflow-hidden relative",children:[e.jsx("div",{className:"relative",children:r.map((t,o)=>e.jsx("div",{className:`transition-all duration-500 ease-in-out ${o===d?"opacity-100 relative":"opacity-0 absolute inset-0 pointer-events-none"}`,children:e.jsx(T,{ad:t,handleAdClick:N})},t.id||o))}),r.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:j,className:"absolute left-2 md:left-4 top-1/2 -translate-y-1/2 z-30 p-2 md:p-3 rounded-full bg-white/90 hover:bg-primary text-gray-700 hover:text-white transition-all duration-300 hover:scale-110 shadow-lg group","aria-label":"Anterior",children:e.jsx(M,{className:"w-5 h-5 md:w-6 md:h-6 transition-transform group-hover:-translate-x-0.5"})}),e.jsx("button",{onClick:y,className:"absolute right-2 md:right-4 top-1/2 -translate-y-1/2 z-30 p-2 md:p-3 rounded-full bg-white/90 hover:bg-primary text-gray-700 hover:text-white transition-all duration-300 hover:scale-110 shadow-lg group","aria-label":"Siguiente",children:e.jsx($,{className:"w-5 h-5 md:w-6 md:h-6 transition-transform group-hover:translate-x-0.5"})})]}),r.length>1&&e.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 z-30 flex space-x-2",children:r.map((t,o)=>e.jsx("button",{onClick:()=>m(o),className:`transition-all duration-300 rounded-full ${o===d?"w-8 h-2.5 bg-primary":"w-2.5 h-2.5 bg-gray-300 hover:bg-gray-400"}`,"aria-label":`Ir al anuncio ${o+1}`},o))})]})]})},T=({ad:s,handleAdClick:c})=>{const i=s.button_text||"Ver más detalles";return e.jsxs("div",{className:"flex flex-col md:flex-row w-full min-h-[400px] md:min-h-[450px] md:h-[500px]",children:[e.jsxs("div",{className:"w-full md:w-1/2 h-56 md:h-full relative bg-gray-100 overflow-hidden group",children:[e.jsx("img",{src:`/api/ads/media/${s.image}`,alt:s.name||"Anuncio",className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/30 via-transparent to-transparent md:bg-gradient-to-r md:from-transparent md:via-transparent md:to-black/10 pointer-events-none"})]}),e.jsx("div",{className:"w-full md:w-1/2 p-6 md:p-10 lg:p-12 flex flex-col justify-center items-start text-left bg-white relative",children:e.jsxs("div",{className:"w-full space-y-4 md:space-y-6",children:[s.name&&e.jsx("h2",{className:"text-2xl md:text-3xl lg:text-4xl font-bold text-gray-900 leading-tight",children:s.name}),s.description&&e.jsx("div",{className:"prose prose-sm md:prose-base text-gray-600 line-clamp-4 md:line-clamp-6",children:e.jsx(S,{html:s.description})}),s.link&&e.jsxs("button",{onClick:()=>c(s.link),className:"mt-4 w-full md:w-auto bg-primary hover:bg-primary/90 text-white font-semibold py-3 px-8 rounded-full transition-all duration-300 shadow-lg hover:shadow-xl hover:scale-105 flex items-center justify-center gap-2 group",children:[e.jsx("span",{children:i}),e.jsx(I,{className:"w-4 h-4 group-hover:translate-x-1 group-hover:-translate-y-0.5 transition-transform"})]})]})})]})};export{G as default};
