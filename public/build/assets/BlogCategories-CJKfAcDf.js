import{c as e,j as a,r as t}from"./vendor-react-DD0uBW7s.js";import{B as r}from"./Base-DQk4WKCZ.js";import{S as i}from"./SwitchFormGroup-Dk6WRclX.js";import{T as o}from"./TextareaFormGroup-4KXpt4Nc.js";import{S as s}from"./CartKuchara-BG_NtHiU.js";import{B as n}from"./BlogCategoriesRest-CXyw4YFU.js";import{I as l}from"./ImageFormGroup-DBShHzxF.js";import{I as c}from"./InputFormGroup-DY-ZEW8l.js";import{M as d}from"./Modal-CfnJHMl_.js";import{T as m}from"./Table-CUZG9nUs.js";import{D as g}from"./DxButton-C6FT_beP.js";import{C as p,F as u}from"./CreateReactScript-C92mMLGn.js";import{R as f}from"./ReactAppend-D5wf6JB3.js";import"./vendor-swiper-BQwfPLwm.js";import"./Global-BAGAPG-V.js";import"./TippyButton-BXJTBPrK.js";import"./Logout-CJj-4dQc.js";import"./MenuItemContainer--0h9gV_W.js";import"./Menu-Cmvatiox.js";import"./BasicRest-BuuGWTMX.js";import"./GoogleSignInButton-BciphYP2.js";import"./BooleanLimit-q2Ad9fGY.js";import"./General-ClVW7qxN.js";import"./LaravelSession-ByQnaUD3.js";const b=new n,h=()=>{const e=t.useRef(),r=t.useRef(),n=t.useRef(),p=t.useRef(),h=t.useRef(),j=t.useRef(),x=t.useRef(),[v,F]=t.useState(!1),w=e=>{F(!!e?.id),j.resetDeleteFlag&&j.resetDeleteFlag(),x.resetDeleteFlag&&x.resetDeleteFlag(),n.current.value=e?.id??"",p.current.value=e?.name??"",h.current.value=e?.description??"",j.image.src=e?.banner?`/storage/images/category/${e.banner}`:"",j.current.value=null,x.image.src=e?.image?`/storage/images/category/${e.image}`:"",x.current.value=null,$(r.current).modal("show")};return a.jsxs(a.Fragment,{children:[a.jsx(m,{gridRef:e,title:"Categorías",rest:b,toolBar:a=>{a.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(e.current).dxDataGrid("instance").refresh()}}),a.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Nuevo registro",hint:"Nuevo registro",onClick:()=>w()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"name",caption:"Categoría",width:"30%"},{dataField:"description",caption:"Descripción",width:"50%"},u.has("blog_categories","image")&&{dataField:"image",caption:"Imagen",width:"90px",allowFiltering:!1,cellTemplate:(e,{data:t})=>{f(e,a.jsx("img",{src:`/storage/images/blog_category/${t.image}`,style:{width:"80px",height:"48px",objectFit:"cover",objectPosition:"center",borderRadius:"4px"},onError:e=>e.target.src="/api/cover/thumbnail/null"}))}},u.has("blog_categories","banner")&&{dataField:"banner",caption:"Banner",width:"90px",allowFiltering:!1,cellTemplate:(e,{data:t})=>{f(e,a.jsx("img",{src:`/storage/images/category/${t.banner}`,style:{width:"80px",height:"48px",objectFit:"cover",objectPosition:"center",borderRadius:"4px"},onError:e=>e.target.src="/api/cover/thumbnail/null"}))}},{dataField:"featured",caption:"Destacado",dataType:"boolean",cellTemplate:(t,{data:r})=>{$(t).empty(),f(t,a.jsx(i,{checked:1==r.featured,onChange:()=>(async({id:a,value:t})=>{await b.boolean({id:a,field:"featured",value:t})&&$(e.current).dxDataGrid("instance").refresh()})({id:r.id,value:!r.featured})}))}},{dataField:"visible",caption:"Visible",dataType:"boolean",cellTemplate:(t,{data:r})=>{$(t).empty(),f(t,a.jsx(i,{checked:1==r.visible,onChange:()=>(async({id:a,value:t})=>{await b.boolean({id:a,field:"visible",value:t})&&$(e.current).dxDataGrid("instance").refresh()})({id:r.id,value:!r.visible})}))}},{caption:"Acciones",cellTemplate:(a,{data:t})=>{a.css("text-overflow","unset"),a.append(g({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>w(t)})),a.append(g({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>(async a=>{const{isConfirmed:t}=await s.fire({title:"Eliminar registro",text:"¿Estas seguro de eliminar este registro?",icon:"warning",showCancelButton:!0,confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"});if(!t)return;await b.delete(a)&&$(e.current).dxDataGrid("instance").refresh()})(t.id)}))},allowFiltering:!1,allowExporting:!1}]}),a.jsxs(d,{modalRef:r,title:v?"Editar categoría":"Agregar categoría",onSubmit:async a=>{a.preventDefault();const t={id:n.current.value||void 0,name:p.current.value,description:h.current.value},i=new FormData;for(const e in t)i.append(e,t[e]);const o=x.current.files[0];o&&i.append("image",o);const s=j.current.files[0];s&&i.append("banner",s),j.getDeleteFlag&&j.getDeleteFlag()&&i.append("banner_delete","DELETE"),x.getDeleteFlag&&x.getDeleteFlag()&&i.append("image_delete","DELETE");await b.save(i)&&(j.resetDeleteFlag&&j.resetDeleteFlag(),x.resetDeleteFlag&&x.resetDeleteFlag(),$(e.current).dxDataGrid("instance").refresh(),$(r.current).modal("hide"))},children:[a.jsx("input",{ref:n,type:"hidden"}),a.jsxs("div",{className:"row",id:"categories-container",children:[a.jsxs("div",{className:"col-md-6",hidden:!u.has("blog_categories","banner")&&!u.has("blog_categories","image"),children:[a.jsx(l,{eRef:j,name:"banner",label:"Banner",col:"col-12",aspect:3,hidden:!u.has("blog_categories","banner")}),a.jsx(l,{eRef:x,name:"image",label:"Imagen",col:"col-12",aspect:16/9,hidden:!u.has("blog_categories","image")})]}),a.jsxs("div",{className:u.has("blog_categories","banner")||u.has("blog_categories","image")?"col-md-6":"col-md-12",children:[a.jsx(c,{eRef:p,label:"Categoría",rows:2,required:!0}),a.jsx(o,{eRef:h,label:"Descripción",rows:3})]})]})]})]})};p((t,i)=>{e.createRoot(t).render(a.jsx(r,{...i,title:"Categorías",children:a.jsx(h,{...i})}))});
