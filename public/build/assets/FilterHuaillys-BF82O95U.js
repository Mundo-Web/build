import{j as r}from"./AboutSimple-Cf8x2fCZ.js";import{r as c}from"./index-BOnQTV8N.js";import{S as T,a as A}from"./BlogCarousel-DCQ9UYu0.js";import{N as B}from"./navigation-BIDIUzpb.js";import{A as F}from"./autoplay-BjAsSK2h.js";/* empty css               */import"./CategoryInfiniteSlider-C6UMaVwV.js";import"./BlogCarrusel-klwTVD05.js";import{P as V}from"./ProductCardSelector-DS-hLufr.js";import{I as z}from"./ItemsRest-Dp5IKigO.js";import{L as U}from"./Loading-B-FwDSWi.js";import{N as q}from"./NoResult-DlL_OOrq.js";import{m as b}from"./main-B6F2O9-U.js";import{C as G}from"./chevron-left-JcR9Fe4w.js";import{C as M}from"./chevron-right-Cug7tVUE.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./create-element-if-not-defined-DUWlnlug.js";import"./preload-helper-BfFHrpNk.js";import"./BasicRest-BML1C-ua.js";import"./CardProductKatya-ncpmQ0JU.js";import"./index-pSueRYGM.js";import"./index-B6ujFmsw.js";import"./BooleanLimit-D-OsQsek.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./createLucideIcon-DfjclApS.js";const W=new z,fe=({items:m,data:e,cart:N,setCart:_,filteredData:a,setFavorites:k,favorites:P})=>{const g=c.useRef(null),x=c.useRef(null),[u,E]=c.useState([]),[l,j]=c.useState(null),[p,h]=c.useState([]),[S,d]=c.useState(!0),[f,w]=c.useState({category_id:[]});c.useEffect(()=>{if(a!=null&&a.categories&&(console.log("Categories loaded:",a.categories),E(a.categories),b.GET.category&&a.categories.length>0)){const s=a.categories.find(t=>t.slug===b.GET.category||t.id===parseInt(b.GET.category));s&&(console.log("Category from URL:",s),j(s),w(t=>({...t,category_id:[s.id]})))}},[a]);const C=s=>{const t=[];if(s.category_id&&s.category_id.length>0){const o=s.category_id.map(i=>["category.id","=",i]);if(o.length===1)t.push(o[0]);else if(o.length>1){const i=o.reduce((n,y,I)=>I===0?y:[n,"or",y]);t.push(i)}}return t.length>0?t.length===1?t[0]:t.reduce((o,i,n)=>n===0?i:[o,"and",i]):[]},$=async(s=1)=>{d(!0);try{const t=C(f),o=24;console.log("Selected filters:",f),console.log("Transformed filters:",t);const i={filter:t,sort:[{selector:"final_price",desc:!0}],skip:(s-1)*o,take:o,requireTotalCount:!0};console.log("API params:",i);const n=await W.paginate(i);if(console.log("API response:",n),n.status!==200)throw new Error(`API returned status ${n.status}`);h(n.data||[])}catch(t){console.error("Error fetching products:",t),h([])}finally{d(!1)}};c.useEffect(()=>{$()},[f]),c.useEffect(()=>{m&&m.length>0&&p.length===0&&(console.log("Setting initial products from items:",m.length),h(m),d(!1))},[m]);const R=s=>s.split(/(\*.*?\*)/g).map((o,i)=>{if(o.startsWith("*")&&o.endsWith("*")){const n=o.replace(/\*/g,"");return r.jsxs("span",{className:"font-title customtext-primary ",children:[r.jsx("br",{}),n]},i)}return r.jsx("span",{className:"font-title",children:o},i)}),v=s=>{if(console.log("Category clicked:",s),j(s),s===null){w({category_id:[]});const t=new URL(window.location.href);t.searchParams.delete("category"),window.history.pushState({},"",t)}else{w({category_id:[s.id]});const t=new URL(window.location.href);t.searchParams.set("category",s.slug||s.id),window.history.pushState({},"",t)}},L=s=>{window.location.href=`/product/${s.slug}`};return r.jsxs("div",{className:"w-full bg-white font-paragraph",children:[(e==null?void 0:e.background_image)&&r.jsxs("div",{className:"relative w-full h-64 lg:h-72 bg-cover  flex items-center justify-center",style:{backgroundImage:`url(${e.background_image})`,backgroundSize:"cover",backgroundPosition:"center"},children:[r.jsx("div",{className:"absolute inset-0 bg-black/60"}),r.jsxs("div",{className:"relative w-full z-10 text-start px-[5%] 2xl:px-0 2xl:max-w-7xl mx-auto",children:[r.jsx("h1",{className:`text-3xl md:text-5xl font-title lg:text-7xl text-start text-white ${(e==null?void 0:e.class_hero_title)||""}`,children:R((e==null?void 0:e.hero_title)||"Nuestro *CatÃ¡logo*")}),(e==null?void 0:e.hero_subtitle)&&r.jsx("p",{className:`text-lg md:text-xl text-white/90 mt-4 font-paragraph ${(e==null?void 0:e.class_hero_subtitle)||""}`,children:e.hero_subtitle})]})]}),r.jsx("section",{className:"py-8 lg:py-16 bg-secondary",children:r.jsx("div",{className:"w-full px-[5%] 2xl:px-0 2xl:max-w-7xl mx-auto",children:u&&u.length>0&&r.jsxs("div",{className:"relative",children:[r.jsx(T,{modules:[F,B],spaceBetween:16,slidesPerView:1,autoplay:{delay:3e3,disableOnInteraction:!1,pauseOnMouseEnter:!0},navigation:{prevEl:g.current,nextEl:x.current},onBeforeInit:s=>{s.params.navigation.prevEl=g.current,s.params.navigation.nextEl=x.current},loop:u.length>4,speed:800,breakpoints:{640:{slidesPerView:2,spaceBetween:16},768:{slidesPerView:3,spaceBetween:20},1024:{slidesPerView:4,spaceBetween:24}},className:"category-swiper",children:u.map(s=>r.jsx(A,{children:r.jsxs("div",{className:`group cursor-pointer rounded-2xl overflow-hidden hover:shadow-xl transition-all duration-300 h-full my-4 ${(l==null?void 0:l.id)===s.id?`bg-white ${(e==null?void 0:e.class_category_card_selected)||""}`:"bg-white"}`,onClick:()=>v(s),children:[r.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden rounded-t-2xl bg-gray-100",children:[r.jsx("img",{src:`/storage/images/category/${s.image}`,alt:s.name||s.nombre,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",onError:t=>{console.log("Error loading category image:",s),t.target.src="/assets/img/noimage/no_img.jpg"}}),(l==null?void 0:l.id)===s.id&&r.jsx("div",{className:"absolute inset-0 bg-primary/20 flex items-center justify-center",children:r.jsx("div",{className:"w-16 h-16 bg-primary rounded-full flex items-center justify-center",children:r.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})})]}),r.jsxs("div",{className:`p-4 lg:px-6 transition-colors duration-300 rounded-b-2xl ${(l==null?void 0:l.id)===s.id?"bg-primary text-white":"bg-white group-hover:bg-primary group-hover:text-white"}`,children:[r.jsx("h3",{className:`text-lg lg:text-xl font-bold transition-colors duration-300 text-left ${(e==null?void 0:e.class_category_card_title)||""}`,children:s.name||s.nombre}),(s.description||s.descripcion)&&r.jsx("p",{className:`text-sm font-paragraph text-left mt-2 line-clamp-2 opacity-90 ${(e==null?void 0:e.class_category_card_description)||""}`,children:s.description||s.descripcion})]})]})},s.id))}),r.jsx("button",{ref:g,className:"absolute left-0 top-1/2 -translate-y-1/2 z-10 w-10 h-10 lg:w-12 lg:h-12 flex items-center justify-center rounded-full bg-white shadow-lg hover:bg-primary hover:text-white transition-all duration-300 -ml-5 lg:-ml-6 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Anterior",children:r.jsx(G,{className:"w-5 h-5 lg:w-6 lg:h-6"})}),r.jsx("button",{ref:x,className:"absolute right-0 top-1/2 -translate-y-1/2 z-10 w-10 h-10 lg:w-12 lg:h-12 flex items-center justify-center rounded-full bg-white shadow-lg hover:bg-primary hover:text-white transition-all duration-300 -mr-5 lg:-mr-6 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Siguiente",children:r.jsx(M,{className:"w-5 h-5 lg:w-6 lg:h-6"})})]})})}),r.jsx("section",{className:"py-8 lg:py-16 bg-white",children:r.jsxs("div",{className:"w-full px-[5%] 2xl:px-0 2xl:max-w-7xl mx-auto",children:[r.jsx("div",{className:"flex mb-8  w-full flex-col gap-6 lg:flex-row justify-between items-center",children:r.jsxs("div",{className:"text-left",children:[r.jsx("h2",{className:`text-3xl lg:text-5xl customtext-neutral-dark font-title mb-3  tracking-wide ${(e==null?void 0:e.class_product_title)||""}`,children:(e==null?void 0:e.product_title)||"Pide todo lo que quieras y comparte"}),(e==null?void 0:e.product_description)&&r.jsx("p",{className:`customtext-neutral-dark font-paragraph text-base ${(e==null?void 0:e.class_product_description)||""}`,children:e.product_description}),l&&r.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[r.jsx("span",{className:"text-sm customtext-neutral-light",children:"Mostrando:"}),r.jsx("span",{className:"bg-primary text-white px-4 py-2 rounded-full font-bold text-sm",children:l.name||l.nombre}),r.jsx("button",{onClick:()=>v(null),className:"text-sm text-gray-500 hover:text-primary transition-colors underline",children:"Ver todos"})]})]})}),S?r.jsx(U,{}):p&&p.length>0?r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 lg:gap-6",children:p.map(s=>r.jsx(V,{cardType:(e==null?void 0:e.type_card_product)||"ProductCard",product:s,data:e,cart:N,setCart:_,favorites:P,setFavorites:k,handleProductClick:L},s.id))}):r.jsx(q,{})]})})]})};export{fe as default};
