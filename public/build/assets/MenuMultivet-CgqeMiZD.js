import{r as e,j as t,K as s,N as a,C as r,bN as o,bb as l,X as i,J as n}from"./vendor-react-CtPXetfm.js";import"./Footer-coriRrmf.js";import{t as c}from"./MobileMenu-D1i5uXb9.js";import{B as d}from"./BasicRest-DtgqEuc9.js";import m from"./CardProductMultivet-CcAVOvUd.js";import"./vendor-swiper-Cr_RrIb_.js";import"./OpenPayCardModal-CbSnHq7o.js";import"./BooleanLimit-q2Ad9fGY.js";const u=({pages:u=[],items:g,data:h,visible:x=!1})=>{const[p,f]=e.useState(!1),[b,v]=e.useState([]),[j,y]=e.useState(0),[w,N]=e.useState([]),[_,k]=e.useState(!1),$=e.useRef(null);e.useEffect(()=>{function e(e){$.current&&!$.current.contains(e.target)&&f(!1)}return document.addEventListener("pointerdown",e),()=>document.removeEventListener("pointerdown",e)},[]),e.useEffect(()=>{if(p&&window.innerWidth>=1024){const e=window.scrollY,t=window.innerWidth-document.documentElement.clientWidth;return document.documentElement.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top=`-${e}px`,document.body.style.left="0",document.body.style.right="0",document.body.style.width="100%",document.body.style.overflow="hidden",t>0&&(document.body.style.paddingRight=`${t}px`),()=>{document.documentElement.style.overflow="",document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.width="",document.body.style.overflow="",document.body.style.paddingRight="",window.scrollTo(0,e)}}},[p]),e.useEffect(()=>{(async()=>{try{const e=await c.getTags();if(e?.data){const t=e.data.filter(e=>"permanent"===e.promotional_status||"active"===e.promotional_status&&"1"===e.menu||1===e.menu).sort((e,t)=>"active"===e.promotional_status&&"active"!==t.promotional_status?-1:"active"===t.promotional_status&&"active"!==e.promotional_status?1:e.name.localeCompare(t.name));v(t);const s=t.filter(e=>"active"===e.promotional_status).length;t.filter(e=>"permanent"===e.promotional_status).length;if(s>0){t.filter(e=>"active"===e.promotional_status)}}}catch(e){}})()},[]),e.useEffect(()=>{if(b.length>2&&window.innerWidth<1024){const e=setInterval(()=>{y(e=>{const t=e+2;return t>=b.length?0:t})},3e3);return()=>clearInterval(e)}},[b.length]),e.useEffect(()=>{(async()=>{k(!0);try{const e=new d;e.path="items",e.is_use_notify=!1;const t=await e.paginate({take:3,skip:0,filter:[["status","=",1],"and",["featured","=",1]],sort:[{selector:"created_at",desc:!0}],requireTotalCount:!1,with:"category,brand"});200===t?.status&&Array.isArray(t.data)&&N(t.data)}catch(e){}finally{k(!1)}})()},[]);const C=window.innerWidth<1024,E=!C||x&&b.length>0,M=b.length>0&&C&&x;return E?t.jsxs(t.Fragment,{children:[p&&t.jsx("div",{className:"fixed inset-0 bg-black/40 z-40",style:{top:$.current?$.current.offsetTop+$.current.offsetHeight:"0"},onClick:()=>f(!1)}),t.jsx("nav",{id:h?.element_id||null,className:`${M?" block w-full relative md:block  font-paragraph text-sm":" relative w-full md:block  font-paragraph text-sm"} ${h?.class_container||"bg-white customtext-neutral"}`,ref:$,children:t.jsx("div",{className:"px-primary  2xl:px-0 2xl:max-w-7xl mx-auto",children:t.jsx("ul",{className:"flex items-center gap-4 lg:gap-6 text-sm justify-between",children:M?t.jsx("div",{className:"w-full py-3 px-4",children:t.jsxs("div",{className:"relative",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-3 h-10",children:[b.slice(j,j+2).map((e,a)=>{const r=j+a;return t.jsxs("a",{href:`/catalogo?tag=${e.id}`,className:"group relative border-white border-2 overflow-hidden rounded-full shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-[1.02]",style:{background:`linear-gradient(135deg, ${e.background_color||"#3b82f6"}, ${e.background_color||"#3b82f6"}dd)`},children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent"}),t.jsx("div",{className:"relative h-full flex items-center justify-center p-3",children:t.jsxs("div",{className:"flex items-center gap-2 text-center",children:[e.icon?t.jsx("img",{src:`/storage/images/tag/${e.icon}`,alt:e.name,className:"w-6 h-6 object-contain filter brightness-0 invert",onError:e=>e.target.src="/api/cover/thumbnail/null"}):t.jsx(s,{size:20,style:{color:e.text_color||"#ffffff"}}),t.jsx("span",{className:"text-xs font-semibold leading-tight",style:{color:e.text_color||"#ffffff"},children:e.name})]})}),t.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-all duration-300"})]},`${e.id}-${r}`)}),b.slice(j,j+2).length<2&&t.jsx("div",{className:"rounded-2xl bg-white/10 flex items-center justify-center",children:t.jsx("div",{className:"text-white/50 text-xs",children:"M치s pr칩ximamente"})})]}),b.length>2&&t.jsx("div",{className:"flex justify-center mt-2 gap-1",children:Array.from({length:Math.ceil(b.length/2)}).map((e,s)=>t.jsx("button",{onClick:()=>y(2*s),className:"w-2 h-2 rounded-full transition-all duration-300 "+(Math.floor(j/2)===s?"bg-primary shadow-lg":"bg-neutral-light hover:bg-white/60")},s))})]})}):t.jsxs(t.Fragment,{children:[t.jsxs("ul",{className:"flex items-center gap-4 lg:gap-6 text-base",children:[h?.showCategories&&t.jsxs("li",{className:"relative py-3",children:[t.jsxs("button",{className:"font-semibold  flex items-center gap-2  pr-6 transition-colors duration-300 relative  ",onClick:()=>f(!p),children:["Categor칤as",p?t.jsx(a,{size:20}):t.jsx(r,{size:20})]}),p&&t.jsx("div",{className:"absolute z-50 top-14 left-0 bg-white shadow-2xl border border-gray-100 rounded-2xl transition-all duration-500 ease-in-out w-[90vw] max-w-6xl overflow-hidden",children:t.jsxs("div",{className:"max-h-[calc(100vh-13rem)] overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:[t.jsx("div",{className:"bg-gray-50 p-6 border-b border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-12 h-12 bg-primary text-white rounded-full flex items-center justify-center shadow-lg",children:"paw"===h?.icon?t.jsx(o,{}):"tag"===h?.icon?t.jsx(s,{}):"list"===h?.icon?t.jsx(l,{}):t.jsx(o,{})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-2xl font-title font-bold customtext-primary mb-1",children:"Categor칤as"}),t.jsx("p",{className:"",children:h?.description||"Encuentra todo lo que necesitas para el cuidado de tu mascota"})]})]}),t.jsx("button",{onClick:()=>f(!1),className:"p-2 customtext-primary hover:bg-gray-100 rounded-full transition-colors",children:t.jsx(i,{})})]})}),t.jsxs("div",{className:"p-6",children:[t.jsx("div",{className:"mb-8",children:t.jsx("div",{className:"swiper-container relative ",children:t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...g].sort((e,t)=>"order_index"===h?.type_order?(e.order_index||0)-(t.order_index||0):e.name.localeCompare(t.name)).map((e,s)=>t.jsxs("div",{className:"group",children:[t.jsxs("a",{href:`/catalogo?category=${e.slug}`,className:"group block relative h-48 rounded-xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:scale-105 mb-4",children:[t.jsx("div",{className:"absolute inset-0 overflow-hidden rounded-xl",children:t.jsx("img",{src:`/storage/images/category/${e.image}`,alt:e.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500",onError:e=>e.target.src="/api/cover/thumbnail/null"})}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/50 to-transparent group-hover:from-black/60 transition-all duration-300"}),t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsx("h3",{className:`bg-accent rounded-full text-sm font-bold text-center px-4 py-2 transform group-hover:scale-110 transition-transform duration-300 drop-shadow-lg ${h?.class_badge_category||""}`,children:e.name})})]}),e.subcategories&&e.subcategories.length>0&&t.jsx("div",{className:"space-y-2",children:t.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[[...e.subcategories].sort((e,t)=>"order_index"===h?.type_order?(e.order_index||0)-(t.order_index||0):e.name.localeCompare(t.name)).slice(0,3).map((e,s)=>t.jsxs("a",{href:`/catalogo?subcategory=${e.slug}`,className:"flex items-center gap-3 p-3 rounded-lg border border-gray-200 hover:border-primary hover:bg-primary/5 transition-all duration-300 group",children:[t.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden flex-shrink-0",children:t.jsx("img",{src:`/storage/images/sub_category/${e.image}`,alt:e.name,className:"w-full h-full object-cover",onError:e=>e.target.src="/api/cover/thumbnail/null"})}),t.jsx("div",{className:"flex-1",children:t.jsx("span",{className:"text-sm font-medium  group- transition-colors duration-300",children:e.name})}),t.jsx(n,{className:"w-4 h-4 customtext-neutral opacity-0 group-hover:opacity-100 group-hover:translate-x-1 transition-all duration-300"})]},s)),e.subcategories.length>3&&t.jsxs("a",{href:`/catalogo?category=${e.slug}`,className:"text-center p-2 text-sm customtext-primary  font-medium border border-dashed border-primary/30 rounded-lg hover:bg-primary/5 transition-all duration-300",children:["Ver ",e.subcategories.length-3," m치s..."]})]})})]},s))})})}),w.length>0&&t.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[t.jsx("h4",{className:"text-2xl mb-8 font-title font-bold customtext-primary ",children:"Productos Destacados"}),_?t.jsx("div",{className:"flex items-center justify-center py-8",children:t.jsxs("div",{className:"flex items-center gap-2 ",children:[t.jsx("div",{className:"w-6 h-6 border-2 border-pink-400 border-t-transparent rounded-full animate-spin"}),t.jsx("span",{children:"Cargando productos destacados..."})]})}):w.length>0?t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:w.map(e=>t.jsx(m,{product:e,data:h},e.id))}):t.jsxs("div",{className:"text-center py-8 ",children:[t.jsx("div",{className:"text-4xl mb-2",children:"游꾸"}),t.jsx("p",{children:"No hay productos destacados disponibles"})]})]})]})]})})]}),u.filter(e=>e.menuable).map((e,s,a)=>t.jsx("li",{className:"py-3",children:t.jsx("a",{href:e.path,className:"font-semibold   cursor-pointer transition-all duration-300",children:e.name})},s))]}),b.length>0&&t.jsx("div",{className:"flex items-center gap-4 lg:gap-4 text-sm",children:b.map((e,s)=>t.jsx("li",{className:"",children:t.jsxs("a",{href:`/catalogo?tag=${e.id}`,className:"font-medium rounded-full p-2 hover:brightness-105 cursor-pointer transition-all duration-300 relative flex items-center gap-2",style:{backgroundColor:e.background_color||"#3b82f6",color:e.text_color||"#ffffff"},title:e.description||e.name,children:[e.icon&&t.jsx("img",{src:`/storage/images/tag/${e.icon}`,alt:e.name,className:"w-4 h-4",onError:e=>e.target.src="/api/cover/thumbnail/null"}),e.name]})},e.id))})]})})})})]}):null};export{u as default};
