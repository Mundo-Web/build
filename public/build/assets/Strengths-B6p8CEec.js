var e=Object.defineProperty,a=(a,s,t)=>((a,s,t)=>s in a?e(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t)(a,"symbol"!=typeof s?s+"":s,t);import{c as s,j as t,r}from"./vendor-react-CZUvQwNQ.js";import{B as i}from"./Base-C0wMu-P3.js";import{S as l}from"./SwitchFormGroup-CA4b2Uj0.js";import{T as n}from"./TextareaFormGroup-dfKTDx8M.js";import{S as o}from"./CartKuchara-C7vqSevl.js";import{B as c}from"./BasicRest-BMJgRso_.js";import{B as d}from"./BasicEditing-BCg7nE-w.js";import{I as m}from"./InputFormGroup-BuXn3s3l.js";import{M as p}from"./Modal-MmI0jF6v.js";import{T as h}from"./Table-B5gvhzpg.js";import{D as g}from"./DxButton-C6FT_beP.js";import{C as x,F as f}from"./CreateReactScript-CPSgwmJG.js";import{R as u}from"./ReactAppend-Db2K6xCH.js";import{I as b}from"./ImageFormGroup-DlJufE2S.js";import"./vendor-swiper-Cr_RrIb_.js";import"./Footer-B_HfpgRC.js";import"./TippyButton-Gia9IjJq.js";import"./Logout-D6byb_Ua.js";import"./MenuItemContainer-BaCqn8PU.js";import"./Menu-EkCXeLHq.js";import"./OpenPayCardModal-BHkRoVZ6.js";import"./BooleanLimit-q2Ad9fGY.js";import"./ArrayDetails2Object-BtdyATqd.js";import"./em-D8U_Sxjb.js";import"./HtmlContent-DI-wF5u8.js";import"./WebDetailsRest-D9dWQLpR.js";import"./General-ClVW7qxN.js";import"./LaravelSession-ByQnaUD3.js";const j=new class extends c{constructor(){super(...arguments),a(this,"path","admin/strengths"),a(this,"hasFiles",!0)}},v=({details:e})=>{const a=r.useRef(),s=r.useRef(),i=r.useRef(),c=r.useRef(),x=r.useRef(),v=r.useRef(),N=r.useRef(),[y,w]=r.useState(!1),[F,k]=r.useState(!1),[C,R]=r.useState("#71b6f9"),D=e=>{if(w(!!e?.id),i.current.value=e?.id??"",f.has("strengths","name")&&(c.current.value=e?.name??""),f.has("strengths","description")&&(x.current.value=e?.description??""),f.has("strengths","bg_color")){const a=e?.bg_color??"transparent";"transparent"!==a&&""!==a?(k(!0),R(a.startsWith("#")?a:"#71b6f9")):(k(!1),R("#71b6f9"))}f.has("strengths","image")&&v.current&&v.image&&(v.current.value=null,v.image.src=e?.image?`/storage/images/strength/${e.image}`:""),v.resetDeleteFlag&&v.resetDeleteFlag(),$(s.current).modal("show")};return t.jsxs(t.Fragment,{children:[t.jsx(h,{gridRef:a,title:t.jsx(d,{correlative:"values",details:e}),rest:j,toolBar:e=>{e.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(a.current).dxDataGrid("instance").refresh()}}),e.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Nuevo registro",hint:"Nuevo registro",onClick:()=>D()}})},rowDragging:{allowReordering:!0,onReorder:async e=>{const a=e.toIndex;try{await j.reorder(e.itemData.id,a)&&await e.component.refresh()}catch(s){}},dropFeedbackMode:"push"},sorting:{mode:"single"},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"order_index",caption:"Orden",visible:!1,sortOrder:"asc",sortIndex:0},f.has("strengths","name")&&{dataField:"name",caption:"Fortaleza",width:"30%"},f.has("strengths","description")&&{dataField:"description",caption:"Descripción",width:"50%"},f.has("strengths","image")&&{dataField:"image",caption:"Imagen",cellTemplate:(e,{data:a})=>{const s=a.image?`/storage/images/strength/${a.image}`:"/api/cover/thumbnail/null",r=a.bg_color||"transparent";u(e,t.jsx("div",{style:{width:"80px",height:"80px",backgroundColor:r,borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",padding:"4px"},children:t.jsx("img",{src:s,style:{width:"100%",height:"100%",objectFit:"contain"},onError:e=>e.target.src="/api/cover/thumbnail/null"})}))}},f.has("strengths","visible")&&{dataField:"visible",caption:"Visible",dataType:"boolean",cellTemplate:(e,{data:s})=>{$(e).empty(),u(e,t.jsx(l,{checked:1==s.visible,onChange:()=>(async({id:e,value:s})=>{await j.boolean({id:e,field:"visible",value:s})&&$(a.current).dxDataGrid("instance").refresh()})({id:s.id,value:!s.visible})}))}},{caption:"Acciones",cellTemplate:(e,{data:s})=>{e.css("text-overflow","unset"),e.append(g({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>D(s)})),e.append(g({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>(async e=>{const{isConfirmed:s}=await o.fire({title:"Eliminar registro",text:"¿Estas seguro de eliminar este registro?",icon:"warning",showCancelButton:!0,confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"});if(!s)return;await j.delete(e)&&$(a.current).dxDataGrid("instance").refresh()})(s.id)}))},allowFiltering:!1,allowExporting:!1}]}),t.jsxs(p,{modalRef:s,title:y?"Editar fortaleza":"Agregar fortaleza",onSubmit:async e=>{e.preventDefault();const t={id:i.current.value||void 0};f.has("strengths","name")&&(t.name=c.current.value),f.has("strengths","description")&&(t.description=x.current.value),f.has("strengths","bg_color")&&(t.bg_color=F?C:"transparent");const r=new FormData;for(const a in t)r.append(a,t[a]);if(v.current&&f.has("strengths","image")){const e=v.current.files[0];e&&r.append("image",e),v.getDeleteFlag&&v.getDeleteFlag()&&r.append("image_delete","DELETE")}await j.save(r)&&(v.resetDeleteFlag&&v.resetDeleteFlag(),$(a.current).dxDataGrid("instance").refresh(),$(s.current).modal("hide"))},size:"lg",children:[t.jsx("input",{ref:i,type:"hidden"}),t.jsxs("div",{id:"strengths-container",children:[t.jsxs("ul",{className:"nav nav-pills nav-justified mb-4",role:"tablist",style:{backgroundColor:"#f8f9fa",borderRadius:"8px",padding:"4px",border:"1px solid #e9ecef"},children:[t.jsx("li",{className:"nav-item",role:"presentation",children:t.jsxs("button",{className:"nav-link active",id:"basic-info-tab","data-bs-toggle":"pill","data-bs-target":"#basic-info",type:"button",role:"tab","aria-controls":"basic-info","aria-selected":"true",style:{borderRadius:"6px",fontWeight:"500",transition:"all 0.3s ease"},children:[t.jsx("i",{className:"fas fa-info-circle me-2"}),"Información Básica"]})}),f.has("strengths","image")&&t.jsx("li",{className:"nav-item",role:"presentation",children:t.jsxs("button",{className:"nav-link",id:"multimedia-tab","data-bs-toggle":"pill","data-bs-target":"#multimedia",type:"button",role:"tab","aria-controls":"multimedia","aria-selected":"false",style:{borderRadius:"6px",fontWeight:"500",transition:"all 0.3s ease"},children:[t.jsx("i",{className:"fas fa-image me-2"}),"Multimedia"]})})]}),t.jsxs("div",{className:"tab-content",children:[t.jsx("div",{className:"tab-pane fade show active",id:"basic-info",role:"tabpanel","aria-labelledby":"basic-info-tab",children:t.jsx("div",{className:"row g-3",children:t.jsx("div",{className:"col-12",children:t.jsxs("div",{className:"card border-0 shadow-sm",children:[t.jsx("div",{className:"card-header bg-light",children:t.jsxs("h6",{className:"mb-0",children:[t.jsx("i",{className:"fas fa-tag me-2 text-primary"}),"Información de la Fortaleza"]})}),t.jsx("div",{className:"card-body",children:t.jsxs("div",{className:"row",children:[f.has("strengths","name")&&t.jsx("div",{className:"col-12",children:t.jsx(m,{eRef:c,label:"Fortaleza",col:"col-12",required:!0,placeholder:"Ej: Experiencia"})}),f.has("strengths","description")&&t.jsx("div",{className:"col-12",children:t.jsx(n,{eRef:x,label:"Descripción",rows:3,placeholder:"Descripción de la fortaleza"})})]})})]})})})}),f.has("strengths","image")&&t.jsx("div",{className:"tab-pane fade",id:"multimedia",role:"tabpanel","aria-labelledby":"multimedia-tab",children:t.jsxs("div",{className:"row g-3",children:[t.jsx("div",{className:"col-6",children:t.jsxs("div",{className:"card border-0 shadow-sm",children:[t.jsx("div",{className:"card-header bg-light",children:t.jsxs("h6",{className:"mb-0",children:[t.jsx("i",{className:"fas fa-image me-2 text-primary"}),"Imagen de la Fortaleza"]})}),t.jsxs("div",{className:"card-body",children:[t.jsx(b,{eRef:v,name:"image",label:"Imagen",col:"col-12",aspect:"1/1",required:!y}),t.jsxs("small",{className:"text-muted d-block mt-2",children:[t.jsx("i",{className:"mdi mdi-information me-1"}),"Recomendado: 100x100px (1:1)"]})]})]})}),f.has("strengths","bg_color")&&t.jsx("div",{className:"col-6",children:t.jsxs("div",{className:"card border-0 shadow-sm",children:[t.jsx("div",{className:"card-header bg-light",children:t.jsxs("h6",{className:"mb-0",children:[t.jsx("i",{className:"fas fa-palette me-2 text-warning"}),"Color de Fondo del Icono"]})}),t.jsxs("div",{className:"card-body",children:[t.jsxs("div",{className:"form-check form-switch mb-3",children:[t.jsx("input",{className:"form-check-input",type:"checkbox",id:"useBackgroundToggle",checked:F,onChange:e=>k(e.target.checked)}),t.jsx("label",{className:"form-check-label fw-semibold",htmlFor:"useBackgroundToggle",children:"Activar color de fondo personalizado"})]}),F&&t.jsx("div",{className:"row g-4",children:t.jsx("div",{className:"col-md-12",children:t.jsx("div",{className:"row g-3",children:t.jsxs("div",{className:"col-12",children:[t.jsxs("label",{className:"form-label fw-semibold mb-3",children:[t.jsx("i",{className:"fas fa-palette me-2 text-primary"}),"Selector de Color"]}),t.jsxs("div",{className:"d-flex gap-3 align-items-start",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("input",{ref:N,type:"color",value:C,onChange:e=>R(e.target.value),style:{width:"100px",height:"100px",cursor:"pointer",border:"3px solid #dee2e6",borderRadius:"12px",display:"block",padding:"0",backgroundColor:"transparent",WebkitAppearance:"none",MozAppearance:"none",appearance:"none"},title:"Click para seleccionar color"}),t.jsxs("small",{className:"text-muted d-block mt-2",children:[t.jsx("i",{className:"fas fa-hand-pointer me-1"}),"Click aquí"]})]}),t.jsxs("div",{className:"flex-grow-1",children:[t.jsxs("label",{className:"form-label small text-muted mb-2",children:[t.jsx("i",{className:"fas fa-code me-1"}),"Código Hexadecimal"]}),t.jsx("input",{type:"text",className:"form-control form-control-lg",value:C,onChange:e=>R(e.target.value),placeholder:"#71b6f9",style:{fontFamily:"monospace",fontSize:"1.1rem",letterSpacing:"1px",fontWeight:"600"}}),t.jsxs("small",{className:"text-muted d-block mt-2",children:[t.jsx("i",{className:"mdi mdi-information-outline me-1"}),"También puedes escribir el código manualmente"]})]})]})]})})})}),!F&&t.jsxs("div",{className:"alert alert-secondary mb-0 py-2",style:{fontSize:"0.875rem"},children:[t.jsx("i",{className:"mdi mdi-check-circle me-2"}),"El icono se mostrará sin color de fondo (transparente)"]})]})]})})]})})]})]})]})]})};x((e,a)=>{s.createRoot(e).render(t.jsx(i,{...a,title:"Fortalezas",children:t.jsx(v,{...a})}))});
