var fe=Object.defineProperty;var ue=(t,a,m)=>a in t?fe(t,a,{enumerable:!0,configurable:!0,writable:!0,value:m}):t[a]=m;var z=(t,a,m)=>ue(t,typeof a!="symbol"?a+"":a,m);import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as l}from"./index-BOnQTV8N.js";import{c as ge}from"./ReactAppend-QR5TrZfj.js";import{s as o}from"./server.browser-Bf4gQIc7.js";import{D as be}from"./DeliveryPricesRest-Dr3vM_Yk.js";import"./main-B6F2O9-U.js";import{B as je}from"./BasicRest-BML1C-ua.js";import{S as Ne}from"./StoresRest-Bb6TODpG.js";import{C as ve}from"./CreateReactScript-DtrvZKkE.js";import{S as ye}from"./ProductCard-D_AgkLlk.js";import{B as ke}from"./Base-CYAbdAMI.js";import{D as O}from"./DxButton-CsjWvhyj.js";import{M as q}from"./Modal-BYL-UsqM.js";import{T as re}from"./Table-BCyay2bJ.js";import{I as N}from"./InputFormGroup-iZIO11ZN.js";import{S as we}from"./SelectFormGroup-X8WqJHHl.js";import{C as M,N as U}from"./Number2Currency-D9Rjvh76.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./index-B6ujFmsw.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./CardProductKatya-ncpmQ0JU.js";import"./index-pSueRYGM.js";import"./BooleanLimit-D-OsQsek.js";import"./index.esm-D6GvEWn_.js";import"./index-BQJyKPGC.js";import"./Global-CazroCzF.js";/* empty css               *//* empty css              */import"./General-BmbBKdsB.js";import"./LaravelSession-Dz9cpV3l.js";import"./CanAccess-DgL4m2bH.js";import"./tippy-react.esm-DmkRJDEW.js";import"./Logout-BpuTJ_83.js";import"./MenuItemContainer-DwXwpKCn.js";class _e extends je{constructor(){super(...arguments);z(this,"path","admin/types_delivery");z(this,"hasFiles",!0)}}const S=new be,ie=new _e,Se=new Ne,Re=({ubigeo:t=[]})=>{const a=l.useRef(),m=l.useRef(),R=l.useRef(),V=l.useRef(),C=l.useRef(),E=l.useRef(),v=l.useRef(),y=l.useRef(),T=l.useRef(),F=l.useRef(),D=l.useRef(),A=l.useRef(),k=l.useRef(),w=l.useRef(),[H,J]=l.useState(!1),[le,L]=l.useState(!1),[Ce,Ee]=l.useState(!1),[b,K]=l.useState(!1),[x,Q]=l.useState(!1),[j,W]=l.useState(!1),[f,X]=l.useState(!1),[p,Y]=l.useState(!1),[Te,Fe]=l.useState([]),[_,B]=l.useState([]),[d,u]=l.useState([]),Z=s=>{console.log(s),s!=null&&s.id?J(!0):J(!1),u([]),E.current.value=(s==null?void 0:s.id)??"",$(v.current).val((s==null?void 0:s.ubigeo)??null).trigger("change");const r=(s==null?void 0:s.price)&&parseFloat(s.price)>0,i=(s==null?void 0:s.express_price)&&parseFloat(s.express_price)>0;s!=null&&s.agency_price&&parseFloat(s.agency_price)>0,K(r||!(s!=null&&s.id)),Q(i),W((s==null?void 0:s.is_free)??!1),X((s==null?void 0:s.is_agency)??!1),Y((s==null?void 0:s.is_store_pickup)??!1),T.current&&(T.current.checked=(s==null?void 0:s.is_free)??!1),F.current&&(F.current.checked=(s==null?void 0:s.is_express)??!1),D.current&&(D.current.checked=(s==null?void 0:s.is_agency)??!1),A.current&&(A.current.checked=(s==null?void 0:s.is_store_pickup)??!1),y.current&&(y.current.value=(s==null?void 0:s.price)??0),k.current&&(k.current.value=(s==null?void 0:s.express_price)??0),w.current&&(w.current.value=(s==null?void 0:s.agency_price)??0),s!=null&&s.is_store_pickup&&(ee(),s!=null&&s.selected_stores&&Array.isArray(s.selected_stores)&&u(s.selected_stores)),$(R.current).modal("show")},ee=async()=>{try{const s=await Se.paginate({page:1,per_page:100,filters:JSON.stringify([{field:"status",operator:"=",value:1}])});console.log("Cargando todas las tiendas disponibles:",s),s&&s.data&&Array.isArray(s.data)?B(s.data):B([])}catch(s){console.error("Error loading stores:",s),B([])}},ae=async s=>{s.preventDefault();const r=t.find(n=>n.reniec==v.current.value),i={id:E.current.value||void 0,name:`${r.distrito}, ${r.provincia} - ${r.departamento}`.toTitleCase(),price:b&&y.current.value||0,is_free:j,is_express:x,is_agency:f,is_store_pickup:p,express_price:x&&k.current.value||0,agency_price:f&&w.current.value||0,ubigeo:v.current.value,selected_stores:p&&d.length>0?d:null};console.log("Datos a enviar:",i),await S.save(i)&&(u([]),$(a.current).dxDataGrid("instance").refresh(),$(R.current).modal("hide"))},G=l.useRef(),I=l.useRef(),P=l.useRef(),[h,g]=l.useState([{value:""}]),ce=()=>{g([...h,{value:""}])},ne=(s,r)=>{const i=[...h];i[s].value=r,g(i)},te=s=>{if(h.length<=1)return;const r=h.filter((i,c)=>c!==s);g(r)},oe=()=>{$(V.current).modal("show")},me=s=>{s!=null&&s.id?L(!0):L(!1),G.current.value=(s==null?void 0:s.id)??"",I.current.value=(s==null?void 0:s.name)??"",P.current.value=(s==null?void 0:s.description)??"",s!=null&&s.characteristics&&s.characteristics.length>0?g(s.characteristics.map(r=>({value:r}))):g([{value:""}]),$(C.current).modal("show")},de=async s=>{s.preventDefault();const r=new FormData;r.append("name",I.current.value),r.append("description",P.current.value),le&&r.append("id",G.current.value);const i=h.map(n=>n.value.trim()).filter(n=>n.length>0);r.append("characteristics",JSON.stringify(i)),await ie.save(r)&&($(m.current).dxDataGrid("instance").refresh(),$(C.current).modal("hide"),g([{value:""}]))},pe=async s=>{const{isConfirmed:r}=await ye.fire({title:"Eliminar registro",text:"¿Estas seguro de eliminar este registro?",icon:"warning",showCancelButton:!0,confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"});!r||!await S.delete(s)||$(a.current).dxDataGrid("instance").refresh()},se=s=>$(o.renderToString(e.jsxs("span",{children:[e.jsx("span",{className:"d-block w-100 text-truncate",children:s.text.replace(s.id,"")}),e.jsxs("small",{className:"d-block",children:["Ubigeo: ",s.id]})]}))),he=async s=>{const r=s.target.files[0];if(!r)return;s.target.value=null;const i=new FormData;i.append("excel",r),await S.upload(i)&&$(a.current).dxDataGrid("instance").refresh()};return e.jsxs(e.Fragment,{children:[e.jsx("input",{id:"file-input",type:"file",accept:".xlsx, .xls",style:{display:"none"},onChange:he}),e.jsx(re,{gridRef:a,title:"Costos de envío",rest:S,exportable:!0,exportableName:"delivery.prices",toolBar:s=>{s.unshift({widget:"dxButton",location:"after",options:{icon:"upload",hint:"Cargar archivo Excel",onClick:()=>document.getElementById("file-input").click()}}),s.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(a.current).dxDataGrid("instance").refresh()}}),s.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Nuevo registro",hint:"Nuevo registro",onClick:()=>Z()}}),s.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",text:"Actualizar datos de Delivery",hint:"Actualizar datos de Delivery",onClick:()=>oe()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"ubigeo",caption:"Ubigeo (RENIEC)",width:"150px"},{dataField:"name",caption:"Envío a",allowExporting:!1,calculateCellValue:s=>s.data&&s.data.distrito?`${s.data.distrito}, ${s.data.provincia} - ${s.data.departamento}`:s.name},{dataField:"is_free",dataType:"string",caption:"Opciones Activas",width:"250px",allowFiltering:!0,calculateFilterExpression:function(s,r){const i=(s||"").toLowerCase();return function(c){const n=[];return c.price&&parseFloat(c.price)>0&&!c.is_free&&n.push("estandar","standard","normal"),(c.is_express||c.express_price&&parseFloat(c.express_price)>0)&&n.push("express","rapido","rápido"),c.is_free&&n.push("gratis","free","gratuito"),c.is_agency&&n.push("agencia","agency","olva","shalom"),c.is_store_pickup&&n.push("tienda","store","retiro","pickup"),n.some(xe=>xe.includes(i))}},cellTemplate:(s,{data:r})=>{const i=[];r.price&&parseFloat(r.price)>0&&!r.is_free&&i.push(e.jsxs("span",{className:"badge bg-primary me-1 mb-1",children:[e.jsx("i",{className:"fas fa-truck me-1"}),"Estándar"]},"standard")),(r.is_express||r.express_price&&parseFloat(r.express_price)>0)&&i.push(e.jsxs("span",{className:"badge bg-warning text-dark me-1 mb-1",children:[e.jsx("i",{className:"fas fa-bolt me-1"}),"Express"]},"express")),r.is_free&&i.push(e.jsxs("span",{className:"badge bg-success me-1 mb-1",children:[e.jsx("i",{className:"fas fa-gift me-1"}),"Gratis"]},"free")),r.is_agency&&i.push(e.jsxs("span",{className:"badge bg-info me-1 mb-1",children:[e.jsx("i",{className:"fas fa-building me-1"}),"Agencia"]},"agency")),r.is_store_pickup&&i.push(e.jsxs("span",{className:"badge bg-primary me-1 mb-1",children:[e.jsx("i",{className:"fas fa-store me-1"}),"Tienda"]},"store")),i.length===0?s.html(o.renderToString(e.jsxs("span",{className:"text-muted font-italic",children:[e.jsx("i",{className:"fas fa-times-circle me-1"}),"Sin opciones"]}))):s.html(o.renderToString(e.jsx("div",{className:"d-flex flex-wrap",children:i})))}},{dataField:"price",caption:"Precios",dataType:"number",width:"200px",cellTemplate:(s,{data:r})=>{const i=[];r.price&&parseFloat(r.price)>0&&i.push(e.jsxs("div",{className:"mb-1",children:[e.jsx("span",{className:"badge bg-primary me-1",children:"Est."}),e.jsxs("strong",{children:[M()," ",U(r.price)]})]},"standard")),r.express_price&&parseFloat(r.express_price)>0&&i.push(e.jsxs("div",{className:"mb-1",children:[e.jsx("span",{className:"badge bg-warning text-dark me-1",children:"Exp."}),e.jsxs("strong",{children:[M()," ",U(r.express_price)]})]},"express")),r.is_agency&&r.agency_price&&i.push(e.jsxs("div",{className:"mb-1",children:[e.jsx("span",{className:"badge bg-info me-1",children:"Age."}),e.jsxs("strong",{children:[M()," ",U(r.agency_price)]})]},"agency")),r.is_free&&i.push(e.jsxs("div",{className:"mb-1",children:[e.jsx("span",{className:"badge bg-success me-1",children:"Free"}),e.jsx("strong",{className:"text-success",children:"GRATIS*"})]},"free")),r.is_store_pickup&&i.push(e.jsxs("div",{className:"mb-1",children:[e.jsx("span",{className:"badge bg-primary me-1",children:"Tienda"}),e.jsx("strong",{className:"text-success",children:"GRATIS"})]},"store")),i.length===0?s.html(o.renderToString(e.jsx("span",{className:"text-muted font-italic",children:"- Sin precios -"}))):s.html(o.renderToString(e.jsxs("div",{className:"d-flex flex-column",children:[i,r.is_free&&e.jsx("small",{className:"text-muted",children:"* Condicional"})]})))}},{dataField:"selected_stores",caption:"Tiendas",width:"200px",cellTemplate:(s,{data:r})=>{r.is_store_pickup||r.is_free?r.selected_stores&&Array.isArray(r.selected_stores)&&r.selected_stores.length>0?s.html(o.renderToString(e.jsx("div",{children:e.jsxs("span",{className:"badge bg-primary",children:[r.selected_stores.length," tienda",r.selected_stores.length>1?"s":""," específica",r.selected_stores.length>1?"s":""]})}))):s.html(o.renderToString(e.jsx("span",{className:"badge bg-success",children:"Todas las tiendas"}))):s.html(o.renderToString(e.jsx("span",{className:"text-muted font-italic",children:"No aplica"})))},allowFiltering:!1,allowExporting:!1},{caption:"Acciones",width:"100px",cellTemplate:(s,{data:r})=>{s.css("text-overflow","unset"),s.append(O({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>Z(r)})),s.append(O({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>pe(r.id)}))},allowFiltering:!1,allowExporting:!1}]}),e.jsxs(q,{modalRef:R,title:H?"Editar Costo de envío":"Agregar Costo de envío",onSubmit:ae,size:"lg",children:[e.jsx("input",{ref:E,type:"hidden"}),e.jsxs("div",{id:"form-container",className:"row",children:[e.jsx(we,{eRef:v,label:"Distrito/Ubigeo",templateResult:se,templateSelection:se,dropdownParent:"#form-container",required:!0,children:t.map((s,r)=>e.jsxs("option",{value:s.reniec,children:[s.reniec," ",s.distrito," ",s.provincia," ",s.departamento]},r))}),e.jsx("div",{className:"col-12 mb-4",children:e.jsx("div",{className:"alert alert-primary border-0 shadow-sm",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"},children:e.jsxs("div",{className:"d-flex align-items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("i",{className:"fas fa-info-circle fa-2x me-3 opacity-75"})}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsxs("h5",{className:"alert-heading mb-2",children:[e.jsx("i",{className:"fas fa-truck me-2"}),"¿Cómo configurar las opciones de delivery?"]}),e.jsxs("p",{className:"mb-2",children:["Selecciona ",e.jsx("strong",{children:"UNA O VARIAS"})," opciones de envío para esta ubicación. Los clientes verán todas las opciones activas en el checkout y podrán elegir la que más les convenga."]}),e.jsx("hr",{className:"my-2",style:{borderColor:"rgba(255,255,255,0.3)"}}),e.jsxs("div",{className:"small",children:[e.jsx("strong",{children:"💡 Ejemplo:"}),' Puedes activar "Delivery Estándar" + "Delivery Express" + "Retiro en Tienda" al mismo tiempo.']})]})]})})}),e.jsx("div",{className:"col-md-6 mb-3",children:e.jsx("div",{className:`card h-100 border-2 ${b?"border-primary shadow-sm":"border-light"}`,children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-start mb-3",children:[e.jsxs("div",{className:"form-check flex-grow-1",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:"enableStandard",checked:b,onChange:s=>K(s.target.checked),style:{width:"1.2em",height:"1.2em"}}),e.jsxs("label",{className:"form-check-label fw-bold ms-2",htmlFor:"enableStandard",style:{fontSize:"1.1rem"},children:[e.jsx("i",{className:"fas fa-truck text-primary me-2"}),"Delivery Estándar"]})]}),b&&e.jsx("span",{className:"badge bg-primary",children:"Activo"})]}),e.jsxs("p",{className:"text-muted small mb-3",children:[e.jsx("i",{className:"fas fa-clock me-1"})," Entrega en 3-5 días hábiles",e.jsx("br",{}),e.jsx("i",{className:"fas fa-box me-1"})," Opción más común para envíos regulares"]}),b&&e.jsxs("div",{className:"mt-3 pt-3 border-top",children:[e.jsx(N,{eRef:y,label:e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-money-bill-wave me-1"})," Costo de envío (S/)"]}),col:"col-12",type:"number",step:.01,placeholder:"Ej: 15.00",required:!0}),e.jsxs("div",{className:"alert alert-light border mb-0",children:[e.jsx("small",{className:"text-muted d-block mb-1",children:e.jsx("strong",{children:"💡 Sugerencia:"})}),e.jsx("small",{className:"text-muted",children:"Este es el precio estándar que pagarán los clientes por envío regular."})]})]})]})})}),e.jsx("div",{className:"col-md-6 mb-3",children:e.jsx("div",{className:`card h-100 border-2 ${x?"border-warning shadow-sm":"border-light"}`,children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-start mb-3",children:[e.jsxs("div",{className:"form-check flex-grow-1",children:[e.jsx("input",{ref:F,className:"form-check-input",type:"checkbox",id:"enableExpress",checked:x,onChange:s=>Q(s.target.checked),style:{width:"1.2em",height:"1.2em"}}),e.jsxs("label",{className:"form-check-label fw-bold ms-2",htmlFor:"enableExpress",style:{fontSize:"1.1rem"},children:[e.jsx("i",{className:"fas fa-bolt text-warning me-2"}),"Delivery Express"]})]}),x&&e.jsx("span",{className:"badge bg-warning text-dark",children:"⚡ Rápido"})]}),e.jsxs("p",{className:"text-muted small mb-3",children:[e.jsx("i",{className:"fas fa-shipping-fast me-1"})," Entrega en 24-48 horas",e.jsx("br",{}),e.jsx("i",{className:"fas fa-star me-1"})," Envío prioritario con costo adicional"]}),x&&e.jsxs("div",{className:"mt-3 pt-3 border-top",children:[e.jsx(N,{eRef:k,label:e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-money-bill-wave me-1"})," Costo express (S/)"]}),col:"col-12",type:"number",step:.01,placeholder:"Ej: 25.00",required:!0}),e.jsxs("div",{className:"alert alert-warning border mb-0",children:[e.jsx("small",{className:"text-dark d-block mb-1",children:e.jsx("strong",{children:"⚡ Importante:"})}),e.jsx("small",{className:"text-dark",children:"Precio premium por entrega rápida. Generalmente mayor que el estándar."})]})]})]})})}),e.jsx("div",{className:"col-md-6 mb-3",children:e.jsx("div",{className:`card h-100 border-2 ${j?"border-success shadow-sm":"border-light"}`,children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-start mb-3",children:[e.jsxs("div",{className:"form-check flex-grow-1",children:[e.jsx("input",{ref:T,className:"form-check-input",type:"checkbox",id:"enableFree",checked:j,onChange:s=>W(s.target.checked),style:{width:"1.2em",height:"1.2em"}}),e.jsxs("label",{className:"form-check-label fw-bold ms-2",htmlFor:"enableFree",style:{fontSize:"1.1rem"},children:[e.jsx("i",{className:"fas fa-gift text-success me-2"}),"Delivery Gratis"]})]}),j&&e.jsx("span",{className:"badge bg-success",children:"🎁 Gratis"})]}),e.jsxs("p",{className:"text-muted small mb-3",children:[e.jsx("i",{className:"fas fa-check-circle me-1"})," Condicional (monto mínimo)",e.jsx("br",{}),e.jsx("i",{className:"fas fa-heart me-1"})," Incentiva compras mayores"]}),j&&e.jsx("div",{className:"alert alert-success border-0 mb-0 mt-3",children:e.jsxs("div",{className:"d-flex align-items-start",children:[e.jsx("i",{className:"fas fa-info-circle me-2 mt-1"}),e.jsxs("div",{children:[e.jsx("strong",{className:"d-block mb-1",children:"¿Cómo funciona?"}),e.jsxs("small",{children:["El envío será ",e.jsx("strong",{children:"GRATIS"})," cuando el cliente alcance el monto mínimo de compra configurado en el sistema."]}),e.jsx("hr",{className:"my-2"}),e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fas fa-cog me-1"})," Configura el monto mínimo en: ",e.jsx("strong",{children:"Configuraciones → General"})]})]})]})})]})})}),e.jsx("div",{className:"col-md-6 mb-3",children:e.jsx("div",{className:`card h-100 border-2 ${f?"border-info shadow-sm":"border-light"}`,children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-start mb-3",children:[e.jsxs("div",{className:"form-check flex-grow-1",children:[e.jsx("input",{ref:D,className:"form-check-input",type:"checkbox",id:"enableAgency",checked:f,onChange:s=>X(s.target.checked),style:{width:"1.2em",height:"1.2em"}}),e.jsxs("label",{className:"form-check-label fw-bold ms-2",htmlFor:"enableAgency",style:{fontSize:"1.1rem"},children:[e.jsx("i",{className:"fas fa-building text-info me-2"}),"Recojo en Agencia"]})]}),f&&e.jsx("span",{className:"badge bg-info",children:"📦 Agencia"})]}),e.jsxs("p",{className:"text-muted small mb-3",children:[e.jsx("i",{className:"fas fa-map-marker-alt me-1"})," Olva, Shalom, Cruz del Sur, etc.",e.jsx("br",{}),e.jsx("i",{className:"fas fa-hand-holding-usd me-1"})," Cliente paga contra entrega"]}),f&&e.jsxs("div",{className:"mt-3 pt-3 border-top",children:[e.jsx(N,{eRef:w,label:e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-money-bill-wave me-1"})," Costo a agencia (S/)"]}),col:"col-12",type:"number",step:.01,placeholder:"Ej: 8.00",required:!0}),e.jsxs("div",{className:"alert alert-info border mb-0",children:[e.jsx("small",{className:"text-dark d-block mb-1",children:e.jsx("strong",{children:"📋 Nota importante:"})}),e.jsx("small",{className:"text-dark",children:"Este costo lo paga el cliente al recoger su pedido en la agencia de transporte."})]})]})]})})}),e.jsx("div",{className:"col-12 mb-3",children:e.jsx("div",{className:`card border-2 ${p?"border-primary shadow-sm":"border-light"}`,children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-start mb-3",children:[e.jsxs("div",{className:"form-check flex-grow-1",children:[e.jsx("input",{ref:A,className:"form-check-input",type:"checkbox",id:"enableStorePickup",checked:p,onChange:s=>{Y(s.target.checked),s.target.checked?ee():u([])},style:{width:"1.2em",height:"1.2em"}}),e.jsxs("label",{className:"form-check-label fw-bold ms-2",htmlFor:"enableStorePickup",style:{fontSize:"1.1rem"},children:[e.jsx("i",{className:"fas fa-store text-primary me-2"}),"Retiro en Tienda"]})]}),p&&e.jsx("span",{className:"badge bg-primary",children:"🏪 Sin costo"})]}),e.jsxs("p",{className:"text-muted small mb-3",children:[e.jsx("i",{className:"fas fa-map-marked-alt me-1"})," Cliente recoge en tienda física",e.jsx("br",{}),e.jsx("i",{className:"fas fa-dollar-sign me-1"})," ",e.jsx("strong",{className:"text-success",children:"Totalmente GRATIS"})," (sin costo de envío)"]}),p&&e.jsx("div",{className:"alert alert-primary border-0 mb-0 mt-3",children:e.jsxs("div",{className:"d-flex align-items-start",children:[e.jsx("i",{className:"fas fa-check-circle me-2 mt-1"}),e.jsxs("div",{children:[e.jsx("strong",{className:"d-block mb-1",children:"Beneficio para el cliente"}),e.jsx("small",{children:"El cliente ahorra el costo de envío recogiendo su pedido directamente en tu tienda."})]})]})})]})})}),p&&e.jsx("div",{className:"col-12 mb-3",children:e.jsxs("div",{className:"card border-0 bg-light",children:[e.jsx("div",{className:"card-header bg-primary text-white",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-store-alt me-2"}),"Selecciona las tiendas disponibles"]})}),e.jsx("div",{className:"card-body",children:_.length>0?e.jsxs("div",{children:[e.jsx("div",{className:"alert alert-info border-0 mb-3",children:e.jsxs("div",{className:"d-flex align-items-start",children:[e.jsx("i",{className:"fas fa-lightbulb fa-lg me-2 mt-1"}),e.jsxs("div",{children:[e.jsx("strong",{className:"d-block mb-2",children:"¿Cómo funciona?"}),e.jsxs("ul",{className:"mb-0 ps-3",children:[e.jsxs("li",{className:"mb-1",children:[e.jsx("strong",{children:"Sin selección:"})," Retiro disponible en ",e.jsx("span",{className:"badge bg-success",children:"TODAS las tiendas"})]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Con selección:"})," Retiro solo en ",e.jsx("span",{className:"badge bg-primary",children:"tiendas marcadas"})]})]})]})]})}),e.jsx("div",{className:"row",children:_.map(s=>e.jsx("div",{className:"col-md-6 mb-3",children:e.jsx("div",{className:`card border ${d.includes(s.id)?"border-primary bg-light":""}`,children:e.jsx("div",{className:"card-body p-3",children:e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:`store_${s.id}`,checked:d.includes(s.id),onChange:r=>{r.target.checked?u([...d,s.id]):u(d.filter(i=>i!==s.id))}}),e.jsx("label",{className:"form-check-label w-100",htmlFor:`store_${s.id}`,children:e.jsxs("div",{className:"d-flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:`/storage/images/stores/${s.image}`,alt:s.name,className:"rounded",style:{width:"40px",height:"40px",objectFit:"cover"},onError:r=>r.target.src="/api/cover/thumbnail/null"})}),e.jsxs("div",{className:"flex-grow-1 ms-3",children:[e.jsx("h6",{className:"mb-1",children:s.name}),e.jsx("small",{className:"text-muted d-block",children:s.address}),s.phone&&e.jsxs("small",{className:"text-muted d-block",children:["📞 ",s.phone]})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("span",{className:`badge ${s.status?"bg-success":"bg-danger"}`,children:s.status?"Activa":"Inactiva"})})]})})]})})})},s.id))}),e.jsx("div",{className:"mt-3 pt-3 border-top",children:e.jsxs("div",{className:"d-flex align-items-center justify-content-between bg-white p-3 rounded border",children:[e.jsx("div",{children:e.jsxs("strong",{className:"text-primary",children:[e.jsx("i",{className:"fas fa-check-circle me-1"}),"Tiendas seleccionadas:"]})}),e.jsx("div",{children:d.length===0?e.jsxs("span",{className:"badge bg-success fs-6",children:[e.jsx("i",{className:"fas fa-store me-1"}),"Todas (",_.length,")"]}):e.jsxs("span",{className:"badge bg-primary fs-6",children:[e.jsx("i",{className:"fas fa-map-marker-alt me-1"}),d.length," de ",_.length]})})]})})]}):e.jsx("div",{className:"alert alert-warning border-0 mb-0",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("i",{className:"fas fa-exclamation-triangle fa-2x me-3"}),e.jsxs("div",{children:[e.jsx("strong",{className:"d-block mb-1",children:"No hay tiendas disponibles"}),e.jsx("small",{children:"No se encontraron tiendas activas en esta ubicación."}),e.jsx("div",{className:"mt-2",children:e.jsxs("a",{href:"/admin/stores",target:"_blank",className:"btn btn-sm btn-warning",children:[e.jsx("i",{className:"fas fa-plus me-1"}),"Administrar tiendas"]})})]})]})})})]})})]})]}),e.jsx(q,{modalRef:V,title:"Tipos de Delivery",size:"lg",children:e.jsx(re,{gridRef:m,title:"Tipos de Delivery",rest:ie,toolBar:s=>{s.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(m.current).dxDataGrid("instance").refresh()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"name",caption:"Nombre",width:"150px",allowExporting:!1},{dataField:"description",caption:"Descripción",width:"300px",cellTemplate:(s,{data:r})=>{s.html(r.description||'<i class="text-muted">- Sin descripción -</i>')}},{dataField:"characteristics",caption:"Caracteristicas",width:"200px",cellTemplate:(s,{data:r})=>{r.characteristics&&r.characteristics.forEach(i=>{s.css("text-overflow","unset"),s.append(o.renderToString(e.jsx("li",{className:"d-flex gap-2",children:e.jsxs("i",{className:"text-muted font-italic d-block",children:["- ",i]})})))})}},{caption:"Acciones",width:"50px",cellTemplate:(s,{data:r})=>{s.css("text-overflow","unset"),s.append(O({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>me(r)}))},allowFiltering:!1,allowExporting:!1}]})}),e.jsxs(q,{modalRef:C,title:H?"Editar tipo de Delivery":"Agregar tipo de Delivery",onSubmit:de,size:"sm",children:[e.jsx("input",{ref:G,type:"hidden"}),e.jsxs("div",{id:"form-container",className:"row",children:[e.jsxs("div",{className:"col-12",children:[e.jsx(N,{eRef:I,label:"Nombre",col:"col-12",type:"string"}),e.jsx(N,{eRef:P,label:"descripcion",col:"col-12",type:"string",required:!0})]}),e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Características"}),h.map((s,r)=>e.jsxs("div",{className:"input-group mb-2",children:[e.jsx("input",{type:"text",className:"form-control",placeholder:"Ej: Egresada de la Universidad Nacional Federico Villarreal.",value:s.value,onChange:i=>ne(r,i.target.value)}),e.jsx("button",{type:"button",className:"btn btn-outline-danger",onClick:()=>te(r),disabled:h.length<=1,children:e.jsx("i",{className:"fas fa-times"})})]},r)),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:ce,children:[e.jsx("i",{className:"fas fa-plus me-1"})," Agregar característica"]})]})})]})]})]})};ve((t,a)=>{ge.createRoot(t).render(e.jsx(ke,{...a,title:"Costos de envio",children:e.jsx(Re,{...a})}))});
