import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as o}from"./index-BOnQTV8N.js";import{M as Y}from"./MessagesRest-w6x1zooZ.js";import{L as G,G as q,M as W,I as K}from"./esm-B3ahtdks.js";import{G as c}from"./Global-DWbVqTT_.js";import{t as k}from"./index-DRg3WPTA.js";import{m as r}from"./proxy-ByjeBI6i.js";import{M as U}from"./mail-drJGpT4k.js";import{P as J}from"./phone-ZNY-sPqk.js";import{B as Q}from"./building-2-DSFvhCB-.js";import{S as X}from"./store-DCbpAdsr.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./BasicRest-BCYKfs4R.js";import"./main-DKOTUah5.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./index-C0Swrixi.js";import"./index-fNjTmf9T.js";import"./createLucideIcon-DfjclApS.js";const Z=new Y,be=({data:i,contacts:j})=>{var M;console.log(j);const h=s=>{var n;return((n=j.find(t=>t.correlative===s))==null?void 0:n.description)||""},H=s=>{const n=h(s);return n?n.split(",").map(t=>t.trim()).filter(t=>t):[]},I=s=>{const n=h(s);return n?n.split(",").map(t=>t.trim()).filter(t=>t):[]},v=((M=j.find(s=>s.correlative=="location"))==null?void 0:M.description)??"0,0",L={lat:Number(v.split(",").map(s=>s.trim())[0]),lng:Number(v.split(",").map(s=>s.trim())[1])},f=o.useRef(),x=o.useRef(),g=o.useRef(),b=o.useRef(),[d,R]=o.useState(!1),[w,C]=o.useState(""),[y,N]=o.useState(""),[P,_]=o.useState([]),[z,$]=o.useState(!0),[u,S]=o.useState([]),[B,F]=o.useState(!0),[a,A]=o.useState(null);o.useEffect(()=>{(async()=>{try{$(!0);const t=await(await fetch("/api/stores")).json();console.log("API Response:",t);let l=t;if(t.data?l=t.data:t.body&&(l=t.body),Array.isArray(l)){const m=l.filter(p=>p.type==="oficina"&&p.status!==!1);_(m)}else console.error("API response is not an array:",t),_([])}catch(n){console.error("Error loading offices:",n),_([])}finally{$(!1)}})()},[]),o.useEffect(()=>{(async()=>{try{F(!0);const t=await(await fetch("/api/stores")).json();console.log("Stores API Response:",t);let l=t;if(t.data?l=t.data:t.body&&(l=t.body),Array.isArray(l)){const m=l.filter(p=>p.status!==!1&&p.latitude&&p.longitude&&p.latitude!=="0"&&p.longitude!=="0");S(m),console.log("Valid stores loaded:",m)}else console.error("Stores API response is not an array:",t),S([])}catch(n){console.error("Error loading stores:",n),S([])}finally{F(!1)}})()},[]);const O=s=>{switch(s==null?void 0:s.toLowerCase()){case"tienda":return c.APP_COLOR_PRIMARY;case"oficina":return c.APP_COLOR_PRIMARY;case"agencia":return c.APP_COLOR_PRIMARY;case"almacen":return c.APP_COLOR_SECONDARY;default:return c.APP_COLOR_TERTIARY}},T=s=>{const t=s.replace(/\D/g,"").slice(0,9);return t.length<=3?t:t.length<=6?`${t.slice(0,3)} ${t.slice(3)}`:`${t.slice(0,3)} ${t.slice(3,6)} ${t.slice(6)}`},E=s=>{const n=s.replace(/\D/g,"");return n.length!==9?"El teléfono debe tener 9 dígitos":n.startsWith("9")?"":"Solo se aceptan celulares peruanos (empiezan con 9)"},V=s=>{const n=s.target.value,t=T(n),l=E(t);C(t),N(l),x.current&&(x.current.value=t.replace(/\D/g,""))},D=async s=>{if(s.preventDefault(),d)return;const n=w.replace(/\D/g,""),t=E(w);if(t){N(t),k.error("Error de validación",{description:t,duration:3e3,position:"bottom-center",richColors:!0});return}R(!0);const l={name:f.current.value,phone:n,email:g.current.value,description:b.current.value},m=await Z.save(l);f.current&&(f.current.value=""),x.current&&(x.current.value=""),C(""),N(""),g.current&&(g.current.value=""),b.current&&(b.current.value=""),k.success("Mensaje enviado",{description:"Tu mensaje ha sido enviado correctamente. ¡Nos pondremos en contacto contigo pronto!",duration:3e3,position:"bottom-center",richColors:!0}),R(!1),m&&i!=null&&i.redirect&&(v.href=i==null?void 0:i.redirect)};return e.jsxs(r.section,{className:" bg-[#F7F9FB] py-12 px-primary ",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6},children:[e.jsxs(r.div,{className:" mx-auto  2xl:max-w-7xl  flex flex-col md:flex-row gap-12 bg-white rounded-xl p-4 md:px-8 md:py-8",initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8,delay:.2},children:[e.jsxs(r.div,{className:"w-full md:w-10/12",initial:{x:-50,opacity:0},animate:{x:0,opacity:1},transition:{duration:.8,delay:.4},children:[e.jsx(r.h2,{className:"text-3xl font-bold mb-4 customtext-neutral-dark",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6,delay:.6},children:"Hablemos Hoy"}),e.jsx(r.p,{className:`customtext-neutral-light mb-8 ${(i==null?void 0:i.class_card_description)||""}`,initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6,delay:.7},children:"Etiam ultricies sapien mauris, a consectetur sapien posuere eu. Sed ac faucibus lorem. Integer sit amet tempus sapien."}),e.jsxs(r.form,{onSubmit:D,className:"space-y-6",initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8,delay:.8},children:[e.jsx(r.div,{initial:{x:-30,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,delay:1},children:e.jsx(r.input,{ref:f,disabled:d,type:"text",name:"name",placeholder:"Nombre completo",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all duration-200",required:!0,whileFocus:{scale:1.02,borderColor:"#3B82F6"},transition:{type:"spring",stiffness:300,damping:20}})}),e.jsxs(r.div,{initial:{x:-30,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,delay:1.1},children:[e.jsx(r.input,{ref:x,disabled:d,type:"tel",name:"phone",placeholder:"Teléfono (9 dígitos)",value:w,onChange:V,maxLength:11,className:`w-full px-4 py-3 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all duration-200 ${y?"border-red-400 bg-red-50":"border-gray-300"}`,required:!0,"aria-describedby":y?"phone-error":"phone-help","aria-invalid":y?"true":"false",whileFocus:{scale:1.02,borderColor:"#3B82F6"},transition:{type:"spring",stiffness:300,damping:20}}),y&&e.jsxs(r.span,{id:"phone-error",className:"text-red-500 text-xs flex items-center gap-1 mt-1",role:"alert",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},children:[e.jsx("svg",{className:"w-3 h-3 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),y]})]}),e.jsx(r.div,{initial:{x:-30,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,delay:1.2},children:e.jsx(r.input,{ref:g,disabled:d,type:"email",name:"email",placeholder:"Correo Electrónico",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all duration-200",required:!0,whileFocus:{scale:1.02,borderColor:"#3B82F6"},transition:{type:"spring",stiffness:300,damping:20}})}),e.jsx(r.div,{initial:{x:-30,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,delay:1.3},children:e.jsx(r.textarea,{ref:b,disabled:d,name:"message",placeholder:"Deja tu mensaje...",rows:"6",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none resize-none transition-all duration-200",required:!0,whileFocus:{scale:1.02,borderColor:"#3B82F6"},transition:{type:"spring",stiffness:300,damping:20}})}),e.jsxs(r.button,{type:"submit",className:`bg-primary text-base font-bold text-white px-6 py-3  hover:brightness-90 transition-all flex items-center justify-center gap-2 disabled:opacity-70 ${(i==null?void 0:i.class_card_button)||"rounded-xl"}`,disabled:d,initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:1.4},whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},children:[d&&e.jsxs(r.svg,{className:"animate-spin -ml-1 mr-2 h-5 w-5 ",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d?"Enviando...":"Enviar mensaje"]})]})]}),e.jsxs(r.div,{className:"space-y-8",initial:{x:50,opacity:0},animate:{x:0,opacity:1},transition:{duration:.8,delay:.5},children:[e.jsxs(r.div,{className:`bg-[#F7F9FB] p-6 rounded-xl shadow-lg ${(i==null?void 0:i.class_card_container)||""}`,initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.2,delay:0},whileHover:{y:-5,scale:1.02,boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.15)"},children:[e.jsxs("div",{className:"flex items-center gap-3 customtext-primary mb-2",children:[e.jsx(r.div,{whileHover:{rotate:15,scale:1.1},transition:{duration:.2},children:e.jsx(U,{className:`w-5 h-5 ${(i==null?void 0:i.class_card_title)||""}`})}),e.jsx("h3",{className:` font-bold text-lg ${(i==null?void 0:i.class_card_title)||"customtext-neutral-dark"}`,children:"Email"})]}),e.jsx("p",{className:` mb-2 ${(i==null?void 0:i.class_card_description)||"customtext-neutral-light"}`,children:"Escríbenos para recibir atención personalizada y resolver tus dudas."}),e.jsx("div",{className:"space-y-1",children:H("email_contact").map((s,n)=>e.jsx("a",{href:`mailto:${s}`,className:"customtext-primary font-bold hover:no-underline block",children:s},n))})]}),e.jsxs(r.div,{className:`bg-[#F7F9FB] p-6 rounded-xl shadow-lg ${(i==null?void 0:i.class_card_container)||""}`,initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.2,delay:0},whileHover:{y:-5,scale:1.02,boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.15)"},children:[e.jsxs("div",{className:"flex items-center gap-3 customtext-primary mb-2",children:[e.jsx(r.div,{whileHover:{rotate:-15,scale:1.1},transition:{duration:.2},children:e.jsx(J,{className:`w-5 h-5 ${(i==null?void 0:i.class_card_title)||""}`})}),e.jsx("h3",{className:` font-bold text-lg ${(i==null?void 0:i.class_card_title)||"customtext-neutral-dark"}`,children:"Teléfono"})]}),e.jsx("p",{className:`customtext-neutral-light mb-2 ${(i==null?void 0:i.class_card_description)||""}`,children:"Llámanos para obtener soporte inmediato y asistencia profesional."}),e.jsx("div",{className:"space-y-1",children:I("phone_contact").map((s,n)=>e.jsx("a",{href:`tel:${s}`,className:"customtext-primary hover:no-underline font-bold block",children:s},n))})]}),e.jsxs(r.div,{className:`bg-[#F7F9FB] p-6 rounded-xl shadow-lg ${(i==null?void 0:i.class_card_container)||""}`,initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.2,delay:0},whileHover:{y:-8,scale:1.02,boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.15)",backgroundColor:"#ffffff"},children:[e.jsxs(r.div,{className:"flex items-center gap-3 customtext-primary mb-4",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,delay:1.4},children:[e.jsx(r.div,{whileHover:{rotate:20,scale:1.2},transition:{type:"spring",stiffness:400,damping:15},children:e.jsx(Q,{className:`w-5 h-5 ${(i==null?void 0:i.class_card_title)||""}`})}),e.jsx(r.h3,{className:`font-bold text-lg ${(i==null?void 0:i.class_card_title)||"customtext-neutral-dark"}`,children:"Nuestras Oficinas"})]}),z?e.jsxs("div",{className:"flex items-center justify-center py-4",children:[e.jsx("div",{className:"w-6 h-6 border-2 border-primary border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"ml-2 text-sm customtext-neutral-light",children:"Cargando oficinas..."})]}):P.length===0?e.jsxs(r.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[e.jsx(r.p,{className:`customtext-neutral-light mb-2 ${(i==null?void 0:i.class_card_description)||""}`,whileHover:{x:3,opacity:.8},transition:{type:"spring",stiffness:300,damping:20},children:"Visítanos en nuestra oficina para conocer nuestras soluciones de tratamiento en persona."}),e.jsx("p",{className:"customtext-primary font-bold",children:h("address")})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx(r.p,{className:`customtext-neutral-light mb-3 ${(i==null?void 0:i.class_card_description)||""}`,whileHover:{x:3,opacity:.8},transition:{type:"spring",stiffness:300,damping:20},children:"Visítanos en cualquiera de nuestras oficinas para atención personalizada."}),P.map((s,n)=>e.jsxs(r.div,{className:"bg-white p-4 rounded-lg border border-gray-100 hover:shadow-md transition-shadow duration-200",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.4,delay:1.5+n*.1},whileHover:{x:2,scale:1.01},children:[e.jsx("h4",{className:"customtext-neutral-dark font-bold mb-2",children:s.name}),e.jsx("p",{className:"customtext-primary font-bold",children:s.address})]},s.id))]})]}),e.jsxs(r.div,{className:`bg-[#F7F9FB] p-6 rounded-xl shadow-lg ${(i==null?void 0:i.class_card_container)||""}`,initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.2,delay:0},whileHover:{y:-5,scale:1.02,boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.15)"},children:[e.jsxs(r.div,{className:"flex items-center gap-3 customtext-primary mb-2",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,delay:1.5},children:[e.jsx(r.div,{whileHover:{rotate:-20,scale:1.2},transition:{type:"spring",stiffness:400,damping:15},children:e.jsx(X,{className:`w-5 h-5 ${(i==null?void 0:i.class_card_title)||""}`})}),e.jsx(r.h3,{className:`font-bold text-lg ${(i==null?void 0:i.class_card_title)||"customtext-neutral-dark"}`,children:"Tienda"})]}),e.jsxs(r.p,{className:"customtext-primary font-bold",transition:{type:"spring",stiffness:300,damping:20},children:[" ",h("address")]})]})]})]}),e.jsxs(r.div,{className:"mx-auto 2xl:max-w-7xl gap-12 bg-white rounded-xl px-8 py-8",initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8,delay:1.4},children:[e.jsxs(r.div,{className:"mb-6",children:[e.jsx(r.h3,{className:"text-2xl font-bold customtext-neutral-dark mb-2",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6,delay:1.5},children:"Nuestras Ubicaciones"}),e.jsx(r.p,{className:` mb-4 ${(i==null?void 0:i.class_card_description)||"customtext-neutral-light"}`,initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6,delay:1.6},children:"Encuentra nuestras tiendas, oficinas y agencias más cercanas a tu ubicación."})]}),e.jsxs(r.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.6,delay:1.8},className:"relative",children:[B&&e.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center z-10 rounded-xl",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-6 h-6 border-2 border-primary border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"customtext-neutral-light",children:"Cargando ubicaciones..."})]})}),e.jsx(G,{googleMapsApiKey:c.GMAPS_API_KEY,className:"rounded-xl",children:e.jsxs(q,{mapContainerStyle:{width:"100%",height:"500px",borderRadius:"12px"},zoom:u.length>0?14:20,center:u.length>0?{lat:u.reduce((s,n)=>s+parseFloat(n.latitude),0)/u.length,lng:u.reduce((s,n)=>s+parseFloat(n.longitude),0)/u.length}:L,options:{styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]},children:[u.map(s=>{var n;return e.jsx(W,{position:{lat:parseFloat(s.latitude),lng:parseFloat(s.longitude)},icon:((n=s.type)==null?void 0:n.toLowerCase())==="tienda"?{scaledSize:{width:40,height:40}}:{scaledSize:{width:25,height:25}},title:`${s.name} (${s.type})`,onClick:()=>A(s)},s.id)}),a&&e.jsx(K,{position:{lat:parseFloat(a.latitude),lng:parseFloat(a.longitude)},onCloseClick:()=>A(null),children:e.jsxs("div",{style:{padding:"10px",maxWidth:"250px"},children:[e.jsx("h4",{style:{margin:"0 0 8px 0",color:O(a.type),fontWeight:"bold"},children:a.name}),e.jsx("p",{style:{margin:"0 0 5px 0",color:c.APP_COLOR_PRIMARY,fontSize:"12px",textTransform:"uppercase",fontWeight:"500"},children:a.type}),e.jsxs("p",{style:{margin:"0 0 8px 0",color:"#374151",lineHeight:"1.4"},children:["📍 ",a.address]}),a.phone&&e.jsxs("p",{style:{margin:"0 0 8px 0",color:c.APP_COLOR_PRIMARY},children:["📞 ",e.jsx("a",{href:`tel:${a.phone}`,style:{color:O(a.type),textDecoration:"none"},children:a.phone})]}),a.schedule&&e.jsxs("p",{style:{margin:"0",color:c.APP_COLOR_PRIMARY,fontSize:"13px"},children:["🕒 ",a.schedule]})]})})]})})]})]})]})};export{be as default};
