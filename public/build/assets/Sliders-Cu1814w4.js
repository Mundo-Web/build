var ee=Object.defineProperty;var le=(t,r,a)=>r in t?ee(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a;var T=(t,r,a)=>le(t,typeof r!="symbol"?r+"":r,a);import{j as l}from"./AboutSimple-Cf8x2fCZ.js";import{B as ie}from"./Base-C0IJLs-0.js";import{S as se}from"./SwitchFormGroup-DXN0cwVk.js";import{T as B}from"./TextareaFormGroup-CliirJM1.js";import{r as s}from"./index-BOnQTV8N.js";import{c as oe}from"./ReactAppend-CxMClIhj.js";import{S as re}from"./CartKuchara-CVImXKD8.js";import{B as te}from"./BasicRest-tjV1jpAY.js";import"./main-iQpBVKTZ.js";import{I as A}from"./ImageFormGroup-40MuGzez.js";import{I as v}from"./InputFormGroup-iZIO11ZN.js";import{M as ne}from"./Modal-xDw9ufjg.js";import{T as ce}from"./Table-dgKp0cQo.js";import{D as J}from"./DxButton-DV0H-ZcL.js";import{C as ae,F as n}from"./CreateReactScript-Hz9eu6hn.js";import{R as _}from"./ReactAppend-C2Knef3a.js";import{g as me}from"./getYTVideoId-CmDerGE9.js";import"./index-yBjzXJbu.js";import"./Global-Bz6gVLc5.js";import"./tippy-react.esm-BGU1pa2o.js";import"./index-B8-haksW.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./index-BLHw34Di.js";/* empty css              */import"./Logout-DK3gcKZh.js";import"./MenuItemContainer-B4uedZKJ.js";import"./index.esm-BaU9YRy4.js";import"./index-B9ygI19o.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./CanAccess-Awo4qb4C.js";import"./CardProductKatya-BPLqIfPk.js";import"./BooleanLimit-D-OsQsek.js";/* empty css               */import"./General-apRuNwp7.js";import"./LaravelSession-Dz9cpV3l.js";class de extends te{constructor(){super(...arguments);T(this,"path","admin/sliders");T(this,"hasFiles",!0)}}const x=new de,ue=()=>{const t=s.useRef(),r=s.useRef(),a=s.useRef(),N=s.useRef(),w=s.useRef(),y=s.useRef(),m=s.useRef(),d=s.useRef(),u=s.useRef(),O=s.useRef(),R=s.useRef(),D=s.useRef(),F=s.useRef(),k=s.useRef(),C=s.useRef(),S=s.useRef(),[K,q]=s.useState(!1),[b,E]=s.useState("image"),[g,h]=s.useState("content"),[M,G]=s.useState(""),[p,L]=s.useState(!0),[j,V]=s.useState(50),[c,z]=s.useState("to-b"),[I,P]=s.useState("#000000"),U=e=>{e!=null&&e.id?q(!0):q(!1),a.current.value=(e==null?void 0:e.id)??"",N.current.value=(e==null?void 0:e.name)??"",w.current.value=(e==null?void 0:e.subtitle)??"",y.current.value=(e==null?void 0:e.description)??"",E((e==null?void 0:e.bg_type)??"image"),h("content"),G((e==null?void 0:e.bg_video)??""),m.current.value=null,m.image.src=e!=null&&e.image?`/storage/images/slider/${e.image}`:"",d.current.value=null,d.image.src=e!=null&&e.bg_image?`/storage/images/slider/${e.bg_image}`:"",u.current.value=null,u.image.src=e!=null&&e.bg_image_mobile?`/storage/images/slider/${e.bg_image_mobile}`:"",O.current.value=e!=null&&e.bg_video?`https://youtu.be/${e.bg_video}`:"",R.current.value=(e==null?void 0:e.button_text)??"",D.current.value=(e==null?void 0:e.button_link)??"",F.current.value=(e==null?void 0:e.secondary_button_text)??"",k.current.value=(e==null?void 0:e.secondary_button_link)??"",C.current.value=(e==null?void 0:e.title_color)??"#000000",S.current.value=(e==null?void 0:e.description_color)??"#000000",L((e==null?void 0:e.show_overlay)!==!1&&(e==null?void 0:e.show_overlay)!==0),P((e==null?void 0:e.overlay_color)??"#000000"),V((e==null?void 0:e.overlay_opacity)??50),z((e==null?void 0:e.overlay_direction)??"to-b"),$(r.current).modal("show")},Q=async e=>{e.preventDefault();const i={id:a.current.value||void 0,name:N.current.value,subtitle:w.current.value,description:y.current.value,button_text:R.current.value,button_link:D.current.value,secondary_button_text:F.current.value,secondary_button_link:k.current.value,title_color:C.current.value,description_color:S.current.value,show_overlay:p?1:0,overlay_color:I,overlay_opacity:j,overlay_direction:c,bg_type:b,bg_video:b=="video"?M:null},o=new FormData;for(const f in i)o.append(f,i[f]);if(b=="image"){const f=d.current.files[0];f&&o.append("bg_image",f);const Y=u.current.files[0];Y&&o.append("bg_image_mobile",Y);const H=m.current.files[0];H&&o.append("image",H)}else o.append("bg_image",null),o.append("bg_image_mobile",null);d.getDeleteFlag&&d.getDeleteFlag()&&o.append("bg_image_delete","DELETE"),u.getDeleteFlag&&u.getDeleteFlag()&&o.append("bg_image_mobile_delete","DELETE"),m.getDeleteFlag&&m.getDeleteFlag()&&o.append("image_delete","DELETE"),await x.save(o)&&(d.resetDeleteFlag&&d.resetDeleteFlag(),u.resetDeleteFlag&&u.resetDeleteFlag(),m.resetDeleteFlag&&m.resetDeleteFlag(),$(t.current).dxDataGrid("instance").refresh(),$(r.current).modal("hide"))},W=async({id:e,value:i})=>{await x.boolean({id:e,field:"visible",value:i})&&$(t.current).dxDataGrid("instance").refresh()},X=async e=>{const{isConfirmed:i}=await re.fire({title:"Eliminar slider",text:"¿Estas seguro de eliminar este slider?",icon:"warning",showCancelButton:!0,confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"});!i||!await x.delete(e)||$(t.current).dxDataGrid("instance").refresh()},Z=async e=>{const i=e.toIndex;try{await x.reorder(e.itemData.id,i)&&await e.component.refresh()}catch(o){console.error("Error reordering slider:",o)}};return l.jsxs(l.Fragment,{children:[l.jsx(ce,{gridRef:t,title:"Sliders",rest:x,toolBar:e=>{e.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(t.current).dxDataGrid("instance").refresh()}}),e.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Nuevo slider",hint:"Nuevo slider",onClick:()=>U()}})},rowDragging:{allowReordering:!0,onReorder:Z,dropFeedbackMode:"push"},sorting:{mode:"single"},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"order_index",caption:"Orden",visible:!1,sortOrder:"asc",sortIndex:0},n.has("sliders","name")&&{dataField:"name",caption:"Titulo",width:"75%"},n.has("sliders","bg_image")&&{dataField:"bg_image",caption:"Imagen",width:"90px",allowFiltering:!1,cellTemplate:(e,{data:i})=>{_(e,l.jsx("img",{src:i.bg_type=="image"?`/storage/images/slider/${i.bg_image}`:`//img.youtube.com/vi/${i.bg_video}/mqdefault.jpg`,style:{width:"80px",height:"48px",objectFit:"cover",objectPosition:"center",borderRadius:"4px"},onError:o=>o.target.src="/api/cover/thumbnail/null"}))}},n.has("sliders","bg_image_mobile")&&{dataField:"bg_image_mobile",caption:"Imagen Mobile",width:"90px",allowFiltering:!1,cellTemplate:(e,{data:i})=>{_(e,l.jsx("img",{src:i.bg_type=="image"?`/storage/images/slider/${i.bg_image_mobile}`:`//img.youtube.com/vi/${i.bg_video}/mqdefault.jpg`,style:{width:"80px",height:"48px",objectFit:"cover",objectPosition:"center",borderRadius:"4px"},onError:o=>o.target.src="/api/cover/thumbnail/null"}))}},n.has("sliders","image")&&{dataField:"image",caption:"Imagen",width:"90px",allowFiltering:!1,cellTemplate:(e,{data:i})=>{_(e,l.jsx("img",{src:i.bg_type=="image"?`/storage/images/slider/${i.image}`:`//img.youtube.com/vi/${i.bg_video}/mqdefault.jpg`,style:{width:"80px",height:"48px",objectFit:"cover",objectPosition:"center",borderRadius:"4px"},onError:o=>o.target.src="/api/cover/thumbnail/null"}))}},{dataField:"visible",caption:"Visible",dataType:"boolean",cellTemplate:(e,{data:i})=>{$(e).empty(),_(e,l.jsx(se,{checked:i.visible==1,onChange:()=>W({id:i.id,value:!i.visible})}))}},{caption:"Acciones",cellTemplate:(e,{data:i})=>{e.css("text-overflow","unset"),e.append(J({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>U(i)})),e.append(J({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>X(i.id)}))},allowFiltering:!1,allowExporting:!1}]}),l.jsx(ne,{modalRef:r,title:K?"Editar slider":"Agregar slider",onSubmit:Q,size:"lg",children:l.jsxs("div",{className:"row",id:"sliders-container",children:[l.jsx("input",{ref:a,type:"hidden"}),l.jsx("div",{className:"col-12 mb-3",children:l.jsxs("ul",{className:"nav nav-pills nav-fill",children:[l.jsx("li",{className:"nav-item",children:l.jsx("a",{href:"#form-tab-content",className:`nav-link ${g==="content"?"active":""}`,onClick:()=>h("content"),children:"Contenido"})}),l.jsx("li",{className:"nav-item",children:l.jsx("a",{href:"#form-tab-media",className:`nav-link ${g==="media"?"active":""}`,onClick:()=>h("media"),children:"Multimedia"})}),l.jsx("li",{className:"nav-item",children:l.jsx("a",{href:"#form-tab-buttons",className:`nav-link ${g==="buttons"?"active":""}`,onClick:()=>h("buttons"),children:"Botones"})}),l.jsx("li",{className:"nav-item",children:l.jsx("a",{href:"#form-tab-colors",className:`nav-link ${g==="colors"?"active":""}`,onClick:()=>h("colors"),children:"Colores"})})]})}),l.jsx("div",{className:`col-12 ${g!=="content"?"d-none":""}`,children:l.jsxs("div",{className:"row",children:[l.jsx(B,{eRef:N,label:"Título principal",col:"col-12",rows:2,required:!0}),l.jsx(B,{eRef:w,label:"Subtítulo (aparecerá resaltado)",col:"col-12",rows:2}),l.jsx(B,{eRef:y,label:"Descripción",rows:3,col:"col-12"})]})}),l.jsxs("div",{className:`col-12 ${g!=="media"?"d-none":""}`,children:[l.jsxs("ul",{hidden:!n.has("sliders","image")||!n.has("sliders","bg_image")||!n.has("sliders","bg_video"),className:"nav nav-pills navtab-bg nav-justified",children:[l.jsx("li",{className:"nav-item",children:l.jsx("a",{href:"#tab-image","data-bs-toggle":"tab","aria-expanded":"false",className:`nav-link ${b=="image"&&"active"}`,onClick:()=>E("image"),children:"Imagen"})}),l.jsx("li",{className:"nav-item",children:l.jsx("a",{href:"#tab-video","data-bs-toggle":"tab","aria-expanded":"true",className:`nav-link ${b=="video"&&"active"}`,onClick:()=>E("video"),children:"Video"})})]}),l.jsxs("div",{className:"tab-content",children:[l.jsxs("div",{className:`tab-pane ${b=="image"&&"show active"}`,id:"tab-image",children:[l.jsxs("div",{className:"row",children:[l.jsx(A,{hidden:!n.has("sliders","bg_image"),eRef:d,name:"bg_image",aspect:n.has("sliders","bg_image_mobile")?"4/3":"16/9",label:"Imagen de fondo (Desktop)",col:n.has("sliders","bg_image_mobile")?"col-md-8":"col-12"}),l.jsx(A,{hidden:!n.has("sliders","bg_image_mobile"),eRef:u,name:"bg_image_mobile",aspect:"9/14",label:"Imagen (Mobile)",col:"col-md-4"})]}),l.jsx(A,{hidden:!n.has("sliders","image"),eRef:m,name:"image",label:"Imagen"})]}),l.jsxs("div",{hidden:!n.has("sliders","bg_video"),className:`tab-pane ${b=="video"&&"show active"}`,id:"tab-video",children:[l.jsx(v,{eRef:O,label:"URL (Youtube)",type:"link",onChange:e=>G(me(e.target.value))}),l.jsx("iframe",{src:`https://www.youtube.com/embed/${M}`,className:"w-100 rounded border mb-2",style:{aspectRatio:21/9}})]})]})]}),l.jsx("div",{className:`col-12 ${g!=="buttons"?"d-none":""}`,children:l.jsxs("div",{className:"row",children:[l.jsx("div",{className:"col-12 mb-3",children:l.jsx("h6",{className:"text-muted",children:"Botón Principal"})}),l.jsx(v,{eRef:R,label:"Texto del botón",col:"col-sm-6",required:!0}),l.jsx(v,{eRef:D,label:"URL del botón",col:"col-sm-6",required:!0}),l.jsx("div",{className:"col-12 mt-3 mb-3",children:l.jsx("h6",{className:"text-muted",children:"Botón Secundario"})}),l.jsx(v,{eRef:F,label:"Texto del botón secundario",col:"col-sm-6"}),l.jsx(v,{eRef:k,label:"URL del botón secundario",col:"col-sm-6"})]})}),l.jsx("div",{className:`col-12 ${g!=="colors"?"d-none":""}`,children:l.jsxs("div",{className:"row",children:[l.jsxs("div",{className:"col-sm-6",children:[l.jsx("label",{className:"form-label",children:"Color del título"}),l.jsx("input",{ref:C,type:"color",className:"form-control form-control-color",defaultValue:"#000000",title:"Seleccionar color del título"})]}),l.jsxs("div",{className:"col-sm-6",children:[l.jsx("label",{className:"form-label",children:"Color de la descripción"}),l.jsx("input",{ref:S,type:"color",className:"form-control form-control-color",defaultValue:"#000000",title:"Seleccionar color de la descripción"})]}),l.jsx("div",{className:"col-12 mt-4 mb-3",children:l.jsx("h6",{className:"text-muted border-bottom pb-2",children:"Configuración del Overlay (Gradiente)"})}),l.jsxs("div",{className:"col-sm-3",children:[l.jsx("label",{className:"form-label",children:"Mostrar Overlay"}),l.jsxs("div",{className:"form-check form-switch",children:[l.jsx("input",{className:"form-check-input",type:"checkbox",checked:p,onChange:e=>L(e.target.checked),style:{width:"50px",height:"25px"}}),l.jsx("label",{className:"form-check-label ms-2",children:p?"Sí":"No"})]})]}),l.jsxs("div",{className:"col-sm-3",children:[l.jsx("label",{className:"form-label",children:"Color del Gradiente"}),l.jsx("input",{type:"color",className:"form-control form-control-color w-100",value:I,onChange:e=>P(e.target.value),title:"Seleccionar color del gradiente",disabled:!p})]}),l.jsxs("div",{className:"col-sm-3",children:[l.jsx("label",{className:"form-label",children:"Dirección"}),l.jsxs("select",{className:"form-select",value:c,onChange:e=>z(e.target.value),disabled:!p,children:[l.jsx("option",{value:"to-r",children:"→ Izquierda a Derecha"}),l.jsx("option",{value:"to-l",children:"← Derecha a Izquierda"}),l.jsx("option",{value:"to-b",children:"↓ Arriba a Abajo"}),l.jsx("option",{value:"to-t",children:"↑ Abajo a Arriba"}),l.jsx("option",{value:"to-tr",children:"↗ Diagonal Arriba-Derecha"}),l.jsx("option",{value:"to-tl",children:"↖ Diagonal Arriba-Izquierda"}),l.jsx("option",{value:"to-br",children:"↘ Diagonal Abajo-Derecha"}),l.jsx("option",{value:"to-bl",children:"↙ Diagonal Abajo-Izquierda"})]})]}),l.jsxs("div",{className:"col-sm-3",children:[l.jsxs("label",{className:"form-label",children:["Intensidad: ",j,"%"]}),l.jsx("input",{type:"range",className:"form-range",min:"0",max:"100",value:j,onChange:e=>V(parseInt(e.target.value)),disabled:!p})]}),p&&l.jsxs("div",{className:"col-12 mt-3",children:[l.jsx("label",{className:"form-label",children:"Vista previa del gradiente"}),l.jsx("div",{className:"rounded border position-relative overflow-hidden",style:{height:"80px",background:`linear-gradient(${c==="to-r"?"to right":c==="to-l"?"to left":c==="to-t"?"to top":c==="to-b"?"to bottom":c==="to-tr"?"to top right":c==="to-tl"?"to top left":c==="to-br"?"to bottom right":"to bottom left"}, ${I}${Math.round(j*2.55).toString(16).padStart(2,"0")}, transparent)`},children:l.jsx("div",{className:"position-absolute w-100 h-100",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='10' height='10' fill='%23ccc'/%3E%3Crect x='10' y='10' width='10' height='10' fill='%23ccc'/%3E%3C/svg%3E")`,backgroundSize:"20px 20px",zIndex:-1}})}),l.jsx("small",{className:"text-muted",children:"El gradiente irá desde el color seleccionado hasta transparente"})]})]})})]})})]})};ae((t,r)=>{oe.createRoot(t).render(l.jsx(ie,{...r,title:"Sliders",children:l.jsx(ue,{...r})}))});
