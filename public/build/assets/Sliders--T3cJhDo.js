var e=Object.defineProperty,a=(a,s,t)=>((a,s,t)=>s in a?e(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t)(a,"symbol"!=typeof s?s+"":s,t);import{c as s,j as t,r as l}from"./vendor-react-CtPXetfm.js";import{B as r}from"./Base-B2hVq4yw.js";import{S as i}from"./SwitchFormGroup-CB0qoXn0.js";import{T as o}from"./TextareaFormGroup-DXMahSF1.js";import{S as n}from"./CartKuchara-Bi-J8T1O.js";import{B as c}from"./BasicRest-DtgqEuc9.js";import{I as d}from"./ImageFormGroup-Cr7oEweG.js";import{I as m}from"./InputFormGroup-CRGKsLQr.js";import{M as u}from"./Modal-CUkY7A3F.js";import{T as b}from"./Table-CjNT5pP4.js";import{D as h}from"./DxButton-C6FT_beP.js";import{C as g,F as p}from"./CreateReactScript-Cjoo020C.js";import{R as v}from"./ReactAppend-RIOEhuYO.js";import{g as x}from"./getYTVideoId-Y8XMBBj_.js";import"./vendor-swiper-Cr_RrIb_.js";import"./Footer-coriRrmf.js";import"./TippyButton-Dqi9Vaf_.js";import"./Logout-DQyEsGXW.js";import"./MenuItemContainer-UDNHvqM7.js";import"./Menu-BjIZNCK0.js";import"./OpenPayCardModal-CbSnHq7o.js";import"./BooleanLimit-q2Ad9fGY.js";import"./General-ClVW7qxN.js";import"./LaravelSession-ByQnaUD3.js";const j=new class extends c{constructor(){super(...arguments),a(this,"path","admin/sliders"),a(this,"hasFiles",!0)}},f=()=>{const e=l.useRef(),a=l.useRef(),s=l.useRef(),r=l.useRef(),c=l.useRef(),g=l.useRef(),f=l.useRef(),_=l.useRef(),y=l.useRef(),N=l.useRef(),w=l.useRef(),k=l.useRef(),R=l.useRef(),C=l.useRef(),F=l.useRef(),D=l.useRef(),S=l.useRef(),[E,I]=l.useState(!1),[T,B]=l.useState("image"),[M,A]=l.useState("content"),[q,G]=l.useState(""),[L,O]=l.useState(!0),[z,P]=l.useState(50),[V,U]=l.useState("to-b"),[Y,K]=l.useState("#000000"),[W,X]=l.useState("gradient"),[H,J]=l.useState(!1),Q=e=>{I(!!e?.id),s.current.value=e?.id??"",r.current&&(r.current.value=e?.name??""),c.current&&(c.current.value=e?.subtitle??""),g.current&&(g.current.value=e?.description??""),B(e?.bg_type??"image"),A("content"),G(e?.bg_video??""),f.current&&(f.current.value=null,f.image&&(f.image.src=e?.image?`/storage/images/slider/${e.image}`:"")),_.current&&(_.current.value=null,_.image&&(_.image.src=e?.bg_image?`/storage/images/slider/${e.bg_image}`:"")),y.current&&(y.current.value=null,y.image&&(y.image.src=e?.bg_image_mobile?`/storage/images/slider/${e.bg_image_mobile}`:"")),N.current&&(N.current.value=e?.bg_video?`https://youtu.be/${e.bg_video}`:""),w.current&&(w.current.value=e?.button_text??""),k.current&&(k.current.value=e?.button_link??""),R.current&&(R.current.value=e?.secondary_button_text??""),C.current&&(C.current.value=e?.secondary_button_link??""),F.current&&(F.current.value=e?.title_color??"#000000"),D.current&&(D.current.value=e?.description_color??"#000000"),S.current&&(S.current.value=e?.duration?e.duration/1e3:""),O(!1!==e?.show_overlay&&0!==e?.show_overlay),K(e?.overlay_color??"#000000"),P(e?.overlay_opacity??50),U(e?.overlay_direction??"to-b"),X(e?.overlay_type??"gradient"),J(!0===e?.button_new_tab||1===e?.button_new_tab),$(a.current).modal("show")};return t.jsxs(t.Fragment,{children:[t.jsx(b,{gridRef:e,title:"Sliders",rest:j,toolBar:a=>{a.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(e.current).dxDataGrid("instance").refresh()}}),a.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Nuevo slider",hint:"Nuevo slider",onClick:()=>Q()}})},rowDragging:{allowReordering:!0,onReorder:async e=>{const a=e.toIndex;try{await j.reorder(e.itemData.id,a)&&await e.component.refresh()}catch(s){}},dropFeedbackMode:"push"},sorting:{mode:"single"},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"order_index",caption:"Orden",visible:!1,sortOrder:"asc",sortIndex:0},p.has("sliders","name")&&{dataField:"name",caption:"Titulo",width:"75%"},p.has("sliders","bg_image")&&{dataField:"bg_image",caption:"Imagen",width:"90px",allowFiltering:!1,cellTemplate:(e,{data:a})=>{v(e,t.jsx("img",{src:"image"==a.bg_type?`/storage/images/slider/${a.bg_image}`:`//img.youtube.com/vi/${a.bg_video}/mqdefault.jpg`,style:{width:"80px",height:"48px",objectFit:"cover",objectPosition:"center",borderRadius:"4px"},onError:e=>e.target.src="/api/cover/thumbnail/null"}))}},p.has("sliders","bg_image_mobile")&&{dataField:"bg_image_mobile",caption:"Imagen Mobile",width:"90px",allowFiltering:!1,cellTemplate:(e,{data:a})=>{v(e,t.jsx("img",{src:"image"==a.bg_type?`/storage/images/slider/${a.bg_image_mobile}`:`//img.youtube.com/vi/${a.bg_video}/mqdefault.jpg`,style:{width:"80px",height:"48px",objectFit:"cover",objectPosition:"center",borderRadius:"4px"},onError:e=>e.target.src="/api/cover/thumbnail/null"}))}},p.has("sliders","image")&&{dataField:"image",caption:"Imagen",width:"90px",allowFiltering:!1,cellTemplate:(e,{data:a})=>{v(e,t.jsx("img",{src:"image"==a.bg_type?`/storage/images/slider/${a.image}`:`//img.youtube.com/vi/${a.bg_video}/mqdefault.jpg`,style:{width:"80px",height:"48px",objectFit:"cover",objectPosition:"center",borderRadius:"4px"},onError:e=>e.target.src="/api/cover/thumbnail/null"}))}},{dataField:"visible",caption:"Visible",dataType:"boolean",cellTemplate:(a,{data:s})=>{$(a).empty(),v(a,t.jsx(i,{checked:1==s.visible,onChange:()=>(async({id:a,value:s})=>{await j.boolean({id:a,field:"visible",value:s})&&$(e.current).dxDataGrid("instance").refresh()})({id:s.id,value:!s.visible})}))}},{caption:"Acciones",cellTemplate:(a,{data:s})=>{a.css("text-overflow","unset"),a.append(h({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>Q(s)})),a.append(h({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>(async a=>{const{isConfirmed:s}=await n.fire({title:"Eliminar slider",text:"¿Estas seguro de eliminar este slider?",icon:"warning",showCancelButton:!0,confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"});if(!s)return;await j.delete(a)&&$(e.current).dxDataGrid("instance").refresh()})(s.id)}))},allowFiltering:!1,allowExporting:!1}]}),t.jsx(u,{modalRef:a,title:E?"Editar slider":"Agregar slider",onSubmit:async t=>{t.preventDefault();const l={id:s.current.value||void 0};r.current&&(l.name=r.current.value),c.current&&(l.subtitle=c.current.value),g.current&&(l.description=g.current.value),w.current&&(l.button_text=w.current.value),k.current&&(l.button_link=k.current.value),p.has("sliders","button_new_tab")&&(l.button_new_tab=H?1:0),R.current&&(l.secondary_button_text=R.current.value),C.current&&(l.secondary_button_link=C.current.value),F.current&&(l.title_color=F.current.value),D.current&&(l.description_color=D.current.value),p.has("sliders","show_overlay")&&(l.show_overlay=L?1:0,l.overlay_color=Y,l.overlay_opacity=z,l.overlay_direction=V,l.overlay_type=W),S.current&&(l.duration=S.current.value?1e3*S.current.value:null),l.bg_type=T,"video"==T&&p.has("sliders","bg_video")&&(l.bg_video=q);const i=new FormData;for(const e in l)void 0!==l[e]&&i.append(e,l[e]);if("image"==T){if(_.current){const e=_.current.files?.[0];e&&i.append("bg_image",e)}if(y.current){const e=y.current.files?.[0];e&&i.append("bg_image_mobile",e)}if(f.current){const e=f.current.files?.[0];e&&i.append("image",e)}}else i.append("bg_image",null),i.append("bg_image_mobile",null);_.getDeleteFlag&&_.getDeleteFlag()&&i.append("bg_image_delete","DELETE"),y.getDeleteFlag&&y.getDeleteFlag()&&i.append("bg_image_mobile_delete","DELETE"),f.getDeleteFlag&&f.getDeleteFlag()&&i.append("image_delete","DELETE");await j.save(i)&&(_.resetDeleteFlag&&_.resetDeleteFlag(),y.resetDeleteFlag&&y.resetDeleteFlag(),f.resetDeleteFlag&&f.resetDeleteFlag(),$(e.current).dxDataGrid("instance").refresh(),$(a.current).modal("hide"))},size:"lg",children:t.jsxs("div",{className:"row",id:"sliders-container",children:[t.jsx("input",{ref:s,type:"hidden"}),t.jsx("div",{className:"col-12 mb-3",children:t.jsxs("ul",{className:"nav nav-pills nav-fill",children:[(p.has("sliders","name")||p.has("sliders","subtitle")||p.has("sliders","description"))&&t.jsx("li",{className:"nav-item",children:t.jsx("a",{href:"#form-tab-content",className:"nav-link "+("content"===M?"active":""),onClick:()=>A("content"),children:"Contenido"})}),(p.has("sliders","bg_image")||p.has("sliders","bg_image_mobile")||p.has("sliders","image")||p.has("sliders","bg_video"))&&t.jsx("li",{className:"nav-item",children:t.jsx("a",{href:"#form-tab-media",className:"nav-link "+("media"===M?"active":""),onClick:()=>A("media"),children:"Multimedia"})}),(p.has("sliders","button_text")||p.has("sliders","button_link")||p.has("sliders","secondary_button_text")||p.has("sliders","secondary_button_link"))&&t.jsx("li",{className:"nav-item",children:t.jsx("a",{href:"#form-tab-buttons",className:"nav-link "+("buttons"===M?"active":""),onClick:()=>A("buttons"),children:"Botones"})}),(p.has("sliders","title_color")||p.has("sliders","description_color")||p.has("sliders","show_overlay"))&&t.jsx("li",{className:"nav-item",children:t.jsx("a",{href:"#form-tab-colors",className:"nav-link "+("colors"===M?"active":""),onClick:()=>A("colors"),children:"Colores"})}),t.jsx("li",{className:"nav-item",children:t.jsx("a",{href:"#form-tab-config",className:"nav-link "+("config"===M?"active":""),onClick:()=>A("config"),children:"Configuración"})})]})}),(p.has("sliders","name")||p.has("sliders","subtitle")||p.has("sliders","description"))&&t.jsx("div",{className:"col-12 "+("content"!==M?"d-none":""),children:t.jsxs("div",{className:"row",children:[p.has("sliders","name")&&t.jsx(o,{eRef:r,label:"Título principal",col:"col-12",rows:2,required:!0}),p.has("sliders","subtitle")&&t.jsx(o,{eRef:c,label:"Subtítulo (aparecerá resaltado)",col:"col-12",rows:2}),p.has("sliders","description")&&t.jsx(o,{eRef:g,label:"Descripción",rows:3,col:"col-12"})]})}),(p.has("sliders","bg_image")||p.has("sliders","bg_image_mobile")||p.has("sliders","image")||p.has("sliders","bg_video"))&&t.jsxs("div",{className:"col-12 "+("media"!==M?"d-none":""),children:[p.has("sliders","bg_video")&&t.jsxs("ul",{className:"nav nav-pills navtab-bg nav-justified",children:[t.jsx("li",{className:"nav-item",children:t.jsx("a",{href:"#tab-image","data-bs-toggle":"tab","aria-expanded":"false",className:`nav-link ${"image"==T&&"active"}`,onClick:()=>B("image"),children:"Imagen"})}),t.jsx("li",{className:"nav-item",children:t.jsx("a",{href:"#tab-video","data-bs-toggle":"tab","aria-expanded":"true",className:`nav-link ${"video"==T&&"active"}`,onClick:()=>B("video"),children:"Video"})})]}),t.jsxs("div",{className:"tab-content",children:[t.jsxs("div",{className:`tab-pane ${"image"==T&&"show active"}`,id:"tab-image",children:[t.jsxs("div",{className:"row",children:[t.jsx(d,{hidden:!p.has("sliders","bg_image"),eRef:_,name:"bg_image",aspect:p.has("sliders","bg_image_mobile")?"4/3":"16/9",label:"Imagen de fondo (Desktop)",col:p.has("sliders","bg_image_mobile")?"col-md-8":"col-12"}),t.jsx(d,{hidden:!p.has("sliders","bg_image_mobile"),eRef:y,name:"bg_image_mobile",aspect:"9/14",label:"Imagen (Mobile)",col:"col-md-4"})]}),t.jsx(d,{hidden:!p.has("sliders","image"),eRef:f,name:"image",label:"Imagen"})]}),p.has("sliders","bg_video")&&t.jsxs("div",{className:`tab-pane ${"video"==T&&"show active"}`,id:"tab-video",children:[t.jsx(m,{eRef:N,label:"URL (Youtube)",type:"link",onChange:e=>G(x(e.target.value))}),t.jsx("iframe",{src:`https://www.youtube.com/embed/${q}`,className:"w-100 rounded border mb-2",style:{aspectRatio:21/9}})]})]})]}),(p.has("sliders","button_text")||p.has("sliders","button_link")||p.has("sliders","secondary_button_text")||p.has("sliders","secondary_button_link"))&&t.jsx("div",{className:"col-12 "+("buttons"!==M?"d-none":""),children:t.jsxs("div",{className:"row",children:[(p.has("sliders","button_text")||p.has("sliders","button_link"))&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"col-12 mb-3",children:t.jsx("h6",{className:"text-muted",children:"Botón Principal"})}),p.has("sliders","button_text")&&t.jsx(m,{eRef:w,label:"Texto del botón",col:"col-sm-6",required:!0}),p.has("sliders","button_link")&&t.jsx(m,{eRef:k,label:"URL del botón",col:"col-sm-6",required:!0}),p.has("sliders","button_new_tab")&&t.jsxs("div",{className:"col-sm-6 mt-2",children:[t.jsx("label",{className:"form-label",children:"Abrir en nueva pestaña"}),t.jsxs("div",{className:"form-check form-switch",children:[t.jsx("input",{className:"form-check-input",type:"checkbox",checked:H,onChange:e=>J(e.target.checked),style:{width:"50px",height:"25px"}}),t.jsx("label",{className:"form-check-label ms-2",children:H?"Sí":"No"})]})]})]}),(p.has("sliders","secondary_button_text")||p.has("sliders","secondary_button_link"))&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"col-12 mt-3 mb-3",children:t.jsx("h6",{className:"text-muted",children:"Botón Secundario"})}),p.has("sliders","secondary_button_text")&&t.jsx(m,{eRef:R,label:"Texto del botón secundario",col:"col-sm-6"}),p.has("sliders","secondary_button_link")&&t.jsx(m,{eRef:C,label:"URL del botón secundario",col:"col-sm-6"})]})]})}),(p.has("sliders","title_color")||p.has("sliders","description_color")||p.has("sliders","show_overlay"))&&t.jsx("div",{className:"col-12 "+("colors"!==M?"d-none":""),children:t.jsxs("div",{className:"row",children:[p.has("sliders","title_color")&&t.jsxs("div",{className:"col-sm-6",children:[t.jsx("label",{className:"form-label",children:"Color del título"}),t.jsx("input",{ref:F,type:"color",className:"form-control form-control-color",defaultValue:"#000000",title:"Seleccionar color del título"})]}),p.has("sliders","description_color")&&t.jsxs("div",{className:"col-sm-6",children:[t.jsx("label",{className:"form-label",children:"Color de la descripción"}),t.jsx("input",{ref:D,type:"color",className:"form-control form-control-color",defaultValue:"#000000",title:"Seleccionar color de la descripción"})]}),p.has("sliders","show_overlay")&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"col-12 mt-4 mb-3",children:t.jsx("h6",{className:"text-muted border-bottom pb-2",children:"Configuración del Overlay"})}),t.jsxs("div",{className:"col-sm-3",children:[t.jsx("label",{className:"form-label",children:"Mostrar Overlay"}),t.jsxs("div",{className:"form-check form-switch",children:[t.jsx("input",{className:"form-check-input",type:"checkbox",checked:L,onChange:e=>O(e.target.checked),style:{width:"50px",height:"25px"}}),t.jsx("label",{className:"form-check-label ms-2",children:L?"Sí":"No"})]})]}),t.jsxs("div",{className:"col-sm-3",children:[t.jsx("label",{className:"form-label",children:"Tipo de Overlay"}),t.jsxs("select",{className:"form-select",value:W,onChange:e=>X(e.target.value),disabled:!L,children:[t.jsx("option",{value:"gradient",children:"Gradiente"}),t.jsx("option",{value:"solid",children:"Color Sólido"})]})]}),t.jsxs("div",{className:"col-sm-3",children:[t.jsx("label",{className:"form-label",children:"Color del Overlay"}),t.jsx("input",{type:"color",className:"form-control form-control-color w-100",value:Y,onChange:e=>K(e.target.value),title:"Seleccionar color del overlay",disabled:!L})]}),"gradient"===W&&t.jsxs("div",{className:"col-sm-3",children:[t.jsx("label",{className:"form-label",children:"Dirección"}),t.jsxs("select",{className:"form-select",value:V,onChange:e=>U(e.target.value),disabled:!L,children:[t.jsx("option",{value:"to-r",children:"→ Izquierda a Derecha"}),t.jsx("option",{value:"to-l",children:"← Derecha a Izquierda"}),t.jsx("option",{value:"to-b",children:"↓ Arriba a Abajo"}),t.jsx("option",{value:"to-t",children:"↑ Abajo a Arriba"}),t.jsx("option",{value:"to-tr",children:"↗ Diagonal Arriba-Derecha"}),t.jsx("option",{value:"to-tl",children:"↖ Diagonal Arriba-Izquierda"}),t.jsx("option",{value:"to-br",children:"↘ Diagonal Abajo-Derecha"}),t.jsx("option",{value:"to-bl",children:"↙ Diagonal Abajo-Izquierda"})]})]}),t.jsxs("div",{className:"gradient"===W?"col-sm-12 mt-2":"col-sm-3",children:[t.jsxs("label",{className:"form-label",children:["Opacidad: ",z,"%"]}),t.jsx("input",{type:"range",className:"form-range",min:"0",max:"100",value:z,onChange:e=>P(parseInt(e.target.value)),disabled:!L})]}),L&&t.jsxs("div",{className:"col-12 mt-3",children:[t.jsx("label",{className:"form-label",children:"Vista previa del overlay"}),t.jsx("div",{className:"rounded border position-relative overflow-hidden",style:{height:"80px",background:"solid"===W?`${Y}${Math.round(2.55*z).toString(16).padStart(2,"0")}`:`linear-gradient(${"to-r"===V?"to right":"to-l"===V?"to left":"to-t"===V?"to top":"to-b"===V?"to bottom":"to-tr"===V?"to top right":"to-tl"===V?"to top left":"to-br"===V?"to bottom right":"to bottom left"}, ${Y}${Math.round(2.55*z).toString(16).padStart(2,"0")}, transparent)`},children:t.jsx("div",{className:"position-absolute w-100 h-100",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='10' height='10' fill='%23ccc'/%3E%3Crect x='10' y='10' width='10' height='10' fill='%23ccc'/%3E%3C/svg%3E\")",backgroundSize:"20px 20px",zIndex:-1}})}),t.jsx("small",{className:"text-muted",children:"solid"===W?"Color sólido con la opacidad seleccionada":"El gradiente irá desde el color seleccionado hasta transparente"})]})]})]})}),p.has("sliders","duration")&&t.jsx("div",{className:"col-12 "+("config"!==M?"d-none":""),children:t.jsx("div",{className:"row",children:t.jsx(m,{eRef:S,label:"Duración en segundos (ej: 5 para 5 segundos). Dejar vacío para usar el valor por defecto.",col:"col-sm-6",type:"number"})})})]})})]})};g((e,a)=>{s.createRoot(e).render(t.jsx(r,{...a,title:"Sliders",children:t.jsx(f,{...a})}))});
