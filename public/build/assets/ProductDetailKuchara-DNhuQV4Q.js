import{r as e,j as s}from"./System-Bybt2Brn.js";import{S as l}from"./sweetalert2.esm.all-DbJpIAEg.js";import{h as a}from"./html2string-Xrf4P-xU.js";import{H as i}from"./HtmlContent-C-2ncp8S.js";import{N as r}from"./Number2Currency-DExzICY3.js";import{S as t,a as n}from"./swiper-react-CRhJ2vE3.js";import"./vendor-BiOv2i5T.js";const c=({item:c,cart:d,setCart:o})=>{var m;const[x,u]=e.useState(null==c?void 0:c.image),g=e.useRef(),[p,h]=e.useState(1);return s.jsxs("section",{className:"w-full px-[5%] py-8",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-10",children:[s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsx("div",{className:"w-full aspect-square rounded-lg overflow-hidden",children:s.jsx("img",{src:`/storage/images/item/${x}`,alt:null==c?void 0:c.name,className:"w-full h-full object-cover object-center","data-aos":"fade-up","data-aos-offset":"150",onError:e=>e.target.src="/api/cover/thumbnail/null"})}),s.jsxs(t,{slidesPerView:"auto",spaceBetween:12,className:"w-full",children:[s.jsx(n,{className:"!w-[80px]",children:s.jsx("button",{onClick:()=>u(null==c?void 0:c.image),className:"w-[80px] h-[80px] rounded-lg overflow-hidden border-2 "+(x===(null==c?void 0:c.image)?"border-green-600":"border-gray-200"),children:s.jsx("img",{src:`/storage/images/item/${null==c?void 0:c.image}`,alt:null==c?void 0:c.name,className:"w-full h-full object-cover object-center",onError:e=>e.target.src="/api/cover/thumbnail/null"})})}),null==(m=null==c?void 0:c.gallery)?void 0:m.map(((e,l)=>s.jsx(n,{className:"!w-[80px]",children:s.jsx("button",{onClick:()=>u(e),className:"w-[80px] h-[80px] rounded-lg overflow-hidden border-2 "+(x===e?"border-green-600":"border-gray-200"),children:s.jsx("img",{src:`/storage/images/item/${e}`,alt:`imagen-${l}`,className:"w-full h-full object-cover object-center",onError:e=>e.target.src="/api/cover/thumbnail/null"})})},l)))]})]}),s.jsxs("div",{className:"flex flex-col gap-5",children:[s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-600",children:[s.jsxs("span",{children:["SKU: ",(null==c?void 0:c.sku)||"N/A"]}),s.jsxs("span",{className:"text-green-600 font-medium",children:["Disponibilidad: ",(null==c?void 0:c.stock)>0?"En stock":"Agotado"]})]}),s.jsx("h1",{className:"font-bold font-title text-3xl text-green-700 leading-none my-4",children:(null==c?void 0:c.name)||"Sin nombre"}),s.jsxs("div",{className:"flex items-baseline gap-3 mt-2",children:[(null==c?void 0:c.discount)&&s.jsxs("span",{className:"text-gray-500 line-through text-lg",children:["S/ ",r(c.price)]}),s.jsxs("span",{className:"font-bold text-3xl",children:["S/ ",r(null==c?void 0:c.final_price)]}),(null==c?void 0:c.discount)&&s.jsxs("span",{className:"bg-red-500 text-white text-sm px-2 py-1 rounded-md",children:["-",Math.round((c.price-c.final_price)/c.price*100),"%"]})]})]}),s.jsxs("div",{className:"mt-2",children:[s.jsx("h3",{className:"font-medium text-lg mb-2",children:"Descripción:"}),s.jsx("p",{className:"text-gray-700",children:(null==c?void 0:c.summary)||a(null==c?void 0:c.description).trim()||"Sin descripción"})]}),((null==c?void 0:c.category)||(null==c?void 0:c.subcategory)||(null==c?void 0:c.brand))&&s.jsxs("div",{className:"mt-2",children:[s.jsx("h3",{className:"font-medium text-lg mb-2",children:"Contenido:"}),s.jsxs("ul",{className:"list-disc pl-5 text-gray-700 space-y-1",children:[(null==c?void 0:c.category)&&s.jsx("li",{children:s.jsx("span",{className:"font-medium",children:c.category.name})}),(null==c?void 0:c.subcategory)&&s.jsx("li",{children:s.jsx("span",{className:"font-medium",children:c.subcategory.name})}),(null==c?void 0:c.brand)&&s.jsx("li",{children:s.jsx("span",{className:"font-medium",children:c.brand.name})})]})]}),s.jsx("div",{className:"mt-4",children:s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("label",{htmlFor:"quantity",className:"font-medium",children:"Cantidad"}),s.jsxs("div",{className:"flex items-center",children:[s.jsxs("div",{className:"flex border border-gray-300 rounded-md",children:[s.jsx("button",{type:"button",onClick:()=>{h((e=>e>1?e-1:1))},className:"px-3 py-2 border-r border-gray-300",children:s.jsx("i",{className:"mdi mdi-minus",size:16})}),s.jsx("input",{id:"quantity",ref:g,type:"number",className:"w-16 text-center focus:outline-none",value:p,onChange:e=>{const s=Number.parseInt(e.target.value);!isNaN(s)&&s>0&&h(s)},min:"1"}),s.jsx("button",{type:"button",onClick:()=>{h((e=>e+1))},className:"px-3 py-2 border-l border-gray-300",children:s.jsx("i",{className:"mdi mdi-plus",size:16})})]}),s.jsx("span",{className:"ml-3 text-gray-600",children:"Máximo 10 unidades."})]})]})}),s.jsx("div",{className:"mt-4 flex flex-col gap-3",children:s.jsxs("button",{onClick:()=>{const e=structuredClone(d),s=e.findIndex((e=>e.id==c.id));-1==s?e.push({...c,quantity:Number(p||1)}):e[s].quantity++,o(e),l.fire({title:"Producto agregado",text:`Se agregó ${c.name} al carrito`,icon:"success",timer:1500})},className:"w-full py-3 bg-green-700 hover:bg-green-800 text-white rounded-md flex items-center justify-center gap-2 transition-colors",children:[s.jsx("i",{className:"mdi mdi-cart-plus",size:20}),s.jsx("span",{children:"Agregar a mi carrito"})]})})]})]}),a(null==c?void 0:c.description).trim()&&s.jsxs("div",{className:"mt-12 border-t pt-8",children:[s.jsx("h2",{className:"font-bold text-2xl text-green-700 mb-4",children:"Descripción completa"}),s.jsx("div",{className:"text-gray-700 prose ql-editor",children:s.jsx(i,{html:null==c?void 0:c.description})})]})]})};export{c as default};
