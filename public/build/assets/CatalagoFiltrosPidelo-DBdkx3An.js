var e=Object.defineProperty,a=(a,s,r)=>((a,s,r)=>s in a?e(a,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[s]=r)(a,"symbol"!=typeof s?s+"":s,r);import{m as s,r,j as t,E as i,J as l,bd as n,C as c,S as o}from"./vendor-react-CtPXetfm.js";import"./ProductDetailB-DzJO_4TN.js";import{I as d}from"./ItemsRest-B-0SQfAd.js";import{N as m}from"./NoResult-BPfUh4c-.js";import{P as u}from"./ProductCardScraping-BTY-3Bj2.js";import{C as p}from"./Number2Currency-BX4epFEo.js";import"./vendor-swiper-Cr_RrIb_.js";import"./OpenPayCardModal-CLeyEGiH.js";import"./CartKuchara-Jdwx0GGB.js";import"./CartModal-DcYNc6DJ.js";import"./CartItemRow-eFLbqPUz.js";import"./vendor-motion-CThzL09Q.js";import"./Footer-coriRrmf.js";import"./BasicRest-BxJc2T7L.js";import"./BooleanLimit-q2Ad9fGY.js";import"./General-ClVW7qxN.js";class x{}a(x,"getProducts",async e=>{try{const{query:a,proveedor:r,page:t,limit:i=12}=e,{status:l,result:n}=await s.Fetch("./api/scrap",{method:"POST",body:JSON.stringify({query:a,proveedor:r,page:t,limit:i})});return l?(s.Notify.add({icon:"/assets/img/icon.svg",title:"Operación correcta",body:"Se obtuvieron los productos correctamente"}),{data:n.data||[],filters:n.filters||[],hasMore:n.data.length===i}):{data:[],hasMore:!1}}catch(a){return s.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:a.message,type:"danger"}),{data:[],filters:[],hasMore:!1}}}),a(x,"getPaginatedProducts",async e=>{try{const{query:a,proveedor:r,page:t,limit:i=10}=e,{status:l,result:n}=await s.Fetch("./api/scrap",{method:"POST",body:JSON.stringify({query:a,proveedor:r,page:t,limit:i})});return l?{data:n.data||[],hasMore:n.data.length===i}:{data:[],hasMore:!1}}catch(a){return s.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:a.message,type:"danger"}),{data:[],hasMore:!1}}}),new d;const h=()=>t.jsx("div",{className:"group font-paragraph animate-pulse w-full transition-transform duration-300 hover:scale-105  sm:w-1/3 flex-shrink-0 font-paragraph customtext-primary cursor-pointer",children:t.jsx("div",{className:" px-4",children:t.jsx("div",{className:"bg-white rounded-3xl",children:t.jsx("div",{className:"relative",children:t.jsx("div",{className:"aspect-square bg-gray-300 rounded-3xl overflow-hidden flex items-center justify-center  bg-secondary",children:t.jsx("svg",{class:"w-10 h-10 text-gray-200 ","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 18",children:t.jsx("path",{d:"M18 0H2a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2Zm-5.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm4.376 10.481A1 1 0 0 1 16 15H4a1 1 0 0 1-.895-1.447l3.5-7A1 1 0 0 1 7.468 6a.965.965 0 0 1 .9.5l2.775 4.757 1.546-1.887a1 1 0 0 1 1.618.1l2.541 4a1 1 0 0 1 .028 1.011Z"})})})})})})}),g=({items:e,data:a,filteredData:s,cart:d,setCart:g})=>{const{categories:f,brands:j,priceRanges:y}=s,[b,v]=r.useState({marca:!0,precio:!0,categoria:!0,colores:!1}),[N,w]=r.useState({category_id:[],brand_id:[],subcategory_id:[],price:null,name:null,sort_by:"created_at",order:"desc"}),[C,P]=r.useState([]),[k,S]=r.useState(!1),[_,A]=r.useState({currentPage:1,totalPages:1}),M=async(e,a,s=1)=>{if(e){S(!0);try{const r=await x.getProducts({query:e,proveedor:a,page:s});P(1===s?r.data:e=>[...e,...r.data]),A({currentPage:r.currentPage,totalPages:r.lastPage})}catch(r){alert("Hubo un error al realizar la búsqueda. Por favor, intenta nuevamente.")}finally{S(!1)}}else alert("Por favor, ingresa un término de búsqueda")},[q,F]=r.useState(""),[B,O]=r.useState("nike");r.useEffect(()=>{const e=new URLSearchParams(window.location.search),a=e.get("category");if(a){const e=f.find(e=>e.slug===a);e&&w(a=>({...a,category_id:[e.id]}))}F(e.get("search")),O(e.get("provider")),q&&M(q,B)},[e]);const R=(e,a)=>{w(s=>{if("price"===e)return{...s,price:s.price&&s.price.min===a.min&&s.price.max===a.max?null:a};const r=Array.isArray(s[e])?s[e]:[],t=r.includes(a)?r.filter(e=>e!==a):[...r,a];return{...s,[e]:t}})},L=e=>{v(a=>({...a,[e]:!a[e]}))},[$,E]=r.useState(""),[H,I]=r.useState(""),J=f.filter(e=>e.name.toLowerCase().includes($.toLowerCase())),T=j.filter(e=>e.name.toLowerCase().includes(H.toLowerCase())),[D,Z]=r.useState(1),U=12*D,V=U-12,z=Array.isArray(C)?C.slice(V,U):[],G=Math.ceil(C.length/12);return t.jsx("section",{id:a?.element_id||null,className:"py-12 bg-[#F7F9FB] font-paragraph",children:t.jsxs("div",{className:"mx-auto px-primary",children:[t.jsxs("div",{className:"flex justify-between items-center mb-8 pb-4 border-b-2",children:[t.jsx("h2",{className:"text-4xl font-bold w-6/12",children:"Todos los productos"}),t.jsx("div",{className:"flex items-center gap-4 w-5/12",children:t.jsx("div",{className:"flex justify-end items-center mb-4 w-full",children:t.jsx("div",{className:"customtext-neutral-dark font-semibold",children:t.jsxs("nav",{class:"flex items-center gap-x-2 min-w-max",children:[t.jsx("button",{class:" p-4 inline-flex items-center",onClick:()=>{Z(D-1)},disabled:1===D,children:t.jsx(i,{})}),t.jsx("ul",{className:"list-none flex gap-2",children:[...Array(G).keys()].map(e=>t.jsx("li",{className:"page-item "+(D===e+1?"active":""),children:t.jsx("button",{onClick:()=>Z(e+1),class:"w-10 h-10  p-2 inline-flex items-center justify-center rounded-full transition-all duration-300  hover:text-white hover:bg-primary "+(D===e+1?"bg-primary text-white":" bg-transparent"),"aria-current":"page",children:e+1})},e+1))}),t.jsx("button",{class:" p-4 inline-flex items-center ",onClick:()=>{const e=D+1;e<=G?Z(e):(Z(e),M(q,B,e))},disabled:D===G&&"invictastores"===B,children:t.jsx(l,{})})]})})})})]}),t.jsxs("div",{className:"relative flex gap-4",children:[t.jsxs("div",{className:"w-3/12 bg-white p-4 rounded-lg h-max",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h2",{className:"text-xl font-bold",children:"Filtros"}),t.jsx(n,{className:"h-5 w-5"})]}),t.jsxs("div",{className:"mb-6",children:[t.jsxs("button",{onClick:()=>L("marca"),className:"flex items-center justify-between w-full mb-4",children:[t.jsx("span",{className:"font-medium",children:"Marca"}),t.jsx(c,{className:"h-5 w-5 transform transition-transform "+(b.marca?"":"-rotate-180")})]}),b.marca&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx(o,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Buscar",className:"w-full px-4 pl-10 py-3 border customtext-neutral-dark  border-neutral-ligth rounded-xl focus:ring-0 focus:outline-0   transition-all duration-300",value:H,onChange:e=>I(e.target.value)})]}),t.jsx("div",{className:"space-y-3",children:T.map(e=>t.jsxs("label",{className:"flex items-center space-x-3",children:[t.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300",onChange:()=>R("brand_id",e.id)}),t.jsx("span",{children:e.name})]},e.id))})]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsxs("button",{onClick:()=>L("precio"),className:"flex items-center justify-between w-full mb-4",children:[t.jsx("span",{className:"font-medium",children:"Precio"}),t.jsx(c,{className:"h-5 w-5 transform transition-transform "+(b.precio?"":"-rotate-180")})]}),b.precio&&t.jsx("div",{className:"space-y-3",children:y.map(e=>t.jsxs("label",{className:"flex items-center space-x-3",children:[t.jsx("input",{type:"checkbox",name:"precio",className:"h-4 w-4 rounded border-gray-300",onChange:()=>R("price",e),checked:N.price&&N.price.min===e.min&&N.price.max===e.max}),t.jsx("span",{children:`${p()} ${e.min} - ${p()} ${e.max}`})]},`${e.min}-${e.max}`))})]}),t.jsxs("div",{className:"mb-6",children:[t.jsxs("button",{onClick:()=>L("categoria"),className:"flex items-center justify-between w-full mb-4",children:[t.jsx("span",{className:"font-medium",children:"Categoría"}),t.jsx(c,{className:"h-5 w-5 transform transition-transform "+(b.categoria?"":"-rotate-180")})]}),b.categoria&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx(o,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Buscar",className:"w-full px-4 pl-10 py-3 border customtext-neutral-dark  border-neutral-ligth rounded-xl focus:ring-0 focus:outline-0   transition-all duration-300",value:$,onChange:e=>E(e.target.value)})]}),J.map(e=>t.jsxs("div",{children:[t.jsxs("label",{className:"flex items-center space-x-3",children:[t.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300",onChange:()=>R("category_id",e.id),checked:N.category_id?.includes(e.id)}),t.jsx("span",{children:e.name})]}),N.category_id?.includes(e.id)&&e.subcategories?.length>0&&t.jsx("ul",{className:"ml-6 mt-2 space-y-2",children:e.subcategories.map(e=>t.jsxs("label",{className:"flex items-center space-x-3",children:[t.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300",onChange:()=>R("subcategory_id",e.id),checked:N.subcategory_id?.includes(e.id)}),t.jsx("span",{children:e.name})]},e.id))})]},e.id))]})]}),t.jsx("button",{className:"w-full bg-primary text-white py-3 rounded-xl hover:brightness-90 transition-colors text-sm font-bold",children:"Aplicar Filtro"})]}),t.jsx("div",{className:"w-9/12",children:k?t.jsx("div",{className:"flex items-center flex-wrap gap-y-8 transition-all duration-300 ease-in-out",children:[1,2,3,4,5,6,7,8,9,10,11,12].map(e=>t.jsx(h,{},e))}):t.jsx("div",{className:"flex items-center flex-wrap gap-y-8 transition-all duration-300 ease-in-out",children:Array.isArray(C)&&C.length>0?z.map((e,a)=>t.jsx(u,{product:e,widthClass:"lg:w-1/3",cart:d,setCart:g},a)):t.jsx(m,{})})})]})]})})};export{g as default};
