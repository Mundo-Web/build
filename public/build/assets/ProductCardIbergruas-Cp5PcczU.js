import{j as e,k as t,i as s,T as i,l as a,P as r,r as l,f as n}from"./vendor-react-CIjjZrQp.js";import"./CartModal-D6iWiH0j.js";import"./vendor-swiper-Cr_RrIb_.js";import{N as o,C as c}from"./Number2Currency-SEeETbGC.js";import"./CartKuchara-CBARZO7P.js";import{m,A as d}from"./vendor-motion-8tRwuE1V.js";import"./CartItemRow-CwX9fDj8.js";import"./General-ClVW7qxN.js";const x=({setCart:l,index:n,...d})=>{const x="combo"===d.type,h=()=>l(e=>e.filter(e=>e.id!==d.id||e.type!==d.type)),p=e=>{if(e<1)return h();l(t=>t.map(t=>t.id===d.id&&t.type===d.type?{...t,quantity:e}:t))},u=x?d.final_price||d.price:d.discount>0?Math.min(d.price,d.discount):d.price;return e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:50},transition:{delay:.05*n},className:"flex gap-4 p-4   transition-shadow",children:[e.jsxs("div",{className:"flex-shrink-0 relative",children:[e.jsx("img",{src:x&&d.image?`/storage/images/combo/${d.image}`:`/storage/images/item/${d.image}`,onError:e=>e.target.src="/assets/img/noimage/no_img.jpg",className:"w-20 h-20  object-cover border border-primary",alt:d.name}),x&&e.jsx("div",{className:"absolute -top-1 -right-1 bg-primary text-white rounded-full p-1",children:e.jsx(t,{size:12})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"max-w-52",children:[e.jsx("h3",{className:"font-semibold line-clamp-2  text-white truncate",children:d.name}),x&&e.jsxs("span",{className:"text-xs customtext-primary font-medium",children:["Combo (",d.combo_items?.length||0," productos)"]})]}),e.jsx(s,{content:"Eliminar",children:e.jsx("button",{onClick:h,className:"text-gray-400 hover:text-red-500 transition-colors",children:e.jsx(i,{size:18})})})]}),!x&&d?.discount>0&&e.jsxs("div",{className:"text-sm text-white mb-2",children:[e.jsx("span",{className:"line-through mr-2",children:o(d.price)}),e.jsxs("span",{className:"text-red-500",children:["-",Number(d.discount_percent).toFixed(0),"%"]})]}),x&&d?.discount>0&&e.jsxs("div",{className:"text-sm text-white mb-2",children:[e.jsxs("span",{className:"line-through mr-2",children:[c()," ",o(d.price)]}),e.jsxs("span",{className:"text-red-500",children:["-",Number(d.discount_percent).toFixed(0),"%"]})]}),x&&d.combo_items&&e.jsxs("div",{className:"text-xs text-white mb-2",children:["Incluye: ",d.combo_items.map(e=>e.name).join(", ")]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center border border-gray-200 ",children:[e.jsx("button",{onClick:()=>p(d.quantity-1),className:"p-2 hover:bg-primary transition-colors",children:e.jsx(a,{size:16,className:"text-white"})}),e.jsx("span",{className:"w-8 text-center text-white font-medium",children:d.quantity}),e.jsx("button",{onClick:()=>p(d.quantity+1),className:"p-2 hover:bg-primary transition-colors",children:e.jsx(r,{size:16,className:"text-white"})})]}),e.jsxs("span",{className:"font-semibold text-white",children:[c()," ",o(u*d.quantity)]})]})]})]})};n.setAppElement("#app");const h=({data:t,cart:s,setCart:i,modalOpen:a,setModalOpen:r})=>{l.useEffect(()=>{a?(document.body.classList.add("overflow-hidden"),document.documentElement.classList.add("overflow-hidden")):(document.body.classList.remove("overflow-hidden"),document.documentElement.classList.remove("overflow-hidden"))},[a]);const h=s.reduce((e,t)=>e+t.final_price*t.quantity,0),p=0===s.length;return e.jsx(n,{isOpen:a,onRequestClose:()=>r(!1),contentLabel:"Carrito de compras",closeTimeoutMS:300,className:"fixed z-[99999] !rounded-none inset-0 md:inset-auto md:top-0 md:right-0 bg-secondary p-6 shadow-2xl w-full max-w-[480px] h-[100dvh] max-h-[100dvh] lg:h-screen flex flex-col outline-none md:rounded-l-xl animate-slide-in",overlayClassName:"fixed inset-0 bg-black/60 z-[200] backdrop-blur-sm transition-opacity",children:e.jsxs("div",{className:"flex flex-col flex-1 h-full",children:[e.jsxs("div",{className:"flex-shrink-0 flex justify-between items-center mb-6 pb-4 border-b border-gray-100",children:[e.jsx(m.h2,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-2xl font-bold customtext-primary",children:"Tu Carrito"}),e.jsx("button",{onClick:()=>r(!1),className:"p-2 rounded-full  transition-colors",children:e.jsx("i",{className:"mdi mdi-close text-2xl text-white hover:text-gray-700 transition-colors"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto min-h-0 mb-4 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:e.jsx(d,{mode:"wait",children:p?e.jsxs(m.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center h-full text-center p-8 min-h-[300px]",children:[e.jsx("div",{className:"mb-6 text-white",children:e.jsx("i",{className:"mdi mdi-cart-outline text-7xl text-white"})}),e.jsx("p",{className:"text-white text-lg font-medium mb-4",children:"Tu carrito está vacío"})]},"empty"):e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-4 pr-2 pb-4",children:s.map((t,s)=>e.jsx(x,{...t,setCart:i,index:s},t.id))},"items")})}),e.jsxs("div",{className:"flex-shrink-0 pt-4 border-t border-gray-100 sticky bottom-0 z-10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("span",{className:"text-lg font-semibold text-white",children:"Total:"}),e.jsxs("span",{className:"text-xl font-bold text-white",children:[c()," ",o(h)]})]}),e.jsx("a",{href:t?.link_cart||"/cart",disabled:p,className:"w-full block text-center py-4 font-semibold transition-all duration-300 "+(p?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-primary text-white hover:shadow-lg hover:scale-[1.02] active:scale-100"),children:"Ir al carrito"})]})]})})};export{h as C};
