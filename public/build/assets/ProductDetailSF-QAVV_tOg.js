import{I as e,r as t,j as s}from"./System-Bybt2Brn.js";import{S as l}from"./sweetalert2.esm.all-DbJpIAEg.js";import"./swiper-react-CRhJ2vE3.js";/* empty css                   *//* empty css             */import"./CardHoverBtn-BJnt3e8M.js";import{C as a}from"./CartModal-Db_dBOJN.js";import{i as r}from"./tippy-react.esm-Cpb4mDDh.js";import i from"./ProductNavigation-B9nKftea.js";import{C as n}from"./circle-check-B4LpUKaU.js";import{C as o}from"./chevron-up-NDt_7nmW.js";import{C as c}from"./chevron-down-r_B4RFE6.js";import"./vendor-BiOv2i5T.js";import"./eye-DJ5vw54Z.js";import"./createLucideIcon-oahCLV50.js";import"./index-Cmhjy_Bv.js";import"./index-Bx5UHif0.js";import"./CartItemRow-CLpuTcvn.js";import"./Number2Currency-DExzICY3.js";import"./proxy-BmPRG09w.js";import"./trash-2-CDXts6on.js";import"./minus-BhdGy6sP.js";import"./plus-4JHYG4O1.js";import"./index-Da4AP4wO.js";import"./adjustTextColor-dAaIuoJG.js";import"./ProductCardSimple-5sOQ9JKM.js";import"./arrow-right-CoVebBW_.js";function d({item:d,data:m,setCart:x,cart:u}){var p,h,g,j,f;const v=new e,[b,N]=t.useState(!1),[y,w]=t.useState({url:null==d?void 0:d.image,type:"main"}),[k,C]=t.useState(1),[S,F]=t.useState(!1),[E,I]=t.useState([]),[_,$]=t.useState([]),[T,P]=t.useState([]);null==u||u.find((e=>e.id==(null==d?void 0:d.id))),t.useEffect((()=>{(null==d?void 0:d.id)&&(q(d),V(d),M(d),A(d))}),[d]);const M=async e=>{try{const t={id:null==e?void 0:e.id};if(!(await v.updateViews(t)))return}catch(t){return}},V=async e=>{try{const t={id:null==e?void 0:e.id},s=await v.verifyCombo(t);if(!s)return;const l=s[0].associated_items;I(Object.values(l))}catch(t){return}},q=async e=>{try{const t={id:null==e?void 0:e.id},s=await v.productsRelations(t);if(!s)return;const l=s;$(Object.values(l))}catch(t){return}},A=async e=>{try{const t={slug:null==e?void 0:e.slug},s=await v.getVariations(t);if(!s)return;P(s.variants)}catch(t){return}};E.reduce(((e,t)=>e+parseFloat(t.final_price)),0);const[B,O]=t.useState(!1);return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"px-primary mx-auto py-4 md:py-6 xl:py-8 bg-white",children:[s.jsx("div",{className:"bg-white rounded-xl p-4 md:p-8",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 xl:gap-20 2xl:gap-32",children:[s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"flex flex-col gap-6",children:[s.jsx("div",{className:"flex-1",children:s.jsx("img",{src:(y.type,`/storage/images/item/${y.url}`),onError:e=>e.target.src="/api/cover/thumbnail/null",alt:"Product main",className:"w-full h-auto object-contain"})}),s.jsxs("div",{className:"flex flex-row gap-2",children:[s.jsx("button",{onClick:()=>w({url:null==d?void 0:d.image,type:"main"}),className:"w-16 h-16  rounded-lg p-1 border-2 "+(y.url===(null==d?void 0:d.image)?"border-primary ":"border-gray-200"),children:s.jsx("img",{src:`/storage/images/item/${null==d?void 0:d.image}`,alt:"Main Thumbnail",className:"w-full h-full object-cover",onError:e=>e.target.src="/api/cover/thumbnail/null"})}),null==d?void 0:d.images.map(((e,t)=>s.jsx("button",{onClick:()=>w({url:e.url,type:"gallery"}),className:"w-16 h-16 border-2 rounded-lg p-1 "+(y.url===e.url?"border-primary":"border-gray-200"),children:s.jsx("img",{src:`/storage/images/item/${e.url}`||"/api/cover/thumbnail/null",alt:`Thumbnail ${t+1}`,className:"w-full h-full object-cover",onError:e=>e.target.src="/api/cover/thumbnail/null"})},t)))]})]})}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsxs("div",{className:"font-font-general",children:[(null==d?void 0:d.brand)&&s.jsxs("p",{className:"customtext-neutral-light text-sm 2xl:text-lg",children:["Marca:"," ",s.jsx("span",{className:"customtext-neutral-dark",children:null==d?void 0:d.brand.name})]}),s.jsx("h1",{className:"customtext-neutral-dark text-3xl lg:text-4xl 2xl:text-5xl font-bold mt-2",children:null==d?void 0:d.name})]}),s.jsxs("div",{className:"flex flex-wrap customtext-neutral-light items-center gap-y-2  gap-x-8 text-sm font-font-general",children:[s.jsxs("span",{className:"customtext-neutral-light text-sm 2xl:text-base",children:["SKU:"," ",s.jsx("span",{className:"customtext-neutral-dark font-bold",children:null==d?void 0:d.sku})]}),s.jsxs("span",{className:"customtext-neutral-light text-sm 2xl:text-base",children:["Disponibilidad:"," ",s.jsx("span",{className:"customtext-neutral-dark font-bold",children:(null==d?void 0:d.stock)>0?"En stock":"Agotado"})]})]}),s.jsxs("div",{className:"flex flex-col w-full xl:w-1/2 !font-font-general max-w-xl mt-5",children:[s.jsxs("p",{className:"text-sm 2xl:text-base customtext-neutral-light",children:["Precio:"," ",s.jsxs("span",{className:"line-through",children:["S/ ",null==d?void 0:d.price]})]}),s.jsxs("div",{className:"flex flex-row items-center gap-4 relative",children:[s.jsxs("span",{className:"text-[40px] font-bold customtext-neutral-dark",children:["S/ ",null==d?void 0:d.final_price]}),s.jsxs("span",{className:"bg-[#F93232] text-white font-bold px-3 py-2 rounded-xl text-base",children:["-",Number(null==d?void 0:d.discount_percent).toFixed(1),"%"]})]})]}),s.jsxs("div",{className:"variants-selector flex flex-col gap-3",children:[s.jsx("h3",{className:"w-full block opacity-85 customtext-neutral-dark text-sm 2xl:text-base",children:"Colores"}),s.jsxs("div",{className:"flex gap-3 items-center justify-start w-full flex-wrap",children:[s.jsx(r,{content:d.color,children:s.jsx("a",{className:"variant-option rounded-full object-fit-cover  "+(T.some((e=>e.slug===d.slug))?"":"active p-[2px] border-[1.5px] border-neutral-dark"),children:s.jsx("img",{className:"color-box rounded-full h-9 w-9 object-fit-cover ",src:`/storage/images/item/${d.texture}`,onError:e=>e.target.src="/api/cover/thumbnail/null"})})}),T.map((e=>s.jsx(r,{content:e.color,children:s.jsx("a",{href:`/item/${e.slug}`,className:"variant-option  rounded-full object-fit-cover ",children:s.jsx("img",{className:"color-box rounded-full h-9 w-9 object-fit-cover ",src:`/storage/images/item/${e.texture||e.image}`})},e.slug)})))]})]}),s.jsx("div",{className:"flex flex-col mt-8",children:s.jsx("div",{className:"flex items-center gap-4 mb-2",children:s.jsxs("div",{className:"flex items-center space-x-4 customtext-neutral-light text-sm 2xl:text-base",children:[s.jsx("span",{className:"opacity-85",children:"Cantidad"}),s.jsx("div",{className:"relative flex items-center border rounded-md px-2 py-1",children:s.jsx("input",{type:"number",value:k,onChange:e=>{let t=parseInt(e.target.value,10);(isNaN(t)||t<1)&&(t=1),t>10&&(t=10),C(t)},min:"1",max:"10",className:"w-10 py-1 customtext-neutral-dark text-center bg-transparent outline-none appearance-none"})})]})})}),s.jsx("div",{className:"flex flex-col",children:s.jsx("button",{onClick:()=>{(e=>{const t=structuredClone(u),s=t.findIndex((t=>t.id==e.id));-1==s?t.push({...e,quantity:k}):t[s].quantity++,x(t),l.fire({title:"Producto agregado",text:`Se agregó ${e.name} al carrito`,icon:"success",timer:1500})})(d)},className:"w-full font-font-general text-base 2xl:text-lg bg-primary text-white py-3 font-semibold rounded-3xl hover:opacity-90 transition-all duration-300 mt-3",children:"Agregar al carrito"})}),(null==(p=null==d?void 0:d.specifications)?void 0:p.length)>0&&s.jsx("div",{className:"flex-1 w-full",children:s.jsxs("div",{className:"bg-[#F7F9FB] rounded-xl p-6",children:[s.jsx("h3",{className:"font-semibold text-lg xl:text-xl 2xl:text-2xl mb-4 customtext-neutral-dark font-font-general",children:"Especificaciones principales"}),s.jsx("ul",{className:"space-y-1  customtext-neutral-light  mb-4 list-disc transition-all duration-300 "+(B?"max-h-full":"max-h-20 overflow-hidden"),style:{listStyleType:"disc"},children:null==d?void 0:d.specifications.map(((e,t)=>"principal"===e.type&&s.jsxs("li",{className:"gap-2 customtext-primary opacity-85 flex flex-row items-center",children:[s.jsx(n,{className:"customtext-primary w-4 h-4"}),e.description]},t)))}),s.jsxs("button",{className:"font-semibold flex flex-row gap-2 items-center text-base xl:text-[17px] 2xl:text-xl mb-4 customtext-neutral-dark font-font-general pb-2 border-b border-neutral-dark",onClick:()=>O(!B),children:[B?"Ver menos":"Ver más especificaciones",B?s.jsx(o,{className:"w-4 h-4"}):s.jsx(c,{className:"w-4 h-4"})]})]})}),s.jsx("div",{className:"w-full mt-5",children:s.jsxs("div",{className:"bg-[#F7F9FB] flex flex-row rounded-xl p-5 gap-3",children:[s.jsx("img",{src:"/assets/img/salafabulosa/whatsapp.png",onError:e=>e.target.src="assets/img/noimage/no_imagen_circular.png",className:"w-12 h-12 object-contain",loading:"lazy"}),s.jsx("div",{className:"customtext-neutral-dark font-font-general text-base  2xl:text-xl font-semibold",children:s.jsxs("p",{children:["¿Tienes dudas sobre este producto? Haz"," ",s.jsx("span",{className:"underline",children:"clic aquí"})," ","y chatea con nosotros por WhatsApp"]})})]})})]})]})}),s.jsxs("div",{className:"grid gap-10 lg:gap-20 md:grid-cols-2 bg-white rounded-xl p-4 sm:p-8 font-font-general",children:[(null==(h=null==d?void 0:d.specifications)?void 0:h.length)>0&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold customtext-neutral-dark mb-4 border-b pb-3",children:"Especificaciones"}),s.jsx("div",{className:"space-y-1",children:d.specifications.map(((e,t)=>"general"===e.type&&s.jsxs("div",{className:"grid grid-cols-2 gap-4 p-3 "+(t%2==0?"bg-[#F7F9FB]":"bg-white"),children:[s.jsx("div",{className:"customtext-neutral-light opacity-85",children:e.title}),s.jsx("div",{className:"customtext-neutral-dark",children:e.description})]},t)))})]}),s.jsxs("div",{className:"font-font-general",children:[(null==(g=null==d?void 0:d.description)?void 0:g.replace(/<[^>]+>/g,""))&&s.jsx("h2",{className:"text-2xl font-bold customtext-neutral-dark mb-4 border-b pb-3",children:"Información adicional"}),s.jsxs("div",{className:"space-y-2 "+(S?"":"max-h-[400px] overflow-hidden"),children:[(null==(j=null==d?void 0:d.description)?void 0:j.replace(/<[^>]+>/g,""))&&s.jsxs(s.Fragment,{children:[s.jsx("h3",{className:"text-xl font-semibold customtext-neutral-dark mb-4",children:"Acerca de este artículo"}),s.jsx("div",{className:"customtext-neutral-dark",dangerouslySetInnerHTML:{__html:null==d?void 0:d.description}})]}),(null==(f=null==d?void 0:d.features)?void 0:f.length)>0&&s.jsx("div",{className:"pl-10",children:s.jsx("ul",{className:"list-disc pl-5 space-y-2",children:null==d?void 0:d.features.map(((e,t)=>s.jsx("li",{className:"customtext-neutral-dark",children:e.feature},t)))})})]})]})]})]}),_.length>0&&s.jsx("div",{className:"-mt-20 mb-10",children:s.jsx(i,{data:{title:"Te Puede Interesar",link_catalog:"/catalogo"},items:_,cart:u,setCart:x})}),s.jsx(a,{cart:u,setCart:x,modalOpen:b,setModalOpen:N})]})}export{d as default};
