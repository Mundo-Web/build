import{r as e,m as t,j as i}from"./vendor-react-DB2gWWlz.js";import{A as a}from"./AuthClientRest-Biq7Qh1g.js";import{J as r}from"./JSEncrypt-ewRYZc2G.js";import{S as s}from"./CartKuchara-C7ZIDpxE.js";import{t as o}from"./GoogleSignInButton-Bo5d3xNo.js";import{G as n}from"./Global-BAGAPG-V.js";import{m as l,A as c}from"./vendor-motion-Ma5gYeLT.js";import"./vendor-swiper-Cr_RrIb_.js";function d({data:d}){const m=new r;m.setPublicKey(n.PUBLIC_RSA_KEY);const[u,p]=e.useState(!1),[x,h]=e.useState(!1),y=e.useRef(),f={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{duration:.5,ease:"easeOut"}}};e.useEffect(()=>{t.GET.message&&s.fire({icon:"info",title:"Mensaje",text:t.GET.message,showConfirmButton:!1,timer:3e3})},[]);return i.jsx(l.div,{id:d?.element_id||null,initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"w-full px-primary mx-auto py-16",children:i.jsx(l.div,{className:"flex items-center justify-center",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,when:"beforeChildren"}}},initial:"hidden",animate:"visible",children:i.jsxs(l.div,{className:"mx-auto w-full max-w-md bg-sections-color rounded-3xl p-8 space-y-6 shadow-lg",variants:f,whileHover:{y:-5,boxShadow:"0 10px 25px rgba(0, 0, 0, 0.1)",transition:{type:"spring",stiffness:300}},children:[i.jsxs(l.div,{className:"space-y-2",variants:f,children:[i.jsx(l.h5,{className:"customtext-primary font-medium",initial:{x:-10},animate:{x:0},children:"Restaurar contraseña"}),i.jsx(l.h1,{className:"text-3xl font-bold customtext-neutral-dark",initial:{y:10},animate:{y:0},transition:{delay:.1},children:"Ops, olvidé mi contraseña"}),i.jsx(l.p,{className:"customtext-neutral-light",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:"Ingresa tu correo electrónico y te enviaremos un enlace para restablecer tu contraseña."})]}),i.jsx(c,{mode:"wait",children:x?i.jsxs(l.div,{className:"text-center py-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[i.jsx(l.div,{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",animate:{scale:[1,1.1,1],rotate:[0,10,-10,0]},transition:{duration:.6},children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),i.jsx("h3",{className:"text-xl font-bold customtext-neutral-dark mb-2",children:"¡Correo enviado!"}),i.jsx("p",{className:"customtext-neutral-light mb-6",children:"Revisa tu bandeja de entrada y sigue las instrucciones para restablecer tu contraseña."}),i.jsx(l.a,{href:"/iniciar-sesion",className:"inline-block customtext-primary font-medium border-b border-primary",whileHover:{scale:1.05},children:"Volver al inicio de sesión"})]}):i.jsxs(l.form,{className:"space-y-4",onSubmit:async e=>{e.preventDefault(),p(!0);try{const e=y.current.value,t={email:m.encrypt(e)},i=await a.forgotPassword(t);if(p(!1),!i||!i.success)return void(i&&!1===i.user_exists&&setTimeout(()=>{o.info("¿Ya tienes cuenta?",{description:"Puedes intentar iniciar sesión aquí",duration:4e3,position:"top-right",action:{label:"Ir al login",onClick:()=>{window.location.href="/login"}},actionButtonStyle:{backgroundColor:n.APP_COLOR_PRIMARY||"#10b981",color:"white",border:"none",borderRadius:"8px",padding:"8px 16px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"}})},2e3));h(!0),o.success("¡Revisa tu correo!",{description:"Te hemos enviado las instrucciones para restablecer tu contraseña.",duration:4e3,position:"top-right",action:{label:"Ir al login",onClick:()=>{window.location.href="/login"}}}),setTimeout(()=>{window.location.href="/login"},4e3)}catch(t){o.error("Error inesperado",{description:t.message||"Ocurrió un error al procesar tu solicitud",duration:3e3,position:"top-right"}),p(!1)}},initial:{opacity:1},exit:{opacity:0},variants:f,children:[i.jsxs(l.div,{className:"space-y-2",variants:f,children:[i.jsx("label",{className:"block text-sm mb-1 customtext-neutral-dark",htmlFor:"email",children:"Email"}),i.jsx(l.input,{id:"email",ref:y,name:"email",type:"email",placeholder:"hola@mail.com",className:"w-full px-4 py-3 border customtext-neutral-dark border-neutral-ligth rounded-xl focus:ring-0 focus:outline-0 transition-all duration-300",required:!0,whileFocus:{borderColor:"#3B82F6",boxShadow:"0 0 0 3px rgba(59, 130, 246, 0.2)"}})]}),i.jsx(l.button,{type:"submit",className:"w-full rounded-xl font-semibold bg-primary px-4 py-3 text-white hover:opacity-90 focus:outline-none",variants:f,whileHover:{scale:1.02,boxShadow:"0 5px 15px rgba(0, 0, 0, 0.2)"},whileTap:{scale:.98},disabled:u,children:u?i.jsxs("span",{className:"flex items-center justify-center",children:[i.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Enviando..."]}):"Enviar enlace de recuperación"})]})})]})})})}export{d as default};
