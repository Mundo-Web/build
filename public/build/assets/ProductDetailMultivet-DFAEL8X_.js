import{j as s}from"./AboutSimple-Cf8x2fCZ.js";import{r as l}from"./index-BOnQTV8N.js";import"./BlogCarousel-Bde9hmkj.js";/* empty css               */import"./BlogCarrusel-D7F5uf-O.js";import"./ProductDetailMultivet-o6QWl12q.js";/* empty css                  */import{t as ee}from"./CardProductMultivet-ncpmQ0JU.js";import{I as se}from"./ItemsRest-BOxwgVvw.js";import{c as ae}from"./createLucideIcon-DfjclApS.js";import{Z as te}from"./zoom-in-DjAbuZ1Y.js";import{S as le}from"./share-2-DAFE7yVK.js";import{C as ne}from"./circle-check-big-CYWUGR3Z.js";import{C as re}from"./chevron-right-Cug7tVUE.js";import{Q as P}from"./quote-Dsy8RbQK.js";import{A as oe}from"./index-BZvh78jk.js";import{m as z}from"./proxy-B0QLMKEh.js";import{X as ce}from"./x-fof_H3Vv.js";import{S as ie}from"./star-DU-S9B50.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./main-B6F2O9-U.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./index-pSueRYGM.js";import"./index-B6ujFmsw.js";import"./BasicRest-DJtN-L6Q.js";/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=ae("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Ve=({item:e,data:xe,setCart:he,cart:me,generals:p,favorites:g,setFavorites:ue})=>{const C=new se,[d,A]=l.useState({url:e==null?void 0:e.image,type:"main"}),[o,E]=l.useState(!1),[M,f]=l.useState({x:50,y:50}),[x,b]=l.useState(!1),[j,S]=l.useState({x:0,y:0}),I=l.useRef(null),[r,h]=l.useState(1),[y,D]=l.useState([]),[pe,ge]=l.useState(!1),[m,L]=l.useState(!1),[fe,O]=l.useState(!1),v=l.useRef(null),N=l.useRef(null),[be,Z]=l.useState(!1),[T,X]=l.useState(!1),[H,$]=l.useState(!1);l.useRef(null),l.useRef(null);const[je,ye]=l.useState(null),w=p==null?void 0:p.find(a=>a.correlative==="phone_whatsapp"),U=w==null?void 0:w.description;l.useEffect(()=>{g&&e&&O(g.some(a=>a.id===e.id))},[g,e]),l.useEffect(()=>{e!=null&&e.id&&(W(e),Q(e))},[e]),l.useEffect(()=>{const t=setTimeout(()=>{if(v.current){const n=v.current.scrollHeight>150;Z(n)}if(N.current){const n=N.current.scrollHeight>150;X(n)}},100);return()=>clearTimeout(t)},[e,e==null?void 0:e.specifications]);const Y=()=>{o?(E(!1),f({x:50,y:50})):E(!0)},q=a=>{o&&(b(!0),S({x:a.clientX,y:a.clientY}))},k=a=>{if(o&&!x){const t=I.current.getBoundingClientRect(),n=(a.clientX-t.left)/t.width*100,c=(a.clientY-t.top)/t.height*100;f({x:Math.max(0,Math.min(100,n)),y:Math.max(0,Math.min(100,c))})}else if(x&&o){const t=a.clientX-j.x,n=a.clientY-j.y;f(c=>({x:Math.max(0,Math.min(100,c.x-t/3)),y:Math.max(0,Math.min(100,c.y-n/3))})),S({x:a.clientX,y:a.clientY})}},F=()=>{b(!1)},V=()=>{b(!1)};l.useEffect(()=>{if(x)return document.addEventListener("mousemove",k),document.addEventListener("mouseup",F),()=>{document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",F)}},[x,o,j]);const W=async a=>{try{await C.viewUpdate(a.id)}catch(t){console.error("Error updating view:",t)}},Q=async a=>{try{const t=await C.getSuggested(a.id);t!=null&&t.data&&D(t.data)}catch(t){console.error("Error fetching related products:",t)}},B=encodeURIComponent(`¡Hola! Me gustaría cotizar este producto para mi mascota: ${e==null?void 0:e.name}

Cantidad: ${r} unidades

¿Podrían enviarme más información y precios?`);encodeURIComponent(`¡Hola! Tengo consultas sobre este producto: ${e==null?void 0:e.name}

¿Me pueden ayudar con más información?`);const G=`https://wa.me/${U}?text=${B}`,R=()=>{window.open(G,"_blank")},i=a=>a?new Intl.NumberFormat("es-PE",{style:"currency",currency:"PEN",minimumFractionDigits:2}).format(a):"Consultar precio",J=a=>{const t=parseFloat(a)||0;return Array.from({length:5},(n,c)=>s.jsx(ie,{className:`w-4 h-4 ${c<Math.floor(t)?"text-yellow-400 fill-current":"text-gray-300"}`},c))},u=(e==null?void 0:e.price)&&(e==null?void 0:e.final_price)&&parseFloat(e.price)>parseFloat(e.final_price),K=u?Math.round((parseFloat(e.price)-parseFloat(e.final_price))/parseFloat(e.price)*100):0,_=[{url:e==null?void 0:e.image,type:"main",alt:"Imagen principal"},...((e==null?void 0:e.images)||[]).filter((a,t,n)=>t===n.findIndex(c=>c.url===a.url)).map((a,t)=>({url:a.url,type:"gallery",index:t,alt:`Imagen ${t+1}`}))];return s.jsxs("div",{className:"bg-gray-50 min-h-screen overflow-x-hidden",children:[s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4 lg:py-8",children:[s.jsxs("div",{className:"grid lg:grid-cols-2 gap-6 lg:gap-12",children:[s.jsxs("div",{className:"space-y-3 lg:space-y-4",children:[s.jsxs("div",{className:"relative bg-white rounded-lg shadow-lg overflow-hidden",children:[s.jsxs("div",{className:`aspect-square flex items-center justify-center p-4 lg:p-8 relative ${o?"cursor-zoom-out":"cursor-zoom-in"}`,onClick:Y,onMouseDown:q,onMouseMove:k,onMouseLeave:V,children:[s.jsx("img",{ref:I,src:d.url?`/storage/images/item/${d.url}`:"/api/cover/thumbnail/null",alt:(e==null?void 0:e.name)||"Producto",className:`w-full h-full object-contain transition-transform duration-300 ${o?"scale-150":"scale-100"}`,style:o?{transformOrigin:`${M.x}% ${M.y}%`}:{},onError:a=>{a.target.src="/api/cover/thumbnail/null"}}),s.jsx("div",{className:"absolute top-4 left-4 bg-black bg-opacity-50 text-white px-2 py-2 rounded text-sm",children:o?s.jsx(de,{className:"w-4 h-4"}):s.jsx(te,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"absolute top-4 right-4 space-y-2",children:[u&&s.jsxs("div",{className:"bg-red-500 text-white px-3 py-2 rounded-full text-sm font-bold",children:["-",K,"% OFF"]}),(e==null?void 0:e.is_new)&&s.jsx("div",{className:"bg-accent customtext-primary px-3 py-2 rounded-full text-sm font-bold",children:"¡Nuevo!"})]}),s.jsx("div",{className:"absolute bottom-4 right-4 flex space-x-2",children:s.jsx("button",{onClick:()=>{var a;(a=navigator.share)!=null&&a.call(navigator,{title:e==null?void 0:e.name,text:e==null?void 0:e.description,url:window.location.href})||navigator.clipboard.writeText(window.location.href),ee.success("Enlace copiado al portapapeles")},className:"w-10 h-10 bg-secondary  backdrop-blur-sm rounded-full flex items-center justify-center hover:bg-opacity-100 transition-all shadow-lg",children:s.jsx(le,{className:"w-5 h-5 text-white"})})})]}),_.length>1&&s.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-5 gap-2",children:_.map((a,t)=>s.jsx("button",{onClick:()=>A(a),className:`aspect-square bg-white rounded-lg overflow-hidden border-2 transition-all hover:border-primary ${d.url===a.url?"border-primary":"border-gray-200"}`,children:s.jsx("img",{src:`/storage/images/item/${a.url}`,alt:a.alt,className:"w-full h-full object-contain p-2",onError:n=>{n.target.src="/api/cover/thumbnail/null"}})},t))})]}),s.jsx("div",{className:"lg:hidden ",children:s.jsxs("div",{className:"text-start",children:[s.jsx("div",{className:"text-3xl sm:text-4xl font-bold font-title customtext-neutral-dark",children:i((e==null?void 0:e.final_price)||(e==null?void 0:e.price))}),u&&s.jsxs("div",{className:"flex items-center justify-start space-x-2 mt-2",children:[s.jsx("span",{className:"text-base customtext-neutral-light line-through",children:i(e.price)}),s.jsxs("span",{className:"bg-red-100 customtext-secondary px-2 py-1 rounded-full text-xs font-bold",children:["Ahorras ",i(parseFloat(e.price)-parseFloat(e.final_price))]})]})]})}),s.jsxs("div",{className:"space-y-4 lg:space-y-6 pb-20 lg:pb-0",children:[s.jsxs("div",{className:"flex flex-row  items-center justify-between gap-3",children:[(e==null?void 0:e.category)&&s.jsx("span",{className:"bg-accent bg-opacity-10 customtext-primary font-bold px-3 py-1 sm:px-4 sm:py-2 rounded-full text-xs sm:text-sm",children:e.category.name}),(e==null?void 0:e.brand)&&s.jsx("img",{src:e.brand.image?`/api/brands/media/${e.brand.image}`:"/assets/img/noimage/no_img.jpg",alt:e.brand.name||"Marca",className:"max-h-12 sm:max-h-16 lg:max-h-20 max-w-full object-contain",onError:a=>{a.target.src="/assets/img/noimage/no_img.jpg"}})]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl xl:text-4xl font-title font-bold text-gray-900 mb-3",children:e==null?void 0:e.name}),s.jsx("div",{className:"flex items-center space-x-4 mb-4",children:(e==null?void 0:e.rating)&&s.jsxs("div",{className:"flex items-center space-x-1",children:[J(e.rating),s.jsxs("span",{className:"text-sm text-gray-600 ml-2",children:["(",parseFloat(e.rating).toFixed(1),")"]})]})})]}),s.jsx("div",{className:" ",children:s.jsx("div",{ref:v,className:"prose max-w-none customtext-neutral-light transition-all duration-300 ",dangerouslySetInnerHTML:{__html:(e==null?void 0:e.description)||"<p>Sin descripción disponible.</p>"}})}),(e==null?void 0:e.specifications)&&Array.isArray(e.specifications)&&e.specifications.length>0&&s.jsxs("div",{className:"",children:[s.jsx("div",{ref:N,className:`space-y-3 transition-all duration-300 ${m?"":"max-h-40 overflow-hidden"}`,children:e.specifications.map((a,t)=>a.type==="general"&&s.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[s.jsx(ne,{className:"customtext-secondary w-4 h-4 flex-shrink-0"}),s.jsxs("span",{className:"font-bold customtext-neutral-dark",children:[a.title||"Especificación",":"]}),s.jsx("span",{className:"customtext-neutral-light",children:a.description||a.value||"No especificado"})]},t))}),T&&s.jsxs("button",{onClick:()=>L(!m),className:"mt-4 customtext-secondary hover:customtext-neutral-dark font-medium transition-colors flex items-center gap-2 text-sm",children:[m?"Ver menos":"Ver más características",s.jsx(re,{className:`w-4 h-4 transform transition-transform ${m?"rotate-90":""}`})]})]}),s.jsxs("div",{className:"hidden lg:block bg-white rounded-lg p-6 shadow-xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-4xl font-bold font-title customtext-neutral-dark",children:i((e==null?void 0:e.final_price)||(e==null?void 0:e.price))}),u&&s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsx("span",{className:"text-lg customtext-neutral-light line-through",children:i(e.price)}),s.jsxs("span",{className:"bg-red-100 customtext-secondary px-2 py-1 rounded-full text-sm font-bold",children:["Ahorras ",i(parseFloat(e.price)-parseFloat(e.final_price))]})]})]}),s.jsx("div",{className:"space-y-4 mt-4",children:s.jsx("div",{className:"flex items-center gap-3",children:s.jsxs("div",{className:"flex items-center bg-gray-50 rounded-xl border border-gray-200 p-1",children:[s.jsx("button",{onClick:()=>h(Math.max(1,r-1)),className:"w-10 h-10 flex items-center justify-center rounded-lg hover:bg-white hover:shadow-sm active:scale-95 transition-all duration-200 customtext-neutral-dark font-bold text-xl",disabled:r<=1,children:"−"}),s.jsx("div",{className:"w-16 h-10 flex items-center justify-center",children:s.jsx("span",{className:"customtext-neutral-dark font-bold text-lg",children:r})}),s.jsx("button",{onClick:()=>h(Math.min(10,r+1)),className:"w-10 h-10 flex items-center justify-center rounded-lg hover:bg-white hover:shadow-sm active:scale-95 transition-all duration-200 customtext-neutral-dark font-bold text-xl",disabled:r>=10,children:"+"})]})})})]}),s.jsx("div",{className:"space-y-3 mt-6",children:s.jsxs("button",{onClick:R,className:"w-full bg-secondary text-white py-4 px-6 rounded-xl font-bold flex items-center justify-center space-x-2 hover:bg-accent hover:customtext-primary transition-all shadow-lg hover:shadow-xl transform duration-500",children:[s.jsx(P,{className:"w-5 h-5"}),s.jsx("span",{children:"Solicitar Cotización"})]})})]})]})]}),y&&y.length>0&&s.jsxs("div",{className:"mt-8 lg:mt-16",children:[s.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900 mb-6 lg:mb-8 text-center",children:"Productos relacionados"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 lg:gap-6",children:y.slice(0,4).map((a,t)=>s.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-all transform hover:-translate-y-2",children:[s.jsx("div",{className:"aspect-square bg-gray-50 flex items-center justify-center p-2 lg:p-4",children:s.jsx("img",{src:a!=null&&a.image?`/storage/images/item/${a.image}`:"/api/cover/thumbnail/null",alt:a==null?void 0:a.name,className:"w-full h-full object-contain",onError:n=>{n.target.src="/api/cover/thumbnail/null"}})}),s.jsxs("div",{className:"p-3 lg:p-4",children:[s.jsx("h3",{className:"font-bold text-gray-900 mb-2 line-clamp-2 min-h-[2.5rem] lg:min-h-[3rem] text-sm lg:text-base",children:a==null?void 0:a.name}),s.jsx("div",{className:"text-sm lg:text-lg font-bold customtext-neutral-dark mb-2 lg:mb-3",children:i((a==null?void 0:a.final_price)||(a==null?void 0:a.price))}),s.jsx("a",{href:`/producto/${(a==null?void 0:a.slug)||(a==null?void 0:a.id)}`,className:"w-full bg-secondary text-white py-2 px-2 lg:px-4 rounded-lg font-semibold hover:bg-accent transition-colors text-center block text-xs lg:text-sm",children:"Ver producto"})]})]},a.id))})]})]}),s.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-4 z-40 shadow-lg",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center bg-gray-50 rounded-xl border border-gray-200 p-1",children:[s.jsx("button",{onClick:()=>h(Math.max(1,r-1)),className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-white hover:shadow-sm active:scale-95 transition-all duration-200 customtext-neutral-dark font-bold text-lg",disabled:r<=1,children:"−"}),s.jsx("div",{className:"w-12 h-8 flex items-center justify-center",children:s.jsx("span",{className:"customtext-neutral-dark font-bold text-sm",children:r})}),s.jsx("button",{onClick:()=>h(Math.min(10,r+1)),className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-white hover:shadow-sm active:scale-95 transition-all duration-200 customtext-neutral-dark font-bold text-lg",disabled:r>=10,children:"+"})]}),s.jsxs("button",{onClick:R,className:"flex-1 bg-secondary text-white py-3 px-4 rounded-xl font-bold flex items-center justify-center space-x-2 hover:bg-accent hover:customtext-primary transition-all shadow-lg active:scale-95",children:[s.jsx(P,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:"Solicitar Cotización"})]})]})}),s.jsx(oe,{children:H&&s.jsx(z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",onClick:()=>$(!1),children:s.jsxs(z.div,{initial:{scale:.8},animate:{scale:1},exit:{scale:.8},className:"relative max-w-4xl max-h-full",onClick:a=>a.stopPropagation(),children:[s.jsx("button",{onClick:()=>$(!1),className:"absolute top-4 right-4 text-white bg-black bg-opacity-50 rounded-full p-2 hover:bg-opacity-75 transition-all z-10",children:s.jsx(ce,{className:"w-6 h-6"})}),s.jsx("img",{src:d.url?`/storage/images/item/${d.url}`:"/api/cover/thumbnail/null",alt:e==null?void 0:e.name,className:"max-w-full max-h-full object-contain rounded-lg",onError:a=>{a.target.src="/api/cover/thumbnail/null"}})]})})})]})};export{Ve as default};
