var T=Object.defineProperty;var $=(s,r,o)=>r in s?T(s,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[r]=o;var L=(s,r,o)=>$(s,typeof r!="symbol"?r+"":r,o);import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as a}from"./index-BOnQTV8N.js";import{G as z}from"./Global-CazroCzF.js";import{m as A}from"./main-B6F2O9-U.js";import"./CardProductKatya-ncpmQ0JU.js";import{C as E}from"./Number2Currency-jIsa99f9.js";import{S as D}from"./search-BQ59Robe.js";import H from"./TopBar-D1pI-Fse.js";import{X as _}from"./x-fof_H3Vv.js";import{A as U}from"./index-BZvh78jk.js";import{m as W}from"./proxy-B0QLMKEh.js";import{C as j}from"./chevron-right-Cug7tVUE.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./index-pSueRYGM.js";import"./index-B6ujFmsw.js";import"./General-apRuNwp7.js";import"./createLucideIcon-DfjclApS.js";import"./preload-helper-BfFHrpNk.js";class B{}L(B,"getProducts",async r=>{try{const{status:o,result:l}=await A.Fetch("/api/items/searchProducts",{method:"POST",body:JSON.stringify(r)});if(!o)throw new Error((l==null?void 0:l.message)||"Error al obtener datos");return l}catch{return!1}});const M=({search:s,setSearch:r})=>{const[o,l]=a.useState([]),[v,d]=a.useState(!1),[p,N]=a.useState(!1),x=a.useRef(null),f=a.useRef();return a.useEffect(()=>{const n=c=>{f.current&&!f.current.contains(c.target)&&d(!1)};return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[]),a.useEffect(()=>{if(x.current&&clearTimeout(x.current),s.trim().length===0){l([]),d(!1);return}x.current=setTimeout(async()=>{var m;N(!0);const n={query:s.trim()},c=await B.getProducts(n);c&&((m=c.data)!=null&&m.length)?(l(c.data),d(!0)):(l([]),d(!1)),N(!1)},300)},[s]),e.jsxs("div",{className:"relative w-80",ref:f,children:[e.jsx("input",{type:"search",placeholder:"Buscar productos",value:s,onChange:n=>r(n.target.value),className:"w-full pr-14 py-4 pl-4 border rounded-full border-primary focus:ring-0 focus:outline-none placeholder:text-gray-400"}),e.jsx("a",{href:s.trim()?`/catalogo?search=${encodeURIComponent(s)}`:"#",className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-2 bg-primary text-white rounded-lg","aria-label":"Buscar",children:e.jsx(D,{})}),v&&e.jsx("div",{className:"absolute mt-2 w-full bg-white border rounded-lg shadow-lg z-50 max-h-60 overflow-y-auto",children:p?e.jsx("div",{className:"px-4 py-2 text-gray-500",children:"Buscando..."}):o.length>0?o.map(n=>{const c=parseFloat(n.price),m=parseFloat(n.discount);return e.jsx("a",{href:`/item/${n.slug}`,className:"block px-1 py-1 hover:bg-gray-100 transition text-sm !font-paragraph",children:e.jsxs("div",{className:"flex items-center gap-3 px-2 py-2",children:[e.jsx("div",{className:"w-12 h-12 shrink-0",children:e.jsx("img",{src:`/storage/images/item/${n.image}`,alt:n.name,onError:y=>y.target.src="/assets/img/noimage/no_img.jpg",className:"w-full h-full object-cover rounded",loading:"lazy"})}),e.jsx("div",{className:"flex-1",children:e.jsx("h2",{className:"text-[13px] font-medium customtext-neutral-dark leading-tight line-clamp-3",children:n.name})}),e.jsxs("div",{className:"text-right text-sm min-w-[80px] customtext-neutral-dark",children:[e.jsxs("p",{className:"text-primary font-semibold",children:[E()," ",m>0?m.toFixed(2):c.toFixed(2)]}),m>0&&e.jsxs("p",{className:"text-xs text-gray-500 line-through",children:[E()," ",c.toFixed(2)]})]})]})},n.id)}):e.jsx("div",{className:"px-4 py-2 text-gray-500",children:"Sin resultados"})})]})},xe=({items:s,data:r,cart:o,setCart:l,isUser:v,pages:d,headerPosts:p,contacts:N,generals:x=[]})=>{const[f,n]=a.useState(!1),[c,m]=a.useState(!1),[y,C]=a.useState(""),[u,h]=a.useState(!1),[g,b]=a.useState("main"),[w,F]=a.useState(null),k=a.useRef(null);a.useEffect(()=>(u?document.body.classList.add("overflow-hidden"):document.body.classList.remove("overflow-hidden"),()=>{document.body.classList.remove("overflow-hidden")}),[u]),o.reduce((t,i)=>Number(t)+Number(i.quantity),0),a.useEffect(()=>{function t(i){k.current&&!k.current.contains(i.target)&&h(!1)}return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]);const O=t=>{F(t),b("subcategories")},S=()=>{g==="subcategories"?b("categories"):g==="categories"&&b("main")},R=t=>{b("categories")},I=()=>{if(g==="main")return e.jsxs("nav",{className:"space-y-1",children:[e.jsx("div",{className:"pb-2 border-b border-gray-100",children:e.jsxs("button",{className:"w-full text-left py-3 px-2 text-lg font-semibold text-gray-800 hover:text-primary hover:bg-gray-50 rounded-lg transition-all duration-300 flex justify-between items-center",onClick:()=>R(),children:[e.jsx("span",{children:"Categorías"}),e.jsx(j,{className:"h-5 w-5 text-gray-400"})]})}),d.map((t,i)=>t.menuable&&(t.name!=="Blogs"||p.length>0)&&e.jsx("div",{className:"py-1",children:e.jsx("a",{href:t.path,className:"block py-3 px-2 text-lg font-medium text-gray-800 hover:text-primary hover:bg-gray-50 rounded-lg transition-all duration-300",onClick:()=>h(!1),children:t.name})},i))]});if(g==="categories")return e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"pb-4 border-b border-gray-100 mb-4",children:e.jsxs("button",{onClick:S,className:"flex items-center gap-2 py-2 px-2 text-sm text-gray-600 hover:text-primary transition-colors",children:[e.jsx(j,{className:"h-4 w-4 rotate-180"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 px-2",children:"Categorías"})]})}),e.jsx("div",{className:"h-80 max-h-80 overflow-y-auto",children:s&&s.length>0?s.map(t=>e.jsx("div",{className:"py-1",children:e.jsxs("div",{className:"flex  items-center justify-between py-3 px-2 text-gray-800 hover:text-primary hover:bg-gray-50 rounded-lg transition-all duration-300",children:[e.jsx("a",{href:`/catalogo?category=${t.slug}`,className:"flex-1",onClick:()=>h(!1),children:t.name}),t.subcategories&&t.subcategories.length>0&&e.jsx("button",{onClick:()=>O(t.name),className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(j,{className:"h-4 w-4 text-gray-400"})})]})},t.id)):e.jsx("div",{className:"py-4 text-center text-gray-500",children:"No hay categorías disponibles"})})]});if(g==="subcategories"&&w){const t=s.find(i=>i.name===w);return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"pb-4 border-b border-gray-100 mb-4",children:[e.jsxs("button",{onClick:S,className:"flex items-center gap-2 py-2 px-2 text-sm text-gray-600 hover:text-primary transition-colors",children:[e.jsx(j,{className:"h-4 w-4 rotate-180"}),"Volver a Categorías"]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 px-2",children:w})]}),t&&t.subcategories&&t.subcategories.length>0?t.subcategories.map((i,P)=>e.jsx("div",{className:"py-1",children:e.jsx("a",{href:`/catalogo?subcategory=${i.slug}`,className:"block py-3 px-2 text-gray-800 hover:text-primary hover:bg-gray-50 rounded-lg transition-all duration-300",onClick:()=>h(!1),children:i.name})},P)):e.jsx("div",{className:"py-4 text-center text-gray-500",children:"No hay subcategorías disponibles"})]})}};return e.jsxs("header",{id:"main-header",className:"sticky top-0 w-full z-[9999999] bg-white font-paragraph",children:[e.jsx(H,{data:r,which:(r==null?void 0:r.type_topbar)||"TopBarCart",items:x,cart:o,setCart:l,isUser:v,pages:d}),e.jsx("div",{className:"w-full border-b border-gray-100",children:e.jsx("div",{className:"flex justify-between w-full px-[5%] py-2 lg:py-4 mx-auto replace-max-w-here 2xl:max-w-7xl 2xl:px-0",children:e.jsxs("nav",{className:"flex h-[80px] items-center justify-between gap-10 w-full",children:[e.jsx("button",{onClick:()=>h(!u),className:"lg:hidden flex items-center justify-center bg-primary rounded-xl w-auto h-auto p-2 text-white transition-all duration-300 hover:scale-105","aria-label":"Toggle menu",children:u?e.jsx(_,{className:"h-8 w-8"}):e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("path",{d:"M10 5H20",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M4 12H20",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M4 19H14",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("a",{href:"/",className:"flex items-center gap-2",children:e.jsx("img",{src:`/assets/resources/logo.png?v=${crypto.randomUUID()}`,alt:z.APP_NAME,className:"h-20 lg:h-20 object-contain object-center",onError:t=>{t.target.onerror=null,t.target.src="/assets/img/logo-bk.svg"}})})}),e.jsx("nav",{className:"hidden lg:flex items-center justify-center flex-1",children:e.jsx("ul",{className:"flex items-center gap-8 font-gilroy_regular font-semibold text-lg",children:d.map((t,i)=>t.menuable&&(t.name!=="Blogs"||p.length>0)&&e.jsx("li",{children:e.jsx("a",{href:t.path,className:"hover:text-primary cursor-pointer transition-all duration-300",children:t.name})},i))})}),e.jsx("div",{className:"hidden lg:flex",children:e.jsx(M,{search:y,setSearch:C})})]})})}),e.jsx(U,{children:u&&e.jsx(e.Fragment,{children:e.jsx(W.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},className:"lg:hidden bg-white border-b border-gray-200 shadow-xl z-40 relative",ref:k,children:e.jsxs("div",{className:"px-[5%] py-6 max-h-[70vh] overflow-y-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsx(M,{search:y,setSearch:C})}),I()]})})})})]})};export{xe as default};
