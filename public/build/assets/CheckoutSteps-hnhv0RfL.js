import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as l}from"./index-BH53Isel.js";import{N as j}from"./Number2Currency-e57Tgsuk.js";import{B as H,a as re,D as he}from"./DeliveryPricesRest-n5FkKXRt.js";import{M as fe}from"./minus-jyhodMPN.js";import{P as ge}from"./plus-Bot15Khs.js";import{T as je}from"./trash-2-DK1wnsDn.js";import{a as ye,b as O,h as ve,c as Q,d as be,u as Ne,S as Se,_ as we}from"./useStateManager-7e1e8489.esm-oj4m82YY.js";import"./index-rimy3MAc.js";import{m as P}from"./main-BvVILmTO.js";import{G as T}from"./Global-ErywZRdd.js";import{I as L}from"./InputForm-DN14ZGms.js";import{l as Ce}from"./CheckoutSteps-DfQUmsqy.js";import{c as ke}from"./createLucideIcon-Cy5Ya80P.js";import"./index-yBjzXJbu.js";import"./hoist-non-react-statics.cjs-kbdZbs82.js";import"./index-fNjTmf9T.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=ke("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),Pe=({setCart:a,...n})=>{const i=()=>{a(c=>c.filter(o=>o.id!==n.id))},m=()=>{a(c=>c.map(o=>o.id===n.id?{...o,quantity:(o.quantity||1)+1}:o))},d=()=>{a(c=>c.map(o=>{if(o.id===n.id){const p=(o.quantity||1)-1;return p<=0?(i(n.id),null):{...o,quantity:p}}return o}).filter(Boolean))};return console.log(n),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:`/storage/images/item/${n.image}`,alt:n.name,className:"w-20 h-20 object-cover rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-lg mb-2",children:n.name}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Marca: ",e.jsx("span",{className:"customtext-neutral-dark",children:n.brand.name})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Disponibilidad: ",e.jsxs("span",{className:"customtext-neutral-dark",children:[n.stock>=n.quantity?"En stock":"Agotado"," "]})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["SKU: ",e.jsx("span",{className:"customtext-neutral-dark",children:n.sku})]})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"w-36 text-right",children:[e.jsxs("div",{className:"text-xs text-gray-500 line-through",children:["S/ ",Number(n.price*n.quantity).toFixed(2)]}),e.jsxs("div",{className:"font-bold text-lg mt-2",children:["S/ ",Number(n.final_price*n.quantity).toFixed(2)]}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsxs("div",{className:"flex items-center border border-gray-200 rounded-lg overflow-hidden shadow-sm",children:[e.jsx("button",{type:"button",onClick:d,className:"p-2 text-gray-600 hover:bg-gray-100 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary","aria-label":"Decrease quantity",children:e.jsx(fe,{size:16})}),e.jsx("div",{className:"w-12 h-8 flex justify-center items-center bg-white",children:e.jsx("span",{className:"font-semibold text-sm",children:n.quantity||1})}),e.jsx("button",{type:"button",onClick:m,className:"p-2 text-gray-600 hover:bg-gray-100 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary","aria-label":"Increase quantity",children:e.jsx(ge,{size:16})})]}),e.jsx("button",{onClick:i,className:"p-2 text-gray-400 hover:text-red-500 transition-colors duration-200 rounded-full hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-red-200","aria-label":"Remove item",children:e.jsx(je,{size:18})})]})]})})]})},n.id)};function qe({cart:a,setCart:n,onContinue:i,subTotal:m,envio:d,igv:c,totalFinal:o}){return console.log(a),e.jsxs("div",{className:"grid lg:grid-cols-5 gap-8",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsx("div",{className:"space-y-6",children:a.map((p,f)=>e.jsx(Pe,{...p,setCart:n},f))})}),e.jsxs("div",{className:"bg-[#F7F9FB] rounded-xl shadow-lg p-6 col-span-2 h-max",children:[e.jsx("h3",{className:"text-2xl font-bold pb-6",children:"Resumen de compra"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Subtotal"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",j(m)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"IGV"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",j(c)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Envío"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",j(d)]})]}),e.jsx("div",{className:"py-3 border-y-2 mt-6",children:e.jsxs("div",{className:"flex justify-between font-bold text-[20px] items-center",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["S/ ",j(o)]})]})}),e.jsxs("div",{className:"space-y-2 pt-4",children:[e.jsx(H,{onClick:i,children:"Continuar Compra"}),e.jsx(re,{href:"/",children:"Cancelar"})]}),e.jsx("div",{children:e.jsxs("p",{className:"text-sm customtext-neutral-dark",children:["Al realizar tu pedido, aceptas los ",e.jsx("a",{className:"customtext-primary font-bold",children:"Términos y Condiciones"}),", y que nosotros usaremos sus datos personales de acuerdo con nuestra ",e.jsx("a",{className:"customtext-primary font-bold",children:"Política de Privacidad"}),"."]})})]})]})]})}var Ee=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"];function _e(a){var n=a.defaultOptions,i=n===void 0?!1:n,m=a.cacheOptions,d=m===void 0?!1:m,c=a.loadOptions;a.options;var o=a.isLoading,p=o===void 0?!1:o,f=a.onInputChange,y=a.filterOption,x=y===void 0?null:y,q=ye(a,Ee),C=q.inputValue,E=l.useRef(void 0),u=l.useRef(!1),b=l.useState(Array.isArray(i)?i:void 0),I=O(b,2),$=I[0],k=I[1],v=l.useState(typeof C<"u"?C:""),w=O(v,2),_=w[0],G=w[1],Z=l.useState(i===!0),N=O(Z,2),A=N[0],F=N[1],J=l.useState(void 0),M=O(J,2),D=M[0],B=M[1],K=l.useState([]),U=O(K,2),s=U[0],t=U[1],r=l.useState(!1),h=O(r,2),S=h[0],Y=h[1],ne=l.useState({}),ee=O(ne,2),V=ee[0],se=ee[1],ie=l.useState(void 0),te=O(ie,2),oe=te[0],le=te[1],ce=l.useState(void 0),ae=O(ce,2),de=ae[0],ue=ae[1];d!==de&&(se({}),ue(d)),i!==oe&&(k(Array.isArray(i)?i:void 0),le(i)),l.useEffect(function(){return u.current=!0,function(){u.current=!1}},[]);var W=l.useCallback(function(z,R){if(!c)return R();var g=c(z,R);g&&typeof g.then=="function"&&g.then(R,function(){return R()})},[c]);l.useEffect(function(){i===!0&&W(_,function(z){u.current&&(k(z||[]),F(!!E.current))})},[]);var me=l.useCallback(function(z,R){var g=ve(z,R,f);if(!g){E.current=void 0,G(""),B(""),t([]),F(!1),Y(!1);return}if(d&&V[g])G(g),B(g),t(V[g]),F(!1),Y(!1);else{var xe=E.current={};G(g),F(!0),Y(!D),W(g,function(X){u&&xe===E.current&&(E.current=void 0,F(!1),B(g),t(X||[]),Y(!1),se(X?Q(Q({},V),{},be({},g,X)):V))})}},[d,W,D,V,f]),pe=S?[]:_&&D?s:$||[];return Q(Q({},q),{},{options:pe,isLoading:A||p,onInputChange:me,filterOption:x})}var Ie=l.forwardRef(function(a,n){var i=_e(a),m=Ne(i);return l.createElement(Se,we({ref:n},m))}),Fe=Ie;function $e(){let a="";for(let n=0;n<12;n++){const i=Math.floor(Math.random()*10);a+=i}return a}const Ae=a=>new Promise((n,i)=>{try{console.log(a);const m=$e(a.email);console.log(m),window.Culqi.publicKey=T.CULQI_PUBLIC_KEY,window.Culqi.settings({title:T.APP_NAME,email:a.email,currency:"PEN",amount:a.amount*100,order:`${m}`}),console.log(window.Culqi.settings),window.Culqi.options({lang:"es",installments:!1,paymentMethods:{tarjeta:!0,yape:!0,bancaMovil:!0,agente:!0,billetera:!0,cuotealo:!0},style:{logo:T.APP_URL+"/assets/resources/logo.png",bannerColor:T.APP_COLOR_PRIMARY,buttonBackground:T.APP_COLOR_PRIMARY}}),window.Culqi.open(),window.culqi=async function(){try{if(!window.Culqi.token){i("No se obtuvo un token de Culqi");return}const d=window.Culqi.token.id;console.log("✅ Token generado:",d),a={...a,token:d,orderNumber:m},console.log("_request actualizado",a);const{status:c,result:o}=await P.Fetch("./api/pago",{method:"POST",body:JSON.stringify(a)});c||console.log((o==null?void 0:o.message)||"Error en el pago"),window.Culqi.close(),P.Notify.add({icon:"/assets/img/icon.svg",title:"Pago Exitoso",body:"El pago se procesó correctamente.",type:"success"}),n(o)}catch(d){P.Notify.add({icon:"/assets/img/icon.svg",title:"Error en el Pago",body:d.message,type:"danger"}),i(d.message||"Error en el pago")}},document.addEventListener("culqi.error",function(d){var c,o;P.Notify.add({icon:"/assets/img/icon.svg",title:"Error en Culqi",body:((c=d.detail)==null?void 0:c.message)||"Error desconocido",type:"danger"}),i(((o=d.detail)==null?void 0:o.message)||"Error desconocido")})}catch(m){P.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:m.message,type:"danger"}),i("Error en la integración con Culqi")}}),Re=({title:a,description:n,selected:i,onSelect:m,disabled:d})=>e.jsxs("div",{className:`flex w-full items-center gap-3 p-4 border rounded-xl cursor-pointer transition-all duration-300 customtext-neutral-dark 
                }`,onClick:m,children:[e.jsx("div",{className:`w-5 h-5 border-2 rounded-full flex items-center justify-center ${i?"border-primary":""}`,children:i&&e.jsx("div",{className:"w-3 h-3 bg-primary rounded-full"})}),e.jsxs("div",{className:"customtext-neutral-light",children:[e.jsx("h4",{className:"text-sm ",children:a}),e.jsx("p",{className:"text-xs",children:n})]})]});function Le({cart:a,setSale:n,setCode:i,setDelivery:m,setCart:d,onContinue:c,noContinue:o,subTotal:p,igv:f,totalFinal:y,user:x,setEnvio:q,envio:C,ubigeos:E=[]}){var K,U;const[u,b]=l.useState({name:(x==null?void 0:x.name)||"",lastname:(x==null?void 0:x.lastname)||"",email:(x==null?void 0:x.email)||"",department:"",province:"",district:"",address:"",number:"",comment:"",reference:"",ubigeo:null}),[I,$]=l.useState(!1),[k,v]=l.useState([]),[w,_]=l.useState(null),[G,Z]=l.useState(null),[N,A]=l.useState({}),F=()=>{const s={},t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return u.name.trim()||(s.name="Nombre es requerido"),u.lastname.trim()||(s.lastname="Apellido es requerido"),u.email.trim()?t.test(u.email)||(s.email="Email inválido"):s.email="Email es requerido",u.ubigeo||(s.ubigeo="Ubicación es requerida"),u.address||(s.address="Dirección es requerida"),w||(s.shipping="Seleccione un método de envío"),A(s),Object.keys(s).length===0},J=async s=>{if(!s)return;A(r=>({...r,ubigeo:""}));const{data:t}=s;b(r=>({...r,department:t.departamento,province:t.provincia,district:t.distrito,ubigeo:t.reniec})),$(!0);try{const r=await he.getShippingCost({ubigeo:t.reniec}),h=[];r.data.is_free?(h.push({type:"free",price:0,description:r.data.standard.description,deliveryType:r.data.standard.type,characteristics:r.data.standard.characteristics}),r.data.express.price>0&&h.push({type:"express",price:r.data.express.price,description:r.data.express.description,deliveryType:r.data.express.type,characteristics:r.data.express.characteristics})):r.data.is_agency?h.push({type:"agency",price:0,description:r.data.agency.description,deliveryType:r.data.agency.type,characteristics:r.data.agency.characteristics}):h.push({type:"standard",price:r.data.standard.price,description:r.data.standard.description,deliveryType:r.data.standard.type,characteristics:r.data.standard.characteristics}),v(h),_(h[0].type),q(h[0].price)}catch(r){console.error("Error al obtener precios de envío:",r),P.Notify.add({icon:"/assets/img/icon.svg",title:"Sin cobertura",body:"No realizamos envíos a esta ubicación",type:"danger"}),v([]),_(null),q(0)}$(!1)},M=async s=>{var t;if(s.preventDefault(),!x){P.Notify.add({icon:"/assets/img/icon.svg",title:"Acceso requerido",body:"Debe iniciar sesión para continuar",type:"danger"});return}if(!F()){const r=Object.keys(N)[0];r&&((t=document.querySelector(`[name="${r}"]`))==null||t.scrollIntoView({behavior:"smooth",block:"center"}));return}try{const r={user_id:x.id,...u,fullname:`${u.name} ${u.lastname}`,country:"Perú",amount:y,delivery:C,cart:a},h=await Ae(r);h.status?(n(h.sale),m(h.delivery),i(h.code),d([]),c()):P.Notify.add({icon:"/assets/img/icon.svg",title:"Error en el pago",body:h.message||"Pago rechazado",type:"danger"})}catch{P.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:"Ocurrió un error al procesar el pedido",type:"danger"})}},D=l.useCallback(Ce.debounce((s,t)=>{if(s.length<3){t([]);return}fetch(`/api/ubigeo/search?q=${encodeURIComponent(s)}`).then(r=>{if(!r.ok)throw new Error("Error en la respuesta");return r.json()}).then(r=>{const h=r.map(S=>({value:S.reniec,label:`${S.distrito}, ${S.provincia}, ${S.departamento}`,data:{inei:S.inei,reniec:S.reniec,departamento:S.departamento,provincia:S.provincia,distrito:S.distrito}}));t(h)}).catch(r=>{console.error("Error:",r),t([])})},300),[]);l.useEffect(()=>{A(s=>{const t={...s};return Object.keys(u).forEach(r=>{u[r]&&delete t[r]}),t})},[u]);const B=s=>({control:t=>({...t,border:`1px solid ${s?"#ef4444":"transparent"}`,boxShadow:"none",minHeight:"50px","&:hover":{borderColor:s?"#ef4444":"#6b7280"},borderRadius:"0.75rem"}),menu:t=>({...t,zIndex:9999,marginTop:"4px",borderRadius:"8px"}),option:t=>({...t,color:"#1f2937",backgroundColor:"white","&:hover":{backgroundColor:"#f3f4f6"}})});return e.jsxs("div",{className:"grid lg:grid-cols-5 gap-8",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("form",{className:"space-y-6",onSubmit:M,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(L,{name:"name",label:"Nombres",value:u.name,error:N.name,onChange:s=>b(t=>({...t,name:s.target.value})),required:!0}),e.jsx(L,{name:"lastname",label:"Apellidos",value:u.lastname,error:N.lastname,onChange:s=>b(t=>({...t,lastname:s.target.value})),required:!0})]}),e.jsx(L,{name:"email",label:"Correo electrónico",type:"email",value:u.email,error:N.email,onChange:s=>b(t=>({...t,email:s.target.value})),required:!0}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"block text-sm 2xl:text-base mb-1 customtext-neutral-dark",children:"Ubicación de entrega *"}),e.jsx(Fe,{name:"ubigeo",cacheOptions:!0,loadOptions:D,onChange:J,placeholder:"Buscar distrito, provincia o departamento...",loadingMessage:()=>"Buscando ubicaciones...",noOptionsMessage:({inputValue:s})=>s.length<3?"Escribe al menos 3 caracteres":"No se encontraron resultados",isLoading:I,styles:B(!!N.ubigeo),formatOptionLabel:({data:s})=>e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:s.distrito}),e.jsxs("div",{className:"text-gray-500",children:[s.provincia,", ",s.departamento]})]}),className:"w-full rounded-xl transition-all duration-300",menuPortalTarget:document.body}),N.ubigeo&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:N.ubigeo})]}),e.jsx(L,{name:"address",label:"Dirección *",value:u.address,error:N.address,onChange:s=>b(t=>({...t,address:s.target.value})),required:!0}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(L,{label:"Número",value:u.number,onChange:s=>b(t=>({...t,number:s.target.value}))}),e.jsx(L,{label:"Referencia",value:u.reference,onChange:s=>b(t=>({...t,reference:s.target.value}))})]}),k.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Método de envío"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:k.map(s=>e.jsx(Re,{title:s.deliveryType,price:s.price,description:s.description,selected:w===s.type,onSelect:()=>{_(s.type),q(s.price),A(t=>({...t,shipping:""}))}},s.type))}),w&&k.length>0&&e.jsx("div",{className:"space-y-4 mt-4",children:(U=(K=k.find(s=>s.type===w))==null?void 0:K.characteristics)==null?void 0:U.map((s,t)=>e.jsxs("div",{className:"flex items-start gap-4 bg-secondary p-4 rounded-xl",children:[e.jsx("div",{className:"w-5 flex-shrink-0",children:e.jsx(Oe,{className:"customtext-primary"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm font-medium customtext-neutral-dark",children:s})})]},`char-${t}`))})]}),!o&&e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(re,{type:"button",onClick:()=>window.history.back(),children:"Regresar"}),e.jsx(H,{type:"submit",loading:I,children:"Continuar"})]})]})}),e.jsxs("div",{className:"bg-[#F7F9FB] rounded-xl shadow-lg p-6 col-span-2 h-max",children:[e.jsx("h3",{className:"text-2xl font-bold pb-6",children:"Resumen"}),e.jsx("div",{className:"space-y-4 border-b-2 pb-6",children:a.map(s=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:`/storage/images/item/${s.image}`,alt:s.name,className:"w-16 h-16 object-cover rounded-lg"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Cantidad: ",s.quantity]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["S/ ",j(s.price)]})]})]},s.id))}),e.jsxs("div",{className:"space-y-4 mt-6",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal:"}),e.jsxs("span",{children:["S/ ",j(p)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"IGV (18%):"}),e.jsxs("span",{children:["S/ ",j(f)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Envío:"}),e.jsxs("span",{children:["S/ ",j(C)]})]}),e.jsx("div",{className:"pt-4 border-t-2",children:e.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:["S/ ",j(y)]})]})}),e.jsx(H,{onClick:M,className:"w-full mt-6",children:"Ir a Pagar"}),e.jsxs("p",{className:"text-xs text-gray-600 mt-4 text-center",children:["Al completar tu compra aceptas nuestros"," ",e.jsx("a",{href:"/terminos",className:"text-blue-600 hover:underline",children:"Términos y Condiciones"})]})]})]})]})}function Te({cart:a,code:n,delivery:i}){const d=(a.reduce((p,f)=>{const y=f.final_price;return p+y*f.quantity},0)/1.18).toFixed(2),c=(d*.18).toFixed(2),o=parseFloat(d)+parseFloat(c)+parseFloat(i);return e.jsx("div",{className:"mx-auto",children:e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h2",{className:"text-[20px] customtext-neutral-light",children:"Gracias por tu compra 🎉"}),e.jsx("p",{className:"customtext-neutral-dark text-5xl font-semibold",children:"Tu orden ha sido recibida"}),e.jsxs("div",{className:"py-4",children:[e.jsx("div",{className:" customtext-neutral-light",children:"Código de pedido"}),e.jsx("div",{className:"customtext-neutral-dark text-lg font-semibold",children:`#${n}`})]}),e.jsxs("div",{className:"space-y-4 max-w-lg bg-[#F7F9FB] mx-auto p-8 rounded-xl",children:[e.jsx("div",{className:"space-y-6 border-b-2 pb-6",children:a.map((p,f)=>e.jsx("div",{className:"rounded-lg",children:e.jsxs("div",{className:"flex   gap-4",children:[e.jsx("div",{className:"bg-white p-2 rounded-xl w-max",children:e.jsx("img",{src:`/storage/images/item/${p.image}`,alt:p.name,className:"w-20 h-20 object-cover rounded  "})}),e.jsxs("div",{className:" text-start",children:[e.jsx("h3",{className:"font-medium text-lg mb-2",children:p.name}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Marca: ",e.jsx("span",{className:"customtext-neutral-dark",children:p.brand.name})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Cantidad: ",e.jsxs("span",{className:"customtext-neutral-dark",children:[p.quantity," "]})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["SKU: ",e.jsx("span",{className:"customtext-neutral-dark",children:p.sku})]})]})]})},f))}),e.jsxs("div",{className:"space-y-4 mt-6",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Subtotal"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",j(d)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"IGV"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",j(c)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Envío"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",j(i)]})]}),e.jsx("div",{className:"py-3 border-y-2 mt-6",children:e.jsxs("div",{className:"flex justify-between font-bold text-[20px] items-center",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["S/ ",j(o)]})]})})]}),e.jsx("div",{className:"pt-3",children:e.jsx(H,{href:"/catalogo",children:"  Seguir Comprando"})})]})]})})})}function as({cart:a,setCart:n,user:i,ubigeos:m=[],items:d}){const[c,o]=l.useState(1),f=(a.reduce((v,w)=>{const _=w.final_price;return v+_*w.quantity},0)/1.18).toFixed(2),y=(f*.18).toFixed(2),[x,q]=l.useState(0),C=parseFloat(f)+parseFloat(y)+parseFloat(x),[E,u]=l.useState([]),[b,I]=l.useState([]),[$,k]=l.useState([]);return l.useEffect(()=>{const v=document.createElement("script");return v.src=T.CULQI_API,v.async=!0,v.onload=()=>{window.culqi=function(){window.Culqi.token?console.log("✅ Token recibido:",window.Culqi.token.id):window.Culqi.order?console.log("✅ Orden recibida:",window.Culqi.order):console.error("❌ Error en Culqi:",window.Culqi.error)}},document.body.appendChild(v),()=>{document.body.removeChild(v)}},[]),e.jsx("div",{className:"min-h-screen bg-[#F7F9FB] py-12 px-primary 2xl:px-0 2xl:max-w-7xl mx-auto",children:e.jsxs("div",{className:"bg-white   p-8 rounded-xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between max-w-3xl mx-auto",children:[e.jsx("div",{className:`text-sm ${c===1?"customtext-primary font-medium":"customtext-neutral-dark"}`,children:"1. Carrito de compra"}),e.jsx("div",{className:`text-sm ${c===2?"customtext-primary font-medium":"customtext-neutral-dark"}`,children:"2. Detalles de envío"}),e.jsx("div",{className:`text-sm ${c===3?"customtext-primary font-medium":"customtext-neutral-dark"}`,children:"3. Orden confirmada"})]}),e.jsx("div",{className:"mt-4 h-1 max-w-3xl mx-auto bg-gray-200",children:e.jsx("div",{className:"h-1 bg-primary transition-all duration-500",style:{width:`${(c-1)/2*100}%`}})})]}),c===1&&e.jsx(qe,{cart:a,setCart:n,onContinue:()=>o(2),subTotal:f,envio:x,igv:y,totalFinal:C}),c===2&&e.jsx(Le,{items:d,setCode:I,setDelivery:k,cart:a,setSale:u,setCart:n,onContinue:()=>o(3),noContinue:()=>o(1),subTotal:f,envio:x,setEnvio:q,igv:y,totalFinal:C,user:i,ubigeos:m}),c===3&&e.jsx(Te,{code:b,delivery:$,cart:E,subTotal:f,envio:x,igv:y,totalFinal:C})]})})}export{as as default};
