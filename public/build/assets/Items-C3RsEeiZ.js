import{j as s}from"./AboutSimple-Cf8x2fCZ.js";import{B as Is}from"./Base-B7OhQLEN.js";import{S}from"./SwitchFormGroup-DXN0cwVk.js";import{T as Ts}from"./TextareaFormGroup-CliirJM1.js";import{r as l}from"./index-BOnQTV8N.js";import{c as $s}from"./ReactAppend-QR5TrZfj.js";import{s as se}from"./server.browser-Bf4gQIc7.js";import{S as K}from"./CartKuchara-D9l7c7at.js";import{I as We}from"./ItemsRest-BelP-LFB.js";import{A as Fs}from"./AmenitiesRest-CxHKy3lz.js";import{A as Es}from"./ApplicationsRest-CgWp9Tlw.js";import{M as Me}from"./Modal-xDw9ufjg.js";import{T as As}from"./Table-hR1LHIgy.js";import{I as be}from"./ImageFormGroup-40MuGzez.js";import{I as C}from"./InputFormGroup-iZIO11ZN.js";import{Q as Ps}from"./QuillFormGroup-BXX8qnUc.js";import{S as Oe}from"./SelectAPIFormGroup-BZe8H0Ph.js";import{S as G}from"./SelectFormGroup-X8WqJHHl.js";import{D as Ve}from"./DxButton-DV0H-ZcL.js";import{C as Ms,F as c}from"./CreateReactScript-d60iGIqA.js";import{C as Ge,N as Le}from"./Number2Currency-ld0bFawA.js";import{R as g}from"./ReactAppend-Vm5G2nof.js";import{S as ze}from"./SetSelectValue-UxyCmHse.js";import"./main-B6F2O9-U.js";import{t as Os}from"./CardProductKatya-ncpmQ0JU.js";import{D as Be}from"./DynamicField-DFjsryM4.js";import"./index-yBjzXJbu.js";import"./Global-Bz6gVLc5.js";import"./tippy-react.esm-DmkRJDEW.js";import"./index-pSueRYGM.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./index-B6ujFmsw.js";/* empty css              */import"./Logout-BpuTJ_83.js";import"./MenuItemContainer-DcxtOi47.js";import"./index.esm-C48oHfFw.js";import"./index-ngrFHoWO.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./CanAccess-D2C6GWbm.js";import"./BasicRest-BML1C-ua.js";import"./BooleanLimit-D-OsQsek.js";/* empty css               */import"./General-CE1RDd44.js";import"./LaravelSession-Dz9cpV3l.js";const Vs=new We,Gs=({gridRef:z,modalRef:A,excelTemplate:Q})=>{const[_,B]=l.useState(null),[te,X]=l.useState(!1),[f,v]=l.useState(""),[I,y]=l.useState(!1),[u,N]=l.useState("reset"),W=m=>{B(m.target.files[0])},U=async()=>{var P,M;if(!_){v("Por favor, selecciona un archivo."),y(!0);return}const m=new FormData;m.append("file",_),m.append("mode",u),X(!0);try{const p=await Vs.importData(m);if(p.error){const q=Array.isArray(p.error)?p.error.join(`
`):p.error;v(`Error en la importación:
${q}`),y(!0)}else v(p.message),y(!1),$(z.current).dxDataGrid("instance").refresh(),$(A.current).modal("hide"),Os.success("Importacion completada con exito",{description:"Todos tus productos han sido importados correctamente.",duration:3e3,position:"bottom-center",richColors:!0})}catch(p){v("Error al importar: "+(((M=(P=p.response)==null?void 0:P.data)==null?void 0:M.error)||p.message)),y(!0)}X(!1)};return s.jsxs("div",{className:"bg-white p-4",children:[s.jsx("div",{className:"mb-4 pb-3 border-bottom",children:s.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[s.jsx("h5",{className:"mb-0 text-dark fw-semibold",children:"Importar Productos"}),Q&&s.jsxs("a",{href:`/cloud/${Q}`,download:!0,className:"btn btn-sm btn-outline-secondary",children:[s.jsx("i",{className:"fas fa-download me-2"}),"Descargar Plantilla"]})]})}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"form-label text-dark fw-semibold mb-3",children:"Modo de Importación"}),s.jsxs("div",{className:"row g-3",children:[s.jsx("div",{className:"col-md-6",children:s.jsx("div",{className:`card h-100 ${u==="reset"?"border-primary":"border"}`,style:{cursor:"pointer",transition:"all 0.2s ease",borderWidth:u==="reset"?"2px":"1px"},onClick:()=>N("reset"),children:s.jsx("div",{className:"card-body p-3",children:s.jsxs("div",{className:"d-flex align-items-start",children:[s.jsx("input",{className:"form-check-input mt-1 me-3 flex-shrink-0",type:"radio",name:"importMode",id:"modeReset",value:"reset",checked:u==="reset",onChange:m=>N(m.target.value),style:{width:"20px",height:"20px",borderRadius:"50%"}}),s.jsxs("label",{className:"form-check-label flex-grow-1",htmlFor:"modeReset",style:{cursor:"pointer"},children:[s.jsxs("div",{className:"d-flex align-items-center mb-2",children:[s.jsx("div",{className:"d-flex align-items-center justify-content-center me-2",style:{width:"36px",height:"36px",borderRadius:"8px",background:"#6c757d",color:"white"},children:s.jsx("i",{className:"fas fa-redo-alt"})}),s.jsx("strong",{className:"text-dark",children:"Importar desde cero"})]}),s.jsx("small",{className:"text-muted",children:"Reemplaza todos los productos existentes con los del archivo Excel"})]})]})})})}),s.jsx("div",{className:"col-md-6",children:s.jsx("div",{className:`card h-100 ${u==="add_update"?"border-primary":"border"}`,style:{cursor:"pointer",transition:"all 0.2s ease",borderWidth:u==="add_update"?"2px":"1px"},onClick:()=>N("add_update"),children:s.jsx("div",{className:"card-body p-3",children:s.jsxs("div",{className:"d-flex align-items-start",children:[s.jsx("input",{className:"form-check-input mt-1 me-3 flex-shrink-0",type:"radio",name:"importMode",id:"modeAddUpdate",value:"add_update",checked:u==="add_update",onChange:m=>N(m.target.value),style:{width:"20px",height:"20px",borderRadius:"50%"}}),s.jsxs("label",{className:"form-check-label flex-grow-1",htmlFor:"modeAddUpdate",style:{cursor:"pointer"},children:[s.jsxs("div",{className:"d-flex align-items-center mb-2",children:[s.jsx("div",{className:"d-flex align-items-center justify-content-center me-2",style:{width:"36px",height:"36px",borderRadius:"8px",background:"#0d6efd",color:"white"},children:s.jsx("i",{className:"fas fa-sync-alt"})}),s.jsx("strong",{className:"text-dark",children:"Agregar / Actualizar"})]}),s.jsx("small",{className:"text-muted",children:"Actualiza productos existentes (por SKU) o agrega nuevos sin eliminar"})]})]})})})})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"form-label text-dark fw-semibold mb-2",children:"Archivo Excel"}),s.jsx("input",{className:"form-control form-control-lg",type:"file",accept:".xlsx,.xls",onChange:W}),_&&s.jsxs("div",{className:"mt-2 p-2 bg-light rounded d-flex align-items-center",children:[s.jsx("i",{className:"fas fa-file-excel text-success me-2",style:{fontSize:"20px"}}),s.jsx("div",{className:"flex-grow-1",children:s.jsx("span",{className:"text-dark",children:_.name})}),s.jsx("button",{type:"button",className:"btn btn-sm btn-light",onClick:()=>B(null),children:s.jsx("i",{className:"fas fa-times"})})]})]}),s.jsx("button",{onClick:U,disabled:te||!_,className:"btn btn-primary btn-lg w-100",type:"button",children:te?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Procesando..."]}):s.jsxs(s.Fragment,{children:[s.jsx("i",{className:"fas fa-upload me-2"}),"Importar Productos"]})}),f&&s.jsx("div",{className:`alert ${I?"alert-danger":"alert-success"} mt-3 mb-0`,role:"alert",children:s.jsxs("div",{className:"d-flex align-items-start",children:[s.jsx("i",{className:`fas ${I?"fa-exclamation-circle":"fa-check-circle"} me-2 mt-1`}),s.jsxs("div",{className:"flex-grow-1",children:[s.jsx("strong",{children:I?"Error":"Completado"}),s.jsx("div",{className:"mt-1",children:f})]})]})})]})},L=new We,Ls=new Fs,zs=new Es,Bs=({categories:z,brands:A,collections:Q,stores:_,generals:B})=>{//!FALTA EDIT AND DELETEDE GALERIA
var Ce;const[te,X]=l.useState([]),f=l.useRef(),v=l.useRef(),I=l.useRef(),y=l.useRef(),u=l.useRef(),N=l.useRef(),W=l.useRef(),U=l.useRef(),m=l.useRef(),P=l.useRef(),M=l.useRef(),p=l.useRef(),q=l.useRef(),re=l.useRef(),h=l.useRef(),x=l.useRef(),b=l.useRef(),ae=l.useRef(),ie=l.useRef(),le=l.useRef(),J=l.useRef(),Ue=l.useRef([]),qe=l.useRef([]),ne=l.useRef(),Y=l.useRef(),Z=l.useRef(),[Je,je]=l.useState(!1),[He,Ke]=l.useState(null),[Ws,Qe]=l.useState(null),[Us,Xe]=l.useState(null),[j,w]=l.useState([]),ve=l.useRef(),[R,T]=l.useState([]),ye=l.useRef(),[D,F]=l.useState([]),ce=l.useRef(),[qs,Ne]=l.useState([]),[Ye,Ze]=l.useState([]),[Js,we]=l.useState([]),[es,ss]=l.useState([]),ts=e=>{const r=Array.from(e.target.files).map(a=>({file:a,url:URL.createObjectURL(a)}));w(a=>[...a,...r])},rs=e=>{e.preventDefault();const r=Array.from(e.dataTransfer.files).map(a=>({file:a,url:URL.createObjectURL(a)}));w(a=>[...a,...r])};l.useEffect(()=>{as(),is()},[]);const as=async()=>{const e=await Ls.paginate({page:1,pageSize:1e3});e!=null&&e.data&&Ze(e.data)},is=async()=>{const e=await zs.paginate({page:1,pageSize:1e3});e!=null&&e.data&&ss(e.data)},ls=e=>{e.preventDefault()},ns=(e,t)=>{e.preventDefault(),j[t].id?w(a=>a.map((i,o)=>o===t?{...i,toDelete:!0}:i)):w(a=>a.filter((i,o)=>o!==t))},[k,oe]=l.useState(null),cs=(e,t)=>{oe(t),e.dataTransfer.effectAllowed="move"},os=()=>{oe(null)},ds=e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},ms=(e,t)=>{if(e.preventDefault(),k===null||k===t)return;const r=[...j],a=r[k];r.splice(k,1),r.splice(t,0,a),w(r),oe(null)},ps=e=>{const r=Array.from(e.target.files).map(a=>({file:a,name:a.name,url:URL.createObjectURL(a)}));T(a=>[...a,...r])},us=(e,t)=>{e.preventDefault();const r=R[t];r.url&&!r.file?T(a=>a.map((i,o)=>o===t?{...i,toDelete:!0}:i)):T(a=>a.filter((i,o)=>o!==t))},[O,de]=l.useState(null),fs=(e,t)=>{de(t),e.dataTransfer.effectAllowed="move"},hs=()=>{de(null)},xs=e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},gs=(e,t)=>{if(e.preventDefault(),O===null||O===t)return;const r=[...R],a=r[O];r.splice(O,1),r.splice(t,0,a),T(r),de(null)},bs=e=>{e.preventDefault();const t=ce.current.value.trim();t&&(F(r=>[...r,{url:t,order:r.length+1}]),ce.current.value="")},js=(e,t)=>{e.preventDefault();const r=D[t];r.order&&!r.new?F(a=>a.map((i,o)=>o===t?{...i,toDelete:!0}:i)):F(a=>a.filter((i,o)=>o!==t))},[V,me]=l.useState(null),vs=(e,t)=>{me(t),e.dataTransfer.effectAllowed="move"},ys=()=>{me(null)},Ns=e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},ws=(e,t)=>{if(e.preventDefault(),V===null||V===t)return;const r=[...D],a=r[V];r.splice(V,1),r.splice(t,0,a),F(r),me(null)},Re=e=>{var t,r,a;if(X(e||null),e!=null&&e.id?je(!0):je(!1),I.current.value=(e==null?void 0:e.id)||"",$(y.current).val((e==null?void 0:e.category_id)||null).trigger("change"),$(u.current).val((e==null?void 0:e.collection_id)||null).trigger("change"),ze(N.current,(t=e==null?void 0:e.subcategory)==null?void 0:t.id,(r=e==null?void 0:e.subcategory)==null?void 0:r.name),$(W.current).val((e==null?void 0:e.brand_id)||null).trigger("change"),$(J.current).val(e!=null&&e.store_id&&e.store_id!==""?e.store_id:"").trigger("change"),U.current.value=(e==null?void 0:e.name)||"",ie.current.value=(e==null?void 0:e.sku)||"",m.current.value=(e==null?void 0:e.color)||"",P.current.value=(e==null?void 0:e.size)||"",M.current.value=(e==null?void 0:e.summary)||"",p.current.value=(e==null?void 0:e.price)||0,q.current.value=(e==null?void 0:e.discount)||0,ne.current.value=(e==null?void 0:e.weight)||0,ze(re.current,(e==null?void 0:e.tags)??[],"id","name"),h.current.value=null,x.current.value=null,h.image.src=e!=null&&e.banner?`/storage/images/item/${e.banner}`:"",x.image.src=e!=null&&e.image?`/storage/images/item/${e.image}`:"",b.image.src=e!=null&&e.texture?`/storage/images/item/${e.texture}`:"",ae.editor.root.innerHTML=(e==null?void 0:e.description)??"",e!=null&&e.pdf&&Array.isArray(e.pdf)){const i=e.pdf.map(o=>({url:o.url?`/storage/images/item/${o.url}`:o,name:o.name||"Documento.pdf",order:o.order||0}));T(i)}else T([]);if(e!=null&&e.linkvideo&&Array.isArray(e.linkvideo)?F(e.linkvideo.map(i=>({url:i.url||i,order:i.order||0}))):F([]),e!=null&&e.images){const i=e.images.map(o=>({id:o.id,url:`/storage/images/item/${o.url}`}));w(i)}else w([]);if(e!=null&&e.specifications?pe(e.specifications.map(i=>({type:i.type,title:i.title,description:i.description,image:i.image||""}))):pe([]),ke(((a=e==null?void 0:e.features)==null?void 0:a.map(i=>typeof i=="object"?i:{feature:i}))||[]),le.current.value=e==null?void 0:e.stock,e!=null&&e.amenities&&Array.isArray(e.amenities)){const i=e.amenities.map(o=>o.id||o);Ne(i),setTimeout(()=>{$(Y.current).val(i).trigger("change")},100)}else Ne([]),setTimeout(()=>{$(Y.current).val([]).trigger("change")},100);if(e!=null&&e.applications&&Array.isArray(e.applications)){const i=e.applications.map(o=>o.id||o);we(i),setTimeout(()=>{$(Z.current).val(i).trigger("change")},100)}else we([]),setTimeout(()=>{$(Z.current).val([]).trigger("change")},100);h.deleteRef&&(h.deleteRef.value=""),x.deleteRef&&(x.deleteRef.value=""),b.deleteRef&&(b.deleteRef.value=""),$(v.current).modal("show")},Rs=async e=>{e.preventDefault();const t=De.filter(n=>{var d;return typeof n=="string"?n.trim()!=="":typeof n=="object"?((d=n.feature)==null?void 0:d.trim())!=="":!1}),r=Se.filter(n=>n.title&&n.title.trim()!==""||n.description&&n.description.trim()!==""),a={id:I.current.value||void 0,category_id:y.current.value,collection_id:u.current.value||null,subcategory_id:N.current.value,brand_id:W.current.value,name:U.current.value,sku:ie.current.value,color:m.current.value,size:P.current.value,summary:M.current.value,price:p.current.value,discount:q.current.value,tags:$(re.current).val(),description:ae.current.value,stock:le.current.value||0,features:t,specifications:r,weight:ne.current.value||0,store_id:J.current.value&&J.current.value!==""?J.current.value:null,amenities:$(Y.current).val()||[],applications:$(Z.current).val()||[]},i=new FormData;for(const n in a)if(n==="features"||n==="specifications")i.append(n,JSON.stringify(a[n]));else if(n==="tags"){const d=a[n];Array.isArray(d)?d.forEach((xe,ge)=>{i.append(`tags[${ge}]`,xe)}):d&&i.append("tags[0]",d)}else if(n==="amenities"){const d=a[n];Array.isArray(d)&&d.length>0&&d.forEach((xe,ge)=>{i.append(`amenities[${ge}]`,xe)})}else i.append(n,a[n]);const o=x.current.files[0];o&&i.append("image",o);const H=b.current.files[0];H&&i.append("texture",H);const _e=h.current.files[0];_e&&i.append("banner",_e);const Ie=R.filter(n=>!n.toDelete);let Te=0;Ie.forEach(n=>{n.file&&(i.append(`pdf[${Te}]`,n.file),Te++)});const $e=Ie.map((n,d)=>({index:d,order:d+1,name:n.name||"Documento.pdf"}));$e.length>0&&i.append("pdf_order",JSON.stringify($e));const Fe=R.map((n,d)=>n.toDelete?d:null).filter(n=>n!==null);Fe.length>0&&i.append("deleted_pdfs",JSON.stringify(Fe));const Ee=D.filter(n=>!n.toDelete).map((n,d)=>({url:n.url,order:d+1}));Ee.length>0&&i.append("linkvideo",JSON.stringify(Ee));const Ae=D.map((n,d)=>n.toDelete?d:null).filter(n=>n!==null);Ae.length>0&&i.append("deleted_videos",JSON.stringify(Ae)),h.getDeleteFlag&&h.getDeleteFlag()&&i.append("banner_delete","DELETE"),x.getDeleteFlag&&x.getDeleteFlag()&&i.append("image_delete","DELETE"),b.getDeleteFlag&&b.getDeleteFlag()&&i.append("texture_delete","DELETE");let fe=0,he=0;const ee=[];j.forEach((n,d)=>{n.toDelete||(n.file?(i.append(`gallery[${fe}]`,n.file),ee.push({type:"new",index:fe}),fe++):(i.append(`gallery_ids[${he}]`,n.id),ee.push({type:"existing",id:n.id,index:he}),he++))}),ee.length>0&&i.append("gallery_order",JSON.stringify(ee));const Pe=j.filter(n=>n.toDelete).map(n=>n.id);Pe.length>0&&Pe.forEach((n,d)=>{i.append(`deleted_images[${d}]`,n)});for(let[n,d]of i.entries());await L.save(i)&&(h.resetDeleteFlag&&h.resetDeleteFlag(),x.resetDeleteFlag&&x.resetDeleteFlag(),b.resetDeleteFlag&&b.resetDeleteFlag(),$(f.current).dxDataGrid("instance").refresh(),$(v.current).modal("hide"),w([]),T([]),F([]))},Ds=async({id:e,value:t})=>{await L.boolean({id:e,field:"visible",value:t})&&$(f.current).dxDataGrid("instance").refresh()},E=async({id:e,field:t,value:r})=>{await L.boolean({id:e,field:t,value:r})&&$(f.current).dxDataGrid("instance").refresh()},ks=async e=>{const{isConfirmed:t}=await K.fire({title:"Eliminar item",text:"¿Estás seguro de eliminar este item?",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"});!t||!await L.delete(e)||$(f.current).dxDataGrid("instance").refresh()},[De,ke]=l.useState([]),[Se,pe]=l.useState([]),Ss=["Principal","General"],[Hs,Ks]=l.useState(!1),ue=l.useRef(),Cs=()=>{$(ue.current).modal("show")},_s=async()=>{try{K.fire({title:"Exportando items...",text:"Por favor espere",allowOutsideClick:!1,didOpen:()=>{K.showLoading()}}),await L.exportData(),K.fire({icon:"success",title:"Exportación exitosa",text:"El archivo se ha descargado correctamente",timer:2e3})}catch(e){console.error("Error al exportar:",e),K.fire({icon:"error",title:"Error",text:e.message||"No se pudo exportar los items. Por favor intente nuevamente."})}};return s.jsxs(s.Fragment,{children:[s.jsx(As,{gridRef:f,title:"Items",rest:L,toolBar:e=>{e.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(f.current).dxDataGrid("instance").refresh()}}),e.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Agregar",hint:"Agregar",onClick:()=>Re()}}),e.unshift({widget:"dxButton",location:"after",options:{icon:"upload",text:"Importar Datos",hint:"Importar Datos",onClick:()=>Cs()}}),e.unshift({widget:"dxButton",location:"after",options:{icon:"download",text:"Exportar Items",hint:"Exportar Items (Formato Excel)",onClick:()=>_s()}})},exportable:!0,exportableName:"Items",columns:[{dataField:"id",caption:"ID",visible:!1},c.has("items","category_id")&&{dataField:"category.name",caption:"Categoría",width:"120px",cellTemplate:(e,{data:t})=>{var r,a,i;e.html(se.renderToString(s.jsxs(s.Fragment,{children:[s.jsx("b",{className:"d-block fst-italic text-muted",children:(r=t.collection)==null?void 0:r.name}),s.jsx("b",{className:"d-block",children:(a=t.category)==null?void 0:a.name}),s.jsx("small",{className:"text-muted",children:(i=t.subcategory)==null?void 0:i.name})]})))}},c.has("items","subcategory_id")&&{dataField:"subcategory.name",caption:"Subcategoría",visible:!1},c.has("items","brand_id")&&{dataField:"brand.name",caption:"Marca",width:"120px"},{dataField:"name",caption:"Nombre",minWidth:"300px",cellTemplate:(e,{data:t})=>{const a=((i,o)=>{if(!i)return"";const H=i.split(" ");return H.length>o?H.slice(0,o).join(" ")+"...":i})(t.summary,12);e.html(se.renderToString(s.jsxs(s.Fragment,{children:[s.jsx("b",{children:t.name}),s.jsx("br",{}),s.jsx("span",{children:a})]})))}},c.has("items","sku")&&{dataField:"sku",caption:"SKU",width:"120px"},{dataField:"final_price",caption:"Precio",dataType:"number",width:"75px",cellTemplate:(e,{data:t})=>{e.html(se.renderToString(s.jsxs(s.Fragment,{children:[t.discount>0&&s.jsxs("small",{className:"d-block text-muted",style:{textDecoration:"line-through"},children:[Ge()," ",Le(t.price)]}),s.jsxs("span",{children:[Ge()," ",Le(t.discount>0?t.discount:t.price)]})]})))}},c.has("items","weight")&&{dataField:"weight",caption:"Peso",dataType:"number",width:"75px"},{dataField:"image",caption:"Imagen",width:"90px",allowFiltering:!1,cellTemplate:(e,{data:t})=>{g(e,s.jsx("img",{src:`/storage/images/item/${t.image}`,style:{width:"80px",height:"48px",objectFit:"contain",objectPosition:"center",borderRadius:"4px"},onError:r=>r.target.src="/api/cover/thumbnail/null"}))}},c.has("items","banner")&&{dataField:"banner",caption:"Imagen Banner",width:"90px",allowFiltering:!1,cellTemplate:(e,{data:t})=>{g(e,s.jsx("img",{src:`/storage/images/item/${t.banner}`,style:{width:"80px",height:"48px",objectFit:"contain",objectPosition:"center",borderRadius:"4px"},onError:r=>r.target.src="/api/cover/thumbnail/null"}))}},c.has("items","is_new")&&{dataField:"is_new",caption:"Nuevo",dataType:"boolean",width:"80px",cellTemplate:(e,{data:t})=>{const r=t.is_new===1||t.is_new==="1"||t.is_new===!0;g(e,s.jsx(S,{checked:r,onChange:a=>E({id:t.id,field:"is_new",value:a.target.checked?1:0})}))}},c.has("items","offering")&&{dataField:"offering",caption:"En oferta",dataType:"boolean",width:"80px",cellTemplate:(e,{data:t})=>{const r=t.offering===1||t.offering==="1"||t.offering===!0;g(e,s.jsx(S,{checked:r,onChange:a=>E({id:t.id,field:"offering",value:a.target.checked?1:0})}))}},c.has("items","recommended")&&{dataField:"recommended",caption:"Recomendado",dataType:"boolean",width:"80px",cellTemplate:(e,{data:t})=>{const r=t.recommended===1||t.recommended==="1"||t.recommended===!0;g(e,s.jsx(S,{checked:r,onChange:a=>E({id:t.id,field:"recommended",value:a.target.checked?1:0})}))}},c.has("items","featured")&&{dataField:"featured",caption:"Destacado",dataType:"boolean",width:"80px",cellTemplate:(e,{data:t})=>{const r=t.featured===1||t.featured==="1"||t.featured===!0;g(e,s.jsx(S,{checked:r,onChange:a=>E({id:t.id,field:"featured",value:a.target.checked?1:0})}))}},c.has("items","views")&&{dataField:"views",caption:"Vistas",dataType:"number",width:"80px",cellTemplate:(e,{data:t})=>{const r=t.views||0;e.html(se.renderToString(s.jsxs("div",{className:"text-center",children:[s.jsx("i",{className:"fas fa-eye text-primary me-1"}),s.jsx("span",{className:"fw-bold",children:r.toLocaleString()})]})))}},c.has("items","most_view")&&{dataField:"most_view",caption:"Más visto",dataType:"boolean",width:"80px",cellTemplate:(e,{data:t})=>{const r=t.most_view===1||t.most_view==="1"||t.most_view===!0;g(e,s.jsx(S,{checked:r,onChange:a=>E({id:t.id,field:"most_view",value:a.target.checked?1:0})}))}},c.has("items","is_detail")&&{dataField:"is_detail",caption:"Con Detalle",dataType:"boolean",width:"90px",cellTemplate:(e,{data:t})=>{const r=t.is_detail===1||t.is_detail==="1"||t.is_detail===!0;g(e,s.jsx(S,{checked:r,onChange:a=>E({id:t.id,field:"is_detail",value:a.target.checked?1:0})}))}},c.has("items","sold_out")&&{dataField:"sold_out",caption:"Agotado",dataType:"boolean",width:"85px",cellTemplate:(e,{data:t})=>{const r=t.sold_out===1||t.sold_out==="1"||t.sold_out===!0;g(e,s.jsx(S,{checked:r,onChange:a=>E({id:t.id,field:"sold_out",value:a.target.checked?1:0})}))}},c.has("items","visible")&&{dataField:"visible",caption:"Visible",dataType:"boolean",width:"80px",cellTemplate:(e,{data:t})=>{g(e,s.jsx(S,{checked:t.visible,onChange:r=>Ds({id:t.id,value:r.target.checked})}))}},{caption:"Acciones",width:"100px",cellTemplate:(e,{data:t})=>{e.css("text-overflow","unset"),e.append(Ve({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>Re(t)})),e.append(Ve({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>ks(t.id)}))},allowFiltering:!1,allowExporting:!1}]}),s.jsx(Me,{modalRef:v,title:Je?"Editar item":"Agregar item",onSubmit:Rs,size:"xl",children:s.jsxs("div",{id:"principal-container",children:[s.jsx("input",{ref:I,type:"hidden"}),s.jsxs("ul",{className:"nav nav-pills nav-justified mb-4",role:"tablist",style:{backgroundColor:"#f8f9fa",borderRadius:"8px",padding:"4px",border:"1px solid #e9ecef"},children:[s.jsx("li",{className:"nav-item",role:"presentation",children:s.jsxs("button",{className:"nav-link active",id:"basic-info-tab","data-bs-toggle":"pill","data-bs-target":"#basic-info",type:"button",role:"tab","aria-controls":"basic-info","aria-selected":"true",style:{borderRadius:"6px",fontWeight:"500",transition:"all 0.3s ease"},children:[s.jsx("i",{className:"fas fa-info-circle me-2"}),"Información Básica"]})}),s.jsx("li",{className:"nav-item",role:"presentation",children:s.jsxs("button",{className:"nav-link",id:"pricing-tab","data-bs-toggle":"pill","data-bs-target":"#pricing",type:"button",role:"tab","aria-controls":"pricing","aria-selected":"false",style:{borderRadius:"6px",fontWeight:"500",transition:"all 0.3s ease"},children:[s.jsx("i",{className:"fas fa-dollar-sign me-2"}),"Precios y Stock"]})}),s.jsx("li",{className:"nav-item",role:"presentation",children:s.jsxs("button",{className:"nav-link",id:"multimedia-tab","data-bs-toggle":"pill","data-bs-target":"#multimedia",type:"button",role:"tab","aria-controls":"multimedia","aria-selected":"false",style:{borderRadius:"6px",fontWeight:"500",transition:"all 0.3s ease"},children:[s.jsx("i",{className:"fas fa-images me-2"}),"Multimedia"]})}),s.jsx("li",{className:"nav-item",role:"presentation",children:s.jsxs("button",{className:"nav-link",id:"features-tab","data-bs-toggle":"pill","data-bs-target":"#features",type:"button",role:"tab","aria-controls":"features","aria-selected":"false",style:{borderRadius:"6px",fontWeight:"500",transition:"all 0.3s ease"},children:[s.jsx("i",{className:"fas fa-list-ul me-2"}),"Características"]})})]}),s.jsxs("div",{className:"tab-content",children:[s.jsx("div",{className:"tab-pane fade show active",id:"basic-info",role:"tabpanel","aria-labelledby":"basic-info-tab",children:s.jsxs("div",{className:"row g-3",children:[s.jsx("div",{className:"col-md-6",children:s.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[s.jsx("div",{className:"card-header",children:s.jsxs("h6",{className:"mb-0",children:[s.jsx("i",{className:"fas fa-tag me-2"}),"Identificación"]})}),s.jsxs("div",{className:"card-body",children:[s.jsx(C,{eRef:ie,label:"SKU",required:!0,hidden:!c.has("items","sku")}),s.jsx(C,{eRef:U,label:"Nombre del Producto",required:!0,hidden:!c.has("items","name")}),s.jsxs("div",{className:"row",children:[s.jsx("div",{className:"col-md-6",children:s.jsx(C,{eRef:m,label:"Color",required:!0,hidden:!c.has("items","color")})}),s.jsx("div",{className:"col-md-6",children:s.jsx(C,{eRef:P,label:"Talla",required:!0,hidden:!c.has("items","size")})}),s.jsx("div",{className:"col-md-6",children:s.jsx(C,{eRef:ne,label:"Peso",hidden:!c.has("items","weight")})})]})]})]})}),s.jsx("div",{className:"col-md-6",children:s.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[s.jsx("div",{className:"card-header",children:s.jsxs("h6",{className:"mb-0",children:[s.jsx("i",{className:"fas fa-sitemap me-2"}),"Categorización"]})}),s.jsxs("div",{className:"card-body",children:[s.jsx(G,{eRef:y,label:"Categoría",required:!0,dropdownParent:"#principal-container",onChange:e=>Ke(e.target.value),hidden:!c.has("items","category_id"),children:z.map((e,t)=>s.jsx("option",{value:e.id,children:e.name},t))}),s.jsx(G,{eRef:u,label:"Colección",dropdownParent:"#principal-container",onChange:e=>Qe(e.target.value),hidden:!c.has("items","collection_id"),children:Q.map((e,t)=>s.jsx("option",{value:e.id,children:e.name},t))}),s.jsx(Oe,{eRef:N,label:"Subcategoría",searchAPI:"/api/admin/subcategories/paginate",searchBy:"name",filter:["category_id","=",He],dropdownParent:"#principal-container",hidden:!c.has("items","subcategory_id")}),s.jsx(G,{eRef:W,label:"Marca",dropdownParent:"#principal-container",hidden:!c.has("items","brand_id"),children:A.map((e,t)=>s.jsx("option",{value:e.id,children:e.name},t))})]})]})}),s.jsx("div",{className:"col-12",children:s.jsxs("div",{className:"card border-0 shadow-sm",children:[s.jsx("div",{className:"card-header",children:s.jsxs("h6",{className:"mb-0",children:[s.jsx("i",{className:"fas fa-align-left me-2"}),"Descripción"]})}),s.jsxs("div",{className:"card-body",children:[s.jsx(Ts,{eRef:M,label:"Resumen",rows:3,hidden:!c.has("items","summary")}),s.jsxs(G,{eRef:J,label:"Tienda",dropdownParent:"#principal-container",onChange:e=>Xe(e.target.value),hidden:!c.has("items","store_id"),children:[s.jsx("option",{value:"",children:"Seleccionar tienda (opcional)"}),_.map((e,t)=>s.jsx("option",{value:e.id,children:e.name},t))]}),s.jsx(Oe,{id:"tags",eRef:re,searchAPI:"/api/admin/tags/paginate",searchBy:"name",label:"Tags",hidden:!c.has("items","is_tags"),dropdownParent:"#principal-container",tags:!0,multiple:!0})]})]})})]})}),s.jsx("div",{className:"tab-pane fade",id:"pricing",role:"tabpanel","aria-labelledby":"pricing-tab",children:s.jsxs("div",{className:"row g-3",children:[s.jsx("div",{className:"col-md-6",children:s.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[s.jsx("div",{className:"card-header",children:s.jsxs("h6",{className:"mb-0",children:[s.jsx("i",{className:"fas fa-dollar-sign me-2"}),"Precios"]})}),s.jsxs("div",{className:"card-body",children:[s.jsx(C,{eRef:p,label:"Precio Regular",type:"number",step:"0.01",required:!0,hidden:!c.has("items","price")}),s.jsx(C,{eRef:q,label:"Precio con Descuento",type:"number",step:"0.01"})]})]})}),s.jsx("div",{className:"col-md-6",children:s.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[s.jsx("div",{className:"card-header",children:s.jsxs("h6",{className:"mb-0",children:[s.jsx("i",{className:"fas fa-boxes me-2"}),"Inventario"]})}),s.jsx("div",{className:"card-body",children:s.jsx(C,{label:"Stock Disponible",eRef:le,type:"number",required:!0,hidden:!c.has("items","stock")})})]})})]})}),s.jsx("div",{className:"tab-pane fade",id:"multimedia",role:"tabpanel","aria-labelledby":"multimedia-tab",children:s.jsxs("div",{className:"row g-3",children:[s.jsx("div",{className:"col-md-6",children:s.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[s.jsx("div",{className:"card-header",children:s.jsxs("h6",{className:"mb-0",children:[s.jsx("i",{className:"fas fa-image me-2"}),"Imágenes Principales"]})}),s.jsx("div",{className:"card-body",children:s.jsxs("div",{className:"row",children:[s.jsx(be,{eRef:h,name:"banner",label:"Banner",aspect:2/1,col:"col-12",hidden:!c.has("items","banner")}),s.jsx(be,{eRef:x,name:"image",label:"Imagen Principal",aspect:1,col:"col-md-6",hidden:!c.has("items","image")}),s.jsx(be,{eRef:b,name:"texture",label:"Textura",aspect:1,col:"col-md-6",hidden:!c.has("items","texture")})]})})]})}),s.jsx("div",{className:"col-md-6",children:s.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[s.jsx("div",{className:"card-header",children:s.jsxs("h6",{className:"mb-0",children:[s.jsx("i",{className:"fas fa-photo-video me-2"}),"Galería y Multimedia"]})}),s.jsxs("div",{className:"card-body",children:[s.jsxs("div",{className:"mb-3",children:[s.jsxs("label",{className:"form-label fw-semibold text-dark mb-3",children:[s.jsx("i",{className:"fas fa-images me-2 text-primary"}),"Galería de Imágenes",j.filter(e=>!e.toDelete).length>0&&s.jsx("span",{className:"badge bg-primary ms-2",children:j.filter(e=>!e.toDelete).length})]}),s.jsx("input",{id:"input-item-gallery",ref:ve,type:"file",multiple:!0,accept:"image/*",hidden:!0,onChange:ts}),s.jsxs("div",{className:"gallery-container",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:"16px",padding:"16px",backgroundColor:"#f8f9fa",borderRadius:"12px",border:"2px dashed #dee2e6",minHeight:"160px"},children:[j.filter(e=>!e.toDelete).map((e,t)=>{const r=j.findIndex(i=>i===e),a=t+1;return s.jsxs("div",{className:"gallery-item position-relative",draggable:!0,onDragStart:i=>cs(i,r),onDragEnd:os,onDragOver:ds,onDrop:i=>ms(i,r),style:{aspectRatio:"1",borderRadius:"12px",overflow:"hidden",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",transition:"all 0.3s ease",cursor:"grab",transform:k===r?"scale(1.05)":"scale(1)",opacity:k===r?.8:1,border:"3px solid transparent",background:"white"},onMouseEnter:i=>{k===null&&(i.currentTarget.style.transform="scale(1.02)",i.currentTarget.style.boxShadow="0 6px 20px rgba(0,0,0,0.15)")},onMouseLeave:i=>{k===null&&(i.currentTarget.style.transform="scale(1)",i.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.1)")},children:[s.jsx("div",{className:"position-absolute top-0 start-0 m-2",children:s.jsx("span",{className:"badge bg-primary rounded-circle d-flex align-items-center justify-content-center",style:{width:"24px",height:"24px",fontSize:"11px",fontWeight:"bold"},children:a})}),s.jsx("img",{src:e.url,alt:`Imagen ${a}`,className:"w-100 h-100",style:{objectFit:"cover",pointerEvents:"none"}}),s.jsx("div",{className:"position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center",style:{background:"rgba(0,0,0,0.7)",opacity:0,transition:"opacity 0.3s ease"},onMouseEnter:i=>i.currentTarget.style.opacity=1,onMouseLeave:i=>i.currentTarget.style.opacity=0,children:s.jsxs("div",{className:"d-flex gap-2",children:[s.jsx("button",{type:"button",className:"btn btn-light btn-sm rounded-circle d-flex align-items-center justify-content-center",style:{width:"32px",height:"32px"},title:"Mover imagen",children:s.jsx("i",{className:"fas fa-arrows-alt text-dark"})}),s.jsx("button",{type:"button",className:"btn btn-danger btn-sm rounded-circle d-flex align-items-center justify-content-center",style:{width:"32px",height:"32px"},onClick:i=>ns(i,r),title:"Eliminar imagen",children:s.jsx("i",{className:"fas fa-trash text-white"})})]})})]},r)}),s.jsx("div",{className:"gallery-add-button d-flex flex-column align-items-center justify-content-center",style:{aspectRatio:"1",border:"3px dashed #71b6f9",borderRadius:"12px",backgroundColor:"rgba(13, 110, 253, 0.05)",cursor:"pointer",transition:"all 0.3s ease",minHeight:"120px"},onClick:()=>ve.current.click(),onDrop:rs,onDragOver:ls,onMouseEnter:e=>{e.currentTarget.style.backgroundColor="rgba(13, 110, 253, 0.1)",e.currentTarget.style.borderColor="#0056b3",e.currentTarget.style.transform="scale(1.02)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="rgba(13, 110, 253, 0.05)",e.currentTarget.style.borderColor="#0d6efd",e.currentTarget.style.transform="scale(1)"},children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mb-2 bg-primary",style:{width:"48px",height:"48px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto"},children:s.jsx("i",{className:"fas fa-plus text-white fa-lg"})}),s.jsx("p",{className:"mb-0 text-primary fw-semibold",style:{fontSize:"12px"},children:"Agregar Imagen"}),s.jsx("small",{className:"text-muted",style:{fontSize:"10px"},children:"Arrastra o haz clic"})]})})]}),j.filter(e=>!e.toDelete).length===0&&s.jsxs("div",{className:"text-center py-4 text-muted",children:[s.jsx("i",{className:"fas fa-images fa-3x mb-3 opacity-50"}),s.jsx("p",{className:"mb-1",children:"No hay imágenes en la galería"}),s.jsx("small",{children:'Arrastra archivos aquí o haz clic en "Agregar Imagen"'})]})]}),s.jsxs("div",{className:"mb-4",hidden:!c.has("items","pdf"),children:[s.jsxs("label",{className:"form-label fw-semibold text-dark mb-3",children:[s.jsx("i",{className:"fas fa-file-pdf me-2 text-danger"}),"Archivos PDF (Manuales / Catálogos)",R.filter(e=>!e.toDelete).length>0&&s.jsx("span",{className:"badge bg-danger ms-2",children:R.filter(e=>!e.toDelete).length})]}),s.jsx("input",{ref:ye,type:"file",multiple:!0,accept:".pdf",hidden:!0,onChange:ps}),s.jsx("div",{className:"list-group mb-3",children:R.filter(e=>!e.toDelete).map((e,t)=>{const r=R.findIndex(a=>a===e);return s.jsxs("div",{draggable:!0,onDragStart:a=>fs(a,r),onDragEnd:hs,onDragOver:xs,onDrop:a=>gs(a,r),className:"list-group-item d-flex align-items-center justify-content-between",style:{cursor:"grab",opacity:O===r?.5:1,backgroundColor:O===r?"#f8f9fa":"white",transition:"all 0.2s ease"},children:[s.jsxs("div",{className:"d-flex align-items-center flex-grow-1",style:{minWidth:0},children:[s.jsx("span",{className:"badge bg-danger me-3",style:{minWidth:"28px"},children:t+1}),s.jsx("i",{className:"fas fa-grip-vertical text-muted me-3"}),s.jsx("i",{className:"fas fa-file-pdf text-danger me-2"}),s.jsx("span",{className:"text-truncate",style:{maxWidth:"250px"},children:e.name})]}),s.jsxs("div",{className:"d-flex gap-2 flex-shrink-0",children:[!e.file&&s.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-outline-primary",children:s.jsx("i",{className:"fas fa-eye"})}),s.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:a=>us(a,r),children:s.jsx("i",{className:"fas fa-trash"})})]})]},r)})}),s.jsxs("button",{type:"button",className:"btn btn-outline-danger w-100",onClick:()=>ye.current.click(),children:[s.jsx("i",{className:"fas fa-plus me-2"}),"Agregar PDFs"]})]}),s.jsxs("div",{className:"mb-3",hidden:!c.has("items","linkvideo"),children:[s.jsxs("label",{className:"form-label fw-semibold text-dark mb-3",children:[s.jsx("i",{className:"fas fa-video me-2 text-success"}),"Links de Videos",D.filter(e=>!e.toDelete).length>0&&s.jsx("span",{className:"badge bg-success ms-2",children:D.filter(e=>!e.toDelete).length})]}),s.jsx("div",{className:"list-group mb-3",children:D.filter(e=>!e.toDelete).map((e,t)=>{const r=D.findIndex(a=>a===e);return s.jsxs("div",{draggable:!0,onDragStart:a=>vs(a,r),onDragEnd:ys,onDragOver:Ns,onDrop:a=>ws(a,r),className:"list-group-item d-flex align-items-center justify-content-between",style:{cursor:"grab",opacity:V===r?.5:1,backgroundColor:V===r?"#f8f9fa":"white",transition:"all 0.2s ease"},children:[s.jsxs("div",{className:"d-flex align-items-center flex-grow-1",style:{minWidth:0,overflow:"hidden"},children:[s.jsx("span",{className:"badge bg-success me-3 flex-shrink-0",style:{minWidth:"28px"},children:t+1}),s.jsx("i",{className:"fas fa-grip-vertical text-muted me-3 flex-shrink-0"}),s.jsx("i",{className:"fas fa-video text-success me-2 flex-shrink-0"}),s.jsx("span",{className:"small",style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"100%"},title:e.url,children:e.url})]}),s.jsxs("div",{className:"d-flex gap-2 flex-shrink-0 ms-2",children:[s.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-outline-primary",children:s.jsx("i",{className:"fas fa-external-link-alt"})}),s.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:a=>js(a,r),children:s.jsx("i",{className:"fas fa-trash"})})]})]},r)})}),s.jsxs("div",{className:"input-group",children:[s.jsx("input",{ref:ce,type:"url",className:"form-control",placeholder:"https://youtube.com/watch?v=..."}),s.jsxs("button",{type:"button",className:"btn btn-success",onClick:bs,children:[s.jsx("i",{className:"fas fa-plus me-2"}),"Agregar"]})]})]})]})]})})]})}),s.jsx("div",{className:"tab-pane fade",id:"features",role:"tabpanel","aria-labelledby":"features-tab",children:s.jsxs("div",{className:"row g-3",children:[c.has("items","is_features")&&s.jsx("div",{className:`${c.has("items","is_specifications")?"col-md-6":"col-12"}`,children:s.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[s.jsx("div",{className:"card-header",children:s.jsxs("h6",{className:"mb-0",children:[s.jsx("i",{className:"fas fa-list-ul me-2"}),"Características"]})}),s.jsx("div",{className:"card-body",children:s.jsx(Be,{ref:Ue,label:"Lista de Características",structure:"",value:De,onChange:ke})})]})}),c.has("items","is_specifications")&&s.jsx("div",{className:`${c.has("items","is_features")?"col-md-6":"col-12"}`,children:s.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[s.jsx("div",{className:"card-header",children:s.jsxs("h6",{className:"mb-0",children:[s.jsx("i",{className:"fas fa-cogs me-2"}),"Especificaciones"]})}),s.jsx("div",{className:"card-body",children:s.jsx(Be,{ref:qe,label:"Especificaciones Técnicas",structure:{type:"",title:"",description:""},value:Se,onChange:pe,typeOptions:Ss})})]})}),c.has("items","is_amenities")&&s.jsx("div",{className:"col-12",children:s.jsxs("div",{className:"card border-0 shadow-sm",children:[s.jsx("div",{className:"card-header bg-light",children:s.jsxs("h6",{className:"mb-0",children:[s.jsx("i",{className:"fas fa-star-circle me-2 text-warning"}),"Cualidades / Atributos"]})}),s.jsxs("div",{className:"card-body",children:[s.jsx(G,{eRef:Y,label:"Seleccionar Cualidades",dropdownParent:"#principal-container",multiple:!0,templateResult:e=>{if(!e.id)return e.text;const r=$(e.element).data("image");return r?$(`
                                                                <div style="display: flex; align-items: center; gap: 10px;">
                                                                    <div style="width: 32px; height: 32px; border-radius: 50%; background: #71b6f9; display: flex; align-items: center; justify-content: center; padding: 4px; flex-shrink: 0;">
                                                                        <img src="/storage/images/amenity/${r}" 
                                                                             style="width: 100%; height: 100%; object-fit: contain; border-radius: 50%;" 
                                                                             onerror="this.style.display='none'" />
                                                                    </div>
                                                                    <span>${e.text}</span>
                                                                </div>
                                                            `):e.text},templateSelection:e=>{if(!e.id)return e.text;const r=$(e.element).data("image");return r?$(`
                                                                <div style="display: flex; align-items: center; gap: 8px;">
                                                                    <div style="width: 24px; height: 24px; border-radius: 50%; background: #71b6f9; display: flex; align-items: center; justify-content: center; padding: 3px; flex-shrink: 0;">
                                                                        <img src="/storage/images/amenity/${r}" 
                                                                             style="width: 100%; height: 100%; object-fit: contain; border-radius: 50%;" 
                                                                             onerror="this.style.display='none'" />
                                                                    </div>
                                                                    <span>${e.text}</span>
                                                                </div>
                                                            `):e.text},children:Ye.map(e=>s.jsx("option",{value:e.id,"data-image":e.image,children:e.name},e.id))}),s.jsxs("small",{className:"text-muted",children:[s.jsx("i",{className:"fas fa-info-circle me-1"}),"Selecciona las cualidades o atributos que destacan este producto"]})]})]})}),c.has("items","is_applications")&&s.jsx("div",{className:"col-12",children:s.jsxs("div",{className:"card border-0 shadow-sm",children:[s.jsx("div",{className:"card-header",children:s.jsxs("h6",{className:"mb-0",children:[s.jsx("i",{className:"fas fa-th-large me-2 text-info"}),"Aplicaciones / Usos"]})}),s.jsxs("div",{className:"card-body",children:[s.jsx(G,{eRef:Z,label:"Seleccionar Aplicaciones",dropdownParent:"#principal-container",multiple:!0,templateResult:e=>{if(!e.id)return e.text;const t=$(e.element),r=t.data("image"),a=t.data("icon");return r?$(`
                                                                <div style="display: flex; align-items: center; gap: 10px;">
                                                                    <div class="bg-primary p-2" style="width: 48px; height: 48px; border-radius: 8px; overflow: hidden; flex-shrink: 0;display: flex; align-items: center; justify-content: center;">
                                                                        <img src="/storage/images/application/${r}" 
                                                                             style="width: 100%; height: 100%; object-fit: cover;" 
                                                                             onerror="this.style.display='none'" />
                                                                    </div>
                                                                    <span>${e.text}</span>
                                                                </div>
                                                            `):a?$(`
                                                                <div style="display: flex; align-items: center; gap: 10px;">
                                                                    <div style="width: 32px; height: 32px; border-radius: 8px; background: #4CAF50; display: flex; align-items: center; justify-content: center; color: white; flex-shrink: 0;">
                                                                        <i class="${a}"></i>
                                                                    </div>
                                                                    <span>${e.text}</span>
                                                                </div>
                                                            `):e.text},templateSelection:e=>{if(!e.id)return e.text;const r=$(e.element).data("icon");return r?$(`
                                                                <div style="display: flex; align-items: center; gap: 8px;">
                                                                    <i class="${r}" style="color: #4CAF50;"></i>
                                                                    <span>${e.text}</span>
                                                                </div>
                                                            `):e.text},children:es.map(e=>s.jsx("option",{value:e.id,"data-image":e.image,"data-icon":e.icon,children:e.name},e.id))}),s.jsxs("small",{className:"text-muted",children:[s.jsx("i",{className:"fas fa-info-circle me-1"}),"Selecciona las industrias o usos donde se aplica este producto"]})]})]})}),s.jsx("div",{className:"col-12",children:s.jsxs("div",{className:"card border-0 shadow-sm",children:[s.jsx("div",{className:"card-header",children:s.jsxs("h6",{className:"mb-0",children:[s.jsx("i",{className:"fas fa-edit me-2"}),"Descripción Detallada"]})}),s.jsx("div",{className:"card-body",children:s.jsx(Ps,{eRef:ae,label:"Descripción Completa"})})]})})]})})]})]})}),s.jsx(Me,{modalRef:ue,title:"Importar Datos",size:"lg",children:s.jsx(Gs,{gridRef:f,modalRef:ue,excelTemplate:Array.isArray(B)?(Ce=B.find(e=>e.correlative==="excel_import_template"))==null?void 0:Ce.description:null})})]})};Ms((z,A)=>{$s.createRoot(z).render(s.jsx(Is,{...A,title:"Items",children:s.jsx(Bs,{...A})}))});
