var e=Object.defineProperty,a=(a,s,i)=>((a,s,i)=>s in a?e(a,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[s]=i)(a,"symbol"!=typeof s?s+"":s,i);import{c as s,j as i,r as t}from"./vendor-react-C1oWoR6m.js";import{B as r}from"./Base-DIIKdflX.js";import{S as l}from"./SwitchFormGroup-DKMokO1e.js";import{T as n}from"./TextareaFormGroup-DY3X3EtI.js";import{S as o}from"./CartKuchara-BuGNrbqJ.js";import{B as c}from"./BasicRest-DnRFj80Z.js";import{B as d}from"./BasicEditing-Cj1HNeVv.js";import{I as m}from"./InputFormGroup-l6evfr7v.js";import{M as p}from"./Modal-CWcezBPC.js";import{T as f}from"./Table-DCfa5v9F.js";import{D as b}from"./DxButton-C6FT_beP.js";import{C as h,F as x}from"./CreateReactScript-BJFDEtj6.js";import{R as u}from"./ReactAppend--Pw8l4To.js";import{I as g}from"./ImageFormGroup-BuGwvrNA.js";import"./vendor-swiper-Cr_RrIb_.js";import"./Footer-Cr_V_wDJ.js";import"./TippyButton-BSvqLt5w.js";import"./Logout-CvUqt5iR.js";import"./MenuItemContainer-b-RC8xO_.js";import"./Menu-v3vTXHgl.js";import"./OpenPayCardModal-DoDTV5Bn.js";import"./BooleanLimit-q2Ad9fGY.js";import"./ArrayDetails2Object-BtdyATqd.js";import"./em-6wxTBkLG.js";import"./HtmlContent-BvB077y9.js";import"./WebDetailsRest-f1arlzMU.js";import"./General-ClVW7qxN.js";import"./LaravelSession-ByQnaUD3.js";const j=new class extends c{constructor(){super(...arguments),a(this,"path","admin/benefits"),a(this,"hasFiles",!0)}},v=({details:e})=>{const a=t.useRef(),s=t.useRef(),r=t.useRef(),c=t.useRef(),h=t.useRef(),v=t.useRef(),N=t.useRef(),[y,w]=t.useState(!1),[C,k]=t.useState(!1),[F,R]=t.useState("#71b6f9"),B=e=>{if(w(!!e?.id),r.current.value=e?.id??"",x.has("benefits","name")&&(c.current.value=e?.name??""),x.has("benefits","description")&&(h.current.value=e?.description??""),x.has("benefits","bg_color")){const a=e?.bg_color??"transparent";"transparent"!==a&&""!==a?(k(!0),R(a.startsWith("#")?a:"#71b6f9")):(k(!1),R("#71b6f9"))}x.has("benefits","image")&&v.current&&v.image&&(v.current.value=null,v.image.src=e?.image?`/storage/images/benefit/${e.image}`:""),v.resetDeleteFlag&&v.resetDeleteFlag(),$(s.current).modal("show")};return i.jsxs(i.Fragment,{children:[i.jsx(f,{gridRef:a,title:i.jsx(d,{correlative:"benefits",details:e}),rest:j,toolBar:e=>{e.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(a.current).dxDataGrid("instance").refresh()}}),e.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Nuevo beneficio",hint:"Nuevo beneficio",onClick:()=>B()}})},rowDragging:{allowReordering:!0,onReorder:async e=>{const a=e.toIndex;try{await j.reorder(e.itemData.id,a)&&await e.component.refresh()}catch(s){}},dropFeedbackMode:"push"},sorting:{mode:"single"},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"order_index",caption:"Orden",visible:!1,sortOrder:"asc",sortIndex:0},x.has("benefits","name")&&{dataField:"name",caption:"Beneficio",width:"30%"},x.has("benefits","description")&&{dataField:"description",caption:"Descripción",width:"50%"},x.has("benefits","image")&&{dataField:"image",caption:"Imagen",cellTemplate:(e,{data:a})=>{const s=a.image?`/storage/images/benefit/${a.image}`:"/api/cover/thumbnail/null",t=a.bg_color||"transparent";u(e,i.jsx("div",{style:{width:"80px",height:"80px",backgroundColor:t,borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",padding:"4px"},children:i.jsx("img",{src:s,style:{width:"100%",height:"100%",objectFit:"contain"},onError:e=>e.target.src="/api/cover/thumbnail/null"})}))}},x.has("benefits","visible")&&{dataField:"visible",caption:"Visible",dataType:"boolean",cellTemplate:(e,{data:s})=>{$(e).empty(),u(e,i.jsx(l,{checked:1==s.visible,onChange:()=>(async({id:e,value:s})=>{await j.boolean({id:e,field:"visible",value:s})&&$(a.current).dxDataGrid("instance").refresh()})({id:s.id,value:!s.visible})}))}},{caption:"Acciones",cellTemplate:(e,{data:s})=>{e.css("text-overflow","unset"),e.append(b({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>B(s)})),e.append(b({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>(async e=>{const{isConfirmed:s}=await o.fire({title:"Eliminar registro",text:"¿Estas seguro de eliminar este registro?",icon:"warning",showCancelButton:!0,confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"});if(!s)return;await j.delete(e)&&$(a.current).dxDataGrid("instance").refresh()})(s.id)}))},allowFiltering:!1,allowExporting:!1}]}),i.jsxs(p,{modalRef:s,title:y?"Editar beneficio":"Agregar beneficio",onSubmit:async e=>{e.preventDefault();const i={id:r.current.value||void 0};x.has("benefits","name")&&(i.name=c.current.value),x.has("benefits","description")&&(i.description=h.current.value),x.has("benefits","bg_color")&&(i.bg_color=C?F:"transparent");const t=new FormData;for(const a in i)t.append(a,i[a]);if(v.current&&x.has("benefits","image")){const e=v.current.files[0];e&&t.append("image",e),v.getDeleteFlag&&v.getDeleteFlag()&&t.append("image_delete","DELETE")}await j.save(t)&&(v.resetDeleteFlag&&v.resetDeleteFlag(),$(a.current).dxDataGrid("instance").refresh(),$(s.current).modal("hide"))},size:"lg",children:[i.jsx("input",{ref:r,type:"hidden"}),i.jsxs("div",{id:"benefits-container",children:[i.jsxs("ul",{className:"nav nav-pills nav-justified mb-4",role:"tablist",style:{backgroundColor:"#f8f9fa",borderRadius:"8px",padding:"4px",border:"1px solid #e9ecef"},children:[i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsxs("button",{className:"nav-link active",id:"basic-info-tab","data-bs-toggle":"pill","data-bs-target":"#basic-info",type:"button",role:"tab","aria-controls":"basic-info","aria-selected":"true",style:{borderRadius:"6px",fontWeight:"500",transition:"all 0.3s ease"},children:[i.jsx("i",{className:"fas fa-info-circle me-2"}),"Información Básica"]})}),x.has("benefits","image")&&i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsxs("button",{className:"nav-link",id:"multimedia-tab","data-bs-toggle":"pill","data-bs-target":"#multimedia",type:"button",role:"tab","aria-controls":"multimedia","aria-selected":"false",style:{borderRadius:"6px",fontWeight:"500",transition:"all 0.3s ease"},children:[i.jsx("i",{className:"fas fa-image me-2"}),"Multimedia"]})})]}),i.jsxs("div",{className:"tab-content",children:[i.jsx("div",{className:"tab-pane fade show active",id:"basic-info",role:"tabpanel","aria-labelledby":"basic-info-tab",children:i.jsx("div",{className:"row g-3",children:i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"card border-0 shadow-sm",children:[i.jsx("div",{className:"card-header bg-light",children:i.jsxs("h6",{className:"mb-0",children:[i.jsx("i",{className:"fas fa-tag me-2 text-primary"}),"Información del Beneficio"]})}),i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row",children:[x.has("benefits","name")&&i.jsx("div",{className:"col-12",children:i.jsx(m,{eRef:c,label:"Beneficio",col:"col-12",required:!0,placeholder:"Ej: Envío gratis"})}),x.has("benefits","description")&&i.jsx("div",{className:"col-12",children:i.jsx(n,{eRef:h,label:"Descripción",rows:3,placeholder:"Descripción del beneficio"})})]})})]})})})}),x.has("benefits","image")&&i.jsx("div",{className:"tab-pane fade",id:"multimedia",role:"tabpanel","aria-labelledby":"multimedia-tab",children:i.jsxs("div",{className:"row g-3",children:[i.jsx("div",{className:"col-6",children:i.jsxs("div",{className:"card border-0 shadow-sm",children:[i.jsx("div",{className:"card-header bg-light",children:i.jsxs("h6",{className:"mb-0",children:[i.jsx("i",{className:"fas fa-image me-2 text-primary"}),"Imagen del Beneficio"]})}),i.jsxs("div",{className:"card-body",children:[i.jsx(g,{eRef:v,name:"image",label:"Imagen",col:"col-12",aspect:"1/1",required:!y}),i.jsxs("small",{className:"text-muted d-block mt-2",children:[i.jsx("i",{className:"mdi mdi-information me-1"}),"Recomendado: 100x100px (1:1)"]})]})]})}),x.has("benefits","bg_color")&&i.jsx("div",{className:"col-6",children:i.jsxs("div",{className:"card border-0 shadow-sm",children:[i.jsx("div",{className:"card-header bg-light",children:i.jsxs("h6",{className:"mb-0",children:[i.jsx("i",{className:"fas fa-palette me-2 text-warning"}),"Color de Fondo del Icono"]})}),i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"form-check form-switch mb-3",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",id:"useBackgroundToggle",checked:C,onChange:e=>k(e.target.checked)}),i.jsx("label",{className:"form-check-label fw-semibold",htmlFor:"useBackgroundToggle",children:"Activar color de fondo personalizado"})]}),C&&i.jsx("div",{className:"row g-4",children:i.jsx("div",{className:"col-md-12",children:i.jsx("div",{className:"row g-3",children:i.jsxs("div",{className:"col-12",children:[i.jsxs("label",{className:"form-label fw-semibold mb-3",children:[i.jsx("i",{className:"fas fa-palette me-2 text-primary"}),"Selector de Color"]}),i.jsxs("div",{className:"d-flex gap-3 align-items-start",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("input",{ref:N,type:"color",value:F,onChange:e=>R(e.target.value),style:{width:"100px",height:"100px",cursor:"pointer",border:"3px solid #dee2e6",borderRadius:"12px",display:"block",padding:"0",backgroundColor:"transparent",WebkitAppearance:"none",MozAppearance:"none",appearance:"none"},title:"Click para seleccionar color"}),i.jsxs("small",{className:"text-muted d-block mt-2",children:[i.jsx("i",{className:"fas fa-hand-pointer me-1"}),"Click aquí"]})]}),i.jsxs("div",{className:"flex-grow-1",children:[i.jsxs("label",{className:"form-label small text-muted mb-2",children:[i.jsx("i",{className:"fas fa-code me-1"}),"Código Hexadecimal"]}),i.jsx("input",{type:"text",className:"form-control form-control-lg",value:F,onChange:e=>R(e.target.value),placeholder:"#71b6f9",style:{fontFamily:"monospace",fontSize:"1.1rem",letterSpacing:"1px",fontWeight:"600"}}),i.jsxs("small",{className:"text-muted d-block mt-2",children:[i.jsx("i",{className:"mdi mdi-information-outline me-1"}),"También puedes escribir el código manualmente"]})]})]})]})})})}),!C&&i.jsxs("div",{className:"alert alert-secondary mb-0 py-2",style:{fontSize:"0.875rem"},children:[i.jsx("i",{className:"mdi mdi-check-circle me-2"}),"El icono se mostrará sin color de fondo (transparente)"]})]})]})})]})})]})]})]})]})};h((e,a)=>{s.createRoot(e).render(i.jsx(r,{...a,title:"Beneficios",children:i.jsx(v,{...a})}))});
