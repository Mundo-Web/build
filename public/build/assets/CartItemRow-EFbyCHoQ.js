import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import"./index-BOnQTV8N.js";import{C as m,N as o}from"./Number2Currency-jIsa99f9.js";import{i as u}from"./tippy-react.esm-BGU1pa2o.js";import{S as g}from"./CartKuchara-CVImXKD8.js";import{m as b}from"./proxy-B0QLMKEh.js";import{B as j}from"./bed-D_dyLoh5.js";import{T as f}from"./trash-2-DU7LB6-f.js";import{C as y}from"./calendar-BSC6xbA7.js";import{M as w}from"./moon-BU5XInRR.js";import{U as k}from"./users-w-WaEtvX.js";import{P as _}from"./package-DBFPPBi1.js";import{M as C}from"./minus-Db6MFKEO.js";import{P as z}from"./plus-CTIomuuF.js";const H=({setCart:l,index:x,...s})=>{var p;const i=s.type==="combo",c=s.type==="booking",d=()=>{if(c){g.fire({title:"¿Eliminar reserva?",html:`
                    <p class="mb-2">¿Deseas eliminar esta reserva del carrito?</p>
                    <p class="text-sm text-gray-600">
                        ${s.name}<br/>
                        ${n(s.check_in)} - ${n(s.check_out)}
                    </p>
                `,icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar",confirmButtonColor:"#dc3545"}).then(a=>{a.isConfirmed&&(l(t=>t.filter(r=>!(r.type==="booking"&&r.id===s.id&&r.check_in===s.check_in&&r.check_out===s.check_out))),g.fire({icon:"success",title:"Reserva eliminada",text:"La reserva ha sido eliminada del carrito",timer:2e3,showConfirmButton:!1}))});return}l(a=>a.filter(t=>t.id!==s.id||t.type!==s.type))},h=a=>{if(a<1)return d();l(t=>t.map(r=>r.id===s.id&&r.type===s.type?{...r,quantity:a}:r))},n=a=>{const t=new Date(a),r={day:"2-digit",month:"short",year:"numeric"};return t.toLocaleDateString("es-ES",r)},N={standard:"Estándar",suite:"Suite",deluxe:"Deluxe",presidential:"Presidencial",family:"Familiar",executive:"Ejecutiva"},v=c?s.total_price:i?s.final_price||s.price:s.discount>0?Math.min(s.price,s.discount):s.price;return c?e.jsx(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:50},transition:{delay:x*.05},className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl shadow-sm hover:shadow-md transition-shadow p-4 border border-blue-100",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-shrink-0 relative",children:[e.jsx("img",{src:s.image?`/api/items/media/${s.image}`:"/images/placeholder-room.jpg",onError:a=>a.target.src="/assets/img/noimage/no_img.jpg",className:"w-24 h-24 rounded-lg object-cover border-2 border-white shadow-sm",alt:s.name}),e.jsx("div",{className:"absolute -top-2 -right-2 bg-blue-600 text-white rounded-full p-1.5 shadow-md",children:e.jsx(j,{size:14})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-gray-900 mb-1",children:s.name}),e.jsxs("span",{className:"inline-block px-2 py-1 text-xs font-medium text-blue-700 bg-blue-100 rounded-full mb-2",children:[e.jsx(j,{className:"inline-block w-3 h-3 mr-1"}),N[s.room_type]||"Habitación"]})]}),e.jsx(u,{content:"Eliminar reserva",children:e.jsx("button",{onClick:d,className:"text-gray-400 hover:text-red-500 transition-colors self-start",children:e.jsx(f,{size:18})})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3 text-sm",children:[e.jsxs("div",{className:"flex items-center text-gray-700",children:[e.jsx(y,{size:14,className:"mr-1 text-green-600"}),e.jsx("span",{className:"font-medium",children:"Check-in:"}),e.jsx("span",{className:"ml-1",children:n(s.check_in)})]}),e.jsxs("div",{className:"flex items-center text-gray-700",children:[e.jsx(y,{size:14,className:"mr-1 text-red-600"}),e.jsx("span",{className:"font-medium",children:"Check-out:"}),e.jsx("span",{className:"ml-1",children:n(s.check_out)})]}),e.jsxs("div",{className:"flex items-center text-gray-700",children:[e.jsx(w,{size:14,className:"mr-1 text-indigo-600"}),e.jsxs("span",{className:"font-medium",children:[s.nights," noche",s.nights!==1?"s":""]})]}),e.jsxs("div",{className:"flex items-center text-gray-700",children:[e.jsx(k,{size:14,className:"mr-1 text-blue-600"}),e.jsxs("span",{className:"font-medium",children:[s.guests," huésped",s.guests!==1?"es":""]})]})]}),s.amenities&&s.amenities.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[s.amenities.slice(0,3).map(a=>e.jsxs("span",{className:"text-xs px-2 py-1 bg-white text-gray-600 rounded-full border border-gray-200",children:[e.jsx("i",{className:`${a.icon||"fas fa-check"} mr-1`}),a.name]},a.id)),s.amenities.length>3&&e.jsxs("span",{className:"text-xs px-2 py-1 bg-white text-gray-600 rounded-full border border-gray-200",children:["+",s.amenities.length-3]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-blue-200",children:[e.jsx("div",{className:"text-xs text-gray-600 bg-white px-3 py-1.5 rounded-full border border-blue-200",children:e.jsxs("span",{className:"font-medium",children:["S/ ",(s.total_price/s.nights).toFixed(2)," × ",s.nights," ",s.nights===1?"noche":"noches"]})}),e.jsxs("span",{className:"font-bold text-xl text-blue-700",children:[m()," ",o(s.total_price)]})]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-600 bg-white px-3 py-2 rounded-lg border border-blue-100",children:[e.jsx("i",{className:"fas fa-info-circle mr-1 text-blue-600"}),"Las reservas no requieren envío. Cancela hasta 24h antes del check-in."]})]})]})}):e.jsxs(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:50},transition:{delay:x*.05},className:"flex gap-4 p-4 bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex-shrink-0 relative",children:[e.jsx("img",{src:i?s.image?`/storage/images/combo/${s.image}`:`/storage/images/item/${s.image}`:`/storage/images/item/${s.image}`,onError:a=>a.target.src="/assets/img/noimage/no_img.jpg",className:"w-20 h-20 rounded-lg object-cover border border-gray-100",alt:s.name}),i&&e.jsx("div",{className:"absolute -top-1 -right-1 bg-primary text-white rounded-full p-1",children:e.jsx(_,{size:12})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"max-w-52",children:[e.jsx("h3",{className:"font-semibold line-clamp-2  text-gray-900 truncate",children:s.name}),i&&e.jsxs("span",{className:"text-xs customtext-primary font-medium",children:["Combo (",((p=s.combo_items)==null?void 0:p.length)||0," productos)"]})]}),e.jsx(u,{content:"Eliminar",children:e.jsx("button",{onClick:d,className:"text-gray-400 hover:text-red-500 transition-colors",children:e.jsx(f,{size:18})})})]}),!i&&(s==null?void 0:s.discount)>0&&e.jsxs("div",{className:"text-sm text-gray-500 mb-2",children:[e.jsx("span",{className:"line-through mr-2",children:o(s.price)}),e.jsxs("span",{className:"text-red-500",children:["-",Number(s.discount_percent).toFixed(0),"%"]})]}),i&&(s==null?void 0:s.discount)>0&&e.jsxs("div",{className:"text-sm text-gray-500 mb-2",children:[e.jsxs("span",{className:"line-through mr-2",children:[m()," ",o(s.price)]}),e.jsxs("span",{className:"text-red-500",children:["-",Number(s.discount_percent).toFixed(0),"%"]})]}),i&&s.combo_items&&e.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:["Incluye: ",s.combo_items.map(a=>a.name).join(", ")]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center border border-gray-200 rounded-lg",children:[e.jsx("button",{onClick:()=>h(s.quantity-1),className:"p-2 hover:bg-gray-50 transition-colors",children:e.jsx(C,{size:16,className:"text-gray-600"})}),e.jsx("span",{className:"w-8 text-center font-medium",children:s.quantity}),e.jsx("button",{onClick:()=>h(s.quantity+1),className:"p-2 hover:bg-gray-50 transition-colors",children:e.jsx(z,{size:16,className:"text-gray-600"})})]}),e.jsxs("span",{className:"font-semibold text-gray-900",children:[m()," ",o(v*s.quantity)]})]})]})]})};export{H as C};
