import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{B as As}from"./Base-CHWft3X0.js";import{S as _}from"./SwitchFormGroup-DXN0cwVk.js";import{T as Es}from"./TextareaFormGroup-CliirJM1.js";import{r as o}from"./index-BOnQTV8N.js";import{c as Fs}from"./ReactAppend-QR5TrZfj.js";import{s as ne}from"./server.browser-Bf4gQIc7.js";import{S as Y}from"./CartKuchara-D9l7c7at.js";import{I as Je}from"./ItemsRest-BelP-LFB.js";import{A as Ps}from"./AmenitiesRest-CxHKy3lz.js";import{A as $s}from"./ApplicationsRest-CgWp9Tlw.js";import{A as Ms}from"./AttributesRest-A9X4cshE.js";import{M as Ge}from"./Modal-xDw9ufjg.js";import{T as Vs}from"./Table-BBh2JpCs.js";import{I as Re}from"./ImageFormGroup-40MuGzez.js";import{I}from"./InputFormGroup-iZIO11ZN.js";import{Q as Os}from"./QuillFormGroup-BXX8qnUc.js";import{S as De}from"./SelectAPIFormGroup-BZe8H0Ph.js";import{S as Z}from"./SelectFormGroup-X8WqJHHl.js";import{D as We}from"./DxButton-DV0H-ZcL.js";import{C as Ls,F as c}from"./CreateReactScript-C-lKJ7Gs.js";import{C as Be,N as Ue}from"./Number2Currency-ld0bFawA.js";import{R as v}from"./ReactAppend-Vm5G2nof.js";import{S as ke}from"./SetSelectValue-UxyCmHse.js";import"./main-B6F2O9-U.js";import{t as zs}from"./CardProductKatya-ncpmQ0JU.js";import{D as qe}from"./DynamicField-DFjsryM4.js";import"./index-yBjzXJbu.js";import"./Global-Bz6gVLc5.js";import"./tippy-react.esm-DmkRJDEW.js";import"./index-pSueRYGM.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./index-B6ujFmsw.js";/* empty css              */import"./Logout-BpuTJ_83.js";import"./MenuItemContainer-DcxtOi47.js";import"./index.esm-C48oHfFw.js";import"./index-ngrFHoWO.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./CanAccess-UkN68hbD.js";import"./BasicRest-BML1C-ua.js";import"./BooleanLimit-D-OsQsek.js";/* empty css               */import"./General-CE1RDd44.js";import"./LaravelSession-Dz9cpV3l.js";const Gs=new Je,Ws=({gridRef:B,modalRef:M,excelTemplate:ee})=>{const[T,U]=o.useState(null),[se,oe]=o.useState(!1),[te,f]=o.useState(""),[A,w]=o.useState(!1),[x,R]=o.useState("reset"),q=p=>{U(p.target.files[0])},J=async()=>{var V,O;if(!T){f("Por favor, selecciona un archivo."),w(!0);return}const p=new FormData;p.append("file",T),p.append("mode",x),oe(!0);try{const h=await Gs.importData(p);if(h.error){const H=Array.isArray(h.error)?h.error.join(`
`):h.error;f(`Error en la importación:
${H}`),w(!0)}else f(h.message),w(!1),$(B.current).dxDataGrid("instance").refresh(),$(M.current).modal("hide"),zs.success("Importacion completada con exito",{description:"Todos tus productos han sido importados correctamente.",duration:3e3,position:"bottom-center",richColors:!0})}catch(h){f("Error al importar: "+(((O=(V=h.response)==null?void 0:V.data)==null?void 0:O.error)||h.message)),w(!0)}oe(!1)};return e.jsxs("div",{className:"bg-white p-4",children:[e.jsx("div",{className:"mb-4 pb-3 border-bottom",children:e.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[e.jsx("h5",{className:"mb-0 text-dark fw-semibold",children:"Importar Productos"}),ee&&e.jsxs("a",{href:`/cloud/${ee}`,download:!0,className:"btn btn-sm btn-outline-secondary",children:[e.jsx("i",{className:"fas fa-download me-2"}),"Descargar Plantilla"]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"form-label text-dark fw-semibold mb-3",children:"Modo de Importación"}),e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx("div",{className:`card h-100 ${x==="reset"?"border-primary":"border"}`,style:{cursor:"pointer",transition:"all 0.2s ease",borderWidth:x==="reset"?"2px":"1px"},onClick:()=>R("reset"),children:e.jsx("div",{className:"card-body p-3",children:e.jsxs("div",{className:"d-flex align-items-start",children:[e.jsx("input",{className:"form-check-input mt-1 me-3 flex-shrink-0",type:"radio",name:"importMode",id:"modeReset",value:"reset",checked:x==="reset",onChange:p=>R(p.target.value),style:{width:"20px",height:"20px",borderRadius:"50%"}}),e.jsxs("label",{className:"form-check-label flex-grow-1",htmlFor:"modeReset",style:{cursor:"pointer"},children:[e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("div",{className:"d-flex align-items-center justify-content-center me-2",style:{width:"36px",height:"36px",borderRadius:"8px",background:"#6c757d",color:"white"},children:e.jsx("i",{className:"fas fa-redo-alt"})}),e.jsx("strong",{className:"text-dark",children:"Importar desde cero"})]}),e.jsx("small",{className:"text-muted",children:"Reemplaza todos los productos existentes con los del archivo Excel"})]})]})})})}),e.jsx("div",{className:"col-md-6",children:e.jsx("div",{className:`card h-100 ${x==="add_update"?"border-primary":"border"}`,style:{cursor:"pointer",transition:"all 0.2s ease",borderWidth:x==="add_update"?"2px":"1px"},onClick:()=>R("add_update"),children:e.jsx("div",{className:"card-body p-3",children:e.jsxs("div",{className:"d-flex align-items-start",children:[e.jsx("input",{className:"form-check-input mt-1 me-3 flex-shrink-0",type:"radio",name:"importMode",id:"modeAddUpdate",value:"add_update",checked:x==="add_update",onChange:p=>R(p.target.value),style:{width:"20px",height:"20px",borderRadius:"50%"}}),e.jsxs("label",{className:"form-check-label flex-grow-1",htmlFor:"modeAddUpdate",style:{cursor:"pointer"},children:[e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("div",{className:"d-flex align-items-center justify-content-center me-2",style:{width:"36px",height:"36px",borderRadius:"8px",background:"#0d6efd",color:"white"},children:e.jsx("i",{className:"fas fa-sync-alt"})}),e.jsx("strong",{className:"text-dark",children:"Agregar / Actualizar"})]}),e.jsx("small",{className:"text-muted",children:"Actualiza productos existentes (por SKU) o agrega nuevos sin eliminar"})]})]})})})})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"form-label text-dark fw-semibold mb-2",children:"Archivo Excel"}),e.jsx("input",{className:"form-control form-control-lg",type:"file",accept:".xlsx,.xls",onChange:q}),T&&e.jsxs("div",{className:"mt-2 p-2 bg-light rounded d-flex align-items-center",children:[e.jsx("i",{className:"fas fa-file-excel text-success me-2",style:{fontSize:"20px"}}),e.jsx("div",{className:"flex-grow-1",children:e.jsx("span",{className:"text-dark",children:T.name})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-light",onClick:()=>U(null),children:e.jsx("i",{className:"fas fa-times"})})]})]}),e.jsx("button",{onClick:J,disabled:se||!T,className:"btn btn-primary btn-lg w-100",type:"button",children:se?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Procesando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-upload me-2"}),"Importar Productos"]})}),te&&e.jsx("div",{className:`alert ${A?"alert-danger":"alert-success"} mt-3 mb-0`,role:"alert",children:e.jsxs("div",{className:"d-flex align-items-start",children:[e.jsx("i",{className:`fas ${A?"fa-exclamation-circle":"fa-check-circle"} me-2 mt-1`}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("strong",{children:A?"Error":"Completado"}),e.jsx("div",{className:"mt-1",children:te})]})]})})]})},W=new Je;new Ps;const Bs=new $s,Us=new Ms,qs=({categories:B,brands:M,collections:ee,stores:T,generals:U,attributes:se})=>{//!FALTA EDIT AND DELETEDE GALERIA
var Pe;const[oe,te]=o.useState([]),f=o.useRef(),A=o.useRef(),w=o.useRef(),x=o.useRef(),R=o.useRef(),q=o.useRef(),J=o.useRef(),p=o.useRef(),V=o.useRef(),O=o.useRef(),h=o.useRef(),H=o.useRef(),ce=o.useRef(),de=o.useRef(),b=o.useRef(),j=o.useRef(),y=o.useRef(),me=o.useRef(),ue=o.useRef(),pe=o.useRef(),K=o.useRef(),He=o.useRef([]),Ke=o.useRef([]),fe=o.useRef(),he=o.useRef(),ae=o.useRef(),[Qe,Ce]=o.useState(!1),[Xe,Ye]=o.useState(null),[Js,Ze]=o.useState(null),[Hs,es]=o.useState(null),[N,D]=o.useState([]),Se=o.useRef(),[k,E]=o.useState([]),_e=o.useRef(),[C,F]=o.useState([]),xe=o.useRef(),[Ks,Ie]=o.useState([]),[ss,ts]=o.useState([]),[re,as]=o.useState(se||[]),[u,g]=o.useState([]),rs=s=>{const a=Array.from(s.target.files).map(i=>({file:i,url:URL.createObjectURL(i)}));D(i=>[...i,...a])},is=s=>{s.preventDefault();const a=Array.from(s.dataTransfer.files).map(i=>({file:i,url:URL.createObjectURL(i)}));D(i=>[...i,...a])};o.useEffect(()=>{ls(),ns()},[]);const ls=async()=>{const s=await Bs.paginate({page:1,pageSize:1e3});s!=null&&s.data&&ts(s.data)},ns=async()=>{const s=await Us.paginate({page:1,pageSize:1e3});s!=null&&s.data&&as(s.data)},os=s=>{s.preventDefault()},cs=(s,t)=>{s.preventDefault(),N[t].id?D(i=>i.map((r,n)=>n===t?{...r,toDelete:!0}:r)):D(i=>i.filter((r,n)=>n!==t))},[S,ge]=o.useState(null),ds=(s,t)=>{ge(t),s.dataTransfer.effectAllowed="move"},ms=()=>{ge(null)},us=s=>{s.preventDefault(),s.dataTransfer.dropEffect="move"},ps=(s,t)=>{if(s.preventDefault(),S===null||S===t)return;const a=[...N],i=a[S];a.splice(S,1),a.splice(t,0,i),D(a),ge(null)},fs=s=>{const a=Array.from(s.target.files).map(i=>({file:i,name:i.name,url:URL.createObjectURL(i)}));E(i=>[...i,...a])},hs=(s,t)=>{s.preventDefault();const a=k[t];a.url&&!a.file?E(i=>i.map((r,n)=>n===t?{...r,toDelete:!0}:r)):E(i=>i.filter((r,n)=>n!==t))},[L,be]=o.useState(null),xs=(s,t)=>{be(t),s.dataTransfer.effectAllowed="move"},gs=()=>{be(null)},bs=s=>{s.preventDefault(),s.dataTransfer.dropEffect="move"},js=(s,t)=>{if(s.preventDefault(),L===null||L===t)return;const a=[...k],i=a[L];a.splice(L,1),a.splice(t,0,i),E(a),be(null)},vs=s=>{s.preventDefault();const t=xe.current.value.trim();t&&(F(a=>[...a,{url:t,order:a.length+1}]),xe.current.value="")},ys=(s,t)=>{s.preventDefault();const a=C[t];a.order&&!a.new?F(i=>i.map((r,n)=>n===t?{...r,toDelete:!0}:r)):F(i=>i.filter((r,n)=>n!==t))},[z,je]=o.useState(null),Ns=(s,t)=>{je(t),s.dataTransfer.effectAllowed="move"},ws=()=>{je(null)},Rs=s=>{s.preventDefault(),s.dataTransfer.dropEffect="move"},Ds=(s,t)=>{if(s.preventDefault(),z===null||z===t)return;const a=[...C],i=a[z];a.splice(z,1),a.splice(t,0,i),F(a),je(null)},Te=s=>{var t,a,i;if(te(s||null),s!=null&&s.id?Ce(!0):Ce(!1),w.current.value=(s==null?void 0:s.id)||"",$(x.current).val((s==null?void 0:s.category_id)||null).trigger("change"),$(R.current).val((s==null?void 0:s.collection_id)||null).trigger("change"),ke(q.current,(t=s==null?void 0:s.subcategory)==null?void 0:t.id,(a=s==null?void 0:s.subcategory)==null?void 0:a.name),$(J.current).val((s==null?void 0:s.brand_id)||null).trigger("change"),$(K.current).val(s!=null&&s.store_id&&s.store_id!==""?s.store_id:"").trigger("change"),p.current.value=(s==null?void 0:s.name)||"",ue.current.value=(s==null?void 0:s.sku)||"",V.current.value=(s==null?void 0:s.color)||"",O.current.value=(s==null?void 0:s.size)||"",h.current.value=(s==null?void 0:s.summary)||"",H.current.value=(s==null?void 0:s.price)||0,ce.current.value=(s==null?void 0:s.discount)||0,fe.current.value=(s==null?void 0:s.weight)||0,ke(de.current,(s==null?void 0:s.tags)??[],"id","name"),b.current.value=null,j.current.value=null,b.image.src=s!=null&&s.banner?`/storage/images/item/${s.banner}`:"",j.image.src=s!=null&&s.image?`/storage/images/item/${s.image}`:"",y.image.src=s!=null&&s.texture?`/storage/images/item/${s.texture}`:"",me.editor.root.innerHTML=(s==null?void 0:s.description)??"",s!=null&&s.pdf&&Array.isArray(s.pdf)){const r=s.pdf.map(n=>({url:n.url?`/storage/images/item/${n.url}`:n,name:n.name||"Documento.pdf",order:n.order||0}));E(r)}else E([]);if(s!=null&&s.linkvideo&&Array.isArray(s.linkvideo)?F(s.linkvideo.map(r=>({url:r.url||r,order:r.order||0}))):F([]),s!=null&&s.images){const r=s.images.map(n=>({id:n.id,url:`/storage/images/item/${n.url}`}));D(r)}else D([]);if(s!=null&&s.specifications?ve(s.specifications.map(r=>({type:r.type,title:r.title,description:r.description,image:r.image||""}))):ve([]),Ee(((i=s==null?void 0:s.features)==null?void 0:i.map(r=>typeof r=="object"?r:{feature:r}))||[]),pe.current.value=s==null?void 0:s.stock,ke(he.current,(s==null?void 0:s.amenities)??[],"id","name"),s!=null&&s.applications&&Array.isArray(s.applications)){const r=s.applications.map(n=>n.id||n);Ie(r),setTimeout(()=>{$(ae.current).val(r).trigger("change")},100)}else Ie([]),setTimeout(()=>{$(ae.current).val([]).trigger("change")},100);if(s!=null&&s.attributes&&Array.isArray(s.attributes)){const r=s.attributes.map(n=>{var m;return{attribute_id:n.id,value:((m=n.pivot)==null?void 0:m.value)||"",attribute:n}});g(r)}else g([]);b.deleteRef&&(b.deleteRef.value=""),j.deleteRef&&(j.deleteRef.value=""),y.deleteRef&&(y.deleteRef.value=""),$(A.current).modal("show")},ks=async s=>{s.preventDefault();const t=Ae.filter(l=>{var d;return typeof l=="string"?l.trim()!=="":typeof l=="object"?((d=l.feature)==null?void 0:d.trim())!=="":!1}),a=Fe.filter(l=>l.title&&l.title.trim()!==""||l.description&&l.description.trim()!==""),i={id:w.current.value||void 0,category_id:x.current.value,collection_id:R.current.value||null,subcategory_id:q.current.value,brand_id:J.current.value,name:p.current.value,sku:ue.current.value,color:V.current.value,size:O.current.value,summary:h.current.value,price:H.current.value,discount:ce.current.value,tags:$(de.current).val(),description:me.current.value,stock:pe.current.value||0,features:t,specifications:a,weight:fe.current.value||0,store_id:K.current.value&&K.current.value!==""?K.current.value:null,amenities:$(he.current).val()||[],applications:$(ae.current).val()||[],attributes:u.filter(l=>l.attribute_id&&l.value).map(l=>({id:l.attribute_id,value:l.value}))},r=new FormData;for(const l in i)if(l==="features"||l==="specifications")r.append(l,JSON.stringify(i[l]));else if(l==="tags"){const d=i[l];Array.isArray(d)?d.forEach((Q,X)=>{r.append(`tags[${X}]`,Q)}):d&&r.append("tags[0]",d)}else if(l==="amenities"){const d=i[l];Array.isArray(d)&&d.length>0&&d.forEach((Q,X)=>{r.append(`amenities[${X}]`,Q)})}else if(l==="applications"){const d=i[l];Array.isArray(d)&&d.length>0&&d.forEach((Q,X)=>{r.append(`applications[${X}]`,Q)})}else if(l==="attributes"){const d=i[l];Array.isArray(d)&&d.length>0&&r.append("attributes",JSON.stringify(d))}else r.append(l,i[l]);const n=j.current.files[0];n&&r.append("image",n);const m=y.current.files[0];m&&r.append("texture",m);const G=b.current.files[0];G&&r.append("banner",G);const ie=k.filter(l=>!l.toDelete);let $e=0;ie.forEach(l=>{l.file&&(r.append(`pdf[${$e}]`,l.file),$e++)});const Me=ie.map((l,d)=>({index:d,order:d+1,name:l.name||"Documento.pdf"}));Me.length>0&&r.append("pdf_order",JSON.stringify(Me));const Ve=k.map((l,d)=>l.toDelete?d:null).filter(l=>l!==null);Ve.length>0&&r.append("deleted_pdfs",JSON.stringify(Ve));const Oe=C.filter(l=>!l.toDelete).map((l,d)=>({url:l.url,order:d+1}));Oe.length>0&&r.append("linkvideo",JSON.stringify(Oe));const Le=C.map((l,d)=>l.toDelete?d:null).filter(l=>l!==null);Le.length>0&&r.append("deleted_videos",JSON.stringify(Le)),b.getDeleteFlag&&b.getDeleteFlag()&&r.append("banner_delete","DELETE"),j.getDeleteFlag&&j.getDeleteFlag()&&r.append("image_delete","DELETE"),y.getDeleteFlag&&y.getDeleteFlag()&&r.append("texture_delete","DELETE");let Ne=0,we=0;const le=[];N.forEach((l,d)=>{l.toDelete||(l.file?(r.append(`gallery[${Ne}]`,l.file),le.push({type:"new",index:Ne}),Ne++):(r.append(`gallery_ids[${we}]`,l.id),le.push({type:"existing",id:l.id,index:we}),we++))}),le.length>0&&r.append("gallery_order",JSON.stringify(le));const ze=N.filter(l=>l.toDelete).map(l=>l.id);ze.length>0&&ze.forEach((l,d)=>{r.append(`deleted_images[${d}]`,l)});for(let[l,d]of r.entries());await W.save(r)&&(b.resetDeleteFlag&&b.resetDeleteFlag(),j.resetDeleteFlag&&j.resetDeleteFlag(),y.resetDeleteFlag&&y.resetDeleteFlag(),$(f.current).dxDataGrid("instance").refresh(),$(A.current).modal("hide"),D([]),E([]),F([]))},Cs=async({id:s,value:t})=>{await W.boolean({id:s,field:"visible",value:t})&&$(f.current).dxDataGrid("instance").refresh()},P=async({id:s,field:t,value:a})=>{await W.boolean({id:s,field:t,value:a})&&$(f.current).dxDataGrid("instance").refresh()},Ss=async s=>{const{isConfirmed:t}=await Y.fire({title:"Eliminar item",text:"¿Estás seguro de eliminar este item?",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"});!t||!await W.delete(s)||$(f.current).dxDataGrid("instance").refresh()},[Ae,Ee]=o.useState([]),[Fe,ve]=o.useState([]),_s=["Principal","General"],[Qs,Xs]=o.useState(!1),ye=o.useRef(),Is=()=>{$(ye.current).modal("show")},Ts=async()=>{try{Y.fire({title:"Exportando items...",text:"Por favor espere",allowOutsideClick:!1,didOpen:()=>{Y.showLoading()}}),await W.exportData(),Y.fire({icon:"success",title:"Exportación exitosa",text:"El archivo se ha descargado correctamente",timer:2e3})}catch(s){console.error("Error al exportar:",s),Y.fire({icon:"error",title:"Error",text:s.message||"No se pudo exportar los items. Por favor intente nuevamente."})}};return e.jsxs(e.Fragment,{children:[e.jsx(Vs,{gridRef:f,title:"Items",rest:W,toolBar:s=>{s.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(f.current).dxDataGrid("instance").refresh()}}),s.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Agregar",hint:"Agregar",onClick:()=>Te()}}),s.unshift({widget:"dxButton",location:"after",options:{icon:"upload",text:"Importar Datos",hint:"Importar Datos",onClick:()=>Is()}}),s.unshift({widget:"dxButton",location:"after",options:{icon:"download",text:"Exportar Items",hint:"Exportar Items (Formato Excel)",onClick:()=>Ts()}})},exportable:!0,exportableName:"Items",columns:[{dataField:"id",caption:"ID",visible:!1},c.has("items","category_id")&&{dataField:"category.name",caption:"Categoría",width:"120px",cellTemplate:(s,{data:t})=>{var a,i,r;s.html(ne.renderToString(e.jsxs(e.Fragment,{children:[e.jsx("b",{className:"d-block fst-italic text-muted",children:(a=t.collection)==null?void 0:a.name}),e.jsx("b",{className:"d-block",children:(i=t.category)==null?void 0:i.name}),e.jsx("small",{className:"text-muted",children:(r=t.subcategory)==null?void 0:r.name})]})))}},c.has("items","subcategory_id")&&{dataField:"subcategory.name",caption:"Subcategoría",visible:!1},c.has("items","brand_id")&&{dataField:"brand.name",caption:"Marca",width:"120px"},{dataField:"name",caption:"Nombre",minWidth:"300px",cellTemplate:(s,{data:t})=>{const i=((r,n)=>{if(!r)return"";const m=r.split(" ");return m.length>n?m.slice(0,n).join(" ")+"...":r})(t.summary,12);s.html(ne.renderToString(e.jsxs(e.Fragment,{children:[e.jsx("b",{children:t.name}),e.jsx("br",{}),e.jsx("span",{children:i})]})))}},c.has("items","sku")&&{dataField:"sku",caption:"SKU",width:"120px"},{dataField:"final_price",caption:"Precio",dataType:"number",width:"75px",cellTemplate:(s,{data:t})=>{s.html(ne.renderToString(e.jsxs(e.Fragment,{children:[t.discount>0&&e.jsxs("small",{className:"d-block text-muted",style:{textDecoration:"line-through"},children:[Be()," ",Ue(t.price)]}),e.jsxs("span",{children:[Be()," ",Ue(t.discount>0?t.discount:t.price)]})]})))}},c.has("items","weight")&&{dataField:"weight",caption:"Peso",dataType:"number",width:"75px"},{dataField:"image",caption:"Imagen",width:"90px",allowFiltering:!1,cellTemplate:(s,{data:t})=>{v(s,e.jsx("img",{src:`/storage/images/item/${t.image}`,style:{width:"80px",height:"48px",objectFit:"contain",objectPosition:"center",borderRadius:"4px"},onError:a=>a.target.src="/api/cover/thumbnail/null"}))}},c.has("items","banner")&&{dataField:"banner",caption:"Imagen Banner",width:"90px",allowFiltering:!1,cellTemplate:(s,{data:t})=>{v(s,e.jsx("img",{src:`/storage/images/item/${t.banner}`,style:{width:"80px",height:"48px",objectFit:"contain",objectPosition:"center",borderRadius:"4px"},onError:a=>a.target.src="/api/cover/thumbnail/null"}))}},c.has("items","is_new")&&{dataField:"is_new",caption:"Nuevo",dataType:"boolean",width:"80px",cellTemplate:(s,{data:t})=>{const a=t.is_new===1||t.is_new==="1"||t.is_new===!0;v(s,e.jsx(_,{checked:a,onChange:i=>P({id:t.id,field:"is_new",value:i.target.checked?1:0})}))}},c.has("items","offering")&&{dataField:"offering",caption:"En oferta",dataType:"boolean",width:"80px",cellTemplate:(s,{data:t})=>{const a=t.offering===1||t.offering==="1"||t.offering===!0;v(s,e.jsx(_,{checked:a,onChange:i=>P({id:t.id,field:"offering",value:i.target.checked?1:0})}))}},c.has("items","recommended")&&{dataField:"recommended",caption:"Recomendado",dataType:"boolean",width:"80px",cellTemplate:(s,{data:t})=>{const a=t.recommended===1||t.recommended==="1"||t.recommended===!0;v(s,e.jsx(_,{checked:a,onChange:i=>P({id:t.id,field:"recommended",value:i.target.checked?1:0})}))}},c.has("items","featured")&&{dataField:"featured",caption:"Destacado",dataType:"boolean",width:"80px",cellTemplate:(s,{data:t})=>{const a=t.featured===1||t.featured==="1"||t.featured===!0;v(s,e.jsx(_,{checked:a,onChange:i=>P({id:t.id,field:"featured",value:i.target.checked?1:0})}))}},c.has("items","views")&&{dataField:"views",caption:"Vistas",dataType:"number",width:"80px",cellTemplate:(s,{data:t})=>{const a=t.views||0;s.html(ne.renderToString(e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-eye text-primary me-1"}),e.jsx("span",{className:"fw-bold",children:a.toLocaleString()})]})))}},c.has("items","most_view")&&{dataField:"most_view",caption:"Más visto",dataType:"boolean",width:"80px",cellTemplate:(s,{data:t})=>{const a=t.most_view===1||t.most_view==="1"||t.most_view===!0;v(s,e.jsx(_,{checked:a,onChange:i=>P({id:t.id,field:"most_view",value:i.target.checked?1:0})}))}},c.has("items","is_detail")&&{dataField:"is_detail",caption:"Con Detalle",dataType:"boolean",width:"90px",cellTemplate:(s,{data:t})=>{const a=t.is_detail===1||t.is_detail==="1"||t.is_detail===!0;v(s,e.jsx(_,{checked:a,onChange:i=>P({id:t.id,field:"is_detail",value:i.target.checked?1:0})}))}},c.has("items","sold_out")&&{dataField:"sold_out",caption:"Agotado",dataType:"boolean",width:"85px",cellTemplate:(s,{data:t})=>{const a=t.sold_out===1||t.sold_out==="1"||t.sold_out===!0;v(s,e.jsx(_,{checked:a,onChange:i=>P({id:t.id,field:"sold_out",value:i.target.checked?1:0})}))}},c.has("items","visible")&&{dataField:"visible",caption:"Visible",dataType:"boolean",width:"80px",cellTemplate:(s,{data:t})=>{v(s,e.jsx(_,{checked:t.visible,onChange:a=>Cs({id:t.id,value:a.target.checked})}))}},{caption:"Acciones",width:"100px",cellTemplate:(s,{data:t})=>{s.css("text-overflow","unset"),s.append(We({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>Te(t)})),s.append(We({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>Ss(t.id)}))},allowFiltering:!1,allowExporting:!1}]}),e.jsx(Ge,{modalRef:A,title:Qe?"Editar item":"Agregar item",onSubmit:ks,size:"xl",children:e.jsxs("div",{id:"principal-container",children:[e.jsx("input",{ref:w,type:"hidden"}),e.jsxs("ul",{className:"nav nav-pills nav-justified mb-4",role:"tablist",style:{backgroundColor:"#f8f9fa",borderRadius:"8px",padding:"4px",border:"1px solid #e9ecef"},children:[e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link active",id:"basic-info-tab","data-bs-toggle":"pill","data-bs-target":"#basic-info",type:"button",role:"tab","aria-controls":"basic-info","aria-selected":"true",style:{borderRadius:"6px",fontWeight:"500",transition:"all 0.3s ease"},children:[e.jsx("i",{className:"fas fa-info-circle me-2"}),"Información Básica"]})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link",id:"pricing-tab","data-bs-toggle":"pill","data-bs-target":"#pricing",type:"button",role:"tab","aria-controls":"pricing","aria-selected":"false",style:{borderRadius:"6px",fontWeight:"500",transition:"all 0.3s ease"},children:[e.jsx("i",{className:"fas fa-dollar-sign me-2"}),"Precios y Stock"]})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link",id:"multimedia-tab","data-bs-toggle":"pill","data-bs-target":"#multimedia",type:"button",role:"tab","aria-controls":"multimedia","aria-selected":"false",style:{borderRadius:"6px",fontWeight:"500",transition:"all 0.3s ease"},children:[e.jsx("i",{className:"fas fa-images me-2"}),"Multimedia"]})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link",id:"features-tab","data-bs-toggle":"pill","data-bs-target":"#features",type:"button",role:"tab","aria-controls":"features","aria-selected":"false",style:{borderRadius:"6px",fontWeight:"500",transition:"all 0.3s ease"},children:[e.jsx("i",{className:"fas fa-list-ul me-2"}),"Características"]})})]}),e.jsxs("div",{className:"tab-content",children:[e.jsx("div",{className:"tab-pane fade show active",id:"basic-info",role:"tabpanel","aria-labelledby":"basic-info-tab",children:e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-tag me-2"}),"Identificación"]})}),e.jsxs("div",{className:"card-body",children:[e.jsx(I,{eRef:ue,label:"SKU",required:!0,hidden:!c.has("items","sku")}),e.jsx(I,{eRef:p,label:"Nombre del Producto",required:!0,hidden:!c.has("items","name")}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(I,{eRef:V,label:"Color",required:!0,hidden:!c.has("items","color")})}),e.jsx("div",{className:"col-md-6",children:e.jsx(I,{eRef:O,label:"Talla",required:!0,hidden:!c.has("items","size")})}),e.jsx("div",{className:"col-md-6",children:e.jsx(I,{eRef:fe,label:"Peso",hidden:!c.has("items","weight")})})]})]})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-sitemap me-2"}),"Categorización"]})}),e.jsxs("div",{className:"card-body",children:[e.jsx(Z,{eRef:x,label:"Categoría",required:!0,dropdownParent:"#principal-container",onChange:s=>Ye(s.target.value),hidden:!c.has("items","category_id"),children:B.map((s,t)=>e.jsx("option",{value:s.id,children:s.name},t))}),e.jsx(Z,{eRef:R,label:"Colección",dropdownParent:"#principal-container",onChange:s=>Ze(s.target.value),hidden:!c.has("items","collection_id"),children:ee.map((s,t)=>e.jsx("option",{value:s.id,children:s.name},t))}),e.jsx(De,{eRef:q,label:"Subcategoría",searchAPI:"/api/admin/subcategories/paginate",searchBy:"name",filter:["category_id","=",Xe],dropdownParent:"#principal-container",hidden:!c.has("items","subcategory_id")}),e.jsx(Z,{eRef:J,label:"Marca",dropdownParent:"#principal-container",hidden:!c.has("items","brand_id"),children:M.map((s,t)=>e.jsx("option",{value:s.id,children:s.name},t))})]})]})}),e.jsxs("div",{className:"col-12",children:[e.jsxs("div",{className:"card border-0 shadow-sm",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-align-left me-2"}),"Descripción"]})}),e.jsxs("div",{className:"card-body",children:[e.jsx(Es,{eRef:h,label:"Resumen",rows:3,hidden:!c.has("items","summary")}),e.jsxs(Z,{eRef:K,label:"Tienda",dropdownParent:"#principal-container",onChange:s=>es(s.target.value),hidden:!c.has("items","store_id"),children:[e.jsx("option",{value:"",children:"Seleccionar tienda (opcional)"}),T.map((s,t)=>e.jsx("option",{value:s.id,children:s.name},t))]}),e.jsx(De,{id:"tags",eRef:de,searchAPI:"/api/admin/tags/paginate",searchBy:"name",label:"Tags",hidden:!c.has("items","is_tags"),dropdownParent:"#principal-container",tags:!0,multiple:!0})]})]}),e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card border-0 shadow-sm",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-edit me-2"}),"Descripción Detallada"]})}),e.jsx("div",{className:"card-body",children:e.jsx(Os,{eRef:me,label:"Descripción Completa"})})]})})]})]})}),e.jsx("div",{className:"tab-pane fade",id:"pricing",role:"tabpanel","aria-labelledby":"pricing-tab",children:e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-dollar-sign me-2"}),"Precios"]})}),e.jsxs("div",{className:"card-body",children:[e.jsx(I,{eRef:H,label:"Precio Regular",type:"number",step:"0.01",required:!0,hidden:!c.has("items","price")}),e.jsx(I,{eRef:ce,label:"Precio con Descuento",type:"number",step:"0.01"})]})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-boxes me-2"}),"Inventario"]})}),e.jsx("div",{className:"card-body",children:e.jsx(I,{label:"Stock Disponible",eRef:pe,type:"number",required:!0,hidden:!c.has("items","stock")})})]})})]})}),e.jsx("div",{className:"tab-pane fade",id:"multimedia",role:"tabpanel","aria-labelledby":"multimedia-tab",children:e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-image me-2"}),"Imágenes Principales"]})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsx(Re,{eRef:b,name:"banner",label:"Banner",aspect:2/1,col:"col-12",hidden:!c.has("items","banner")}),e.jsx(Re,{eRef:j,name:"image",label:"Imagen Principal",aspect:1,col:"col-md-6",hidden:!c.has("items","image")}),e.jsx(Re,{eRef:y,name:"texture",label:"Textura",aspect:1,col:"col-md-6",hidden:!c.has("items","texture")})]})})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-photo-video me-2"}),"Galería y Multimedia"]})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"form-label fw-semibold text-dark mb-3",children:[e.jsx("i",{className:"fas fa-images me-2 text-primary"}),"Galería de Imágenes",N.filter(s=>!s.toDelete).length>0&&e.jsx("span",{className:"badge bg-primary ms-2",children:N.filter(s=>!s.toDelete).length})]}),e.jsx("input",{id:"input-item-gallery",ref:Se,type:"file",multiple:!0,accept:"image/*",hidden:!0,onChange:rs}),e.jsxs("div",{className:"gallery-container",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:"16px",padding:"16px",backgroundColor:"#f8f9fa",borderRadius:"12px",border:"2px dashed #dee2e6",minHeight:"160px"},children:[N.filter(s=>!s.toDelete).map((s,t)=>{const a=N.findIndex(r=>r===s),i=t+1;return e.jsxs("div",{className:"gallery-item position-relative",draggable:!0,onDragStart:r=>ds(r,a),onDragEnd:ms,onDragOver:us,onDrop:r=>ps(r,a),style:{aspectRatio:"1",borderRadius:"12px",overflow:"hidden",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",transition:"all 0.3s ease",cursor:"grab",transform:S===a?"scale(1.05)":"scale(1)",opacity:S===a?.8:1,border:"3px solid transparent",background:"white"},onMouseEnter:r=>{S===null&&(r.currentTarget.style.transform="scale(1.02)",r.currentTarget.style.boxShadow="0 6px 20px rgba(0,0,0,0.15)")},onMouseLeave:r=>{S===null&&(r.currentTarget.style.transform="scale(1)",r.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.1)")},children:[e.jsx("div",{className:"position-absolute top-0 start-0 m-2",children:e.jsx("span",{className:"badge bg-primary rounded-circle d-flex align-items-center justify-content-center",style:{width:"24px",height:"24px",fontSize:"11px",fontWeight:"bold"},children:i})}),e.jsx("img",{src:s.url,alt:`Imagen ${i}`,className:"w-100 h-100",style:{objectFit:"cover",pointerEvents:"none"}}),e.jsx("div",{className:"position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center",style:{background:"rgba(0,0,0,0.7)",opacity:0,transition:"opacity 0.3s ease"},onMouseEnter:r=>r.currentTarget.style.opacity=1,onMouseLeave:r=>r.currentTarget.style.opacity=0,children:e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-light btn-sm rounded-circle d-flex align-items-center justify-content-center",style:{width:"32px",height:"32px"},title:"Mover imagen",children:e.jsx("i",{className:"fas fa-arrows-alt text-dark"})}),e.jsx("button",{type:"button",className:"btn btn-danger btn-sm rounded-circle d-flex align-items-center justify-content-center",style:{width:"32px",height:"32px"},onClick:r=>cs(r,a),title:"Eliminar imagen",children:e.jsx("i",{className:"fas fa-trash text-white"})})]})})]},a)}),e.jsx("div",{className:"gallery-add-button d-flex flex-column align-items-center justify-content-center",style:{aspectRatio:"1",border:"3px dashed #71b6f9",borderRadius:"12px",backgroundColor:"rgba(13, 110, 253, 0.05)",cursor:"pointer",transition:"all 0.3s ease",minHeight:"120px"},onClick:()=>Se.current.click(),onDrop:is,onDragOver:os,onMouseEnter:s=>{s.currentTarget.style.backgroundColor="rgba(13, 110, 253, 0.1)",s.currentTarget.style.borderColor="#0056b3",s.currentTarget.style.transform="scale(1.02)"},onMouseLeave:s=>{s.currentTarget.style.backgroundColor="rgba(13, 110, 253, 0.05)",s.currentTarget.style.borderColor="#0d6efd",s.currentTarget.style.transform="scale(1)"},children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mb-2 bg-primary",style:{width:"48px",height:"48px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto"},children:e.jsx("i",{className:"fas fa-plus text-white fa-lg"})}),e.jsx("p",{className:"mb-0 text-primary fw-semibold",style:{fontSize:"12px"},children:"Agregar Imagen"}),e.jsx("small",{className:"text-muted",style:{fontSize:"10px"},children:"Arrastra o haz clic"})]})})]}),N.filter(s=>!s.toDelete).length===0&&e.jsxs("div",{className:"text-center py-4 text-muted",children:[e.jsx("i",{className:"fas fa-images fa-3x mb-3 opacity-50"}),e.jsx("p",{className:"mb-1",children:"No hay imágenes en la galería"}),e.jsx("small",{children:'Arrastra archivos aquí o haz clic en "Agregar Imagen"'})]})]}),e.jsxs("div",{className:"mb-4",hidden:!c.has("items","pdf"),children:[e.jsxs("label",{className:"form-label fw-semibold text-dark mb-3",children:[e.jsx("i",{className:"fas fa-file-pdf me-2 text-danger"}),"Archivos PDF (Manuales / Catálogos)",k.filter(s=>!s.toDelete).length>0&&e.jsx("span",{className:"badge bg-danger ms-2",children:k.filter(s=>!s.toDelete).length})]}),e.jsx("input",{ref:_e,type:"file",multiple:!0,accept:".pdf",hidden:!0,onChange:fs}),e.jsx("div",{className:"list-group mb-3",children:k.filter(s=>!s.toDelete).map((s,t)=>{const a=k.findIndex(i=>i===s);return e.jsxs("div",{draggable:!0,onDragStart:i=>xs(i,a),onDragEnd:gs,onDragOver:bs,onDrop:i=>js(i,a),className:"list-group-item d-flex align-items-center justify-content-between",style:{cursor:"grab",opacity:L===a?.5:1,backgroundColor:L===a?"#f8f9fa":"white",transition:"all 0.2s ease"},children:[e.jsxs("div",{className:"d-flex align-items-center flex-grow-1",style:{minWidth:0},children:[e.jsx("span",{className:"badge bg-danger me-3",style:{minWidth:"28px"},children:t+1}),e.jsx("i",{className:"fas fa-grip-vertical text-muted me-3"}),e.jsx("i",{className:"fas fa-file-pdf text-danger me-2"}),e.jsx("span",{className:"text-truncate",style:{maxWidth:"250px"},children:s.name})]}),e.jsxs("div",{className:"d-flex gap-2 flex-shrink-0",children:[!s.file&&e.jsx("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-outline-primary",children:e.jsx("i",{className:"fas fa-eye"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:i=>hs(i,a),children:e.jsx("i",{className:"fas fa-trash"})})]})]},a)})}),e.jsxs("button",{type:"button",className:"btn btn-outline-danger w-100",onClick:()=>_e.current.click(),children:[e.jsx("i",{className:"fas fa-plus me-2"}),"Agregar PDFs"]})]}),e.jsxs("div",{className:"mb-3",hidden:!c.has("items","linkvideo"),children:[e.jsxs("label",{className:"form-label fw-semibold text-dark mb-3",children:[e.jsx("i",{className:"fas fa-video me-2 text-success"}),"Links de Videos",C.filter(s=>!s.toDelete).length>0&&e.jsx("span",{className:"badge bg-success ms-2",children:C.filter(s=>!s.toDelete).length})]}),e.jsx("div",{className:"list-group mb-3",children:C.filter(s=>!s.toDelete).map((s,t)=>{const a=C.findIndex(i=>i===s);return e.jsxs("div",{draggable:!0,onDragStart:i=>Ns(i,a),onDragEnd:ws,onDragOver:Rs,onDrop:i=>Ds(i,a),className:"list-group-item d-flex align-items-center justify-content-between",style:{cursor:"grab",opacity:z===a?.5:1,backgroundColor:z===a?"#f8f9fa":"white",transition:"all 0.2s ease"},children:[e.jsxs("div",{className:"d-flex align-items-center flex-grow-1",style:{minWidth:0,overflow:"hidden"},children:[e.jsx("span",{className:"badge bg-success me-3 flex-shrink-0",style:{minWidth:"28px"},children:t+1}),e.jsx("i",{className:"fas fa-grip-vertical text-muted me-3 flex-shrink-0"}),e.jsx("i",{className:"fas fa-video text-success me-2 flex-shrink-0"}),e.jsx("span",{className:"small",style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"100%"},title:s.url,children:s.url})]}),e.jsxs("div",{className:"d-flex gap-2 flex-shrink-0 ms-2",children:[e.jsx("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-outline-primary",children:e.jsx("i",{className:"fas fa-external-link-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:i=>ys(i,a),children:e.jsx("i",{className:"fas fa-trash"})})]})]},a)})}),e.jsxs("div",{className:"input-group",children:[e.jsx("input",{ref:xe,type:"url",className:"form-control",placeholder:"https://youtube.com/watch?v=..."}),e.jsxs("button",{type:"button",className:"btn btn-success",onClick:vs,children:[e.jsx("i",{className:"fas fa-plus me-2"}),"Agregar"]})]})]})]})]})})]})}),e.jsx("div",{className:"tab-pane fade",id:"features",role:"tabpanel","aria-labelledby":"features-tab",children:e.jsxs("div",{className:"row g-3",children:[c.has("items","is_features")&&e.jsx("div",{className:`${c.has("items","is_specifications")?"col-md-6":"col-12"}`,children:e.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-list-ul me-2"}),"Características"]})}),e.jsx("div",{className:"card-body",children:e.jsx(qe,{ref:He,label:"Lista de Características",structure:"",value:Ae,onChange:Ee})})]})}),c.has("items","is_specifications")&&e.jsx("div",{className:`${c.has("items","is_features")?"col-md-6":"col-12"}`,children:e.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-cogs me-2"}),"Especificaciones"]})}),e.jsx("div",{className:"card-body",children:e.jsx(qe,{ref:Ke,label:"Especificaciones Técnicas",structure:{type:"",title:"",description:""},value:Fe,onChange:ve,typeOptions:_s})})]})}),c.has("items","is_amenities")&&e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card border-0 shadow-sm",children:[e.jsx("div",{className:"card-header bg-light",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-star-circle me-2 text-warning"}),"Cualidades"]})}),e.jsxs("div",{className:"card-body",children:[e.jsx(De,{eRef:he,searchAPI:"/api/admin/amenities/paginate",searchBy:"name",label:"Seleccionar Cualidades",dropdownParent:"#principal-container",multiple:!0}),e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fas fa-info-circle me-1"}),"Selecciona las cualidades o atributos que destacan este producto"]})]})]})}),c.has("items","is_applications")&&e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card border-0 shadow-sm",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-th-large me-2 text-info"}),"Aplicaciones / Usos"]})}),e.jsxs("div",{className:"card-body",children:[e.jsx(Z,{eRef:ae,label:"Seleccionar Aplicaciones",dropdownParent:"#principal-container",multiple:!0,children:ss.map(s=>e.jsx("option",{value:s.id,"data-image":s.image,"data-icon":s.icon,children:s.name},s.id))}),e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fas fa-info-circle me-1"}),"Selecciona las industrias o usos donde se aplica este producto"]})]})]})}),c.has("items","is_attributes")&&re.length>0&&e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card border-0 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"card-header bg-gradient",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"",style:{width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("i",{className:"fas fa-sliders-h text-primarye"})}),e.jsxs("div",{children:[e.jsx("h6",{className:"mb-0  fw-bold",children:"Atributos Técnicos"}),e.jsx("small",{className:"",children:"Especificaciones del producto"})]})]}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[u.length>0&&e.jsxs("span",{className:"badge bg-white text-primary fw-bold px-3 py-2",style:{fontSize:"0.85rem"},children:[u.length," ",u.length===1?"atributo":"atributos"]}),e.jsxs("button",{type:"button",className:"btn btn-light btn-sm fw-semibold d-flex align-items-center gap-2",onClick:()=>{g([...u,{attribute_id:"",value:"",attribute:null}])},style:{borderRadius:"20px",padding:"8px 16px"},children:[e.jsx("i",{className:"fas fa-plus"}),e.jsx("span",{children:"Agregar"})]})]})]})}),e.jsx("div",{className:"card-body p-4",style:{backgroundColor:"#f8f9ff"},children:u.length===0?e.jsxs("div",{className:"text-center py-5",children:[e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"rounded-circle mx-auto d-flex align-items-center justify-content-center",style:{width:"80px",height:"80px",background:"linear-gradient(135deg, #667eea20 0%, #764ba220 100%)",border:"2px dashed #667eea50"},children:e.jsx("i",{className:"fas fa-layer-group fa-2x",style:{color:"#667eea"}})})}),e.jsx("h6",{className:"text-muted mb-2",children:"Sin atributos configurados"}),e.jsx("p",{className:"text-muted small mb-4",style:{maxWidth:"300px",margin:"0 auto"},children:"Agrega atributos técnicos como dimensiones, peso, material y más para detallar tu producto."}),e.jsxs("button",{type:"button",className:"btn btn-outline-primary btn-sm px-4",onClick:()=>{g([...u,{attribute_id:"",value:"",attribute:null}])},style:{borderRadius:"20px"},children:[e.jsx("i",{className:"fas fa-plus me-2"}),"Agregar primer atributo"]})]}):e.jsxs("div",{className:"attributes-list",children:[u.map((s,t)=>{const a=re.find(n=>n.id===s.attribute_id),i={text:"fa-font",number:"fa-hashtag",select:"fa-list-ul",color:"fa-palette"},r={text:"#3b82f6",number:"#10b981",select:"#f59e0b",color:"#ec4899"};return e.jsx("div",{className:"attribute-item mb-3 p-3 bg-white rounded-3 border",style:{borderColor:a?r[a.type]+"40":"#e5e7eb",borderLeftWidth:"4px",borderLeftColor:a?r[a.type]:"#e5e7eb",transition:"all 0.2s ease",boxShadow:"0 1px 3px rgba(0,0,0,0.05)"},children:e.jsxs("div",{className:"row g-3 align-items-center",children:[e.jsx("div",{className:"col-auto",children:e.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center fw-bold",style:{width:"32px",height:"32px",backgroundColor:a?r[a.type]+"15":"#f3f4f6",color:a?r[a.type]:"#9ca3af",fontSize:"0.85rem"},children:t+1})}),e.jsxs("div",{className:"col-md-4",children:[e.jsxs("label",{className:"form-label small text-muted mb-1 d-flex align-items-center gap-2",children:[e.jsx("i",{className:"fas fa-tag",style:{fontSize:"0.7rem"}}),"Atributo"]}),e.jsxs("select",{className:"form-select",value:s.attribute_id,onChange:n=>{const m=[...u],G=re.find(ie=>ie.id===n.target.value);m[t]={...m[t],attribute_id:n.target.value,attribute:G,value:""},g(m)},style:{borderRadius:"8px"},children:[e.jsx("option",{value:"",children:"Seleccionar..."}),re.filter(n=>!u.some((m,G)=>G!==t&&m.attribute_id===n.id)).map(n=>e.jsx("option",{value:n.id,children:n.name},n.id))]})]}),e.jsxs("div",{className:"col",children:[e.jsxs("label",{className:"form-label small text-muted mb-1 d-flex align-items-center gap-2",children:[a&&e.jsx("i",{className:`fas ${i[a.type]}`,style:{fontSize:"0.7rem",color:r[a.type]}}),"Valor",(a==null?void 0:a.unit)&&e.jsx("span",{className:"badge ms-1",style:{backgroundColor:r[a.type]+"20",color:r[a.type],fontSize:"0.7rem",fontWeight:"600"},children:a.unit})]}),(a==null?void 0:a.type)==="select"&&(a!=null&&a.options)?e.jsxs("select",{className:"form-select",value:s.value,onChange:n=>{const m=[...u];m[t].value=n.target.value,g(m)},style:{borderRadius:"8px"},children:[e.jsx("option",{value:"",children:"Seleccionar opción..."}),a.options.map((n,m)=>e.jsx("option",{value:n,children:n},m))]}):(a==null?void 0:a.type)==="color"?e.jsxs("div",{className:"d-flex gap-2 align-items-center",children:[e.jsx("input",{type:"color",className:"form-control form-control-color p-1",value:s.value||"#6366f1",onChange:n=>{const m=[...u];m[t].value=n.target.value,g(m)},style:{width:"50px",height:"38px",borderRadius:"8px",cursor:"pointer"}}),e.jsx("input",{type:"text",className:"form-control",value:s.value||"#6366f1",onChange:n=>{const m=[...u];m[t].value=n.target.value,g(m)},placeholder:"#000000",style:{borderRadius:"8px",fontFamily:"monospace"}})]}):e.jsx("input",{type:(a==null?void 0:a.type)==="number"?"number":"text",className:"form-control",placeholder:a?`Ingresa ${a.name.toLowerCase()}${a!=null&&a.unit?` en ${a.unit}`:""}`:"Selecciona un atributo primero",value:s.value,disabled:!a,onChange:n=>{const m=[...u];m[t].value=n.target.value,g(m)},style:{borderRadius:"8px"}})]}),e.jsx("div",{className:"col-auto",children:e.jsx("button",{type:"button",className:"btn btn-outline-danger btn-sm d-flex align-items-center justify-content-center",onClick:()=>{g(u.filter((n,m)=>m!==t))},title:"Eliminar atributo",style:{width:"38px",height:"38px",borderRadius:"8px",marginTop:"24px"},children:e.jsx("i",{className:"fas fa-trash-alt"})})})]})},t)}),e.jsxs("div",{className:"add-more-btn text-center py-3 rounded-3 mt-2",style:{border:"2px dashed #667eea50",backgroundColor:"#667eea08",cursor:"pointer",transition:"all 0.2s ease"},onClick:()=>{g([...u,{attribute_id:"",value:"",attribute:null}])},onMouseEnter:s=>{s.currentTarget.style.backgroundColor="#667eea15",s.currentTarget.style.borderColor="#667eea"},onMouseLeave:s=>{s.currentTarget.style.backgroundColor="#667eea08",s.currentTarget.style.borderColor="#667eea50"},children:[e.jsx("i",{className:"fas fa-plus me-2",style:{color:"#667eea"}}),e.jsx("span",{style:{color:"#667eea",fontWeight:"500"},children:"Agregar otro atributo"})]})]})})]})})]})})]})]})}),e.jsx(Ge,{modalRef:ye,title:"Importar Datos",size:"lg",children:e.jsx(Ws,{gridRef:f,modalRef:ye,excelTemplate:Array.isArray(U)?(Pe=U.find(s=>s.correlative==="excel_import_template"))==null?void 0:Pe.description:null})})]})};Ls((B,M)=>{Fs.createRoot(B).render(e.jsx(As,{...M,title:"Items",children:e.jsx(qs,{...M})}))});
