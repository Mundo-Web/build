import{j as s}from"./AboutSimple-Cf8x2fCZ.js";import{r as o}from"./index-BOnQTV8N.js";import"./BlogCarousel-Bde9hmkj.js";/* empty css               */import"./BlogCarrusel-D7F5uf-O.js";import"./ProductDetailKatya-D15SNboE.js";/* empty css                  */import{t as te}from"./CardProductKatya-ncpmQ0JU.js";import{I as ae}from"./ItemsRest-DvgvOR-1.js";import"./ProductMakita-DFA-nEkk.js";import"./ProductNavigation-LY1iaFMA.js";import oe from"./ProductMultivet-BH71hLv7.js";import{Z as re}from"./zoom-out-DUAqyJbD.js";import{Z as ne}from"./zoom-in-DjAbuZ1Y.js";import{S as le}from"./share-2-DAFE7yVK.js";import{C as ce}from"./circle-check-big-CYWUGR3Z.js";import{C as ie}from"./chevron-right-Cug7tVUE.js";import{Q as de}from"./quote-Dsy8RbQK.js";import{A as ue}from"./index-BZvh78jk.js";import{m as A}from"./proxy-B0QLMKEh.js";import{X as pe}from"./x-fof_H3Vv.js";import{S as xe}from"./star-DU-S9B50.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./main-B6F2O9-U.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./index-pSueRYGM.js";import"./index-B6ujFmsw.js";import"./BasicRest-BqhZrBN0.js";import"./ProductCard-BWZGpmea.js";import"./HeaderSearch-DAVhxjsI.js";import"./PolicyModal-C80IvD61.js";import"./index-Chjiymov.js";import"./CartItemRow-Ds6-hPyN.js";import"./Number2Currency-B5ZenVq9.js";import"./General-BmbBKdsB.js";import"./tippy-react.esm-DmkRJDEW.js";import"./package-DBFPPBi1.js";import"./createLucideIcon-DfjclApS.js";import"./trash-2-DU7LB6-f.js";import"./plus-CTIomuuF.js";import"./eye-ScgfreHn.js";import"./CardProductMultivet-DEJJ6aW6.js";import"./circle-chevron-right-Cragr8lM.js";import"./CardProductKatya-B4yVSWS1.js";import"./use-in-view-DtBxy-1R.js";const hs=({item:e,data:he,setCart:z,cart:H,generals:f,favorites:g,setFavorites:me})=>{const E=new ae,[i,Z]=o.useState({url:e==null?void 0:e.image,type:"main"}),[c,M]=o.useState(!1),[S,b]=o.useState({x:50,y:50}),[u,j]=o.useState(!1),[v,I]=o.useState({x:0,y:0}),R=o.useRef(null),[n,p]=o.useState(1),[x,y]=o.useState([]),[fe,ge]=o.useState(!1),[h,L]=o.useState(!1),[be,O]=o.useState(!1),w=o.useRef(null),N=o.useRef(null),[je,T]=o.useState(!1),[U,X]=o.useState(!1),[q,P]=o.useState(!1);o.useRef(null),o.useRef(null);const[ve,ye]=o.useState(null),k=f==null?void 0:f.find(t=>t.correlative==="phone_whatsapp"),Y=k==null?void 0:k.description;o.useEffect(()=>{g&&e&&O(g.some(t=>t.id===e.id))},[g,e]),o.useEffect(()=>{e!=null&&e.id&&(V(e),K(e))},[e]),o.useEffect(()=>{const a=setTimeout(()=>{if(w.current){const r=w.current.scrollHeight>150;T(r)}if(N.current){const r=N.current.scrollHeight>150;X(r)}},100);return()=>clearTimeout(a)},[e,e==null?void 0:e.specifications]);const B=()=>{c?(M(!1),b({x:50,y:50})):M(!0)},W=t=>{c&&(j(!0),I({x:t.clientX,y:t.clientY}))},C=t=>{if(c&&!u){const a=R.current.getBoundingClientRect(),r=(t.clientX-a.left)/a.width*100,l=(t.clientY-a.top)/a.height*100;b({x:Math.max(0,Math.min(100,r)),y:Math.max(0,Math.min(100,l))})}else if(u&&c){const a=t.clientX-v.x,r=t.clientY-v.y;b(l=>({x:Math.max(0,Math.min(100,l.x-a/3)),y:Math.max(0,Math.min(100,l.y-r/3))})),I({x:t.clientX,y:t.clientY})}},$=()=>{j(!1)},Q=()=>{j(!1)};o.useEffect(()=>{if(u)return document.addEventListener("mousemove",C),document.addEventListener("mouseup",$),()=>{document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",$)}},[u,c,v]);const V=async t=>{try{await E.viewUpdate(t.id)}catch(a){console.error("Error updating view:",a)}},K=async t=>{try{console.log("Buscando productos relacionados para item:",t.id);const a={id:t==null?void 0:t.id},r=await E.productsRelations(a);if(console.log("Respuesta de productos relacionados:",r),!r){console.log("No se encontró respuesta de productos relacionados"),y([]);return}const D=Object.values(r);console.log("Productos relacionados encontrados:",D),y(D)}catch(a){console.error("Error fetching related products:",a),y([])}},G=encodeURIComponent(`¡Hola! Me gustaría cotizar este producto para mi mascota: ${e==null?void 0:e.name}

Cantidad: ${n} unidades

¿Podrían enviarme más información y precios?`);encodeURIComponent(`¡Hola! Tengo consultas sobre este producto: ${e==null?void 0:e.name}

¿Me pueden ayudar con más información?`);const J=`https://wa.me/${Y}?text=${G}`,F=()=>{window.open(J,"_blank")},d=t=>t?new Intl.NumberFormat("es-PE",{style:"currency",currency:"PEN",minimumFractionDigits:2}).format(t):"Consultar precio",ee=t=>{const a=parseFloat(t)||0;return Array.from({length:5},(r,l)=>s.jsx(xe,{className:`w-4 h-4 ${l<Math.floor(a)?"text-yellow-400 fill-current":"text-gray-300"}`},l))},m=(e==null?void 0:e.price)&&(e==null?void 0:e.final_price)&&parseFloat(e.price)>parseFloat(e.final_price),se=m?Math.round((parseFloat(e.price)-parseFloat(e.final_price))/parseFloat(e.price)*100):0,_=[{url:e==null?void 0:e.image,type:"main",alt:"Imagen principal"},...((e==null?void 0:e.images)||[]).filter((t,a,r)=>a===r.findIndex(l=>l.url===t.url)).map((t,a)=>({url:t.url,type:"gallery",index:a,alt:`Imagen ${a+1}`}))];return s.jsxs("div",{className:"bg-white min-h-screen overflow-x-hidden",children:[s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4 lg:py-8",children:[s.jsxs("div",{className:"grid lg:grid-cols-2 gap-6 lg:gap-12",children:[s.jsxs("div",{className:"space-y-3 lg:space-y-4",children:[s.jsxs("div",{className:"relative bg-white rounded-lg shadow-lg overflow-hidden",children:[s.jsxs("div",{className:`aspect-square flex items-center justify-center p-4 lg:p-8 relative ${c?"cursor-zoom-out":"cursor-zoom-in"}`,onClick:B,onMouseDown:W,onMouseMove:C,onMouseLeave:Q,children:[s.jsx("img",{ref:R,src:i.url?`/storage/images/item/${i.url}`:"/api/cover/thumbnail/null",alt:(e==null?void 0:e.name)||"Producto",className:`w-full h-full object-contain transition-transform duration-300 ${c?"scale-150":"scale-100"}`,style:c?{transformOrigin:`${S.x}% ${S.y}%`}:{},onError:t=>{t.target.src="/api/cover/thumbnail/null"}}),s.jsx("div",{className:"absolute top-4 left-4 bg-black bg-opacity-50 text-white px-2 py-2 rounded text-sm",children:c?s.jsx(re,{className:"w-4 h-4"}):s.jsx(ne,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"absolute top-4 right-4 space-y-2",children:(e==null?void 0:e.is_new)&&s.jsx("div",{className:"bg-accent customtext-primary px-3 py-2 rounded-full text-sm font-bold",children:"¡Nuevo!"})}),s.jsx("div",{className:"absolute bottom-4 right-4 flex space-x-2",children:s.jsx("button",{onClick:()=>{var t;(t=navigator.share)!=null&&t.call(navigator,{title:e==null?void 0:e.name,text:e==null?void 0:e.description,url:window.location.href})||navigator.clipboard.writeText(window.location.href),te.success("Enlace copiado al portapapeles")},className:"w-10 h-10 bg-secondary  backdrop-blur-sm rounded-full flex items-center justify-center hover:bg-opacity-100 transition-all shadow-lg",children:s.jsx(le,{className:"w-5 h-5 text-white"})})})]}),_.length>1&&s.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-5 gap-2",children:_.map((t,a)=>s.jsx("button",{onClick:()=>Z(t),className:`aspect-square bg-white rounded-lg overflow-hidden border-2 transition-all hover:border-primary ${i.url===t.url?"border-primary":"border-gray-200"}`,children:s.jsx("img",{src:`/storage/images/item/${t.url}`,alt:t.alt,className:"w-full h-full object-contain p-2",onError:r=>{r.target.src="/api/cover/thumbnail/null"}})},a))})]}),s.jsx("div",{className:"lg:hidden ",children:s.jsxs("div",{className:"text-start",children:[s.jsx("div",{className:"text-3xl sm:text-4xl font-bold font-title customtext-neutral-dark",children:d((e==null?void 0:e.final_price)||(e==null?void 0:e.price))}),m&&s.jsxs("div",{className:"flex items-center justify-start space-x-2 mt-2",children:[s.jsx("span",{className:"text-base customtext-neutral-light line-through",children:d(e.price)}),s.jsxs("span",{className:"bg-red-100 customtext-secondary px-2 py-1 rounded-full text-xs font-bold",children:["Ahorras ",d(parseFloat(e.price)-parseFloat(e.final_price))]})]})]})}),s.jsxs("div",{className:"space-y-4 lg:space-y-6 pb-20 lg:pb-0",children:[s.jsxs("div",{className:"flex flex-row text-sm items-center  gap-8",children:[(e==null?void 0:e.sku)&&s.jsxs("span",{children:[s.jsx("span",{className:"font-bold",children:"SKU:"})," ",e==null?void 0:e.sku]}),(e==null?void 0:e.stock)&&s.jsxs("span",{children:[s.jsx("span",{className:"font-bold",children:"Disponibilidad:"})," ",(e==null?void 0:e.stock)>0?"En stock":"Agotado"]})]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl xl:text-5xl font-title font-semibold customtext-neutral-dark mb-3",children:e==null?void 0:e.name}),s.jsx("div",{className:"flex items-center space-x-4 mb-4",children:(e==null?void 0:e.rating)&&s.jsxs("div",{className:"flex items-center space-x-1",children:[ee(e.rating),s.jsxs("span",{className:"text-sm text-gray-600 ml-2",children:["(",parseFloat(e.rating).toFixed(1),")"]})]})})]}),s.jsx("div",{className:"hidden lg:block bg-white ",children:s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsxs("div",{children:[m&&s.jsxs("div",{className:"flex text-sm customtext-neutral-dark font-semibold items-center space-x-2 mt-1",children:["Precio: "," ",s.jsx("span",{className:"  line-through",children:d(e.price)})]}),s.jsxs("div",{className:"text-4xl flex items-center gap-4 font-bold font-title customtext-neutral-dark",children:[d((e==null?void 0:e.final_price)||(e==null?void 0:e.price)),m&&s.jsxs("div",{className:"bg-secondary text-white px-3 py-2 rounded-full text-base  font-medium",children:["-",se,"%"]})]})]})})}),s.jsxs("div",{className:" customtext-neutral-dark",children:[s.jsx("p",{className:"font-bold",children:"Descripción:"}),s.jsx("div",{ref:w,className:"prose max-w-none customtext-neutral-light transition-all duration-300 ",dangerouslySetInnerHTML:{__html:(e==null?void 0:e.description)||"<p>Sin descripción disponible.</p>"}})]}),(e==null?void 0:e.specifications)&&Array.isArray(e.specifications)&&e.specifications.length>0&&s.jsxs("div",{className:"",children:[s.jsx("div",{ref:N,className:`space-y-3 transition-all duration-300 ${h?"":"max-h-40 overflow-hidden"}`,children:e.specifications.map((t,a)=>t.type==="general"&&s.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[s.jsx(ce,{className:"customtext-secondary w-4 h-4 flex-shrink-0"}),s.jsxs("span",{className:"font-bold customtext-neutral-dark",children:[t.title||"Especificación",":"]}),s.jsx("span",{className:"customtext-neutral-light",children:t.description||t.value||"No especificado"})]},a))}),U&&s.jsxs("button",{onClick:()=>L(!h),className:"mt-4 customtext-secondary hover:customtext-neutral-dark font-medium transition-colors flex items-center gap-2 text-sm",children:[h?"Ver menos":"Ver más características",s.jsx(ie,{className:`w-4 h-4 transform transition-transform ${h?"rotate-90":""}`})]})]}),s.jsxs("div",{className:"hidden lg:block bg-white",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("div",{className:"space-y-4 mt-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"font-bold customtext-neutral-dark",children:"Cantidad"}),s.jsxs("div",{className:"flex items-center bg-gray-50 rounded-xl border border-gray-200 p-1",children:[s.jsx("button",{onClick:()=>p(Math.max(1,n-1)),className:"w-10 h-10 flex items-center justify-center rounded-lg hover:bg-white hover:shadow-sm active:scale-95 transition-all duration-200 customtext-neutral-dark font-bold text-xl",disabled:n<=1,children:"−"}),s.jsx("div",{className:"w-16 h-10 flex items-center justify-center",children:s.jsx("span",{className:"customtext-neutral-dark font-bold text-lg",children:n})}),s.jsx("button",{onClick:()=>p(Math.min(10,n+1)),className:"w-10 h-10 flex items-center justify-center rounded-lg hover:bg-white hover:shadow-sm active:scale-95 transition-all duration-200 customtext-neutral-dark font-bold text-xl",disabled:n>=10,children:"+"})]})]})})}),s.jsx("div",{className:"space-y-3 mt-6",children:s.jsxs("button",{onClick:F,className:"w-full bg-primary customtext-neutral-dark py-4 px-6 rounded-full font-bold flex items-center justify-center space-x-2 hover:scale-105 transition-all shadow-lg hover:shadow-xl transform duration-500",children:[s.jsx("span",{children:"Agregar al carrito "}),s.jsxs("svg",{width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("path",{d:"M8.5 16H15.7632C20.2508 16 20.9333 13.1808 21.761 9.06908C21.9998 7.88311 22.1192 7.29013 21.8321 6.89507C21.545 6.5 20.9947 6.5 19.8941 6.5H6.5",stroke:"#0E1818","stroke-width":"1.5","stroke-linecap":"round"}),s.jsx("path",{d:"M8.5 16L5.87873 3.51493C5.65615 2.62459 4.85618 2 3.93845 2H3",stroke:"#0E1818","stroke-width":"1.5","stroke-linecap":"round"}),s.jsx("path",{d:"M9.38 16H8.96857C7.60522 16 6.5 17.1513 6.5 18.5714C6.5 18.8081 6.6842 19 6.91143 19H18",stroke:"#0E1818","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),s.jsx("path",{d:"M11 22C11.8284 22 12.5 21.3284 12.5 20.5C12.5 19.6716 11.8284 19 11 19C10.1716 19 9.5 19.6716 9.5 20.5C9.5 21.3284 10.1716 22 11 22Z",stroke:"#0E1818","stroke-width":"1.5"}),s.jsx("path",{d:"M18 22C18.8284 22 19.5 21.3284 19.5 20.5C19.5 19.6716 18.8284 19 18 19C17.1716 19 16.5 19.6716 16.5 20.5C16.5 21.3284 17.1716 22 18 22Z",stroke:"#0E1818","stroke-width":"1.5"})]})]})})]})]})]}),console.log("RelationsItems en render:",x),x&&x.length>0&&s.jsx(oe,{items:x,data:{title:"Productos relacionados",description:"Descubre otros productos cuidadosamente seleccionados que complementan perfectamente tu compra. Nuestra selección incluye productos de alta calidad de las mejores marcas veterinarias para el cuidado integral de tu mascota.",link_catalog:"/catalogo",class_content:"",class_header:"",class_button:"bg-secondary text-white hover:bg-accent hover:customtext-primary"},setCart:z,cart:H})]}),s.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-4 z-40 shadow-lg",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center bg-gray-50 rounded-xl border border-gray-200 p-1",children:[s.jsx("button",{onClick:()=>p(Math.max(1,n-1)),className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-white hover:shadow-sm active:scale-95 transition-all duration-200 customtext-neutral-dark font-bold text-lg",disabled:n<=1,children:"−"}),s.jsx("div",{className:"w-12 h-8 flex items-center justify-center",children:s.jsx("span",{className:"customtext-neutral-dark font-bold text-sm",children:n})}),s.jsx("button",{onClick:()=>p(Math.min(10,n+1)),className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-white hover:shadow-sm active:scale-95 transition-all duration-200 customtext-neutral-dark font-bold text-lg",disabled:n>=10,children:"+"})]}),s.jsxs("button",{onClick:F,className:"flex-1 bg-secondary text-white py-3 px-4 rounded-xl font-bold flex items-center justify-center space-x-2 hover:bg-accent hover:customtext-primary transition-all shadow-lg active:scale-95",children:[s.jsx(de,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:"Solicitar Cotización"})]})]})}),s.jsx(ue,{children:q&&s.jsx(A.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",onClick:()=>P(!1),children:s.jsxs(A.div,{initial:{scale:.8},animate:{scale:1},exit:{scale:.8},className:"relative max-w-4xl max-h-full",onClick:t=>t.stopPropagation(),children:[s.jsx("button",{onClick:()=>P(!1),className:"absolute top-4 right-4 text-white bg-black bg-opacity-50 rounded-full p-2 hover:bg-opacity-75 transition-all z-10",children:s.jsx(pe,{className:"w-6 h-6"})}),s.jsx("img",{src:i.url?`/storage/images/item/${i.url}`:"/api/cover/thumbnail/null",alt:e==null?void 0:e.name,className:"max-w-full max-h-full object-contain rounded-lg",onError:t=>{t.target.src="/api/cover/thumbnail/null"}})]})})})]})};export{hs as default};
