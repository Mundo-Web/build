import{r as e,j as a,t as o,q as s,X as t,aY as l}from"./vendor-react-DB2gWWlz.js";import{I as c}from"./InputForm-Ce6aEPHo.js";import{u as i}from"./ubigeo-Q-ocg024.js";import{S as r}from"./SelectForm-BvNLZUd7.js";import{H as n}from"./HtmlContent-CkpQmeQx.js";import{t as d}from"./GoogleSignInButton-Bo5d3xNo.js";import"./vendor-swiper-Cr_RrIb_.js";function m({generals:m,data:p}){const u=e.useRef(null),[x,h]=e.useState(""),[j,b]=e.useState({nombre:"",tipo_documento:"RUC",numero_identidad:"",celular:"",correo_electronico:"",departamento:"",provincia:"",distrito:"",direccion:"",tipo_producto:"",monto_reclamado:"",descripcion_producto:"",tipo_reclamo:"",fecha_ocurrencia:"",numero_pedido:"",detalle_reclamo:"",acepta_terminos:!1}),[v,g]=e.useState(!1),N=e=>{const{name:a,value:o,type:s,checked:t}=e.target;b({...j,[a]:"checkbox"===s?t:o})},[f,y]=e.useState(""),[C,_]=e.useState(""),[S,w]=e.useState(""),[k,D]=e.useState([]),[E,P]=e.useState([]),[A,I]=e.useState([]);e.useEffect(()=>{const e=[...new Set(i.map(e=>e.departamento))];D(e)},[]),e.useEffect(()=>{if(f){const e=[...new Set(i.filter(e=>e.departamento===f).map(e=>e.provincia))];P(e),_(""),w(""),I([]),b(e=>({...e,departamento:f,provincia:"",distrito:""}))}},[f]),e.useEffect(()=>{if(C){const e=i.filter(e=>e.departamento===f&&e.provincia===C).map(e=>e.distrito);I(e),w(""),b(e=>({...e,provincia:C,distrito:""}))}},[C]),e.useEffect(()=>{S&&b(e=>({...e,distrito:S}))},[S]);const[q,F]=e.useState(!1),R={terms_conditions:"Términos y condiciones"},L=()=>F(null);return a.jsxs("div",{id:p?.element_id||null,className:" w-full px-primary mx-auto pt-8 pb-16 font-paragraph",children:[a.jsxs("div",{className:"max-w-7xl mx-auto  bg-white shadow-lg rounded-2xl customtext-neutral-dark p-8",children:[a.jsx("h1",{className:"text-2xl font-bold mb-10 text-center uppercase",children:"Libro de Reclamaciones"}),a.jsxs("form",{onSubmit:e=>{e.preventDefault(),g(!0);const o=u.current.getValue();if(!o)return h("Por favor, verifica el reCAPTCHA."),void g(!1);const s={...j,recaptcha_token:o};fetch("/api/complaints",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(e=>e.json()).then(e=>{"success"===e.type?(d.success("Solicitud enviada",{description:"Pronto nos comunicaremos contigo ¡Gracias!.",icon:a.jsx(l,{className:"h-5 w-5 text-green-500"}),duration:3e3,position:"bottom-center"}),g(!1)):(d.error("Solicitud rechazada",{description:"Lo sentimos, no se envió su solicitud.",icon:a.jsx(l,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"}),g(!1))}).catch(e=>{d.error("Solicitud rechazada",{description:e||"Lo sentimos, no se envió su solicitud.",icon:a.jsx(l,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"}),g(!1)})},children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Identificación del Consumidor"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx("div",{className:"space-y-1",children:a.jsx(c,{type:"text",label:"Nombres",name:"nombre",value:j.nombre,onChange:N,placeholder:"Nombres"})}),a.jsx("div",{className:"space-y-1",children:a.jsx(r,{label:"Tipo de documento",options:[{value:"ruc",label:"RUC"},{value:"dni",label:"DNI"},{value:"ce",label:"CE"},{value:"pasaporte",label:"Pasaporte"}],placeholder:"Selecciona  documento",onChange:e=>{b(a=>({...a,tipo_documento:e}))}})}),a.jsx("div",{className:"space-y-1",children:a.jsx(c,{type:"text",label:"Número de identidad",name:"numero_identidad",value:j.numero_identidad,onChange:N,placeholder:"Número de identidad"})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[a.jsx("div",{className:"space-y-1",children:a.jsx(c,{type:"text",label:"Número de celular",name:"celular",value:j.celular,onChange:N,placeholder:"Número de celular"})}),a.jsx("div",{className:"space-y-1",children:a.jsx(c,{type:"text",label:" Correo Electrónico",name:"correo_electronico",value:j.correo_electronico,onChange:N,placeholder:" Correo Electrónico"})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[a.jsx(r,{label:"Departamento",options:k,placeholder:"Selecciona un Departamento",onChange:e=>{y(e),b(a=>({...a,departmento:e}))}}),a.jsx(r,{disabled:!f,label:"Provincia",options:E,placeholder:"Selecciona una Provincia",onChange:e=>{_(e),b(a=>({...a,provincia:e}))}}),a.jsx(r,{disabled:!C,label:"Distrito",options:A,placeholder:"Selecciona un Distrito",onChange:e=>{w(e),b(a=>({...a,distrito:e}))}})]}),a.jsx("div",{className:"mt-4",children:a.jsx("div",{className:"space-y-1",children:a.jsx(c,{type:"text",label:"Dirección",name:"direccion",value:j.direccion,onChange:N,placeholder:" Dirección"})})})]}),a.jsxs("div",{className:"mb-8",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Identificación del bien contratado"}),a.jsx("div",{className:"mb-4",children:a.jsx("div",{className:"relative mt-1",children:a.jsx(r,{label:" ¿Fue un producto o Servicio?",options:[{value:"producto",label:"Producto"},{value:"servicio",label:"Servicio"}],placeholder:"Selecciona...",onChange:e=>{b(a=>({...a,tipo_producto:e}))}})})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[a.jsx("div",{className:"space-y-1",children:a.jsx(c,{type:"number",label:" Monto reclamado",name:"monto_reclamado",value:j.monto_reclamado,onChange:N,placeholder:"Monto reclamado"})}),a.jsx("div",{className:"space-y-1",children:a.jsx(c,{type:"text",label:" Descripción de producto",name:"descripcion_producto",value:j.descripcion_producto,onChange:N,placeholder:"Nombre de producto y/o servicios, código(opcional)"})})]})]}),a.jsxs("div",{className:"mb-8",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Detalle del reclamo del pedido del consumidor"}),a.jsx("div",{className:"mb-4",children:a.jsx(r,{label:"¿Es un reclamo o queja?",options:[{value:"reclamo",label:"Reclamo"},{value:"queja",label:"Queja"}],placeholder:"Selecciona...",onChange:e=>{b(a=>({...a,tipo_reclamo:e}))}})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[a.jsx("div",{className:"space-y-1",children:a.jsx(c,{type:"date",label:"  Fecha de ocurrencia",name:"fecha_ocurrencia",value:j.fecha_ocurrencia,onChange:N,placeholder:"dd/mm/aaaa"})}),a.jsx("div",{className:"space-y-1",children:a.jsx(c,{type:"text",label:"Número de Pedido",name:"numero_pedido",value:j.numero_pedido,onChange:N,placeholder:"Número de pedido: #95825548"})})]}),a.jsx("div",{className:"mt-4",children:a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"block text-sm mb-1 customtext-neutral-dark",children:"Detalle de reclamo o queja"}),a.jsx("textarea",{name:"detalle_reclamo",placeholder:"Detalle de reclamo",className:"w-full min-h-32  px-4 py-3 border customtext-neutral-dark  border-neutral-ligth rounded-xl focus:ring-0 focus:outline-0   transition-all duration-300",value:j.detalle_reclamo,onChange:N})]})})]}),a.jsx("div",{className:"mb-8",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("input",{type:"checkbox",id:"terminos",name:"acepta_terminos",className:"mt-1 mr-2",checked:j.acepta_terminos,onChange:N}),a.jsxs("label",{htmlFor:"terminos",className:"text-sm",children:["Estoy de acuerdo con los"," ",a.jsx("a",{onClick:()=>F(0),className:"customtext-primary underline",children:"términos y condiciones"})]})]})}),a.jsxs("div",{className:"mb-8",children:[a.jsx(o,{ref:u,sitekey:"6LfAcfcqAAAAACc7tfKbaBFc1X5I9V4fewWoVf-9"}),x&&a.jsx("p",{className:"text-red-500 mt-2",children:x})]}),a.jsx("div",{children:a.jsxs("button",{disabled:v,type:"submit",className:"bg-primary text-white px-6 py-3 font-medium rounded-lg flex items-center justify-center gap-2",children:[v&&a.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),v?"Enviando...":"Enviar a libro de reclamaciones"]})})]})]}),Object.keys(R).map((e,o)=>{const l=R[e],c=m.find(a=>a.correlative==e)?.description??"";return a.jsxs(s,{isOpen:q===o,onRequestClose:L,contentLabel:l,className:"absolute left-1/2 -translate-x-1/2 bg-white p-6 rounded-xl shadow-lg w-[95%] max-w-4xl my-8",overlayClassName:"fixed inset-0 bg-black bg-opacity-50 z-50",children:[a.jsx("button",{onClick:L,className:"float-right text-red-500 hover:text-red-700 transition-all duration-300 ",children:a.jsx(t,{width:"2rem",strokeWidth:"4px"})}),a.jsx("h2",{className:"text-2xl font-bold mb-4",children:l}),a.jsx(n,{className:"prose",html:c})]},o)})]})}export{m as default};
