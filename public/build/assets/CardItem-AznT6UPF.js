import{j as e,k as s,l as t,P as a,T as i}from"./vendor-react-CZUvQwNQ.js";import{A as r}from"./StorePickupSelector-B6IrMJgS.js";import{C as n}from"./Number2Currency-BX4epFEo.js";const o=({setCart:o,hasPromotion:l,onPromotionClick:c,categorias:m,...d})=>{const x=m?.find(e=>e.id===d?.category_id),u="combo"===d.type,g=()=>{o(e=>e.filter(e=>u?!(e.id===d?.id&&"combo"===e.type):e.id!==d?.id))},h=u?d.final_price||d.price:d.final_price,p=d.price;return e.jsx("div",{className:"w-full bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center  justify-between gap-4 w-full",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-grow",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:u?d?.image?`/storage/images/combo/${d.image}`:`/storage/images/item/${d.image}`:`/storage/images/item/${d?.image}`,alt:d?.name,className:"w-20 h-20 object-cover rounded flex-shrink-0",onError:e=>e.target.src="/api/cover/thumbnail/null"}),u&&e.jsx("div",{className:"absolute -top-1 -right-1 bg-primary text-white rounded-full p-1",children:e.jsx(s,{size:12})}),l&&e.jsx("div",{className:"absolute -top-2 -right-2",children:e.jsx(r,{onClick:()=>c(d),className:"group"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-lg mb-2 line-clamp-2",children:d?.name}),u&&e.jsxs("p",{className:"text-xs customtext-primary font-medium mb-1",children:["Combo (",d.combo_items?.length||0," productos)"]}),u&&d.combo_items&&e.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["Incluye: ",d.combo_items.map(e=>e.name).join(", ")]}),d?.brand?.name||d?.category?.name&&e.jsxs("p",{className:"text-sm customtext-neutral-dark",children:[d?.brand?.name?"Marca: ":"CategorÃ­a: ",e.jsx("span",{className:"customtext-neutral-dark",children:d?.brand?.name?d?.brand?.name:x?.name})]}),!u&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-sm customtext-neutral-dark",children:["Disponibilidad: ",e.jsxs("span",{className:"customtext-neutral-dark",children:[d?.stock>=d?.quantity?"En stock":"Agotado"," "]})]}),e.jsxs("p",{className:"text-sm customtext-neutral-dark",children:["SKU: ",e.jsx("span",{className:"customtext-neutral-dark",children:d?.sku})]})]})]})]}),e.jsxs("div",{className:"flex flex-row justify-between md:flex-col items-end md:items-end gap-4 mt-4 md:mt-0 flex-shrink-0",children:[e.jsxs("div",{className:"text-right",children:[u&&d.discount>0&&e.jsxs("div",{className:"text-xs text-gray-500 line-through",children:[n()," ",Number(p*d?.quantity).toFixed(2)]}),!u&&d?.discount>0&&d?.price>d?.final_price&&e.jsxs("div",{className:"text-xs text-gray-500 line-through",children:[n()," ",Number(p*d?.quantity).toFixed(2)]}),e.jsxs("div",{className:"font-bold text-lg",children:[n()," ",Number(h*d?.quantity).toFixed(2)]}),u&&d.discount>0&&e.jsxs("div",{className:"text-xs text-red-500",children:["-",d.discount_percent,"% OFF"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center border border-gray-200 rounded-lg overflow-hidden shadow-sm",children:[e.jsx("button",{type:"button",onClick:()=>{o(e=>e.map(e=>{if(u?e.id===d?.id&&"combo"===e.type:e.id===d?.id){const s=(e.quantity||1)-1;return s<=0?(g(),null):{...e,quantity:s}}return e}).filter(Boolean))},className:"p-2 text-gray-600 hover:bg-gray-100 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary","aria-label":"Decrease quantity",children:e.jsx(t,{size:16})}),e.jsx("div",{className:"w-12 h-8 flex justify-center items-center bg-white",children:e.jsx("span",{className:"font-semibold text-sm",children:d?.quantity||1})}),e.jsx("button",{type:"button",onClick:()=>{o(e=>e.map(e=>u?e.id===d?.id&&"combo"===e.type?{...e,quantity:(e.quantity||1)+1}:e:e.id===d?.id?{...e,quantity:(e.quantity||1)+1}:e))},className:"p-2 text-gray-600 hover:bg-gray-100 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary","aria-label":"Increase quantity",children:e.jsx(a,{size:16})})]}),e.jsx("button",{onClick:g,className:"p-2 text-gray-400 hover:text-red-500 transition-colors duration-200 rounded-full hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-red-200","aria-label":"Remove item",children:e.jsx(i,{size:18})})]})]})]})},d?.id)};export{o as C};
