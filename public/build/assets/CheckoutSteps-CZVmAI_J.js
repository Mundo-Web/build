import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as u}from"./index-BH53Isel.js";import{N as b}from"./Number2Currency-e57Tgsuk.js";import{B as T,a as K,D as Q,A as J,O as W}from"./OptionCard-BQ4tUjfh.js";import{M as X}from"./minus-jyhodMPN.js";import{P as Z}from"./plus-Bot15Khs.js";import{T as ee}from"./trash-2-DK1wnsDn.js";import{m as N}from"./main-BvVILmTO.js";import{G as S}from"./Global-ErywZRdd.js";import{I as k}from"./InputForm-DN14ZGms.js";import{l as se}from"./CheckoutSteps-DfQUmsqy.js";import{c as ae}from"./createLucideIcon-Cy5Ya80P.js";import{m as w}from"./proxy-BTYtmp9V.js";import"./index-yBjzXJbu.js";import"./useStateManager-7e1e8489.esm-oj4m82YY.js";import"./hoist-non-react-statics.cjs-kbdZbs82.js";import"./index-rimy3MAc.js";import"./index-fNjTmf9T.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=ae("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),ie=({setCart:l,...n})=>{const x=()=>{l(o=>o.filter(r=>r.id!==n.id))},f=()=>{l(o=>o.map(r=>r.id===n.id?{...r,quantity:(r.quantity||1)+1}:r))},d=()=>{l(o=>o.map(r=>{if(r.id===n.id){const c=(r.quantity||1)-1;return c<=0?(x(n.id),null):{...r,quantity:c}}return r}).filter(Boolean))};return e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:`/storage/images/item/${n.image}`,alt:n.name,className:"w-20 h-20 object-cover rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-lg mb-2",children:n.name}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Marca: ",e.jsx("span",{className:"customtext-neutral-dark",children:n.brand.name})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Disponibilidad: ",e.jsxs("span",{className:"customtext-neutral-dark",children:[n.stock>=n.quantity?"En stock":"Agotado"," "]})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["SKU: ",e.jsx("span",{className:"customtext-neutral-dark",children:n.sku})]})]})]}),e.jsxs("div",{className:"flex flex-row justify-between md:flex-col items-end md:items-end gap-4 mt-4 md:mt-0",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-xs text-gray-500 line-through",children:["S/ ",Number(n.price*n.quantity).toFixed(2)]}),e.jsxs("div",{className:"font-bold text-lg",children:["S/ ",Number(n.final_price*n.quantity).toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center border border-gray-200 rounded-lg overflow-hidden shadow-sm",children:[e.jsx("button",{type:"button",onClick:d,className:"p-2 text-gray-600 hover:bg-gray-100 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary","aria-label":"Decrease quantity",children:e.jsx(X,{size:16})}),e.jsx("div",{className:"w-12 h-8 flex justify-center items-center bg-white",children:e.jsx("span",{className:"font-semibold text-sm",children:n.quantity||1})}),e.jsx("button",{type:"button",onClick:f,className:"p-2 text-gray-600 hover:bg-gray-100 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary","aria-label":"Increase quantity",children:e.jsx(Z,{size:16})})]}),e.jsx("button",{onClick:x,className:"p-2 text-gray-400 hover:text-red-500 transition-colors duration-200 rounded-full hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-red-200","aria-label":"Remove item",children:e.jsx(ee,{size:18})})]})]})]})},n.id)};function ne({cart:l,setCart:n,onContinue:x,subTotal:f,envio:d,igv:o,totalFinal:r}){const c=l.length===0;return e.jsxs("div",{className:"grid lg:grid-cols-5 gap-4 md:gap-8",children:[e.jsx("div",{className:"lg:col-span-3 space-y-4 md:space-y-6",children:c?e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center animate-fade-in",children:[e.jsx("svg",{className:"w-24 h-24 text-gray-300 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"Tu carrito está vacío"}),e.jsx("p",{className:"text-gray-500",children:"¡Explora nuestros productos y encuentra algo especial!"})]}):l.map((p,y)=>e.jsx(ie,{...p,setCart:n},y))}),e.jsxs("div",{className:"lg:col-span-2 bg-[#F7F9FB] rounded-xl shadow-lg p-4 md:p-6 h-max mt-4 md:mt-0",children:[e.jsx("h3",{className:"text-xl md:text-2xl font-bold pb-4 md:pb-6",children:"Resumen"}),e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Subtotal"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",b(f)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"IGV"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",b(o)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Envío"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",b(d)]})]}),e.jsx("div",{className:"py-3 border-y-2 mt-4 md:mt-6",children:e.jsxs("div",{className:"flex justify-between font-bold text-lg md:text-[20px] items-center",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["S/ ",b(r)]})]})}),e.jsxs("div",{className:"space-y-2 pt-3 md:pt-4",children:[e.jsx(T,{onClick:x,className:"w-full",disabled:c,children:c?"Carrito Vacío":"Continuar Compra"}),e.jsx(K,{href:"/",className:"w-full",children:c?"Ir a Comprar":"Cancelar"})]}),e.jsx("div",{children:e.jsxs("p",{className:"text-xs md:text-sm customtext-neutral-dark",children:["Al realizar tu pedido, aceptas los ",e.jsx("a",{className:"customtext-primary font-bold",children:"Términos"})," y ",e.jsx("a",{className:"customtext-primary font-bold",children:"Privacidad"}),"."]})})]})]})]})}function re(){let l="";for(let n=0;n<12;n++){const x=Math.floor(Math.random()*10);l+=x}return l}const le=l=>new Promise((n,x)=>{try{console.log(l);const f=re(l.email);console.log(f),window.Culqi.publicKey=S.CULQI_PUBLIC_KEY,window.Culqi.settings({title:S.APP_NAME,email:l.email,currency:"PEN",amount:l.amount*100,order:`${f}`}),console.log(window.Culqi.settings),window.Culqi.options({lang:"es",installments:!1,paymentMethods:{tarjeta:!0,yape:!0,bancaMovil:!0,agente:!0,billetera:!0,cuotealo:!0},style:{logo:S.APP_URL+"/assets/resources/logo.png",bannerColor:S.APP_COLOR_PRIMARY,buttonBackground:S.APP_COLOR_PRIMARY}}),window.Culqi.open(),window.culqi=async function(){try{if(!window.Culqi.token){x("No se obtuvo un token de Culqi");return}const d=window.Culqi.token.id;console.log("✅ Token generado:",d),l={...l,token:d,orderNumber:f},console.log("_request actualizado",l);const{status:o,result:r}=await N.Fetch("./api/pago",{method:"POST",body:JSON.stringify(l)});o||console.log((r==null?void 0:r.message)||"Error en el pago"),window.Culqi.close(),N.Notify.add({icon:"/assets/img/icon.svg",title:"Pago Exitoso",body:"El pago se procesó correctamente.",type:"success"}),n(r)}catch(d){N.Notify.add({icon:"/assets/img/icon.svg",title:"Error en el Pago",body:d.message,type:"danger"}),x(d.message||"Error en el pago")}},document.addEventListener("culqi.error",function(d){var o,r;N.Notify.add({icon:"/assets/img/icon.svg",title:"Error en Culqi",body:((o=d.detail)==null?void 0:o.message)||"Error desconocido",type:"danger"}),x(((r=d.detail)==null?void 0:r.message)||"Error desconocido")})}catch(f){N.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:f.message,type:"danger"}),x("Error en la integración con Culqi")}});function oe({cart:l,setSale:n,setCode:x,setDelivery:f,setCart:d,onContinue:o,noContinue:r,subTotal:c,igv:p,totalFinal:y,user:a,setEnvio:q,envio:C,ubigeos:A=[]}){var z,G;const[$,P]=u.useState(null),[_,M]=u.useState(null),[m,h]=u.useState({name:(a==null?void 0:a.name)||"",lastname:(a==null?void 0:a.lastname)||"",email:(a==null?void 0:a.email)||"",department:(a==null?void 0:a.department)||"",province:(a==null?void 0:a.province)||"",district:(a==null?void 0:a.district)||"",address:(a==null?void 0:a.address)||"",number:(a==null?void 0:a.number)||"",comment:"",reference:(a==null?void 0:a.reference)||"",ubigeo:(a==null?void 0:a.ubigeo)||null});u.useEffect(()=>{if(a!=null&&a.ubigeo&&(a!=null&&a.district)&&(a!=null&&a.province)&&(a!=null&&a.department)){const s={value:a.ubigeo,label:`${a.district}, ${a.province}, ${a.department}`,data:{reniec:a.ubigeo,departamento:a.department,provincia:a.province,distrito:a.district}};M(s),P(s),B(s)}},[a]);const[E,L]=u.useState(!1),[F,U]=u.useState([]),[O,R]=u.useState(null),[de,me]=u.useState(null),[v,I]=u.useState({}),V=()=>{const s={},t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return m.name.trim()||(s.name="Nombre es requerido"),m.lastname.trim()||(s.lastname="Apellido es requerido"),m.email.trim()?t.test(m.email)||(s.email="Email inválido"):s.email="Email es requerido",m.ubigeo||(s.ubigeo="Ubicación es requerida"),m.address||(s.address="Dirección es requerida"),O||(s.shipping="Seleccione un método de envío"),I(s),Object.keys(s).length===0},B=async s=>{if(!s)return;I(i=>({...i,ubigeo:""}));const{data:t}=s;h(i=>({...i,department:t.departamento,province:t.provincia,district:t.distrito,ubigeo:t.reniec})),L(!0);try{const i=await Q.getShippingCost({ubigeo:t.reniec}),g=[];i.data.is_free?(g.push({type:"free",price:0,description:i.data.standard.description,deliveryType:i.data.standard.type,characteristics:i.data.standard.characteristics}),i.data.express.price>0&&g.push({type:"express",price:i.data.express.price,description:i.data.express.description,deliveryType:i.data.express.type,characteristics:i.data.express.characteristics})):i.data.is_agency?g.push({type:"agency",price:0,description:i.data.agency.description,deliveryType:i.data.agency.type,characteristics:i.data.agency.characteristics}):g.push({type:"standard",price:i.data.standard.price,description:i.data.standard.description,deliveryType:i.data.standard.type,characteristics:i.data.standard.characteristics}),U(g),R(g[0].type),q(g[0].price)}catch(i){console.error("Error al obtener precios de envío:",i),N.Notify.add({icon:"/assets/img/icon.svg",title:"Sin cobertura",body:"No realizamos envíos a esta ubicación",type:"danger"}),U([]),R(null),q(0)}L(!1)},D=async s=>{var t;if(s.preventDefault(),!a){N.Notify.add({icon:"/assets/img/icon.svg",title:"Acceso requerido",body:"Debe iniciar sesión para continuar",type:"danger"});return}if(!V()){const i=Object.keys(v)[0];i&&((t=document.querySelector(`[name="${i}"]`))==null||t.scrollIntoView({behavior:"smooth",block:"center"}));return}try{const i={user_id:a.id,...m,fullname:`${m.name} ${m.lastname}`,country:"Perú",amount:y,delivery:C,cart:l},g=await le(i);g.status?(n(g.sale),f(g.delivery),x(g.code),d([]),o()):N.Notify.add({icon:"/assets/img/icon.svg",title:"Error en el pago",body:g.message||"Pago rechazado",type:"danger"})}catch{N.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:"Ocurrió un error al procesar el pedido",type:"danger"})}},H=u.useCallback(se.debounce((s,t)=>{if(s.length<3){t([]);return}fetch(`/api/ubigeo/search?q=${encodeURIComponent(s)}`).then(i=>{if(!i.ok)throw new Error("Error en la respuesta");return i.json()}).then(i=>{const g=i.map(j=>({value:j.reniec,label:`${j.distrito}, ${j.provincia}, ${j.departamento}`,data:{inei:j.inei,reniec:j.reniec,departamento:j.departamento,provincia:j.provincia,distrito:j.distrito}}));t(g)}).catch(i=>{console.error("Error:",i),t([])})},300),[]);u.useEffect(()=>{I(s=>{const t={...s};return Object.keys(m).forEach(i=>{m[i]&&delete t[i]}),t})},[m]);const Y=s=>({control:t=>({...t,border:`1px solid ${s?"#ef4444":"#e5e7eb"}`,boxShadow:"none",minHeight:"50px","&:hover":{borderColor:s?"#ef4444":"#6b7280"},borderRadius:"0.75rem",padding:"2px 8px"}),menu:t=>({...t,zIndex:9999,marginTop:"4px",borderRadius:"8px"}),option:t=>({...t,color:"#1f2937",backgroundColor:"white","&:hover":{backgroundColor:"#f3f4f6"},padding:"12px 16px"})});return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 md:gap-8",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("form",{className:"space-y-4 md:space-y-6 bg-white p-4 md:p-6 rounded-xl shadow-sm",onSubmit:D,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(k,{name:"name",label:"Nombres",value:m.name,error:v.name,onChange:s=>h(t=>({...t,name:s.target.value})),required:!0,className:"border-gray-200"}),e.jsx(k,{name:"lastname",label:"Apellidos",value:m.lastname,error:v.lastname,onChange:s=>h(t=>({...t,lastname:s.target.value})),required:!0,className:"border-gray-200"})]}),e.jsx(k,{name:"email",label:"Correo electrónico",type:"email",value:m.email,error:v.email,onChange:s=>h(t=>({...t,email:s.target.value})),required:!0,className:"border-gray-200"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"block text-sm 2xl:text-base mb-2 font-medium customtext-neutral-dark",children:"Ubicación de entrega *"}),e.jsx(J,{name:"ubigeo",cacheOptions:!0,value:$,loadOptions:H,onChange:s=>{P(s),B(s)},placeholder:"Buscar departamento | distrito | provincia ...",loadingMessage:()=>"Buscando ubicaciones...",noOptionsMessage:({inputValue:s})=>s.length<3?"Ingrese al menos 3 caracteres...":"No se encontraron resultados",isLoading:E,styles:Y(!!v.ubigeo),formatOptionLabel:({data:s})=>e.jsxs("div",{className:"text-sm py-1",children:[e.jsx("div",{className:"font-medium",children:s.distrito}),e.jsxs("div",{className:"text-gray-500",children:[s.provincia,", ",s.departamento]})]}),className:"w-full rounded-xl transition-all duration-300",menuPortalTarget:document.body}),v.ubigeo&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:v.ubigeo})]}),e.jsx(k,{name:"address",label:"Dirección *",value:m.address,error:v.address,onChange:s=>h(t=>({...t,address:s.target.value})),required:!0,className:"border-gray-200"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(k,{label:"Número",value:m.number,onChange:s=>h(t=>({...t,number:s.target.value})),className:"border-gray-200"}),e.jsx(k,{label:"Referencia",value:m.reference,onChange:s=>h(t=>({...t,reference:s.target.value})),className:"border-gray-200"})]}),F.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Método de envío"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:F.map(s=>e.jsx(W,{title:s.deliveryType,price:s.price,description:s.description,selected:O===s.type,onSelect:()=>{R(s.type),q(s.price),I(t=>({...t,shipping:""}))}},s.type))}),O&&F.length>0&&e.jsx("div",{className:"space-y-3 mt-4",children:(G=(z=F.find(s=>s.type===O))==null?void 0:z.characteristics)==null?void 0:G.map((s,t)=>e.jsxs("div",{className:"flex items-start gap-3 bg-gray-50 p-4 rounded-xl",children:[e.jsx("div",{className:"w-5 flex-shrink-0",children:e.jsx(te,{className:"customtext-primary"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm font-medium customtext-neutral-dark",children:s})})]},`char-${t}`))})]}),!r&&e.jsxs("div",{className:"flex flex-col md:flex-row justify-end gap-3 md:gap-4 mt-6",children:[e.jsx(K,{type:"button",onClick:()=>window.history.back(),className:"w-full md:w-auto",children:"Regresar"}),e.jsx(T,{type:"submit",loading:E,className:"w-full md:w-auto",children:"Continuar"})]})]})}),e.jsxs("div",{className:"bg-[#F7F9FB] rounded-xl shadow-lg p-6 col-span-2 h-max",children:[e.jsx("h3",{className:"text-2xl font-bold pb-6",children:"Resumen"}),e.jsx("div",{className:"space-y-4 border-b-2 pb-6",children:l.map(s=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:`/storage/images/item/${s.image}`,alt:s.name,className:"w-16 h-16 object-cover rounded-lg"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Cantidad: ",s.quantity]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["S/ ",b(s.price)]})]})]},s.id))}),e.jsxs("div",{className:"space-y-4 mt-6",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal:"}),e.jsxs("span",{children:["S/ ",b(c)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"IGV (18%):"}),e.jsxs("span",{children:["S/ ",b(p)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Envío:"}),e.jsxs("span",{children:["S/ ",b(C)]})]}),e.jsx("div",{className:"pt-4 border-t-2",children:e.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:["S/ ",b(y)]})]})}),e.jsx(T,{onClick:D,className:"w-full mt-6",children:"Ir a Pagar"}),e.jsxs("p",{className:"text-xs text-gray-600 mt-4 text-center",children:["Al completar tu compra aceptas nuestros"," ",e.jsx("a",{href:"/terminos",className:"text-blue-600 hover:underline",children:"Términos y Condiciones"})]})]})]})]})}function ce({cart:l,code:n,delivery:x}){const d=(l.reduce((c,p)=>{const y=p.final_price;return c+y*p.quantity},0)/1.18).toFixed(2),o=(d*.18).toFixed(2),r=parseFloat(d)+parseFloat(o)+parseFloat(x);return e.jsx(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mx-auto max-w-4xl px-4 sm:px-6 lg:px-8 py-12",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-6 md:p-10",children:e.jsxs(w.div,{initial:{scale:.9},animate:{scale:1},transition:{delay:.3},className:"text-center space-y-6",children:[e.jsx(w.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.5},className:"w-20 h-20 bg-green-100 rounded-full mx-auto flex items-center justify-center",children:e.jsx("span",{className:"text-4xl",children:"✓"})}),e.jsx("h2",{className:"text-2xl md:text-3xl customtext-neutral-light animate-bounce",children:"¡Gracias por tu compra! 🎉"}),e.jsx("p",{className:"customtext-neutral-dark text-3xl md:text-5xl font-bold",children:"Tu orden ha sido recibida"}),e.jsxs(w.div,{whileHover:{scale:1.05},className:"py-6 px-4 bg-green-50 rounded-xl inline-block",children:[e.jsx("div",{className:"customtext-neutral-light",children:"Código de pedido"}),e.jsx("div",{className:"customtext-neutral-dark text-xl font-bold",children:`#${n}`})]}),e.jsxs("div",{className:"space-y-6 bg-[#F7F9FB] p-6 md:p-8 rounded-xl shadow-inner",children:[e.jsx("div",{className:"space-y-6 border-b-2 pb-6",children:l.map((c,p)=>e.jsx(w.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:p*.2},className:"bg-white rounded-xl p-4 shadow-sm hover:shadow-md transition-shadow duration-300",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 items-center sm:items-start",children:[e.jsx("div",{className:"bg-gray-50 p-3 rounded-xl",children:e.jsx("img",{src:`/storage/images/item/${c.image}`,alt:c.name,className:"w-24 h-24 object-cover rounded-lg"})}),e.jsxs("div",{className:"text-center sm:text-left flex-1",children:[e.jsx("h3",{className:"font-semibold text-xl mb-3",children:c.name}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Marca: ",e.jsx("span",{className:"customtext-neutral-dark font-medium",children:c.brand.name})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Cantidad: ",e.jsx("span",{className:"customtext-neutral-dark font-medium",children:c.quantity})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["SKU: ",e.jsx("span",{className:"customtext-neutral-dark font-medium",children:c.sku})]})]})]})]})},p))}),e.jsxs(w.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"space-y-4 mt-6",children:[[{label:"Subtotal",value:d},{label:"IGV",value:o},{label:"Envío",value:x}].map((c,p)=>e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"customtext-neutral-dark",children:c.label}),e.jsxs("span",{className:"font-semibold",children:["S/ ",b(c.value)]})]},p)),e.jsx("div",{className:"py-4 border-y-2 mt-6",children:e.jsxs("div",{className:"flex justify-between font-bold text-xl md:text-2xl items-center",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["S/ ",b(r)]})]})})]}),e.jsx(w.div,{className:"pt-6",whileHover:{scale:1.02},whileTap:{scale:.98},children:e.jsx(T,{href:"/catalogo",className:"w-full md:w-auto",children:"Seguir Comprando"})})]})]})})})}function Oe({cart:l,setCart:n,user:x,ubigeos:f=[],items:d}){const[o,r]=u.useState(1),p=(l.reduce((h,E)=>h+E.final_price*E.quantity,0)/1.18).toFixed(2),y=(p*.18).toFixed(2),[a,q]=u.useState(0),C=parseFloat(p)+parseFloat(y)+parseFloat(a),[A,$]=u.useState([]),[P,_]=u.useState([]),[M,m]=u.useState([]);return u.useEffect(()=>{const h=document.createElement("script");return h.src=S.CULQI_API,h.async=!0,h.onload=()=>{window.culqi=function(){window.Culqi.token?console.log("✅ Token recibido:",window.Culqi.token.id):window.Culqi.order&&console.log("✅ Orden recibida:",window.Culqi.order)}},document.body.appendChild(h),()=>document.body.removeChild(h)},[]),e.jsx("div",{className:"min-h-screen bg-[#F7F9FB] py-4 md:py-12 px-2 sm:px-primary 2xl:px-0 2xl:max-w-7xl mx-auto",children:e.jsxs("div",{className:"bg-white p-3 md:p-8 rounded-lg md:rounded-xl shadow-sm",children:[e.jsx("div",{className:"mb-4 md:mb-8",children:e.jsxs("div",{className:"flex items-center justify-between gap-1 md:gap-4 max-w-3xl mx-auto",children:[e.jsxs("div",{className:`flex flex-col items-center md:flex-row md:items-center gap-1 md:gap-2 ${o===1?"customtext-primary font-medium":"customtext-neutral-dark"}`,children:[e.jsx("span",{className:"w-6 h-6 md:w-8 md:h-8 rounded-full border-2 flex items-center justify-center text-xs md:text-sm",children:"1"}),e.jsx("span",{className:"text-[10px] md:text-sm text-center",children:"Carrito"})]}),e.jsx("div",{className:"flex-1 h-[2px] bg-gray-200 relative",children:e.jsx("div",{className:"absolute inset-0 bg-primary transition-all duration-500",style:{width:o>1?"100%":"0%"}})}),e.jsxs("div",{className:`flex flex-col items-center md:flex-row md:items-center gap-1 md:gap-2 ${o===2?"customtext-primary font-medium":"customtext-neutral-dark"}`,children:[e.jsx("span",{className:"w-6 h-6 md:w-8 md:h-8 rounded-full border-2 flex items-center justify-center text-xs md:text-sm",children:"2"}),e.jsx("span",{className:"text-[10px] md:text-sm text-center",children:"Envío"})]}),e.jsx("div",{className:"flex-1 h-[2px] bg-gray-200 relative",children:e.jsx("div",{className:"absolute inset-0 bg-primary transition-all duration-500",style:{width:o>2?"100%":"0%"}})}),e.jsxs("div",{className:`flex flex-col items-center md:flex-row md:items-center gap-1 md:gap-2 ${o===3?"customtext-primary font-medium":"customtext-neutral-dark"}`,children:[e.jsx("span",{className:"w-6 h-6 md:w-8 md:h-8 rounded-full border-2 flex items-center justify-center text-xs md:text-sm",children:"3"}),e.jsx("span",{className:"text-[10px] md:text-sm text-center",children:"Confirmación"})]})]})}),o===1&&e.jsx(ne,{cart:l,setCart:n,onContinue:()=>r(2),subTotal:p,envio:a,igv:y,totalFinal:C}),o===2&&e.jsx(oe,{items:d,setCode:_,setDelivery:m,cart:l,setSale:$,setCart:n,onContinue:()=>r(3),noContinue:()=>r(1),subTotal:p,envio:a,setEnvio:q,igv:y,totalFinal:C,user:x,ubigeos:f}),o===3&&e.jsx(ce,{code:P,delivery:M,cart:A,subTotal:p,envio:a,igv:y,totalFinal:C})]})})}export{Oe as default};
