import{r as e,j as a,aW as s,y as t,ad as r,h as o,aX as l,aV as c,aY as i,q as n,X as d}from"./vendor-react-DB2gWWlz.js";import{I as m}from"./InputForm-Ce6aEPHo.js";import{u}from"./ubigeo-Q-ocg024.js";import{S as x}from"./SelectForm-DMSUvbKM.js";import{C as p}from"./ComplaintStech-D7yKdKVG.js";import{T as h}from"./ThankYouPage-CN8aXdIL.js";import{H as j}from"./HtmlContent-CkpQmeQx.js";import{t as g}from"./GoogleSignInButton-Bo5d3xNo.js";import{C as b}from"./Number2Currency-BX4epFEo.js";import"./vendor-swiper-Cr_RrIb_.js";import"./General-ClVW7qxN.js";function f({generals:f=[],data:v}){const[y,N]=e.useState(""),[_,w]=e.useState(!1),[C,S]=e.useState(null),[k,$]=e.useState(!1),[D,T]=e.useState(null),[E,I]=e.useState(null),z=e.useRef();e.useEffect(()=>{I(Math.floor(Date.now()/1e3))},[]);const[q,P]=e.useState({nombre:"",tipo_documento:"RUC",numero_identidad:"",celular:"",correo_electronico:"",departamento:"",provincia:"",distrito:"",direccion:"",tipo_producto:"",monto_reclamado:"",descripcion_producto:"",tipo_reclamo:"",fecha_ocurrencia:"",numero_pedido:"",detalle_reclamo:"",acepta_terminos:!1}),[R,F]=e.useState(!1),A=e=>{const{name:a,value:s,type:t,checked:r}=e.target;if("date"===t&&s){const[e]=s.split("-");if(e&&e.length>4)return}P({...q,[a]:"checkbox"===t?r:s})},U=()=>{P({nombre:"",tipo_documento:"RUC",numero_identidad:"",celular:"",correo_electronico:"",departamento:"",provincia:"",distrito:"",direccion:"",tipo_producto:"",monto_reclamado:"",descripcion_producto:"",tipo_reclamo:"",fecha_ocurrencia:"",numero_pedido:"",detalle_reclamo:"",acepta_terminos:!1}),H(""),B(""),W(""),w(!1),S(null),N(""),z.current&&z.current.reset()},L=()=>{$(!1),T(null)},[O,H]=e.useState(""),[M,B]=e.useState(""),[V,W]=e.useState(""),[G,Y]=e.useState([]),[J,Q]=e.useState([]),[X,K]=e.useState([]);e.useEffect(()=>{const e=[...new Set(u.map(e=>e.departamento))];Y(e)},[]),e.useEffect(()=>{if(O){const e=[...new Set(u.filter(e=>e.departamento===O).map(e=>e.provincia))];Q(e),B(""),W(""),K([]),P(e=>({...e,departamento:O,provincia:"",distrito:""}))}},[O]),e.useEffect(()=>{if(M){const e=u.filter(e=>e.departamento===O&&e.provincia===M).map(e=>e.distrito);K(e),W(""),P(e=>({...e,provincia:M,distrito:""}))}},[M]),e.useEffect(()=>{V&&P(e=>({...e,distrito:V}))},[V]);const[Z,ee]=e.useState(!1),ae={terms_conditions:"Términos y condiciones"},se=()=>ee(null);return k&&D?a.jsx(h,{complaintData:D,onBackToForm:L,data:v}):a.jsxs("div",{id:v?.element_id||null,className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 w-full px-4 py-8 font-paragraph",children:[a.jsxs("div",{className:"max-w-5xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("div",{className:`inline-flex items-center justify-center w-16 h-16 bg-primary rounded-full mb-6 ${v?.class_icon||" shadow-lg"}`,children:a.jsx(s,{className:"w-8 h-8 text-white"})}),a.jsx("h1",{className:`text-4xl font-bold  mb-4 ${v?.class_title||" customtext-neutral-dark"}`,children:"Libro de Reclamaciones"}),a.jsx("p",{className:"text-lg customtext-neutral-light max-w-2xl mx-auto",children:"Tu opinión es importante para nosotros. Completa este formulario para registrar tu reclamo o queja."})]}),a.jsx("div",{className:"bg-white shadow-2xl rounded-3xl border border-gray-100 overflow-hidden",children:a.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),F(!0),!_||!C)return N("Por favor, completa la verificación de seguridad."),void F(!1);N("");const s={...q,captcha_verified:!0,recaptcha_token:C,_form_loaded_at:E,_hp:""};fetch("/api/complaints",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(e=>e.json()).then(e=>{"success"===e.type?(T(q),$(!0),U(),F(!1)):(g.error("Solicitud rechazada",{description:"Lo sentimos, no se envió su solicitud.",icon:a.jsx(i,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"}),F(!1))}).catch(e=>{g.error("Solicitud rechazada",{description:e||"Lo sentimos, no se envió su solicitud.",icon:a.jsx(i,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"}),F(!1)})},className:"p-8 space-y-12",children:[a.jsx("input",{type:"text",name:"_hp",tabIndex:"-1",autoComplete:"off",style:{position:"absolute",left:"-9999px",width:"1px",height:"1px",opacity:0,pointerEvents:"none"},"aria-hidden":"true"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4 pb-4 border-b border-gray-200",children:[a.jsx("div",{className:`flex items-center justify-center w-12 h-12 bg-secondary rounded-full ${v?.class_icon||" shadow-lg customtext-primary"}`,children:a.jsx(t,{className:"w-6 h-6 "})}),a.jsxs("div",{children:[a.jsx("h2",{className:`text-2xl font-bold customtext-neutral-dark ${v?.class_title||""}`,children:"Identificación del Consumidor"}),a.jsx("p",{className:"customtext-neutral-light",children:"Proporciona tus datos personales"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"space-y-2",children:a.jsx(m,{type:"text",label:"Nombres completos",name:"nombre",value:q.nombre,onChange:A,placeholder:"Ingresa tu nombre completo"})}),a.jsx("div",{className:"space-y-2",children:a.jsx(x,{label:"Tipo de documento",options:[{value:"ruc",label:"RUC"},{value:"dni",label:"DNI"},{value:"ce",label:"CE"},{value:"pasaporte",label:"Pasaporte"}],placeholder:"Selecciona tu documento",value:q.tipo_documento,onChange:e=>{P(a=>({...a,tipo_documento:e}))}})}),a.jsx("div",{className:"space-y-2",children:a.jsx(m,{type:"text",label:"Número de documento",name:"numero_identidad",value:q.numero_identidad,onChange:A,placeholder:"Número de documento"})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsx("div",{className:"space-y-2",children:a.jsx(m,{type:"tel",label:"Número de celular",name:"celular",value:q.celular,onChange:A,placeholder:"+51 999 999 999"})}),a.jsx("div",{className:"space-y-2",children:a.jsx(m,{type:"email",label:"Correo electrónico",name:"correo_electronico",value:q.correo_electronico,onChange:A,placeholder:"tu@correo.com"})})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4 pb-4 border-b border-gray-200",children:[a.jsx("div",{className:`flex items-center justify-center w-12 h-12 bg-secondary rounded-full ${v?.class_icon||" shadow-lg customtext-primary"}`,children:a.jsx(r,{className:"w-6 h-6 "})}),a.jsxs("div",{children:[a.jsx("h2",{className:`text-2xl font-bold customtext-neutral-dark ${v?.class_title||""}`,children:"Ubicación"}),a.jsx("p",{className:"customtext-neutral-light",children:"Indica tu dirección actual"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx(x,{label:"Departamento",options:G,placeholder:"Selecciona departamento",value:O,onChange:e=>{H(e),P(a=>({...a,departamento:e}))}}),a.jsx(x,{disabled:!O,label:"Provincia",options:J,placeholder:"Selecciona provincia",value:M,onChange:e=>{B(e),P(a=>({...a,provincia:e}))}}),a.jsx(x,{disabled:!M,label:"Distrito",options:X,placeholder:"Selecciona distrito",value:V,onChange:e=>{W(e),P(a=>({...a,distrito:e}))}})]}),a.jsx("div",{className:"space-y-2",children:a.jsx(m,{type:"text",label:"Dirección completa",name:"direccion",value:q.direccion,onChange:A,placeholder:"Av. Principal 123, Urbanización..."})})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4 pb-4 border-b border-gray-200",children:[a.jsx("div",{className:`flex items-center justify-center w-12 h-12 bg-secondary rounded-full ${v?.class_icon||" shadow-lg customtext-primary"}`,children:a.jsx(o,{className:"w-6 h-6 "})}),a.jsxs("div",{children:[a.jsx("h2",{className:`text-2xl font-bold customtext-neutral-dark ${v?.class_title||""}`,children:"Identificación del bien contratado"}),a.jsx("p",{className:"customtext-neutral-light",children:"Detalles del producto o servicio"})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsx(x,{label:"Tipo de contratación",options:[{value:"producto",label:"Producto"},{value:"servicio",label:"Servicio"}],placeholder:"¿Fue un producto o servicio?",value:q.tipo_producto,onChange:e=>{P(a=>({...a,tipo_producto:e}))}}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsx("div",{className:"space-y-2",children:a.jsx(m,{type:"number",label:`Monto reclamado (${b()})`,name:"monto_reclamado",value:q.monto_reclamado,onChange:A,placeholder:"0.00",step:"0.01"})}),a.jsx("div",{className:"space-y-2",children:a.jsx(m,{type:"text",label:"Descripción del producto/servicio",name:"descripcion_producto",value:q.descripcion_producto,onChange:A,placeholder:"Nombre, modelo, código..."})})]})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4 pb-4 border-b border-gray-200",children:[a.jsx("div",{className:`flex items-center justify-center w-12 h-12 bg-secondary rounded-full ${v?.class_icon||" shadow-lg customtext-primary "}`,children:a.jsx(l,{className:"w-6 h-6 "})}),a.jsxs("div",{children:[a.jsx("h2",{className:`text-2xl font-bold customtext-neutral-dark ${v?.class_title||""}`,children:"Detalle del reclamo"}),a.jsx("p",{className:"customtext-neutral-light",children:"Describe tu experiencia"})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsx(x,{label:"Tipo de solicitud",options:[{value:"reclamo",label:"Reclamo"},{value:"queja",label:"Queja"}],placeholder:"¿Es un reclamo o queja?",value:q.tipo_reclamo,onChange:e=>{P(a=>({...a,tipo_reclamo:e}))}}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsx("div",{className:"space-y-2",children:a.jsx(m,{type:"date",label:"Fecha de ocurrencia",name:"fecha_ocurrencia",value:q.fecha_ocurrencia,onChange:A,max:(new Date).toISOString().split("T")[0],min:"2000-01-01"})}),a.jsx("div",{className:"space-y-2",children:a.jsx(m,{type:"text",label:"Número de pedido (opcional)",name:"numero_pedido",value:q.numero_pedido,onChange:A,placeholder:"#PED-123456"})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium customtext-neutral-dark mb-2",children:"Detalle del reclamo o queja"}),a.jsx("textarea",{name:"detalle_reclamo",placeholder:"Describe detalladamente tu reclamo o queja. Incluye fechas, nombres, referencias y cualquier información relevante...",className:"w-full min-h-32 px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300 resize-none",value:q.detalle_reclamo,onChange:A,rows:5}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Mínimo 50 caracteres para una descripción completa"})]})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4 pb-4 border-b border-gray-200",children:[a.jsx("div",{className:`flex items-center  justify-center w-12 h-12 bg-secondary rounded-full ${v?.class_icon||" shadow-lg customtext-primary"}`,children:a.jsx(c,{className:"w-6 h-6 "})}),a.jsxs("div",{children:[a.jsx("h2",{className:`text-2xl font-bold customtext-neutral-dark ${v?.class_title||""}`,children:"Verificación y términos"}),a.jsx("p",{className:"customtext-neutral-light",children:"Confirmación final"})]})]}),a.jsx("div",{className:"bg-gray-50 rounded-xl p-6",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("input",{type:"checkbox",id:"terminos",name:"acepta_terminos",className:"mt-1 w-5 h-5 customtext-primary border-gray-300 rounded focus:ring-blue-500",checked:q.acepta_terminos,onChange:A}),a.jsxs("label",{htmlFor:"terminos",className:"text-sm customtext-neutral-dark leading-relaxed",children:["Acepto y estoy de acuerdo con los"," ",a.jsx("button",{type:"button",onClick:()=>ee(0),className:"customtext-primary underline hover:customtext-secondary font-medium",children:"términos y condiciones"})," ","del libro de reclamaciones. Confirmo que la información proporcionada es veraz y completa."]})]})}),a.jsx("div",{className:"bg-gray-50 rounded-xl p-6",children:a.jsx(p,{ref:z,onVerify:(e,a)=>{w(e),S(a),e&&N("")},error:y})})]}),a.jsxs("div",{className:"pt-8 border-t border-gray-200",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-end",children:[a.jsx("button",{type:"button",onClick:U,className:"px-6 py-3 customtext-neutral-dark bg-gray-100 hover:bg-gray-200 rounded-xl font-medium transition-all duration-300 flex items-center justify-center gap-2",children:"Limpiar formulario"}),a.jsx("button",{disabled:R||!q.acepta_terminos||!_,type:"submit",className:"px-8 py-3 bg-primary hover:brightness-110 disabled:from-gray-400 disabled:to-gray-500 text-white font-medium rounded-xl transition-all duration-300 flex items-center justify-center gap-3 shadow-lg hover:shadow-xl disabled:cursor-not-allowed",children:R?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),"Enviando..."]}):a.jsxs(a.Fragment,{children:[a.jsx(i,{className:"w-5 h-5"}),"Enviar reclamo"]})})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-4 text-center",children:"Al enviar este formulario, tu reclamo será registrado y procesado según la normativa vigente. Recibirás una confirmación en tu correo electrónico."})]})]})}),a.jsxs("div",{className:"mt-12 grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"bg-gray-100 rounded-xl p-6 text-center",children:[a.jsx("div",{className:`w-12 h-12 bg-secondary rounded-full flex items-center justify-center mx-auto mb-4 ${v?.class_icon||" shadow-lg customtext-primary"}`,children:a.jsx(s,{className:"w-6 h-6 "})}),a.jsx("h3",{className:"font-semibold customtext-neutral-dark mb-2",children:"Respuesta garantizada"}),a.jsx("p",{className:"text-sm customtext-neutral-light",children:"Te responderemos en un máximo de 30 días calendario"})]}),a.jsxs("div",{className:"bg-gray-100 rounded-xl p-6 text-center",children:[a.jsx("div",{className:`w-12 h-12 bg-secondary rounded-full flex items-center justify-center mx-auto mb-4 ${v?.class_icon||" shadow-lg customtext-primary"}`,children:a.jsx(c,{className:"w-6 h-6"})}),a.jsx("h3",{className:"font-semibold customtext-neutral-dark mb-2",children:"Información segura"}),a.jsx("p",{className:"text-sm customtext-neutral-light",children:"Tus datos están protegidos y son confidenciales"})]}),a.jsxs("div",{className:"bg-gray-100 rounded-xl p-6 text-center",children:[a.jsx("div",{className:`w-12 h-12 bg-secondary rounded-full flex items-center justify-center mx-auto mb-4 ${v?.class_icon||" shadow-lg customtext-primary"}`,children:a.jsx(t,{className:"w-6 h-6 "})}),a.jsx("h3",{className:"font-semibold customtext-neutral-dark mb-2",children:"Atención personalizada"}),a.jsx("p",{className:"text-sm customtext-neutral-light",children:"Un especialista revisará tu caso individualmente"})]})]})]}),Object.keys(ae).map((e,s)=>{const t=ae[e],r=Array.isArray(f)?f.find(a=>a.correlative==e)?.description??"":"";return a.jsx(n,{isOpen:Z===s,onRequestClose:se,contentLabel:t,className:"fixed top-0 left-0 right-0 bottom-0 flex items-center justify-center p-4 z-50",overlayClassName:"fixed inset-0 bg-black bg-opacity-50 z-[9999999]",ariaHideApp:!1,children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 pr-4",children:t}),a.jsx("button",{onClick:se,className:"flex-shrink-0 text-gray-400 hover:text-red-500 transition-colors duration-200 p-1 hover:bg-gray-100 rounded-full","aria-label":"Cerrar modal",children:a.jsx(d,{size:24,strokeWidth:2})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:a.jsx("div",{className:"prose prose-gray max-w-none",children:a.jsx(j,{html:r})})}),a.jsx("div",{className:"flex justify-end p-6 border-t border-gray-200",children:a.jsx("button",{onClick:se,className:"px-6 py-2 bg-primary text-white rounded-lg  transition-colors duration-200 font-medium",children:"Cerrar"})})]})},s)})]})}export{f as default};
