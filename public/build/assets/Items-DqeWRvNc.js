import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{B as es}from"./Base-CYAbdAMI.js";import{S as L}from"./SwitchFormGroup-DXN0cwVk.js";import{T as ss}from"./TextareaFormGroup-CliirJM1.js";import{r as a}from"./index-BOnQTV8N.js";import{c as rs}from"./ReactAppend-QR5TrZfj.js";import{s as te}from"./server.browser-Bf4gQIc7.js";import{S as ts}from"./ProductCard-D_AgkLlk.js";import{I as Te}from"./ItemsRest-pSN9Z_la.js";import{M as we}from"./Modal-BYL-UsqM.js";import{T as as}from"./Table-BCyay2bJ.js";import{I as ae}from"./ImageFormGroup-DkVgPNU5.js";import{I as D}from"./InputFormGroup-iZIO11ZN.js";import{Q as ls}from"./QuillFormGroup-ShbNmC_h.js";import{S as Re}from"./SelectAPIFormGroup-BZe8H0Ph.js";import{S as V}from"./SelectFormGroup-X8WqJHHl.js";import{D as De}from"./DxButton-DV0H-ZcL.js";import{C as is,F as d}from"./CreateReactScript-DtrvZKkE.js";import{C as Ce,N as Se}from"./Number2Currency-D9Rjvh76.js";import{R as _}from"./ReactAppend-Vm5G2nof.js";import{S as Fe}from"./SetSelectValue-UxyCmHse.js";import"./main-B6F2O9-U.js";import{t as ns}from"./CardProductKatya-ncpmQ0JU.js";import"./index-yBjzXJbu.js";import"./Global-CazroCzF.js";import"./tippy-react.esm-DmkRJDEW.js";import"./index-pSueRYGM.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./index-B6ujFmsw.js";/* empty css              */import"./Logout-BpuTJ_83.js";import"./MenuItemContainer-DwXwpKCn.js";import"./index.esm-D6GvEWn_.js";import"./index-BQJyKPGC.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./CanAccess-DgL4m2bH.js";import"./BasicRest-BML1C-ua.js";import"./BooleanLimit-D-OsQsek.js";/* empty css               */import"./General-BmbBKdsB.js";import"./LaravelSession-Dz9cpV3l.js";const ke=({label:k,structure:y,value:C=[],onChange:T,typeOptions:A=[]})=>{const[N,p]=a.useState([]),f=typeof y=="object"&&!Array.isArray(y);a.useEffect(()=>{p(f?C.map(c=>{var o,m;return{...c,type:((o=c.type)==null?void 0:o.charAt(0).toUpperCase())+((m=c.type)==null?void 0:m.slice(1).toLowerCase())}}):C.map(c=>typeof c=="object"?c.feature||"":c))},[C]);const E=()=>{const c=f?{...y}:"",o=[...N,c];p(o),T(o)},v=c=>{const o=N.filter((m,u)=>u!==c);p(o),T(o)},w=(c,o,m)=>{const u=[...N];f?u[c][o]=o==="type"?m.charAt(0).toUpperCase()+m.slice(1).toLowerCase():m:u[c]=m,p(u),T(u)},I=(c,o)=>o==="Icono"?"Url de icono":c;return e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"form-label fw-semibold text-dark mb-3",children:[e.jsx("i",{className:`fas ${f?"fa-cogs":"fa-list-ul"} me-2 text-primary`}),k]}),e.jsxs("div",{className:"dynamic-fields-container",children:[N.map((c,o)=>e.jsx("div",{className:"dynamic-field-item mb-3 p-3 border rounded-3 bg-light position-relative",style:{borderLeft:"4px solid #0d6efd",transition:"all 0.3s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.05)"},children:f?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"row g-3 mb-2",children:[e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"form-label small text-muted text-uppercase fw-bold mb-1",children:"Tipo"}),e.jsxs("select",{className:"form-select form-select-sm border-0 bg-white shadow-sm",value:c.type||"",onChange:m=>w(o,"type",m.target.value),style:{fontSize:"0.9rem"},children:[e.jsx("option",{value:"",children:"Seleccionar tipo..."}),A.map(m=>e.jsx("option",{value:m,children:m},m))]})]}),e.jsxs("div",{className:"col-md-8",children:[e.jsx("label",{className:"form-label small text-muted text-uppercase fw-bold mb-1",children:"Título"}),e.jsx("input",{type:"text",className:"form-control form-control-sm border-0 bg-white shadow-sm",value:c.title||"",onChange:m=>w(o,"title",m.target.value),placeholder:I("title",c.type),style:{fontSize:"0.9rem"}})]})]}),e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col",children:[e.jsx("label",{className:"form-label small text-muted text-uppercase fw-bold mb-1",children:"Descripción"}),e.jsx("input",{type:"text",className:"form-control form-control-sm border-0 bg-white shadow-sm",value:c.description||"",onChange:m=>w(o,"description",m.target.value),placeholder:"Descripción de la especificación",style:{fontSize:"0.9rem"}})]}),e.jsx("div",{className:"col-auto d-flex align-items-end",children:e.jsx("button",{type:"button",className:"btn btn-outline-danger btn-sm rounded-circle d-flex align-items-center justify-content-center",onClick:()=>v(o),style:{width:"32px",height:"32px"},title:"Eliminar especificación",children:e.jsx("i",{className:"fas fa-times"})})})]})]}):e.jsx("div",{className:"row g-3",children:e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex align-items-center gap-3",children:[e.jsx("input",{type:"text",className:"form-control border-0 shadow-sm flex-grow-1",value:c,onChange:m=>w(o,null,m.target.value),placeholder:"Escriba la característica del producto...",style:{fontSize:"0.95rem"}}),e.jsx("button",{type:"button",className:"btn btn-outline-danger rounded-circle d-flex align-items-center justify-content-center flex-shrink-0",onClick:()=>v(o),title:"Eliminar característica",style:{width:"40px",height:"40px"},children:e.jsx("i",{className:"fas fa-times"})})]})})})},o)),N.length===0&&e.jsxs("div",{className:"text-center py-4 text-muted",children:[e.jsx("i",{className:`fas ${f?"fa-cogs":"fa-list-ul"} fa-2x mb-2 opacity-50`}),e.jsxs("p",{className:"mb-0",children:["No hay ",f?"especificaciones":"características"," agregadas"]}),e.jsx("small",{children:'Haga clic en "Agregar" para comenzar'})]}),e.jsx("div",{className:"text-center mt-3",children:e.jsxs("button",{type:"button",className:"btn btn-primary btn-sm px-4 py-2 rounded-pill shadow-sm",onClick:E,style:{border:"none",fontWeight:"500"},children:[e.jsx("i",{className:"fas fa-plus me-2"}),"Agregar ",f?"Especificación":"Característica"]})})]})]})},cs=new Te,os=({gridRef:k,modalRef:y})=>{const[C,T]=a.useState(null),[A,N]=a.useState(!1),[p,f]=a.useState(""),[E,v]=a.useState(!1),w=c=>{T(c.target.files[0])},I=async()=>{var o,m;if(!C){f("Por favor, selecciona un archivo."),v(!0);return}const c=new FormData;c.append("file",C),N(!0);try{const u=await cs.importData(c);if(console.log(u),u.error){const P=Array.isArray(u.error)?u.error.join(`
`):u.error;f(`Error en la importación:
${P}`),v(!0)}else f(u.message),v(!1),$(k.current).dxDataGrid("instance").refresh(),$(y.current).modal("hide"),ns.success("Importacion completada con exito",{description:"Todos tus productos han sido importados correctamente.",duration:3e3,position:"bottom-center",richColors:!0})}catch(u){f("Error al importar: "+(((m=(o=u.response)==null?void 0:o.data)==null?void 0:m.error)||u.message)),v(!0)}N(!1)};return e.jsx("div",{className:"bg-white",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("div",{className:"mb-1",children:e.jsx("a",{href:"/assets/img/salafabulosa/formato_import_products.xlsx",download:!0,children:"Descargar formato .xlsx"})}),e.jsx("div",{children:e.jsx("input",{className:"form-control",type:"file",accept:".xlsx",onChange:w})}),e.jsx("button",{onClick:I,disabled:A,className:"btn btn-primary mt-2",type:"button",children:A?"Subiendo...":"Subir Archivo"}),p&&e.jsx("div",{className:`alert ${E?"alert-danger":"alert-success"} mt-2`,role:"alert",children:e.jsx("div",{className:"alert-message",children:p})})]})})},z=new Te,ds=({categories:k,brands:y,collections:C,stores:T})=>{//!FALTA EDIT AND DELETEDE GALERIA
const[A,N]=a.useState([]),p=a.useRef(),f=a.useRef(),E=a.useRef(),v=a.useRef(),w=a.useRef(),I=a.useRef(),c=a.useRef(),o=a.useRef(),m=a.useRef(),u=a.useRef(),P=a.useRef(),U=a.useRef(),q=a.useRef(),W=a.useRef(),h=a.useRef(),g=a.useRef(),x=a.useRef(),H=a.useRef(),J=a.useRef(),le=a.useRef(),ie=a.useRef(),Q=a.useRef(),K=a.useRef(),M=a.useRef(),Ee=a.useRef([]),Ie=a.useRef([]),X=a.useRef(),[_e,ne]=a.useState(!1),[$e,Ae]=a.useState(null),[ms,Pe]=a.useState(null),[us,Me]=a.useState(null),[ce,oe]=a.useState(""),[de,Ge]=a.useState(""),[R,S]=a.useState([]),me=a.useRef(),Le=s=>{const l=Array.from(s.target.files).map(i=>({file:i,url:URL.createObjectURL(i)}));S(i=>[...i,...l])},ze=s=>{s.preventDefault();const l=Array.from(s.dataTransfer.files).map(i=>({file:i,url:URL.createObjectURL(i)}));S(i=>[...i,...l])},Be=s=>{s.preventDefault()},Oe=(s,r)=>{s.preventDefault(),R[r].id?S(i=>i.map((t,b)=>b===r?{...t,toDelete:!0}:t)):S(i=>i.filter((t,b)=>b!==r))},[F,Y]=a.useState(null),Ve=(s,r)=>{Y(r),s.dataTransfer.effectAllowed="move"},Ue=()=>{Y(null)},qe=s=>{s.preventDefault(),s.dataTransfer.dropEffect="move"},We=(s,r)=>{if(s.preventDefault(),F===null||F===r)return;const l=[...R],i=l[F];l.splice(F,1),l.splice(r,0,i),S(l),Y(null)},ue=s=>{var r,l,i;if(N(s||null),s!=null&&s.id?ne(!0):ne(!1),oe(s!=null&&s.pdf?`/storage/images/item/${s.pdf}`:""),Ge(s!=null&&s.manual?`/storage/images/item/${s.manual}`:""),E.current.value=(s==null?void 0:s.id)||"",$(v.current).val((s==null?void 0:s.category_id)||null).trigger("change"),$(w.current).val((s==null?void 0:s.collection_id)||null).trigger("change"),Fe(I.current,(r=s==null?void 0:s.subcategory)==null?void 0:r.id,(l=s==null?void 0:s.subcategory)==null?void 0:l.name),$(c.current).val((s==null?void 0:s.brand_id)||null).trigger("change"),console.log("data item:",s),$(M.current).val(s!=null&&s.store_id&&s.store_id!==""?s.store_id:"").trigger("change"),o.current.value=(s==null?void 0:s.name)||"",J.current.value=(s==null?void 0:s.sku)||"",m.current.value=(s==null?void 0:s.color)||"",u.current.value=(s==null?void 0:s.size)||"",P.current.value=(s==null?void 0:s.summary)||"",K.current.value=(s==null?void 0:s.linkvideo)||"",U.current.value=(s==null?void 0:s.price)||0,q.current.value=(s==null?void 0:s.discount)||0,X.current.value=(s==null?void 0:s.weight)||0,Fe(W.current,(s==null?void 0:s.tags)??[],"id","name"),h.current.value=null,g.current.value=null,h.image.src=s!=null&&s.banner?`/storage/images/item/${s.banner}`:"",g.image.src=s!=null&&s.image?`/storage/images/item/${s.image}`:"",x.image.src=s!=null&&s.texture?`/storage/images/item/${s.texture}`:"",oe(s!=null&&s.pdf?`/storage/images/item/${s==null?void 0:s.pdf}`:""),H.editor.root.innerHTML=(s==null?void 0:s.description)??"",s!=null&&s.images){const t=s.images.map(b=>({id:b.id,url:`/storage/images/item/${b.url}`}));S(t)}else S([]);s!=null&&s.specifications?Z(s.specifications.map(t=>({type:t.type,title:t.title,description:t.description,image:t.image||""}))):Z([]),pe(((i=s==null?void 0:s.features)==null?void 0:i.map(t=>typeof t=="object"?t:{feature:t}))||[]),Q.current.value=s==null?void 0:s.stock,h.deleteRef&&(h.deleteRef.value=""),g.deleteRef&&(g.deleteRef.value=""),x.deleteRef&&(x.deleteRef.value=""),$(f.current).modal("show")},He=async s=>{var ve,ye,Ne;s.preventDefault();const r=fe.filter(n=>{var j;return typeof n=="string"?n.trim()!=="":typeof n=="object"?((j=n.feature)==null?void 0:j.trim())!=="":!1}),l=he.filter(n=>n.title&&n.title.trim()!==""||n.description&&n.description.trim()!==""),i={id:E.current.value||void 0,category_id:v.current.value,collection_id:w.current.value||null,subcategory_id:I.current.value,brand_id:c.current.value,name:o.current.value,sku:J.current.value,color:m.current.value,size:u.current.value,summary:P.current.value,price:U.current.value,discount:q.current.value,tags:$(W.current).val(),description:H.current.value,stock:Q.current.value||0,features:r,specifications:l,linkvideo:K.current.value,weight:X.current.value||0,store_id:M.current.value&&M.current.value!==""?M.current.value:null},t=new FormData;for(const n in i)if(n==="features"||n==="specifications")t.append(n,JSON.stringify(i[n]));else if(n==="tags"){const j=i[n];Array.isArray(j)?j.forEach((Ye,Ze)=>{t.append(`tags[${Ze}]`,Ye)}):j&&t.append("tags[0]",j)}else t.append(n,i[n]);const b=g.current.files[0];b&&t.append("image",b);const G=x.current.files[0];G&&t.append("texture",G);const ge=h.current.files[0];ge&&t.append("banner",ge);const xe=le.current.files[0];xe&&t.append("pdf",xe);const be=ie.current.files[0];be&&t.append("manual",be),console.log("Checking delete flags:"),console.log("bannerRef.getDeleteFlag():",(ve=h.getDeleteFlag)==null?void 0:ve.call(h)),console.log("imageRef.getDeleteFlag():",(ye=g.getDeleteFlag)==null?void 0:ye.call(g)),console.log("textureRef.getDeleteFlag():",(Ne=x.getDeleteFlag)==null?void 0:Ne.call(x)),h.getDeleteFlag&&h.getDeleteFlag()&&(t.append("banner_delete","DELETE"),console.log("Adding banner delete flag: DELETE")),g.getDeleteFlag&&g.getDeleteFlag()&&(t.append("image_delete","DELETE"),console.log("Adding image delete flag: DELETE")),x.getDeleteFlag&&x.getDeleteFlag()&&(t.append("texture_delete","DELETE"),console.log("Adding texture delete flag: DELETE"));let se=0,re=0;const O=[];R.forEach((n,j)=>{n.toDelete||(n.file?(t.append(`gallery[${se}]`,n.file),O.push({type:"new",index:se}),se++):(t.append(`gallery_ids[${re}]`,n.id),O.push({type:"existing",id:n.id,index:re}),re++))}),O.length>0&&t.append("gallery_order",JSON.stringify(O));const je=R.filter(n=>n.toDelete).map(n=>n.id);je.length>0&&je.forEach((n,j)=>{t.append(`deleted_images[${j}]`,n)}),console.log("FormData contents:");for(let[n,j]of t.entries())console.log(`${n}: ${j}`);await z.save(t)&&(h.resetDeleteFlag&&h.resetDeleteFlag(),g.resetDeleteFlag&&g.resetDeleteFlag(),x.resetDeleteFlag&&x.resetDeleteFlag(),$(p.current).dxDataGrid("instance").refresh(),$(f.current).modal("hide"),S([]))},Je=async({id:s,value:r})=>{await z.boolean({id:s,field:"visible",value:r})&&$(p.current).dxDataGrid("instance").refresh()},B=async({id:s,field:r,value:l})=>{await z.boolean({id:s,field:r,value:l})&&$(p.current).dxDataGrid("instance").refresh()},Qe=async s=>{const{isConfirmed:r}=await ts.fire({title:"Eliminar item",text:"¿Estás seguro de eliminar este item?",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"});!r||!await z.delete(s)||$(p.current).dxDataGrid("instance").refresh()},[fe,pe]=a.useState([]),[he,Z]=a.useState([]),Ke=["Principal","General"],[fs,ps]=a.useState(!1),ee=a.useRef(),Xe=()=>{$(ee.current).modal("show")};return e.jsxs(e.Fragment,{children:[e.jsx(as,{gridRef:p,title:"Items",rest:z,toolBar:s=>{s.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(p.current).dxDataGrid("instance").refresh()}}),s.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Agregar",hint:"Agregar",onClick:()=>ue()}}),s.unshift({widget:"dxButton",location:"after",options:{icon:"upload",text:"Importar Datos",hint:"Importar Datos",onClick:()=>Xe()}})},exportable:!0,exportableName:"Items",columns:[{dataField:"id",caption:"ID",visible:!1},d.has("items","category_id")&&{dataField:"category.name",caption:"Categoría",width:"120px",cellTemplate:(s,{data:r})=>{var l,i,t;s.html(te.renderToString(e.jsxs(e.Fragment,{children:[e.jsx("b",{className:"d-block fst-italic text-muted",children:(l=r.collection)==null?void 0:l.name}),e.jsx("b",{className:"d-block",children:(i=r.category)==null?void 0:i.name}),e.jsx("small",{className:"text-muted",children:(t=r.subcategory)==null?void 0:t.name})]})))}},d.has("items","subcategory_id")&&{dataField:"subcategory.name",caption:"Subcategoría",visible:!1},d.has("items","brand_id")&&{dataField:"brand.name",caption:"Marca",width:"120px"},{dataField:"name",caption:"Nombre",minWidth:"300px",cellTemplate:(s,{data:r})=>{const i=((t,b)=>{if(!t)return"";const G=t.split(" ");return G.length>b?G.slice(0,b).join(" ")+"...":t})(r.summary,12);s.html(te.renderToString(e.jsxs(e.Fragment,{children:[e.jsx("b",{children:r.name}),e.jsx("br",{}),e.jsx("span",{children:i})]})))}},{dataField:"final_price",caption:"Precio",dataType:"number",width:"75px",cellTemplate:(s,{data:r})=>{s.html(te.renderToString(e.jsxs(e.Fragment,{children:[r.discount>0&&e.jsxs("small",{className:"d-block text-muted",style:{textDecoration:"line-through"},children:[Ce()," ",Se(r.price)]}),e.jsxs("span",{children:[Ce()," ",Se(r.discount>0?r.discount:r.price)]})]})))}},d.has("items","weight")&&{dataField:"weight",caption:"Peso",dataType:"number",width:"75px"},{dataField:"image",caption:"Imagen",width:"90px",allowFiltering:!1,cellTemplate:(s,{data:r})=>{_(s,e.jsx("img",{src:`/storage/images/item/${r.image}`,style:{width:"80px",height:"48px",objectFit:"cover",objectPosition:"center",borderRadius:"4px"},onError:l=>l.target.src="/api/cover/thumbnail/null"}))}},d.has("items","is_new")&&{dataField:"is_new",caption:"Nuevo",dataType:"boolean",width:"80px",cellTemplate:(s,{data:r})=>{const l=r.is_new===1||r.is_new==="1"||r.is_new===!0;_(s,e.jsx(L,{checked:l,onChange:i=>B({id:r.id,field:"is_new",value:i.target.checked?1:0})}))}},d.has("items","offering")&&{dataField:"offering",caption:"En oferta",dataType:"boolean",width:"80px",cellTemplate:(s,{data:r})=>{const l=r.offering===1||r.offering==="1"||r.offering===!0;_(s,e.jsx(L,{checked:l,onChange:i=>B({id:r.id,field:"offering",value:i.target.checked?1:0})}))}},d.has("items","recommended")&&{dataField:"recommended",caption:"Recomendado",dataType:"boolean",width:"80px",cellTemplate:(s,{data:r})=>{const l=r.recommended===1||r.recommended==="1"||r.recommended===!0;_(s,e.jsx(L,{checked:l,onChange:i=>B({id:r.id,field:"recommended",value:i.target.checked?1:0})}))}},d.has("items","featured")&&{dataField:"featured",caption:"Destacado",dataType:"boolean",width:"80px",cellTemplate:(s,{data:r})=>{const l=r.featured===1||r.featured==="1"||r.featured===!0;_(s,e.jsx(L,{checked:l,onChange:i=>B({id:r.id,field:"featured",value:i.target.checked?1:0})}))}},d.has("items","visible")&&{dataField:"visible",caption:"Visible",dataType:"boolean",width:"80px",cellTemplate:(s,{data:r})=>{_(s,e.jsx(L,{checked:r.visible,onChange:l=>Je({id:r.id,value:l.target.checked})}))}},{caption:"Acciones",width:"100px",cellTemplate:(s,{data:r})=>{s.css("text-overflow","unset"),s.append(De({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>ue(r)})),s.append(De({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>Qe(r.id)}))},allowFiltering:!1,allowExporting:!1}]}),e.jsx(we,{modalRef:f,title:_e?"Editar item":"Agregar item",onSubmit:He,size:"xl",children:e.jsxs("div",{id:"principal-container",children:[e.jsx("input",{ref:E,type:"hidden"}),e.jsxs("ul",{className:"nav nav-pills nav-justified mb-4",role:"tablist",style:{backgroundColor:"#f8f9fa",borderRadius:"8px",padding:"4px",border:"1px solid #e9ecef"},children:[e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link active",id:"basic-info-tab","data-bs-toggle":"pill","data-bs-target":"#basic-info",type:"button",role:"tab","aria-controls":"basic-info","aria-selected":"true",style:{borderRadius:"6px",fontWeight:"500",transition:"all 0.3s ease"},children:[e.jsx("i",{className:"fas fa-info-circle me-2"}),"Información Básica"]})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link",id:"pricing-tab","data-bs-toggle":"pill","data-bs-target":"#pricing",type:"button",role:"tab","aria-controls":"pricing","aria-selected":"false",style:{borderRadius:"6px",fontWeight:"500",transition:"all 0.3s ease"},children:[e.jsx("i",{className:"fas fa-dollar-sign me-2"}),"Precios y Stock"]})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link",id:"multimedia-tab","data-bs-toggle":"pill","data-bs-target":"#multimedia",type:"button",role:"tab","aria-controls":"multimedia","aria-selected":"false",style:{borderRadius:"6px",fontWeight:"500",transition:"all 0.3s ease"},children:[e.jsx("i",{className:"fas fa-images me-2"}),"Multimedia"]})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link",id:"features-tab","data-bs-toggle":"pill","data-bs-target":"#features",type:"button",role:"tab","aria-controls":"features","aria-selected":"false",style:{borderRadius:"6px",fontWeight:"500",transition:"all 0.3s ease"},children:[e.jsx("i",{className:"fas fa-list-ul me-2"}),"Características"]})})]}),e.jsxs("div",{className:"tab-content",children:[e.jsx("div",{className:"tab-pane fade show active",id:"basic-info",role:"tabpanel","aria-labelledby":"basic-info-tab",children:e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-tag me-2"}),"Identificación"]})}),e.jsxs("div",{className:"card-body",children:[e.jsx(D,{eRef:J,label:"SKU",required:!0,hidden:!d.has("items","sku")}),e.jsx(D,{eRef:o,label:"Nombre del Producto",required:!0,hidden:!d.has("items","name")}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(D,{eRef:m,label:"Color",required:!0,hidden:!d.has("items","color")})}),e.jsx("div",{className:"col-md-6",children:e.jsx(D,{eRef:u,label:"Talla",required:!0,hidden:!d.has("items","size")})}),e.jsx("div",{className:"col-md-6",children:e.jsx(D,{eRef:X,label:"Peso",hidden:!d.has("items","weight")})})]})]})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-sitemap me-2"}),"Categorización"]})}),e.jsxs("div",{className:"card-body",children:[e.jsx(V,{eRef:v,label:"Categoría",required:!0,dropdownParent:"#principal-container",onChange:s=>Ae(s.target.value),hidden:!d.has("items","category_id"),children:k.map((s,r)=>e.jsx("option",{value:s.id,children:s.name},r))}),e.jsx(V,{eRef:w,label:"Colección",dropdownParent:"#principal-container",onChange:s=>Pe(s.target.value),hidden:!d.has("items","collection_id"),children:C.map((s,r)=>e.jsx("option",{value:s.id,children:s.name},r))}),e.jsx(Re,{eRef:I,label:"Subcategoría",searchAPI:"/api/admin/subcategories/paginate",searchBy:"name",filter:["category_id","=",$e],dropdownParent:"#principal-container",hidden:!d.has("items","subcategory_id")}),e.jsx(V,{eRef:c,label:"Marca",dropdownParent:"#principal-container",hidden:!d.has("items","brand_id"),children:y.map((s,r)=>e.jsx("option",{value:s.id,children:s.name},r))})]})]})}),e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card border-0 shadow-sm",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-align-left me-2"}),"Descripción"]})}),e.jsxs("div",{className:"card-body",children:[e.jsx(ss,{eRef:P,label:"Resumen",rows:3,hidden:!d.has("items","summary")}),e.jsxs(V,{eRef:M,label:"Tienda",dropdownParent:"#principal-container",onChange:s=>Me(s.target.value),hidden:!d.has("items","store_id"),children:[e.jsx("option",{value:"",children:"Seleccionar tienda (opcional)"}),T.map((s,r)=>e.jsx("option",{value:s.id,children:s.name},r))]}),e.jsx(Re,{id:"tags",eRef:W,searchAPI:"/api/admin/tags/paginate",searchBy:"name",label:"Tags",dropdownParent:"#principal-container",tags:!0,multiple:!0})]})]})})]})}),e.jsx("div",{className:"tab-pane fade",id:"pricing",role:"tabpanel","aria-labelledby":"pricing-tab",children:e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-dollar-sign me-2"}),"Precios"]})}),e.jsxs("div",{className:"card-body",children:[e.jsx(D,{eRef:U,label:"Precio Regular",type:"number",step:"0.01",required:!0,hidden:!d.has("items","price")}),e.jsx(D,{eRef:q,label:"Precio con Descuento",type:"number",step:"0.01"})]})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-boxes me-2"}),"Inventario"]})}),e.jsx("div",{className:"card-body",children:e.jsx(D,{label:"Stock Disponible",eRef:Q,type:"number",required:!0,hidden:!d.has("items","stock")})})]})})]})}),e.jsx("div",{className:"tab-pane fade",id:"multimedia",role:"tabpanel","aria-labelledby":"multimedia-tab",children:e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-image me-2"}),"Imágenes Principales"]})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsx(ae,{eRef:h,name:"banner",label:"Banner",aspect:2/1,col:"col-12",hidden:!d.has("items","banner")}),e.jsx(ae,{eRef:g,name:"image",label:"Imagen Principal",aspect:1,col:"col-md-6",hidden:!d.has("items","image")}),e.jsx(ae,{eRef:x,name:"texture",label:"Textura",aspect:1,col:"col-md-6",hidden:!d.has("items","texture")})]})})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-photo-video me-2"}),"Galería y Multimedia"]})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"form-label fw-semibold text-dark mb-3",children:[e.jsx("i",{className:"fas fa-images me-2 text-primary"}),"Galería de Imágenes",R.filter(s=>!s.toDelete).length>0&&e.jsx("span",{className:"badge bg-primary ms-2",children:R.filter(s=>!s.toDelete).length})]}),e.jsx("input",{id:"input-item-gallery",ref:me,type:"file",multiple:!0,accept:"image/*",hidden:!0,onChange:Le}),e.jsxs("div",{className:"gallery-container",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:"16px",padding:"16px",backgroundColor:"#f8f9fa",borderRadius:"12px",border:"2px dashed #dee2e6",minHeight:"160px"},children:[R.filter(s=>!s.toDelete).map((s,r)=>{const l=R.findIndex(t=>t===s),i=r+1;return e.jsxs("div",{className:"gallery-item position-relative",draggable:!0,onDragStart:t=>Ve(t,l),onDragEnd:Ue,onDragOver:qe,onDrop:t=>We(t,l),style:{aspectRatio:"1",borderRadius:"12px",overflow:"hidden",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",transition:"all 0.3s ease",cursor:"grab",transform:F===l?"scale(1.05)":"scale(1)",opacity:F===l?.8:1,border:"3px solid transparent",background:"white"},onMouseEnter:t=>{F===null&&(t.currentTarget.style.transform="scale(1.02)",t.currentTarget.style.boxShadow="0 6px 20px rgba(0,0,0,0.15)")},onMouseLeave:t=>{F===null&&(t.currentTarget.style.transform="scale(1)",t.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.1)")},children:[e.jsx("div",{className:"position-absolute top-0 start-0 m-2",children:e.jsx("span",{className:"badge bg-primary rounded-circle d-flex align-items-center justify-content-center",style:{width:"24px",height:"24px",fontSize:"11px",fontWeight:"bold"},children:i})}),e.jsx("img",{src:s.url,alt:`Imagen ${i}`,className:"w-100 h-100",style:{objectFit:"cover",pointerEvents:"none"}}),e.jsx("div",{className:"position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center",style:{background:"rgba(0,0,0,0.7)",opacity:0,transition:"opacity 0.3s ease"},onMouseEnter:t=>t.currentTarget.style.opacity=1,onMouseLeave:t=>t.currentTarget.style.opacity=0,children:e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-light btn-sm rounded-circle d-flex align-items-center justify-content-center",style:{width:"32px",height:"32px"},title:"Mover imagen",children:e.jsx("i",{className:"fas fa-arrows-alt text-dark"})}),e.jsx("button",{type:"button",className:"btn btn-danger btn-sm rounded-circle d-flex align-items-center justify-content-center",style:{width:"32px",height:"32px"},onClick:t=>Oe(t,l),title:"Eliminar imagen",children:e.jsx("i",{className:"fas fa-trash text-white"})})]})})]},l)}),e.jsx("div",{className:"gallery-add-button d-flex flex-column align-items-center justify-content-center",style:{aspectRatio:"1",border:"3px dashed #71b6f9",borderRadius:"12px",backgroundColor:"rgba(13, 110, 253, 0.05)",cursor:"pointer",transition:"all 0.3s ease",minHeight:"120px"},onClick:()=>me.current.click(),onDrop:ze,onDragOver:Be,onMouseEnter:s=>{s.currentTarget.style.backgroundColor="rgba(13, 110, 253, 0.1)",s.currentTarget.style.borderColor="#0056b3",s.currentTarget.style.transform="scale(1.02)"},onMouseLeave:s=>{s.currentTarget.style.backgroundColor="rgba(13, 110, 253, 0.05)",s.currentTarget.style.borderColor="#0d6efd",s.currentTarget.style.transform="scale(1)"},children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mb-2 bg-primary",style:{width:"48px",height:"48px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto"},children:e.jsx("i",{className:"fas fa-plus text-white fa-lg"})}),e.jsx("p",{className:"mb-0 text-primary fw-semibold",style:{fontSize:"12px"},children:"Agregar Imagen"}),e.jsx("small",{className:"text-muted",style:{fontSize:"10px"},children:"Arrastra o haz clic"})]})})]}),R.filter(s=>!s.toDelete).length===0&&e.jsxs("div",{className:"text-center py-4 text-muted",children:[e.jsx("i",{className:"fas fa-images fa-3x mb-3 opacity-50"}),e.jsx("p",{className:"mb-1",children:"No hay imágenes en la galería"}),e.jsx("small",{children:'Arrastra archivos aquí o haz clic en "Agregar Imagen"'})]})]}),e.jsx(D,{eRef:K,label:"Link de Video",placeholder:"https://youtube.com/watch?v=...",hidden:!d.has("items","linkvideo")}),e.jsxs("div",{className:"mb-3",hidden:!d.has("items","pdf"),children:[e.jsx("label",{className:"form-label fw-bold",children:"Archivo PDF (Catálogo)"}),e.jsx("input",{ref:le,type:"file",className:"form-control",accept:".pdf"}),e.jsx("small",{className:"text-muted",children:"Catálogo o documento relacionado"}),ce&&e.jsx("div",{className:"mt-2",children:e.jsxs("a",{href:ce,target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-outline-primary",children:[e.jsx("i",{className:"fas fa-file-pdf me-1"})," Ver PDF actual"]})})]}),e.jsxs("div",{className:"mb-3",hidden:!d.has("items","manual"),children:[e.jsx("label",{className:"form-label fw-bold",children:"Manual de Usuario"}),e.jsx("input",{ref:ie,type:"file",className:"form-control",accept:".pdf"}),e.jsx("small",{className:"text-muted",children:"Manual de instrucciones, mantenimiento o especificaciones técnicas"}),de&&e.jsx("div",{className:"mt-2",children:e.jsxs("a",{href:de,target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-outline-success",children:[e.jsx("i",{className:"fas fa-book me-1"})," Ver Manual actual"]})})]})]})]})})]})}),e.jsx("div",{className:"tab-pane fade",id:"features",role:"tabpanel","aria-labelledby":"features-tab",children:e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-list-ul me-2"}),"Características"]})}),e.jsx("div",{className:"card-body",children:e.jsx(ke,{ref:Ee,label:"Lista de Características",structure:"",value:fe,onChange:pe})})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-cogs me-2"}),"Especificaciones"]})}),e.jsx("div",{className:"card-body",children:e.jsx(ke,{ref:Ie,label:"Especificaciones Técnicas",structure:{type:"",title:"",description:""},value:he,onChange:Z,typeOptions:Ke})})]})}),e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card border-0 shadow-sm",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-edit me-2"}),"Descripción Detallada"]})}),e.jsx("div",{className:"card-body",children:e.jsx(ls,{eRef:H,label:"Descripción Completa"})})]})})]})})]})]})}),e.jsx(we,{modalRef:ee,title:"Importar Datos",size:"sm",children:e.jsx(os,{gridRef:p,modalRef:ee})})]})};is((k,y)=>{rs.createRoot(k).render(e.jsx(es,{...y,title:"Items",children:e.jsx(ds,{...y})}))});
