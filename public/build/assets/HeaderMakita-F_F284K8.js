import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as i}from"./index-BH53Isel.js";import{G as H}from"./Global-ErywZRdd.js";import{C as Y}from"./HeaderSearch-BPfvHXmz.js";import{L as Z}from"./Logout-7s5dsuEK.js";import{M as J,S as K}from"./MobileMenu-nQrnmQKE.js";import{S as A}from"./search-TwiiKGP5.js";import{C as p,D as Q}from"./door-closed-Z4GbcMb-.js";import{A as h}from"./index-CFtDjG4d.js";import{m as f}from"./proxy-BTYtmp9V.js";import{S as z}from"./shopping-cart-CZEUxbmv.js";import{X as O}from"./x-DBMwyD6F.js";import{U as ee}from"./user-BvYmyGTY.js";import"./index-yBjzXJbu.js";import"./PaymentModal-Bxx5p2o_.js";import"./index-fNjTmf9T.js";import"./index-Chjiymov.js";import"./CartItemRow-D9z3pFKU.js";import"./Number2Currency-e57Tgsuk.js";import"./tippy-react.esm-BWiGTO87.js";import"./index-rimy3MAc.js";import"./trash-2-DK1wnsDn.js";import"./createLucideIcon-Cy5Ya80P.js";import"./minus-jyhodMPN.js";import"./plus-Bot15Khs.js";import"./main-BvVILmTO.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";import"./chevron-left-B2s3ZsB7.js";import"./chevron-right-Ckt5D2ka.js";const Le=({items:m,data:n,cart:E,setCart:F,isUser:g,pages:W,generals:L=[]})=>{const b=L.find(s=>s.correlative==="phone_whatsapp"),j=L.find(s=>s.correlative==="message_whatsapp"),_=(b==null?void 0:b.description)??null,D=(j==null?void 0:j.description)??null,[T,y]=i.useState(!1),[N,G]=i.useState(!1),[q,v]=i.useState(!1),[c,w]=i.useState(""),[d,k]=i.useState(!1),[R,I]=i.useState(!1),[C,M]=i.useState(!1),[a,S]=i.useState(null),[se,V]=i.useState(null),X=(()=>{if(!Array.isArray(m))return[];const s=new Map;return m.forEach(t=>{const r=t.category,o=t.brand,l=t.subcategory;if(!r||!r.id)return;s.has(r.id)||s.set(r.id,{id:r.id,name:r.name,slug:r.slug,marcas:new Map,subcategorias:new Map});const u=s.get(r.id);o&&o.id?(u.marcas.has(o.id)||u.marcas.set(o.id,{id:o.id,name:o.name,slug:o.slug,subcategorias:new Map}),l&&l.id&&u.marcas.get(o.id).subcategorias.set(l.id,{id:l.id,name:l.name,slug:l.slug})):l&&l.id&&u.subcategorias.set(l.id,{id:l.id,name:l.name,slug:l.slug})}),Array.from(s.values()).map(t=>({...t,marcas:Array.from(t.marcas.values()).map(r=>({...r,subcategorias:Array.from(r.subcategorias.values())})),subcategorias:Array.from(t.subcategorias.values())}))})(),x=i.useRef(null),$=i.useRef(null),B=E.reduce((s,t)=>Number(s)+Number(t.quantity),0);i.useEffect(()=>{function s(t){x.current&&!x.current.contains(t.target)&&k(!1),$.current&&!$.current.contains(t.target)&&v(!1)}return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]),i.useEffect(()=>{const s=()=>{window.scrollY>0?I(!0):I(!1)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]);const P={hidden:{opacity:0,y:-10,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:400,damping:25}},exit:{opacity:0,y:-10,scale:.95,transition:{duration:.15}}},U=[{icon:e.jsx(ee,{size:16}),label:"Mi Perfil",href:"/profile"},{icon:e.jsx(z,{size:16}),label:"Mis Pedidos",href:"/customer/dashboard"},{icon:e.jsx(K,{size:16}),label:"Configuración",href:"/account"},{icon:e.jsx(Q,{size:16}),label:"Cerrar Sesión",onClick:Z}];return console.log("HeaderMakita",m),e.jsx("header",{className:`w-full top-0 left-0 z-50 transition-all duration-300 ${R?"fixed":"relative"} bg-primary`,style:{boxShadow:R?"0 2px 8px rgba(0,0,0,0.08)":"none"},children:e.jsx("div",{className:"px-primary 2xl:px-0 2xl:max-w-7xl mx-auto py-2 md:py-4 font-paragraph text-base font-semibold text-white",children:e.jsxs("div",{className:"hidden md:flex items-center justify-between gap-4 min-h-[72px]",children:[e.jsx("a",{href:"/",className:"flex items-center gap-2 z-[51]",children:e.jsx("img",{src:`/assets/resources/logo.png?v=${crypto.randomUUID()}`,alt:H.APP_NAME,className:"h-14 object-contain object-center",onError:s=>{s.target.onerror=null,s.target.src="/assets/img/logo-bk.svg"}})}),e.jsx("nav",{className:"flex gap-2 relative",children:X.map(s=>e.jsx("div",{className:"relative",children:e.jsx("button",{className:`font-medium px-4 py-2 rounded hover:bg-primary/80 transition-colors duration-200 ${(a==null?void 0:a.id)===s.id&&C?"bg-primary/90":""}`,onClick:()=>{(a==null?void 0:a.id)===s.id&&C?(M(!1),S(null)):(M(!0),S(s),V(null))},children:s.name})},s.id))}),C&&a&&e.jsxs("div",{className:"fixed left-0 right-0 top-[72px] z-30 w-full h-[calc(100vh-72px)] bg-black text-white flex flex-col",style:{maxWidth:"100vw"},children:[e.jsx("div",{className:"flex-1 flex flex-col overflow-y-auto",children:e.jsx("div",{className:"flex gap-12 px-10 pt-10",children:a.marcas&&a.marcas.length>0?e.jsx(e.Fragment,{children:a.marcas.map(s=>e.jsxs("div",{className:"min-w-[260px] flex flex-col",children:[e.jsx("img",{src:"/assets/resources/logo.png",alt:"Makita",className:"h-8 w-auto mb-4",style:{filter:"brightness(0) invert(1)"}}),e.jsx("ul",{className:"flex-1 flex flex-col gap-0",children:s.subcategorias.map(t=>e.jsxs("li",{className:"flex items-center group border-b border-[#444] last:border-b-0 py-2",children:[e.jsx("span",{className:"mr-2 text-primary text-xs",children:"•"}),e.jsx("a",{href:`/catalogo?subcategory=${t.slug}`,className:"block text-base group-hover:underline group-hover:text-primary transition-colors",children:t.name})]},t.id))})]},s.id))}):e.jsxs("div",{className:"min-w-[260px] flex flex-col",children:[e.jsx("img",{src:"/assets/resources/logo.png",alt:"Makita",className:"h-8 w-auto mb-4",style:{filter:"brightness(0) invert(1)"}}),e.jsx("ul",{className:"flex-1 flex flex-col gap-0",children:a.subcategorias&&a.subcategorias.length>0?a.subcategorias.map(s=>e.jsxs("li",{className:"flex items-center group border-b border-[#444] last:border-b-0 py-2",children:[e.jsx("span",{className:"mr-2 text-primary text-xs",children:"•"}),e.jsx("a",{href:`/catalogo?subcategory=${s.slug}`,className:"block text-base group-hover:underline group-hover:text-primary transition-colors",children:s.name})]},s.id)):e.jsx("li",{className:"text-gray-400 text-sm",children:"No hay subcategorías"})})]})})}),e.jsxs("div",{className:"flex items-center justify-between pt-10 px-10 pb-8 border-t border-[#444]",children:[e.jsx("a",{href:"/blog",className:"font-bold text-2xl text-white hover:text-primary transition-colors",children:"Nuestro blog"}),e.jsx("div",{className:"flex gap-4 text-base font-semibold text-gray-200",children:["CONSTRUCCIÓN","CARPINTERÍA","MAESTRANZA","MINERÍA"].map((s,t,r)=>e.jsxs(e.Fragment,{children:[e.jsx("a",{href:`/coleccion/${s.toLowerCase()}`,className:"hover:text-primary transition-colors uppercase tracking-wide",children:s},s),t<r.length-1&&e.jsx("span",{className:"mx-2 text-gray-500",children:"|"})]}))}),e.jsx("button",{onClick:()=>{M(!1),S(null)},className:"ml-8 text-white hover:text-primary text-2xl font-bold",children:"×"})]})]}),e.jsxs("div",{className:"relative w-full max-w-xl mx-auto",children:[e.jsx("input",{type:"search",placeholder:"Buscar productos",value:c,onChange:s=>w(s.target.value),className:"w-full pr-14 py-3 pl-4 border rounded-full focus:ring-0 focus:outline-none text-black"}),e.jsx("a",{href:c.trim()?`/catalogo?search=${encodeURIComponent(c)}`:"#",className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors","aria-label":"Buscar",children:e.jsx(A,{})})]}),(n==null?void 0:n.showLoginCart)&&e.jsxs("div",{className:"flex items-center gap-4 relative text-sm",children:[e.jsxs("div",{ref:x,children:[g?e.jsxs("button",{"aria-label":"user",className:"customtext-neutral-dark flex items-center gap-2 hover:customtext-primary pr-6 transition-colors duration-300",onClick:()=>k(!d),children:[e.jsx(p,{className:"customtext-primary"}),e.jsx("span",{className:"hidden md:inline",children:g.name})]}):e.jsxs("a",{href:"/iniciar-sesion",className:"flex items-center gap-2 text-sm hover:customtext-primary transition-colors duration-300",children:[e.jsx(p,{className:"customtext-primary"}),e.jsx("span",{className:"hidden md:inline",children:"Iniciar Sesión"})]}),e.jsx(h,{children:d&&e.jsx(f.div,{initial:"hidden",animate:"visible",exit:"exit",variants:P,className:"absolute z-50 top-full left-0 bg-white shadow-xl border-t rounded-xl w-48 mt-2",children:e.jsx("div",{className:"p-4",children:e.jsx("ul",{className:"space-y-3",children:U.map((s,t)=>e.jsx("li",{children:s.onClick?e.jsxs("button",{"aria-label":"menu-items",onClick:s.onClick,className:"flex w-full items-center gap-3 customtext-neutral-dark text-sm hover:customtext-primary transition-colors duration-300",children:[s.icon,e.jsx("span",{children:s.label})]}):e.jsxs("a",{href:s.href,className:"flex items-center gap-3 customtext-neutral-dark text-sm hover:customtext-primary transition-colors duration-300",children:[s.icon,e.jsx("span",{children:s.label})]})},t))})})})})]}),e.jsxs("button",{"aria-label":"",onClick:()=>y(!0),className:"flex items-center relative",children:[e.jsx(z,{className:"customtext-primary"}),e.jsx("span",{className:"absolute -right-2 -top-2 inline-flex items-center justify-center w-4 h-4 bg-primary text-white rounded-full text-[8px]",children:B})]})]}),e.jsxs("div",{className:"flex md:hidden items-center justify-between gap-2 min-h-[60px]",children:[e.jsx("button",{"aria-label":"Menú",onClick:()=>G(!N),className:"flex items-center justify-center bg-primary rounded-lg w-auto h-auto p-2 text-white fill-white transition-all duration-300 z-[51]",children:N?e.jsx(O,{}):e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("path",{d:"M10 5H20",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M4 12H20",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M4 19H14",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsx("a",{href:"/",className:"flex items-center gap-2 z-[51]",children:e.jsx("img",{src:`/assets/resources/logo.png?v=${crypto.randomUUID()}`,alt:H.APP_NAME,className:"h-12 object-contain object-center",onError:s=>{s.target.onerror=null,s.target.src="/assets/img/logo-bk.svg"}})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{"aria-label":"Buscar",onClick:()=>v(!0),className:"flex items-center justify-center p-2",children:e.jsx(A,{className:"customtext-primary",size:24})}),e.jsxs("button",{"aria-label":"Carrito",onClick:()=>y(!0),className:"flex items-center relative",children:[e.jsx(z,{className:"customtext-primary",width:"1.5rem"}),e.jsx("span",{className:"absolute -right-2 -top-2 inline-flex items-center justify-center w-4 h-4 bg-primary text-white rounded-full text-[8px]",children:B})]}),(n==null?void 0:n.showLoginCart)&&(g?e.jsxs("div",{ref:x,className:"relative",children:[e.jsx("button",{"aria-label":"user",className:"flex items-center gap-2 hover:customtext-primary transition-colors duration-300",onClick:()=>k(!d),children:e.jsx(p,{className:"customtext-primary",width:"1.5rem"})}),e.jsx(h,{children:d&&e.jsx(f.div,{initial:"hidden",animate:"visible",exit:"exit",variants:P,className:"absolute z-50 top-full right-0 bg-white shadow-xl border-t rounded-xl w-48 mt-2",children:e.jsx("div",{className:"p-4",children:e.jsx("ul",{className:"space-y-3",children:U.map((s,t)=>e.jsx("li",{children:s.onClick?e.jsxs("button",{"aria-label":"menu-items",onClick:s.onClick,className:"flex w-full items-center gap-3 customtext-neutral-dark text-sm hover:customtext-primary transition-colors duration-300",children:[s.icon,e.jsx("span",{children:s.label})]}):e.jsxs("a",{href:s.href,className:"flex items-center gap-3 customtext-neutral-dark text-sm hover:customtext-primary transition-colors duration-300",children:[s.icon,e.jsx("span",{children:s.label})]})},t))})})})})]}):e.jsx("a",{href:"/iniciar-sesion",className:"flex items-center",children:e.jsx(p,{className:"customtext-primary",width:"1.5rem"})}))]})]}),e.jsx(h,{children:q&&e.jsx(f.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"fixed top-0 left-0 right-0 bg-white p-4 z-[100] shadow-lg",children:e.jsxs("div",{className:"relative w-full max-w-xl mx-auto",children:[e.jsx("input",{type:"search",placeholder:"Buscar productos",value:c,onChange:s=>w(s.target.value),className:"w-full pr-14 py-4 pl-4 border rounded-full focus:ring-0 focus:outline-none",autoFocus:!0}),e.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex gap-2",children:[e.jsx("button",{"aria-label":"Cerrar",onClick:()=>v(!1),className:"p-2 bg-gray-200 text-gray-600 rounded-lg",children:e.jsx(O,{size:20})}),e.jsx("a",{href:c.trim()?`/catalogo?search=${encodeURIComponent(c)}`:"#",className:"p-2 bg-primary text-white rounded-lg","aria-label":"Buscar",children:e.jsx(A,{})})]})]})})}),e.jsx(h,{children:N&&e.jsx(f.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},className:"md:hidden bg-white text-textWhite shadow-lg w-full min-h-screen fixed z-40 top-[60px] left-0",children:e.jsx(J,{search:c,setSearch:w,pages:W,items:m})})}),e.jsx(Y,{data:n,cart:E,setCart:F,modalOpen:T,setModalOpen:y}),e.jsx("div",{className:"flex justify-end w-full mx-auto z-[100] relative",children:e.jsx("div",{className:"hidden lg:block fixed bottom-6 sm:bottom-[2rem] lg:bottom-[4rem] z-20 cursor-pointer",children:e.jsx("a",{target:"_blank",id:"whatsapp-toggle",href:`https://api.whatsapp.com/send?phone=${_}&text=${D}`,children:e.jsx("img",{src:"/assets/img/whatsapp.svg",alt:"whatsapp",className:"mr-3 w-16 h-16 md:w-[100px] md:h-[100px] animate-bounce duration-300"})})})})]})})})};export{Le as default};
