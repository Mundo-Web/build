import{j as a}from"./AboutSimple-Cf8x2fCZ.js";import{A as w}from"./StorePickupSelector-DEoj4GAr.js";import{C as e}from"./Number2Currency-jIsa99f9.js";import{P as q}from"./package-DBFPPBi1.js";import{M as C}from"./minus-Db6MFKEO.js";import{P as _}from"./plus-CTIomuuF.js";import{T as P}from"./trash-2-DU7LB6-f.js";const B=({setCart:l,hasPromotion:j,onPromotionClick:y,categorias:c,...s})=>{var t,h,p,f,g,i;const d=c==null?void 0:c.find(o=>o.id===(s==null?void 0:s.category_id)),n=s.type==="combo",u=()=>{l(o=>o.filter(r=>n?!(r.id===(s==null?void 0:s.id)&&r.type==="combo"):r.id!==(s==null?void 0:s.id)))},N=()=>{l(o=>o.map(r=>n?r.id===(s==null?void 0:s.id)&&r.type==="combo"?{...r,quantity:(r.quantity||1)+1}:r:r.id===(s==null?void 0:s.id)?{...r,quantity:(r.quantity||1)+1}:r))},v=()=>{l(o=>o.map(r=>{if(n?r.id===(s==null?void 0:s.id)&&r.type==="combo":r.id===(s==null?void 0:s.id)){const b=(r.quantity||1)-1;return b<=0?(u(),null):{...r,quantity:b}}return r}).filter(Boolean))},k=n?s.final_price||s.price:s.final_price,x=s.price;return a.jsx("div",{className:"w-full bg-white rounded-lg shadow p-4",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center  justify-between gap-4 w-full",children:[a.jsxs("div",{className:"flex items-center gap-4 flex-grow",children:[a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:n?s!=null&&s.image?`/storage/images/combo/${s.image}`:`/storage/images/item/${s.image}`:`/storage/images/item/${s==null?void 0:s.image}`,alt:s==null?void 0:s.name,className:"w-20 h-20 object-cover rounded flex-shrink-0",onError:o=>o.target.src="/api/cover/thumbnail/null"}),n&&a.jsx("div",{className:"absolute -top-1 -right-1 bg-primary text-white rounded-full p-1",children:a.jsx(q,{size:12})}),j&&a.jsx("div",{className:"absolute -top-2 -right-2",children:a.jsx(w,{onClick:()=>y(s),className:"group"})})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-medium text-lg mb-2 line-clamp-2",children:s==null?void 0:s.name}),n&&a.jsxs("p",{className:"text-xs customtext-primary font-medium mb-1",children:["Combo (",((t=s.combo_items)==null?void 0:t.length)||0," productos)"]}),n&&s.combo_items&&a.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["Incluye: ",s.combo_items.map(o=>o.name).join(", ")]}),((h=s==null?void 0:s.brand)==null?void 0:h.name)||((p=s==null?void 0:s.category)==null?void 0:p.name)&&a.jsxs("p",{className:"text-sm customtext-neutral-dark",children:[(f=s==null?void 0:s.brand)!=null&&f.name?"Marca: ":"CategorÃ­a: ",a.jsx("span",{className:"customtext-neutral-dark",children:(g=s==null?void 0:s.brand)!=null&&g.name?(i=s==null?void 0:s.brand)==null?void 0:i.name:d==null?void 0:d.name})]}),!n&&a.jsxs(a.Fragment,{children:[a.jsxs("p",{className:"text-sm customtext-neutral-dark",children:["Disponibilidad: ",a.jsxs("span",{className:"customtext-neutral-dark",children:[(s==null?void 0:s.stock)>=(s==null?void 0:s.quantity)?"En stock":"Agotado"," "]})]}),a.jsxs("p",{className:"text-sm customtext-neutral-dark",children:["SKU: ",a.jsx("span",{className:"customtext-neutral-dark",children:s==null?void 0:s.sku})]})]})]})]}),a.jsxs("div",{className:"flex flex-row justify-between md:flex-col items-end md:items-end gap-4 mt-4 md:mt-0 flex-shrink-0",children:[a.jsxs("div",{className:"text-right",children:[n&&s.discount>0&&a.jsxs("div",{className:"text-xs text-gray-500 line-through",children:[e()," ",Number(x*(s==null?void 0:s.quantity)).toFixed(2)]}),!n&&(s==null?void 0:s.discount)>0&&(s==null?void 0:s.price)>(s==null?void 0:s.final_price)&&a.jsxs("div",{className:"text-xs text-gray-500 line-through",children:[e()," ",Number(x*(s==null?void 0:s.quantity)).toFixed(2)]}),a.jsxs("div",{className:"font-bold text-lg",children:[e()," ",Number(k*(s==null?void 0:s.quantity)).toFixed(2)]}),n&&s.discount>0&&a.jsxs("div",{className:"text-xs text-red-500",children:["-",s.discount_percent,"% OFF"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"flex items-center border border-gray-200 rounded-lg overflow-hidden shadow-sm",children:[a.jsx("button",{type:"button",onClick:v,className:"p-2 text-gray-600 hover:bg-gray-100 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary","aria-label":"Decrease quantity",children:a.jsx(C,{size:16})}),a.jsx("div",{className:"w-12 h-8 flex justify-center items-center bg-white",children:a.jsx("span",{className:"font-semibold text-sm",children:(s==null?void 0:s.quantity)||1})}),a.jsx("button",{type:"button",onClick:N,className:"p-2 text-gray-600 hover:bg-gray-100 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary","aria-label":"Increase quantity",children:a.jsx(_,{size:16})})]}),a.jsx("button",{onClick:u,className:"p-2 text-gray-400 hover:text-red-500 transition-colors duration-200 rounded-full hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-red-200","aria-label":"Remove item",children:a.jsx(P,{size:18})})]})]})]})},s==null?void 0:s.id)};export{B as C};
