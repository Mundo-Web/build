import{r as e,j as t,X as s,C as r,e as a,S as n,E as i,J as l,u as o,H as c,v as d,w as u,y as m,z as h}from"./vendor-react-CZUvQwNQ.js";import{G as x}from"./Footer-DAm0kDL9.js";import{C as p}from"./CartModal-DdpBvihu.js";import{L as f}from"./Logout-D6byb_Ua.js";import g from"./MenuSimple-T7GtrSRX.js";import{C as b}from"./Number2Currency-BX4epFEo.js";import{A as y,m as j}from"./vendor-motion-mZjvfsLz.js";import{P as v}from"./ProfileImage-DzO0bVj1.js";import"./vendor-swiper-Cr_RrIb_.js";import"./CartItemRow-BHF2RFgZ.js";import"./CartKuchara-C7vqSevl.js";import"./MobileMenu-DjcheTAD.js";import"./OpenPayCardModal-BHkRoVZ6.js";import"./BasicRest-BMJgRso_.js";import"./BooleanLimit-q2Ad9fGY.js";import"./General-ClVW7qxN.js";function w({search:o,setSearch:c,pages:d,items:u,onClose:m,searchSuggestions:h,isLoadingSuggestions:x,fetchSearchSuggestions:p,clearSuggestions:f,selectSuggestion:v,selectedSuggestionIndex:w,handleKeyDown:N,stores:k=[],selectedStore:C,setSelectedStore:S}){const[E,L]=e.useState("main"),[z,R]=e.useState(null),[D,M]=e.useState(null),[T,I]=e.useState([]),[B,A]=e.useState("right"),[P,$]=e.useState(!1),[U,F]=e.useState(!1),[K,H]=e.useState(k||[]),_=e.useRef(null),q=e.useRef(null),O=e.useRef([]),W=e.useRef(null),G=e=>{S(e),F(!1)};e.useEffect(()=>{H(k||[])},[k]),e.useEffect(()=>{const e=e=>{W.current&&!W.current.contains(e.target)&&F(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);const J=e=>{if(e.preventDefault(),o.trim()){const e=o.trim();f(),$(!1),window.location.href=`/catalogo?search=${encodeURIComponent(e)}`}return!1},X=({suggestions:e,isLoading:s,onSelect:r,selectedIndex:a})=>P?t.jsx(j.div,{ref:q,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-lg shadow-lg z-[60] max-h-60 overflow-y-auto mt-1",children:s?t.jsx("div",{className:"p-4 text-center text-gray-600",children:t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx("div",{className:"w-4 h-4 border-2 border-primary border-t-transparent rounded-full animate-spin"}),"Buscando..."]})}):e.length>0?t.jsx("ul",{className:"py-2",children:e.map((e,s)=>t.jsx("li",{ref:e=>O.current[s]=e,children:t.jsxs("button",{"data-suggestion-button":!0,onMouseDown:t=>{t.preventDefault(),r(e)},className:"w-full px-4 py-3 text-left hover:bg-gray-50 transition-colors duration-200 flex items-center gap-3 "+(s===a?"bg-blue-50 border-l-4 border-primary":""),type:"button",children:[t.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gray-100 rounded-lg overflow-hidden",children:e.image?t.jsx("img",{src:`/api/items/media/${e.image}`,alt:e.name,className:"w-full h-full object-cover",onError:e=>{e.target.src="/api/cover/thumbnail/null"}}):t.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:t.jsx(n,{size:16})})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("div",{className:"font-medium text-gray-900 truncate",children:e.name}),e.category&&t.jsx("div",{className:"text-sm text-gray-600 truncate",children:e.category.name}),e.final_price&&t.jsxs("div",{className:"text-sm font-semibold text-primary",children:[b()," ",parseFloat(e.final_price).toFixed(2)]})]})]})},e.id))}):t.jsx("div",{className:"p-4 text-center text-gray-600",children:"No se encontraron productos"})}):null,V=(e,t="right",s=null)=>{A(t),s&&R(s),setTimeout(()=>{L(e)},50)};return e.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),e.useEffect(()=>{const e=e=>{"Escape"===e.key&&(P?($(!1),f()):o.trim()?c(""):m())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[o,m,c,P,f]),t.jsxs("div",{className:"fixed inset-0 z-[99999] flex flex-col touch-none overscroll-none",children:[t.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:m}),t.jsx("div",{className:"relative w-full md:w-[400px] md:mx-auto flex flex-col h-[100dvh]",children:t.jsxs("div",{className:"mt-auto bg-white shadow-xl flex flex-col max-h-[85vh] rounded-t-2xl overflow-hidden",children:[t.jsxs("div",{className:"p-4 bg-white flex justify-between items-center border-b border-gray-200 sticky top-0 z-[9999]",children:[t.jsx("h1",{className:"text-lg font-bold",children:"Menú principal"}),t.jsx("button",{className:"p-2 rounded-full hover:bg-gray-100",onClick:m,children:t.jsx(s,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"overflow-y-auto flex-1 p-4 overscroll-contain",children:[t.jsxs("div",{className:"mb-4 relative",ref:W,children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tienda"}),t.jsxs("button",{type:"button",onClick:()=>F(!U),className:"w-full flex items-center justify-between px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary/20 focus:outline-none",children:[t.jsx("span",{className:"truncate text-left",children:C?K.find(e=>e.id===C)?.name||C:"Todas las tiendas"}),t.jsx(r,{className:"w-4 h-4 transition-transform "+(U?"rotate-180":"")})]}),U&&t.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-[70] max-h-48 overflow-y-auto",children:t.jsxs("ul",{className:"py-1",children:[t.jsx("li",{children:t.jsxs("button",{type:"button",onClick:()=>G(""),className:"w-full px-4 py-3 text-left hover:bg-gray-50 transition-colors flex items-center justify-between "+(""===C?"bg-blue-50":""),children:[t.jsx("span",{children:"Todas las tiendas"}),""===C&&t.jsx(a,{className:"w-4 h-4 text-primary"})]})}),K.map(e=>t.jsx("li",{children:t.jsxs("button",{type:"button",onClick:()=>G(e.id),className:"w-full px-4 py-3 text-left hover:bg-gray-50 transition-colors flex items-center justify-between "+(C===e.id?"bg-blue-50":""),children:[t.jsx("span",{className:"truncate",children:e.name}),C===e.id&&t.jsx(a,{className:"w-4 h-4 text-primary flex-shrink-0 ml-2"})]})},e.id))]})})]}),t.jsxs("div",{className:"mb-5 relative",children:[t.jsxs("form",{onSubmit:J,role:"search",className:"relative w-full",children:[t.jsx("input",{ref:_,type:"search",name:"search",placeholder:"Buscar productos",value:o,onChange:e=>{return t=e.target.value,c(t),void(t.trim().length>=2?(p(t),$(!0)):(f(),$(!1)));var t},onKeyDown:e=>{P&&h.length>0?N&&N(e):"Enter"===e.key&&(e.preventDefault(),J(e))},onFocus:()=>{o.trim().length>=2&&(p(o),$(!0))},onBlur:()=>{setTimeout(()=>{$(!1)},200)},className:"w-full pr-12 py-3 pl-4 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary/20 focus:outline-none",enterKeyHint:"search",inputMode:"search",autoComplete:"off",role:"searchbox","aria-label":"Buscar productos"}),t.jsx("button",{type:"submit",className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors","aria-label":"Buscar",children:t.jsx(n,{className:"h-4 w-4"})})]}),t.jsx(y,{children:t.jsx(X,{suggestions:h,isLoading:x,onSelect:e=>{v(e),$(!1)},selectedIndex:w})})]}),"main"!==E&&t.jsxs("button",{onClick:()=>{if(T.length>0){const e=T[T.length-1];V(e.level,"left"),I(T.slice(0,-1))}else"subcategories"===E?V("categories","left"):"categories"===E&&V("main","left")},className:"flex items-center text-primary mb-4 font-medium",children:[t.jsx(i,{className:"h-5 w-5 mr-1"}),t.jsx("span",{children:"categories"===E?"Categorías":z})]}),t.jsx("div",{className:"pb-16",children:(()=>{if("main"===E)return t.jsxs("div",{className:"animate-fade animate-duration-300",children:[t.jsxs("button",{className:"px-4 py-2 mb-3 w-full flex justify-between items-center hover:bg-gray-50 active:bg-primary transition-all rounded-xl",onClick:()=>{V("categories","right")},children:[t.jsx("div",{className:"flex items-center",children:t.jsx("span",{className:"font-medium",children:"Categorías"})}),t.jsx(l,{className:"h-5 w-5 text-gray-400"})]}),t.jsx("div",{className:"space-y-2",children:d.map((e,s)=>e.menuable&&t.jsx("a",{href:e.path,className:"p-4 py-2 flex justify-between items-center w-full hover:bg-gray-50 active:bg-primary transition-all rounded-xl",children:t.jsx("span",{className:"font-medium",children:e.name})},s))})]});if("categories"===E){const e=[...u].sort((e,t)=>e.name.localeCompare(t.name,"es",{sensitivity:"base"}));return t.jsx("div",{className:"right"===B?"animate-fade-left animate-duration-300":"animate-fade-right animate-duration-300",children:t.jsx("div",{className:"space-y-2",children:e.map(e=>t.jsxs("div",{className:"px-4 py-2 rounded-xl flex justify-between items-center cursor-pointer hover:bg-gray-50 active:bg-primary transition-all",onClick:()=>(e=>{M(e.name),I([...T,{level:E,name:"Categorías"}]),V("subcategories","right",e.name)})(e),children:[t.jsx("span",{className:"font-medium",children:e.name}),t.jsx(l,{className:"h-5 w-5 text-gray-400"})]},e.id))})})}if("subcategories"===E&&z){const e=u.find(e=>e.name===z),s=e.subcategories?[...e.subcategories].sort((e,t)=>e.name.localeCompare(t.name,"es",{sensitivity:"base"})):[];return t.jsx("div",{className:"right"===B?"animate-fade-left animate-duration-300":"animate-fade-right animate-duration-300",children:t.jsx("div",{className:"space-y-2",children:s.map((e,s)=>t.jsxs("a",{href:`/catalogo?subcategory=${e.slug}`,className:"flex w-full px-4 py-2 rounded-xl justify-between items-center hover:bg-gray-50 active:bg-primary transition-all",children:[t.jsx("span",{className:"font-medium",children:e.name}),t.jsx(l,{className:"h-5 w-5 text-gray-400"})]},s))})})}})()}),t.jsx("div",{className:"absolute bottom-0 left-0 right-0 flex justify-center",children:t.jsx(g,{visible:!0})})]})]})})]})}const N=({items:r,data:i,cart:l,setCart:g,isUser:N,pages:k,generals:C=[]})=>{const[S,E]=e.useState(""),[L,z]=e.useState(!1),R=e.useRef(null),[D,M]=e.useState([]),[T,I]=e.useState(-1),B=Array.isArray(r?.stores)?r.stores:Array.isArray(r)?r:[],A=C.find(e=>"phone_whatsapp"===e.correlative),P=C.find(e=>"message_whatsapp"===e.correlative),$=A?.description??null,U=P?.description??null,[F,K]=e.useState(!1),[H,_]=e.useState(!1),[q,O]=e.useState(!1),[W,G]=e.useState(""),[J,X]=e.useState(!1),[V,Y]=e.useState(!1),[Q,Z]=e.useState([]),[ee,te]=e.useState(!1),[se,re]=e.useState(!1),[ae,ne]=e.useState(-1),ie=e.useRef([]),le=e.useRef(null),oe=e.useRef(null),ce=e.useRef(null),de=e.useRef(null),ue=e.useRef(null),me=e.useRef(null),he=e.useRef([]),xe=l.reduce((e,t)=>Number(e)+Number(t.quantity),0),pe=async e=>{if(!e.trim()||e.length<2)return Z([]),void te(!1);re(!0);try{const t=[["name","contains",e],"or",["summary","contains",e],"or",["description","contains",e]],s=S?[["store_id","=",S],"and",t]:t,r=await fetch("/api/items/paginate",{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({take:8,skip:0,filter:s,sort:[{selector:"name",desc:!1}],requireTotalCount:!1,with:"category,brand"})});if(!r.ok)throw new Error("Error en la búsqueda");const a=await r.json();200===a.status&&Array.isArray(a.data)?(Z(a.data),te(a.data.length>0)):(Z([]),te(!1))}catch(t){Z([]),te(!1)}finally{re(!1)}},fe=e=>{G(e),ne(-1),me.current&&clearTimeout(me.current),me.current=setTimeout(()=>{pe(e)},300)},ge=()=>{te(!1),Z([]),ne(-1)},be=e=>{if(e)if(te(!1),O(!1),e.slug)window.location.href=`/product/${e.slug}`;else{let t=`/catalogo?search=${encodeURIComponent(e.name)}`;if(S){const e=B.find(e=>e.id===S);t+=`&store=${encodeURIComponent(e?.slug||S)}`}window.location.href=t}};e.useEffect(()=>{function e(e){le.current&&!le.current.contains(e.target)&&X(!1),oe.current&&!oe.current.contains(e.target)&&(W.trim()||O(!1)),!ue.current||ue.current.contains(e.target)||de.current?.contains(e.target)||ce.current?.contains(e.target)||ge()}return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}},[W]),e.useEffect(()=>{function e(e){R.current&&!R.current.contains(e.target)&&z(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),e.useEffect(()=>{L&&I(-1)},[L]),e.useEffect(()=>{const e=Array.isArray(B)?B:[];M(e),I(-1)},[B]),e.useEffect(()=>{function e(e){if(L)if("ArrowDown"===e.key)e.preventDefault(),I(e=>Math.min(e+1,D.length));else if("ArrowUp"===e.key)e.preventDefault(),I(e=>Math.max(e-1,0));else if("Enter"===e.key){if(0===T)E(""),z(!1);else if(T>0&&T<=D.length){const e=D[T-1];e&&(E(e.id),z(!1))}}else"Escape"===e.key&&z(!1)}return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[L,D,T]),e.useEffect(()=>{const e=()=>{window.scrollY>0?Y(!0):Y(!1)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),e.useEffect(()=>{const e=e=>{"Escape"===e.key&&(ee?ge():q&&(O(!1),G("")))};return(q||ee)&&document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[q,ee]),e.useEffect(()=>()=>{me.current&&clearTimeout(me.current)},[]),e.useEffect(()=>{ae>=0&&he.current[ae]&&ue.current&&he.current[ae].scrollIntoView({block:"nearest",behavior:"smooth"})},[ae]);const ye={hidden:{opacity:0,y:-10,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:400,damping:25}},exit:{opacity:0,y:-10,scale:.95,transition:{duration:.15}}},je=[{icon:t.jsx(m,{size:16}),label:"Mi Perfil",href:"/profile"},{icon:t.jsx(u,{size:16}),label:"Mis Pedidos",href:"/customer/dashboard"},{icon:t.jsx(h,{size:16}),label:"Configuración",href:"/account"},{icon:t.jsx(d,{size:16}),label:"Cerrar Sesión",onClick:f}],ve=e=>{if(e.preventDefault(),ge(),W.trim()){const e=W.trim();let t=`/catalogo?search=${encodeURIComponent(e)}`;if(S){const e=B.find(e=>e.id===S);t+=`&store=${encodeURIComponent(e?.slug||S)}`}window.location.href=t}return!1},we=e=>{if(e.preventDefault(),ge(),W.trim()){const e=W.trim();O(!1);let t=`/catalogo?search=${encodeURIComponent(e)}`;if(S){const e=B.find(e=>e.id===S);t+=`&store=${encodeURIComponent(e?.slug||S)}`}window.location.href=t}return!1};function Ne(e){const t=ue.current,s=ie.current[e];if(!t||!s)return;const r=t.getBoundingClientRect(),a=s.getBoundingClientRect();a.top<r.top?t.scrollTop-=r.top-a.top:a.bottom>r.bottom&&(t.scrollTop+=a.bottom-r.bottom)}const ke=e=>{if(ee&&0!==Q.length)switch(e.key){case"ArrowDown":e.preventDefault(),ne(e=>{const t=e<Q.length-1?e+1:e;return setTimeout(()=>Ne(t),0),t});break;case"ArrowUp":e.preventDefault(),ne(e=>{const t=e>0?e-1:0;return setTimeout(()=>Ne(t),0),t});break;case"Enter":e.preventDefault(),ae>=0&&ae<Q.length?be(Q[ae]):W.trim()&&ve(e);break;case"Escape":te(!1)}},Ce=({suggestions:e,isLoading:s,onSelect:r,selectedIndex:a})=>ee?t.jsx(j.div,{ref:ue,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-lg shadow-lg z-[60] max-h-80 overflow-y-auto mt-1",children:s?t.jsx("div",{className:"p-4 text-center customtext-neutral-dark",children:t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx("div",{className:"w-4 h-4 border-2 border-primary border-t-transparent rounded-full animate-spin"}),"Buscando..."]})}):e.length>0?t.jsx("ul",{className:"py-2",children:e.map((e,s)=>t.jsx("li",{ref:e=>ie.current[s]=e,children:t.jsxs("button",{"data-suggestion-button":!0,onMouseDown:t=>{t.preventDefault(),t.stopPropagation(),setTimeout(()=>r(e),0)},className:"w-full px-4 py-3 text-left hover:bg-gray-50 transition-colors duration-200 flex items-center gap-3 "+(s===a?"bg-primary border-l-4 border-primary":""),type:"button",children:[t.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gray-100 rounded-lg overflow-hidden",children:e.image?t.jsx("img",{src:`/api/items/media/${e.image}`,alt:e.name,className:"w-full h-full object-cover",onError:e=>{e.target.style.display="none"}}):t.jsx("div",{className:"w-full h-full flex items-center justify-center customtext-neutral-dark",children:t.jsx(n,{size:16})})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("div",{className:"font-medium customtext-neutral-dark truncate",children:e.name}),e.category&&t.jsx("div",{className:"text-sm customtext-neutral-dark truncate",children:e.category.name}),e.final_price&&t.jsxs("div",{className:"text-sm font-semibold customtext-primary",children:[b()," ",parseFloat(e.final_price).toFixed(2)]})]})]})},e.id))}):t.jsx("div",{className:"p-4 text-center customtext-neutral-dark",children:"No se encontraron productos"})}):null;let Se=!1;if(N&&Array.isArray(N.roles)){const e=N.roles.map(e=>e.name?.toLowerCase());Se=!e.includes("admin")&&!e.includes("root")}return t.jsxs("header",{id:i?.element_id||null,className:"w-full top-0 left-0 z-50 transition-all duration-300 "+(V?"fixed bg-white shadow-lg":"relative bg-white"),children:[t.jsxs("div",{className:"px-primary  bg-white 2xl:px-0 2xl:max-w-7xl mx-auto py-4 font-font-secondary text-base font-semibold",children:[t.jsxs("div",{className:"flex items-center justify-between gap-4",children:[t.jsx("a",{href:"/",className:"flex items-center gap-2 z-[51]",children:t.jsx("img",{src:`/assets/resources/logo.png?v=${crypto.randomUUID()}`,alt:x.APP_NAME,className:"h-14 object-contain object-center",onError:e=>{e.target.onerror=null,e.target.src="/assets/img/logo-bk.svg"}})}),i?.showLoginCart&&t.jsxs("div",{className:"flex gap-8 lg:hidden",children:[t.jsxs("div",{className:(q?"hidden":"flex")+" items-center gap-4",children:[N?t.jsxs("div",{ref:le,className:"relative",children:[t.jsx("button",{"aria-label":"user",className:"flex items-center gap-2 hover:customtext-primary transition-all duration-300 relative group",onClick:()=>X(!J),children:t.jsx("div",{className:"relative transform group-hover:scale-105 transition-transform duration-200",children:N.uuid?t.jsxs("div",{className:"relative",children:[t.jsx(v,{uuid:N.uuid,name:N.name,lastname:N.lastname,className:"!w-6 !h-6 rounded-full object-cover border-2 border-primary ring-secondary transition-all duration-300"}),t.jsx("div",{className:"relative",style:{display:"none"},children:t.jsx(o,{className:"customtext-primary  border-primary rounded-full   ring-secondary transition-all duration-300",width:"1.5rem"})}),t.jsxs("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-primary border-2 border-white rounded-full animate-pulse",children:[t.jsx("div",{className:"w-full h-full bg-primary rounded-full animate-ping opacity-75 absolute"}),t.jsx("div",{className:"w-full h-full bg-primary rounded-full"})]})]}):t.jsxs("div",{className:"relative",children:[t.jsx(o,{className:"customtext-primary border-2 border-primary rounded-full  ring-secondary  transition-all duration-300",width:"1.5rem"}),t.jsxs("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-primary border-2 border-white rounded-full animate-pulse",children:[t.jsx("div",{className:"w-full h-full bg-primary rounded-full animate-ping opacity-75 absolute"}),t.jsx("div",{className:"w-full h-full bg-primary rounded-full"})]})]})})}),t.jsx(y,{children:J&&t.jsx(j.div,{initial:"hidden",animate:"visible",exit:"exit",variants:ye,className:"absolute z-50 top-full -left-20 bg-white shadow-xl border-t rounded-xl w-48 mt-2",children:t.jsx("div",{className:"p-4",children:t.jsx("ul",{className:"space-y-3",children:Se?je.map((e,s)=>t.jsx("li",{children:e.onClick?t.jsxs("button",{"aria-label":"menu-items",onClick:t=>{t.preventDefault(),t.stopPropagation(),X(!1),setTimeout(()=>{e.onClick()},150)},className:"flex w-full items-center gap-3 customtext-neutral-dark text-sm hover:customtext-primary hover:bg-gray-50 transition-all duration-300 p-2 rounded-lg",children:[e.icon,t.jsx("span",{children:e.label})]}):t.jsxs("a",{href:e.href,onClick:e=>{e.stopPropagation(),X(!1)},className:"flex items-center gap-3 customtext-neutral-dark text-sm hover:customtext-primary hover:bg-gray-50 transition-all duration-300 p-2 rounded-lg",children:[e.icon,t.jsx("span",{children:e.label})]})},s)):t.jsxs(t.Fragment,{children:[t.jsx("li",{children:t.jsxs("a",{href:"/admin/home",onClick:e=>{e.stopPropagation(),X(!1)},className:"flex items-center gap-3 customtext-neutral-dark text-sm hover:customtext-primary hover:bg-gray-50 transition-all duration-300 p-2 rounded-lg",children:[t.jsx(c,{size:16}),t.jsx("span",{children:"Dashboard"})]})}),t.jsx("li",{children:t.jsxs("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),X(!1),setTimeout(()=>{f()},150)},className:"flex w-full items-center gap-3 customtext-neutral-dark text-sm hover:customtext-primary hover:bg-gray-50 transition-all duration-300 p-2 rounded-lg",children:[t.jsx(d,{size:16}),t.jsx("span",{children:"Cerrar Sesión"})]})})]})})})})})]}):t.jsx("a",{href:"/iniciar-sesion",className:"flex items-center",children:t.jsx(o,{className:"customtext-primary",width:"1.5rem"})}),t.jsxs("button",{"aria-label":"",onClick:()=>K(!0),className:"flex items-center relative",children:[t.jsx(u,{className:"customtext-primary",width:"1.5rem"}),t.jsx("span",{className:"absolute -right-2 -top-2 inline-flex items-center justify-center w-4 h-4 bg-primary text-white rounded-full text-[8px]",children:xe})]})]}),t.jsx("button",{"aria-label":"Menú",onClick:()=>_(!H),className:"flex md:hidden items-center justify-center bg-primary rounded-lg w-auto h-auto p-2 text-white fill-white transition-all duration-300 ",children:H?t.jsx(s,{}):t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[t.jsx("path",{d:"M10 5H20",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),t.jsx("path",{d:"M4 12H20",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),t.jsx("path",{d:"M4 19H14",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})})]}),t.jsx("div",{className:"hidden md:block relative w-full max-w-xl mx-auto",children:t.jsx("form",{onSubmit:ve,role:"search",className:"relative w-full",children:t.jsxs("div",{className:"w-full",children:[t.jsxs("div",{className:"flex items-center bg-white py-2 pr-2 rounded-full shadow-sm border overflow-visible",style:{boxShadow:"0 6px 18px rgba(16,24,40,0.06)"},children:[t.jsxs("div",{className:"relative flex items-center pl-2 pr-1",ref:R,children:[t.jsxs("button",{type:"button",onClick:()=>z(e=>!e),"aria-haspopup":"listbox","aria-expanded":L,className:"h-10 flex items-center gap-2 pl-4 pr-3 bg-transparent border-none rounded-l-full font-normal customtext-neutral-dark focus:outline-none text-sm cursor-pointer",children:[t.jsx("span",{className:"truncate max-w-[140px] text-sm",children:S?B.find(e=>e.id==S)?.name??S:"Todas las tiendas"}),t.jsx("svg",{className:"w-3 h-3 transition-transform "+(L?"rotate-180":""),viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.24a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z",clipRule:"evenodd"})})]}),L&&t.jsx("div",{className:"absolute top-10 left-0 mt-2 w-[200px] bg-white rounded-md shadow-lg z-[70] py-1 max-h-64 overflow-hidden text-sm border",children:t.jsxs("ul",{role:"listbox",tabIndex:-1,className:"max-h-56 overflow-auto py-1",children:[t.jsxs("li",{className:"px-4 py-2 cursor-pointer flex items-center justify-between "+(""===S?"bg-gray-100":"hover:bg-gray-100"),onMouseEnter:()=>I(0),onClick:()=>{E(""),z(!1)},children:[t.jsx("span",{children:"Todas las tiendas"}),""===S&&t.jsx(a,{className:"text-primary w-4 h-4"})]}),Array.isArray(D)&&D.map((e,s)=>t.jsxs("li",{className:"px-4 py-2 cursor-pointer truncate flex items-center justify-between "+(T===s+1?"bg-gray-100":"hover:bg-gray-100"),onMouseEnter:()=>I(s+1),onClick:()=>{E(e.id),z(!1)},children:[t.jsx("span",{className:"truncate pr-2",children:e.name}),S===e.id&&t.jsx(a,{className:"text-primary w-4 h-4"})]},e.id||s))]})})]}),t.jsxs("div",{className:"flex-1 relative",children:[t.jsx("input",{ref:de,type:"search",name:"search",placeholder:"Estoy buscando...",value:W,onChange:e=>fe(e.target.value),onKeyDown:ke,onFocus:()=>{W.trim().length>=2&&pe(W)},className:"w-full h-10 pl-3 pr-12 bg-transparent text-sm placeholder:customtext-neutral-dark focus:outline-none",enterKeyHint:"search",inputMode:"search",autoComplete:"off",role:"searchbox","aria-label":"Estoy buscando..."}),t.jsx("button",{type:"submit",className:`absolute right-2 top-1/2 transform -translate-y-1/2 p-2 ${i?.backgroundColor?i?.backgroundColor:"bg-primary"} text-white rounded-lg hover:bg-primary hover:scale-105  transition-all duration-300`,"aria-label":"Buscar",children:t.jsx(n,{})})]})]}),t.jsx("div",{className:"relative",children:t.jsx("div",{className:"absolute left-0 right-0 mt-2 z-50",children:t.jsx(y,{children:t.jsx(Ce,{suggestions:Q,isLoading:se,onSelect:be})})})})]})})}),i?.showLoginCart?t.jsxs("div",{className:"hidden md:flex items-center gap-4 relative text-sm",children:[t.jsxs("div",{ref:le,children:[N?t.jsxs("button",{"aria-label":"user",className:"customtext-neutral-dark flex items-center gap-2 hover:customtext-primary pr-6 transition-all duration-300 relative group",onClick:()=>X(!J),children:[t.jsx("div",{className:"relative transform group-hover:scale-105 transition-transform duration-200",children:N.uuid?t.jsxs("div",{className:"relative",children:[t.jsx(v,{uuid:N.uuid,name:N.name,lastname:N.lastname,className:"w-8 h-8 rounded-full object-cover border-2 border-primary ring-secondary transition-all duration-300"}),t.jsxs("div",{className:"absolute -bottom-[-0.115rem] -right-0.5 w-3.5 h-3.5 bg-primary border-2 border-white rounded-full animate-pulse",children:[t.jsx("div",{className:"w-full h-full bg-primary rounded-full animate-ping opacity-75 absolute"}),t.jsx("div",{className:"w-full h-full bg-primary rounded-full"})]})]}):t.jsxs("div",{className:"relative",children:[t.jsx(o,{className:"customtext-primary border-2 border-primary rounded-full  ring-secondary group-hover:ring-green-300 transition-all duration-300"}),t.jsxs("div",{className:"absolute -bottom-0.5 -right-0.5 w-3.5 h-3.5 bg-primary border-2 border-white rounded-full animate-pulse",children:[t.jsx("div",{className:"w-full h-full bg-primary rounded-full animate-ping opacity-75 absolute"}),t.jsx("div",{className:"w-full h-full bg-primary rounded-full"})]})]})}),t.jsx("span",{className:"hidden md:inline",children:N.name})]}):t.jsxs("a",{href:"/iniciar-sesion",className:"flex items-center gap-2 text-sm hover:customtext-primary transition-colors duration-300",children:[t.jsx(o,{className:"customtext-primary"}),t.jsx("span",{className:"hidden md:inline",children:"Iniciar Sesión"})]}),t.jsx(y,{children:J&&t.jsx(j.div,{initial:"hidden",animate:"visible",exit:"exit",variants:ye,className:"absolute z-50 top-full left-0 bg-white shadow-xl border-t rounded-xl w-48 mt-2",children:t.jsx("div",{className:"p-4",children:t.jsx("ul",{className:"space-y-4",children:Se?je.map((e,s)=>t.jsx("li",{children:e.onClick?t.jsxs("button",{"aria-label":"menu-items",onClick:t=>{t.preventDefault(),t.stopPropagation(),X(!1),setTimeout(()=>{e.onClick()},150)},className:"flex w-full items-center gap-3 customtext-neutral-dark text-sm hover:customtext-primary hover:bg-gray-50 transition-all duration-300 p-2 rounded-lg",children:[e.icon,t.jsx("span",{children:e.label})]}):t.jsxs("a",{href:e.href,onClick:e=>{e.stopPropagation(),X(!1)},className:"flex items-center gap-3 customtext-neutral-dark text-sm hover:customtext-primary hover:bg-gray-50 transition-all duration-300 p-2 rounded-lg",children:[e.icon,t.jsx("span",{children:e.label})]})},s)):t.jsxs(t.Fragment,{children:[t.jsx("li",{children:t.jsxs("a",{href:"/admin/home",onClick:e=>{e.stopPropagation(),X(!1)},className:"flex items-center gap-3 customtext-neutral-dark text-sm hover:customtext-primary hover:bg-gray-50 transition-all duration-300 p-2 rounded-lg",children:[t.jsx(c,{size:16}),t.jsx("span",{children:"Dashboard"})]})}),t.jsx("li",{children:t.jsxs("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),X(!1),setTimeout(()=>{f()},150)},className:"flex w-full items-center gap-3 customtext-neutral-dark text-sm hover:customtext-primary hover:bg-gray-50 transition-all duration-300 p-2 rounded-lg",children:[t.jsx(d,{size:16}),t.jsx("span",{children:"Cerrar Sesión"})]})})]})})})})})]}),t.jsxs("button",{"aria-label":"cart",onClick:()=>K(!0),className:"flex items-center gap-2 text-sm relative hover:customtext-primary transition-colors duration-300",children:[t.jsx("div",{className:"customtext-primary",children:t.jsx(u,{})}),t.jsx("span",{className:"hidden md:inline",children:"Mi Carrito"}),t.jsx("span",{className:"absolute -right-6 -top-2 inline-flex items-center justify-center w-5 h-5 text-xs bg-primary text-white rounded-full",children:xe})]})]}):t.jsxs(t.Fragment,{children:[t.jsx("a",{"aria-label":"primary-button",className:`${i.class?i.class:"bg-primary"} hidden lg:block px-6 py-2.5 text-white font-medium rounded-3xl hover:brightness-125 transition-colors duration-300`,target:"_blank",rel:"noopener noreferrer",href:$&&U?`https://api.whatsapp.com/send?phone=${encodeURIComponent($)}&text=${encodeURIComponent(U)}`:"#",children:"Haz tu pedido"}),t.jsx("div",{className:"md:hidden relative w-full max-w-xl mx-auto",children:q?t.jsxs("div",{className:"relative w-full",children:[t.jsxs("form",{onSubmit:we,role:"search",children:[t.jsx("input",{ref:ce,type:"search",name:"search",placeholder:"Buscar productos",value:W,onChange:e=>fe(e.target.value),onKeyDown:ke,onFocus:()=>{W.trim().length>=2&&pe(W)},className:"w-full pr-14 py-4 pl-4 border rounded-full focus:ring-0 focus:outline-none",autoFocus:!0,enterKeyHint:"search",inputMode:"search",autoComplete:"off",role:"searchbox","aria-label":"Buscar productos",onBlur:()=>{setTimeout(()=>{W.trim()||ee||O(!1)},200)}}),t.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex gap-2",children:[t.jsx("button",{type:"button",onClick:()=>{G(""),ge(),O(!1)},className:"p-2 bg-gray-200 text-gray-600 rounded-lg hover:bg-gray-300 transition-colors","aria-label":"Cerrar búsqueda",children:t.jsx(s,{size:16})}),t.jsx("button",{type:"submit",className:`p-2 ${i?.backgroundColor||"bg-primary"} text-white rounded-lg hover:bg-primary transition-colors`,"aria-label":"Buscar",children:t.jsx(n,{size:16})})]})]}),t.jsx("div",{className:"relative",children:t.jsx("div",{className:"absolute left-0 right-0 mt-2 z-50",children:t.jsx(y,{children:t.jsx(Ce,{suggestions:Q,isLoading:se,onSelect:be,selectedIndex:ae})})})})]}):t.jsx("button",{"aria-label":"Buscar productos",onClick:()=>{O(!0),setTimeout(()=>{ce.current&&ce.current.focus()},100)},className:"flex items-center justify-end w-full px-0 py-3",children:t.jsx(n,{className:"customtext-primary",size:28})})})]})]}),i?.mobileSearch&&!(()=>{try{const e=window.location.pathname||"";return["/cart","/checkout"].some(t=>e.includes(t))}catch(e){return!1}})()&&t.jsx("div",{className:"block md:hidden mt-6 space-y-4",children:t.jsxs("div",{className:"w-full relative",children:[t.jsxs("form",{onSubmit:we,role:"search",className:"relative w-full",children:[t.jsx("input",{type:"search",name:"search",placeholder:"Buscar productos...",value:W,onChange:e=>fe(e.target.value),onKeyDown:ke,onFocus:()=>{W.trim().length>=2&&pe(W)},className:"w-full pr-14 py-3 font-normal pl-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent focus:outline-none bg-gray-50",enterKeyHint:"search",inputMode:"search",autoComplete:"off",role:"searchbox","aria-label":"Buscar productos"}),t.jsx("button",{type:"submit",className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors","aria-label":"Buscar",children:t.jsx(n,{size:18})})]}),t.jsx("div",{className:"relative",children:t.jsx("div",{className:"absolute left-0 right-0 mt-2 z-50",children:t.jsx(y,{children:t.jsx(Ce,{suggestions:Q,isLoading:se,onSelect:be,selectedIndex:ae})})})})]})})]}),t.jsx(y,{children:H&&t.jsx(j.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},className:"lg:hidden bg-transparent text-textWhite shadow-lg w-full min-h-screen absolute z-10 top-20",children:t.jsx(w,{search:W,setSearch:G,pages:k,items:r,onClose:()=>_(!H),searchSuggestions:Q,isLoadingSuggestions:se,fetchSearchSuggestions:pe,clearSuggestions:ge,selectSuggestion:be,selectedSuggestionIndex:ae,handleKeyDown:ke,stores:B,selectedStore:S,setSelectedStore:E})})}),t.jsx(p,{data:i,cart:l,setCart:g,modalOpen:F,setModalOpen:K})]})};export{N as default};
