var X=Object.defineProperty;var Y=(l,n,i)=>n in l?X(l,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):l[n]=i;var F=(l,n,i)=>Y(l,typeof n!="symbol"?n+"":n,i);import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as c}from"./index-BOnQTV8N.js";import"./ProductNavigation-CqDh3VCY.js";import{I as ee}from"./ItemsRest-Dp5IKigO.js";import{N as se}from"./NoResult-DlL_OOrq.js";import{P as ae}from"./ProductCardScraping-B0iVrsDt.js";import"./cookies-Nt1ZI17y.js";import{m as y}from"./main-B6F2O9-U.js";import{C as R}from"./Number2Currency-D9Rjvh76.js";import{C as te}from"./chevron-left-JcR9Fe4w.js";import{C as re}from"./chevron-right-Cug7tVUE.js";import{F as ie}from"./filter-BEzH_gaL.js";import{C as _}from"./chevron-down-uIVDLcM-.js";import{S as q}from"./search-BQ59Robe.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./ProductCard-D_AgkLlk.js";import"./HeaderSearch-CLQ4L3XU.js";import"./PolicyModal-C80IvD61.js";import"./index-B6ujFmsw.js";import"./index-Chjiymov.js";import"./CartItemRow-Lh5OenLf.js";import"./tippy-react.esm-DmkRJDEW.js";import"./index-pSueRYGM.js";import"./proxy-B0QLMKEh.js";import"./package-DBFPPBi1.js";import"./createLucideIcon-DfjclApS.js";import"./trash-2-DU7LB6-f.js";import"./plus-CTIomuuF.js";import"./index-BZvh78jk.js";import"./eye-ScgfreHn.js";import"./BasicRest-BML1C-ua.js";import"./CardProductKatya-ncpmQ0JU.js";import"./BooleanLimit-D-OsQsek.js";import"./index.esm-D6GvEWn_.js";import"./index-BQJyKPGC.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./General-BmbBKdsB.js";class ${}F($,"getProducts",async n=>{console.log(n);try{const{query:i,proveedor:h,page:f,limit:d=12}=n,{status:g,result:o}=await y.Fetch("./api/scrap",{method:"POST",body:JSON.stringify({query:i,proveedor:h,page:f,limit:d})});return g?(y.Notify.add({icon:"/assets/img/icon.svg",title:"Operación correcta",body:"Se obtuvieron los productos correctamente"}),{data:o.data||[],filters:o.filters||[],hasMore:o.data.length===d}):(console.log((o==null?void 0:o.message)||"Error al obtener datos"),{data:[],hasMore:!1})}catch(i){return y.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:i.message,type:"danger"}),{data:[],filters:[],hasMore:!1}}}),F($,"getPaginatedProducts",async n=>{try{const{query:i,proveedor:h,page:f,limit:d=10}=n,{status:g,result:o}=await y.Fetch("./api/scrap",{method:"POST",body:JSON.stringify({query:i,proveedor:h,page:f,limit:d})});return g?{data:o.data||[],hasMore:o.data.length===d}:(console.log((o==null?void 0:o.message)||"Error al obtener más datos"),{data:[],hasMore:!1})}catch(i){return y.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:i.message,type:"danger"}),{data:[],hasMore:!1}}});new ee;const oe=()=>e.jsx("div",{className:"group font-paragraph animate-pulse w-full transition-transform duration-300 hover:scale-105  sm:w-1/3 flex-shrink-0 font-paragraph customtext-primary cursor-pointer",children:e.jsx("div",{className:" px-4",children:e.jsx("div",{className:"bg-white rounded-3xl",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"aspect-square bg-gray-300 rounded-3xl overflow-hidden flex items-center justify-center  bg-secondary",children:e.jsx("svg",{class:"w-10 h-10 text-gray-200 ","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 18",children:e.jsx("path",{d:"M18 0H2a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2Zm-5.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm4.376 10.481A1 1 0 0 1 16 15H4a1 1 0 0 1-.895-1.447l3.5-7A1 1 0 0 1 7.468 6a.965.965 0 0 1 .9.5l2.775 4.757 1.546-1.887a1 1 0 0 1 1.618.1l2.541 4a1 1 0 0 1 .028 1.011Z"})})})})})})}),Ue=({items:l,data:n,filteredData:i,cart:h,setCart:f})=>{const{categories:d,brands:g,priceRanges:o}=i,[x,H]=c.useState({marca:!0,precio:!0,categoria:!0,colores:!1}),[u,A]=c.useState({category_id:[],brand_id:[],subcategory_id:[],price:null,name:null,sort_by:"created_at",order:"desc"}),[j,E]=c.useState([]),[T,M]=c.useState(!1),[ne,V]=c.useState({currentPage:1,totalPages:1}),L=async(s,a,r=1)=>{if(!s){alert("Por favor, ingresa un término de búsqueda");return}M(!0);try{const t=await $.getProducts({query:s,proveedor:a,page:r});E(r===1?t.data:m=>[...m,...t.data]),V({currentPage:t.currentPage,totalPages:t.lastPage}),console.log(t.data)}catch(t){console.error("Error:",t),alert("Hubo un error al realizar la búsqueda. Por favor, intenta nuevamente.")}finally{M(!1)}},[v,Z]=c.useState(""),[C,J]=c.useState("nike");c.useEffect(()=>{const s=new URLSearchParams(window.location.search),a=s.get("category");if(a){const r=d.find(t=>t.slug===a);r&&A(t=>({...t,category_id:[r.id]}))}Z(s.get("search")),J(s.get("provider")),v&&L(v,C)},[l]);const b=(s,a)=>{A(r=>{if(s==="price")return{...r,price:r.price&&r.price.min===a.min&&r.price.max===a.max?null:a};const t=Array.isArray(r[s])?r[s]:[],m=t.includes(a)?t.filter(w=>w!==a):[...t,a];return{...r,[s]:m}})},P=s=>{H(a=>({...a,[s]:!a[s]}))},[B,z]=c.useState(""),[O,D]=c.useState(""),U=d.filter(s=>s.name.toLowerCase().includes(B.toLowerCase())),G=g.filter(s=>s.name.toLowerCase().includes(O.toLowerCase())),[p,N]=c.useState(1),S=12,I=p*S,K=I-S,Q=Array.isArray(j)?j.slice(K,I):[],k=Math.ceil(j.length/S),W=s=>N(s);return e.jsx("section",{className:"py-12 bg-[#F7F9FB] font-paragraph",children:e.jsxs("div",{className:"mx-auto px-primary",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8 pb-4 border-b-2",children:[e.jsx("h2",{className:"text-4xl font-bold w-6/12",children:"Todos los productos"}),e.jsx("div",{className:"flex items-center gap-4 w-5/12",children:e.jsx("div",{className:"flex justify-end items-center mb-4 w-full",children:e.jsx("div",{className:"customtext-neutral-dark font-semibold",children:e.jsxs("nav",{class:"flex items-center gap-x-2 min-w-max",children:[e.jsx("button",{class:" p-4 inline-flex items-center",onClick:()=>{N(p-1)},disabled:p===1,children:e.jsx(te,{})}),e.jsx("ul",{className:"list-none flex gap-2",children:[...Array(k).keys()].map(s=>e.jsx("li",{className:`page-item ${p===s+1?"active":""}`,children:e.jsx("button",{onClick:()=>W(s+1),class:`w-10 h-10  p-2 inline-flex items-center justify-center rounded-full transition-all duration-300  hover:text-white hover:bg-primary ${p===s+1?"bg-primary text-white":" bg-transparent"}`,"aria-current":"page",children:s+1})},s+1))}),e.jsx("button",{class:" p-4 inline-flex items-center ",onClick:()=>{const s=p+1;s<=k?N(s):(N(s),L(v,C,s)),console.log("Página solicitada:",s)},disabled:p===k&&C==="invictastores",children:e.jsx(re,{})})]})})})})]}),e.jsxs("div",{className:"relative flex gap-4",children:[e.jsxs("div",{className:"w-3/12 bg-white p-4 rounded-lg h-max",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Filtros"}),e.jsx(ie,{className:"h-5 w-5"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>P("marca"),className:"flex items-center justify-between w-full mb-4",children:[e.jsx("span",{className:"font-medium",children:"Marca"}),e.jsx(_,{className:`h-5 w-5 transform transition-transform ${x.marca?"":"-rotate-180"}`})]}),x.marca&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar",className:"w-full px-4 pl-10 py-3 border customtext-neutral-dark  border-neutral-ligth rounded-xl focus:ring-0 focus:outline-0   transition-all duration-300",value:O,onChange:s=>D(s.target.value)})]}),e.jsx("div",{className:"space-y-3",children:G.map(s=>e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300",onChange:()=>b("brand_id",s.id)}),e.jsx("span",{children:s.name})]},s.id))})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>P("precio"),className:"flex items-center justify-between w-full mb-4",children:[e.jsx("span",{className:"font-medium",children:"Precio"}),e.jsx(_,{className:`h-5 w-5 transform transition-transform ${x.precio?"":"-rotate-180"}`})]}),x.precio&&e.jsx("div",{className:"space-y-3",children:o.map(s=>e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",name:"precio",className:"h-4 w-4 rounded border-gray-300",onChange:()=>b("price",s),checked:u.price&&u.price.min===s.min&&u.price.max===s.max}),e.jsx("span",{children:`${R()} ${s.min} - ${R()} ${s.max}`})]},`${s.min}-${s.max}`))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>P("categoria"),className:"flex items-center justify-between w-full mb-4",children:[e.jsx("span",{className:"font-medium",children:"Categoría"}),e.jsx(_,{className:`h-5 w-5 transform transition-transform ${x.categoria?"":"-rotate-180"}`})]}),x.categoria&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar",className:"w-full px-4 pl-10 py-3 border customtext-neutral-dark  border-neutral-ligth rounded-xl focus:ring-0 focus:outline-0   transition-all duration-300",value:B,onChange:s=>z(s.target.value)})]}),U.map(s=>{var a,r,t;return e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300",onChange:()=>b("category_id",s.id),checked:(a=u.category_id)==null?void 0:a.includes(s.id)}),e.jsx("span",{children:s.name})]}),((r=u.category_id)==null?void 0:r.includes(s.id))&&((t=s.subcategories)==null?void 0:t.length)>0&&e.jsx("ul",{className:"ml-6 mt-2 space-y-2",children:s.subcategories.map(m=>{var w;return e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300",onChange:()=>b("subcategory_id",m.id),checked:(w=u.subcategory_id)==null?void 0:w.includes(m.id)}),e.jsx("span",{children:m.name})]},m.id)})})]},s.id)})]})]}),e.jsx("button",{className:"w-full bg-primary text-white py-3 rounded-xl hover:brightness-90 transition-colors text-sm font-bold",children:"Aplicar Filtro"})]}),e.jsx("div",{className:"w-9/12",children:T?e.jsx("div",{className:"flex items-center flex-wrap gap-y-8 transition-all duration-300 ease-in-out",children:[1,2,3,4,5,6,7,8,9,10,11,12].map(s=>e.jsx(oe,{},s))}):e.jsx("div",{className:"flex items-center flex-wrap gap-y-8 transition-all duration-300 ease-in-out",children:Array.isArray(j)&&j.length>0?Q.map((s,a)=>e.jsx(ae,{product:s,widthClass:"lg:w-1/3",cart:h,setCart:f},a)):e.jsx(se,{})})})]})]})})};export{Ue as default};
