import{r as e,j as a,b3 as t,a6 as s,a7 as r,o as l,an as i,L as n,G as c,M as o}from"./vendor-react-CtPXetfm.js";import{t as d}from"./OpenPayCardModal-Dy4WIZ0X.js";import{M as p}from"./MessagesRest-5rxJ1Fyf.js";import{G as m}from"./Footer-coriRrmf.js";import{m as u}from"./vendor-motion-CThzL09Q.js";import"./vendor-swiper-Cr_RrIb_.js";import"./BasicRest-DpoFkM_z.js";import"./BooleanLimit-q2Ad9fGY.js";const x=new p,h=({data:p,contacts:h})=>{const b=e=>h.find(a=>a.correlative===e)?.description||"",g=h.find(e=>"location"==e.correlative)?.description??"0,0",j={lat:Number(g.split(",").map(e=>e.trim())[0]),lng:Number(g.split(",").map(e=>e.trim())[1])},f=e.useRef(),v=e.useRef(),N=e.useRef(),y=e.useRef(),[w,k]=e.useState(!1),[E,M]=e.useState(""),[S,$]=e.useState(""),[_,C]=e.useState([]),[D,F]=e.useState(!0),[O,A]=e.useState(null),[P,T]=e.useState({}),[R,q]=e.useState(null);e.useEffect(()=>{(async()=>{try{F(!0);const e=await fetch("/api/stores"),a=await e.json();let t=a;if(a.data?t=a.data:a.body&&(t=a.body),Array.isArray(t)){const e=t.filter(e=>!1!==e.status);C(e);const a=e.find(e=>"tienda_principal"===e.type);a&&q(a);const s=e.reduce((e,a)=>{const t=a.type||"otro";return e[t]||(e[t]=[]),e[t].push(a),e},{});T(s)}else C([]),T({})}catch(e){C([]),T({})}finally{F(!1)}})()},[]);const I=e=>{const a=e.replace(/\D/g,"");return 9!==a.length?"El teléfono debe tener 9 dígitos":a.startsWith("9")?"":"Solo se aceptan celulares peruanos (empiezan con 9)"},L="!rounded-none !border-x-0 !border-t-0 border-b border-neutral-900 !px-0 py-4 bg-transparent focus:!ring-0 focus:!outline-none focus:!border-x-0 focus:!border-t-0 focus:border-b-2 text-xs uppercase tracking-widest placeholder:text-neutral-300 transition-all font-medium w-full",z="text-[10px] font-black uppercase tracking-[0.2em] text-neutral-400 mb-2 block";return a.jsx("section",{id:p?.element_id,className:"bg-white min-h-screen pt-20 pb-32",children:a.jsxs("div",{className:"container mx-auto px-4 md:px-6 2xl:px-0 2xl:max-w-7xl",children:[a.jsx("div",{className:"mb-20",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-8 mb-12 border-b-4 border-black pb-8",children:[a.jsxs("div",{className:"max-w-3xl",children:[a.jsx("span",{className:"text-[10px] font-bold uppercase tracking-[0.3em] text-neutral-400 mb-4 block",children:"Contáctanos"}),a.jsx("h1",{className:"text-4xl md:text-6xl font-black uppercase tracking-tighter leading-none",children:p?.title||"Hablemos Hoy"})]}),a.jsx("div",{className:"hidden md:block",children:a.jsx("p",{className:"text-right text-xs font-bold uppercase tracking-widest opacity-60 max-w-xs leading-relaxed",children:p?.description||"¿Tienes preguntas? Estamos aquí para ayudarte."})})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-16",children:[a.jsxs("div",{className:"lg:col-span-4 order-2 lg:order-1 space-y-12",children:[a.jsxs(u.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"border-4 border-black p-8 hover:bg-black hover:text-white transition-all duration-300 group",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsx(t,{className:"w-6 h-6 group-hover:text-white transition-colors"}),a.jsx("h3",{className:"text-lg font-black uppercase tracking-wider",children:"Tienda Principal"})]}),a.jsx("p",{className:"text-sm font-bold uppercase tracking-widest opacity-80 leading-relaxed group-hover:opacity-100",children:R?R.address:b("address")})]}),a.jsxs(u.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.1},className:"border-4 border-black p-8 hover:bg-black hover:text-white transition-all duration-300 group",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsx(s,{className:"w-6 h-6 group-hover:text-white transition-colors"}),a.jsx("h3",{className:"text-lg font-black uppercase tracking-wider",children:"Email"})]}),a.jsx("div",{className:"space-y-2",children:(e=>{const a=b(e);return a?a.split(",").map(e=>e.trim()).filter(e=>e):[]})("email_contact").map((e,t)=>a.jsx("a",{href:`mailto:${e}`,className:"text-sm font-bold uppercase tracking-widest block hover:underline",children:e},t))})]}),a.jsxs(u.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.2},className:"border-4 border-black p-8 hover:bg-black hover:text-white transition-all duration-300 group",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsx(r,{className:"w-6 h-6 group-hover:text-white transition-colors"}),a.jsx("h3",{className:"text-lg font-black uppercase tracking-wider",children:"Teléfono"})]}),a.jsx("div",{className:"space-y-2",children:(e=>{const a=b(e);return a?a.split(",").map(e=>e.trim()).filter(e=>e):[]})("phone_contact").map((e,t)=>a.jsx("a",{href:`tel:${e}`,className:"text-sm font-bold uppercase tracking-widest block hover:underline",children:e},t))})]})]}),a.jsx("div",{className:"lg:col-span-8 order-1 lg:order-2",children:a.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),w)return;const a=E.replace(/\D/g,""),t=I(E);if(t)return $(t),void d.error("Error de validación",{description:t});k(!0);const s={name:f.current.value,phone:a,email:N.current.value,description:y.current.value},r=await x.save(s);f.current&&(f.current.value=""),v.current&&(v.current.value=""),M(""),$(""),N.current&&(N.current.value=""),y.current&&(y.current.value=""),d.success("Mensaje enviado",{description:"Tu mensaje ha sido enviado correctamente. ¡Nos pondremos en contacto contigo pronto!"}),k(!1),r&&p?.redirect&&(g.href=p?.redirect)},className:"space-y-12",children:[a.jsxs("div",{className:"flex items-center gap-4 border-b border-neutral-900 pb-4 mb-8",children:[a.jsx("span",{className:"text-xs font-black uppercase tracking-tighter italic opacity-30",children:"01"}),a.jsx("h2",{className:"text-xl font-bold uppercase tracking-tighter",children:"Envíanos un Mensaje"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 lg:gap-12",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:z,children:"Nombre Completo"}),a.jsx("input",{ref:f,disabled:w,type:"text",name:"name",placeholder:"EJ. JOHN DOE",className:L,required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:z,children:"Teléfono (9 Dígitos)"}),a.jsx("input",{ref:v,disabled:w,type:"tel",name:"phone",placeholder:"999 999 999",value:E,onChange:e=>{const a=(e=>{const a=e.replace(/\D/g,"").slice(0,9);return a.length<=3?a:a.length<=6?`${a.slice(0,3)} ${a.slice(3)}`:`${a.slice(0,3)} ${a.slice(3,6)} ${a.slice(6)}`})(e.target.value),t=I(a);M(a),$(t),v.current&&(v.current.value=a.replace(/\D/g,""))},maxLength:11,className:`${L} ${S?"border-red-500 text-red-500":""}`,required:!0}),S&&a.jsx("p",{className:"text-[10px] text-red-500 mt-1 font-bold uppercase tracking-wider",children:S})]}),a.jsxs("div",{children:[a.jsx("label",{className:z,children:"Correo Electrónico"}),a.jsx("input",{ref:N,disabled:w,type:"email",name:"email",placeholder:"EMAIL@EJEMPLO.COM",className:L,required:!0})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:z,children:"Mensaje"}),a.jsx("textarea",{ref:y,disabled:w,name:"message",placeholder:"¿CÓMO PODEMOS AYUDARTE?",rows:"6",className:`${L} resize-none`,required:!0})]})]}),a.jsx("div",{className:"flex justify-end pt-8",children:a.jsx("button",{type:"submit",disabled:w,className:"px-12 py-5 text-[10px] font-bold uppercase tracking-[0.2em] bg-black text-white hover:brightness-125 disabled:bg-neutral-200 disabled:text-neutral-400 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-4 group w-full md:w-auto",children:w?a.jsxs(a.Fragment,{children:[a.jsx(l,{className:"animate-spin w-4 h-4"}),"Enviando..."]}):a.jsxs(a.Fragment,{children:["Enviar Mensaje",a.jsx(i,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]})})})]})})]}),a.jsxs("div",{className:"mt-32",children:[a.jsxs("div",{className:"flex items-center gap-4 border-b-4 border-black pb-8 mb-12",children:[a.jsx("span",{className:"text-xs font-black uppercase tracking-tighter italic opacity-30",children:"02"}),a.jsx("h2",{className:"text-xl md:text-3xl font-black uppercase tracking-tighter",children:p?.title_ubication||"Nuestras Ubicaciones"})]}),a.jsxs("div",{className:"relative border-4 border-black h-[500px] w-full bg-neutral-100 overflow-hidden",children:[D&&a.jsx("div",{className:"absolute inset-0 bg-white/80 flex items-center justify-center z-10",children:a.jsx(l,{className:"w-8 h-8 animate-spin"})}),a.jsx(n,{googleMapsApiKey:m.GMAPS_API_KEY,children:a.jsxs(c,{mapContainerStyle:{width:"100%",height:"100%"},zoom:O?16:p?.stores_support&&_.length>0?12:16,center:O&&O.latitude&&O.longitude?{lat:parseFloat(O.latitude),lng:parseFloat(O.longitude)}:j,options:{styles:[{featureType:"all",elementType:"all",stylers:[{saturation:-100}]}]},children:[a.jsx(o,{position:R&&R.latitude&&R.longitude?{lat:parseFloat(R.latitude),lng:parseFloat(R.longitude)}:j,title:R?R.name:"Sede Principal",onClick:()=>A(R)}),p?.stores_support&&_.filter(e=>e.latitude&&e.longitude&&"0"!==e.latitude&&"0"!==e.longitude&&"tienda_principal"!==e.type).map(e=>a.jsx(o,{position:{lat:parseFloat(e.latitude),lng:parseFloat(e.longitude)},title:e.name,onClick:()=>A(e)},e.id))]})})]})]})]})})};export{h as default};
