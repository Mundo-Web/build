var S=Object.defineProperty;var I=(o,r,c)=>r in o?S(o,r,{enumerable:!0,configurable:!0,writable:!0,value:c}):o[r]=c;var j=(o,r,c)=>I(o,typeof r!="symbol"?r+"":r,c);import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{B as T}from"./Base-BBEfqqc-.js";import{S as z}from"./SwitchFormGroup-DXN0cwVk.js";import{T as G}from"./TextareaFormGroup-CliirJM1.js";import{r as n}from"./index-BOnQTV8N.js";import{c as _}from"./ReactAppend-QR5TrZfj.js";import{S as M}from"./CartKuchara-D9l7c7at.js";import{B as A}from"./BasicRest-BML1C-ua.js";import{B as W}from"./BasicEditing-TVz-VY9q.js";import{I as q}from"./InputFormGroup-iZIO11ZN.js";import{M as O}from"./Modal-xDw9ufjg.js";import{T as U}from"./Table-hR1LHIgy.js";import{D as R}from"./DxButton-DV0H-ZcL.js";import{C as V,F as t}from"./CreateReactScript-d60iGIqA.js";import{R as F}from"./ReactAppend-Vm5G2nof.js";import{I as H}from"./ImageFormGroup-40MuGzez.js";import"./index-yBjzXJbu.js";import"./Global-Bz6gVLc5.js";import"./tippy-react.esm-DmkRJDEW.js";import"./index-pSueRYGM.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./index-B6ujFmsw.js";/* empty css              */import"./Logout-BpuTJ_83.js";import"./main-B6F2O9-U.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./MenuItemContainer-DcxtOi47.js";import"./index.esm-C48oHfFw.js";import"./index-ngrFHoWO.js";import"./CanAccess-D2C6GWbm.js";import"./CardProductKatya-ncpmQ0JU.js";import"./BooleanLimit-D-OsQsek.js";import"./ArrayDetails2Object-DR0Igcn7.js";import"./em-Dm5QugzS.js";import"./HtmlContent-ghmllTyl.js";import"./WebDetailsRest-DsgeLSDz.js";/* empty css               */import"./General-CE1RDd44.js";import"./LaravelSession-Dz9cpV3l.js";class L extends A{constructor(){super(...arguments);j(this,"path","admin/strengths");j(this,"hasFiles",!0)}}const d=new L,J=({details:o})=>{const r=n.useRef(),c=n.useRef(),g=n.useRef(),f=n.useRef(),u=n.useRef(),i=n.useRef(),k=n.useRef(),[v,N]=n.useState(!1),[p,x]=n.useState(!1),[b,h]=n.useState("#71b6f9"),w=s=>{if(s!=null&&s.id?N(!0):N(!1),g.current.value=(s==null?void 0:s.id)??"",t.has("strengths","name")&&(f.current.value=(s==null?void 0:s.name)??""),t.has("strengths","description")&&(u.current.value=(s==null?void 0:s.description)??""),t.has("strengths","bg_color")){const a=(s==null?void 0:s.bg_color)??"transparent";a!=="transparent"&&a!==""?(x(!0),h(a.startsWith("#")?a:"#71b6f9")):(x(!1),h("#71b6f9"))}t.has("strengths","image")&&i.current&&i.image&&(i.current.value=null,i.image.src=s!=null&&s.image?`/storage/images/strength/${s.image}`:""),i.resetDeleteFlag&&i.resetDeleteFlag(),$(c.current).modal("show")},C=async s=>{s.preventDefault();const a={id:g.current.value||void 0};t.has("strengths","name")&&(a.name=f.current.value),t.has("strengths","description")&&(a.description=u.current.value),t.has("strengths","bg_color")&&(a.bg_color=p?b:"transparent");const l=new FormData;for(const m in a)l.append(m,a[m]);if(i.current&&t.has("strengths","image")){const m=i.current.files[0];m&&l.append("image",m),i.getDeleteFlag&&i.getDeleteFlag()&&l.append("image_delete","DELETE")}await d.save(l)&&(i.resetDeleteFlag&&i.resetDeleteFlag(),$(r.current).dxDataGrid("instance").refresh(),$(c.current).modal("hide"))},D=async({id:s,value:a})=>{await d.boolean({id:s,field:"visible",value:a})&&$(r.current).dxDataGrid("instance").refresh()},E=async s=>{const{isConfirmed:a}=await M.fire({title:"Eliminar registro",text:"¿Estas seguro de eliminar este registro?",icon:"warning",showCancelButton:!0,confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"});!a||!await d.delete(s)||$(r.current).dxDataGrid("instance").refresh()},B=async s=>{const a=s.toIndex;try{await d.reorder(s.itemData.id,a)&&await s.component.refresh()}catch(l){console.error("Error reordering strength:",l)}};return e.jsxs(e.Fragment,{children:[e.jsx(U,{gridRef:r,title:e.jsx(W,{correlative:"values",details:o}),rest:d,toolBar:s=>{s.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(r.current).dxDataGrid("instance").refresh()}}),s.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Nuevo registro",hint:"Nuevo registro",onClick:()=>w()}})},rowDragging:{allowReordering:!0,onReorder:B,dropFeedbackMode:"push"},sorting:{mode:"single"},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"order_index",caption:"Orden",visible:!1,sortOrder:"asc",sortIndex:0},t.has("strengths","name")&&{dataField:"name",caption:"Fortaleza",width:"30%"},t.has("strengths","description")&&{dataField:"description",caption:"Descripción",width:"50%"},t.has("strengths","image")&&{dataField:"image",caption:"Imagen",cellTemplate:(s,{data:a})=>{const l=a.image?`/storage/images/strength/${a.image}`:"/api/cover/thumbnail/null",y=a.bg_color||"transparent";F(s,e.jsx("div",{style:{width:"80px",height:"80px",backgroundColor:y,borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",padding:"4px"},children:e.jsx("img",{src:l,style:{width:"100%",height:"100%",objectFit:"contain"},onError:m=>m.target.src="/api/cover/thumbnail/null"})}))}},t.has("strengths","visible")&&{dataField:"visible",caption:"Visible",dataType:"boolean",cellTemplate:(s,{data:a})=>{$(s).empty(),F(s,e.jsx(z,{checked:a.visible==1,onChange:()=>D({id:a.id,value:!a.visible})}))}},{caption:"Acciones",cellTemplate:(s,{data:a})=>{s.css("text-overflow","unset"),s.append(R({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>w(a)})),s.append(R({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>E(a.id)}))},allowFiltering:!1,allowExporting:!1}]}),e.jsxs(O,{modalRef:c,title:v?"Editar fortaleza":"Agregar fortaleza",onSubmit:C,size:"lg",children:[e.jsx("input",{ref:g,type:"hidden"}),e.jsxs("div",{id:"strengths-container",children:[e.jsxs("ul",{className:"nav nav-pills nav-justified mb-4",role:"tablist",style:{backgroundColor:"#f8f9fa",borderRadius:"8px",padding:"4px",border:"1px solid #e9ecef"},children:[e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link active",id:"basic-info-tab","data-bs-toggle":"pill","data-bs-target":"#basic-info",type:"button",role:"tab","aria-controls":"basic-info","aria-selected":"true",style:{borderRadius:"6px",fontWeight:"500",transition:"all 0.3s ease"},children:[e.jsx("i",{className:"fas fa-info-circle me-2"}),"Información Básica"]})}),t.has("strengths","image")&&e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link",id:"multimedia-tab","data-bs-toggle":"pill","data-bs-target":"#multimedia",type:"button",role:"tab","aria-controls":"multimedia","aria-selected":"false",style:{borderRadius:"6px",fontWeight:"500",transition:"all 0.3s ease"},children:[e.jsx("i",{className:"fas fa-image me-2"}),"Multimedia"]})})]}),e.jsxs("div",{className:"tab-content",children:[e.jsx("div",{className:"tab-pane fade show active",id:"basic-info",role:"tabpanel","aria-labelledby":"basic-info-tab",children:e.jsx("div",{className:"row g-3",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card border-0 shadow-sm",children:[e.jsx("div",{className:"card-header bg-light",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-tag me-2 text-primary"}),"Información de la Fortaleza"]})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[t.has("strengths","name")&&e.jsx("div",{className:"col-12",children:e.jsx(q,{eRef:f,label:"Fortaleza",col:"col-12",required:!0,placeholder:"Ej: Experiencia"})}),t.has("strengths","description")&&e.jsx("div",{className:"col-12",children:e.jsx(G,{eRef:u,label:"Descripción",rows:3,placeholder:"Descripción de la fortaleza"})})]})})]})})})}),t.has("strengths","image")&&e.jsx("div",{className:"tab-pane fade",id:"multimedia",role:"tabpanel","aria-labelledby":"multimedia-tab",children:e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"card border-0 shadow-sm",children:[e.jsx("div",{className:"card-header bg-light",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-image me-2 text-primary"}),"Imagen de la Fortaleza"]})}),e.jsxs("div",{className:"card-body",children:[e.jsx(H,{eRef:i,name:"image",label:"Imagen",col:"col-12",aspect:"1/1",required:!v}),e.jsxs("small",{className:"text-muted d-block mt-2",children:[e.jsx("i",{className:"mdi mdi-information me-1"}),"Recomendado: 100x100px (1:1)"]})]})]})}),t.has("strengths","bg_color")&&e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"card border-0 shadow-sm",children:[e.jsx("div",{className:"card-header bg-light",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-palette me-2 text-warning"}),"Color de Fondo del Icono"]})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"form-check form-switch mb-3",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:"useBackgroundToggle",checked:p,onChange:s=>x(s.target.checked)}),e.jsx("label",{className:"form-check-label fw-semibold",htmlFor:"useBackgroundToggle",children:"Activar color de fondo personalizado"})]}),p&&e.jsx("div",{className:"row g-4",children:e.jsx("div",{className:"col-md-12",children:e.jsx("div",{className:"row g-3",children:e.jsxs("div",{className:"col-12",children:[e.jsxs("label",{className:"form-label fw-semibold mb-3",children:[e.jsx("i",{className:"fas fa-palette me-2 text-primary"}),"Selector de Color"]}),e.jsxs("div",{className:"d-flex gap-3 align-items-start",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("input",{ref:k,type:"color",value:b,onChange:s=>h(s.target.value),style:{width:"100px",height:"100px",cursor:"pointer",border:"3px solid #dee2e6",borderRadius:"12px",display:"block",padding:"0",backgroundColor:"transparent",WebkitAppearance:"none",MozAppearance:"none",appearance:"none"},title:"Click para seleccionar color"}),e.jsxs("small",{className:"text-muted d-block mt-2",children:[e.jsx("i",{className:"fas fa-hand-pointer me-1"}),"Click aquí"]})]}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsxs("label",{className:"form-label small text-muted mb-2",children:[e.jsx("i",{className:"fas fa-code me-1"}),"Código Hexadecimal"]}),e.jsx("input",{type:"text",className:"form-control form-control-lg",value:b,onChange:s=>h(s.target.value),placeholder:"#71b6f9",style:{fontFamily:"monospace",fontSize:"1.1rem",letterSpacing:"1px",fontWeight:"600"}}),e.jsxs("small",{className:"text-muted d-block mt-2",children:[e.jsx("i",{className:"mdi mdi-information-outline me-1"}),"También puedes escribir el código manualmente"]})]})]})]})})})}),!p&&e.jsxs("div",{className:"alert alert-secondary mb-0 py-2",style:{fontSize:"0.875rem"},children:[e.jsx("i",{className:"mdi mdi-check-circle me-2"}),"El icono se mostrará sin color de fondo (transparente)"]})]})]})})]})})]})]})]})]})};V((o,r)=>{_.createRoot(o).render(e.jsx(T,{...r,title:"Fortalezas",children:e.jsx(J,{...r})}))});
