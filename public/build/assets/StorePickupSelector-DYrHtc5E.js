var fe=Object.defineProperty;var ge=(n,r,a)=>r in n?fe(n,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[r]=a;var J=(n,r,a)=>ge(n,typeof r!="symbol"?r+"":r,a);import{c as U}from"./createLucideIcon-DfjclApS.js";import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as p}from"./index-BOnQTV8N.js";import{S as A}from"./sparkles-DvmvZ6mJ.js";import{C as E,N as ye}from"./Number2Currency-jIsa99f9.js";import{P as be}from"./package-DBFPPBi1.js";import{M as je}from"./minus-Db6MFKEO.js";import{P as ve}from"./plus-CTIomuuF.js";import{T as Ne}from"./trash-2-DU7LB6-f.js";import{a as we}from"./index-BQJyKPGC.js";import{X as ke}from"./x-fof_H3Vv.js";import{a as _e,b as v,h as Se,c as q,d as Ce,u as Oe,S as Ae,_ as Ee}from"./useStateManager-7e1e8489.esm-C6DnWqDr.js";import"./index-pSueRYGM.js";import{m as D}from"./main-B6F2O9-U.js";import"./CardProductKatya-ncpmQ0JU.js";import{S as Pe}from"./StoresRest-Bb6TODpG.js";/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=U("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=U("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=U("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),as=({children:n,className:r="",loading:a=!1,disabled:t=!1,...s})=>e.jsxs("button",{type:"button",disabled:t||a,className:`w-full bg-primary font-bold  py-3 px-4 hover:opacity-90 hover:shadow-md transition-all duration-300 focus:outline-none active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl flex items-center justify-center gap-2 ${r}`,...s,children:[a&&e.jsx(Me,{className:"w-4 h-4 animate-spin"}),n]}),rs=({children:n,className:r="",...a})=>e.jsx("a",{className:`w-full block border-primary cursor-pointer border-2 text-center font-bold customtext-primary py-3 px-4  hover:opacity-90 hover:shadow-md transition-all duration-300 focus:outline-none active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl ${r}`,...a,children:n});function $e({onClick:n,className:r=""}){return e.jsxs("div",{className:`relative ${r}`,children:[e.jsx(A,{size:12,className:"absolute -top-1 -left-1 text-yellow-400 animate-ping",style:{animationDelay:"0s"}}),e.jsx(A,{size:10,className:"absolute -top-2 -right-1 text-pink-400 animate-ping",style:{animationDelay:"0.5s"}}),e.jsx(A,{size:8,className:"absolute -bottom-1 -left-2 text-blue-400 animate-ping",style:{animationDelay:"1s"}}),e.jsx(A,{size:14,className:"absolute -bottom-2 -right-2 text-purple-400 animate-ping",style:{animationDelay:"1.5s"}}),e.jsxs("button",{onClick:n,className:"relative group bg-primary p-2 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-110 animate-bounce cursor-pointer",style:{animationDuration:"2s",animationIterationCount:"infinite"},children:[e.jsx("div",{className:"absolute inset-0 bg-primary rounded-xl opacity-0 group-hover:opacity-50 transition-opacity duration-300 blur-lg"}),e.jsx(F,{size:24,className:"text-white relative z-10 drop-shadow-sm"}),e.jsx("div",{className:"absolute inset-0 bg-primary rounded-xl animate-pulse opacity-30"})]}),e.jsx("div",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-20",children:"¡Promoción disponible!"})]})}const ts=({setCart:n,hasPromotion:r,onPromotionClick:a,categorias:t,...s})=>{var k,y,o,f,x,m;const c=t==null?void 0:t.find(d=>d.id===(s==null?void 0:s.category_id)),l=s.type==="combo",u=()=>{n(d=>d.filter(i=>l?!(i.id===(s==null?void 0:s.id)&&i.type==="combo"):i.id!==(s==null?void 0:s.id)))},g=()=>{n(d=>d.map(i=>l?i.id===(s==null?void 0:s.id)&&i.type==="combo"?{...i,quantity:(i.quantity||1)+1}:i:i.id===(s==null?void 0:s.id)?{...i,quantity:(i.quantity||1)+1}:i))},w=()=>{n(d=>d.map(i=>{if(l?i.id===(s==null?void 0:s.id)&&i.type==="combo":i.id===(s==null?void 0:s.id)){const b=(i.quantity||1)-1;return b<=0?(u(),null):{...i,quantity:b}}return i}).filter(Boolean))},S=l?s.final_price||s.price:s.final_price,N=s.price;return e.jsx("div",{className:"w-full bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center  justify-between gap-4 w-full",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-grow",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:l?s!=null&&s.image?`/storage/images/combo/${s.image}`:`/storage/images/item/${s.image}`:`/storage/images/item/${s==null?void 0:s.image}`,alt:s==null?void 0:s.name,className:"w-20 h-20 object-cover rounded flex-shrink-0",onError:d=>d.target.src="/api/cover/thumbnail/null"}),l&&e.jsx("div",{className:"absolute -top-1 -right-1 bg-primary text-white rounded-full p-1",children:e.jsx(be,{size:12})}),r&&e.jsx("div",{className:"absolute -top-2 -right-2",children:e.jsx($e,{onClick:()=>a(s),className:"group"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-lg mb-2 line-clamp-2",children:s==null?void 0:s.name}),l&&e.jsxs("p",{className:"text-xs customtext-primary font-medium mb-1",children:["Combo (",((k=s.combo_items)==null?void 0:k.length)||0," productos)"]}),l&&s.combo_items&&e.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["Incluye: ",s.combo_items.map(d=>d.name).join(", ")]}),((y=s==null?void 0:s.brand)==null?void 0:y.name)||((o=s==null?void 0:s.category)==null?void 0:o.name)&&e.jsxs("p",{className:"text-sm customtext-neutral-dark",children:[(f=s==null?void 0:s.brand)!=null&&f.name?"Marca: ":"Categoría: ",e.jsx("span",{className:"customtext-neutral-dark",children:(x=s==null?void 0:s.brand)!=null&&x.name?(m=s==null?void 0:s.brand)==null?void 0:m.name:c==null?void 0:c.name})]}),!l&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-sm customtext-neutral-dark",children:["Disponibilidad: ",e.jsxs("span",{className:"customtext-neutral-dark",children:[(s==null?void 0:s.stock)>=(s==null?void 0:s.quantity)?"En stock":"Agotado"," "]})]}),e.jsxs("p",{className:"text-sm customtext-neutral-dark",children:["SKU: ",e.jsx("span",{className:"customtext-neutral-dark",children:s==null?void 0:s.sku})]})]})]})]}),e.jsxs("div",{className:"flex flex-row justify-between md:flex-col items-end md:items-end gap-4 mt-4 md:mt-0 flex-shrink-0",children:[e.jsxs("div",{className:"text-right",children:[l&&s.discount>0&&e.jsxs("div",{className:"text-xs text-gray-500 line-through",children:[E()," ",Number(N*(s==null?void 0:s.quantity)).toFixed(2)]}),!l&&(s==null?void 0:s.discount)>0&&(s==null?void 0:s.price)>(s==null?void 0:s.final_price)&&e.jsxs("div",{className:"text-xs text-gray-500 line-through",children:[E()," ",Number(N*(s==null?void 0:s.quantity)).toFixed(2)]}),e.jsxs("div",{className:"font-bold text-lg",children:[E()," ",Number(S*(s==null?void 0:s.quantity)).toFixed(2)]}),l&&s.discount>0&&e.jsxs("div",{className:"text-xs text-red-500",children:["-",s.discount_percent,"% OFF"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center border border-gray-200 rounded-lg overflow-hidden shadow-sm",children:[e.jsx("button",{type:"button",onClick:w,className:"p-2 text-gray-600 hover:bg-gray-100 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary","aria-label":"Decrease quantity",children:e.jsx(je,{size:16})}),e.jsx("div",{className:"w-12 h-8 flex justify-center items-center bg-white",children:e.jsx("span",{className:"font-semibold text-sm",children:(s==null?void 0:s.quantity)||1})}),e.jsx("button",{type:"button",onClick:g,className:"p-2 text-gray-600 hover:bg-gray-100 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary","aria-label":"Increase quantity",children:e.jsx(ve,{size:16})})]}),e.jsx("button",{onClick:u,className:"p-2 text-gray-400 hover:text-red-500 transition-colors duration-200 rounded-full hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-red-200","aria-label":"Remove item",children:e.jsx(Ne,{size:18})})]})]})]})},s==null?void 0:s.id)},Ie="/api";class ns{static async applyToCart(r,a,t=null){var s;try{if(console.log("🛒 Applying discount rules to cart:",{cartItems:r,totalAmount:a,customerEmail:t}),!Array.isArray(r)||r.length===0)return{success:!1,error:"Carrito vacío o inválido",data:null};const c={cart_items:r.map(u=>{const g={item_id:String(u.item_id||u.id||""),quantity:parseInt(u.quantity)||1,price:parseFloat(u.price||u.final_price||0),name:String(u.name||u.description||"Producto sin nombre"),category_id:u.category_id?String(u.category_id):null,type:u.type||"item",combo_id:u.type==="combo"?u.id:null};return console.log("📦 Processing cart item:",g),g}),total_amount:parseFloat(a)||0,customer_email:t||null};console.log("📤 Sending payload to API:",c);const l=await we.post(`${Ie}/discount-rules/apply-to-cart`,c);return l.data.status===200?{success:!0,data:l.data.data,message:l.data.message}:{success:!1,error:l.data.message||"Error al aplicar descuentos",data:null}}catch(c){return console.error("Error applying discount rules:",c),(s=c.response)!=null&&s.data?{success:!1,error:c.response.data.message||"Error del servidor",data:c.response.data.data||null}:{success:!1,error:"Error de conexión",data:null}}}static formatDiscounts(r){return!r||!Array.isArray(r)?[]:r.map(a=>({id:a.rule_id,name:a.rule_name||"Descuento automático",description:a.description||"",amount:parseFloat(a.discount_amount||0),type:a.discount_type||"fixed",promotion_type:a.promotion_type||null,free_items:a.free_items||[],formatted_amount:a.discount_type==="percentage"?`${a.discount_amount}%`:`${E()} ${parseFloat(a.discount_amount||0).toFixed(2)}`}))}static getFreeItems(r){if(!r||!Array.isArray(r))return[];const a=[];return r.forEach(t=>{t.free_items&&Array.isArray(t.free_items)&&a.push(...t.free_items)}),a}static calculateTotalDiscount(r){return!r||!Array.isArray(r)?0:r.reduce((a,t)=>a+parseFloat(t.discount_amount||0),0)}}function os({isOpen:n,onClose:r,suggestion:a,onAddToCart:t,productName:s}){const[c,l]=p.useState(!1);if(!n||!a)return null;const u=async()=>{l(!0);try{console.log("Modal - suggestion data:",a),await t(a),r()}catch(g){console.error("Error adding promotional item:",g)}finally{l(!1)}};return e.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity duration-300",onClick:r}),e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl max-w-md w-full mx-auto transform transition-all duration-300 scale-100",children:[e.jsx("button",{onClick:r,className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-gray-600 transition-colors rounded-full hover:bg-gray-100",children:e.jsx(ke,{size:20})}),e.jsxs("div",{className:"text-center pt-8 pb-6 px-6",children:[e.jsxs("div",{className:"relative inline-block mb-4",children:[e.jsx("div",{className:"animate-bounce",children:e.jsx(F,{size:48,className:"customtext-primary mx-auto"})}),e.jsx(A,{size:20,className:"absolute -top-2 -right-2 text-yellow-400 animate-pulse"}),e.jsx(A,{size:16,className:"absolute -bottom-1 -left-2 text-yellow-400 animate-pulse delay-300"})]}),e.jsx("h2",{className:"text-2xl font-bold customtext-neutral-dark mb-2",children:"🎉 ¡Promoción Especial!"}),e.jsx("p",{className:"text-gray-600",children:"Tienes un producto que califica para una promoción"})]}),e.jsxs("div",{className:"px-6 pb-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Al tener  ",e.jsxs("span",{className:"font-semibold customtext-primary",children:[a.current_quantity," ",s]})," en tu carrito"]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[e.jsx("p",{className:"font-bold text-lg customtext-primary mb-1",children:a.rule_name}),e.jsx("p",{className:"text-sm customtext-neutral-light",children:a.description||"Obtén un producto gratis"})]})]})}),e.jsx("div",{className:"border-2 border-dashed rounded-xl p-4 mb-6 bg-green-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 w-9/12",children:[e.jsx("div",{className:"w-12 h-12  rounded-full flex items-center justify-center",children:e.jsx(F,{className:"customtext-primary",size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold customtext-neutral-dark",children:a.item_name}),e.jsxs("p",{className:"text-sm customtext-primary",children:["Cantidad: ",a.suggested_quantity]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-lg font-bold customtext-primary",children:"¡GRATIS!"}),e.jsxs("p",{className:"text-xs text-gray-500 line-through",children:[E()," ",Number(a.value||0).toFixed(2)]})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:u,disabled:c,className:"w-full bg-primary text-white font-semibold py-3 px-6 rounded-xl hover:from-green-600 hover:to-green-700 transition-all duration-200 transform hover:scale-105 disabled:opacity-50 disabled:transform-none shadow-lg",children:c?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Agregando..."})]}):e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(F,{size:20}),e.jsx("span",{children:"¡Agregar Regalo!"})]})}),e.jsx("button",{onClick:r,className:"w-full bg-gray-100 customtext-neutral-light font-medium py-3 px-6 rounded-xl hover:bg-gray-200 transition-colors duration-200",children:"Tal vez después"})]}),e.jsx("p",{className:"text-xs text-gray-500 text-center mt-4",children:"* Promoción válida mientras tengas los productos requeridos en tu carrito"})]})]})})]})}var Le=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"];function ze(n){var r=n.defaultOptions,a=r===void 0?!1:r,t=n.cacheOptions,s=t===void 0?!1:t,c=n.loadOptions;n.options;var l=n.isLoading,u=l===void 0?!1:l,g=n.onInputChange,w=n.filterOption,S=w===void 0?null:w,N=_e(n,Le),k=N.inputValue,y=p.useRef(void 0),o=p.useRef(!1),f=p.useState(Array.isArray(a)?a:void 0),x=v(f,2),m=x[0],d=x[1],i=p.useState(typeof k<"u"?k:""),j=v(i,2),b=j[0],C=j[1],I=p.useState(a===!0),L=v(I,2),R=L[0],_=L[1],B=p.useState(void 0),z=v(B,2),P=z[0],V=z[1],ae=p.useState([]),K=v(ae,2),re=K[0],H=K[1],te=p.useState(!1),Q=v(te,2),ne=Q[0],T=Q[1],oe=p.useState({}),X=v(oe,2),M=X[0],Y=X[1],ie=p.useState(void 0),Z=v(ie,2),le=Z[0],ce=Z[1],de=p.useState(void 0),ee=v(de,2),ue=ee[0],pe=ee[1];s!==ue&&(Y({}),pe(s)),a!==le&&(d(Array.isArray(a)?a:void 0),ce(a)),p.useEffect(function(){return o.current=!0,function(){o.current=!1}},[]);var G=p.useCallback(function($,O){if(!c)return O();var h=c($,O);h&&typeof h.then=="function"&&h.then(O,function(){return O()})},[c]);p.useEffect(function(){a===!0&&G(b,function($){o.current&&(d($||[]),_(!!y.current))})},[]);var xe=p.useCallback(function($,O){var h=Se($,O,g);if(!h){y.current=void 0,C(""),V(""),H([]),_(!1),T(!1);return}if(s&&M[h])C(h),V(h),H(M[h]),_(!1),T(!1);else{var he=y.current={};C(h),_(!0),T(!P),G(h,function(W){o&&he===y.current&&(y.current=void 0,_(!1),V(h),H(W||[]),T(!1),Y(W?q(q({},M),{},Ce({},h,W)):M))})}},[s,G,P,M,g]),me=ne?[]:b&&P?re:m||[];return q(q({},N),{},{options:me,isLoading:R||u,onInputChange:xe,filterOption:S})}var Te=p.forwardRef(function(n,r){var a=ze(n),t=Oe(a);return p.createElement(Ae,Ee({ref:r},t))}),is=Te;class se{}J(se,"getShippingCost",async r=>{try{const{status:a,result:t}=await D.Fetch("./api/delivery-prices",{method:"POST",body:JSON.stringify(r)});if(!a)throw new Error((t==null?void 0:t.message)||"Error al obtener datos");return t}catch{return!1}}),J(se,"getCosts",async r=>{try{const{status:a,result:t}=await D.Fetch("./api/prices-type",{method:"POST"});if(!a)throw new Error((t==null?void 0:t.message)||"Error al obtener datos");return t}catch{return!1}});class ls{static async validateCoupon(r){try{const{status:a,result:t}=await D.Fetch("./api/coupons/validate",{method:"POST",body:JSON.stringify(r)});if(!a)throw new Error((t==null?void 0:t.message)||"Error al validar cupón");return t}catch(a){throw a}}static async generateCode(){try{const{status:r,result:a}=await D.Fetch("./api/coupons/generate-code",{method:"GET"});if(!r)throw new Error((a==null?void 0:a.message)||"Error al generar código");return a}catch(r){throw r}}}const cs=({title:n,description:r,price:a,selected:t,onSelect:s,disabled:c,paymentOnDelivery:l=!1})=>e.jsxs("div",{className:`flex w-full items-center justify-between gap-3 p-4 border-2 rounded-xl cursor-pointer transition-all duration-300 customtext-neutral-dark ${t?"border-primary bg-primary/5":"border-gray-200 hover:border-gray-300"} ${c?"opacity-50 cursor-not-allowed":""}`,onClick:c?void 0:s,children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("div",{className:`w-5 h-5 border-2 rounded-full flex items-center justify-center flex-shrink-0 ${t?"border-primary":"border-gray-300"}`,children:t&&e.jsx("div",{className:"w-3 h-3 bg-primary rounded-full"})}),e.jsxs("div",{className:"customtext-neutral-light flex-1",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("h4",{className:"text-sm font-medium",children:n})}),e.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:r})]})]}),e.jsx("div",{className:"flex-shrink-0",children:l?e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-xs text-gray-500",children:"Pagas al recoger"})}):a!==void 0?e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-sm font-bold customtext-primary",children:a===0?"GRATIS":`${E()} ${ye(a)}`})}):null})]}),ds=({ubigeoCode:n,ubigeo:r,onStoreSelect:a,selectedStore:t=null,specificStores:s=null,className:c=""})=>{const[l,u]=p.useState([]),[g,w]=p.useState(!1),[S,N]=p.useState(null);p.useEffect(()=>{k()},[s]);const k=async()=>{var o;w(!0),N(null);try{const x=await new Pe().paginate({status:!0,visible:!0});let m=(x==null?void 0:x.data)||[];console.log("🏪 Tiendas recibidas del API:",m.length),console.log("🏪 specificStores recibido:",s),m=m.filter(d=>{const i=d.type==="tienda"||d.type==="tienda_principal",j=d.visible===!0||d.visible===1,b=d.status===!0||d.status===1;return i&&j&&b}),s&&Array.isArray(s)&&s.length>0?(m=m.filter(d=>s.includes(d.id)),console.log("🏪 Filtrando tiendas específicas:",{specificStores:s,totalStores:((o=x==null?void 0:x.data)==null?void 0:o.length)||0,filteredStores:m.length})):console.log("🏪 Mostrando TODAS las tiendas disponibles:",m.length),u(m)}catch(f){console.error("❌ Error cargando tiendas:",f),N("No se pudieron cargar las tiendas disponibles"),u([])}finally{w(!1)}},y=o=>{a(o)};return g?e.jsxs("div",{className:`text-center p-6 ${c}`,children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-primary/10 rounded-full mb-4",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}),e.jsx("h3",{className:"text-lg font-semibold customtext-neutral-dark mb-2",children:"Cargando tiendas..."}),e.jsx("p",{className:"customtext-neutral-light text-sm",children:"Buscando tiendas disponibles en tu ubicación"})]}):S?e.jsxs("div",{className:`bg-red-50 border border-red-200 rounded-xl p-4 md:p-6 ${c}`,children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-red-100 rounded-full mx-auto mb-4",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h3",{className:"text-lg font-semibold text-red-800 text-center mb-2",children:"Error al cargar tiendas"}),e.jsx("p",{className:"text-red-600 text-center text-sm",children:S})]}):l.length===0?e.jsxs("div",{className:`bg-secondary/30 border border-secondary rounded-xl p-4 md:p-6 ${c}`,children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-secondary rounded-full mx-auto mb-4",children:e.jsx("svg",{className:"w-6 h-6 customtext-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h3",{className:"text-lg font-semibold customtext-neutral-dark text-center mb-2",children:"Sin tiendas disponibles"}),e.jsx("p",{className:"customtext-neutral-light text-center text-sm",children:"No hay tiendas disponibles para retiro en esta ubicación. Por favor, selecciona otra opción de envío."})]}):e.jsxs("div",{className:c,children:[e.jsxs("div",{className:"mb-4 md:mb-6",children:[e.jsx("h3",{className:"text-lg md:text-xl font-semibold customtext-neutral-dark mb-2",children:"Selecciona una tienda para retiro"}),e.jsx("p",{className:"customtext-neutral-light text-sm md:text-base",children:"Elige la tienda más conveniente para retirar tu pedido"})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 md:gap-4",children:l.map(o=>e.jsxs("div",{className:`relative border-2 rounded-xl cursor-pointer transition-all duration-200 hover:shadow-lg ${(t==null?void 0:t.id)===o.id?"border-primary bg-primary/5 shadow-md":"border-gray-200 bg-white hover:border-primary/50 hover:shadow-md"}`,onClick:()=>y(o),children:[e.jsx("div",{className:"absolute top-3 right-3 z-10",children:e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center transition-all ${(t==null?void 0:t.id)===o.id?"border-primary bg-primary":"border-gray-300 bg-white"}`,children:(t==null?void 0:t.id)===o.id&&e.jsx("div",{className:"w-2.5 h-2.5 bg-white rounded-full"})})}),e.jsxs("div",{className:"p-4 pr-10",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:`/storage/images/store/${o.image}`,alt:o.name,className:"w-16 h-16 object-cover rounded-lg border border-gray-200",onError:f=>f.target.src="/api/cover/thumbnail/null"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold customtext-neutral-dark text-base mb-1 truncate",children:o.name}),e.jsx("span",{className:"inline-block px-2 py-1 rounded-full text-xs font-medium bg-primary/10 customtext-primary",children:o.type==="tienda"?"Tienda":o.type==="tienda_principal"?"Tienda Principal":o.type||"Tienda"})]})]}),e.jsx("p",{className:"text-sm customtext-neutral-light mb-3 line-clamp-2",children:o.address}),e.jsxs("div",{className:"space-y-2 text-sm customtext-neutral-light mb-3",children:[o.phone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),e.jsx("span",{className:"truncate",children:o.phone})]}),o.manager&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),e.jsxs("span",{className:"truncate",children:["Encargado: ",o.manager]})]})]}),o.business_hours&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs font-medium customtext-neutral-dark mb-1",children:"Horario de hoy:"}),e.jsx("div",{className:"text-xs",children:(()=>{try{const f=typeof o.business_hours=="string"?JSON.parse(o.business_hours):o.business_hours,x=new Date().toLocaleDateString("es-PE",{weekday:"long"}),d={lunes:"Lunes",martes:"Martes",miércoles:"Miércoles",jueves:"Jueves",viernes:"Viernes",sábado:"Sábado",domingo:"Domingo"}[x.toLowerCase()]||x,i=f.find(j=>j.day.toLowerCase()===d.toLowerCase());if(i){const j=i.closed?"Cerrado":`${i.open} - ${i.close}`,b=!i.closed&&(()=>{const C=new Date,I=C.getHours()*60+C.getMinutes(),[L,R]=i.open.split(":").map(Number),[_,B]=i.close.split(":").map(Number),z=L*60+R,P=_*60+B;return I>=z&&I<=P})();return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"customtext-neutral-light",children:j}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${b?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:b?"Abierto":"Cerrado"})]})}return e.jsx("span",{className:"customtext-neutral-light",children:"Horarios disponibles"})}catch{return e.jsx("span",{className:"customtext-neutral-light",children:"Horarios disponibles"})}})()})]})]})]},o.id))})]})};export{is as A,as as B,ts as C,ns as D,ss as I,cs as O,os as P,ds as S,rs as a,se as b,ls as c};
