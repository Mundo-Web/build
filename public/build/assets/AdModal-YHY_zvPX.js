import{r as e,j as t,q as a,X as r,E as s,J as n,ai as l}from"./vendor-react-DD0uBW7s.js";import{H as o}from"./HtmlContent-CEAddvHS.js";import"./vendor-swiper-BQwfPLwm.js";const i=({data:l,items:o=[]})=>{const[i,c]=e.useState(!1),[m,u]=e.useState(!1),[h,g]=e.useState([]),[f,x]=e.useState(0),[p,b]=e.useState(!1);e.useEffect(()=>{if("complete"===document.readyState){const e=setTimeout(()=>b(!0),500);return()=>clearTimeout(e)}const e=()=>{setTimeout(()=>b(!0),500)};return window.addEventListener("load",e),()=>window.removeEventListener("load",e)},[]);const v=e=>`mblens_ad_seen_${e.id||e.image}`;e.useEffect(()=>{const e=o.filter(e=>e&&e.image),t=new Date,a=new Date(t.getFullYear(),t.getMonth(),t.getDate()),r=e.filter(e=>{if(!e.date_begin&&!e.date_end)return!0;const r=e.date_begin?new Date(e.date_begin+"T00:00:00"):null,s=e.date_end?new Date(e.date_end+"T23:59:59"):null;return!(r&&a<r)&&!(s&&t>s)}).filter(e=>{const t=v(e),a=localStorage.getItem(t);if(!a)return!0;const r=Date.now(),s=parseInt(a,10);return!!(isNaN(s)||r>s)&&(localStorage.removeItem(t),!0)});g(r)},[o]),e.useEffect(()=>{if(!p)return;if(0===h.length||m)return;const e=1e3*(h[0].seconds||0),t=setTimeout(()=>{c(!0),u(!0)},e);return()=>clearTimeout(t)},[h,m,p]),e.useEffect(()=>{if(!i||h.length<=1)return;const e=h[f],t=setTimeout(()=>{x(e=>(e+1)%h.length)},1e3*(e?.seconds||5));return()=>clearTimeout(t)},[i,h.length,f]);const w=()=>{c(!1);const e=Date.now()+864e5;h.forEach(t=>{const a=v(t);localStorage.setItem(a,e.toString())})},j=e=>{e&&window.open(e,"_blank","noopener,noreferrer")};if(0===h.length)return null;const y=h.some(e=>e.invasivo);return t.jsxs(a,{isOpen:i,shouldCloseOnOverlayClick:!y,shouldCloseOnEsc:!y,onRequestClose:w,contentLabel:"Anuncio",className:"absolute left-1/2 -translate-x-1/2 top-1/2 -translate-y-1/2 bg-white w-[90%] max-w-4xl outline-none shadow-2xl rounded-2xl overflow-visible",overlayClassName:"fixed inset-0 bg-black/70 backdrop-blur-sm z-[9999] flex items-center justify-center",ariaHideApp:!1,children:[t.jsx("button",{onClick:w,className:"absolute -top-3 -right-3 md:-top-4 md:-right-4 z-[9999] w-10 h-10 md:w-12 md:h-12 bg-white text-gray-700 rounded-full shadow-xl border border-gray-100 hover:bg-gray-50 hover:scale-110 hover:text-red-500 transition-all duration-300 flex items-center justify-center group","aria-label":"Cerrar anuncio",children:t.jsx(r,{size:22,strokeWidth:2.5,className:"transition-transform group-hover:rotate-90 duration-300"})}),t.jsxs("div",{className:"w-full h-full bg-white rounded-2xl overflow-hidden relative",children:[t.jsx("div",{className:"relative",children:h.map((e,a)=>t.jsx("div",{className:"transition-all duration-500 ease-in-out "+(a===f?"opacity-100 relative":"opacity-0 absolute inset-0 pointer-events-none"),children:t.jsx(d,{ad:e,handleAdClick:j})},e.id||a))}),h.length>1&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>{x(e=>(e-1+h.length)%h.length)},className:"absolute left-2 md:left-4 top-1/2 -translate-y-1/2 z-30 p-2 md:p-3 rounded-full bg-white/90 hover:bg-primary text-gray-700 hover:text-white transition-all duration-300 hover:scale-110 shadow-lg group","aria-label":"Anterior",children:t.jsx(s,{className:"w-5 h-5 md:w-6 md:h-6 transition-transform group-hover:-translate-x-0.5"})}),t.jsx("button",{onClick:()=>{x(e=>(e+1)%h.length)},className:"absolute right-2 md:right-4 top-1/2 -translate-y-1/2 z-30 p-2 md:p-3 rounded-full bg-white/90 hover:bg-primary text-gray-700 hover:text-white transition-all duration-300 hover:scale-110 shadow-lg group","aria-label":"Siguiente",children:t.jsx(n,{className:"w-5 h-5 md:w-6 md:h-6 transition-transform group-hover:translate-x-0.5"})})]}),h.length>1&&t.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 z-30 flex space-x-2",children:h.map((e,a)=>t.jsx("button",{onClick:()=>x(a),className:"transition-all duration-300 rounded-full "+(a===f?"w-8 h-2.5 bg-primary":"w-2.5 h-2.5 bg-gray-300 hover:bg-gray-400"),"aria-label":`Ir al anuncio ${a+1}`},a))})]})]})},d=({ad:e,handleAdClick:a})=>{const r=e.button_text||"Ver mÃ¡s detalles",s=e.name||e.description||e.link;return t.jsxs("div",{className:"flex flex-col w-full "+(s?"md:flex-row":""),children:[t.jsxs("div",{className:`w-full ${s?"md:w-1/2":""} relative bg-gray-100 overflow-hidden group`,children:[t.jsx("div",{className:"aspect-square w-full",children:t.jsx("img",{src:`/api/ads/media/${e.image}`,alt:e.name||"Anuncio",className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"})}),s&&t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/30 via-transparent to-transparent md:bg-gradient-to-r md:from-transparent md:via-transparent md:to-black/10 pointer-events-none"})]}),s&&t.jsx("div",{className:"w-full md:w-1/2 p-6 md:p-10 lg:p-12 flex flex-col justify-center items-start text-left bg-white relative",children:t.jsxs("div",{className:"w-full space-y-4 md:space-y-6",children:[e.name&&t.jsx("h2",{className:"text-2xl md:text-3xl lg:text-4xl font-bold text-gray-900 leading-tight",children:e.name}),e.description&&t.jsx("div",{className:"prose prose-sm md:prose-base text-gray-600 line-clamp-4 md:line-clamp-6",children:t.jsx(o,{html:e.description})}),e.link&&t.jsxs("button",{onClick:()=>a(e.link),className:"mt-4 w-full md:w-auto bg-primary hover:bg-primary/90 text-white font-semibold py-3 px-8 rounded-full transition-all duration-300 shadow-lg hover:shadow-xl hover:scale-105 flex items-center justify-center gap-2 group",children:[t.jsx("span",{children:r}),t.jsx(l,{className:"w-4 h-4 group-hover:translate-x-1 group-hover:-translate-y-0.5 transition-transform"})]})]})})]})};export{i as default};
