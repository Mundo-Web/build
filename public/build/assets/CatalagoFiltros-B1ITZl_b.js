import{r as e,m as s,j as a,R as t,I as l}from"./System-Bybt2Brn.js";import{C as r}from"./CardHoverBtn-BJnt3e8M.js";import{A as i}from"./ArrayJoin-E1gnboGL.js";import{N as n}from"./NoResult-m-3gmVGS.js";import{S as c}from"./SelectForm-ChOsm-KR.js";import{F as o}from"./filter-DnzWsNM_.js";import{X as m}from"./x-DWgXNABc.js";import{C as d}from"./chevron-down-r_B4RFE6.js";import{S as u}from"./search--TD4pUuj.js";import{m as x}from"./proxy-BmPRG09w.js";import{A as p}from"./index-Da4AP4wO.js";import{C as h}from"./chevron-left-DoRUFD_L.js";import{C as g}from"./chevron-right-jU6kkjiT.js";import"./vendor-BiOv2i5T.js";import"./sweetalert2.esm.all-DbJpIAEg.js";import"./CartModal-Db_dBOJN.js";import"./index-Cmhjy_Bv.js";import"./index-Bx5UHif0.js";import"./CartItemRow-CLpuTcvn.js";import"./Number2Currency-DExzICY3.js";import"./tippy-react.esm-Cpb4mDDh.js";import"./trash-2-CDXts6on.js";import"./createLucideIcon-oahCLV50.js";import"./minus-BhdGy6sP.js";import"./plus-4JHYG4O1.js";import"./eye-DJ5vw54Z.js";import"./check-BqyWwvbE.js";const f=new l,j=()=>a.jsx("div",{className:"group animate-pulse transition-transform duration-300 hover:scale-105 w-1/2 lg:w-1/4 flex-shrink-0 font-font-general customtext-primary cursor-pointer",children:a.jsx("div",{className:"px-4",children:a.jsx("div",{className:"bg-white rounded-3xl",children:a.jsx("div",{className:"relative",children:a.jsx("div",{className:"aspect-square bg-gray-300 rounded-3xl overflow-hidden flex items-center justify-center bg-secondary",children:a.jsx("svg",{className:"w-10 h-10 text-gray-200","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 18",children:a.jsx("path",{d:"M18 0H2a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2Zm-5.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm4.376 10.481A1 1 0 0 1 16 15H4a1 1 0 0 1-.895-1.447l3.5-7A1 1 0 0 1 7.468 6a.965.965 0 0 1 .9.5l2.775 4.757 1.546-1.887a1 1 0 0 1 1.618.1l2.541 4a1 1 0 0 1 .028 1.011Z"})})})})})})}),b=({items:l,data:b,filteredData:y,cart:w,setCart:v})=>{const[N,C]=e.useState([]),[P,k]=e.useState([]),[_,S]=e.useState([]),[T,A]=e.useState([]),[M,E]=e.useState(null),[G,H]=e.useState({marca:!0,precio:!0,categoria:!0,subcategoria:!0,colores:!1}),[I,L]=e.useState({collection_id:s.GET.collection?s.GET.collection.split(","):[],category_id:s.GET.category?s.GET.category.split(","):[],brand_id:s.GET.brand?s.GET.brand.split(","):[],subcategory_id:s.GET.subcategory?s.GET.subcategory.split(","):[],price:null,name:s.GET.search||null,sort_by:"created_at",order:"desc"}),[F,B]=e.useState([]),[R,Z]=e.useState(!0),[$,q]=e.useState({currentPage:1,totalPages:1,totalItems:0,itemsPerPage:24,from:0,to:0}),z=async(e=1)=>{Z(!0);try{const s={filter:(e=>{const s=[];if(e.collection_id.length>0){const a=e.collection_id.map((e=>["collection.slug","=",e]));s.push(["or",...a])}if(e.category_id.length>0){const a=e.category_id.map((e=>["category.slug","=",e]));s.push([...a])}if(e.subcategory_id.length>0){const a=e.subcategory_id.map((e=>["subcategory.slug","=",e]));s.push([...a])}if(e.brand_id.length>0){const a=e.brand_id.map((e=>["brand.slug","=",e]));s.push([...a])}return e.price&&s.push(["or",[["final_price",">=",e.price.min],"and",["final_price","<=",e.price.max]]]),e.name&&s.push(["name","contains",e.name]),i(s,"and")})(I),sort:I.sort,skip:(e-1)*$.itemsPerPage,take:$.itemsPerPage,requireTotalCount:!0},a=await f.paginate(s);B(a.data),q({currentPage:e,totalPages:Math.ceil(a.totalCount/$.itemsPerPage),totalItems:a.totalCount,itemsPerPage:$.itemsPerPage,from:(e-1)*$.itemsPerPage+1,to:Math.min(e*$.itemsPerPage,a.totalCount)}),C(null==a?void 0:a.summary.brands),S(null==a?void 0:a.summary.categories),k(null==a?void 0:a.summary.subcategories),A(null==a?void 0:a.summary.priceRanges)}catch(s){}finally{Z(!1)}};e.useEffect((()=>{z($.currentPage)}),[I]);const V=e=>{e>=1&&e<=$.totalPages&&z(e)},K=(e,s)=>{L((a=>{if("price"===e)return{...a,price:a.price&&a.price.min===s.min&&a.price.max===s.max?null:s};const t=Array.isArray(a[e])?a[e]:[],l=t.includes(s)?t.filter((e=>e!==s)):[...t,s];return{...a,[e]:l}}))},D=e=>{H((s=>({...s,[e]:!s[e]})))},[J,O]=e.useState(""),[W,Q]=e.useState(""),[U,X]=e.useState(""),Y=_.filter((e=>e.name.toLowerCase().includes(J.toLowerCase()))),ee=P.filter((e=>e.name.toLowerCase().includes(W.toLowerCase()))),se=N.filter((e=>e.name.toLowerCase().includes(U.toLowerCase()))),[ae,te]=e.useState(!1);return a.jsx("section",{className:"py-12 bg-sections-color customtext-neutral-dark",children:a.jsxs("div",{className:"mx-auto px-primary 2xl:px-0 2xl:max-w-7xl",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between items-center mb-8 pb-4 border-b-2",children:[a.jsx("h2",{className:"text-[32px] md:text-4xl font-bold md:w-6/12",children:null==b?void 0:b.title}),a.jsxs("div",{className:"flex flex-col w-full  items-center gap-4 md:flex-row md:w-5/12",children:[a.jsxs("span",{className:"block md:w-6/12 order-1 md:order-none",children:["Productos seleccionados:"," ",a.jsx("strong",{children:null==F?void 0:F.length})]}),a.jsx("div",{className:"w-full md:w-6/12",children:a.jsx(c,{options:[{value:"created_at:desc",label:"Más reciente"},{value:"created_at:asc",label:"Mas antiguo"},{value:"final_price:asc",label:"Precio: Menor a Mayor"},{value:"final_price:desc",label:"Precio: Mayor a Menor"},{value:"name:asc",label:"Nombre: A-Z"},{value:"name:desc",label:"Nombre: Z-A"}],placeholder:"Ordenar por",onChange:e=>{const[s,a]=e.split(":"),t=[{selector:s,desc:"desc"===a}];L((e=>({...e,sort:t})))},labelKey:"label",valueKey:"value"})})]})]}),a.jsxs("div",{className:"relative flex flex-col lg:flex-row gap-4",children:[a.jsxs("button",{className:"w-full flex lg:hidden gap-2 items-center",onClick:()=>te(!0),children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Filtros"}),a.jsx(o,{className:"h-5 w-5"})]}),a.jsxs("div",{className:(ae?"fixed inset-0  bg-white flex flex-col h-screen z-[999]":"hidden")+" lg:block lg:w-3/12 lg:bg-white lg:p-4 lg:rounded-lg lg:h-max",children:[a.jsxs("div",{className:"fixed top-0 left-0 right-0 bg-white p-4 border-b z-10 h-16 flex items-center justify-between lg:relative lg:p-0 lg:border-none lg:h-auto",children:[a.jsx("h2",{className:"text-xl font-bold",children:"Filtros"}),a.jsx("button",{className:"lg:hidden",onClick:()=>te(!1),children:a.jsx(m,{className:"h-5 w-5"})}),a.jsx(o,{className:"hidden lg:block h-5 w-5"})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto px-4 mt-16 pb-20 lg:mt-0 lg:pb-0 lg:px-0",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("button",{onClick:()=>D("marca"),className:"flex items-center justify-between w-full mb-4 p-2 lg:p-0",children:[a.jsx("span",{className:"font-medium",children:"Marca"}),a.jsx(d,{className:"h-5 w-5 transform transition-transform "+(G.marca?"":"-rotate-180")})]}),G.marca&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(u,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Buscar",className:"w-full pl-10 pr-4 py-3 border rounded-xl focus:ring-0 focus:outline-0",value:U,onChange:e=>X(e.target.value)})]}),a.jsx("div",{className:"space-y-3 max-h-[200px] overflow-y-auto p-1",children:se.map((e=>a.jsxs("label",{className:"flex items-center gap-2 py-1.5",children:[a.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded border-gray-300 accent-primary",onChange:()=>K("brand_id",e.slug)}),a.jsx("span",{className:"text-sm lg:text-base",children:e.name})]},e.id)))})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("button",{onClick:()=>D("categoria"),className:"flex items-center justify-between w-full mb-4 p-2 lg:p-0",children:[a.jsx("span",{className:"font-medium",children:"Categoría"}),a.jsx(d,{className:"h-5 w-5 transform transition-transform "+(G.categoria?"":"-rotate-180")})]}),G.categoria&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(u,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Buscar",className:"w-full pl-10 pr-4 py-3 border rounded-xl focus:ring-0 focus:outline-0",value:J,onChange:e=>O(e.target.value)})]}),a.jsx("div",{className:"space-y-3 max-h-[200px] overflow-y-auto p-1",children:Y.map((e=>{var s,t,l;return a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center gap-2 py-1.5",children:[a.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded border-gray-300 accent-primary",onChange:()=>K("category_id",e.slug),checked:null==(s=I.category_id)?void 0:s.includes(e.slug)}),a.jsx("span",{className:"text-sm lg:text-base",children:e.name})]}),(null==(t=I.category_id)?void 0:t.includes(e.slug))&&a.jsx("ul",{className:"ml-4 pl-3 mt-1 space-y-2 border-l-2 border-gray-200",children:null==(l=e.subcategories)?void 0:l.map((e=>{var s;return a.jsxs("label",{className:"flex items-center gap-2 py-1.5",children:[a.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 accent-primary",onChange:()=>K("subcategory_id",e.slug),checked:null==(s=I.subcategory_id)?void 0:s.includes(e.slug)}),a.jsx("span",{className:"text-sm lg:text-base",children:e.name})]},e.id)}))})]},e.id)}))})]})]}),a.jsxs(x.div,{className:"mb-6",children:[a.jsxs(x.button,{onClick:()=>D("subcategoria"),className:"flex items-center justify-between w-full mb-4 p-2 lg:p-0",whileHover:{x:3},children:[a.jsx("span",{className:"font-medium",children:"Sub Categorías"}),a.jsx(d,{className:"h-5 w-5 transform transition-transform "+(G.subcategoria?"":"-rotate-180")})]}),a.jsx(p,{children:G.subcategoria&&a.jsxs(x.div,{className:"space-y-1",initial:"hidden",animate:"visible",exit:"hidden",variants:{hidden:{opacity:0,height:0},visible:{opacity:1,height:"auto"}},children:[a.jsxs("div",{className:"relative",children:[a.jsx(u,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Buscar",className:"w-full pl-10 pr-4 py-3 border rounded-xl focus:ring-0 focus:outline-0",value:W,onChange:e=>Q(e.target.value)})]}),a.jsx("div",{className:"max-h-[200px] overflow-y-auto p-1",children:ee.map((e=>{var s;const t=null==(s=I.subcategory_id)?void 0:s.includes(e.slug);return a.jsx(x.div,{className:"group py-2 rounded-md "+(t?"bg-primary":"bg-transparent"),children:a.jsxs("label",{className:"flex items-center gap-2 px-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",className:"hidden",onChange:()=>K("subcategory_id",e.slug),checked:t}),a.jsx("span",{className:"text-sm lg:text-base "+(t?"text-white":"text-gray-700"),children:e.name})]})},e.id)}))})]})})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("button",{onClick:()=>D("precio"),className:"flex items-center justify-between w-full mb-4 p-2 lg:p-0",children:[a.jsx("span",{className:"font-medium",children:"Precio"}),a.jsx(d,{className:"h-5 w-5 transform transition-transform "+(G.precio?"":"-rotate-180")})]}),G.precio&&a.jsx("div",{className:"space-y-3 p-1",children:T.map((e=>{var s,t;return a.jsxs("label",{className:"flex items-center gap-2 py-1.5",children:[a.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded border-gray-300 accent-primary",onChange:()=>K("price",e),checked:(null==(s=I.price)?void 0:s.min)===e.min&&(null==(t=I.price)?void 0:t.max)===e.max}),a.jsx("span",{className:"text-sm lg:text-base",children:`S/ ${e.min} - S/ ${e.max}`})]},`${e.min}-${e.max}`)}))})]})]}),a.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t p-4 h-20 flex items-center lg:hidden",children:a.jsx("button",{className:"w-full bg-primary text-white py-3 rounded-xl font-bold hover:bg-primary-dark transition-colors",onClick:()=>te(!1),children:"Ver resultados"})})]}),a.jsxs("div",{className:"w-full lg:w-9/12 py-4",children:[R?a.jsx("div",{className:"flex items-center flex-wrap gap-y-8 transition-all duration-300 ease-in-out",children:[1,2,3,4,5,6,7,8,9,10,11,12].map((e=>a.jsx(j,{},e)))}):a.jsx("div",{className:"flex items-center flex-wrap gap-y-8 transition-all duration-300 ease-in-out",children:Array.isArray(F)&&F.length>0?F.map((e=>a.jsx("div",{className:"   w-1/2 lg:w-1/3 xl:w-1/4 lg:h-[460px] lg:max-h-[460px]  xl:h-[400px] xl:max-h-[400px] 2xl:h-[430px] 2xl:max-h-[430px] flex items-center justify-center",children:a.jsx(r,{data:b,product:e,widthClass:"w-full sm:w-full lg:w-full",cart:w,setCart:v})},e.id))):a.jsx(n,{})}),a.jsxs(x.div,{className:"flex flex-col md:flex-row justify-between items-center mb-4 w-full mt-8 gap-4",children:[a.jsx("div",{className:"customtext-primary font-semibold w-full md:w-auto",children:a.jsx("div",{className:"overflow-x-auto pb-2",children:a.jsxs("nav",{className:"flex items-center gap-x-2 min-w-max",children:[a.jsx(x.button,{className:"p-4 inline-flex items-center "+(1===$.currentPage?"opacity-50 cursor-not-allowed":""),onClick:()=>V($.currentPage-1),disabled:1===$.currentPage,whileHover:{scale:1.1},whileTap:{scale:.9},children:a.jsx(h,{})}),(()=>{const e=[],s=$.totalPages,a=$.currentPage;for(let t=1;t<=s;t++)1===t||t===s||t>=a-2&&t<=a+2?e.push(t):t!==a-2-1&&t!==a+2+1||e.push("...");return e.filter(((e,s,a)=>"..."!==e||"..."!==a[s-1]))})().map(((e,s)=>a.jsx(t.Fragment,{children:"..."===e?a.jsx("span",{className:"w-10 h-10 bg-transparent p-2 inline-flex items-center justify-center rounded-full",children:"..."}):a.jsx(x.button,{className:"w-10 h-10 p-2 inline-flex items-center justify-center rounded-full transition-all duration-300 \n                                                        "+(e===$.currentPage?"bg-primary text-white":"bg-transparent hover:text-white hover:bg-primary"),onClick:()=>V(e),whileHover:{scale:1.05},whileTap:{scale:.95},children:e})},s))),a.jsx(x.button,{className:"p-4 inline-flex items-center "+($.currentPage===$.totalPages?"opacity-50 cursor-not-allowed":""),onClick:()=>V($.currentPage+1),disabled:$.currentPage===$.totalPages,whileHover:{scale:1.1},whileTap:{scale:.9},children:a.jsx(g,{})})]})})}),a.jsx("div",{className:"w-full md:w-auto text-center md:text-right",children:a.jsxs("p",{className:"font-semibold",children:[$.from," - ",$.to," de"," ",$.totalItems," Resultados"]})})]})]})]})]})})};export{b as default};
