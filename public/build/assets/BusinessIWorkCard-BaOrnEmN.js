var u=Object.defineProperty;var h=(c,e,o)=>e in c?u(c,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):c[e]=o;var i=(c,e,o)=>h(c,typeof e!="symbol"?e+"":e,o);import"./AboutSimple-Cf8x2fCZ.js";import"./index-BOnQTV8N.js";import{m as n}from"./main-B6F2O9-U.js";import{t as a}from"./CardProductMultivet-ncpmQ0JU.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./index-pSueRYGM.js";import"./index-B6ujFmsw.js";class p{constructor(){i(this,"is_use_notify",!0);i(this,"path",null);i(this,"hasFiles",!1);i(this,"controller",null);i(this,"simpleGet",async(e,o,t=!0)=>{try{const{status:r,result:s}=await n.Fetch(e,o);if(!r)throw new Error((s==null?void 0:s.message)||"Ocurrio un error inesperado");return s.data??!0}catch(r){return t&&a.error("¡Error!",{description:r.message,duration:3e3,position:"bottom-center",richColors:!0}),null}});i(this,"paginate",async e=>{this.controller.abort("Nothing"),this.controller=new AbortController;const o=this.controller.signal;return await(await fetch(`/api/${this.path}/paginate`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(n.Cookies.get("XSRF-TOKEN"))},body:JSON.stringify(e),signal:o})).json()});i(this,"save",async(e,o=()=>{})=>{try{let t=!1,r={};if(this.hasFiles){const s=await fetch(`/api/${this.path}`,{method:"POST",headers:{"X-Xsrf-Token":decodeURIComponent(n.Cookies.get("XSRF-TOKEN"))},body:e});t=s.ok,r=JSON.parseable(await s.text())}else{const s=await n.Fetch(`/api/${this.path}`,{method:"POST",body:JSON.stringify(e)});t=s.status,r=s.result}if(!t)throw new Error((r==null?void 0:r.message)||"Ocurrio un error inesperado");return this.is_use_notify&&a.success("¡Excelente!",{description:r.message,duration:3e3,position:"bottom-center",richColors:!0}),o==null||o(),(r==null?void 0:r.data)??!0}catch(t){return a.error("¡Error!",{description:t.message,duration:3e3,position:"bottom-center",richColors:!0}),null}});i(this,"status",async({id:e,status:o})=>{try{const{status:t,result:r}=await n.Fetch(`/api/${this.path}/status`,{method:"PATCH",body:JSON.stringify({id:e,status:o})});if(!t)throw new Error((r==null?void 0:r.message)??"Ocurrio un error inesperado");return a.success("¡Excelente!",{description:r.message,duration:3e3,position:"bottom-center",richColors:!0}),!0}catch(t){return a.error("¡Error!",{description:t.message,duration:3e3,position:"bottom-center",richColors:!0}),!1}});i(this,"boolean",async({id:e,field:o,value:t})=>{try{const{status:r,result:s}=await n.Fetch(`/api/${this.path}/boolean`,{method:"PATCH",body:JSON.stringify({id:e,field:o,value:t})});if(!r)throw new Error((s==null?void 0:s.message)??"Ocurrio un error inesperado");return a.success("¡Excelente!",{description:s.message,duration:3e3,position:"bottom-center",richColors:!0}),!0}catch(r){return a.error("¡Error!",{description:r.message,duration:3e3,position:"bottom-center",richColors:!0}),!1}});i(this,"delete",async e=>{try{const{status:o,result:t}=await n.Fetch(`/api/${this.path}/${e}`,{method:"DELETE"});if(!o)throw new Error((t==null?void 0:t.message)??"Ocurrio un error inesperado");return a.success("¡Excelente!",{description:t.message,duration:3e3,position:"bottom-center",richColors:!0}),!0}catch(o){return a.error("¡Error!",{description:o.message,duration:3e3,position:"bottom-center",richColors:!0}),!1}});i(this,"get",async(e={},o=[])=>{try{let t=`/api/${this.path}`;if(typeof e=="string"||typeof e=="number")t+=`/${e}`;else if(typeof e=="object"&&Object.keys(e).length>0){const s=new URLSearchParams(e).toString();t+=`?${s}`}if(o.length>0){const s=o.join(",");t+=`${t.includes("?")?"&":"?"}with=${s}`}const r=await fetch(t,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(n.Cookies.get("XSRF-TOKEN"))}});if(!r.ok)throw new Error(`Error ${r.status}: ${r.statusText}`);return await r.json()}catch(t){return a.error("¡Error!",{description:t.message,duration:3e3,position:"bottom-center",richColors:!0}),null}});i(this,"reorder",async(e,o)=>{try{const t=await fetch(`/api/${this.path}/${e}/reorder`,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(n.Cookies.get("XSRF-TOKEN"))},body:JSON.stringify({order_index:o})});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.json();return this.is_use_notify&&r.success&&a.success("¡Excelente!",{description:r.message,duration:3e3,position:"bottom-center",richColors:!0}),r}catch(t){return this.is_use_notify&&a.error("¡Error!",{description:t.message,duration:3e3,position:"bottom-center",richColors:!0}),console.error("Error reordering:",t),!1}});this.controller=new AbortController}}class d extends p{constructor(){super(...arguments);i(this,"path","users-by-services-by-business");i(this,"inviteUser",async(o,t)=>{try{const{status:r,result:s}=await n.Fetch(`/api/${this.path}`,{method:"POST",body:JSON.stringify({email:o,match:t})});if(!r)throw new Error((s==null?void 0:s.message)||"Ocurrio un error al agregar el usuario");return n.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:s.message,type:"success"}),!0}catch(r){return n.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:r.message,type:"danger"}),!1}});i(this,"authorize",async o=>{try{const{status:t,result:r}=await n.Fetch(`/api/${this.path}/authorize`,{method:"POST",body:JSON.stringify(o)});if(!t)throw new Error((r==null?void 0:r.message)||"Ocurrio un error al abrir el servicio");return n.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:r.message,type:"success"}),!0}catch(t){return n.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:t.message,type:"danger"}),!1}})}}new d;
