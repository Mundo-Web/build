var V=Object.defineProperty;var M=(s,r,a)=>r in s?V(s,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[r]=a;var R=(s,r,a)=>M(s,typeof r!="symbol"?r+"":r,a);import{j as t}from"./AboutSimple-Cf8x2fCZ.js";import{B as L}from"./Base-CwtY5FYH.js";import{S as P}from"./SwitchFormGroup-DXN0cwVk.js";import{r as n}from"./index-BOnQTV8N.js";import{c as H}from"./ReactAppend-CxMClIhj.js";import{S as _}from"./CartKuchara-CVImXKD8.js";import{B as Q}from"./BasicRest-tjV1jpAY.js";import{W}from"./WebDetailsRest-gRzBOvIR.js";import{B as z}from"./BasicEditing-Dv8KQfAg.js";import{M as J}from"./Modal-xDw9ufjg.js";import{T as K}from"./Table-wUpTDdrv.js";import{D as E}from"./DxButton-DV0H-ZcL.js";import{I as f}from"./InputFormGroup-iZIO11ZN.js";import{S as U}from"./SelectFormGroup-X8WqJHHl.js";import{A as X}from"./ArrayDetails2Object-DR0Igcn7.js";import{C as Y}from"./CreateReactScript-B1eM-GvR.js";import{R as C}from"./ReactAppend-C2Knef3a.js";import{I as Z}from"./ImageFormGroup-40MuGzez.js";import{Q as ee}from"./QuillFormGroup-BXX8qnUc.js";import"./index-yBjzXJbu.js";import"./Global-Bz6gVLc5.js";import"./tippy-react.esm-BGU1pa2o.js";import"./index-B8-haksW.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./index-BLHw34Di.js";/* empty css              */import"./Logout-DK3gcKZh.js";import"./main-iQpBVKTZ.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./MenuItemContainer-B4uedZKJ.js";import"./index.esm-BaU9YRy4.js";import"./index-B9ygI19o.js";import"./CanAccess-BFw0ohJq.js";import"./CardProductKatya-BPLqIfPk.js";import"./BooleanLimit-D-OsQsek.js";import"./em-Dm5QugzS.js";import"./HtmlContent-ghmllTyl.js";/* empty css               */import"./General-apRuNwp7.js";import"./LaravelSession-Dz9cpV3l.js";class te extends Q{constructor(){super(...arguments);R(this,"path","admin/aboutus");R(this,"hasFiles",!0)}}const m=new te,oe=new W,T=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.hostname.includes(".local")||window.location.hostname.includes(".test"),re=[{value:"section-hero",text:"ðŸ¦¸â€â™‚ï¸ Hero Principal - SecciÃ³n principal con tÃ­tulo e imagen"},{value:"section-mision",text:"ðŸŽ¯ MisiÃ³n - SecciÃ³n de misiÃ³n de la empresa"},{value:"section-vision",text:"ðŸ”­ VisiÃ³n - SecciÃ³n de visiÃ³n de la empresa"},{value:"section-valores",text:"â­ Valores - Grid de valores empresariales"},{value:"section-equipo",text:"ðŸ‘¥ Nuestro Equipo - PresentaciÃ³n del equipo"},{value:"section-historia",text:"ðŸ“š Nuestra Historia - Historia de la empresa"},{value:"section-cta",text:"ðŸ“ž Call to Action - SecciÃ³n de contacto final"}],ie=({details:s,session:r,hasRootRole:a})=>{const u=n.useRef(),d=n.useRef(),y=n.useCallback(()=>{var e;return typeof a<"u"?a:((e=r==null?void 0:r.roles)==null?void 0:e.some(o=>o.name==="Root"))||!1},[a,r]),g=n.useRef(),p=n.useRef(),v=n.useRef(),x=n.useRef(),b=n.useRef(),h=n.useRef(),l=n.useRef(),[B,w]=n.useState(!1),j=e=>{e!=null&&e.id?w(!0):w(!1),l.resetDeleteFlag&&l.resetDeleteFlag(),g.current.value=(e==null?void 0:e.id)??"",p.current.value=(e==null?void 0:e.correlative)??"",v.current.value=(e==null?void 0:e.name)??"",x.editor.root.innerHTML=(e==null?void 0:e.description)??"",b.current.value=(e==null?void 0:e.title)??"",h.current.value=(e==null?void 0:e.link)??"",l.current.value=null,l.image.src=e!=null&&e.image?`/storage/images/aboutus/${e.image}`:"",$(d.current).modal("show")},I=async e=>{e.preventDefault();const o={id:g.current.value||void 0,correlative:p.current.value,name:v.current.value,description:x.current.value,title:b.current.value,link:h.current.value},i=new FormData;for(const S in o)i.append(S,o[S]);const D=l.current.files[0];D&&i.append("image",D),l.getDeleteFlag&&l.getDeleteFlag()&&i.append("image_delete","DELETE"),await m.save(i)&&(l.resetDeleteFlag&&l.resetDeleteFlag(),$(u.current).dxDataGrid("instance").refresh(),$(d.current).modal("hide"))},k=async({id:e,value:o})=>{await m.boolean({id:e,field:"visible",value:o})&&$(u.current).dxDataGrid("instance").refresh()},q=async e=>{const{isConfirmed:o}=await _.fire({title:"Eliminar recurso",text:"Â¿Estas seguro de eliminar este about?",icon:"warning",showCancelButton:!0,confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"});!o||!await m.delete(e)||$(u.current).dxDataGrid("instance").refresh()},A=async e=>{const o=e.toIndex;try{await m.reorder(e.itemData.id,o)&&await e.component.refresh()}catch(i){console.error("Error reordering about:",i)}},[c,G]=n.useState(X(s)),[N,F]=n.useState(!1),O=async e=>{oe.save({page:"about",name:"video",description:e.target.value})&&(G(i=>({...i,"about.video":e.target.value})),F(!1))};return t.jsxs(t.Fragment,{children:[t.jsx(K,{gridRef:u,title:t.jsxs(t.Fragment,{children:[t.jsx(z,{correlative:"about",details:s}),N?t.jsx("input",{className:"form-control form-control-sm mb-1",defaultValue:c==null?void 0:c["about.video"],onBlur:O,autoFocus:!0}):t.jsx("smal",{className:"header-title mt-1",onClick:()=>F(!0),children:(c==null?void 0:c["about.video"])||"Sin video"})]}),rest:m,rowDragging:{allowReordering:!0,onReorder:A,dropFeedbackMode:"push"},sorting:{mode:"single"},toolBar:e=>{e.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(u.current).dxDataGrid("instance").refresh()}}),T&&e.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Nuevo About",hint:"Agregar nuevo about",onClick:()=>j()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"order_index",caption:"Orden",visible:!1,sortOrder:"asc",sortIndex:0},{dataField:"correlative",caption:"Correlativo",width:150},{dataField:"name",caption:"SecciÃ³n"},{dataField:"title",caption:"TÃ­tulo"},{dataField:"image",caption:"Imagen",cellTemplate:(e,{data:o})=>{C(e,t.jsx("img",{src:`/storage/images/aboutus/${o.image}`,style:{width:"80px",height:"80px",objectFit:"cover",objectPosition:"center",borderRadius:"4px"},onError:i=>i.target.src="/api/cover/thumbnail/null"}))}},{dataField:"visible",caption:"Visible",dataType:"boolean",cellTemplate:(e,{data:o})=>{$(e).empty(),C(e,t.jsx(P,{checked:o.visible==1,onChange:()=>k({id:o.id,value:o.visible==1?0:1})}))}},{caption:"Acciones",cellTemplate:(e,{data:o})=>{e.append(E({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>j(o)})),y()&&e.append(E({className:"btn btn-xs btn-soft-danger ml-1",title:"Eliminar",icon:"fa fa-trash",onClick:()=>q(o.id)}))},allowFiltering:!1,allowExporting:!1}]}),t.jsx(J,{modalRef:d,title:B?"Editar about":"Agregar about",onSubmit:I,size:"md",children:t.jsxs("div",{className:"row",id:"aboutuses-container",children:[t.jsx("input",{ref:g,type:"hidden"}),T?t.jsxs(U,{eRef:p,label:"Tipo de Bloque (Correlativo)",col:"col-12",required:!0,dropdownParent:"#aboutuses-container",helpText:"Selecciona el tipo de bloque que quieres crear",children:[t.jsx("option",{value:"",children:"Selecciona un bloque"}),re.map(e=>t.jsx("option",{value:e.value,children:e.text},e.value))]}):t.jsx(f,{eRef:p,label:"Correlativo",col:"col-12",required:!0}),t.jsx(f,{eRef:v,label:"SecciÃ³n",col:"col-12",required:!0}),t.jsx(f,{eRef:b,label:"TÃ­tulo",col:"col-12"}),t.jsx(f,{eRef:h,label:"Link",col:"col-12"}),t.jsx(ee,{eRef:x,label:"DescripciÃ³n"}),t.jsx(Z,{eRef:l,name:"image",label:"Imagen",col:"col-12",rows:3})]})})]})};Y((s,r)=>{H.createRoot(s).render(t.jsx(L,{...r,title:"Nosotros",children:t.jsx(ie,{...r})}))});
