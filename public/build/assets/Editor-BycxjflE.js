import{r as e,j as s}from"./System-Bybt2Brn.js";import{o as l,p as t,D as a,I as n,T as i,g as r,h as o,U as c,R as d,m,n as u,S as g,e as x,d as p,H as h,c as f,b as v,a as y,Z as b,C as j,F as w,l as N,u as k,f as C,i as S,j as $,k as E}from"./FileSaver.min-7qIKnSDm.js";import{C as M}from"./chevron-left-DoRUFD_L.js";import{E as D}from"./eye-DJ5vw54Z.js";import{T as z}from"./trash-2-CDXts6on.js";import{P as F}from"./plus-4JHYG4O1.js";import{H as R}from"./heart-CyPg-ZZw.js";import{U as V}from"./upload-Dg6XfAsq.js";import"./vendor-BiOv2i5T.js";import"./createLucideIcon-oahCLV50.js";import"./index-DnFyAGLw.js";const A=[{id:"layout-1",name:"Cuatro fotos",template:"grid-cols-2 grid-rows-2 gap-4",cells:4,maskCategories:[{name:"Básicas",masks:["none","circle","rounded","square","rounded-sm","rounded-lg","rounded-full","rounded-rect"]},{name:"Formas",masks:["heart","star","hexagon","triangle","diamond","badge","speech","burst"]},{name:"Fotográficos",masks:["polaroid","vintage","frame","wave","diagonal","bevel","poster","inner-frame"]},{name:"Creativas",masks:["leaf","cloud","flower","ornate","blob1","blob2","blob3"]}]},{id:"layout-2",name:"Dos fotos horizontales",template:"grid-rows-2",cells:2,maskCategories:[{name:"Básicas",masks:["none","circle","rounded","square"]},{name:"Fotográficos",masks:["polaroid","vintage","frame","wave"]}]},{id:"layout-3",name:"Tres fotos mixtas",template:"grid-cols-3 [grid-template-columns:1fr_2fr]",cells:3,maskCategories:[{name:"Formas",masks:["heart","star","hexagon","triangle"]},{name:"Fotográficos",masks:["polaroid","vintage","frame","wave"]}]},{id:"layout-4",name:"Collage 2x2",template:"grid-cols-2 grid-rows-2",cells:4,maskCategories:[{name:"Básicas",masks:["none","circle","rounded"]},{name:"Formas",masks:["heart","star","hexagon"]}]},{id:"layout-5",name:"Mosaico",template:"grid-cols-3 grid-rows-2",cells:6,maskCategories:[{name:"Básicas",masks:["none","circle","square"]},{name:"Creativas",masks:["leaf","cloud","flower"]}]}],B=[{id:"none",name:"Sin máscara",class:"",category:"Básicas",icon:s.jsx(g,{className:"h-4 w-4"})},{id:"circle",name:"Círculo",class:"rounded-full",category:"Básicas",icon:s.jsx(x,{className:"h-4 w-4"})},{id:"rounded",name:"Redondeado",class:"rounded-xl",category:"Básicas",icon:s.jsx(g,{className:"h-4 w-4 rounded-md"})},{id:"square",name:"Cuadrado",class:"",category:"Básicas",icon:s.jsx(g,{className:"h-4 w-4"})},{id:"heart",name:"Corazón",class:"mask-heart",category:"Formas",icon:s.jsx(R,{className:"h-4 w-4"})},{id:"star",name:"Estrella",class:"mask-star-2",category:"Formas",icon:s.jsx(p,{className:"h-4 w-4"})},{id:"hexagon",name:"Hexágono",class:"mask-hexagon",category:"Formas",icon:s.jsx(h,{className:"h-4 w-4"})},{id:"triangle",name:"Triángulo",class:"mask-triangle",category:"Formas",icon:s.jsx("div",{className:"w-4 h-4 bg-current clip-triangle"})},{id:"diamond",name:"Diamante",class:"mask-diamond",category:"Formas",icon:s.jsx(f,{className:"h-4 w-4"})},{id:"polaroid",name:"Polaroid",class:"mask-polaroid",category:"Fotográficos",icon:s.jsx(v,{className:"h-4 w-4"})},{id:"vintage",name:"Vintage",class:"mask-vintage",category:"Fotográficos",icon:s.jsx(y,{className:"h-4 w-4"})},{id:"wave",name:"Onda",class:"mask-wave",category:"Fotográficos",icon:s.jsx(b,{className:"h-4 w-4"})},{id:"diagonal",name:"Diagonal",class:"mask-diagonal",category:"Fotográficos",icon:s.jsx("div",{className:"w-4 h-4 bg-current clip-diagonal"})},{id:"frame",name:"Marco",class:"mask-frame",category:"Fotográficos",icon:s.jsx(g,{className:"h-4 w-4"})},{id:"leaf",name:"Hoja",class:"mask-leaf",category:"Creativas",icon:s.jsx(y,{className:"h-4 w-4"})},{id:"cloud",name:"Nube",class:"mask-cloud",category:"Creativas",icon:s.jsx(j,{className:"h-4 w-4"})},{id:"flower",name:"Flor",class:"mask-flower",category:"Creativas",icon:s.jsx(w,{className:"h-4 w-4"})},{id:"ornate",name:"Ornamento",class:"mask-ornate",category:"Creativas",icon:s.jsx("div",{className:"w-4 h-4 bg-current clip-ornate"})},{id:"blob1",name:"Mancha 1",class:"mask-blob1",category:"Creativas",icon:s.jsx("div",{className:"w-4 h-4 bg-current rounded-full"})},{id:"blob2",name:"Mancha 2",class:"mask-blob2",category:"Creativas",icon:s.jsx("div",{className:"w-4 h-4 bg-current rounded-full"})},{id:"blob3",name:"Mancha 3",class:"mask-blob3",category:"Creativas",icon:s.jsx("div",{className:"w-4 h-4 bg-current rounded-full"})},{id:"rounded-sm",name:"Redondeado pequeño",class:"rounded-md",category:"Básicas",icon:s.jsx(g,{className:"h-4 w-4 rounded-sm"})},{id:"rounded-lg",name:"Redondeado grande",class:"rounded-2xl",category:"Básicas",icon:s.jsx(g,{className:"h-4 w-4 rounded-lg"})},{id:"rounded-full",name:"Círculo perfecto",class:"rounded-full",category:"Básicas",icon:s.jsx(x,{className:"h-4 w-4"})},{id:"bevel",name:"Biselado",class:"mask-bevel",category:"Fotográficos",icon:s.jsx(g,{className:"h-4 w-4"})},{id:"poster",name:"Poster",class:"mask-poster",category:"Fotográficos",icon:s.jsx(v,{className:"h-4 w-4"})},{id:"badge",name:"Insignia",class:"mask-badge",category:"Formas",icon:s.jsx("div",{className:"w-4 h-4 bg-current clip-badge"})},{id:"speech",name:"Globo de texto",class:"mask-speech",category:"Formas",icon:s.jsx("div",{className:"w-4 h-4 bg-current clip-speech"})},{id:"burst",name:"Estallido",class:"mask-burst",category:"Formas",icon:s.jsx(b,{className:"h-4 w-4"})},{id:"rounded-rect",name:"Rectángulo redondeado",class:"mask-rounded-rect",category:"Básicas",icon:s.jsx(g,{className:"h-4 w-4 rounded-md"})},{id:"inner-frame",name:"Marco interno",class:"mask-inner-frame",category:"Fotográficos",icon:s.jsx(g,{className:"h-4 w-4"})}],H=["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],L=[{name:"Normal",filters:{brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0}},{name:"Vintage",filters:{brightness:90,contrast:110,saturation:80,tint:20,hue:10,blur:1}},{name:"Blanco y negro",filters:{brightness:100,contrast:120,saturation:0,tint:0,hue:0,blur:0}},{name:"Brillante",filters:{brightness:120,contrast:90,saturation:120,tint:0,hue:0,blur:0}},{name:"Oscuro",filters:{brightness:80,contrast:120,saturation:90,tint:10,hue:0,blur:1}},{name:"Sepia",filters:{brightness:90,contrast:100,saturation:50,tint:80,hue:0,blur:0}},{name:"Cálido",filters:{brightness:100,contrast:100,saturation:110,tint:15,hue:20,blur:0}},{name:"Frío",filters:{brightness:100,contrast:100,saturation:110,tint:0,hue:200,blur:0}}],P=({children:e,onClick:l,className:t="",variant:a="default",size:n="default",disabled:i=!1,icon:r=null})=>s.jsxs("button",{className:`inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background ${{default:"bg-purple-600 text-white hover:bg-purple-700",outline:"border border-input hover:bg-accent hover:text-accent-foreground",ghost:"hover:bg-accent hover:text-accent-foreground",secondary:"bg-gray-100 text-gray-800 hover:bg-gray-200"}[a]} ${{default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md text-sm",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10","icon-sm":"h-8 w-8"}[n]} ${t} gap-2`,onClick:l,disabled:i,children:[r&&s.jsx("span",{className:"w-4 h-4",children:r}),e]}),I=({value:l=[50],min:t=0,max:a=100,step:n=1,onValueChange:i,label:r,unit:o="%"})=>{const[c,d]=e.useState(l[0]);return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:r}),s.jsxs("span",{className:"text-sm text-gray-500",children:[c,o]})]}),s.jsx("div",{className:"relative flex w-full touch-none select-none items-center",children:s.jsx("input",{type:"range",min:t,max:a,step:n,value:c,onChange:e=>{const s=Number.parseInt(e.target.value);d(s),i&&i([s])},className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-purple-600"})})]})},O=({id:e,elements:l=[],selectedElement:t,onSelectElement:a,onAddElement:n,onUpdateElement:i,onDeleteElement:r,availableMasks:o=[]})=>{const[{isOver:c},d]=N((()=>({accept:["IMAGE_FILE","TEXT_ELEMENT","IMAGE_ELEMENT"],drop:e=>{if(e.files){const s=new FileReader;s.onload=e=>{var s;if(null==(s=e.target)?void 0:s.result){const s={id:`img-${Date.now()}`,type:"image",content:e.target.result,position:{x:10,y:10},filters:{brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0,scale:1,rotate:0,opacity:100,blendMode:"normal"},mask:"none"};n(s)}},s.readAsDataURL(e.files[0])}},collect:e=>({isOver:!!e.isOver({shallow:!0})})})));return s.jsx("div",{ref:d,className:"relative aspect-square bg-gray-50 rounded-lg overflow-hidden "+(c?"ring-2 ring-purple-500 bg-purple-50":""),onClick:()=>a(null),children:0===l.length?s.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center gap-2 cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>{const e=document.createElement("input");e.type="file",e.accept="image/*",e.onchange=e=>{if(e.target.files&&e.target.files[0]){const s=new FileReader;s.onload=e=>{var s;if(null==(s=e.target)?void 0:s.result){const s={id:`img-${Date.now()}`,type:"image",content:e.target.result,position:{x:10,y:10},filters:{brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0,scale:1,rotate:0,opacity:100,blendMode:"normal"},mask:"none"};n(s)}},s.readAsDataURL(e.target.files[0])}},e.click()},children:[s.jsx(V,{className:"h-8 w-8 text-gray-400"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Haz clic o arrastra una imagen"})]}):l.map((e=>s.jsx("div",{className:"absolute inset-0",children:"image"===e.type?s.jsx(T,{element:e,isSelected:t===e.id,onSelect:()=>a(e.id),onUpdate:s=>i(e.id,s),onDelete:()=>r(e.id),availableMasks:o}):s.jsx(U,{element:e,isSelected:t===e.id,onSelect:()=>a(e.id),onUpdate:s=>i(e.id,s),onDelete:()=>r(e.id)})},e.id)))})},T=({element:l,isSelected:t,onSelect:a,onUpdate:n,onDelete:i,availableMasks:r=[]})=>{var o,c,d,m,u,g,x,p,h,f,v,y;const[{isDragging:b},j]=k((()=>({type:"IMAGE_ELEMENT",item:{id:l.id},collect:e=>({isDragging:!!e.isDragging()})}))),w=e.useRef(null),[N,M]=e.useState(!1),[D,F]=e.useState({x:0,y:0}),[R,V]=e.useState(!1),[A,H]=e.useState({x:0,y:0}),L={filter:`\n      brightness(${((null==(o=l.filters)?void 0:o.brightness)||100)/100})\n      contrast(${((null==(c=l.filters)?void 0:c.contrast)||100)/100})\n      saturate(${((null==(d=l.filters)?void 0:d.saturation)||100)/100})\n      sepia(${((null==(m=l.filters)?void 0:m.tint)||0)/100})\n      hue-rotate(${3.6*((null==(u=l.filters)?void 0:u.hue)||0)}deg)\n      blur(${(null==(g=l.filters)?void 0:g.blur)||0}px)\n    `,transform:`scale(${(null==(x=l.filters)?void 0:x.scale)||1}) rotate(${(null==(p=l.filters)?void 0:p.rotate)||0}deg) ${(null==(h=l.filters)?void 0:h.flipHorizontal)?"scaleX(-1)":""} ${(null==(f=l.filters)?void 0:f.flipVertical)?"scaleY(-1)":""}`,mixBlendMode:(null==(v=l.filters)?void 0:v.blendMode)||"normal",opacity:((null==(y=l.filters)?void 0:y.opacity)||100)/100},P=B.find((e=>e.id===l.mask))||B[0],I=e=>{if(N&&w.current){const s=w.current.parentElement.getBoundingClientRect(),l=e.clientX-D.x,t=e.clientY-D.y,a=s.width-w.current.offsetWidth,i=s.height-w.current.offsetHeight,r=Math.max(0,Math.min(l,a)),o=Math.max(0,Math.min(t,i));n({position:{x:r,y:o}})}},O=()=>{M(!1)};e.useEffect((()=>(N&&(window.addEventListener("mousemove",I),window.addEventListener("mouseup",O)),()=>{window.removeEventListener("mousemove",I),window.removeEventListener("mouseup",O)})),[N,D]);const T=e.useCallback((e=>{w.current=e,j(e)}),[j]);return s.jsxs("div",{ref:T,className:`absolute ${P.class} ${t?"ring-2 ring-purple-500":""} ${b?"opacity-50":"opacity-100"}`,style:{left:`${l.position.x}px`,top:`${l.position.y}px`,width:"100%",height:"100%",cursor:t?"move":"pointer"},onClick:e=>{e.stopPropagation(),a()},onMouseDown:e=>{t&&(e.stopPropagation(),M(!0),F({x:e.clientX-l.position.x,y:e.clientY-l.position.y}))},onContextMenu:e=>{e.preventDefault(),e.stopPropagation(),H({x:e.clientX,y:e.clientY}),V(!0)},children:[s.jsx("div",{className:"w-full h-full overflow-hidden",children:s.jsx("img",{src:l.content,alt:"Imagen cargada",className:"w-full h-full object-cover",style:L})}),t&&s.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[s.jsx("button",{className:"bg-white rounded-full p-1 shadow-md hover:bg-gray-100",onClick:e=>{var s;e.stopPropagation(),n({filters:{...l.filters,rotate:((null==(s=l.filters)?void 0:s.rotate)||0)+90}})},children:s.jsx(C,{className:"h-4 w-4 text-gray-700"})}),s.jsx("button",{className:"bg-white rounded-full p-1 shadow-md hover:bg-gray-100",onClick:e=>{e.stopPropagation(),i()},children:s.jsx(z,{className:"h-4 w-4 text-gray-700"})})]}),R&&s.jsxs("div",{className:"fixed bg-white shadow-lg rounded-md z-50 py-1 w-48",style:{left:`${A.x}px`,top:`${A.y}px`},onClick:e=>e.stopPropagation(),children:[s.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:()=>{const e=document.createElement("input");e.type="file",e.accept="image/*",e.onchange=e=>{if(e.target.files&&e.target.files[0]){const s=new FileReader;s.onload=e=>{var s;(null==(s=e.target)?void 0:s.result)&&n({content:e.target.result})},s.readAsDataURL(e.target.files[0])}},e.click(),V(!1)},children:[s.jsx(S,{className:"h-4 w-4"}),"Reemplazar imagen"]}),s.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:()=>{const e={...JSON.parse(JSON.stringify(l)),id:`img-${Date.now()}`,position:{x:l.position.x+20,y:l.position.y+20}};n(e,!0),V(!1)},children:[s.jsx($,{className:"h-4 w-4"}),"Duplicar"]}),s.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:()=>{var e;n({filters:{...l.filters,opacity:Math.max(0,((null==(e=l.filters)?void 0:e.opacity)||100)-10)}}),V(!1)},children:[s.jsx(E,{className:"h-4 w-4"}),"Reducir opacidad"]}),s.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:()=>{i(),V(!1)},children:[s.jsx(z,{className:"h-4 w-4"}),"Eliminar"]})]})]})},U=({element:l,isSelected:t,onSelect:a,onUpdate:n,onDelete:r})=>{var o,c,d,m,u,g,x,p,h,f,v,y,b,j,w;const[N,C]=e.useState(!1),S=e.useRef(null),M=e.useRef(null),[{isDragging:D},F]=k((()=>({type:"TEXT_ELEMENT",item:{id:l.id},collect:e=>({isDragging:!!e.isDragging()})}))),[R,V]=e.useState(!1),[A,B]=e.useState({x:0,y:0}),[H,L]=e.useState(!1),[P,I]=e.useState({x:0,y:0}),O=e=>{if(R&&M.current){const s=M.current.parentElement.getBoundingClientRect(),l=e.clientX-A.x,t=e.clientY-A.y,a=s.width-M.current.offsetWidth,i=s.height-M.current.offsetHeight,r=Math.max(0,Math.min(l,a)),o=Math.max(0,Math.min(t,i));n({position:{x:r,y:o}})}},T=()=>{V(!1)};e.useEffect((()=>(R&&(window.addEventListener("mousemove",O),window.addEventListener("mouseup",T)),()=>{window.removeEventListener("mousemove",O),window.removeEventListener("mouseup",T)})),[R,A]);const U=e.useCallback((e=>{M.current=e,F(e)}),[F]),W=(null==(o=l.style)?void 0:o.textShadow)?`${l.style.textShadowX||0}px ${l.style.textShadowY||0}px ${l.style.textShadowBlur||0}px ${l.style.textShadowColor||"rgba(0,0,0,0.5)"}`:"none",X={...l.style,position:"absolute",left:`${l.position.x}px`,top:`${l.position.y}px`,cursor:t&&!N?"move":"pointer",textShadow:W,zIndex:10};return s.jsxs("div",{ref:U,className:`${t?"ring-2 ring-purple-500":""} ${D?"opacity-50":"opacity-100"}`,style:X,onClick:e=>{e.stopPropagation(),a()},onDoubleClick:()=>{C(!0),setTimeout((()=>{S.current&&(S.current.focus(),S.current.select())}),0)},onMouseDown:e=>{t&&!N&&(e.stopPropagation(),V(!0),B({x:e.clientX-l.position.x,y:e.clientY-l.position.y}))},onContextMenu:e=>{e.preventDefault(),e.stopPropagation(),I({x:e.clientX,y:e.clientY}),L(!0)},children:[N?s.jsx("input",{ref:S,type:"text",value:l.content,onChange:e=>{n({content:e.target.value})},onBlur:()=>{C(!1)},onKeyDown:e=>{"Enter"===e.key&&C(!1)},className:"w-full p-1 border border-gray-300 rounded bg-white",style:{fontFamily:null==(c=l.style)?void 0:c.fontFamily,fontSize:null==(d=l.style)?void 0:d.fontSize,fontWeight:null==(m=l.style)?void 0:m.fontWeight,fontStyle:null==(u=l.style)?void 0:u.fontStyle,textDecoration:null==(g=l.style)?void 0:g.textDecoration,color:null==(x=l.style)?void 0:x.color,textAlign:null==(p=l.style)?void 0:p.textAlign,minWidth:"100px"},autoFocus:!0}):s.jsx("div",{className:"p-2 rounded",style:{backgroundColor:(null==(h=l.style)?void 0:h.backgroundColor)||"transparent",padding:(null==(f=l.style)?void 0:f.padding)||"8px",borderRadius:(null==(v=l.style)?void 0:v.borderRadius)||"0px",border:(null==(y=l.style)?void 0:y.border)||"none"},children:l.content||"Editar texto"}),t&&s.jsxs("div",{className:"absolute top-0 right-0 transform translate-y-[-100%] flex gap-1 bg-white rounded-t-md p-1 shadow-sm",children:[s.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",onClick:e=>{var s;e.stopPropagation(),n({style:{...l.style,fontWeight:"bold"===(null==(s=l.style)?void 0:s.fontWeight)?"normal":"bold"}})},children:s.jsx("span",{className:"text-xs "+("bold"===(null==(b=l.style)?void 0:b.fontWeight)?"font-bold":""),children:"B"})}),s.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",onClick:e=>{var s;e.stopPropagation(),n({style:{...l.style,fontStyle:"italic"===(null==(s=l.style)?void 0:s.fontStyle)?"normal":"italic"}})},children:s.jsx("span",{className:"text-xs "+("italic"===(null==(j=l.style)?void 0:j.fontStyle)?"italic":""),children:"I"})}),s.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",onClick:e=>{var s;e.stopPropagation(),n({style:{...l.style,textDecoration:"underline"===(null==(s=l.style)?void 0:s.textDecoration)?"none":"underline"}})},children:s.jsx("span",{className:"text-xs "+("underline"===(null==(w=l.style)?void 0:w.textDecoration)?"underline":""),children:"U"})}),s.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",onClick:e=>{e.stopPropagation(),r()},children:s.jsx(z,{className:"h-3 w-3 text-gray-700"})})]}),H&&s.jsxs("div",{className:"fixed bg-white shadow-lg rounded-md z-50 py-1 w-48",style:{left:`${P.x}px`,top:`${P.y}px`},onClick:e=>e.stopPropagation(),children:[s.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:()=>{C(!0),L(!1)},children:[s.jsx(i,{className:"h-4 w-4"}),"Editar texto"]}),s.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:()=>{const e={...JSON.parse(JSON.stringify(l)),id:`text-${Date.now()}`,position:{x:l.position.x+10,y:l.position.y+10}};n(e,!0),L(!1)},children:[s.jsx($,{className:"h-4 w-4"}),"Duplicar"]}),s.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:()=>{var e;n({style:{...l.style,opacity:Math.max(0,((null==(e=l.style)?void 0:e.opacity)||1)-.1)}}),L(!1)},children:[s.jsx(E,{className:"h-4 w-4"}),"Reducir opacidad"]}),s.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:()=>{r(),L(!1)},children:[s.jsx(z,{className:"h-4 w-4"}),"Eliminar"]})]})]})},W=({selectedMask:l,onSelect:t,availableMasks:a=[]})=>{var n;const[i,r]=e.useState("Básicas"),o={};return B.forEach((e=>{o[e.category]||(o[e.category]=[]),(a.includes(e.id)||"none"===e.id)&&o[e.category].push(e)})),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Máscaras de imagen"}),s.jsx("div",{className:"flex overflow-x-auto pb-2",children:Object.keys(o).map((e=>o[e].length>0&&s.jsx("button",{className:"px-3 py-1 text-sm whitespace-nowrap "+(i===e?"border-b-2 border-purple-500 font-medium text-purple-600":"text-gray-600 hover:text-gray-900"),onClick:()=>r(e),children:e},e)))}),s.jsx("div",{className:"grid grid-cols-3 gap-3",children:null==(n=o[i])?void 0:n.map((e=>s.jsxs("div",{className:"border rounded-md p-2 cursor-pointer hover:border-purple-500 transition-colors "+(l===e.id?"border-purple-500 ring-2 ring-purple-200":""),onClick:()=>t(e.id),children:[s.jsx("div",{className:"aspect-square bg-gray-100 rounded-md flex items-center justify-center mb-2",children:s.jsx("div",{className:`w-16 h-16 bg-purple-300 ${e.class}`})}),s.jsx("p",{className:"text-center text-sm",children:e.name})]},e.id)))})]})},X=({element:e,onUpdate:l})=>{var t,a,n,i;return s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Ajustes avanzados"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Modo de mezcla"}),s.jsx("select",{className:"w-full border rounded-md p-2 text-sm",value:(null==(t=e.filters)?void 0:t.blendMode)||"normal",onChange:s=>l({filters:{...e.filters,blendMode:s.target.value}}),children:H.map((e=>s.jsx("option",{value:e,children:e},e)))})]}),s.jsx(I,{label:"Opacidad",value:[(null==(a=e.filters)?void 0:a.opacity)||100],min:0,max:100,onValueChange:s=>l({filters:{...e.filters,opacity:s[0]}})}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs(P,{variant:(null==(n=e.filters)?void 0:n.flipHorizontal)?"secondary":"outline",size:"sm",onClick:()=>{var s;return l({filters:{...e.filters,flipHorizontal:!(null==(s=e.filters)?void 0:s.flipHorizontal)}})},children:[s.jsx(r,{className:"h-4 w-4 mr-1"}),"Voltear H"]}),s.jsxs(P,{variant:(null==(i=e.filters)?void 0:i.flipVertical)?"secondary":"outline",size:"sm",onClick:()=>{var s;return l({filters:{...e.filters,flipVertical:!(null==(s=e.filters)?void 0:s.flipVertical)}})},children:[s.jsx(o,{className:"h-4 w-4 mr-1"}),"Voltear V"]})]})]})},J=({onSelectPreset:e})=>s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Filtros predefinidos"}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:L.map((l=>s.jsx(P,{variant:"outline",size:"sm",onClick:()=>e(l.filters),children:l.name},l.name)))})]});function q(){var g,x,p,h,f,v,y,b,j,w,N,k,C,S,$,E,R,V,H,L,T,U,q;const[Y,_]=e.useState([{id:"page-1",layout:"layout-1",cells:Array.from({length:4}).map(((e,s)=>({id:`cell-1-${s+1}`,elements:[]})))}]),[G,Z]=e.useState(0),[K,Q]=e.useState(null),[ee,se]=e.useState(null),[le,te]=e.useState("elements"),[ae,ne]=e.useState("basic"),[ie,re]=e.useState([JSON.stringify(Y)]),[oe,ce]=e.useState(0),[de,me]=e.useState(!1),ue=()=>A.find((e=>e.id===Y[G].layout))||A[0],ge=()=>{if(!K||!ee)return null;const e=Y[G].cells.find((e=>e.id===ee));return e?e.elements.find((e=>e.id===K)):null},xe=e=>{_(e);const s=[...ie.slice(0,oe+1),JSON.stringify(e)];re(s),ce(s.length-1)},pe=(e,s)=>{const l=[...Y],t=l[G].cells.findIndex((s=>s.id===e));-1!==t&&(l[G].cells[t].elements.push(s),xe(l),Q(s.id),se(e))},he=(e,s,l,t=!1)=>{const a=[...Y],n=a[G].cells.findIndex((s=>s.id===e));if(-1!==n){if(t)a[G].cells[n].elements.push({...a[G].cells[n].elements.find((e=>e.id===s)),...l});else{const e=a[G].cells[n].elements.findIndex((e=>e.id===s));-1!==e&&(a[G].cells[n].elements[e]={...a[G].cells[n].elements[e],...l})}xe(a)}},fe=()=>{const e={id:`text-${Date.now()}`,type:"text",content:"Haz clic para editar",position:{x:20,y:20},style:{fontSize:"16px",fontFamily:"Arial",color:"#000000",fontWeight:"normal",fontStyle:"normal",textDecoration:"none",textAlign:"left",backgroundColor:"transparent",padding:"8px",borderRadius:"0px",border:"none",opacity:1}};pe(ee||Y[G].cells[0].id,e)};return s.jsx(l,{backend:t,children:s.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50 mx-auto max-w-7xl",children:[s.jsxs("header",{className:"border-b bg-white p-4 flex items-center justify-between shadow-sm",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs(P,{variant:"ghost",size:"sm",children:[s.jsx(M,{className:"h-5 w-5 mr-1"}),"Regresar"]})}),s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Editor"}),s.jsx("h2",{className:"text-lg text-gray-600",children:"Crea collages y diseños impresionantes"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(P,{variant:"secondary",onClick:()=>{me(!de)},icon:s.jsx(D,{className:"h-4 w-4"}),children:de?"Editar":"Vista previa"}),s.jsx(P,{className:"bg-purple-600 hover:bg-purple-700",icon:s.jsx(a,{className:"h-4 w-4"}),onClick:()=>{const e=document.createElement("canvas"),s=document.querySelector(".page-preview");if(!s)return;const l=s.offsetWidth,t=s.offsetHeight;e.width=2*l,e.height=2*t;const a=e.getContext("2d");a.scale(2,2),a.fillStyle="white",a.fillRect(0,0,l,t),m(s,{scale:2,backgroundColor:null,canvas:e,logging:!1,useCORS:!0}).then((e=>{e.toBlob((e=>{u.saveAs(e,`diseño-pagina-${G+1}.png`)}))}))},children:"Exportar"})]})]}),s.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[s.jsx("aside",{className:"w-64 border-r bg-white p-4 overflow-y-auto shadow-sm",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex border-b pb-4",children:[s.jsx("button",{className:"flex-1 py-2 text-sm font-medium "+("elements"===le?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 hover:text-gray-900"),onClick:()=>te("elements"),children:"Elementos"}),s.jsx("button",{className:"flex-1 py-2 text-sm font-medium "+("filters"===le?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 hover:text-gray-900"),onClick:()=>te("filters"),children:"Filtros"})]}),"elements"===le&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium mb-2",children:"Layouts"}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:A.map((e=>s.jsxs("div",{className:"border rounded-md p-1 cursor-pointer hover:border-purple-500 "+(Y[G].layout===e.id?"border-purple-500 ring-1 ring-purple-200":""),onClick:()=>(e=>{const s=A.find((s=>s.id===e));if(!s)return;const l=[...Y],t=l[G],a=Array.from({length:s.cells}).map(((e,s)=>t.cells[s]||{id:`cell-${t.id}-${s+1}`,elements:[]}));l[G]={...t,layout:e,cells:a},xe(l),Q(null),se(null)})(e.id),children:[s.jsx("div",{className:`grid ${e.template} gap-1 h-20`,children:Array.from({length:e.cells}).map(((e,l)=>s.jsx("div",{className:"bg-gray-100 rounded-sm flex items-center justify-center",children:s.jsx(n,{className:"h-3 w-3 text-gray-400"})},l)))}),s.jsx("p",{className:"text-xs text-center mt-1 truncate",children:e.name})]},e.id)))})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium mb-2",children:"Añadir"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsx(P,{variant:"outline",size:"sm",icon:s.jsx(n,{className:"h-4 w-4"}),onClick:()=>{const e=document.createElement("input");e.type="file",e.accept="image/*",e.onchange=e=>{if(e.target.files&&e.target.files[0]){const s={id:`img-${Date.now()}`,type:"image",content:"",position:{x:10,y:10},filters:{brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0,scale:1,rotate:0,opacity:100,blendMode:"normal"},mask:"none"},l=new FileReader;l.onload=e=>{var l;(null==(l=e.target)?void 0:l.result)&&(s.content=e.target.result,pe(ee||Y[G].cells[0].id,s))},l.readAsDataURL(e.target.files[0])}},e.click()},children:"Imagen"}),s.jsx(P,{variant:"outline",size:"sm",icon:s.jsx(i,{className:"h-4 w-4"}),onClick:fe,children:"Texto"})]})]})]}),"filters"===le&&K&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex border-b",children:[s.jsx("button",{className:"flex-1 py-2 text-sm font-medium "+("basic"===ae?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 hover:text-gray-900"),onClick:()=>ne("basic"),children:"Básicos"}),s.jsx("button",{className:"flex-1 py-2 text-sm font-medium "+("transform"===ae?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 hover:text-gray-900"),onClick:()=>ne("transform"),children:"Transformar"}),s.jsx("button",{className:"flex-1 py-2 text-sm font-medium "+("advanced"===ae?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 hover:text-gray-900"),onClick:()=>ne("advanced"),children:"Avanzados"})]}),"basic"===ae&&s.jsxs(s.Fragment,{children:["image"===(null==(g=ge())?void 0:g.type)&&s.jsx(J,{onSelectPreset:e=>{var s;K&&ee&&he(ee,K,{filters:{...null==(s=ge())?void 0:s.filters,...e}})}}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Ajustes básicos"}),s.jsx(I,{label:"Brillo",value:[(null==(p=null==(x=ge())?void 0:x.filters)?void 0:p.brightness)||100],min:0,max:200,onValueChange:e=>{var s;return he(ee,K,{filters:{...null==(s=ge())?void 0:s.filters,brightness:e[0]}})}}),s.jsx(I,{label:"Contraste",value:[(null==(f=null==(h=ge())?void 0:h.filters)?void 0:f.contrast)||100],min:0,max:200,onValueChange:e=>{var s;return he(ee,K,{filters:{...null==(s=ge())?void 0:s.filters,contrast:e[0]}})}}),s.jsx(I,{label:"Saturación",value:[(null==(y=null==(v=ge())?void 0:v.filters)?void 0:y.saturation)||100],min:0,max:200,onValueChange:e=>{var s;return he(ee,K,{filters:{...null==(s=ge())?void 0:s.filters,saturation:e[0]}})}}),s.jsx(I,{label:"Tono",value:[(null==(j=null==(b=ge())?void 0:b.filters)?void 0:j.hue)||0],min:0,max:360,unit:"°",onValueChange:e=>{var s;return he(ee,K,{filters:{...null==(s=ge())?void 0:s.filters,hue:e[0]}})}}),s.jsx(I,{label:"Sepia",value:[(null==(N=null==(w=ge())?void 0:w.filters)?void 0:N.tint)||0],min:0,max:100,onValueChange:e=>{var s;return he(ee,K,{filters:{...null==(s=ge())?void 0:s.filters,tint:e[0]}})}}),s.jsx(I,{label:"Desenfoque",value:[(null==(C=null==(k=ge())?void 0:k.filters)?void 0:C.blur)||0],min:0,max:20,unit:"px",onValueChange:e=>{var s;return he(ee,K,{filters:{...null==(s=ge())?void 0:s.filters,blur:e[0]}})}})]})]}),"transform"===ae&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Transformación"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsx(P,{variant:(null==($=null==(S=ge())?void 0:S.filters)?void 0:$.flipHorizontal)?"secondary":"outline",size:"sm",icon:s.jsx(r,{className:"h-4 w-4"}),onClick:()=>{var e,s,l;return he(ee,K,{filters:{...null==(e=ge())?void 0:e.filters,flipHorizontal:!(null==(l=null==(s=ge())?void 0:s.filters)?void 0:l.flipHorizontal)}})},children:"Voltear H"}),s.jsx(P,{variant:(null==(R=null==(E=ge())?void 0:E.filters)?void 0:R.flipVertical)?"secondary":"outline",size:"sm",icon:s.jsx(o,{className:"h-4 w-4"}),onClick:()=>{var e,s,l;return he(ee,K,{filters:{...null==(e=ge())?void 0:e.filters,flipVertical:!(null==(l=null==(s=ge())?void 0:s.filters)?void 0:l.flipVertical)}})},children:"Voltear V"})]}),s.jsx(I,{label:"Rotación",value:[(null==(H=null==(V=ge())?void 0:V.filters)?void 0:H.rotate)||0],min:0,max:360,unit:"°",onValueChange:e=>{var s;return he(ee,K,{filters:{...null==(s=ge())?void 0:s.filters,rotate:e[0]}})}}),s.jsx(I,{label:"Escala",value:[100*((null==(T=null==(L=ge())?void 0:L.filters)?void 0:T.scale)||1)],min:10,max:200,onValueChange:e=>{var s;return he(ee,K,{filters:{...null==(s=ge())?void 0:s.filters,scale:e[0]/100}})}})]}),"advanced"===ae&&s.jsx(X,{element:ge(),onUpdate:e=>he(ee,K,e)}),"image"===(null==(U=ge())?void 0:U.type)&&s.jsx(W,{onSelect:e=>he(ee,K,{mask:e}),selectedMask:(null==(q=ge())?void 0:q.mask)||"none",availableMasks:ue().maskCategories.flatMap((e=>e.masks))})]})]})}),s.jsx("main",{className:"flex-1 overflow-auto bg-gray-100 p-6",children:s.jsx("div",{className:"max-w-4xl mx-auto",children:de?s.jsx("div",{className:"bg-white p-8 rounded-lg shadow-lg page-preview",children:s.jsx("div",{className:`grid ${ue().template} gap-6 aspect-[4/3]`,children:Y[G].cells.map((e=>s.jsx("div",{className:"relative bg-gray-50 rounded-lg overflow-hidden",children:e.elements.map((e=>{var l,t,a,n,i,r,o,c,d,m,u,g,x,p,h,f,v,y,b,j,w,N,k,C,S;return"image"===e.type?s.jsx("div",{className:`absolute ${(null==(l=B.find((s=>s.id===e.mask)))?void 0:l.class)||""}`,style:{left:`${e.position.x}px`,top:`${e.position.y}px`,width:"100%",height:"100%"},children:s.jsx("img",{src:e.content,alt:"",className:"w-full h-full object-cover",style:{filter:`\n                                    brightness(${((null==(t=e.filters)?void 0:t.brightness)||100)/100})\n                                    contrast(${((null==(a=e.filters)?void 0:a.contrast)||100)/100})\n                                    saturate(${((null==(n=e.filters)?void 0:n.saturation)||100)/100})\n                                    sepia(${((null==(i=e.filters)?void 0:i.tint)||0)/100})\n                                    hue-rotate(${3.6*((null==(r=e.filters)?void 0:r.hue)||0)}deg)\n                                    blur(${(null==(o=e.filters)?void 0:o.blur)||0}px)\n                                  `,transform:`scale(${(null==(c=e.filters)?void 0:c.scale)||1}) rotate(${(null==(d=e.filters)?void 0:d.rotate)||0}deg) ${(null==(m=e.filters)?void 0:m.flipHorizontal)?"scaleX(-1)":""} ${(null==(u=e.filters)?void 0:u.flipVertical)?"scaleY(-1)":""}`,mixBlendMode:(null==(g=e.filters)?void 0:g.blendMode)||"normal",opacity:((null==(x=e.filters)?void 0:x.opacity)||100)/100}})},e.id):s.jsx("div",{className:"absolute",style:{left:`${e.position.x}px`,top:`${e.position.y}px`,fontFamily:null==(p=e.style)?void 0:p.fontFamily,fontSize:null==(h=e.style)?void 0:h.fontSize,fontWeight:null==(f=e.style)?void 0:f.fontWeight,fontStyle:null==(v=e.style)?void 0:v.fontStyle,textDecoration:null==(y=e.style)?void 0:y.textDecoration,color:null==(b=e.style)?void 0:b.color,textAlign:null==(j=e.style)?void 0:j.textAlign,backgroundColor:(null==(w=e.style)?void 0:w.backgroundColor)||"transparent",padding:(null==(N=e.style)?void 0:N.padding)||"8px",borderRadius:(null==(k=e.style)?void 0:k.borderRadius)||"0px",border:(null==(C=e.style)?void 0:C.border)||"none",opacity:(null==(S=e.style)?void 0:S.opacity)||1},children:e.content},e.id)}))},e.id)))})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 flex items-center gap-4",children:[s.jsx(P,{variant:"ghost",size:"icon",onClick:()=>{oe>0&&(ce(oe-1),_(JSON.parse(ie[oe-1])),Q(null),se(null))},disabled:oe<=0,children:s.jsx(c,{className:"h-5 w-5"})}),s.jsx(P,{variant:"ghost",size:"icon",onClick:()=>{oe<ie.length-1&&(ce(oe+1),_(JSON.parse(ie[oe+1])),Q(null),se(null))},disabled:oe>=ie.length-1,children:s.jsx(d,{className:"h-5 w-5"})}),s.jsx("div",{className:"h-6 border-l"}),s.jsx(P,{variant:"ghost",size:"icon",onClick:()=>{const e=document.createElement("input");e.type="file",e.accept="image/*",e.onchange=e=>{if(e.target.files&&e.target.files[0]){const s={id:`img-${Date.now()}`,type:"image",content:"",position:{x:10,y:10},filters:{brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0,scale:1,rotate:0,opacity:100,blendMode:"normal"},mask:"none"},l=new FileReader;l.onload=e=>{var l;(null==(l=e.target)?void 0:l.result)&&(s.content=e.target.result,pe(ee||Y[G].cells[0].id,s))},l.readAsDataURL(e.target.files[0])}},e.click()},children:s.jsx(n,{className:"h-5 w-5"})}),s.jsx(P,{variant:"ghost",size:"icon",onClick:fe,children:s.jsx(i,{className:"h-5 w-5"})}),s.jsx("div",{className:"h-6 border-l"}),s.jsx(P,{variant:"ghost",size:"icon",onClick:()=>{K&&ee&&((e,s)=>{const l=[...Y],t=l[G].cells.findIndex((s=>s.id===e));-1!==t&&(l[G].cells[t].elements=l[G].cells[t].elements.filter((e=>e.id!==s)),xe(l),K===s&&Q(null))})(ee,K)},disabled:!K,children:s.jsx(z,{className:"h-5 w-5"})})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden page-preview "+(ue().cells<=4?"aspect-[4/3]":""),children:s.jsx("div",{className:`grid ${ue().template} gap-4 h-full p-4`,children:Y[G].cells.map((e=>s.jsx(O,{id:e.id,elements:e.elements,selectedElement:ee===e.id?K:null,onSelectElement:s=>{Q(s),se(e.id)},onAddElement:s=>{const l=[...Y],t=l[G].cells.findIndex((s=>s.id===e.id));-1!==t&&(l[G].cells[t].elements.push(s),xe(l),Q(s.id),se(e.id))},onUpdateElement:(s,l,t)=>{const a=[...Y],n=a[G].cells.findIndex((s=>s.id===e.id));if(-1!==n){if(t)a[G].cells[n].elements.push({...a[G].cells[n].elements.find((e=>e.id===s)),...l});else{const e=a[G].cells[n].elements.findIndex((e=>e.id===s));-1!==e&&(a[G].cells[n].elements[e]={...a[G].cells[n].elements[e],...l})}xe(a)}},onDeleteElement:s=>{const l=[...Y],t=l[G].cells.findIndex((s=>s.id===e.id));-1!==t&&(l[G].cells[t].elements=l[G].cells[t].elements.filter((e=>e.id!==s)),xe(l),K===s&&Q(null))},availableMasks:ue().maskCategories.flatMap((e=>e.masks))},e.id)))})})]})})}),s.jsx("aside",{className:"w-56 border-l bg-white p-4 overflow-y-auto shadow-sm",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h3",{className:"font-medium",children:"Páginas"}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(P,{variant:"ghost",size:"icon-sm",onClick:()=>{const e=Y[G],s={...JSON.parse(JSON.stringify(e)),id:`page-${Y.length+1}-copy`},l=[...Y,s];xe(l),Z(l.length-1)},children:s.jsx("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",children:s.jsx("path",{d:"M1 9.50006C1 10.3285 1.67157 11.0001 2.5 11.0001H4L4 10.0001H2.5C2.22386 10.0001 2 9.7762 2 9.50006L2 2.50006C2 2.22392 2.22386 2.00006 2.5 2.00006L9.5 2.00006C9.77614 2.00006 10 2.22392 10 2.50006V4.00002H5.5C4.67158 4.00002 4 4.67159 4 5.50002V12.5C4 13.3284 4.67158 14 5.5 14H12.5C13.3284 14 14 13.3284 14 12.5V5.50002C14 4.67159 13.3284 4.00002 12.5 4.00002H11V2.50006C11 1.67163 10.3284 1.00006 9.5 1.00006H2.5C1.67157 1.00006 1 1.67163 1 2.50006V9.50006ZM5 5.50002C5 5.22388 5.22386 5.00002 5.5 5.00002H12.5C12.7761 5.00002 13 5.22388 13 5.50002V12.5C13 12.7762 12.7761 13 12.5 13H5.5C5.22386 13 5 12.7762 5 12.5V5.50002Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}),s.jsx(P,{variant:"ghost",size:"icon-sm",onClick:()=>{if(Y.length<=1)return;const e=Y.filter(((e,s)=>s!==G));xe(e),Z(Math.min(G,e.length-1))},disabled:Y.length<=1,children:s.jsx(z,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"grid gap-3",children:[Y.map(((e,l)=>s.jsx("div",{className:"border rounded-md p-2 cursor-pointer hover:border-purple-500 transition-colors "+(G===l?"border-purple-500 ring-2 ring-purple-200":""),onClick:()=>Z(l),children:s.jsxs("div",{className:"bg-gray-100 aspect-[4/3] rounded-sm flex items-center justify-center text-xs text-gray-500 relative",children:["Pág. ",l+1,e.cells.some((e=>e.elements.some((e=>"image"===e.type&&e.content))))&&s.jsx("div",{className:"absolute inset-0 grid grid-cols-2 grid-rows-2 gap-1 p-1",children:Array.from({length:4}).map(((l,t)=>{const a=e.cells[t],n=null==a?void 0:a.elements.find((e=>"image"===e.type&&e.content));return s.jsx("div",{className:"bg-gray-200 rounded-sm overflow-hidden",children:n&&s.jsx("img",{src:n.content,alt:"",className:"w-full h-full object-cover"})},t)}))})]})},e.id))),s.jsx(P,{variant:"outline",size:"sm",icon:s.jsx(F,{className:"h-4 w-4"}),onClick:()=>{const e=`page-${Y.length+1}`,s=ue(),l={id:e,layout:s.id,cells:Array.from({length:s.cells}).map(((s,l)=>({id:`cell-${e}-${l+1}`,elements:[]})))},t=[...Y,l];xe(t),Z(t.length-1)},children:"Añadir página"})]})]})})]})]})})}export{q as default};
