var e=Object.defineProperty,t=(t,r,a)=>((t,r,a)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a)(t,"symbol"!=typeof r?r+"":r,a);import{c as r,j as a,r as i,s as o}from"./vendor-react-CtPXetfm.js";import{B as s}from"./Base-B2hVq4yw.js";import{I as n}from"./InputFormGroup-CRGKsLQr.js";import{S as l}from"./SelectFormGroup-2ND56lst.js";import{S as c}from"./SwitchFormGroup-CB0qoXn0.js";import{T as d}from"./TextareaFormGroup-DXMahSF1.js";import{S as m}from"./CartKuchara-Bi-J8T1O.js";import{M as p}from"./Modal-CUkY7A3F.js";import{T as u}from"./Table-BOsx9621.js";import{D as f}from"./DxButton-C6FT_beP.js";import{C as j}from"./CreateReactScript-Cjoo020C.js";import{R as x}from"./ReactAppend-RIOEhuYO.js";import{B as b}from"./BasicRest-DtgqEuc9.js";import"./vendor-swiper-Cr_RrIb_.js";import"./Footer-coriRrmf.js";import"./TippyButton-Dqi9Vaf_.js";import"./Logout-DQyEsGXW.js";import"./MenuItemContainer-UDNHvqM7.js";import"./Menu-BjIZNCK0.js";import"./OpenPayCardModal-CbSnHq7o.js";import"./BooleanLimit-q2Ad9fGY.js";import"./General-ClVW7qxN.js";import"./LaravelSession-ByQnaUD3.js";const h=new class extends b{constructor(){super(...arguments),t(this,"path","admin/statuses")}},v=({icons:e})=>{const t=i.useRef(),r=i.useRef(),s=i.useRef(),j=i.useRef(),b=i.useRef(),v=i.useRef(),g=i.useRef(),w=i.useRef(),[R,C]=i.useState(!1),S=e=>{C(!!e?.id),s.current.value=e?.id??"",$(j.current).val(e?.icon??null).trigger("change"),b.current.value=e?.name??"",v.current.value=e?.description??"",g.current.value=e?.color??"",$(w.current).prop("checked",0==e?.reversible).trigger("click"),$(r.current).modal("show")},F=e=>$(o.renderToString(a.jsxs("span",{children:[a.jsx("i",{className:`${e.id} me-1`}),e.text.replace("mdi mdi-","")]})));return a.jsxs(a.Fragment,{children:[a.jsx(u,{gridRef:t,title:"Estados de ventas",rest:h,toolBar:e=>{e.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(t.current).dxDataGrid("instance").refresh()}}),e.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Nuevo registro",hint:"Nuevo registro",onClick:()=>S()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"icon",caption:"Ícono",width:"100px",cellTemplate:(e,{data:t})=>{e.html(o.renderToString(a.jsxs(a.Fragment,{children:[a.jsx("i",{className:`${t.icon} me-1`}),String(t.icon||"").replace("mdi mdi-","")]})))}},{dataField:"name",caption:"Estado",width:"200px"},{dataField:"description",caption:"Descripción"},{dataField:"color",caption:"Color",width:"100px",cellTemplate:(e,{data:t})=>{e.html(o.renderToString(a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"mdi mdi-checkbox-blank-circle me-1",style:{color:t.color}}),t.color]})))}},{dataField:"visible",caption:"Visible",dataType:"boolean",width:"100px",cellTemplate:(e,{data:r})=>{$(e).empty(),x(e,a.jsx(c,{checked:1==r.visible,onChange:()=>(async({id:e,value:r})=>{await h.boolean({id:e,field:"visible",value:r})&&$(t.current).dxDataGrid("instance").refresh()})({id:r.id,value:!r.visible})}))}},{caption:"Acciones",width:"150px",cellTemplate:(e,{data:r})=>{e.css("text-overflow","unset"),e.append(f({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>S(r)})),1==r.editable&&e.append(f({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>(async e=>{const{isConfirmed:r}=await m.fire({title:"Eliminar registro",text:"¿Estas seguro de eliminar este registro?",icon:"warning",showCancelButton:!0,confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"});if(!r)return;await h.delete(e)&&$(t.current).dxDataGrid("instance").refresh()})(r.id)}))},allowFiltering:!1,allowExporting:!1}]}),a.jsx(p,{modalRef:r,title:R?"Editar estado":"Agregar estado",onSubmit:async e=>{e.preventDefault();const a={id:s.current.value||void 0,icon:j.current.value,name:b.current.value,description:v.current.value,color:g.current.value,reversible:w.current.checked};await h.save(a)&&($(t.current).dxDataGrid("instance").refresh(),$(r.current).modal("hide"))},size:"md",children:a.jsxs("div",{className:"row",id:"statuses-container",children:[a.jsx("input",{ref:s,type:"hidden"}),a.jsx(l,{eRef:j,label:"Ícono",dropdownParent:"#statuses-container",col:"col-md-4",templateResult:F,templateSelection:F,children:e.map((e,t)=>a.jsx("option",{value:e.id,children:e.value},t))}),a.jsx(n,{eRef:b,label:"Estado",col:"col-md-8",required:!0}),a.jsx(d,{eRef:v,label:"Descripción",col:"col-12"}),a.jsx(n,{eRef:g,label:"Color (#000000)",type:"color",col:"col-md-6",rows:2,required:!0}),a.jsx(c,{eRef:w,label:"Reversible",info:"Sirve para controlar si el estado se puede revertir o no",col:"col-md-6"})]})})]})};j((e,t)=>{r.createRoot(e).render(a.jsx(s,{...t,title:"Estados de ventas",children:a.jsx(v,{...t})}))});
