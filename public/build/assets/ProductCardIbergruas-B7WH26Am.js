import{j as s}from"./AboutSimple-Cf8x2fCZ.js";import{r as d}from"./index-BOnQTV8N.js";import"./HeaderSearch-B6fO5EoB.js";import{C as m}from"./Number2Currency-jIsa99f9.js";import{C as k}from"./ProductCardIbergruas-Cf6ash5v.js";import{m as y}from"./proxy-B0QLMKEh.js";import{D as j}from"./download-CbXRWltS.js";import{C as _}from"./chevron-down-uIVDLcM-.js";import{F as z}from"./file-text-BGNfKLm5.js";import{S as P}from"./shopping-cart-DLRnxGTD.js";const H=({data:p,product:e,setCart:x,cart:h})=>{var g,b;const[v,l]=d.useState(!1),[n,f]=d.useState(!1),w=a=>{a.preventDefault(),a.stopPropagation();const i=structuredClone(h),t=i.findIndex(D=>D.id==(e==null?void 0:e.id));t==-1?i.push({...e,quantity:1}):i[t].quantity++,x(i),l(!0),setTimeout(()=>l(!1),3e3)},N=(a,i,t)=>{a.preventDefault(),a.stopPropagation(),window.open(`/storage/images/item/${i.url}`,"_blank"),f(!1)},C=a=>{a.preventDefault(),a.stopPropagation(),f(!n)},r=Number(e==null?void 0:e.final_price)===0,u=(e==null?void 0:e.is_detail)!==!1&&(e==null?void 0:e.is_detail)!==0&&(e==null?void 0:e.is_detail)!=="0",c=Array.isArray(e.pdf)?e==null?void 0:e.pdf:[],o=!u&&c.length>0;return s.jsxs(s.Fragment,{children:[s.jsxs(y.a,{href:o?void 0:`/product/${e.slug}`,onClick:o?a=>a.preventDefault():void 0,className:"group flex flex-col h-full bg-transparent  border-0 transition-all duration-300 overflow-hidden",initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-5},children:[s.jsxs("div",{className:"relative aspect-square overflow-hidden",children:[e.discount>0&&s.jsxs("span",{className:"absolute top-3 right-3 z-10 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full shadow-sm",children:["-",Math.round((e.price-(e==null?void 0:e.discount))/(e==null?void 0:e.price)*100),"%"]}),s.jsx(y.img,{src:`/storage/images/item/${e.image}`,onError:a=>a.target.src="/api/cover/thumbnail/null",alt:e.name,className:"w-full h-full object-cover aspect-square object-center transition-transform duration-500 group-hover:scale-110",loading:"lazy"})]}),s.jsxs("div",{className:"flex flex-col flex-grow p-5  rounded-b-2xl",children:[s.jsx("div",{className:"text-xs font-medium customtext-primary  mb-2 uppercase tracking-wide",children:((g=e.brand)==null?void 0:g.name)||((b=e==null?void 0:e.category)==null?void 0:b.name)}),s.jsx("h3",{className:"text-xl  text-white mb-2 line-clamp-2 min-h-[2.5rem]",children:e.name}),s.jsx("div",{className:"text-base text-white mb-4 line-clamp-2 min-h-10",dangerouslySetInnerHTML:{__html:e==null?void 0:e.description}}),!r&&s.jsx("div",{className:"mt-auto mb-4",children:e.static_price?s.jsxs("div",{className:"flex flex-col items-start gap-1",children:[s.jsx("span",{className:"text-xl text-white",children:e.static_price}),e.discount>0&&s.jsxs("span",{className:"text-sm text-gray-400 line-through",children:[m()," ",e.price]})]}):s.jsxs("div",{className:"flex items-baseline gap-2",children:[s.jsxs("span",{className:"text-xl font-bold text-white",children:[m()," ",e.final_price]}),e.discount>0&&s.jsxs("span",{className:"text-sm text-gray-400 line-through",children:[m()," ",e.price]})]})}),s.jsx("div",{className:`mt-auto ${r?"pt-4":""} relative`,children:o?s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:C,className:"w-full flex items-center justify-center gap-2 bg-transparent border-2 border-primary customtext-primary py-3 px-4 font-semibold hover:bg-primary hover:text-white transition-all duration-300",children:[s.jsx(j,{size:18}),"Descargar Fichas",s.jsx(_,{size:16,className:`transition-transform ${n?"rotate-180":""}`})]}),n&&s.jsx("div",{className:"absolute bottom-full left-0 right-0 mb-2 bg-white border-2 border-primary shadow-xl z-50 max-h-60 overflow-y-auto",children:s.jsx("div",{className:"p-2",children:c.map((a,i)=>s.jsxs("button",{onClick:t=>N(t,a),className:"w-full flex items-center gap-3 px-4 py-3 text-left customtext-neutral-dark hover:bg-gray-100 transition-colors rounded-lg",children:[s.jsx(z,{size:18,className:"customtext-primary flex-shrink-0"}),s.jsx("span",{className:"flex-1 truncate",children:a.title||`Ficha Técnica ${i+1}`}),s.jsx(j,{size:16,className:"customtext-primary flex-shrink-0"})]},i))})})]}):r?s.jsx("button",{className:"w-full flex items-center justify-center gap-2 bg-transparent border-2 border-primary customtext-primary py-3 px-4  font-semibold hover:bg-primary hover:text-white transition-all duration-300",children:"Ver más"}):s.jsxs("button",{onClick:w,className:"w-full flex items-center justify-center gap-2 bg-transparent border-2 border-primary customtext-primary py-3 px-4  font-semibold hover:bg-primary hover:text-white transition-all duration-300",children:[s.jsx(P,{size:18}),"Agregar al carrito"]})})]})]}),s.jsx(k,{data:p,cart:h,setCart:x,modalOpen:v,setModalOpen:l})]})};export{H as P};
