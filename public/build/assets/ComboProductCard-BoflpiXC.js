import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as c}from"./index-BOnQTV8N.js";import{C as j}from"./CombosCartRest-DINBZpQF.js";import{C as m}from"./Number2Currency-D9Rjvh76.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./BasicRest-BqhZrBN0.js";import"./main-B6F2O9-U.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./CardProductKatya-ncpmQ0JU.js";import"./index-pSueRYGM.js";import"./index-B6ujFmsw.js";import"./General-BmbBKdsB.js";const M=({combo:s,onAddToCart:x,cart:p=[],showAddButton:g=!0})=>{var l,d;const[a,n]=c.useState(!1),[i,u]=c.useState(1),h=new j,y=async()=>{if(!a){n(!0);try{const t=await h.addToCart(s.id,i);x(t)}catch(t){console.error("Error adding combo to cart:",t)}finally{n(!1)}}},b=t=>{const o=parseInt(t.target.value)||1;u(Math.max(1,Math.min(10,o)))},r=p.some(t=>t.type==="combo"&&t.combo_id===s.id);return e.jsx("div",{className:"combo-product-card bg-white rounded-lg shadow-md p-4 border border-gray-200",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:s.image||"/images/placeholder.jpg",alt:s.name,className:"w-20 h-20 object-cover rounded-lg"})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg text-gray-900 mb-1",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:s.summary||`Combo de ${((l=s.combo_items)==null?void 0:l.length)||0} productos`}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Incluye:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:(d=s.combo_items)==null?void 0:d.map((t,o)=>e.jsxs("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded",children:[t.name,t.is_main_item&&e.jsx("span",{className:"ml-1 text-blue-600",children:"★"})]},t.id))})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.discount>0&&e.jsxs("span",{className:"text-sm line-through text-gray-500",children:[m()," ",s.price]}),e.jsxs("span",{className:"text-lg font-bold text-green-600",children:[m()," ",s.final_price]}),s.discount>0&&e.jsxs("span",{className:"text-xs bg-red-100 text-red-800 px-2 py-1 rounded",children:["-",s.discount_percent,"%"]})]})]}),g&&e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Cantidad:"}),e.jsx("input",{type:"number",min:"1",max:"10",value:i,onChange:b,className:"w-16 px-2 py-1 text-sm border border-gray-300 rounded"})]}),e.jsx("button",{onClick:y,disabled:a||r,className:`px-4 py-2 text-sm font-medium rounded transition-colors ${r?"bg-green-100 text-green-800 cursor-not-allowed":a?"bg-gray-100 text-gray-600 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:r?"✓ En carrito":a?"Agregando...":"Agregar combo"})]})]})})]})})};export{M as default};
