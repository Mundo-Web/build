import{r as e,j as t,C as r,w as a,X as s}from"./vendor-react-DB2gWWlz.js";import{G as o}from"./Global-BAGAPG-V.js";import"./HeaderSearch-DYRcDESG.js";import{C as n}from"./HeaderIbergruas-C_Hbv222.js";import{A as i,m as l}from"./vendor-motion-Ma5gYeLT.js";import"./vendor-swiper-Cr_RrIb_.js";import"./CartItemRow-DjcmXrs1.js";import"./Number2Currency-BX4epFEo.js";import"./General-ClVW7qxN.js";import"./CartKuchara-C7ZIDpxE.js";const c=({items:c,data:d,cart:u,setCart:m,isUser:x,pages:h,generals:g=[]})=>{g.find(e=>"phone_whatsapp"===e.correlative),g.find(e=>"message_whatsapp"===e.correlative);const p=g.find(e=>"header_menu_order"===e.correlative),b=p?.description??null,f=(()=>{if(!b)return[...c.map(e=>({type:"category",data:e})),...h.filter(e=>e.menuable).map(e=>({type:"page",data:e}))];const e=b.split(",").map(e=>e.trim()).filter(Boolean),t=[];return e.forEach(e=>{const r=c.find(t=>t.alias&&t.alias.toLowerCase()===e.toLowerCase()||t.name.toLowerCase()===e.toLowerCase());if(r)return void t.push({type:"category",data:r});const a=h.find(t=>t.menuable&&t.name.toLowerCase()===e.toLowerCase());a&&t.push({type:"page",data:a})}),t})(),[y,v]=e.useState(!1),[w,j]=e.useState(!1),[N,k]=e.useState(!1),[C,E]=e.useState(""),[L,$]=e.useState(!1),[S,z]=e.useState(!1),[R,_]=e.useState([]),[A,I]=e.useState(!1),[G,M]=e.useState(!1),[U,B]=e.useState(-1);e.useRef([]);const F=e.useRef(null),H=e.useRef(null),O=e.useRef(null),P=e.useRef(null),q=e.useRef(null),D=e.useRef(null),K=e.useRef([]),T=u.reduce((e,t)=>Number(e)+Number(t.quantity),0),V=()=>{I(!1),_([]),B(-1)};if(e.useEffect(()=>{function e(e){F.current&&!F.current.contains(e.target)&&$(!1),H.current&&!H.current.contains(e.target)&&(C.trim()||k(!1)),!q.current||q.current.contains(e.target)||P.current?.contains(e.target)||O.current?.contains(e.target)||V()}return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}},[C]),e.useEffect(()=>{const e=()=>{window.scrollY>0?z(!0):z(!1)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),e.useEffect(()=>{const e=e=>{"Escape"===e.key&&(A?V():N&&(k(!1),E("")))};return(N||A)&&document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[N,A]),e.useEffect(()=>()=>{D.current&&clearTimeout(D.current)},[]),e.useEffect(()=>{U>=0&&K.current[U]&&q.current&&K.current[U].scrollIntoView({block:"nearest",behavior:"smooth"})},[U]),x&&Array.isArray(x.roles)){const e=x.roles.map(e=>e.name?.toLowerCase());!e.includes("admin")&&e.includes("root")}return t.jsxs(t.Fragment,{children:[t.jsxs("header",{id:d?.element_id||null,className:`w-full top-0 left-0 z-50 transition-all duration-300 ${S?"fixed shadow-lg":"relative"} ${d.backgroundColor||"bg-primary"}`,children:[t.jsx("div",{className:"max-w-7xl mx-auto px-[5%] 2xl:px-0",children:t.jsxs("div",{className:"flex justify-between items-center h-20",children:[t.jsx("div",{className:"flex items-center gap-6",children:t.jsx("a",{href:"/",className:"flex-shrink-0 flex items-center",children:t.jsx("img",{src:`/assets/resources/logo.png?v=${crypto.randomUUID()}`,alt:o.APP_NAME,className:`h-10 lg:h-16 w-auto object-contain ${d?.class_logo||""}`,onError:e=>{e.target.onerror=null,e.target.src="/assets/img/logo-bk.svg"}})})}),t.jsxs("nav",{className:"hidden lg:flex items-center gap-8",children:[f.map((e,a)=>{if("category"===e.type){const a=e.data;return t.jsxs("div",{className:"relative group",children:[t.jsxs("a",{href:`/catalogo?category=${a.slug}`,className:`\n                                                    flex items-center gap-1 text-lg  font-bold transition-colors\n                                                    ${a.alias?"bg-secondary text-white px-6 py-2.5 shadow-lg ":"customtext-neutral-dark "}\n                                                `,children:[a.alias||a.name,a.subcategories?.length>0&&t.jsx(r,{size:16,className:"transition-transform duration-200 group-hover:rotate-180 "+(a.alias?"text-white":"")})]}),a.subcategories?.length>0&&t.jsx("div",{className:"absolute top-full left-0 w-56 pt-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 transform group-hover:translate-y-0 translate-y-2 z-50",children:t.jsx("div",{className:"bg-white  shadow-xl overflow-hidden border border-gray-100",children:a.subcategories.map(e=>t.jsx("a",{href:`/catalogo?subcategory=${e.slug}`,className:"block px-4 py-3 text-base text-gray-700 hover:bg-primary hover:text-white transition-colors duration-300 last:border-0",children:e.name},e.id))})})]},`cat-${a.id}`)}if("page"===e.type){const r=e.data;return t.jsx("a",{href:r.path,className:"text-lg font-bold customtext-neutral-dark hover:text-black transition-colors",children:r.name},`page-${a}`)}return null}),t.jsxs("button",{onClick:()=>v(!0),className:"relative bg-black text-white p-2.5 hover:bg-gray-900 transition-colors group","aria-label":"Carrito de compras",children:[t.jsx(a,{size:20,className:"text-white"}),T>0&&t.jsx("span",{className:"absolute -top-2 -right-2 bg-white text-black text-xs font-bold w-5 h-5 flex items-center justify-center rounded-full border-2 border-black",children:T})]})]}),t.jsxs("div",{className:"flex lg:hidden items-center gap-4",children:[t.jsxs("button",{onClick:()=>v(!0),className:"relative bg-black text-white p-2.5 hover:bg-gray-900 transition-colors group","aria-label":"Carrito de compras",children:[t.jsx(a,{size:20,className:"text-white"}),T>0&&t.jsx("span",{className:"absolute -top-2 -right-2 bg-white text-black text-xs font-bold w-5 h-5 flex items-center justify-center rounded-full border-2 border-black",children:T})]}),t.jsx("button",{onClick:()=>j(!w),className:"p-2 text-black hover:bg-black/5 rounded-lg transition-colors",children:w?t.jsx(s,{size:24}):t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),t.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),t.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})})]})]})}),t.jsx(i,{children:w&&t.jsxs(t.Fragment,{children:[t.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"lg:hidden fixed inset-0 bg-black/50 z-40",onClick:()=>j(!1)}),t.jsxs(l.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"tween",duration:.3},className:"lg:hidden fixed right-0 top-0 h-full w-[85%] max-w-sm bg-neutral-dark shadow-2xl z-50 overflow-y-auto",children:[t.jsxs("div",{className:`flex items-center justify-between p-4 border-b ${d.backgroundColor||"bg-primary"}`,children:[t.jsx("span",{className:"text-lg font-bold text-white",children:"MenÃº"}),t.jsx("button",{onClick:()=>j(!1),className:"p-2 text-white hover:bg-white/10 rounded-lg transition-colors",children:t.jsx(s,{size:24})})]}),t.jsx("div",{className:"p-4 text-white",children:t.jsx("nav",{className:"space-y-2",children:f.map((e,r)=>{if("category"===e.type){const r=e.data;return t.jsxs("div",{className:"border-b border-gray-100 last:border-0",children:[t.jsx("a",{href:`/catalogo?category=${r.slug}`,className:`\n                                                                block py-3 px-4 text-base font-semibold transition-colors rounded-none\n                                                                ${r.alias?"bg-primary customtext-neutral-dark mb-2":"text-white hover:bg-gray-50"}\n                                                            `,children:r.alias||r.name}),r.subcategories?.length>0&&t.jsx("div",{className:"ml-4 mb-2 space-y-1",children:r.subcategories.map(e=>t.jsx("a",{href:`/catalogo?subcategory=${e.slug}`,className:"block py-2 px-3 text-sm text-white hover:text-primary hover:bg-gray-50 rounded-lg transition-colors",children:e.name},e.id))})]},`mobile-cat-${r.id}`)}if("page"===e.type){const a=e.data;return t.jsx("a",{href:a.path,className:"block py-3 px-4 text-base font-semibold text-white hover:bg-gray-50 rounded-none transition-colors border-b border-gray-100 last:border-0",children:a.name},`mobile-page-${r}`)}return null})})})]})]})})]}),t.jsx(n,{data:d,cart:u,setCart:m,modalOpen:y,setModalOpen:v})]})};export{c as default};
