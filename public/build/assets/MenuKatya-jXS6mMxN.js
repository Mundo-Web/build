import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as i}from"./index-BOnQTV8N.js";import{C as m}from"./chevron-down-uIVDLcM-.js";import{A as l}from"./index-BZvh78jk.js";import{m as c}from"./proxy-B0QLMKEh.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./createLucideIcon-DfjclApS.js";const q=({pages:R=[],items:u,data:p,visible:$=!1})=>{const[T,d]=i.useState(null),[n,x]=i.useState(!1),[g,A]=i.useState([]),[y,Z]=i.useState([]),[w,f]=i.useState(!1),[N,C]=i.useState(null),b=i.useRef(null),o=i.useRef(null);i.useEffect(()=>{const s=async()=>{try{const a=await fetch("/api/stores");if(a.ok){const r=await a.json();r&&Array.isArray(r.data)&&A(r.data)}}catch(a){console.error("Error fetching stores:",a)}},t=async()=>{try{const a=await fetch("/ubigeo.json");if(a.ok){const r=await a.json();Array.isArray(r)&&Z(r)}}catch(a){console.error("Error fetching ubigeos:",a)}};s(),t()},[]);const h=(g==null?void 0:g.filter(s=>s.type==="tienda"&&s.status===!0))||[],k=s=>!s||!y.length?null:y.find(t=>t.reniec==s);i.useEffect(()=>{const s=t=>{b.current&&!b.current.contains(t.target)&&(d(null),x(!1),f(!1),C(null))};return document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[]);const D=s=>{o.current&&clearTimeout(o.current),d(s),x(!1)},M=()=>{o.current=setTimeout(()=>{d(null)},300)},z=()=>{o.current&&clearTimeout(o.current)},S=()=>{x(!n),d(null),f(!1),C(null)},L=()=>{f(!w),C(null),x(!1)},v=s=>(s==null?void 0:s.subcategories)||[],j=u&&u.length>0?[...u].sort((s,t)=>s.name.localeCompare(t.name)):[],E=window.innerWidth<1024,O=E?$:!0;return e.jsx("nav",{ref:b,className:"block relative w-full bg-secondary text-white font-medium text-sm",style:{background:(p==null?void 0:p.backgroundColor)||"bg-secondary"},children:e.jsx("div",{className:"px-primary 2xl:px-0 2xl:max-w-7xl mx-auto w-full",children:e.jsx("div",{className:"flex items-center justify-between",children:O&&e.jsx(e.Fragment,{children:E?e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:L,className:"flex items-center gap-2 px-4 py-3 hover:bg-white/10 transition-all duration-300 whitespace-nowrap",children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M1.66675 15.0003C1.66675 13.7167 1.66675 13.0747 1.95569 12.6032C2.11736 12.3394 2.33919 12.1176 2.60302 11.9559C3.07453 11.667 3.71638 11.667 5.00008 11.667C6.28378 11.667 6.92563 11.667 7.39714 11.9559C7.66097 12.1176 7.8828 12.3394 8.04447 12.6032C8.33341 13.0747 8.33341 13.7167 8.33341 15.0003C8.33341 16.284 8.33341 16.9259 8.04447 17.3974C7.8828 17.6612 7.66097 17.8831 7.39714 18.0447C6.92563 18.3337 6.28378 18.3337 5.00008 18.3337C3.71638 18.3337 3.07453 18.3337 2.60302 18.0447C2.33919 17.8831 2.11736 17.6612 1.95569 17.3974C1.66675 16.9259 1.66675 16.284 1.66675 15.0003Z",stroke:"white","stroke-width":"1.25"}),e.jsx("path",{d:"M11.6667 15.0003C11.6667 13.7167 11.6667 13.0747 11.9557 12.6032C12.1173 12.3394 12.3392 12.1176 12.603 11.9559C13.0745 11.667 13.7164 11.667 15.0001 11.667C16.2837 11.667 16.9257 11.667 17.3972 11.9559C17.661 12.1176 17.8828 12.3394 18.0445 12.6032C18.3334 13.0747 18.3334 13.7167 18.3334 15.0003C18.3334 16.284 18.3334 16.9259 18.0445 17.3974C17.8828 17.6612 17.661 17.8831 17.3972 18.0447C16.9257 18.3337 16.2837 18.3337 15.0001 18.3337C13.7164 18.3337 13.0745 18.3337 12.603 18.0447C12.3392 17.8831 12.1173 17.6612 11.9557 17.3974C11.6667 16.9259 11.6667 16.284 11.6667 15.0003Z",stroke:"white","stroke-width":"1.25"}),e.jsx("path",{d:"M1.66675 5.00033C1.66675 3.71663 1.66675 3.07478 1.95569 2.60327C2.11736 2.33943 2.33919 2.11761 2.60302 1.95593C3.07453 1.66699 3.71638 1.66699 5.00008 1.66699C6.28378 1.66699 6.92563 1.66699 7.39714 1.95593C7.66097 2.11761 7.8828 2.33943 8.04447 2.60327C8.33341 3.07478 8.33341 3.71663 8.33341 5.00033C8.33341 6.28403 8.33341 6.92588 8.04447 7.39738C7.8828 7.66122 7.66097 7.88304 7.39714 8.04472C6.92563 8.33366 6.28378 8.33366 5.00008 8.33366C3.71638 8.33366 3.07453 8.33366 2.60302 8.04472C2.33919 7.88304 2.11736 7.66122 1.95569 7.39738C1.66675 6.92588 1.66675 6.28403 1.66675 5.00033Z",stroke:"white","stroke-width":"1.25"}),e.jsx("path",{d:"M11.6667 5.00033C11.6667 3.71663 11.6667 3.07478 11.9557 2.60327C12.1173 2.33943 12.3392 2.11761 12.603 1.95593C13.0745 1.66699 13.7164 1.66699 15.0001 1.66699C16.2837 1.66699 16.9257 1.66699 17.3972 1.95593C17.661 2.11761 17.8828 2.33943 18.0445 2.60327C18.3334 3.07478 18.3334 3.71663 18.3334 5.00033C18.3334 6.28403 18.3334 6.92588 18.0445 7.39738C17.8828 7.66122 17.661 7.88304 17.3972 8.04472C16.9257 8.33366 16.2837 8.33366 15.0001 8.33366C13.7164 8.33366 13.0745 8.33366 12.603 8.04472C12.3392 7.88304 12.1173 7.66122 11.9557 7.39738C11.6667 6.92588 11.6667 6.28403 11.6667 5.00033Z",stroke:"white","stroke-width":"1.25"})]}),"Categorías",e.jsx(m,{className:`w-3 h-3 transition-transform duration-200 ${w?"rotate-180":""}`})]}),e.jsxs(l,{children:[w&&e.jsx(c.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},className:"absolute top-full left-0 mt-1 bg-white text-gray-800 border border-gray-200 rounded-lg shadow-lg z-50 w-full max-w-md max-h-96 overflow-y-auto",children:e.jsx("div",{className:"py-2",children:j.map(s=>{const a=v(s).length>0;return e.jsx("div",{className:"relative",children:a?e.jsx("div",{className:"flex items-center",children:e.jsxs("a",{href:`/catalogo?category=${s.slug}`,className:"flex-1 flex items-center gap-2 px-4 py-3 text-sm hover:bg-gray-50  transition-colors duration-200",children:[s.image&&e.jsx("div",{className:"rounded-full min-w-6 max-w-6 min-h-6 max-h-6 overflow-hidden   flex items-center justify-center bg-secondary",children:e.jsx("img",{src:`/storage/images/category/${s.image}`,alt:s.name,className:"w-4 h-4 filter brightness-0 invert",onError:r=>r.target.style.display="none"})}),s.name]})}):e.jsxs("a",{href:`/catalogo?category=${s.slug}`,className:"block px-4 py-3 text-sm hover:bg-gray-50 hover:text-red-600 transition-colors duration-200",children:[s.image&&e.jsx("div",{className:"rounded-full min-w-6 max-w-6 min-h-6 max-h-6 overflow-hidden   flex items-center justify-center bg-secondary",children:e.jsx("img",{src:`/storage/images/category/${s.image}`,alt:s.name,className:"w-4 h-4 filter brightness-0 invert",onError:r=>r.target.style.display="none"})}),s.name]})},s.id)})})}),e.jsx(l,{children:N&&e.jsx(c.div,{initial:{opacity:0,x:-20,scale:.9},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:-20,scale:.9},transition:{duration:.25},className:"absolute top-0 left-full ml-2 bg-white text-gray-800 border border-gray-200 rounded-lg shadow-xl z-[70] min-w-[250px] max-w-[350px] max-h-80 overflow-y-auto",style:{boxShadow:"0 10px 25px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"},children:(()=>{const s=j.find(a=>a.id===N),t=v(s);return!t||t.length===0?null:e.jsxs("div",{className:"py-2",children:[e.jsxs("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-200",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:s==null?void 0:s.name}),e.jsx("p",{className:"text-xs text-gray-500",children:"Subcategorías"})]}),t.map((a,r)=>e.jsx("a",{href:`/catalogo?subcategory=${a.slug}`,className:"block px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 transition-all duration-200 border-b border-gray-50 last:border-b-0",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"w-2 h-2 bg-red-400 rounded-full flex-shrink-0"}),e.jsx("span",{className:"truncate",children:a.name})]})},a.id))]})})()})})]})]}),h.length>0&&e.jsxs("div",{className:"relative ml-4",children:[e.jsxs("button",{onClick:S,className:"flex items-center gap-2 px-4 py-3 hover:bg-white/10 transition-all duration-300 whitespace-nowrap",children:["Tiendas",e.jsx(m,{className:`w-3 h-3 transition-transform duration-200 ${n?"rotate-180":""}`})]}),e.jsx(l,{children:n&&e.jsx(c.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},className:"absolute top-full right-0 mt-1 bg-secondary text-gray-800  rounded-2xl shadow-lg z-50 min-w-[300px] max-w-[300px] max-h-80 overflow-y-auto",children:e.jsx("div",{className:"py-2",children:h.map(s=>e.jsx("a",{href:`/tienda/${s.slug||s.id}`,className:"block px-4 py-4 text-white hover:bg-black/20 group hover:text-white transition-colors duration-200",children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-bold text-base ",children:s.name}),s.address&&e.jsx("div",{className:"text-xs  text-white line-clamp-2",children:s.address}),(()=>{const t=k(s.ubigeo);return t?e.jsx("div",{className:"text-xs font-bold uppercase text-white mt-2",children:t.departamento}):null})()]})})},s.id))})})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"relative",children:e.jsxs("a",{href:"/catalogo",className:"flex items-center gap-2 px-4 py-3 hover:bg-white/10 transition-all duration-300 whitespace-nowrap",children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M1.66675 15.0003C1.66675 13.7167 1.66675 13.0747 1.95569 12.6032C2.11736 12.3394 2.33919 12.1176 2.60302 11.9559C3.07453 11.667 3.71638 11.667 5.00008 11.667C6.28378 11.667 6.92563 11.667 7.39714 11.9559C7.66097 12.1176 7.8828 12.3394 8.04447 12.6032C8.33341 13.0747 8.33341 13.7167 8.33341 15.0003C8.33341 16.284 8.33341 16.9259 8.04447 17.3974C7.8828 17.6612 7.66097 17.8831 7.39714 18.0447C6.92563 18.3337 6.28378 18.3337 5.00008 18.3337C3.71638 18.3337 3.07453 18.3337 2.60302 18.0447C2.33919 17.8831 2.11736 17.6612 1.95569 17.3974C1.66675 16.9259 1.66675 16.284 1.66675 15.0003Z",stroke:"white","stroke-width":"1.25"}),e.jsx("path",{d:"M11.6667 15.0003C11.6667 13.7167 11.6667 13.0747 11.9557 12.6032C12.1173 12.3394 12.3392 12.1176 12.603 11.9559C13.0745 11.667 13.7164 11.667 15.0001 11.667C16.2837 11.667 16.9257 11.667 17.3972 11.9559C17.661 12.1176 17.8828 12.3394 18.0445 12.6032C18.3334 13.0747 18.3334 13.7167 18.3334 15.0003C18.3334 16.284 18.3334 16.9259 18.0445 17.3974C17.8828 17.6612 17.661 17.8831 17.3972 18.0447C16.9257 18.3337 16.2837 18.3337 15.0001 18.3337C13.7164 18.3337 13.0745 18.3337 12.603 18.0447C12.3392 17.8831 12.1173 17.6612 11.9557 17.3974C11.6667 16.9259 11.6667 16.284 11.6667 15.0003Z",stroke:"white","stroke-width":"1.25"}),e.jsx("path",{d:"M1.66675 5.00033C1.66675 3.71663 1.66675 3.07478 1.95569 2.60327C2.11736 2.33943 2.33919 2.11761 2.60302 1.95593C3.07453 1.66699 3.71638 1.66699 5.00008 1.66699C6.28378 1.66699 6.92563 1.66699 7.39714 1.95593C7.66097 2.11761 7.8828 2.33943 8.04447 2.60327C8.33341 3.07478 8.33341 3.71663 8.33341 5.00033C8.33341 6.28403 8.33341 6.92588 8.04447 7.39738C7.8828 7.66122 7.66097 7.88304 7.39714 8.04472C6.92563 8.33366 6.28378 8.33366 5.00008 8.33366C3.71638 8.33366 3.07453 8.33366 2.60302 8.04472C2.33919 7.88304 2.11736 7.66122 1.95569 7.39738C1.66675 6.92588 1.66675 6.28403 1.66675 5.00033Z",stroke:"white","stroke-width":"1.25"}),e.jsx("path",{d:"M11.6667 5.00033C11.6667 3.71663 11.6667 3.07478 11.9557 2.60327C12.1173 2.33943 12.3392 2.11761 12.603 1.95593C13.0745 1.66699 13.7164 1.66699 15.0001 1.66699C16.2837 1.66699 16.9257 1.66699 17.3972 1.95593C17.661 2.11761 17.8828 2.33943 18.0445 2.60327C18.3334 3.07478 18.3334 3.71663 18.3334 5.00033C18.3334 6.28403 8.33341 6.92588 8.04447 7.39738C7.8828 7.66122 7.66097 7.88304 7.39714 8.04472C6.92563 8.33366 6.28378 8.33366 5.00008 8.33366C3.71638 8.33366 3.07453 8.33366 2.60302 8.04472C2.33919 7.88304 2.11736 7.66122 1.95569 7.39738C1.66675 6.92588 1.66675 6.28403 1.66675 5.00033Z",stroke:"white","stroke-width":"1.25"})]}),"Todas las categorías"]})}),e.jsx("div",{className:"w-px h-6 bg-white/20 mx-2"}),j.map(s=>{const t=v(s),a=t.length>0;return e.jsxs("div",{className:"relative",onMouseEnter:()=>a&&D(s.id),onMouseLeave:M,children:[e.jsxs("a",{href:`/catalogo?category=${s.slug}`,className:"flex items-center gap-2 px-4 py-3 hover:bg-white/10 transition-all duration-300 whitespace-nowrap",children:[s.image&&e.jsx("img",{src:`/storage/images/category/${s.image}`,alt:s.name,className:"w-4 h-4 filter brightness-0 invert",onError:r=>r.target.style.display="none"}),s.name,a&&e.jsx(m,{className:"w-3 h-3 ml-1"})]}),e.jsx(l,{children:T===s.id&&a&&e.jsx(c.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},className:"absolute top-full left-0 mt-1 bg-white text-gray-800 border border-gray-200 rounded-lg shadow-lg z-50 min-w-[200px] max-h-80 overflow-y-auto",onMouseEnter:z,onMouseLeave:M,children:e.jsx("div",{className:"py-2",children:t.map(r=>e.jsx("a",{href:`/catalogo?subcategory=${r.slug}`,className:"block px-4 py-2 text-sm hover:bg-gray-50 hover:text-red-600 transition-colors duration-200",children:r.name},r.id))})})})]},s.id)})]}),h.length>0&&e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:S,className:"flex items-center gap-2 px-4 py-3 hover:bg-white/10 transition-all duration-300 whitespace-nowrap",children:["Tiendas",e.jsx(m,{className:`w-3 h-3 transition-transform duration-200 ${n?"rotate-180":""}`})]}),e.jsx(l,{children:n&&e.jsx(c.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},className:"absolute top-full right-0 mt-1 bg-secondary text-gray-800  rounded-2xl shadow-lg z-50 min-w-[300px] max-w-[300px] max-h-80 overflow-y-auto",children:e.jsx("div",{className:"py-8",children:h.map(s=>e.jsx("a",{href:`/tienda/${s.slug||s.id}`,className:"block px-4 py-4 text-white hover:bg-black/20 group hover:text-white transition-colors duration-200",children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-bold text-base ",children:s.name}),s.address&&e.jsx("div",{className:"text-xs font-medium  text-white  line-clamp-2",children:s.address}),(()=>{const t=k(s.ubigeo);return t?e.jsx("div",{className:"text-xs font-bold uppercase text-white mt-2",children:t.departamento}):null})()]})})},s.id))})})})]})]})})})})})};export{q as default};
