import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as i,R as se}from"./index-BH53Isel.js";import{G as D}from"./Global-ErywZRdd.js";import{C as te}from"./HeaderSearch-BPfvHXmz.js";import{L as re}from"./Logout-jUU_tfUq.js";import{M as ae,S as ie}from"./MobileMenu-nQrnmQKE.js";import{S as z}from"./search-TwiiKGP5.js";import{C as j,D as ne}from"./door-closed-Z4GbcMb-.js";import{A as x}from"./index-CFtDjG4d.js";import{m as h}from"./proxy-BTYtmp9V.js";import{S as E}from"./shopping-cart-CZEUxbmv.js";import{X as H}from"./x-DBMwyD6F.js";import{U as le}from"./user-BvYmyGTY.js";import"./index-yBjzXJbu.js";import"./PaymentModal-Bxx5p2o_.js";import"./index-fNjTmf9T.js";import"./index-Chjiymov.js";import"./CartItemRow-D9z3pFKU.js";import"./Number2Currency-e57Tgsuk.js";import"./tippy-react.esm-BWiGTO87.js";import"./index-rimy3MAc.js";import"./trash-2-DK1wnsDn.js";import"./createLucideIcon-Cy5Ya80P.js";import"./minus-jyhodMPN.js";import"./plus-Bot15Khs.js";import"./main-BSEyQEJW.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";import"./chevron-left-B2s3ZsB7.js";import"./chevron-right-Ckt5D2ka.js";const Ue=({items:c,data:o,cart:B,setCart:J,isUser:w,pages:T,generals:L=[]})=>{const v=L.find(s=>s.correlative==="phone_whatsapp"),y=L.find(s=>s.correlative==="message_whatsapp"),G=(v==null?void 0:v.description)??null,X=(y==null?void 0:y.description)??null,[q,N]=i.useState(!1),[C,V]=i.useState(!1),[Y,k]=i.useState(!1),[m,R]=i.useState(""),[u,S]=i.useState(!1),[M,$]=i.useState(!1),[A,p]=i.useState(!1),[a,g]=i.useState(null),[oe,I]=i.useState(null),Z=Array.from(new Set(c.map(s=>JSON.stringify(s.category)))).map(s=>JSON.parse(s)),K=Array.from(new Set(c.map(s=>JSON.stringify(s.brand)))).map(s=>JSON.parse(s)),O=s=>K.filter(t=>c.some(r=>{var l,n;return((l=r.category)==null?void 0:l.id)===s&&r.brand&&((n=r==null?void 0:r.brand)==null?void 0:n.id)===(t==null?void 0:t.id)})),Q=(s,t)=>{const r=[],l=new Set;return c.forEach(n=>{var d,F;if(((d=n.category)==null?void 0:d.id)===s&&((F=n.brand)==null?void 0:F.id)===t&&n.subcategory){const _=n.subcategory.name.trim().toUpperCase();l.has(_)||(r.push(n.subcategory),l.add(_))}}),r},ee=s=>{const t=[],r=new Set;return c.forEach(l=>{var n;if(((n=l.category)==null?void 0:n.id)===s&&l.subcategory){const d=l.subcategory.name.trim().toUpperCase();r.has(d)||(t.push(l.subcategory),r.add(d))}}),t},f=i.useRef(null),P=i.useRef(null),b=B.reduce((s,t)=>Number(s)+Number(t.quantity),0);i.useEffect(()=>{function s(t){f.current&&!f.current.contains(t.target)&&S(!1),P.current&&!P.current.contains(t.target)&&k(!1)}return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]),i.useEffect(()=>{const s=()=>{window.scrollY>0?$(!0):$(!1)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]);const U={hidden:{opacity:0,y:-10,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:400,damping:25}},exit:{opacity:0,y:-10,scale:.95,transition:{duration:.2}}},W=[{icon:e.jsx(le,{size:16}),label:"Mi Perfil",href:"/profile"},{icon:e.jsx(E,{size:16}),label:"Mis Pedidos",href:"/customer/dashboard"},{icon:e.jsx(ie,{size:16}),label:"Configuración",href:"/account"},{icon:e.jsx(ne,{size:16}),label:"Cerrar Sesión",onClick:re}];return e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:`w-full top-0 left-0 z-50 transition-all duration-300 ${M?"fixed":"relative"} bg-primary`,style:{boxShadow:M?"0 2px 8px rgba(0,0,0,0.08)":"none"},children:[e.jsxs("div",{className:"px-4 2xl:px-0 2xl:max-w-7xl flex items-center justify-between mx-auto py-3 font-paragraph text-base font-semibold text-white",children:[e.jsx("a",{href:"/",className:"flex items-center gap-2 z-[51] py-2 rounded",children:e.jsx("img",{src:`/assets/resources/logo.png?v=${crypto.randomUUID()}`,alt:D.APP_NAME,className:"h-8 object-contain object-center",onError:s=>{s.target.onerror=null,s.target.src="/assets/img/logo-bk.svg"}})}),e.jsx("nav",{className:"flex gap-1 relative flex-1 justify-center",children:Z.map(s=>e.jsx("div",{className:"relative",children:e.jsx("button",{className:`font-medium px-4 py-2 text-sm uppercase tracking-wide hover:bg-white/10 transition-colors duration-200 ${(a==null?void 0:a.id)===s.id&&A?"bg-white/20":""}`,onMouseEnter:()=>{p(!0),g(s),I(null)},onClick:()=>{(a==null?void 0:a.id)===s.id&&A?(p(!1),g(null)):(p(!0),g(s),I(null))},children:s.name})},s.id))}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"relative",children:e.jsx("button",{className:"p-2 bg-secondary hover:bg-secondary rounded transition-colors",children:e.jsx(z,{size:20})})}),(o==null?void 0:o.showLoginCart)&&e.jsxs("div",{className:"flex items-center gap-4 relative text-sm",children:[e.jsxs("div",{ref:f,children:[w?e.jsxs("button",{"aria-label":"user",className:"flex items-center gap-2 hover:bg-white/10 px-3 py-2 rounded transition-colors duration-300",onClick:()=>S(!u),children:[e.jsx(j,{size:20}),e.jsx("span",{className:"hidden lg:inline",children:w.name})]}):e.jsxs("a",{href:"/iniciar-sesion",className:"flex items-center gap-2 text-sm hover:bg-white/10 px-3 py-2 rounded transition-colors duration-300",children:[e.jsx(j,{size:20}),e.jsx("span",{className:"hidden lg:inline",children:"Iniciar Sesión"})]}),e.jsx(x,{children:u&&e.jsx(h.div,{initial:"hidden",animate:"visible",exit:"exit",variants:U,className:"absolute z-50 top-full right-0 bg-white shadow-xl border rounded-lg w-48 mt-2",children:e.jsx("div",{className:"p-4",children:e.jsx("ul",{className:"space-y-3",children:W.map((s,t)=>e.jsx("li",{children:s.onClick?e.jsxs("button",{"aria-label":"menu-items",onClick:s.onClick,className:"flex w-full items-center gap-3 text-gray-700 text-sm hover:text-[#00B5CE] transition-colors duration-300",children:[s.icon,e.jsx("span",{children:s.label})]}):e.jsxs("a",{href:s.href,className:"flex items-center gap-3 text-gray-700 text-sm hover:text-[#00B5CE] transition-colors duration-300",children:[s.icon,e.jsx("span",{children:s.label})]})},t))})})})})]}),e.jsxs("button",{"aria-label":"cart",onClick:()=>N(!0),className:"flex items-center relative p-2 hover:bg-white/10 rounded transition-colors",children:[e.jsx(E,{size:20}),b>0&&e.jsx("span",{className:"absolute -right-1 -top-1 inline-flex items-center justify-center w-5 h-5 bg-red-500 text-white rounded-full text-xs font-bold",children:b})]})]})]})]}),e.jsxs("div",{className:"flex md:hidden items-center justify-between gap-2 min-h-[60px]",children:[e.jsx("button",{"aria-label":"Menú",onClick:()=>V(!C),className:"flex items-center justify-center bg-white/20 rounded-lg w-auto h-auto p-2 text-white transition-all duration-300 z-[51]",children:C?e.jsx(H,{}):e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("path",{d:"M10 5H20",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M4 12H20",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M4 19H14",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsx("a",{href:"/",className:"flex items-center gap-2 z-[51] bg-white px-3 py-1 rounded",children:e.jsx("img",{src:`/assets/resources/logo.png?v=${crypto.randomUUID()}`,alt:D.APP_NAME,className:"h-8 object-contain object-center",onError:s=>{s.target.onerror=null,s.target.src="/assets/img/logo-bk.svg"}})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{"aria-label":"Buscar",onClick:()=>k(!0),className:"flex items-center justify-center p-2 hover:bg-white/10 rounded transition-colors",children:e.jsx(z,{size:20})}),e.jsxs("button",{"aria-label":"Carrito",onClick:()=>N(!0),className:"flex items-center relative p-2 hover:bg-white/10 rounded transition-colors",children:[e.jsx(E,{size:20}),b>0&&e.jsx("span",{className:"absolute -right-1 -top-1 inline-flex items-center justify-center w-5 h-5 bg-red-500 text-white rounded-full text-xs font-bold",children:b})]}),(o==null?void 0:o.showLoginCart)&&(w?e.jsxs("div",{ref:f,className:"relative",children:[e.jsx("button",{"aria-label":"user",className:"flex items-center gap-2 p-2 hover:bg-white/10 rounded transition-colors duration-300",onClick:()=>S(!u),children:e.jsx(j,{size:20})}),e.jsx(x,{children:u&&e.jsx(h.div,{initial:"hidden",animate:"visible",exit:"exit",variants:U,className:"absolute z-50 top-full right-0 bg-white shadow-xl border rounded-lg w-48 mt-2",children:e.jsx("div",{className:"p-4",children:e.jsx("ul",{className:"space-y-3",children:W.map((s,t)=>e.jsx("li",{children:s.onClick?e.jsxs("button",{"aria-label":"menu-items",onClick:s.onClick,className:"flex w-full items-center gap-3 text-gray-700 text-sm hover:text-[#00B5CE] transition-colors duration-300",children:[s.icon,e.jsx("span",{children:s.label})]}):e.jsxs("a",{href:s.href,className:"flex items-center gap-3 text-gray-700 text-sm hover:text-[#00B5CE] transition-colors duration-300",children:[s.icon,e.jsx("span",{children:s.label})]})},t))})})})})]}):e.jsx("a",{href:"/iniciar-sesion",className:"flex items-center p-2 hover:bg-white/10 rounded transition-colors",children:e.jsx(j,{size:20})}))]})]}),e.jsx(x,{children:Y&&e.jsx(h.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"fixed top-0 left-0 right-0 bg-white p-4 z-[100] shadow-lg",children:e.jsxs("div",{className:"relative w-full max-w-xl mx-auto",children:[e.jsx("input",{type:"search",placeholder:"Buscar productos",value:m,onChange:s=>R(s.target.value),className:"w-full pr-14 py-4 pl-4 border rounded-full focus:ring-0 focus:outline-none",autoFocus:!0}),e.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex gap-2",children:[e.jsx("button",{"aria-label":"Cerrar",onClick:()=>k(!1),className:"p-2 bg-gray-200 text-gray-600 rounded-lg",children:e.jsx(H,{size:20})}),e.jsx("a",{href:m.trim()?`/catalogo?search=${encodeURIComponent(m)}`:"#",className:"p-2 bg-[#00B5CE] text-white rounded-lg","aria-label":"Buscar",children:e.jsx(z,{})})]})]})})}),e.jsx(x,{children:C&&e.jsx(h.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},className:"md:hidden bg-white text-gray-800 shadow-lg w-full min-h-screen fixed z-40 top-[60px] left-0",children:e.jsx(ae,{search:m,setSearch:R,pages:T,items:c})})}),e.jsx(te,{data:o,cart:B,setCart:J,modalOpen:q,setModalOpen:N}),e.jsx("div",{className:"flex justify-end w-full mx-auto z-[100] relative",children:e.jsx("div",{className:"hidden lg:block fixed bottom-6 sm:bottom-[2rem] lg:bottom-[4rem] z-20 cursor-pointer",children:e.jsx("a",{target:"_blank",id:"whatsapp-toggle",href:`https://api.whatsapp.com/send?phone=${G}&text=${X}`,rel:"noreferrer",children:e.jsx("img",{src:"/assets/img/whatsapp.svg",alt:"whatsapp",className:"mr-3 w-16 h-16 md:w-[100px] md:h-[100px] animate-bounce duration-300"})})})})]}),e.jsx(x,{children:A&&a&&e.jsxs(h.div,{initial:{opacity:0,y:-20,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.98},transition:{duration:.35,ease:[.4,0,.2,1]},className:"fixed left-0 right-0 z-40 w-full bg-secondary text-white shadow-2xl",style:{top:M?64:120},onMouseLeave:()=>{p(!1),g(null)},children:[e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-8  max-h-[calc(80vh-100px)]  overflow-hidden",children:O(a.id).length>0?e.jsx("div",{className:"flex gap-8 overflow-x-auto pb-2 scrollbar-thin scrollbar-thumb-white scrollbar-track-white/30 scrollbar-thumb-rounded-md scrollbar-track-rounded-md transition-all duration-300",style:{WebkitOverflowScrolling:"touch",maxWidth:"100%",overflowX:"auto"},children:O(a.id).map(s=>{const t="min(400px, 33vw)";return e.jsxs("div",{className:"flex-shrink-0 space-y-4 bg-[#232323] rounded-lg p-4",style:{minWidth:t,maxWidth:t,width:t,boxSizing:"border-box"},children:[e.jsx("div",{className:"border-b border-gray-600 pb-2",children:e.jsx("h3",{className:"text-lg font-bold text-white",children:s.name})}),e.jsx("ul",{className:"space-y-2 max-h-[320px] overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-white scrollbar-track-white/30 scrollbar-thumb-rounded-md scrollbar-track-rounded-md",children:Q(a.id,s.id).map(r=>e.jsx("li",{children:e.jsxs("a",{href:`/categoria/${a.slug}/${r.slug}`,className:"text-gray-300 hover:text-white transition-colors text-sm flex items-center gap-2",children:[e.jsx("span",{className:"text-[#00B5CE]",children:"•"}),e.jsx("span",{children:r.name})]})},r.id))})]},s.id)})}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:ee(a.id).map(s=>e.jsx("a",{href:`/categoria/${a.slug}/${s.slug}`,className:"bg-[#3A3A3A] rounded-lg p-4 hover:bg-[#4A4A4A] transition-colors",children:e.jsx("h3",{className:"text-white font-medium text-sm",children:s.name})},s.id))})}),e.jsx("div",{className:"bg-[#1A1A1A] border-t border-gray-600",children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsx("h4",{className:"text-lg font-bold text-white",children:"Por aplicación"}),e.jsx("div",{className:"flex flex-wrap items-center gap-4 md:gap-6",children:["CONSTRUCCIÓN","CARPINTERÍA","MAESTRANZA","MINERÍA"].map((s,t,r)=>e.jsxs(se.Fragment,{children:[e.jsx("a",{href:`/categoria/${s.toLowerCase()}`,className:"text-sm font-medium text-gray-300 hover:text-[#00B5CE] transition-colors uppercase tracking-wide",children:s}),t<r.length-1&&e.jsx("span",{className:"text-gray-600 hidden md:inline",children:"|"})]},s))})]})})})]})})]})};export{Ue as default};
