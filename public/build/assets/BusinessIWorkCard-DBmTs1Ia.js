var c=Object.defineProperty;var g=(n,s,r)=>s in n?c(n,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[s]=r;var a=(n,s,r)=>g(n,typeof s!="symbol"?s+"":s,r);import"./AboutSimple-Cf8x2fCZ.js";import"./index-BH53Isel.js";import{m as o}from"./main-BSEyQEJW.js";import"./index-yBjzXJbu.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";class y{constructor(){a(this,"path",null);a(this,"hasFiles",!1);a(this,"controller",null);a(this,"simpleGet",async(s,r)=>{try{const{status:e,result:t}=await o.Fetch(s,r);if(!e)throw new Error((t==null?void 0:t.message)||"Ocurrio un error inesperado");return t.data??!0}catch(e){return o.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:e.message,type:"danger"}),null}});a(this,"paginate",async s=>{this.controller.abort("Nothing"),this.controller=new AbortController;const r=this.controller.signal;return await(await fetch(`/api/${this.path}/paginate`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(o.Cookies.get("XSRF-TOKEN"))},body:JSON.stringify(s),signal:r})).json()});a(this,"save",async(s,r=()=>{})=>{try{let e=!1,t={};if(this.hasFiles){const i=await fetch(`/api/${this.path}`,{method:"POST",headers:{"X-Xsrf-Token":decodeURIComponent(o.Cookies.get("XSRF-TOKEN"))},body:s});e=i.ok,t=JSON.parseable(await i.text())}else{const i=await o.Fetch(`/api/${this.path}`,{method:"POST",body:JSON.stringify(s)});e=i.status,t=i.result}if(!e)throw new Error((t==null?void 0:t.message)||"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/icon.svg",title:"Correcto",body:t.message,type:"success"}),r==null||r(),(t==null?void 0:t.data)??!0}catch(e){return o.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:e.message,type:"danger"}),null}});a(this,"status",async({id:s,status:r})=>{try{const{status:e,result:t}=await o.Fetch(`/api/${this.path}/status`,{method:"PATCH",body:JSON.stringify({id:s,status:r})});if(!e)throw new Error((t==null?void 0:t.message)??"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/icon.svg",title:"Correcto",body:t.message,type:"success"}),!0}catch(e){return o.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:e.message,type:"danger"}),!1}});a(this,"boolean",async({id:s,field:r,value:e})=>{try{const{status:t,result:i}=await o.Fetch(`/api/${this.path}/boolean`,{method:"PATCH",body:JSON.stringify({id:s,field:r,value:e})});if(!t)throw new Error((i==null?void 0:i.message)??"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/icon.svg",title:"Correcto",body:i.message,type:"success"}),!0}catch(t){return o.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:t.message,type:"danger"}),!1}});a(this,"delete",async s=>{try{const{status:r,result:e}=await o.Fetch(`/api/${this.path}/${s}`,{method:"DELETE"});if(!r)throw new Error((e==null?void 0:e.message)??"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/icon.svg",title:"Correcto",body:e.message,type:"success"}),!0}catch(r){return o.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:r.message,type:"danger"}),!1}});a(this,"get",async(s={},r=[])=>{try{let e=`/api/${this.path}`;if(typeof s=="string"||typeof s=="number")e+=`/${s}`;else if(typeof s=="object"&&Object.keys(s).length>0){const i=new URLSearchParams(s).toString();e+=`?${i}`}if(r.length>0){const i=r.join(",");e+=`${e.includes("?")?"&":"?"}with=${i}`}const t=await fetch(e,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(o.Cookies.get("XSRF-TOKEN"))}});if(!t.ok)throw new Error(`Error ${t.status}: ${t.statusText}`);return await t.json()}catch(e){return o.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:e.message,type:"danger"}),null}});this.controller=new AbortController}}class d extends y{constructor(){super(...arguments);a(this,"path","users-by-services-by-business");a(this,"inviteUser",async(r,e)=>{try{const{status:t,result:i}=await o.Fetch(`/api/${this.path}`,{method:"POST",body:JSON.stringify({email:r,match:e})});if(!t)throw new Error((i==null?void 0:i.message)||"Ocurrio un error al agregar el usuario");return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:i.message,type:"success"}),!0}catch(t){return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:t.message,type:"danger"}),!1}});a(this,"authorize",async r=>{try{const{status:e,result:t}=await o.Fetch(`/api/${this.path}/authorize`,{method:"POST",body:JSON.stringify(r)});if(!e)throw new Error((t==null?void 0:t.message)||"Ocurrio un error al abrir el servicio");return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:t.message,type:"success"}),!0}catch(e){return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:e.message,type:"danger"}),!1}})}}new d;
