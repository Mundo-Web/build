import{c as e,j as a,r as s,D as n,i as t,m as i}from"./vendor-react-CWR92fp6.js";import{B as o}from"./Base-720R7P2J.js";import{C as c}from"./CreateReactScript-DEkx_UD4.js";import{S as l}from"./CartKuchara-Dv4IzV1I.js";import{C as r,N as d}from"./Number2Currency-BX4epFEo.js";import{M as m}from"./Modal-BDEftn0t.js";import"./TippyButton-BozxD_uD.js";import{e as p}from"./es-XhOIR5ky.js";import"./vendor-swiper-T7yreVnW.js";import"./Global-BAGAPG-V.js";import"./Logout-D1lX4Eka.js";import"./MenuItemContainer-BN3ovvaX.js";import"./Menu-BoHY91ba.js";import"./General-ClVW7qxN.js";import"./LaravelSession-ByQnaUD3.js";import"./BooleanLimit-q2Ad9fGY.js";const x=({rooms:e=[]})=>{const o=s.useRef(),c=s.useRef(),[x,h]=s.useState(new Date),[u,f]=s.useState([]),[g,b]=s.useState(!1),[j,N]=s.useState(null),[y,v]=s.useState(null),[k,w]=s.useState(!1),[C,S]=s.useState(null),[_,D]=s.useState(null),[E,z]=s.useState(""),[T,R]=s.useState(!0),O=s.useRef(),[I,M]=s.useState({fullname:"",email:"",phone:"",phone_prefix:"+51",document_type:"dni",document:"",guests:1,nights:1,check_in:new Date,check_out:new Date((new Date).setDate((new Date).getDate()+1)),special_requests:"",payment_method:"efectivo"}),[B,F]=s.useState(!1),[A,X]=s.useState(0),P=async(e=x)=>{b(!0);try{const a=e.toISOString().split("T")[0],s=await fetch(`/api/admin/room-availability/summary?date=${a}`,{headers:{Accept:"application/json","X-Xsrf-Token":decodeURIComponent(i.Cookies.get("XSRF-TOKEN"))}}),n=await s.json();200===n.status&&f(n.data.rooms||[])}catch(a){}b(!1)};s.useEffect(()=>{P()},[]),s.useEffect(()=>{j&&I.nights>0&&X(I.nights*Number(j?.price||0))},[I.nights]);const L=async e=>{N(e),w(!0),$(o.current).modal("show");try{const a=new Date,s=new Date;s.setMonth(s.getMonth()+3);const n=await fetch(`/api/admin/room-availability/${e.id}/calendar?start_date=${a.toISOString().split("T")[0]}&end_date=${s.toISOString().split("T")[0]}`,{headers:{Accept:"application/json","X-Xsrf-Token":decodeURIComponent(i.Cookies.get("XSRF-TOKEN"))}}),t=await n.json();200===t.status&&v(t.data)}catch(a){}w(!1)},Y=async e=>{if((await l.fire({title:"Check-Out",html:`\n        <p>Â¿Confirmar el check-out del huÃ©sped?</p>\n        <small class="text-muted">Fecha y hora: ${(new Date).toLocaleString("es-PE")}</small>\n        <div class="alert alert-info mt-3 mb-0">\n          <i class="mdi mdi-information"></i>\n          La habitaciÃ³n pasarÃ¡ a estado de <strong>limpieza</strong>\n        </div>\n      `,icon:"question",showCancelButton:!0,confirmButtonColor:"#17a2b8",cancelButtonColor:"#6c757d",confirmButtonText:'<i class="mdi mdi-check-all"></i> Confirmar Check-Out',cancelButtonText:"Cancelar"})).isConfirmed)try{const a=await fetch(`/api/admin/bookings/${e}/complete`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(i.Cookies.get("XSRF-TOKEN"))}}),s=await a.json();s.status?(l.fire({icon:"success",title:"Â¡Check-Out Realizado!",html:'\n            <p>La reserva ha sido completada correctamente</p>\n            <div class="alert alert-warning mt-2">\n              <i class="mdi mdi-broom"></i> HabitaciÃ³n en proceso de limpieza\n            </div>\n          ',timer:2500,showConfirmButton:!1}),j&&await L(j),P()):l.fire("Error",s.message||"Error al realizar check-out","error")}catch(a){l.fire("Error","Error al procesar la solicitud","error")}},q=async e=>{const{value:a}=await l.fire({title:"Cancelar Reserva",input:"textarea",inputLabel:"RazÃ³n de la cancelaciÃ³n",inputPlaceholder:"Ej: Cliente solicitÃ³ cancelaciÃ³n, cambio de planes, etc.",inputAttributes:{"aria-label":"RazÃ³n de cancelaciÃ³n"},showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:'<i class="mdi mdi-close-circle"></i> Cancelar Reserva',cancelButtonText:"No cancelar",inputValidator:e=>{if(!e)return"Debes ingresar una razÃ³n para la cancelaciÃ³n"}});if(a)try{const s=await fetch(`/api/admin/bookings/${e}/cancel`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(i.Cookies.get("XSRF-TOKEN"))},body:JSON.stringify({reason:a})}),n=await s.json();n.status?(l.fire({icon:"success",title:"Â¡Reserva Cancelada!",text:"La reserva ha sido cancelada correctamente",timer:2e3,showConfirmButton:!1}),j&&await L(j),P()):l.fire("Error",n.message||"Error al cancelar la reserva","error")}catch(s){l.fire("Error","Error al procesar la solicitud","error")}};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsx("div",{className:"card",children:a.jsxs("div",{className:"card-body",children:[a.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[a.jsxs("h4",{className:"header-title mb-0",children:[a.jsx("i",{className:"mdi mdi-calendar-check mr-2"}),"Disponibilidad de Habitaciones"]}),a.jsxs("div",{className:"d-flex align-items-center gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"small text-muted mb-1 d-block",children:"Fecha de consulta:"}),a.jsx(n,{selected:x,onChange:e=>{h(e),P(e)},locale:p,dateFormat:"dd/MM/yyyy",className:"form-control form-control-sm"})]}),a.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>P(),disabled:g,children:[a.jsx("i",{className:"mdi mdi-refresh mr-1"}),g?"Cargando...":"Actualizar"]})]})]}),a.jsxs("div",{className:"d-flex gap-3 mb-4 flex-wrap",children:[a.jsxs("span",{className:"badge px-3 py-2",style:{backgroundColor:"#28a745",color:"#ffffff"},children:[a.jsx("i",{className:"mdi mdi-check-circle mr-1"})," Disponible"]}),a.jsxs("span",{className:"badge px-3 py-2",style:{backgroundColor:"#dc3545",color:"#ffffff"},children:[a.jsx("i",{className:"mdi mdi-bed mr-1"})," Ocupada"]}),a.jsxs("span",{className:"badge px-3 py-2",style:{backgroundColor:"#ffc107",color:"#000000"},children:[a.jsx("i",{className:"mdi mdi-clock mr-1"})," Reservada"]}),a.jsxs("span",{className:"badge px-3 py-2",style:{backgroundColor:"#fd7e14",color:"#ffffff"},children:[a.jsx("i",{className:"mdi mdi-broom mr-1"})," En Limpieza"]}),a.jsxs("span",{className:"badge px-3 py-2",style:{backgroundColor:"#6c757d",color:"#ffffff"},children:[a.jsx("i",{className:"mdi mdi-tools mr-1"})," Mantenimiento"]})]}),a.jsx("div",{className:"row",children:u.map(e=>{const s=(e=>{const a={available:{bg:"#28a745",text:"#ffffff",label:"Disponible",icon:"mdi-check-circle"},occupied:{bg:"#dc3545",text:"#ffffff",label:"Ocupada",icon:"mdi-bed"},reserved:{bg:"#ffc107",text:"#000000",label:"Reservada",icon:"mdi-clock"},cleaning:{bg:"#fd7e14",text:"#ffffff",label:"En Limpieza",icon:"mdi-broom"},maintenance:{bg:"#6c757d",text:"#ffffff",label:"Mantenimiento",icon:"mdi-tools"},full:{bg:"#17a2b8",text:"#ffffff",label:"Sin disponibilidad",icon:"mdi-information"}};return a[e]||a.available})(e.status);return a.jsx("div",{className:"col-xl-3 col-lg-4 col-md-6 col-sm-12 mb-4",children:a.jsxs("div",{className:"room-card",style:{"--status-color":s.bg,"--status-text":s.text},children:[a.jsxs("div",{className:"room-status-badge",style:{backgroundColor:s.bg},children:[a.jsx("i",{className:`mdi ${s.icon}`}),a.jsx("span",{children:s.label})]}),a.jsx("div",{className:"room-header",children:a.jsxs("div",{className:"room-title-section",children:[a.jsx("div",{className:"room-icon-badge",style:{backgroundColor:`${s.bg}15`,color:s.bg},children:a.jsx("i",{className:"mdi mdi-bed"})}),a.jsx("h5",{className:"room-name",children:e.name})]})}),a.jsxs("div",{className:"room-body",children:[a.jsxs("div",{className:"room-quick-info",children:[a.jsxs("div",{className:"info-pill",children:[a.jsx("i",{className:"mdi mdi-account-multiple"}),a.jsxs("span",{children:[e.max_occupancy||e.capacity," personas"]})]}),a.jsxs("div",{className:"info-pill info-pill-price",children:[a.jsx("i",{className:"mdi mdi-cash-multiple"}),a.jsxs("span",{children:["S/ ",Number(e.price).toFixed(2)]})]})]}),e.active_booking&&a.jsxs("div",{className:"room-booking-info",children:[a.jsxs("div",{className:"booking-header",children:[a.jsx("i",{className:"mdi mdi-account-circle"}),a.jsx("span",{className:"booking-label",children:"HuÃ©sped Actual"})]}),a.jsxs("div",{className:"booking-details",children:[a.jsx("div",{className:"guest-name",children:e.active_booking.guest_name||"N/A"}),a.jsxs("div",{className:"checkout-date",children:[a.jsx("i",{className:"mdi mdi-calendar-export"}),moment(e.active_booking.check_out).format("DD/MM/YYYY")]})]})]}),a.jsxs("div",{className:"room-actions-icons",children:["available"===e.status&&a.jsx(t,{content:"Ocupar Ahora",placement:"top",children:a.jsx("button",{className:"room-icon-btn room-icon-btn-success",onClick:()=>(e=>{N(e);const a=new Date,s=new Date;s.setDate(s.getDate()+1),M({fullname:"",email:"",phone:"",phone_prefix:"+51",document_type:"dni",document:"",guests:1,nights:1,check_in:a,check_out:s,special_requests:"",payment_method:"efectivo"}),X(Number(e?.price||0)),$(O.current).modal("show")})(e),children:a.jsx("i",{className:"mdi mdi-account-plus mdi-24px"})})}),"occupied"===e.status&&e.active_booking&&a.jsx(t,{content:"Check-Out",placement:"top",children:a.jsx("button",{className:"room-icon-btn room-icon-btn-info",onClick:()=>Y(e.active_booking.id),children:a.jsx("i",{className:"mdi mdi-logout mdi-24px"})})}),"cleaning"===e.status&&a.jsx(t,{content:"Limpieza Completada",placement:"top",children:a.jsx("button",{className:"room-icon-btn room-icon-btn-success",onClick:()=>(async e=>{if((await l.fire({title:"Finalizar Limpieza",html:'\n        <p>Â¿Confirmar que la limpieza ha sido completada?</p>\n        <div class="alert alert-success mt-3 mb-0">\n          <i class="mdi mdi-check-circle"></i>\n          La habitaciÃ³n quedarÃ¡ <strong>disponible</strong> para nuevas reservas\n        </div>\n      ',icon:"question",showCancelButton:!0,confirmButtonColor:"#28a745",cancelButtonColor:"#6c757d",confirmButtonText:'<i class="mdi mdi-check-all"></i> Limpieza Completada',cancelButtonText:"Cancelar"})).isConfirmed)try{const a=await fetch(`/api/admin/room-availability/${e}/complete-cleaning`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(i.Cookies.get("XSRF-TOKEN"))},body:JSON.stringify({date:(new Date).toISOString().split("T")[0]})}),s=await a.json();200===s.status?(l.fire({icon:"success",title:"Â¡Limpieza Completada!",text:"La habitaciÃ³n estÃ¡ disponible nuevamente",timer:2e3,showConfirmButton:!1}),P(),$(o.current).hasClass("show")&&j&&L(j)):l.fire("Error",s.message||"Error al completar limpieza","error")}catch(a){l.fire("Error","Error al procesar la solicitud","error")}})(e.id),children:a.jsx("i",{className:"mdi mdi-check-all mdi-24px"})})}),a.jsx(t,{content:"Ver Calendario",placement:"top",children:a.jsx("button",{className:"room-icon-btn room-icon-btn-secondary",onClick:()=>L(e),children:a.jsx("i",{className:"mdi mdi-calendar mdi-24px"})})}),a.jsx(t,{content:"Mantenimiento",placement:"top",children:a.jsx("button",{className:"room-icon-btn room-icon-btn-warning",onClick:()=>(e=>{N(e),S(new Date),D(new Date),z(""),R(!0),$(c.current).modal("show")})(e),children:a.jsx("i",{className:"mdi mdi-tools mdi-24px"})})})]})]})]})},e.id)})}),a.jsx("style",{children:"\n                .room-card {\n                  background: white;\n                  border-radius: 12px;\n                  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\n                  transition: all 0.2s ease;\n                  height: 100%;\n                  position: relative;\n                  overflow: hidden;\n                  border: 1px solid #e8e8e8;\n                  display: flex;\n                  flex-direction: column;\n                }\n                \n                .room-card:hover {\n                  transform: translateY(-2px);\n                  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);\n                }\n                \n                .room-status-badge {\n                  position: absolute;\n                  top: 10px;\n                  right: 10px;\n                  padding: 4px 10px;\n                  border-radius: 12px;\n                  font-size: 10px;\n                  font-weight: 600;\n                  color: white;\n                  display: flex;\n                  align-items: center;\n                  gap: 4px;\n                  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);\n                  z-index: 1;\n                }\n                \n                .room-status-badge i {\n                  font-size: 12px;\n                }\n                \n                .room-header {\n                  padding: 16px 120px 16px 16px;\n                  display: flex;\n                  align-items: center;\n                  justify-content: space-between;\n                  border-bottom: 1px solid #f0f0f0;\n                }\n                \n                .room-title-section {\n                  display: flex;\n                  align-items: center;\n                  gap: 10px;\n                  flex: 1;\n                }\n                \n                .room-icon-badge {\n                  width: 36px;\n                  height: 36px;\n                  border-radius: 8px;\n                  display: flex;\n                  align-items: center;\n                  justify-content: center;\n                  font-size: 20px;\n                  flex-shrink: 0;\n                }\n                \n                .room-name {\n                  margin: 0;\n                  font-size: 1.1rem;\n                  font-weight: 700;\n                  color: #2d3748;\n                }\n                \n                .room-body {\n                  padding: 14px;\n                  flex: 1;\n                  display: flex;\n                  flex-direction: column;\n                }\n                \n                .room-quick-info {\n                  margin-bottom: 10px;\n                  display: flex;\n                  gap: 8px;\n                  flex-wrap: wrap;\n                }\n                \n                .info-pill {\n                  display: inline-flex;\n                  align-items: center;\n                  gap: 6px;\n                  background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);\n                  padding: 6px 12px;\n                  border-radius: 12px;\n                  font-size: 12px;\n                  color: #4a5568;\n                  font-weight: 600;\n                  border: 1px solid #e2e8f0;\n                }\n                \n                .info-pill i {\n                  font-size: 16px;\n                  color: #4299e1;\n                }\n                \n                .info-pill span {\n                  font-weight: 600;\n                }\n                \n                .info-pill-price {\n                  background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);\n                  border-color: #28a745;\n                }\n                \n                .info-pill-price i {\n                  color: #28a745;\n                }\n                \n                .info-pill-price span {\n                  color: #155724;\n                  font-weight: 700;\n                }\n                \n                .room-booking-info {\n                  background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);\n                  border-radius: 10px;\n                  padding: 10px 12px;\n                  margin-bottom: 10px;\n                  border: 1px solid #e2e8f0;\n                }\n                \n                .booking-header {\n                  display: flex;\n                  align-items: center;\n                  gap: 6px;\n                  margin-bottom: 8px;\n                  padding-bottom: 6px;\n                  border-bottom: 1px solid #e2e8f0;\n                }\n                \n                .booking-header i {\n                  font-size: 16px;\n                  color: #4299e1;\n                }\n                \n                .booking-label {\n                  font-size: 11px;\n                  font-weight: 600;\n                  text-transform: uppercase;\n                  color: #4a5568;\n                  letter-spacing: 0.5px;\n                }\n                \n                .booking-details {\n                  display: flex;\n                  justify-content: space-between;\n                  align-items: center;\n                  gap: 8px;\n                }\n                \n                .guest-name {\n                  font-size: 13px;\n                  font-weight: 600;\n                  color: #2d3748;\n                  flex: 1;\n                  min-width: 0;\n                  overflow: hidden;\n                  text-overflow: ellipsis;\n                  white-space: nowrap;\n                }\n                \n                .checkout-date {\n                  display: flex;\n                  align-items: center;\n                  gap: 4px;\n                  font-size: 12px;\n                  color: #dc3545;\n                  font-weight: 600;\n                  flex-shrink: 0;\n                }\n                \n                .checkout-date i {\n                  font-size: 14px;\n                }\n                \n                .room-actions-icons {\n                  display: flex;\n                  gap: 6px;\n                  justify-content: center;\n                  flex-wrap: wrap;\n                  margin-top: auto;\n                  padding-top: 10px;\n                }\n                \n                .room-icon-btn {\n                  width: 40px;\n                  height: 40px;\n                  border: none;\n                  border-radius: 8px;\n                  cursor: pointer;\n                  transition: all 0.2s ease;\n                  display: flex;\n                  align-items: center;\n                  justify-content: center;\n                  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n                }\n                \n                .room-icon-btn:hover {\n                  transform: translateY(-2px);\n                  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n                }\n                \n                .room-icon-btn-success {\n                  background: #28a745;\n                  color: white;\n                }\n                \n                .room-icon-btn-success:hover {\n                  background: #218838;\n                }\n                \n                .room-icon-btn-info {\n                  background: #17a2b8;\n                  color: white;\n                }\n                \n                .room-icon-btn-info:hover {\n                  background: #138496;\n                }\n                \n                .room-icon-btn-secondary {\n                  background: #f7fafc;\n                  color: #4a5568;\n                  border: 1px solid #e2e8f0;\n                }\n                \n                .room-icon-btn-secondary:hover {\n                  background: #edf2f7;\n                  border-color: #cbd5e0;\n                }\n                \n                .room-icon-btn-warning {\n                  background: #ffc107;\n                  color: #000;\n                }\n                \n                .room-icon-btn-warning:hover {\n                  background: #e0a800;\n                }\n              "}),0===u.length&&!g&&a.jsxs("div",{className:"text-center text-muted py-5",children:[a.jsx("i",{className:"mdi mdi-bed-empty mdi-48px"}),a.jsx("p",{className:"mt-2",children:"No hay habitaciones registradas"})]})]})})})}),a.jsx(m,{modalRef:o,title:`Calendario - ${j?.name||""}`,size:"xl",hideButtonSubmit:!0,children:k?a.jsxs("div",{className:"text-center py-5",children:[a.jsx("div",{className:"spinner-border text-primary",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Cargando..."})}),a.jsx("p",{className:"mt-2",children:"Cargando calendario..."})]}):a.jsxs("div",{children:[a.jsxs("div",{className:"d-flex gap-2 mb-3 flex-wrap justify-content-center",children:[a.jsxs("span",{className:"badge px-2 py-1",style:{backgroundColor:"#28a745",color:"#ffffff",fontSize:"11px"},children:[a.jsx("i",{className:"mdi mdi-check-circle mr-1"})," Disponible"]}),a.jsxs("span",{className:"badge px-2 py-1",style:{backgroundColor:"#dc3545",color:"#ffffff",fontSize:"11px"},children:[a.jsx("i",{className:"mdi mdi-bed mr-1"})," Ocupado"]}),a.jsxs("span",{className:"badge px-2 py-1",style:{backgroundColor:"#ffc107",color:"#000000",fontSize:"11px"},children:[a.jsx("i",{className:"mdi mdi-clock mr-1"})," Reservado"]}),a.jsxs("span",{className:"badge px-2 py-1",style:{backgroundColor:"#6c757d",color:"#ffffff",fontSize:"11px"},children:[a.jsx("i",{className:"mdi mdi-tools mr-1"})," Mantenimiento"]})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-5",children:a.jsx("div",{className:"border rounded p-3",style:{backgroundColor:"#f8f9fa",maxHeight:"600px",overflowY:"auto"},children:y?.bookings?.length>0?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3 sticky-top bg-light py-2 px-2 rounded",style:{top:0,zIndex:1},children:[a.jsxs("h6",{className:"mb-0 font-weight-bold",children:[a.jsx("i",{className:"mdi mdi-account-group mx-2 text-primary"}),"Reservas"]}),a.jsx("span",{className:"badge badge-primary badge-pill",children:y.bookings.length})]}),y.bookings.map(e=>{const s={pending:{badge:"badge-warning",label:"Pendiente",color:"#f1b44c",bg:"#fff3cd",icon:"mdi-clock-outline"},confirmed:{badge:"badge-success",label:"Confirmada",color:"#28a745",bg:"#d4edda",icon:"mdi-check-circle"},cancelled:{badge:"badge-danger",label:"Cancelada",color:"#dc3545",bg:"#f8d7da",icon:"mdi-close-circle"},completed:{badge:"badge-info",label:"Completada",color:"#17a2b8",bg:"#d1ecf1",icon:"mdi-checkbox-marked-circle"},no_show:{badge:"badge-secondary",label:"No Show",color:"#6c757d",bg:"#e2e3e5",icon:"mdi-account-off"}}[n=e.status]||{badge:"badge-secondary",label:n||"Sin estado",color:"#6c757d",bg:"#e2e3e5",icon:"mdi-help-circle"};var n;return a.jsx("div",{className:"card mb-3 shadow-sm",style:{borderLeft:`4px solid ${s.color}`,transition:"all 0.2s ease"},children:a.jsxs("div",{className:"card-body p-3",children:[a.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center mr-2",style:{width:"40px",height:"40px",backgroundColor:s.bg,color:s.color},children:a.jsx("i",{className:`mdi ${s.icon} mdi-24px`})}),a.jsxs("div",{className:"mx-2",children:[a.jsxs("h6",{className:"mb-0 font-weight-bold",children:[e.sale?.name," ",e.sale?.lastname]}),a.jsxs("small",{className:"text-muted",children:["#",e.sale?.code||"N/A"]})]})]}),a.jsx("span",{className:"badge px-2 py-1",style:{backgroundColor:s.bg,color:s.color,fontWeight:"600",fontSize:"11px",letterSpacing:"0.5px"},children:s.label.toUpperCase()})]}),a.jsxs("div",{className:"mb-2 pb-2 border-bottom",children:[a.jsxs("div",{className:"d-flex align-items-center mb-1",children:[a.jsx("i",{className:"mdi mdi-email text-muted mx-2"}),a.jsx("small",{className:"text-truncate",style:{maxWidth:"250px"},children:e.sale?.email})]}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("i",{className:"mdi mdi-phone text-muted mx-2"}),a.jsxs("small",{children:[e.sale?.phone_prefix||""," ",e.sale?.phone||"N/A"]})]})]}),a.jsx("div",{className:"mb-3",children:a.jsxs("div",{className:"row text-center",children:[a.jsx("div",{className:"col-5",children:a.jsxs("div",{className:"p-2 rounded",style:{backgroundColor:"#e7f5ec"},children:[a.jsx("i",{className:"mdi mdi-login text-success d-block mb-1"}),a.jsx("small",{className:"d-block text-muted",style:{fontSize:"10px"},children:"CHECK-IN"}),a.jsx("strong",{className:"d-block",style:{fontSize:"13px"},children:new Date(e.check_in).toLocaleDateString("es-PE",{day:"2-digit",month:"short"})})]})}),a.jsx("div",{className:"col-2 d-flex align-items-center justify-content-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("i",{className:"mdi mdi-arrow-right text-muted"}),a.jsxs("small",{className:"d-block text-muted",children:[e.nights,"n"]})]})}),a.jsx("div",{className:"col-5",children:a.jsxs("div",{className:"p-2 rounded",style:{backgroundColor:"#ffeaea"},children:[a.jsx("i",{className:"mdi mdi-logout text-danger d-block mb-1"}),a.jsx("small",{className:"d-block text-muted",style:{fontSize:"10px"},children:"CHECK-OUT"}),a.jsx("strong",{className:"d-block",style:{fontSize:"13px"},children:new Date(e.check_out).toLocaleDateString("es-PE",{day:"2-digit",month:"short"})})]})})]})}),a.jsxs("div",{className:"d-flex justify-content-around mb-3 py-2",style:{backgroundColor:"#f8f9fa",borderRadius:"4px"},children:[a.jsxs("div",{className:"text-center",children:[a.jsx("i",{className:"mdi mdi-account-multiple text-primary"}),a.jsxs("small",{className:"d-block",children:[e.guests||1," huÃ©sped",(e.guests||1)>1?"es":""]})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("i",{className:"mdi mdi-cash-multiple text-success"}),a.jsxs("small",{className:"d-block",children:[r()," ",d(e.total_price||0)]})]})]}),a.jsxs("div",{className:"d-flex gap-2 flex-wrap",children:["pending"===e.status&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{className:"btn btn-sm btn-success flex-fill",onClick:()=>(async e=>{if((await l.fire({title:"Check-In",html:`\n        <p>Â¿Confirmar el check-in del huÃ©sped?</p>\n        <small class="text-muted">Fecha y hora: ${(new Date).toLocaleString("es-PE")}</small>\n      `,icon:"question",showCancelButton:!0,confirmButtonColor:"#28a745",cancelButtonColor:"#6c757d",confirmButtonText:'<i class="mdi mdi-check-circle"></i> Confirmar Check-In',cancelButtonText:"Cancelar"})).isConfirmed)try{const a=await fetch(`/api/admin/bookings/${e}/confirm`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(i.Cookies.get("XSRF-TOKEN"))}}),s=await a.json();s.status?(l.fire({icon:"success",title:"Â¡Check-In Realizado!",text:"El huÃ©sped ha hecho el check-in correctamente",timer:2e3,showConfirmButton:!1}),j&&await L(j),P()):l.fire("Error",s.message||"Error al realizar check-in","error")}catch(a){l.fire("Error","Error al procesar la solicitud","error")}})(e.id),title:"Check-In",children:[a.jsx("i",{className:"mdi mdi-login mr-1"})," Check-In"]}),a.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>q(e.id),title:"Cancelar",children:a.jsx("i",{className:"mdi mdi-close"})})]}),"confirmed"===e.status&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{className:"btn btn-sm btn-info flex-fill",onClick:()=>Y(e.id),title:"Check-Out",children:[a.jsx("i",{className:"mdi mdi-logout mr-1"})," Check-Out"]}),a.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>(async e=>{if((await l.fire({title:"Marcar como No Show",text:"Â¿El huÃ©sped no se presentÃ³ para el check-in?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#6c757d",cancelButtonColor:"#17a2b8",confirmButtonText:'<i class="mdi mdi-account-off"></i> Marcar No Show',cancelButtonText:"Cancelar"})).isConfirmed)try{const a=await fetch(`/api/admin/bookings/${e}/no-show`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(i.Cookies.get("XSRF-TOKEN"))}}),s=await a.json();s.status?(l.fire({icon:"info",title:"Marcada como No Show",text:"La reserva ha sido marcada como no show",timer:2e3,showConfirmButton:!1}),j&&await L(j),P()):l.fire("Error",s.message||"Error al marcar como no show","error")}catch(a){l.fire("Error","Error al procesar la solicitud","error")}})(e.id),title:"No Show",children:a.jsx("i",{className:"mdi mdi-account-off"})}),a.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>q(e.id),title:"Cancelar",children:a.jsx("i",{className:"mdi mdi-close"})})]}),["completed","cancelled","no_show"].includes(e.status)&&a.jsxs("div",{className:"text-center w-100 py-2 text-muted",children:[a.jsx("i",{className:"mdi mdi-information-outline mr-1"}),"Reserva finalizada"]})]})]})},e.id)})]}):a.jsxs("div",{className:"text-center text-muted py-5",children:[a.jsx("i",{className:"mdi mdi-calendar-blank mdi-48px"}),a.jsx("p",{className:"mt-2",children:"No hay reservas en este perÃ­odo"})]})})}),a.jsx("div",{className:"col-md-7",children:a.jsxs("div",{className:"border rounded p-2",style:{maxHeight:"600px",overflowY:"auto"},children:[a.jsxs("h6",{className:"mb-3 sticky-top bg-white py-2",style:{top:0,zIndex:1},children:[a.jsx("i",{className:"mdi mdi-calendar mr-1"}),"Vista de Calendario"]}),(()=>{if(!y)return null;const{availability:e,bookings:s}=y,n={};s?.forEach(e=>{const a=e.check_in.split(" ")[0],s=e.check_out.split(" ")[0],[t,i,o]=a.split("-"),[c,l,r]=s.split("-"),d=new Date(parseInt(t),parseInt(i)-1,parseInt(o)),m=new Date(parseInt(c),parseInt(l)-1,parseInt(r));let p=new Date(d);for(;p<=m;){const a=`${p.getFullYear()}-${String(p.getMonth()+1).padStart(2,"0")}-${String(p.getDate()).padStart(2,"0")}`;n[a]||(n[a]=[]),n[a].push(e),p.setDate(p.getDate()+1)}});const t={};return e?.forEach(e=>{const a=e.date.split("T")[0],[s,i,o]=a.split("-"),c=new Date(parseInt(s),parseInt(i)-1,parseInt(o)),l=`${c.getFullYear()}-${String(c.getMonth()+1).padStart(2,"0")}`;t[l]||(t[l]=[]),t[l].push({...e,date:a,bookings:n[a]||[]})}),Object.entries(t).map(([e,s])=>{const[n,t]=e.split("-"),i=new Date(n,t-1).toLocaleDateString("es-PE",{month:"long",year:"numeric"});return a.jsxs("div",{className:"mb-4",children:[a.jsx("h5",{className:"text-capitalize mb-3",children:i}),a.jsx("div",{className:"d-flex flex-wrap gap-1",children:s.map(e=>{const[s,n,t]=e.date.split("-"),i=new Date(parseInt(s),parseInt(n)-1,parseInt(t)).getDate(),o=e.is_blocked;e.bookings.length;const c=e.bookings.some(e=>"confirmed"===e.status),l=e.bookings.some(e=>"pending"===e.status);let r="#28a745",d="#ffffff",m="Disponible";return o?(r="#6c757d",d="#ffffff",m="Mantenimiento"):c?(r="#dc3545",d="#ffffff",m="Ocupada"):l?(r="#ffc107",d="#000000",m="Reservada"):0===e.available_rooms&&(r="#ffc107",d="#000000",m="Sin disponibilidad"),a.jsxs("div",{className:"text-center rounded p-2 d-flex align-items-center justify-content-center position-relative",style:{width:"45px",height:"45px",backgroundColor:r,color:d,cursor:"pointer",fontSize:"14px",fontWeight:"bold",border:"1px solid rgba(0,0,0,0.1)"},title:`${e.date}\n${m}${e.bookings.map(e=>`\nðŸ‘¤ ${e.sale?.name||"Cliente"}`).join("")}`,children:[i,o&&a.jsx("i",{className:"mdi mdi-tools position-absolute",style:{fontSize:"10px",top:"2px",right:"2px"}})]},e.date)})})]},e)})})()]})})]})]})}),a.jsxs(m,{modalRef:c,title:`Mantenimiento - ${j?.name||""}`,size:"md",buttonSubmit:"Aplicar",onSubmit:async()=>{if(C&&_)try{const e=await fetch(`/api/admin/room-availability/${j.id}/block`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(i.Cookies.get("XSRF-TOKEN"))},body:JSON.stringify({start_date:C.toISOString().split("T")[0],end_date:_.toISOString().split("T")[0],block:T,reason:E})}),a=await e.json();200===a.status?(l.fire("Â¡Ã‰xito!",a.message,"success"),$(c.current).modal("hide"),P(),y&&L(j)):l.fire("Error",a.message,"error")}catch(e){l.fire("Error","Error al procesar la solicitud","error")}else l.fire("Error","Selecciona las fechas","error")},children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"AcciÃ³n"}),a.jsxs("div",{className:"d-flex gap-3",children:[a.jsxs("div",{className:"form-check",children:[a.jsx("input",{type:"radio",className:"form-check-input",id:"blockAction",checked:T,onChange:()=>R(!0)}),a.jsxs("label",{className:"form-check-label",htmlFor:"blockAction",children:[a.jsx("i",{className:"mdi mdi-tools mr-1 text-warning"}),"Poner en mantenimiento"]})]}),a.jsxs("div",{className:"form-check",children:[a.jsx("input",{type:"radio",className:"form-check-input",id:"unblockAction",checked:!T,onChange:()=>R(!1)}),a.jsxs("label",{className:"form-check-label",htmlFor:"unblockAction",children:[a.jsx("i",{className:"mdi mdi-check mr-1 text-success"}),"Finalizar mantenimiento"]})]})]})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Fecha inicio"}),a.jsx(n,{selected:C,onChange:e=>S(e),selectsStart:!0,startDate:C,endDate:_,minDate:new Date,locale:p,dateFormat:"dd/MM/yyyy",className:"form-control"})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Fecha fin"}),a.jsx(n,{selected:_,onChange:e=>D(e),selectsEnd:!0,startDate:C,endDate:_,minDate:C||new Date,locale:p,dateFormat:"dd/MM/yyyy",className:"form-control"})]})})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"RazÃ³n (opcional)"}),a.jsx("textarea",{className:"form-control",rows:"3",value:E,onChange:e=>z(e.target.value),placeholder:"Ej: Mantenimiento, limpieza profunda, evento privado..."})]}),a.jsxs("div",{className:"alert alert-warning",children:[a.jsx("i",{className:"mdi mdi-information mr-1"}),T?"Las fechas en mantenimiento no estarÃ¡n disponibles para reservas.":"Al finalizar el mantenimiento, las fechas volverÃ¡n a estar disponibles."]})]}),a.jsxs(m,{modalRef:O,title:`Registrar OcupaciÃ³n - ${j?.name||""}`,size:"xl",buttonSubmit:B?"Procesando...":"Registrar OcupaciÃ³n",onSubmit:async e=>{if(e&&e.preventDefault&&e.preventDefault(),!I.fullname||!I.document)return await l.fire("Error","Complete todos los campos obligatorios (Nombre y NÂ° Documento)","error"),!1;if(I.email){if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(I.email))return await l.fire("Error","Ingrese un email vÃ¡lido","error"),!1}F(!0);try{const e=await fetch("/api/admin/bookings/direct-register",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(i.Cookies.get("XSRF-TOKEN"))},body:JSON.stringify({room_id:j.id,fullname:I.fullname,email:I.email||null,phone:I.phone,phone_prefix:I.phone_prefix,document_type:I.document_type,document:I.document,guests:I.guests,nights:I.nights,check_in:moment(I.check_in).format("YYYY-MM-DD"),check_out:moment(I.check_out).format("YYYY-MM-DD"),special_requests:I.special_requests,payment_method:I.payment_method,total_price:A})}),a=await e.json();if(200===a.status)return await l.fire({icon:"success",title:"Â¡Registro exitoso!",html:`\n            <p>HabitaciÃ³n ocupada correctamente</p>\n            <p><strong>CÃ³digo de reserva:</strong> ${a.data?.sale?.code||""}</p>\n          `,confirmButtonText:"Aceptar"}),$(O.current).modal("hide"),P(),!0;{let e=a.message||"Error al registrar la ocupaciÃ³n";if(a.errors){e=Object.values(a.errors).flat().join("<br>")}return await l.fire({icon:"error",title:"Error en el registro",html:e,confirmButtonText:"Aceptar"}),!1}}catch(a){return await l.fire({icon:"error",title:"Error de conexiÃ³n",text:"No se pudo conectar con el servidor. Verifique su conexiÃ³n.",confirmButtonText:"Aceptar"}),!1}finally{F(!1)}},children:[a.jsx("div",{className:"bg-light border-bottom p-3 mb-4",style:{margin:"-1rem -1rem 1.5rem -1rem"},children:a.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("div",{className:"bg-white rounded-circle p-2 mr-3",style:{width:"48px",height:"48px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx("i",{className:"mdi mdi-account-plus mdi-24px text-primary"})}),a.jsxs("div",{children:[a.jsx("h5",{className:"mb-1",children:"Registro Presencial de HuÃ©sped"}),a.jsx("small",{className:"text-muted",children:"Complete la informaciÃ³n para ocupar la habitaciÃ³n inmediatamente"})]})]}),a.jsxs("span",{className:"badge badge-primary badge-lg px-3 py-2",children:[a.jsx("i",{className:"mdi mdi-bed mr-1"}),j?.name]})]})}),a.jsxs("div",{className:"mb-5",children:[a.jsxs("h6",{className:"text-uppercase text-muted mb-4",style:{fontSize:"12px",fontWeight:"600",letterSpacing:"1px"},children:[a.jsx("i",{className:"mdi mdi-account-circle mr-2"}),"1. InformaciÃ³n del HuÃ©sped"]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-8",children:a.jsxs("div",{className:"form-group mb-4",children:[a.jsxs("label",{className:"font-weight-bold mb-2",children:["Nombre Completo ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{type:"text",className:"form-control",value:I.fullname,onChange:e=>M({...I,fullname:e.target.value}),placeholder:"Ej: Juan PÃ©rez GarcÃ­a"})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"form-group mb-4",children:[a.jsxs("label",{className:"font-weight-bold mb-2",children:["Email ",a.jsx("small",{className:"text-muted",children:"(opcional)"})]}),a.jsx("input",{type:"email",className:"form-control",value:I.email,onChange:e=>M({...I,email:e.target.value}),placeholder:"ejemplo@correo.com"})]})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"form-group mb-4",children:[a.jsxs("label",{className:"font-weight-bold mb-2",children:["TelÃ©fono ",a.jsx("small",{className:"text-muted",children:"(opcional)"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("select",{className:"form-control",style:{maxWidth:"120px"},value:I.phone_prefix,onChange:e=>M({...I,phone_prefix:e.target.value}),children:a.jsx("option",{value:"+51",children:"ðŸ‡µðŸ‡ª +51"})}),a.jsx("input",{type:"tel",className:"form-control",value:I.phone,onChange:e=>{const a=e.target.value.replace(/[^0-9]/g,"");M({...I,phone:a})},pattern:"[0-9]*",inputMode:"numeric",placeholder:"987654321",maxLength:"15"})]})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"form-group mb-4",children:[a.jsxs("label",{className:"font-weight-bold mb-2",children:["Tipo de Documento ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsxs("select",{className:"form-control",value:I.document_type,onChange:e=>M({...I,document_type:e.target.value,document:""}),children:[a.jsx("option",{value:"dni",children:"DNI (8 dÃ­gitos)"}),a.jsx("option",{value:"ce",children:"Carnet de ExtranjerÃ­a"}),a.jsx("option",{value:"pasaporte",children:"Pasaporte"}),a.jsx("option",{value:"ruc",children:"RUC (11 dÃ­gitos)"})]})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"form-group mb-4",children:[a.jsxs("label",{className:"font-weight-bold mb-2",children:["NÂ° de Documento ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{type:"text",className:"form-control",value:I.document,onChange:e=>{let a=e.target.value;const s=I.document_type;"dni"===s?a=a.replace(/[^0-9]/g,"").slice(0,8):"ruc"===s?a=a.replace(/[^0-9]/g,"").slice(0,11):"ce"===s?a=a.replace(/[^a-zA-Z0-9]/g,"").toUpperCase().slice(0,12):"pasaporte"===s&&(a=a.replace(/[^a-zA-Z0-9]/g,"").toUpperCase().slice(0,20)),M({...I,document:a})},placeholder:"dni"===I.document_type?"8 dÃ­gitos numÃ©ricos":"ruc"===I.document_type?"11 dÃ­gitos numÃ©ricos":"ce"===I.document_type?"AlfanumÃ©rico (mÃ¡x. 12)":"AlfanumÃ©rico (mÃ¡x. 20)",maxLength:"dni"===I.document_type?8:"ruc"===I.document_type?11:"ce"===I.document_type?12:20,required:!0}),a.jsxs("small",{className:"text-muted d-block mt-1",children:["dni"===I.document_type&&`${I.document.length}/8 dÃ­gitos`,"ruc"===I.document_type&&`${I.document.length}/11 dÃ­gitos`,"ce"===I.document_type&&`${I.document.length}/12 caracteres`,"pasaporte"===I.document_type&&`${I.document.length}/20 caracteres`]})]})})]})]}),a.jsx("hr",{className:"my-4"}),a.jsxs("div",{className:"mb-5",children:[a.jsxs("h6",{className:"text-uppercase text-muted mb-4",style:{fontSize:"12px",fontWeight:"600",letterSpacing:"1px"},children:[a.jsx("i",{className:"mdi mdi-calendar-check mr-2"}),"2. Detalles de la EstadÃ­a"]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"form-group mb-4",children:[a.jsxs("label",{className:"font-weight-bold mb-2",children:[a.jsx("i",{className:"mdi mdi-calendar-import text-success mr-1"}),"Fecha Check-In"]}),a.jsx(n,{selected:I.check_in,onChange:e=>{if(M({...I,check_in:e}),I.check_out){const a=Math.ceil((I.check_out-e)/864e5);M(e=>({...e,nights:a>0?a:1}))}},minDate:new Date,locale:p,dateFormat:"dd/MM/yyyy",className:"form-control"})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"form-group mb-4",children:[a.jsxs("label",{className:"font-weight-bold mb-2",children:[a.jsx("i",{className:"mdi mdi-calendar-export text-danger mr-1"}),"Fecha Check-Out"]}),a.jsx(n,{selected:I.check_out,onChange:e=>{if(M({...I,check_out:e}),I.check_in){const a=Math.ceil((e-I.check_in)/864e5);M(e=>({...e,nights:a>0?a:1}))}},minDate:I.check_in||new Date,locale:p,dateFormat:"dd/MM/yyyy",className:"form-control"})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"form-group mb-4",children:[a.jsxs("label",{className:"font-weight-bold mb-2",children:[a.jsx("i",{className:"mdi mdi-weather-night mr-1"}),"NÂ° de Noches"]}),a.jsx("input",{type:"number",className:"form-control text-center",min:"1",value:I.nights,onChange:e=>{const a=parseInt(e.target.value)||1,s=new Date(I.check_in);s.setDate(s.getDate()+a),M({...I,nights:a,check_out:s})},style:{fontWeight:"bold"}})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"form-group mb-4",children:[a.jsxs("label",{className:"font-weight-bold mb-2",children:[a.jsx("i",{className:"mdi mdi-account-multiple mr-1"}),"NÂ° de HuÃ©spedes"]}),a.jsx("input",{type:"number",className:"form-control text-center",min:"1",max:j?.capacity||10,value:I.guests,onChange:e=>M({...I,guests:parseInt(e.target.value)||1}),style:{fontWeight:"bold"}}),a.jsxs("small",{className:"text-muted d-block mt-2",children:["MÃ¡x: ",j?.capacity||0]})]})})]})]}),a.jsx("hr",{className:"my-4"}),a.jsxs("div",{className:"mb-5",children:[a.jsxs("h6",{className:"text-uppercase text-muted mb-4",style:{fontSize:"12px",fontWeight:"600",letterSpacing:"1px"},children:[a.jsx("i",{className:"mdi mdi-cash-multiple mr-2"}),"3. Pago y Observaciones"]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"form-group mb-4",children:[a.jsxs("label",{className:"font-weight-bold mb-2",children:[a.jsx("i",{className:"mdi mdi-credit-card mr-1"}),"MÃ©todo de Pago"]}),a.jsxs("select",{className:"form-control",value:I.payment_method,onChange:e=>M({...I,payment_method:e.target.value}),children:[a.jsx("option",{value:"efectivo",children:"Efectivo"}),a.jsx("option",{value:"tarjeta",children:"Tarjeta"}),a.jsx("option",{value:"transferencia",children:"Transferencia"}),a.jsx("option",{value:"yape",children:"Yape"}),a.jsx("option",{value:"plin",children:"Plin"})]})]})}),a.jsx("div",{className:"col-md-8",children:a.jsxs("div",{className:"form-group mb-4",children:[a.jsxs("label",{className:"font-weight-bold mb-2",children:[a.jsx("i",{className:"mdi mdi-message-text mr-1"}),"Solicitudes Especiales"]}),a.jsx("textarea",{className:"form-control",rows:"3",value:I.special_requests,onChange:e=>M({...I,special_requests:e.target.value}),placeholder:"Ej: Cama extra, cuna para bebÃ©, late check-out, alergias alimentarias..."})]})})]})]}),a.jsx("hr",{className:"my-4"}),a.jsx("div",{className:"bg-light border rounded p-4",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsxs("div",{className:"col-md-5",children:[a.jsxs("h6",{className:"text-uppercase text-muted mb-3",style:{fontSize:"12px",fontWeight:"600",letterSpacing:"1px"},children:[a.jsx("i",{className:"mdi mdi-calculator mr-2"}),"Total a Pagar"]}),a.jsxs("div",{className:"input-group",style:{height:"60px"},children:[a.jsx("div",{className:"input-group-prepend",children:a.jsx("span",{className:"input-group-text bg-success text-white font-weight-bold",style:{fontSize:"1.5rem",width:"60px",justifyContent:"center"},children:"S/"})}),a.jsx("input",{type:"number",className:"form-control",min:"0",step:"0.01",value:A,onChange:e=>X(parseFloat(e.target.value)||0),placeholder:"0.00",style:{fontSize:"1.25rem",fontWeight:"bold",color:"#28a745"}})]}),a.jsxs("small",{className:"text-muted d-block mt-2",children:[a.jsx("i",{className:"mdi mdi-pencil mr-1"}),"Editable segÃºn negociaciÃ³n con el cliente"]})]}),a.jsx("div",{className:"col-md-1 text-center d-none d-md-block",children:a.jsx("i",{className:"mdi mdi-arrow-right mdi-36px text-muted"})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"card mb-0 shadow-sm",children:[a.jsx("div",{className:"card-header bg-white py-3",children:a.jsx("h6",{className:"mb-0 font-weight-bold text-dark",children:"Desglose del Precio"})}),a.jsx("div",{className:"card-body",children:a.jsx("table",{className:"table table-borderless mb-0",children:a.jsxs("tbody",{children:[a.jsxs("tr",{children:[a.jsx("td",{className:"py-2",children:a.jsx("span",{className:"text-muted",children:"Precio por noche:"})}),a.jsx("td",{className:"text-right py-2",children:a.jsxs("strong",{className:"text-dark",children:["S/ ",Number(j?.price||0).toFixed(2)]})})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"py-2",children:a.jsx("span",{className:"text-muted",children:"NÃºmero de noches:"})}),a.jsx("td",{className:"text-right py-2",children:a.jsxs("strong",{className:"text-dark",children:["Ã— ",I.nights]})})]}),a.jsxs("tr",{className:"border-top",children:[a.jsx("td",{className:"py-3",children:a.jsx("strong",{className:"text-dark",children:"Precio sugerido:"})}),a.jsx("td",{className:"text-right py-3",children:a.jsxs("h5",{className:"mb-0 text-success font-weight-bold",children:["S/ ",(I.nights*Number(j?.price||0)).toFixed(2)]})})]})]})})})]})})]})})]})]})};c((s,n)=>{e.createRoot(s).render(a.jsx(o,{...n,title:"Disponibilidad de Habitaciones",children:a.jsx(x,{...n})}))});
