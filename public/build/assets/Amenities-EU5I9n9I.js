import{c as e,j as a,r as t}from"./vendor-react-CtPXetfm.js";import{B as i}from"./Base-B2hVq4yw.js";import{A as r}from"./AmenitiesRest-B5V7g5wa.js";import{T as s}from"./Table-CR9fFUuq.js";import{M as n}from"./Modal-CUkY7A3F.js";import{I as o}from"./ImageFormGroup-Cr7oEweG.js";import{I as l}from"./InputFormGroup-CRGKsLQr.js";import{T as d}from"./TextareaFormGroup-DXMahSF1.js";import{S as m}from"./SwitchFormGroup-CB0qoXn0.js";import{D as c}from"./DxButton-C6FT_beP.js";import{C as p,F as u}from"./CreateReactScript-Cjoo020C.js";import{R as f}from"./ReactAppend-RIOEhuYO.js";import{S as g}from"./CartKuchara-CLqHnhL7.js";import"./vendor-swiper-Cr_RrIb_.js";import"./Footer-coriRrmf.js";import"./TippyButton-Dqi9Vaf_.js";import"./Logout-DQyEsGXW.js";import"./MenuItemContainer-UDNHvqM7.js";import"./Menu-BjIZNCK0.js";import"./BasicRest-DpoFkM_z.js";import"./OpenPayCardModal-Dy4WIZ0X.js";import"./BooleanLimit-q2Ad9fGY.js";import"./General-ClVW7qxN.js";import"./LaravelSession-ByQnaUD3.js";const b=new r,h=()=>{const e=t.useRef(),i=t.useRef(),r=t.useRef(),p=t.useRef(),h=t.useRef(),j=t.useRef(),[x,v]=t.useState(!1),w=e=>{v(!!e?.id),h.current&&h.resetDeleteFlag&&h.resetDeleteFlag(),r.current.value=e?.id??"",p.current.value=e?.name??"",j.current.value=e?.description??"",h.current&&h.image&&(h.image.src=e?.image?`/storage/images/amenity/${e.image}`:"",h.current.value=null),$(i.current).modal("show")};return a.jsxs(a.Fragment,{children:[a.jsx(s,{gridRef:e,title:"Amenidades",rest:b,toolBar:a=>{a.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(e.current).dxDataGrid("instance").refresh()}}),a.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Nueva amenidad",hint:"Nueva amenidad",onClick:()=>w()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"image",caption:"Imagen/Icono",width:"100px",allowFiltering:!1,cellTemplate:(e,{data:t})=>{t.image&&f(e,a.jsx("img",{src:`/storage/images/amenity/${t.image}`,alt:t.name,style:{width:"70px",height:"70px",objectFit:"contain",borderRadius:"4px",padding:"5px",background:"#f8f9fa"},onError:e=>e.target.src="/api/cover/thumbnail/null"}))}},u.has("amenities","name")&&{dataField:"name",caption:"Nombre",width:"30%"},u.has("amenities","description")&&{dataField:"description",caption:"Descripción",width:"40%"},u.has("amenities","slug")&&{dataField:"slug",caption:"Slug",width:"20%"},{dataField:"visible",caption:"Visible",dataType:"boolean",cellTemplate:(t,{data:i})=>{$(t).empty(),f(t,a.jsx(m,{checked:1==i.visible,onChange:()=>(async({id:a,value:t})=>{await b.boolean({id:a,field:"visible",value:t})&&$(e.current).dxDataGrid("instance").refresh()})({id:i.id,value:!i.visible})}))}},{dataField:"status",caption:"Activo",dataType:"boolean",cellTemplate:(t,{data:i})=>{$(t).empty(),f(t,a.jsx(m,{checked:1==i.status,onChange:()=>(async({id:a,value:t})=>{await b.boolean({id:a,field:"status",value:t})&&$(e.current).dxDataGrid("instance").refresh()})({id:i.id,value:!i.status})}))}},{caption:"Acciones",cellTemplate:(a,{data:t})=>{a.css("text-overflow","unset"),a.append(c({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>w(t)})),a.append(c({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>(async a=>{const{isConfirmed:t}=await g.fire({title:"Eliminar amenidad",text:"¿Estás seguro de eliminar esta amenidad?",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"});if(!t)return;await b.delete(a)&&$(e.current).dxDataGrid("instance").refresh()})(t.id)}))},allowFiltering:!1,allowExporting:!1}].filter(e=>!!e&&!("image"===e.dataField&&!u.has("amenities","image")))}),a.jsxs(n,{modalRef:i,title:x?"Editar amenidad":"Nueva amenidad",onSubmit:async a=>{a.preventDefault();const t={id:r.current.value||void 0,name:p.current.value,description:j.current.value},s=new FormData;for(const e in t)s.append(e,t[e]);if(h.current){const e=h.current.files[0];e&&s.append("image",e),h.getDeleteFlag&&h.getDeleteFlag()&&s.append("image_delete","DELETE")}await b.save(s)&&(h.current&&h.resetDeleteFlag&&h.resetDeleteFlag(),$(e.current).dxDataGrid("instance").refresh(),$(i.current).modal("hide"))},size:"md",children:[a.jsx("input",{ref:r,type:"hidden"}),a.jsxs("div",{className:"row",id:"amenities-container",children:[a.jsxs("div",{className:"col-md-5",children:[a.jsx(o,{eRef:h,name:"image",label:"Imagen/Icono",aspect:1,required:!0}),a.jsxs("small",{className:"text-muted mb-3",children:[a.jsx("i",{className:"fas fa-info-circle me-1"}),"formato cuadrado, PNG con fondo transparente"]})]}),a.jsxs("div",{className:"col-md-7",children:[a.jsx(l,{eRef:p,label:"Nombre",required:!0}),a.jsx(d,{eRef:j,label:"Descripción",rows:3,hidden:!u.has("amenities","description")})]})]})]})]})};p((t,r)=>{e.createRoot(t).render(a.jsx(i,{...r,title:"Amenidades",children:a.jsx(h,{...r})}))});
