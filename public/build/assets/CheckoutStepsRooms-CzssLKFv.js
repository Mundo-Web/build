var e=Object.defineProperty,s=(s,t,a)=>((s,t,a)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a)(s,"symbol"!=typeof t?t+"":t,a);import{j as t,U as a,h as r,c7 as n,g as l,X as o,c8 as c,m as i,r as d,f as m,aq as x,bx as u,b3 as p,e as h,aQ as g,b7 as b,bA as f,ac as j,c1 as y,af as N,ae as v,ad as w}from"./vendor-react-CZUvQwNQ.js";import{H as C}from"./HtmlContent-DI-wF5u8.js";import{C as k,N as _}from"./Number2Currency-SEeETbGC.js";import{e as T}from"./es-FrZHR3HW.js";import{O as E,p as P,a as S}from"./OpenPayCardModal-pnsvl8HM.js";import{C as F,p as R,B as O}from"./culqiPayment-CH5bQWlB.js";import{P as $}from"./PaymentModal-B18042Ri.js";import{G as z}from"./Footer-DAm0kDL9.js";import{G as I}from"./General-ClVW7qxN.js";import{t as L}from"./OpenPayCardModal-BHkRoVZ6.js";import"./vendor-swiper-Cr_RrIb_.js";const q=({setCart:e,...s})=>{const i=e=>{if(!e)return"";try{return c(new Date(e+"T00:00:00"),"dd 'de' MMMM",{locale:T})}catch(s){return e}},d=s.final_price||s.price,m=s.nights||1,x=d*m,u=s.guests||2;return t.jsx("div",{className:"bg-white border border-gray-200 rounded-2xl overflow-hidden hover:shadow-lg transition-all duration-300 font-paragraph",children:t.jsxs("div",{className:"flex flex-col md:flex-row",children:[t.jsxs("div",{className:"md:w-64 h-48 md:h-72 relative flex-shrink-0",children:[t.jsx("img",{src:`/storage/images/item/${s.image}`,alt:s.name,className:"w-full h-full object-cover",onError:e=>e.target.src="/assets/img/noimage/no_img.jpg"}),s.room_type&&t.jsx("div",{className:"absolute top-3 left-3 bg-white/95 backdrop-blur-sm px-3 py-1 rounded-full text-xs font-semibold text-gray-700 shadow-md",children:(p=s.room_type,{standard:"Estándar",suite:"Suite",deluxe:"Deluxe",presidential:"Presidencial",family:"Familiar",executive:"Ejecutiva",single:"Individual",double:"Doble"}[p]||p)})]}),t.jsxs("div",{className:"flex-1 p-5 md:p-6",children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"text-lg md:text-xl font-bold text-gray-900 mb-2",children:s.name}),t.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600 mb-4",children:[t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(a,{size:16,className:"text-blue-600"}),t.jsxs("span",{children:[u," ",1===u?"huésped":"huéspedes"]})]}),t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(r,{size:16,className:"text-indigo-600"}),t.jsxs("span",{children:[m," ",1===m?"noche":"noches"]})]}),s.amenities&&s.amenities.includes("wifi")&&t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(n,{size:16,className:"text-green-600"}),t.jsx("span",{children:"WiFi"})]})]}),t.jsxs("div",{className:"inline-flex items-center gap-3 bg-gray-50 rounded-xl px-4 py-2.5 text-sm",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(l,{size:16,className:"text-gray-500"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-gray-500",children:"Check-in"}),t.jsx("div",{className:"font-semibold text-gray-900",children:i(s.check_in)})]})]}),t.jsx("div",{className:"w-8 h-px bg-gray-300"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(l,{size:16,className:"text-gray-500"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-gray-500",children:"Check-out"}),t.jsx("div",{className:"font-semibold text-gray-900",children:i(s.check_out)})]})]})]})]}),t.jsx("button",{onClick:()=>{e(e=>e.filter(e=>e.id!==s.id||e.check_in!==s.check_in))},className:"ml-4 p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-all","aria-label":"Eliminar reserva",title:"Eliminar reserva",children:t.jsx(o,{size:20})})]}),t.jsxs("div",{className:"flex items-end justify-between pt-4 border-t border-gray-200",children:[t.jsxs("div",{className:"flex items-baseline gap-2",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Precio por noche:"}),t.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:[k()," ",d.toFixed(2)]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Total a pagar"}),t.jsxs("div",{className:"text-2xl font-bold text-primary",children:[k()," ",x.toFixed(2)]})]})]})]})]})});var p};function M({data:e,cart:s,setCart:a,onContinue:r,subTotal:n,igv:l,totalFinal:o,openModal:c,totalWithoutDiscounts:i}){const d=0===s.length;return t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 font-paragraph",children:[t.jsxs("div",{className:"lg:col-span-2",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-2",children:d?"Tu carrito está vacío":"Revisa tu reserva"}),!d&&t.jsxs("p",{className:"text-gray-600",children:[s.length," ",1===s.length?"habitación seleccionada":"habitaciones seleccionadas"]})]}),t.jsx("div",{className:"space-y-4",children:d?t.jsxs("div",{className:"flex flex-col items-center justify-center py-16 bg-gray-50 rounded-2xl",children:[t.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-full flex items-center justify-center mb-4",children:t.jsx("svg",{className:"w-10 h-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),t.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No hay habitaciones seleccionadas"}),t.jsx("p",{className:"text-gray-500 mb-6",children:"Explora nuestras opciones de alojamiento"}),t.jsx("a",{href:"/habitaciones",className:"px-8 py-3 bg-primary hover:bg-secondary text-white rounded-full hover:shadow-xl transition-all duration-300 font-bold hover:scale-105 active:scale-95",children:"Ver habitaciones disponibles"})]}):s.map((e,s)=>t.jsx(q,{...e,setCart:a},`${e.id}-${e.checkIn}-${s}`))})]}),t.jsx("div",{className:"lg:col-span-1",children:t.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl shadow-sm p-6 sticky top-4",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Resumen de reserva"}),!d&&t.jsxs("div",{className:"space-y-4 mb-6",children:[t.jsxs("div",{className:"grid grid-cols-3 gap-3 pb-6 border-b",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-primary",children:s.length}),t.jsx("div",{className:"text-xs text-gray-600 mt-1",children:1===s.length?"Habitación":"Habitaciones"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-primary",children:s.reduce((e,s)=>e+(s.nights||1),0)}),t.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Noches"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-primary",children:s.reduce((e,s)=>e+(s.guests||2),0)}),t.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Huéspedes"})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Subtotal"}),t.jsxs("span",{className:"font-medium text-gray-900",children:[k()," ",_(n)]})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Impuestos y cargos"}),t.jsxs("span",{className:"font-medium text-gray-900",children:[k()," ",_(l)]})]})]}),t.jsx("div",{className:"pt-4 border-t",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-lg font-bold text-gray-900",children:"Total"}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:"text-2xl font-bold text-primary",children:[k()," ",_(o)]}),t.jsx("div",{className:"text-xs text-gray-500",children:"Incluye impuestos"})]})]})})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("button",{onClick:r,disabled:d,className:`w-full py-4 px-6 rounded-full font-bold text-base transition-all duration-300 shadow-lg ${d?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-primary hover:bg-secondary text-white hover:shadow-2xl hover:scale-[1.02] active:scale-[0.98]"} ${e?.class_button||""}`,children:d?"Carrito vacío":"Continuar con la reserva"}),t.jsx("a",{href:"/habitaciones",className:"block w-full py-3 px-6 text-center rounded-full font-semibold customtext-primary border-2 border-accent hover:bg-accent hover:text-white transition-all duration-300 shadow-md hover:shadow-lg",children:d?"Explorar habitaciones":"Agregar más habitaciones"})]}),t.jsx("div",{className:"mt-6 pt-6 border-t",children:t.jsxs("p",{className:"text-xs text-gray-500 leading-relaxed",children:["Al proceder, aceptas nuestros"," ",t.jsx("button",{onClick:()=>c&&c(1),className:"text-primary font-medium hover:underline",children:"Términos y Condiciones"})," ","y"," ",t.jsx("button",{onClick:()=>c&&c(0),className:"text-primary font-medium hover:underline",children:"Política de Privacidad"}),"."]})})]})})]})}class D{constructor(){s(this,"checkout",async e=>{try{const s=await fetch(`${this.baseUrl}/checkout`,{method:"POST",body:e}),t=await s.json();if(!s.ok||t.status>=400)throw new Error(t.message||"Error al procesar la reserva");return t}catch(s){throw s}}),s(this,"search",async e=>{try{return await i.Fetch("/api/hotels/rooms/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}catch(s){throw s}}),s(this,"track",async e=>{try{return await i.Fetch(`${this.baseUrl}/${e}/track`,{method:"GET"})}catch(s){throw s}}),s(this,"create",async e=>{try{return await i.Fetch(this.baseUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}catch(s){throw s}}),this.baseUrl="/api/hotels/bookings"}}const A=new D;function H({isOpen:e,onClose:s,cart:a=[],subTotal:r,igv:n,totalFinal:c,request:p,coupon:h=null,descuentofinal:g=0,setCode:b,setBooking:f,onContinue:j}){const[y,N]=d.useState(!1),[v,w]=d.useState(null),C=d.useRef(null),T=a.reduce((e,s)=>e+(s.nights||1),0),E=a.reduce((e,s)=>e+(s.guests||2),0);return t.jsx(m,{isOpen:e,onRequestClose:s,className:"absolute left-1/2 -translate-x-1/2 bg-[#f5f5f5] rounded-2xl shadow-lg w-[95%] max-w-lg top-1/2 -translate-y-1/2 overflow-hidden font-paragraph",overlayClassName:"fixed inset-0 bg-black bg-opacity-50 z-50",ariaHideApp:!1,children:t.jsxs("div",{className:"py-6 px-6 md:px-10 flex flex-col gap-4 max-h-[90vh] overflow-y-auto",children:[t.jsx("div",{className:"flex justify-center items-center",children:t.jsx("img",{src:`/assets/resources/logo.png?v=${crypto.randomUUID()}`,alt:z.APP_NAME,className:"h-12 object-contain",onError:e=>{e.target.onerror=null,e.target.src="/assets/img/logo-bk.svg"}})}),t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-800",children:I.get("checkout_dwallet_name")||"Pago con Yape / Plin"}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:I.get("checkout_dwallet_description")||"Sube tu comprobante de pago para confirmar tu reserva"})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 space-y-3",children:[t.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[t.jsx(l,{size:18}),"Resumen de tu reserva"]}),t.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[t.jsx("div",{className:"text-lg font-bold text-primary",children:a.length}),t.jsx("div",{className:"text-xs text-gray-500",children:"Habitación(es)"})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[t.jsx("div",{className:"text-lg font-bold text-primary",children:T}),t.jsx("div",{className:"text-xs text-gray-500",children:"Noche(s)"})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[t.jsx("div",{className:"text-lg font-bold text-primary",children:E}),t.jsx("div",{className:"text-xs text-gray-500",children:"Huésped(es)"})]})]})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 text-center",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Escanea el código QR para pagar"}),I.get("checkout_dwallet_qr")?t.jsx("img",{src:`/assets/resources/${I.get("checkout_dwallet_qr")}`,alt:I.get("checkout_dwallet_name")||"QR Yape",className:"mx-auto max-w-[200px] rounded-lg",onError:e=>{e.currentTarget.src="/assets/img/salafabulosa/logoyape.png"}}):t.jsx("div",{className:"w-[200px] h-[200px] mx-auto bg-gray-100 rounded-lg flex items-center justify-center",children:t.jsx("span",{className:"text-gray-400 text-sm",children:"QR no configurado"})}),I.get("checkout_dwallet_phone")&&t.jsxs("p",{className:"mt-3 text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"O transfiere a: "}),t.jsx("span",{className:"font-bold text-primary",children:I.get("checkout_dwallet_phone")})]})]}),t.jsxs("div",{className:"bg-primary text-white rounded-xl p-4 text-center",children:[t.jsx("p",{className:"text-sm opacity-90",children:"Total a pagar"}),t.jsxs("p",{className:"text-2xl font-bold",children:[k()," ",_(c)]})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Sube tu comprobante de pago *"}),t.jsx("input",{type:"file",ref:C,onChange:e=>{const s=e.target.files[0];s&&w(s)},accept:"image/*",className:"hidden"}),v?t.jsxs("div",{className:"relative",children:[t.jsx("img",{src:URL.createObjectURL(v),alt:"Comprobante",className:"w-full max-h-48 object-contain rounded-lg"}),t.jsx("button",{type:"button",onClick:()=>{w(null),C.current&&(C.current.value="")},className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",children:t.jsx(o,{size:16})})]}):t.jsxs("button",{type:"button",onClick:()=>C.current?.click(),className:"w-full border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-primary transition-colors",children:[t.jsx(x,{className:"mx-auto h-8 w-8 text-gray-400"}),t.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Haz clic para subir tu comprobante"}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"PNG, JPG hasta 5MB"})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("button",{onClick:async()=>{if(!y)if(v){N(!0);try{const e=new FormData;Object.keys(p).forEach(s=>{null!==p[s]&&void 0!==p[s]&&e.append(s,p[s])}),e.append("payment_proof",v);const a=await A.checkout(e);a&&a.data&&a.data.code?(i.Local.set(`${z.APP_CORRELATIVE}_cart`,(i.Local.get(`${z.APP_CORRELATIVE}_cart`)||[]).filter(e=>"booking"!==e.type)),f(a.data.sale||a.data),b(a.data.code),s(),j()):L.error("Error al procesar la reserva",{description:a?.message||"No se recibió el código de confirmación",icon:t.jsx(u,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"top-right"})}catch(e){L.error("Error al procesar el pago",{description:e.message||"Ocurrió un error al procesar tu pago",icon:t.jsx(u,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"top-right"})}finally{N(!1)}}else L.error("Error al subir comprobante",{description:"Por favor, sube tu comprobante de pago",icon:t.jsx(u,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"top-right"})},disabled:y||!v,className:"w-full py-3 px-6 rounded-full font-semibold text-white transition-all "+(y||!v?"bg-gray-400 cursor-not-allowed":"bg-primary hover:opacity-90"),children:y?"Procesando...":"Confirmar Reserva"}),t.jsx("button",{onClick:s,disabled:y,className:"w-full py-3 px-6 rounded-full font-semibold border border-gray-300 text-gray-700 hover:bg-gray-50 transition-all",children:"Cancelar"})]})]})})}const U=new D;function B({isOpen:e,onClose:s,cart:a=[],subTotal:r,igv:n,totalFinal:c,request:b,contacts:f=[],coupon:j=null,descuentofinal:y=0,setCode:N,setBooking:v,onContinue:w}){const[C,T]=d.useState(!1),[E,P]=d.useState(null),[S,F]=d.useState(null),R=d.useRef(null),O=(e,s)=>{navigator.clipboard.writeText(e),F(s),setTimeout(()=>F(null),2e3)},$=e=>f.find(s=>s.correlative===e)?.description||"",I=a.reduce((e,s)=>e+(s.nights||1),0),q=a.reduce((e,s)=>e+(s.guests||2),0),M=$("checkout_bank_name")||"Banco",D=$("checkout_account_number"),A=$("checkout_cci_number"),H=$("checkout_account_holder");return t.jsx(m,{isOpen:e,onRequestClose:s,className:"absolute left-1/2 -translate-x-1/2 bg-[#f5f5f5] rounded-2xl shadow-lg w-[95%] max-w-lg top-1/2 -translate-y-1/2 overflow-hidden font-paragraph",overlayClassName:"fixed inset-0 bg-black bg-opacity-50 z-50",ariaHideApp:!1,children:t.jsxs("div",{className:"py-6 px-6 md:px-10 flex flex-col gap-4 max-h-[90vh] overflow-y-auto",children:[t.jsx("div",{className:"flex justify-center items-center",children:t.jsx("img",{src:`/assets/resources/logo.png?v=${crypto.randomUUID()}`,alt:z.APP_NAME,className:"h-12 object-contain",onError:e=>{e.target.onerror=null,e.target.src="/assets/img/logo-bk.svg"}})}),t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Pago por Transferencia"}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Realiza la transferencia y sube tu comprobante"})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 space-y-3",children:[t.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[t.jsx(l,{size:18}),"Resumen de tu reserva"]}),t.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[t.jsx("div",{className:"text-lg font-bold text-primary",children:a.length}),t.jsx("div",{className:"text-xs text-gray-500",children:"Habitación(es)"})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[t.jsx("div",{className:"text-lg font-bold text-primary",children:I}),t.jsx("div",{className:"text-xs text-gray-500",children:"Noche(s)"})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[t.jsx("div",{className:"text-lg font-bold text-primary",children:q}),t.jsx("div",{className:"text-xs text-gray-500",children:"Huésped(es)"})]})]})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 space-y-3",children:[t.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[t.jsx(p,{size:18}),"Datos para transferencia"]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded-lg",children:t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Banco"}),t.jsx("p",{className:"font-medium text-gray-800",children:M})]})}),D&&t.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded-lg",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Número de cuenta"}),t.jsx("p",{className:"font-medium text-gray-800",children:D})]}),t.jsx("button",{onClick:()=>O(D,"account"),className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:"account"===S?t.jsx(h,{size:18,className:"text-green-500"}):t.jsx(g,{size:18,className:"text-gray-400"})})]}),A&&t.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded-lg",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"CCI (Interbancario)"}),t.jsx("p",{className:"font-medium text-gray-800",children:A})]}),t.jsx("button",{onClick:()=>O(A,"cci"),className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:"cci"===S?t.jsx(h,{size:18,className:"text-green-500"}):t.jsx(g,{size:18,className:"text-gray-400"})})]}),H&&t.jsx("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded-lg",children:t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Titular"}),t.jsx("p",{className:"font-medium text-gray-800",children:H})]})})]})]}),t.jsxs("div",{className:"bg-primary text-white rounded-xl p-4 text-center",children:[t.jsx("p",{className:"text-sm opacity-90",children:"Total a transferir"}),t.jsxs("p",{className:"text-2xl font-bold",children:[k()," ",_(c)]})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Sube tu comprobante de transferencia *"}),t.jsx("input",{type:"file",ref:R,onChange:e=>{const s=e.target.files[0];s&&P(s)},accept:"image/*",className:"hidden"}),E?t.jsxs("div",{className:"relative",children:[t.jsx("img",{src:URL.createObjectURL(E),alt:"Comprobante",className:"w-full max-h-48 object-contain rounded-lg"}),t.jsx("button",{type:"button",onClick:()=>{P(null),R.current&&(R.current.value="")},className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",children:t.jsx(o,{size:16})})]}):t.jsxs("button",{type:"button",onClick:()=>R.current?.click(),className:"w-full border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-primary transition-colors",children:[t.jsx(x,{className:"mx-auto h-8 w-8 text-gray-400"}),t.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Haz clic para subir tu comprobante"}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"PNG, JPG hasta 5MB"})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("button",{onClick:async()=>{if(!C)if(E){T(!0);try{const e=new FormData;Object.keys(b).forEach(s=>{null!==b[s]&&void 0!==b[s]&&e.append(s,b[s])}),e.append("payment_proof",E);const a=await U.checkout(e);a&&a.data&&a.data.code?(i.Local.set(`${z.APP_CORRELATIVE}_cart`,(i.Local.get(`${z.APP_CORRELATIVE}_cart`)||[]).filter(e=>"booking"!==e.type)),v(a.data.sale||a.data),N(a.data.code),s(),w()):L.error("Error al procesar la reserva",{description:a?.message||"No se recibió el código de confirmación",icon:t.jsx(u,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"top-right"})}catch(e){L.error("Error al procesar el pago",{description:e.message||"Ocurrió un error al procesar tu pago",icon:t.jsx(u,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"top-right"})}finally{T(!1)}}else L.error("Error al subir comprobante",{description:"Por favor, sube tu comprobante de pago",icon:t.jsx(u,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"top-right"})},disabled:C||!E,className:"w-full py-3 px-6 rounded-full font-semibold text-white transition-all "+(C||!E?"bg-gray-400 cursor-not-allowed":"bg-primary hover:opacity-90"),children:C?"Procesando...":"Confirmar Reserva"}),t.jsx("button",{onClick:s,disabled:C,className:"w-full py-3 px-6 rounded-full font-semibold border border-gray-300 text-gray-700 hover:bg-gray-50 transition-all",children:"Cancelar"})]})]})})}function V({cart:e,setBooking:s,setCode:r,setCart:n,onContinue:o,noContinue:i,subTotal:x,igv:p,totalFinal:h,user:g,prefixes:N=[],ubigeos:v=[],contacts:w=[],totalPrice:C,data:O,openModal:q,setCouponDiscount:M,setCouponCode:D,totalWithoutDiscounts:A}){const U=(e,s)=>s?s.startsWith(e)?s:`${e}${s}`:"",V=(e,s)=>e?e.startsWith(s)?e.substring(s.length):e:"",W=d.useRef(null),[G,J]=d.useState(null),[Q,X]=d.useState(()=>{const e=g?.phone_prefix||"51",s=V(g?.phone||"",e);return{name:g?.name||"",lastname:g?.lastname||"",email:g?.email||"",phone_prefix:e,phone:s,documentType:g?.document_type?.toLowerCase()||"dni",document:g?.document_number||"",comment:"",specialRequests:"",invoiceType:g?.invoiceType||"boleta",businessName:g?.businessName||""}});d.useEffect(()=>{if(g){const e=g.phone_prefix||"51",s=V(g.phone||"",e);X(t=>({...t,name:g.name||"",lastname:g.lastname||"",email:g.email||"",phone_prefix:e,phone:s,documentType:g.document_type?.toLowerCase()||"dni",document:g.document_number||"",invoiceType:g.invoiceType||"boleta",businessName:g.businessName||""}))}},[g]);const Y=(()=>{const e=w?.find(e=>"checkout_mercadopago"===e.correlative),s=w?.find(e=>"checkout_openpay"===e.correlative),t=w?.find(e=>"checkout_culqi"===e.correlative);return"true"===e?.description||"true"===s?.description||"true"===t?.description||"true"===I.get("checkout_dwallet")||"true"===I.get("checkout_transfer")})(),K=e=>{const{name:s,value:t}=e.target;X(e=>({...e,[s]:t})),"invoiceType"===s&&X(e=>({...e,documentType:"factura"===t?"ruc":"dni",document:"",businessName:"factura"===t?e.businessName:""}))},[Z,ee]=d.useState(!1),[se,te]=d.useState(!1),[ae,re]=d.useState({}),[ne,le]=d.useState(""),[oe,ce]=d.useState(null),[ie,de]=d.useState(0),[me,xe]=d.useState(!1),[ue,pe]=d.useState(""),[he,ge]=d.useState(!1),[be,fe]=d.useState(0),[je,ye]=d.useState(null),Ne=e=>Math.round(100*(e+Number.EPSILON))/100,ve=(()=>{if(!oe)return 0;const e=Ne(x+p);if("percentage"===oe.discount_type){const s=parseFloat(oe.discount_value)||0;return Ne(e*(s/100))}return Ne(parseFloat(oe.discount_value)||0)})(),we=Ne(x+p),Ce=(()=>{if(!je||be<=0)return 0;const e=Math.max(0,Ne(we-ve));return Ne(e*(be/100))})(),ke=(()=>{const e=Ne(we),s=Math.max(0,Ne(e-ve)),t=Ne(s+Ce);return Math.max(0,t)})(),_e=e=>{if(!e)return"";try{return c(new Date(e+"T00:00:00"),"dd MMM yyyy",{locale:T})}catch(s){return e}},[Te,Ee]=d.useState(!1),[Pe,Se]=d.useState(!1),[Fe,Re]=d.useState(null),[Oe,$e]=d.useState(!1),[ze,Ie]=d.useState(!1),[Le,qe]=d.useState(null),[Me,De]=d.useState(null),Ae=e.reduce((e,s)=>e+(s.nights||1),0),He=e.reduce((e,s)=>e+(s.guests||2),0);return t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 font-paragraph",children:[t.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl md:text-3xl font-bold customtext-neutral-dark mb-2",children:"Datos de la reserva"}),t.jsx("p",{className:"customtext-neutral-light",children:"Completa tus datos para confirmar la reserva"})]}),e.length>0&&t.jsxs("div",{className:"bg-gradient-to-br from-primary/5 to-secondary/5 border border-primary/20 rounded-xl p-4",children:[t.jsxs("h3",{className:"text-sm font-semibold customtext-neutral-dark mb-3 flex items-center gap-2",children:[t.jsx(l,{className:"w-4 h-4 customtext-primary"}),"Resumen de tu reserva"]}),t.jsx("div",{className:"space-y-2",children:e.map((e,s)=>t.jsxs("div",{className:"flex items-center gap-3 text-sm bg-white/50 rounded-lg p-2",children:[t.jsx("img",{src:`/storage/images/item/${e.image}`,alt:e.name,className:"w-12 h-12 object-cover rounded-lg flex-shrink-0",onError:e=>e.target.src="/assets/img/noimage/no_img.jpg"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("div",{className:"font-semibold customtext-neutral-dark truncate",children:e.name}),t.jsxs("div",{className:"text-xs customtext-neutral-light",children:[_e(e.check_in)," - ",_e(e.check_out)," · ",e.nights," ",1===e.nights?"noche":"noches"," · ",e.guests," ",1===e.guests?"huésped":"huéspedes"]})]})]},`${e.id}-${e.check_in}-${s}`))})]}),t.jsxs("div",{className:"bg-white border border-sections-color rounded-xl p-6 shadow-sm",children:[t.jsxs("h3",{className:"text-lg font-semibold customtext-neutral-dark mb-4 flex items-center gap-2",children:[t.jsx(a,{className:"w-5 h-5 customtext-primary"}),"Datos del huésped principal"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium customtext-neutral-dark mb-1",children:["Nombre ",t.jsx("span",{className:"customtext-danger",children:"*"})]}),t.jsx("input",{type:"text",name:"name",value:Q.name,onChange:K,className:`w-full border ${ae.name?"border-danger":"border-sections-color"} rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-accent focus:border-transparent outline-none transition-all`,placeholder:"Tu nombre"}),ae.name&&t.jsx("p",{className:"customtext-danger text-xs mt-1",children:ae.name})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium customtext-neutral-dark mb-1",children:["Apellido ",t.jsx("span",{className:"customtext-danger",children:"*"})]}),t.jsx("input",{type:"text",name:"lastname",value:Q.lastname,onChange:K,className:`w-full border ${ae.lastname?"border-danger":"border-sections-color"} rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-accent focus:border-transparent outline-none transition-all`,placeholder:"Tu apellido"}),ae.lastname&&t.jsx("p",{className:"customtext-danger text-xs mt-1",children:ae.lastname})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium customtext-neutral-dark mb-1",children:["Email ",t.jsx("span",{className:"customtext-danger",children:"*"})]}),t.jsx("input",{type:"email",name:"email",value:Q.email,onChange:K,className:`w-full border ${ae.email?"border-danger":"border-sections-color"} rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-accent focus:border-transparent outline-none transition-all`,placeholder:"tu@email.com"}),ae.email&&t.jsx("p",{className:"customtext-danger text-xs mt-1",children:ae.email})]}),t.jsxs("div",{className:"w-full",children:[t.jsxs("label",{htmlFor:"phone",className:"block text-sm font-medium customtext-neutral-dark mb-1",children:["Celular ",t.jsx("span",{className:"customtext-danger",children:"*"})]}),t.jsxs("div",{className:"flex gap-2 w-full",children:[t.jsx("div",{className:"max-w-[120px]",children:t.jsx(b,{name:"phone_prefix",value:N.find(e=>e.realCode===Q.phone_prefix)?{value:N.find(e=>e.realCode===Q.phone_prefix).realCode,label:`${N.find(e=>e.realCode===Q.phone_prefix).beautyCode}`,flag:N.find(e=>e.realCode===Q.phone_prefix).flag,code:N.find(e=>e.realCode===Q.phone_prefix).beautyCode,country:N.find(e=>e.realCode===Q.phone_prefix).country}:null,onChange:e=>X(s=>({...s,phone_prefix:e?.value||""})),options:N.sort((e,s)=>e.country.localeCompare(s.country)).map(e=>({value:e.realCode,label:e.beautyCode,flag:e.flag,code:e.beautyCode,country:e.country})),formatOptionLabel:({flag:e,code:s,country:a})=>{const r=N.find(e=>e.country===a),n=r?.isoCode?.ISO1?.toLowerCase()||a.toLowerCase().substring(0,2),l=[`https://flagsapi.com/${n.toUpperCase()}/flat/24.png`,`https://flagcdn.com/${n}.svg`,`https://purecatamphetamine.github.io/country-flag-icons/3x2/${n.toUpperCase()}.svg`,`https://cdn.jsdelivr.net/gh/hampusborgos/country-flags@main/svg/${n}.svg`,`https://raw.githubusercontent.com/lipis/flag-icons/main/flags/4x3/${n}.svg`];let o=0;return t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("img",{src:l[0],alt:`Bandera de ${a}`,className:"w-6 h-4 object-cover rounded-sm flex-shrink-0 border border-gray-200",onError:e=>{if(o++,o<l.length)e.target.src=l[o];else{e.target.style.display="none";const s=e.target.parentNode.querySelector(".flag-fallback");s&&(s.style.display="flex")}},style:{minWidth:"24px",minHeight:"16px"}}),t.jsx("div",{className:"flag-fallback w-6 h-4 bg-gray-200 rounded-sm flex items-center justify-center flex-shrink-0 border border-gray-300",style:{display:"none",minWidth:"24px",minHeight:"16px"},children:t.jsx("span",{className:"text-xs text-gray-500",children:n.toUpperCase()})}),t.jsx("span",{className:"font-medium text-sm",children:s})]})},placeholder:"País",isClearable:!1,isSearchable:!0,styles:{control:e=>({...e,minHeight:"48px",border:"1px solid #d1d5db",borderRadius:"0.75rem",fontSize:"14px","&:hover":{borderColor:"#9ca3af"},"&:focus-within":{borderColor:"#3b82f6",boxShadow:"0 0 0 2px rgba(59, 130, 246, 0.1)"}}),option:(e,s)=>({...e,backgroundColor:s.isSelected?"#3b82f6":s.isFocused?"#f3f4f6":"white",color:s.isSelected?"white":"#374151",padding:"8px 12px"}),singleValue:e=>({...e,display:"flex",alignItems:"center",gap:"6px"}),menu:e=>({...e,zIndex:9999})},filterOption:(e,s)=>e.data.country.toLowerCase().includes(s.toLowerCase())||e.data.code.toLowerCase().includes(s.toLowerCase())})}),t.jsx("div",{className:"flex-1",children:t.jsx("input",{type:"tel",id:"phone",name:"phone",value:Q.phone,onChange:K,className:`w-full border ${ae.phone?"border-danger":"border-sections-color"} rounded-xl px-4 py-3 focus:ring-2 focus:ring-accent focus:border-transparent outline-none transition-all`,placeholder:"000 000 000"})})]}),ae.phone&&t.jsx("p",{className:"customtext-danger text-xs mt-1",children:ae.phone})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium customtext-neutral-dark mb-1",children:["Tipo de documento ",t.jsx("span",{className:"customtext-danger",children:"*"})]}),t.jsx("select",{name:"documentType",value:Q.documentType,onChange:K,className:"w-full border border-sections-color rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-accent focus:border-transparent outline-none transition-all",children:[{value:"dni",label:"DNI"},{value:"ruc",label:"RUC"},{value:"ce",label:"CE"},{value:"pasaporte",label:"Pasaporte"}].map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium customtext-neutral-dark mb-1",children:["Número de documento ",t.jsx("span",{className:"customtext-danger",children:"*"})]}),t.jsx("input",{type:"text",name:"document",value:Q.document,onChange:K,className:`w-full border ${ae.document?"border-danger":"border-sections-color"} rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-accent focus:border-transparent outline-none transition-all`,placeholder:"dni"===Q.documentType?"12345678":"Número de documento",maxLength:"dni"===Q.documentType?8:"ruc"===Q.documentType?11:20}),ae.document&&t.jsx("p",{className:"customtext-danger text-xs mt-1",children:ae.document})]})]}),t.jsxs("div",{className:"mt-4",children:[t.jsx("label",{className:"block text-sm font-medium customtext-neutral-dark mb-1",children:"Solicitudes especiales (opcional)"}),t.jsx("textarea",{name:"specialRequests",value:Q.specialRequests,onChange:K,rows:3,className:"w-full border border-sections-color rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-accent focus:border-transparent outline-none transition-all resize-none",placeholder:"¿Tienes alguna solicitud especial? (cama extra, llegada tarde, etc.)"})]})]}),t.jsxs("div",{className:"bg-white border border-sections-color rounded-xl p-6 shadow-sm",children:[t.jsxs("h3",{className:"text-lg font-semibold customtext-neutral-dark mb-4 flex items-center gap-2",children:[t.jsx(f,{className:"w-5 h-5 customtext-primary"}),"Comprobante de pago"]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[t.jsxs("label",{className:"flex items-center gap-3 p-4 border-2 rounded-xl cursor-pointer transition-all "+("boleta"===Q.invoiceType?"border-accent bg-accent/5":"border-sections-color hover:border-accent"),children:[t.jsx("input",{type:"radio",name:"invoiceType",value:"boleta",checked:"boleta"===Q.invoiceType,onChange:K,className:"text-accent focus:ring-accent"}),t.jsx("span",{className:"font-medium customtext-neutral-dark",children:"Boleta"})]}),t.jsxs("label",{className:"flex items-center gap-3 p-4 border-2 rounded-xl cursor-pointer transition-all "+("factura"===Q.invoiceType?"border-accent bg-accent/5":"border-sections-color hover:border-accent"),children:[t.jsx("input",{type:"radio",name:"invoiceType",value:"factura",checked:"factura"===Q.invoiceType,onChange:K,className:"text-accent focus:ring-accent"}),t.jsx("span",{className:"font-medium",children:"Factura"})]})]}),"factura"===Q.invoiceType&&t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium customtext-neutral-dark mb-1",children:["Razón Social ",t.jsx("span",{className:"customtext-danger",children:"*"})]}),t.jsx("input",{type:"text",name:"businessName",value:Q.businessName,onChange:K,className:`w-full border ${ae.businessName?"border-danger":"border-sections-color"} rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-accent focus:border-transparent outline-none transition-all`,placeholder:"Nombre de la empresa"}),ae.businessName&&t.jsx("p",{className:"customtext-danger text-xs mt-1",children:ae.businessName})]})]}),t.jsx("div",{className:"lg:hidden",children:t.jsx("button",{onClick:i,className:"w-full py-3 px-6 text-center rounded-full font-semibold customtext-neutral-dark border-2 border-accent hover:bg-accent hover:text-white transition-all duration-300",children:"Volver al carrito"})})]}),t.jsx("div",{className:"lg:col-span-1",children:t.jsxs("div",{className:"bg-white border border-sections-color rounded-2xl shadow-md p-6 sticky top-4",children:[t.jsx("h3",{className:"text-xl font-bold customtext-neutral-dark mb-6",children:"Resumen de pago"}),t.jsxs("div",{className:"grid grid-cols-3 gap-3 pb-6 border-b border-sections-color mb-6",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold customtext-primary",children:e.length}),t.jsx("div",{className:"text-xs customtext-neutral-light mt-1",children:1===e.length?"Habitación":"Habitaciones"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold customtext-primary",children:Ae}),t.jsx("div",{className:"text-xs customtext-neutral-light mt-1",children:"Noches"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold customtext-primary",children:He}),t.jsx("div",{className:"text-xs customtext-neutral-light mt-1",children:"Huéspedes"})]})]}),t.jsxs("div",{className:"space-y-3 mb-6",children:[t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"customtext-neutral-light",children:"Subtotal"}),t.jsxs("span",{className:"font-medium customtext-neutral-dark",children:[k()," ",_(x)]})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"customtext-neutral-light",children:"Impuestos y cargos"}),t.jsxs("span",{className:"font-medium customtext-neutral-dark",children:[k()," ",_(p)]})]}),oe&&ve>0&&t.jsxs("div",{className:"flex justify-between text-sm customtext-success",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(j,{size:14}),"Cupón (",oe.code,")"]}),t.jsxs("span",{className:"font-medium",children:["-",k()," ",_(ve)]})]}),Ce>0&&t.jsxs("div",{className:"flex justify-between text-sm customtext-warning",children:[t.jsxs("span",{children:["Comisión (",be,"%)"]}),t.jsxs("span",{className:"font-medium",children:["+",k()," ",_(Ce)]})]})]}),t.jsxs("div",{className:"mb-6 pb-6 border-b border-sections-color",children:[t.jsx("label",{className:"block text-sm font-medium customtext-neutral-dark mb-2",children:"¿Tienes un cupón?"}),oe?t.jsxs("div",{className:"flex items-center justify-between bg-success/10 border border-success rounded-lg px-4 py-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(j,{size:18,className:"customtext-success"}),t.jsx("span",{className:"font-medium customtext-success",children:oe.code})]}),t.jsx("button",{onClick:()=>{ce(null),J(null),le(""),pe(""),M&&M(0),D&&D(null)},className:"customtext-danger hover:text-danger text-sm font-medium",children:"Quitar"})]}):t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",ref:W,value:ne,onChange:e=>le(e.target.value.toUpperCase()),placeholder:"Código de cupón",className:"flex-1 border border-gray-300 rounded-full px-4 py-2.5 text-sm focus:ring-2 focus:ring-accent focus:border-transparent outline-none transition-all"}),t.jsx("button",{onClick:async()=>{if(ne.trim()){xe(!0),pe("");try{const e=await F.validate({code:ne,total:we});if(e.valid){if(ce(e.coupon),J(e.coupon),M)if("percentage"===e.coupon.discount_type){const s=we*(parseFloat(e.coupon.discount_value)/100);M(Ne(s))}else M(Ne(parseFloat(e.coupon.discount_value)));D&&D(ne),L.success("Cupón aplicado",{description:"Descuento de "+("percentage"===e.coupon.discount_type?e.coupon.discount_value+"%":k()+" "+e.coupon.discount_value),icon:t.jsx(j,{className:"h-5 w-5 text-green-500"}),duration:3e3,position:"top-right"})}else pe(e.message||"Cupón no válido")}catch(e){pe("Error al validar el cupón")}finally{xe(!1)}}else pe("Ingresa un código de cupón")},disabled:me,className:"px-6 py-2.5 bg-accent hover:bg-secondary text-white rounded-full text-sm font-bold hover:shadow-lg transition-all duration-300 disabled:opacity-50 hover:scale-105 active:scale-95",children:me?"...":"Aplicar"})]}),ue&&t.jsx("p",{className:"customtext-danger text-xs mt-2",children:ue})]}),t.jsx("div",{className:"mb-6",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-lg font-bold customtext-neutral-dark",children:"Total a pagar"}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:"text-2xl font-bold customtext-primary",children:[k()," ",_(ke)]}),t.jsx("div",{className:"text-xs customtext-neutral-light",children:"Incluye impuestos"})]})]})}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("button",{onClick:e=>{e.preventDefault(),(()=>{const e={};return Q.name||(e.name="Nombre es requerido"),Q.lastname||(e.lastname="Apellido es requerido"),Q.email||(e.email="Email es requerido"),Q.phone||(e.phone="Teléfono es requerido"),Q.document||(e.document="Documento es requerido"),Q.email&&!/\S+@\S+\.\S+/.test(Q.email)&&(e.email="Email inválido"),Q.document&&("dni"===Q.documentType&&8!==Q.document.length?e.document="DNI debe tener 8 dígitos":"ruc"===Q.documentType&&11!==Q.document.length&&(e.document="RUC debe tener 11 dígitos")),"factura"!==Q.invoiceType||Q.businessName||(e.businessName="Razón social es requerida para factura"),re(e),0===Object.keys(e).length})()?Ee(!0):(e=>{const s=Object.keys(e)[0];setTimeout(()=>{let e=document.querySelector(`[name="${s}"]`);e&&(e.classList.add("highlight-error"),setTimeout(()=>e.classList.remove("highlight-error"),2e3),e.scrollIntoView({behavior:"smooth",block:"center"}),["INPUT","SELECT","TEXTAREA"].includes(e.tagName)&&e.focus())},100)})(ae)},disabled:se||!Y,className:`w-full py-4 px-6 rounded-full font-bold text-base transition-all duration-300 bg-primary hover:bg-secondary text-white hover:shadow-2xl hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed shadow-lg ${O?.class_button||""}`,children:se?t.jsxs("span",{className:"flex items-center justify-center gap-2",children:[t.jsx("span",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Procesando..."]}):"Confirmar y pagar"}),t.jsx("button",{onClick:i,className:"hidden lg:block w-full py-3 px-6 text-center rounded-full font-semibold customtext-primary border-2 border-accent hover:bg-accent hover:text-white transition-all duration-300 shadow-md hover:shadow-lg",children:"Volver al carrito"})]}),t.jsx("div",{className:"mt-6 pt-6 border-t border-sections-color",children:t.jsxs("p",{className:"text-xs customtext-neutral-light leading-relaxed",children:["Al proceder, aceptas nuestros"," ",t.jsx("button",{onClick:()=>q&&q(1),className:"customtext-accent font-medium hover:underline",children:"Términos y Condiciones"})," ","y"," ",t.jsx("button",{onClick:()=>q&&q(0),className:"customtext-accent font-medium hover:underline",children:"Política de Privacidad"})]})})]})}),t.jsx(m,{isOpen:he,onRequestClose:()=>ge(!1),contentLabel:"Iniciar sesión",className:"fixed top-0 left-0 right-0 bottom-0 flex items-center justify-center p-4 z-50",overlayClassName:"fixed inset-0 bg-black bg-opacity-50 z-[999]",ariaHideApp:!1,children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-6",children:[t.jsxs("div",{className:"text-center mb-6",children:[t.jsx(y,{className:"w-16 h-16 customtext-neutral-light mx-auto mb-4"}),t.jsx("h2",{className:"text-2xl font-bold customtext-neutral-dark mb-2",children:"Inicia sesión"}),t.jsx("p",{className:"customtext-neutral-light",children:"Para continuar con tu reserva, necesitas iniciar sesión o crear una cuenta."})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("a",{href:"/iniciar-sesion",className:"block w-full py-4 px-6 text-center rounded-full font-bold bg-primary hover:bg-secondary text-white hover:shadow-xl transition-all duration-300 shadow-lg hover:scale-105 active:scale-95",children:"Iniciar sesión"}),t.jsx("a",{href:"/register",className:"block w-full py-3 px-6 text-center rounded-full font-semibold customtext-primary border-2 border-accent hover:bg-accent hover:text-white transition-all duration-300 shadow-md hover:shadow-lg",children:"Crear cuenta"}),t.jsx("button",{onClick:()=>ge(!1),className:"block w-full py-2 text-center customtext-neutral-light hover:customtext-neutral-dark text-sm font-medium transition-colors",children:"Cancelar"})]})]})}),t.jsx($,{isOpen:Te,contacts:w,cart:e,totalFinal:oe?ke:h,onClose:()=>Ee(!1),onPaymentComplete:async a=>{try{let l=0;switch(a){case"tarjeta":l=parseFloat(z.get("checkout_mercadopago_commission")||0);break;case"culqi":l=parseFloat(z.get("checkout_culqi_commission")||0);break;case"openpay":l=parseFloat(z.get("checkout_openpay_commission")||0);break;case"yape":l=parseFloat(z.get("checkout_dwallet_commission")||0);break;case"transferencia":l=parseFloat(z.get("checkout_transfer_commission")||0);break;default:l=0}if(fe(l),ye(a),Ee(!1),qe(a),"openpay"===a)return void Se(!0);const c=Ne(l/100*(we-ve)),i=Ne(we-ve+c),d=e.map(e=>({id:e.id,name:e.name,room_type:e.room_type,check_in:e.check_in||e.checkIn,check_out:e.check_out||e.checkOut,nights:e.nights||1,guests:e.guests||2,adults:e.adults||e.guests||2,children:e.children||0,price:e.price,final_price:e.final_price||e.price,image:e.image})),m={user_id:g?.id||"",name:Q?.name||"",lastname:Q?.lastname||"",fullname:`${Q?.name} ${Q?.lastname}`,phone_prefix:Q?.phone_prefix||"51",email:Q?.email||"",phone:U(Q.phone_prefix||"51",Q.phone),country:"Perú",comment:Q?.comment||"",special_requests:Q?.specialRequests||"",amount:i||0,delivery_type:"domicilio",details:JSON.stringify(d),cart:d,booking_type:"rooms",invoiceType:Q.invoiceType||"",documentType:Q.documentType||"",document:Q.document||"",businessName:Q.businessName||"",payment_method:a||null,coupon_id:oe?oe.id:null,coupon_discount:ve||0,payment_commission:c||0,payment_commission_percentage:l||0,total_amount:i||0};if(De(m),"tarjeta"===a){if(!window.MercadoPago)return;try{const e=await P(m);e.status?(s(e.sale),r(e.code),o()):L.error("Error en el Pago",{description:"El pago ha sido rechazado",icon:t.jsx(u,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"})}catch(n){L.error("Error en el Pago",{description:"No se llegó a procesar el pago",icon:t.jsx(u,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"})}}else if("culqi"===a){te(!0);try{if(!z.CULQI_ENABLED)return L.error("Método de pago no disponible",{description:"El procesamiento de pagos con Culqi está temporalmente deshabilitado",icon:t.jsx(u,{className:"h-5 w-5 text-red-500"}),duration:4e3,position:"top-center"}),void te(!1);const e=await R(m);e.status?(s(e.sale),r(e.code),o()):L.error("Error en el Pago",{description:e.message||"El pago ha sido rechazado",icon:t.jsx(u,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"})}catch(n){n?.cancelled||L.error("Error en el Pago",{description:n?.message||"No se llegó a procesar el pago",icon:t.jsx(u,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"})}finally{te(!1)}}else"yape"===a?(De(m),$e(!0)):"transferencia"===a&&(De(m),Ie(!0))}catch(n){L.error("Error",{description:"Ocurrió un error inesperado",icon:t.jsx(u,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"})}}}),t.jsx(E,{isOpen:Pe,onClose:()=>Se(!1),onTokenCreated:async a=>{Se(!1);try{const n=Ne(be/100*(we-ve)),l=Ne(we-ve+n),c=e.map(e=>({id:e.id,name:e.name,room_type:e.room_type,checkIn:e.checkIn,checkOut:e.checkOut,nights:e.nights||1,guests:e.guests||2,adults:e.adults||e.guests||2,children:e.children||0,price:e.price,final_price:e.final_price||e.price,image:e.image})),i={...a,user_id:g?.id||"",name:Q?.name||"",lastname:Q?.lastname||"",fullname:`${Q?.name} ${Q?.lastname}`,phone_prefix:Q?.phone_prefix||"51",email:Q?.email||"",phone:U(Q.phone_prefix||"51",Q.phone),country:"Perú",comment:Q?.comment||"",special_requests:Q?.specialRequests||"",amount:l||0,cart:c,booking_type:"rooms",invoiceType:Q.invoiceType||"",documentType:Q.documentType||"",document:Q.document||"",businessName:Q.businessName||"",payment_method:"openpay",coupon_id:oe?oe.id:null,coupon_discount:ve||0,payment_commission:n||0,payment_commission_percentage:be||0,total_amount:l||0},d=await S(i);d.status?(s(d.sale),r(d.code),o()):L.error("Error en el Pago",{description:d.message||"El pago ha sido rechazado",icon:t.jsx(u,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"})}catch(n){L.error("Error en el Pago",{description:"No se llegó a procesar el pago",icon:t.jsx(u,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"})}}}),t.jsx(H,{isOpen:Oe,cart:e,subTotal:x,igv:p,totalFinal:oe?ke:h,request:Me,onClose:()=>$e(!1),contacts:w,coupon:oe,descuentofinal:ve,setCode:r,setBooking:s,onContinue:o}),t.jsx(B,{isOpen:ze,cart:e,subTotal:x,igv:p,totalFinal:oe?ke:h,contacts:w,request:Me,onClose:()=>Ie(!1),coupon:oe,descuentofinal:ve,setCode:r,setBooking:s,onContinue:o})]})}function W({setCart:e,cart:s,code:n,data:o,couponDiscount:m=0,couponCode:x=null}){const[u,p]=d.useState(null),[h,g]=d.useState(!0),[b,f]=d.useState(null);d.useEffect(()=>{const e=async()=>{try{const e=await(({code:e})=>new Promise(async(s,t)=>{try{const{status:a,result:r}=await i.Fetch("./api/hotels/bookings/order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:e})});if(!a||!r.order)return i.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:r?.message||"Error: no se pudo cargar la reserva",type:"danger"}),void t(r?.message||"Error: no se pudo cargar la reserva");s(r)}catch(b){i.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:b.message||"Error al cargar los datos de la reserva",type:"danger"}),t(b.message||"Error al cargar los datos de la reserva")}}))({code:n});p(e.order)}catch(e){f(e.message||e)}finally{g(!1)}};n&&(e(),i.Local.delete(`${z.APP_CORRELATIVE}_cart`))},[n]);const y=e=>{if(!e)return"";try{return c(new Date(e+"T00:00:00"),"dd 'de' MMMM, yyyy",{locale:T})}catch(s){return e}};if(h)return t.jsx("div",{className:"mx-auto",children:t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 font-paragraph text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),t.jsx("p",{children:"Cargando detalles de tu reserva..."})]})});if(b)return t.jsx("div",{className:"mx-auto",children:t.jsx("div",{className:"bg-white rounded-lg shadow p-6 font-paragraph text-center text-red-500",children:t.jsxs("p",{children:["Error al cargar la reserva: ",b]})})});if(!u)return t.jsx("div",{className:"mx-auto",children:t.jsx("div",{className:"bg-white rounded-lg shadow p-6 font-paragraph text-center",children:t.jsx("p",{children:"No se encontraron datos de la reserva"})})});const C=u?.items?.reduce((e,s)=>e+(s.final_price||s.price||0)*(s.nights||1),0)||0,E=parseFloat((C/1.18).toFixed(2)),P=parseFloat((C-E).toFixed(2)),S=parseFloat(u.coupon_discount||0),F=parseFloat(u.payment_commission||0),R=parseFloat(E)+parseFloat(P)-S+F;return t.jsx("div",{className:"max-w-4xl mx-auto font-paragraph",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[t.jsxs("div",{className:"bg-success p-8 text-white text-center",children:[t.jsx(j,{className:"w-16 h-16 mx-auto mb-4"}),t.jsx("h1",{className:"text-3xl font-bold mb-2",children:"¡Reserva Confirmada!"}),t.jsxs("p",{className:"text-lg opacity-90",children:["Código de reserva: ",t.jsx("span",{className:"font-mono font-bold",children:u.code})]})]}),t.jsxs("div",{className:"p-6 border-b border-gray-200",children:[t.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[t.jsx(a,{className:"w-5 h-5 customtext-primary"}),"Información del Huésped"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 bg-sections-color rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(N,{className:"w-5 h-5 text-gray-400 mt-1"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Nombre completo"}),t.jsxs("p",{className:"font-semibold",children:[u.name," ",u.lastname]})]})]}),t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(N,{className:"w-5 h-5 text-gray-400 mt-1"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),t.jsx("p",{className:"font-semibold",children:u.email})]})]}),t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(v,{className:"w-5 h-5 text-gray-400 mt-1"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Teléfono"}),t.jsxs("p",{className:"font-semibold",children:["+",u.phone_prefix," ",u.phone]})]})]}),t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(w,{className:"w-5 h-5 text-gray-400 mt-1"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Documento"}),t.jsx("p",{className:"font-semibold",children:u.document})]})]})]})]}),t.jsxs("div",{className:"p-6 border-b border-gray-200",children:[t.jsx("h2",{className:"text-xl font-bold mb-4",children:"Habitaciones Reservadas"}),t.jsx("div",{className:"space-y-4",children:u.items&&u.items.map((e,s)=>{const n=e.final_price||e.price||0,o=e.nights||1,c=n*o,i=e.guests||2;return t.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:t.jsxs("div",{className:"flex gap-4",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("img",{src:e.image?`/storage/images/item/${e.image}`:"/assets/img/noimage/no_img.jpg",alt:e.name,className:"w-24 h-24 object-cover rounded-lg",onError:e=>e.target.src="/assets/img/noimage/no_img.jpg"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-bold text-lg mb-2",children:e.name}),e.room_type&&t.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Tipo: ",(d=e.room_type,{standard:"Estándar",suite:"Suite",deluxe:"Deluxe",presidential:"Presidencial",family:"Familiar",executive:"Ejecutiva",single:"Individual",double:"Doble"}[d]||d)]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(l,{size:16,className:"customtext-info"}),t.jsx("span",{className:"text-gray-600",children:"Check-in:"}),t.jsx("span",{className:"font-semibold",children:y(e.check_in)})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(l,{size:16,className:"customtext-danger"}),t.jsx("span",{className:"text-gray-600",children:"Check-out:"}),t.jsx("span",{className:"font-semibold",children:y(e.check_out)})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(r,{size:16,className:"customtext-secondary"}),t.jsx("span",{className:"text-gray-600",children:"Noches:"}),t.jsx("span",{className:"font-semibold",children:o})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(a,{size:16,className:"customtext-success"}),t.jsx("span",{className:"text-gray-600",children:"Huéspedes:"}),t.jsx("span",{className:"font-semibold",children:i})]})]}),t.jsxs("div",{className:"mt-3 flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Precio por noche"}),t.jsxs("p",{className:"font-semibold",children:[k()," ",_(n)]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Total habitación"}),t.jsxs("p",{className:"font-bold text-lg customtext-primary",children:[k()," ",_(c)]})]})]})]})]})},s);var d})})]}),t.jsxs("div",{className:"p-6",children:[t.jsx("h2",{className:"text-xl font-bold mb-4",children:"Resumen de Pago"}),t.jsxs("div",{className:"space-y-3 bg-sections-color rounded-lg p-4",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"customtext-neutral-dark",children:"Subtotal"}),t.jsxs("span",{className:"font-semibold",children:[k()," ",_(E)]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"customtext-neutral-dark",children:"IGV (18%)"}),t.jsxs("span",{className:"font-semibold",children:[k()," ",_(P)]})]}),u.coupon_id&&t.jsxs("div",{className:"flex justify-between items-center customtext-success border-t pt-2",children:[t.jsxs("span",{className:"flex items-center gap-2",children:[t.jsx(j,{size:16}),"Cupón aplicado (",u.coupon_code,")"]}),t.jsxs("span",{className:"font-semibold",children:["-",k()," ",_(S)]})]}),F>0&&t.jsxs("div",{className:"flex justify-between items-center customtext-warning border-t pt-2",children:[t.jsxs("span",{className:"text-sm",children:["Comisión método de pago (",u.payment_commission_percentage||0,"%)"]}),t.jsxs("span",{className:"font-semibold",children:["+",k()," ",_(F)]})]}),t.jsxs("div",{className:"flex justify-between items-center font-bold text-xl border-t-2 pt-3 mt-3",children:[t.jsx("span",{children:"Total Pagado"}),t.jsxs("span",{className:"customtext-primary",children:[k()," ",_(R)]})]}),u.payment_method&&t.jsxs("div",{className:"text-center text-sm text-gray-600 pt-2",children:["Método de pago: ",t.jsx("span",{className:"font-semibold capitalize",children:u.payment_method})]})]})]}),t.jsx("div",{className:"p-6 bg-sections-color border-t border-info",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(N,{className:"w-5 h-5 customtext-info mt-1"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-semibold customtext-primary mb-2",children:"Confirmación enviada por email"}),t.jsxs("p",{className:"text-sm customtext-neutral-dark",children:["Hemos enviado un correo electrónico a ",t.jsx("span",{className:"font-semibold",children:u.email})," con todos los detalles de tu reserva. Por favor, revisa tu bandeja de entrada y la carpeta de spam."]})]})]})}),u.comment&&t.jsxs("div",{className:"p-6 bg-sections-color border-t border-warning",children:[t.jsx("h3",{className:"font-semibold customtext-primary mb-2",children:"Comentarios adicionales"}),t.jsx("p",{className:"text-sm customtext-neutral-dark",children:u.comment})]}),t.jsx("div",{className:"p-6 border-t border-gray-200",children:t.jsx(O,{href:"/habitaciones",className:`w-full !rounded-full py-4 text-white ${o?.class_button}`,children:"Ver más habitaciones"})}),t.jsxs("div",{className:"p-6 bg-sections-color text-center text-sm text-gray-600",children:[t.jsx("p",{children:"Si tienes alguna pregunta sobre tu reserva, no dudes en contactarnos."}),t.jsxs("p",{className:"mt-2",children:[t.jsx("span",{className:"font-semibold",children:"Código de reserva:"})," ",u.code]})]})]})})}function G({cart:e,setCart:s,user:a,prefixes:r,ubigeos:n,items:l,contacts:c,data:i,generals:x=[]}){const[u,p]=d.useState(1),h=d.useMemo(()=>e.filter(e=>"booking"===e.type),[e]),g=e=>{s(s=>[...s.filter(e=>"booking"!==e.type),..."function"==typeof e?e(s.filter(e=>"booking"===e.type)):e])},b=h.reduce((e,s)=>e+(s.final_price||s.price)*(s.nights||1),0),f=parseFloat(I.igv_checkout||0);let j,y;f>0?(j=b,y=parseFloat((b*(f/100)).toFixed(2))):(j=parseFloat((b/1.18).toFixed(2)),y=parseFloat((b-j).toFixed(2)));const[N,v]=d.useState(0),[w,k]=d.useState(null),[_,T]=d.useState(null),E=e=>T(e),P=()=>T(null),S={privacy_policy:"Políticas de privacidad",terms_conditions:"Términos y condiciones",saleback_policy:"Políticas de cancelación y cambios"},F=j+y,R=Math.max(0,F-N),[O,$]=d.useState([]),[z,L]=d.useState([]);d.useEffect(()=>{const e=new URLSearchParams(window.location.search).get("code");e&&(L(e),p(3))},[window.location.search]),d.useEffect(()=>{z&&s(e=>e.filter(e=>"booking"!==e.type))},[z]),d.useEffect(()=>{(()=>{const e=document.createElement("script");e.src="https://sdk.mercadopago.com/js/v2",e.async=!0,document.body.appendChild(e)})()},[]);const q=e=>{p(e),window.scrollTo({top:0,behavior:"smooth"})};return t.jsx("div",{id:i?.element_id||null,className:"bg-sections-color",children:t.jsxs("div",{className:"min-h-screen  py-4 md:py-12 px-2 sm:px-primary 2xl:px-0 2xl:max-w-7xl mx-auto",children:[t.jsxs("div",{className:"bg-white p-3 md:p-8 rounded-xl md:rounded-3xl shadow-sm",children:[t.jsx("div",{className:"mb-6 md:mb-10",children:t.jsxs("div",{className:"flex items-center justify-between gap-1 md:gap-4 max-w-3xl mx-auto",children:[t.jsxs("div",{className:"flex flex-col items-center md:flex-row md:items-center gap-1 md:gap-2 transition-all duration-300 "+(u>=1?"customtext-primary font-bold":"customtext-neutral-light"),children:[t.jsx("span",{className:"w-10 h-10 md:w-12 md:h-12 rounded-full border-2 flex items-center justify-center text-sm md:text-base font-bold shadow-lg transition-all duration-300 "+(u>=1?"bg-primary text-white border-primary scale-110":"bg-white customtext-neutral-light border-gray-300"),children:"1"}),t.jsx("span",{className:"text-[10px] md:text-sm font-semibold text-center",children:"Carrito"})]}),t.jsx("div",{className:"mb-4 lg:mb-0 flex-1 h-1 bg-gray-200 relative rounded-full overflow-hidden",children:t.jsx("div",{className:"absolute inset-0 transition-all duration-700 bg-gradient-to-r from-primary to-secondary shadow-md",style:{width:u>1?"100%":"0%"}})}),t.jsxs("div",{className:"flex flex-col items-center md:flex-row md:items-center gap-1 md:gap-2 transition-all duration-300 "+(u>1?"customtext-primary font-bold":"customtext-neutral-light"),children:[t.jsx("span",{className:"w-10 h-10 md:w-12 md:h-12 rounded-full border-2 flex items-center justify-center text-sm md:text-base font-bold shadow-lg transition-all duration-300 "+(u>1?"bg-primary text-white border-primary scale-110":"bg-white customtext-neutral-light border-gray-300"),children:"2"}),t.jsx("span",{className:"text-[10px] md:text-sm font-semibold text-center",children:"Pago"})]}),t.jsx("div",{className:"mb-4 lg:mb-0 flex-1 h-1 bg-gray-200 relative rounded-full overflow-hidden",children:t.jsx("div",{className:"absolute inset-0 transition-all duration-700 bg-gradient-to-r from-primary to-secondary shadow-md",style:{width:u>2?"100%":"0%"}})}),t.jsxs("div",{className:"flex flex-col items-center md:flex-row md:items-center gap-1 md:gap-2 transition-all duration-300 "+(3===u?"customtext-primary font-bold":"customtext-neutral-light"),children:[t.jsx("span",{className:"w-10 h-10 md:w-12 md:h-12 rounded-full border-2 flex items-center justify-center text-sm md:text-base font-bold shadow-lg transition-all duration-300 "+(3===u?"bg-success text-white border-success scale-110":"bg-white customtext-neutral-light border-gray-300"),children:"3"}),t.jsx("span",{className:"text-[10px] md:text-sm font-semibold text-center",children:"Confirmación"})]})]})}),1===u&&t.jsx(M,{data:i,cart:h,setCart:g,onContinue:()=>q(2),subTotal:j,totalPrice:b,igv:y,totalFinal:R,openModal:E,totalWithoutDiscounts:F}),2===u&&t.jsx(V,{data:i,setCode:L,cart:h,setBooking:$,setCart:g,onContinue:()=>q(3),noContinue:()=>q(1),subTotal:j,totalPrice:b,igv:y,totalFinal:R,user:a,prefixes:r,contacts:c,ubigeos:n,items:l,openModal:E,setCouponDiscount:v,setCouponCode:k,totalWithoutDiscounts:F}),3===u&&t.jsx(W,{data:i,code:z,setCart:g,cart:O,subTotal:j,totalPrice:b,igv:y,totalFinal:R,couponDiscount:N,couponCode:w,totalWithoutDiscounts:F})]}),Object.keys(S).map((e,s)=>{const a=S[e],r=x.find(s=>s.correlative==e)?.description??"";return t.jsx(m,{isOpen:_===s,onRequestClose:P,contentLabel:a,className:"fixed top-0 left-0 right-0 bottom-0 flex items-center justify-center p-4 z-50",overlayClassName:"fixed inset-0 bg-black bg-opacity-50 z-[999]",ariaHideApp:!1,children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fadeIn",children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-primary to-secondary",children:[t.jsx("h2",{className:"text-2xl font-bold text-white pr-4",children:a}),t.jsx("button",{onClick:P,className:"flex-shrink-0 w-10 h-10 rounded-full bg-white/20 hover:bg-white/30 text-white transition-all duration-300 flex items-center justify-center hover:scale-110 shadow-lg","aria-label":"Cerrar modal",children:t.jsx(o,{size:20,strokeWidth:2.5})})]}),t.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:t.jsx("div",{className:"prose prose-gray max-w-none",children:t.jsx(C,{html:r})})}),t.jsx("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-200 bg-sections-color",children:t.jsx("button",{onClick:P,className:"px-8 py-3 bg-primary hover:bg-secondary text-white rounded-full transition-all duration-300 font-bold shadow-lg hover:shadow-xl hover:scale-105 active:scale-95",children:"Cerrar"})})]})},s)})]})})}export{G as default};
