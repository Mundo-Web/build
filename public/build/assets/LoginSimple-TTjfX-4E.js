var e=Object.defineProperty,s=(s,t,r)=>((s,t,r)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r)(s,"symbol"!=typeof t?t+"":t,r);import{m as t,r,j as a}from"./vendor-react-CWR92fp6.js";import{J as o}from"./JSEncrypt-ewRYZc2G.js";import{G as i}from"./Global-BAGAPG-V.js";import{S as n}from"./CartKuchara-Dv4IzV1I.js";import{A as l}from"./AuthClientRest-D5JaRSq6.js";import{I as c}from"./InputForm-unNNVMIq.js";import{t as d}from"./GoogleSignInButton-D2m9IONr.js";import"./vendor-swiper-T7yreVnW.js";class m{}s(m,"loginWithGoogle",async e=>{try{const{status:s,result:r}=await t.Fetch("./api/google-login",{method:"POST",body:JSON.stringify({credential:e})});return s&&200===r.status?(d.success("¡Inicio de sesión exitoso!",{description:`Bienvenido${r?.data?.user?.name?`, ${r.data.user.name}`:""} a ${i.APP_NAME}.`,duration:3e3,position:"top-right",richColors:!0}),r):(d.error("Error al iniciar sesión con Google",{description:r.message||"Ocurrió un error inesperado.",duration:3e3,position:"top-right",richColors:!0}),!1)}catch(s){return d.error("Error al iniciar sesión con Google",{description:s.message||"Ocurrió un error inesperado.",duration:3e3,position:"top-right",richColors:!0}),!1}}),s(m,"initializeGoogle",()=>new Promise(e=>{if(window.google)return void e(window.google);const s=document.createElement("script");s.src="https://accounts.google.com/gsi/client",s.onload=()=>{e(window.google)},s.onerror=()=>{e(null)},document.head.appendChild(s)}));const u=({onSuccess:e,onError:s,text:t="Continuar con Google"})=>{const[o,n]=r.useState(!1),[l,c]=r.useState(!1);if(!i.GOOGLE_OAUTH_ENABLED||!i.GOOGLE_CLIENT_ID)return null;r.useEffect(()=>{(async()=>{const e=await m.initializeGoogle();e&&(c(!0),e.accounts.id.initialize({client_id:i.GOOGLE_CLIENT_ID,callback:d,auto_select:!1,cancel_on_tap_outside:!0}))})()},[]);const d=async t=>{n(!0);try{const r=await m.loginWithGoogle(t.credential);r&&200===r.status?e?e(r):window.location.href="/":s&&s(r)}catch(r){s&&s(r)}finally{n(!1)}};return l?a.jsx("button",{type:"button",onClick:()=>{window.google&&l&&window.google.accounts.id.prompt()},disabled:o,className:"w-full flex justify-center items-center py-3 px-4 border border-gray-300 rounded-xl shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-300 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed",children:o?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-gray-700",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Iniciando sesión..."]}):a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"w-5 h-5 mr-3",viewBox:"0 0 24 24",children:[a.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),a.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),a.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),a.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),t]})}):a.jsxs("button",{type:"button",disabled:!0,className:"w-full flex justify-center items-center py-3 px-4 border border-gray-300 rounded-xl shadow-sm bg-white text-sm font-medium text-gray-400 cursor-not-allowed",children:[a.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Cargando Google..."]})};function x({data:e}){const s=new o;s.setPublicKey(i.PUBLIC_RSA_KEY);const[d,m]=r.useState(!1),[x,h]=r.useState(!1);r.useRef(),r.useRef();const g=r.useRef(),[p,f]=r.useState({email:"",password:"",remember:""}),w=e=>{const{name:s,value:t}=e.target;f(e=>({...e,[s]:t}))};r.useEffect(()=>{t.GET.message&&n.fire({icon:"info",title:"Mensaje",text:t.GET.message,showConfirmButton:!1,timer:3e3})},[]);return a.jsx("div",{id:e?.element_id||null,className:"py-8 lg:py-0 lg:min-h-screen flex items-center justify-center bg-[#F7F9FB] px-primary 2xl:px-0  ",children:a.jsx("div",{className:"2xl:max-w-7xl w-full mx-auto ",children:a.jsx("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:a.jsxs("div",{className:"flex flex-col lg:flex-row",children:[a.jsxs("div",{className:"hidden lg:block lg:w-1/2 relative",children:[a.jsx("img",{src:`/assets/resources/login.png?v=${crypto.randomUUID()}`,alt:i.APP_NAME,className:"absolute inset-0 w-full h-full object-cover",onError:e=>{e.target.onerror=null,e.target.src="/assets/img/logo-bk.svg"}}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/30 to-transparent"})]}),a.jsx("div",{className:"w-full lg:w-1/2 px-6 py-12 sm:px-12 lg:px-16",children:a.jsxs("div",{className:"max-w-md mx-auto",children:[a.jsxs("div",{className:"text-center lg:text-left",children:[a.jsx("h5",{className:"customtext-primary font-medium text-lg",children:"Hola"}),a.jsx("h1",{className:"mt-2 text-3xl font-bold text-gray-900 sm:text-4xl",children:"Bienvenido"}),a.jsx("p",{className:"mt-3 customtext-neutral-light",children:"Inicia sesión para acceder a tu cuenta y seguir tus pedidos y disfrutar de una experiencia de compra extraordinaria."})]}),a.jsxs("form",{className:"mt-8 space-y-6",onSubmit:async e=>{e.preventDefault(),m(!0);const t=p?.email,r=p?.password,a={email:s.encrypt(t),password:s.encrypt(r)},o=await l.login(a);m(!1),o&&200===o.status&&(window.location.href="/")},children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx(c,{label:"Email",type:"email",name:"email",value:p.email,onChange:w,placeholder:"hola@mail.com"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm 2xl:text-base mb-1 customtext-neutral-dark",htmlFor:"password",children:"Contraseña"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"password",value:p.password,onChange:w,name:"password",type:x?"text":"password",className:"w-full px-4 py-3 pr-12 border customtext-neutral-dark border-neutral-ligth rounded-xl focus:ring-0 focus:outline-0 transition-all duration-300",required:!0}),a.jsx("button",{type:"button",onClick:()=>{h(!x)},className:"absolute right-3 top-1/2 transform -translate-y-1/2 flex items-center justify-center text-gray-400 hover:text-gray-600 transition-colors duration-200",children:x?a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 11-4.243-4.243m4.242 4.242L9.88 9.88"})}):a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:"remember",ref:g,className:"h-4 w-4 rounded border-gray-300 customtext-primary focus:ring-sky-500"}),a.jsx("label",{htmlFor:"remember",className:"ml-2 text-sm text-gray-600",children:"Guardar mis datos"})]}),a.jsxs("a",{href:"/forgot-password",className:"text-sm font-semibold customtext-primary hover:customtext-primary flex items-center gap-1",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"17",viewBox:"0 0 14 17",fill:"currentColor",className:"w-4 h-4",children:a.jsx("path",{d:"M5.79167 11H8.20833L7.75 8.3125C7.98256 8.18831 8.16569 8.00822 8.29942 7.77223C8.43314 7.53626 8.5 7.27544 8.5 6.98979C8.5 6.57993 8.35269 6.22917 8.05808 5.9375C7.76346 5.64583 7.40929 5.5 6.99558 5.5C6.58186 5.5 6.22917 5.64688 5.9375 5.94063C5.64583 6.23438 5.5 6.5875 5.5 7C5.5 7.28344 5.56686 7.54225 5.70058 7.77642C5.83431 8.01057 6.01744 8.18926 6.25 8.3125L5.79167 11ZM7 16.5C5.125 16.0417 3.57292 14.9803 2.34375 13.3158C1.11458 11.6513 0.5 9.80297 0.5 7.77083V3L7 0.5L13.5 3V7.77083C13.5 9.80297 12.8854 11.6513 11.6562 13.3158C10.4271 14.9803 8.875 16.0417 7 16.5Z"})}),"Olvidé mi contraseña"]})]}),a.jsx("button",{type:"submit",className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-xl shadow-sm text-sm font-medium text-white bg-primary hover:scale-105  hover:bg-primary focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sky-500 transition-all duration-300 ease-in-out",children:d?"Ingresando...":"Ingresar"}),i.GOOGLE_OAUTH_ENABLED&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"relative mt-6",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-gray-300"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-2 bg-white text-gray-500",children:"O continúa con"})})]}),a.jsx(u,{onSuccess:()=>window.location.href="/",text:"Continuar con Google"})]}),a.jsx("div",{className:"text-center mt-4",children:a.jsxs("p",{className:"text-sm text-gray-600",children:["¿Eres nuevo por aquí?"," ",a.jsx("a",{href:"/crear-cuenta",className:"font-medium customtext-primary hover:customtext-primary",children:"Crea una cuenta"})]})})]})]})})]})})})})}export{x as default};
