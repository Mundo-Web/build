import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r}from"./index-BOnQTV8N.js";import{I as n}from"./InputForm-Dmyom2PO.js";import{u as w}from"./ubigeo-Q-ocg024.js";import{S as p}from"./SelectForm-BvZde-dr.js";import{C as le}from"./ComplaintStech-Df6_VVhj.js";import{T as ie}from"./ThankYouPage-Dny8oxi5.js";import{R as ce}from"./PolicyModal-B0WwLYks.js";import{H as ne}from"./HtmlContent-ghmllTyl.js";import{t as q}from"./CardProductKatya-BPLqIfPk.js";import{C as de}from"./Number2Currency-jIsa99f9.js";import{F as L}from"./file-text-BGNfKLm5.js";import{U}from"./user-BZB1h7Cv.js";import{M as me}from"./map-pin-Cj3PUWlD.js";import{P as pe}from"./package-DBFPPBi1.js";import{T as ue}from"./triangle-alert-CK-9Xb7r.js";import{S as O}from"./shield-BR0A2VCY.js";import{S as _}from"./send-BLeMv5Mx.js";import{X as xe}from"./x-fof_H3Vv.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./chevron-down-uIVDLcM-.js";import"./createLucideIcon-DfjclApS.js";import"./search-BQ59Robe.js";import"./check-D5vaIe6v.js";import"./index-B9ygI19o.js";import"./loader-circle-CSFYLd5m.js";import"./refresh-cw-Dp9ubuxa.js";import"./circle-check-big-CYWUGR3Z.js";import"./message-square-3fUfiy2J.js";import"./hash-B-gZU8HC.js";import"./arrow-left-n6ltb6Cc.js";import"./index-BLHw34Di.js";import"./index-Chjiymov.js";import"./index-B8-haksW.js";import"./General-apRuNwp7.js";function Ge({generals:C=[],data:s}){const[H,x]=r.useState(""),[S,k]=r.useState(!1),[D,T]=r.useState(null),[V,$]=r.useState(!1),[F,P]=r.useState(null),[B,Y]=r.useState(null),y=r.useRef();r.useEffect(()=>{Y(Math.floor(Date.now()/1e3))},[]);const[a,i]=r.useState({nombre:"",tipo_documento:"RUC",numero_identidad:"",celular:"",correo_electronico:"",departamento:"",provincia:"",distrito:"",direccion:"",tipo_producto:"",monto_reclamado:"",descripcion_producto:"",tipo_reclamo:"",fecha_ocurrencia:"",numero_pedido:"",detalle_reclamo:"",acepta_terminos:!1}),[E,u]=r.useState(!1),c=o=>{const{name:t,value:l,type:g,checked:b}=o.target;if(g==="date"&&l){const[j]=l.split("-");if(j&&j.length>4)return}i({...a,[t]:g==="checkbox"?b:l})},I=()=>{i({nombre:"",tipo_documento:"RUC",numero_identidad:"",celular:"",correo_electronico:"",departamento:"",provincia:"",distrito:"",direccion:"",tipo_producto:"",monto_reclamado:"",descripcion_producto:"",tipo_reclamo:"",fecha_ocurrencia:"",numero_pedido:"",detalle_reclamo:"",acepta_terminos:!1}),R(""),v(""),f(""),k(!1),T(null),x(""),y.current&&y.current.reset()},W=(o,t)=>{k(o),T(t),o&&x("")},J=()=>{$(!1),P(null)},Q=o=>{if(o.preventDefault(),u(!0),!S||!D){x("Por favor, completa la verificación de seguridad."),u(!1);return}x("");const t={...a,captcha_verified:!0,recaptcha_token:D,_form_loaded_at:B,_hp:""};fetch("/api/complaints",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(l=>l.json()).then(l=>{l.type==="success"?(P(a),$(!0),I(),u(!1)):(q.error("Solicitud rechazada",{description:"Lo sentimos, no se envió su solicitud.",icon:e.jsx(_,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"}),u(!1))}).catch(l=>{q.error("Solicitud rechazada",{description:l||"Lo sentimos, no se envió su solicitud.",icon:e.jsx(_,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"}),u(!1)})},[d,R]=r.useState(""),[m,v]=r.useState(""),[h,f]=r.useState(""),[X,G]=r.useState([]),[K,Z]=r.useState([]),[ee,z]=r.useState([]);r.useEffect(()=>{const o=[...new Set(w.map(t=>t.departamento))];G(o)},[]),r.useEffect(()=>{if(d){const o=[...new Set(w.filter(t=>t.departamento===d).map(t=>t.provincia))];Z(o),v(""),f(""),z([]),i(t=>({...t,departamento:d,provincia:"",distrito:""}))}},[d]),r.useEffect(()=>{if(m){const o=w.filter(t=>t.departamento===d&&t.provincia===m).map(t=>t.distrito);z(o),f(""),i(t=>({...t,provincia:m,distrito:""}))}},[m]),r.useEffect(()=>{h&&i(o=>({...o,distrito:h}))},[h]);const se=[{value:"ruc",label:"RUC"},{value:"dni",label:"DNI"},{value:"ce",label:"CE"},{value:"pasaporte",label:"Pasaporte"}],te=[{value:"producto",label:"Producto"},{value:"servicio",label:"Servicio"}],oe=[{value:"reclamo",label:"Reclamo"},{value:"queja",label:"Queja"}],[re,M]=r.useState(!1),A={terms_conditions:"Términos y condiciones"},ae=o=>M(o),N=()=>M(null);return V&&F?e.jsx(ie,{complaintData:F,onBackToForm:J,data:s}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 w-full px-4 py-8 font-paragraph",children:[e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("div",{className:`inline-flex items-center justify-center w-16 h-16 bg-primary rounded-full mb-6 ${(s==null?void 0:s.class_icon)||" shadow-lg"}`,children:e.jsx(L,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:`text-4xl font-bold  mb-4 ${(s==null?void 0:s.class_title)||" customtext-neutral-dark"}`,children:"Libro de Reclamaciones"}),e.jsx("p",{className:"text-lg customtext-neutral-light max-w-2xl mx-auto",children:"Tu opinión es importante para nosotros. Completa este formulario para registrar tu reclamo o queja."})]}),e.jsx("div",{className:"bg-white shadow-2xl rounded-3xl border border-gray-100 overflow-hidden",children:e.jsxs("form",{onSubmit:Q,className:"p-8 space-y-12",children:[e.jsx("input",{type:"text",name:"_hp",tabIndex:"-1",autoComplete:"off",style:{position:"absolute",left:"-9999px",width:"1px",height:"1px",opacity:0,pointerEvents:"none"},"aria-hidden":"true"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4 pb-4 border-b border-gray-200",children:[e.jsx("div",{className:`flex items-center justify-center w-12 h-12 bg-secondary rounded-full ${(s==null?void 0:s.class_icon)||" shadow-lg customtext-primary"}`,children:e.jsx(U,{className:"w-6 h-6 "})}),e.jsxs("div",{children:[e.jsx("h2",{className:`text-2xl font-bold customtext-neutral-dark ${(s==null?void 0:s.class_title)||""}`,children:"Identificación del Consumidor"}),e.jsx("p",{className:"customtext-neutral-light",children:"Proporciona tus datos personales"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"space-y-2",children:e.jsx(n,{type:"text",label:"Nombres completos",name:"nombre",value:a.nombre,onChange:c,placeholder:"Ingresa tu nombre completo"})}),e.jsx("div",{className:"space-y-2",children:e.jsx(p,{label:"Tipo de documento",options:se,placeholder:"Selecciona tu documento",value:a.tipo_documento,onChange:o=>{i(t=>({...t,tipo_documento:o}))}})}),e.jsx("div",{className:"space-y-2",children:e.jsx(n,{type:"text",label:"Número de documento",name:"numero_identidad",value:a.numero_identidad,onChange:c,placeholder:"Número de documento"})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-2",children:e.jsx(n,{type:"tel",label:"Número de celular",name:"celular",value:a.celular,onChange:c,placeholder:"+51 999 999 999"})}),e.jsx("div",{className:"space-y-2",children:e.jsx(n,{type:"email",label:"Correo electrónico",name:"correo_electronico",value:a.correo_electronico,onChange:c,placeholder:"tu@correo.com"})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4 pb-4 border-b border-gray-200",children:[e.jsx("div",{className:`flex items-center justify-center w-12 h-12 bg-secondary rounded-full ${(s==null?void 0:s.class_icon)||" shadow-lg customtext-primary"}`,children:e.jsx(me,{className:"w-6 h-6 "})}),e.jsxs("div",{children:[e.jsx("h2",{className:`text-2xl font-bold customtext-neutral-dark ${(s==null?void 0:s.class_title)||""}`,children:"Ubicación"}),e.jsx("p",{className:"customtext-neutral-light",children:"Indica tu dirección actual"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(p,{label:"Departamento",options:X,placeholder:"Selecciona departamento",value:d,onChange:o=>{R(o),i(t=>({...t,departamento:o}))}}),e.jsx(p,{disabled:!d,label:"Provincia",options:K,placeholder:"Selecciona provincia",value:m,onChange:o=>{v(o),i(t=>({...t,provincia:o}))}}),e.jsx(p,{disabled:!m,label:"Distrito",options:ee,placeholder:"Selecciona distrito",value:h,onChange:o=>{f(o),i(t=>({...t,distrito:o}))}})]}),e.jsx("div",{className:"space-y-2",children:e.jsx(n,{type:"text",label:"Dirección completa",name:"direccion",value:a.direccion,onChange:c,placeholder:"Av. Principal 123, Urbanización..."})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4 pb-4 border-b border-gray-200",children:[e.jsx("div",{className:`flex items-center justify-center w-12 h-12 bg-secondary rounded-full ${(s==null?void 0:s.class_icon)||" shadow-lg customtext-primary"}`,children:e.jsx(pe,{className:"w-6 h-6 "})}),e.jsxs("div",{children:[e.jsx("h2",{className:`text-2xl font-bold customtext-neutral-dark ${(s==null?void 0:s.class_title)||""}`,children:"Identificación del bien contratado"}),e.jsx("p",{className:"customtext-neutral-light",children:"Detalles del producto o servicio"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(p,{label:"Tipo de contratación",options:te,placeholder:"¿Fue un producto o servicio?",value:a.tipo_producto,onChange:o=>{i(t=>({...t,tipo_producto:o}))}}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-2",children:e.jsx(n,{type:"number",label:`Monto reclamado (${de()})`,name:"monto_reclamado",value:a.monto_reclamado,onChange:c,placeholder:"0.00",step:"0.01"})}),e.jsx("div",{className:"space-y-2",children:e.jsx(n,{type:"text",label:"Descripción del producto/servicio",name:"descripcion_producto",value:a.descripcion_producto,onChange:c,placeholder:"Nombre, modelo, código..."})})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4 pb-4 border-b border-gray-200",children:[e.jsx("div",{className:`flex items-center justify-center w-12 h-12 bg-secondary rounded-full ${(s==null?void 0:s.class_icon)||" shadow-lg customtext-primary "}`,children:e.jsx(ue,{className:"w-6 h-6 "})}),e.jsxs("div",{children:[e.jsx("h2",{className:`text-2xl font-bold customtext-neutral-dark ${(s==null?void 0:s.class_title)||""}`,children:"Detalle del reclamo"}),e.jsx("p",{className:"customtext-neutral-light",children:"Describe tu experiencia"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(p,{label:"Tipo de solicitud",options:oe,placeholder:"¿Es un reclamo o queja?",value:a.tipo_reclamo,onChange:o=>{i(t=>({...t,tipo_reclamo:o}))}}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-2",children:e.jsx(n,{type:"date",label:"Fecha de ocurrencia",name:"fecha_ocurrencia",value:a.fecha_ocurrencia,onChange:c,max:new Date().toISOString().split("T")[0],min:"2000-01-01"})}),e.jsx("div",{className:"space-y-2",children:e.jsx(n,{type:"text",label:"Número de pedido (opcional)",name:"numero_pedido",value:a.numero_pedido,onChange:c,placeholder:"#PED-123456"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium customtext-neutral-dark mb-2",children:"Detalle del reclamo o queja"}),e.jsx("textarea",{name:"detalle_reclamo",placeholder:"Describe detalladamente tu reclamo o queja. Incluye fechas, nombres, referencias y cualquier información relevante...",className:"w-full min-h-32 px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300 resize-none",value:a.detalle_reclamo,onChange:c,rows:5}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Mínimo 50 caracteres para una descripción completa"})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4 pb-4 border-b border-gray-200",children:[e.jsx("div",{className:`flex items-center  justify-center w-12 h-12 bg-secondary rounded-full ${(s==null?void 0:s.class_icon)||" shadow-lg customtext-primary"}`,children:e.jsx(O,{className:"w-6 h-6 "})}),e.jsxs("div",{children:[e.jsx("h2",{className:`text-2xl font-bold customtext-neutral-dark ${(s==null?void 0:s.class_title)||""}`,children:"Verificación y términos"}),e.jsx("p",{className:"customtext-neutral-light",children:"Confirmación final"})]})]}),e.jsx("div",{className:"bg-gray-50 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",id:"terminos",name:"acepta_terminos",className:"mt-1 w-5 h-5 customtext-primary border-gray-300 rounded focus:ring-blue-500",checked:a.acepta_terminos,onChange:c}),e.jsxs("label",{htmlFor:"terminos",className:"text-sm customtext-neutral-dark leading-relaxed",children:["Acepto y estoy de acuerdo con los"," ",e.jsx("button",{type:"button",onClick:()=>ae(0),className:"customtext-primary underline hover:customtext-secondary font-medium",children:"términos y condiciones"})," ","del libro de reclamaciones. Confirmo que la información proporcionada es veraz y completa."]})]})}),e.jsx("div",{className:"bg-gray-50 rounded-xl p-6",children:e.jsx(le,{ref:y,onVerify:W,error:H})})]}),e.jsxs("div",{className:"pt-8 border-t border-gray-200",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-end",children:[e.jsx("button",{type:"button",onClick:I,className:"px-6 py-3 customtext-neutral-dark bg-gray-100 hover:bg-gray-200 rounded-xl font-medium transition-all duration-300 flex items-center justify-center gap-2",children:"Limpiar formulario"}),e.jsx("button",{disabled:E||!a.acepta_terminos||!S,type:"submit",className:"px-8 py-3 bg-primary hover:brightness-110 disabled:from-gray-400 disabled:to-gray-500 text-white font-medium rounded-xl transition-all duration-300 flex items-center justify-center gap-3 shadow-lg hover:shadow-xl disabled:cursor-not-allowed",children:E?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),"Enviando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"w-5 h-5"}),"Enviar reclamo"]})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-4 text-center",children:"Al enviar este formulario, tu reclamo será registrado y procesado según la normativa vigente. Recibirás una confirmación en tu correo electrónico."})]})]})}),e.jsxs("div",{className:"mt-12 grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gray-100 rounded-xl p-6 text-center",children:[e.jsx("div",{className:`w-12 h-12 bg-secondary rounded-full flex items-center justify-center mx-auto mb-4 ${(s==null?void 0:s.class_icon)||" shadow-lg customtext-primary"}`,children:e.jsx(L,{className:"w-6 h-6 "})}),e.jsx("h3",{className:"font-semibold customtext-neutral-dark mb-2",children:"Respuesta garantizada"}),e.jsx("p",{className:"text-sm customtext-neutral-light",children:"Te responderemos en un máximo de 30 días calendario"})]}),e.jsxs("div",{className:"bg-gray-100 rounded-xl p-6 text-center",children:[e.jsx("div",{className:`w-12 h-12 bg-secondary rounded-full flex items-center justify-center mx-auto mb-4 ${(s==null?void 0:s.class_icon)||" shadow-lg customtext-primary"}`,children:e.jsx(O,{className:"w-6 h-6"})}),e.jsx("h3",{className:"font-semibold customtext-neutral-dark mb-2",children:"Información segura"}),e.jsx("p",{className:"text-sm customtext-neutral-light",children:"Tus datos están protegidos y son confidenciales"})]}),e.jsxs("div",{className:"bg-gray-100 rounded-xl p-6 text-center",children:[e.jsx("div",{className:`w-12 h-12 bg-secondary rounded-full flex items-center justify-center mx-auto mb-4 ${(s==null?void 0:s.class_icon)||" shadow-lg customtext-primary"}`,children:e.jsx(U,{className:"w-6 h-6 "})}),e.jsx("h3",{className:"font-semibold customtext-neutral-dark mb-2",children:"Atención personalizada"}),e.jsx("p",{className:"text-sm customtext-neutral-light",children:"Un especialista revisará tu caso individualmente"})]})]})]}),Object.keys(A).map((o,t)=>{var b;const l=A[o],g=Array.isArray(C)?((b=C.find(j=>j.correlative==o))==null?void 0:b.description)??"":"";return e.jsx(ce,{isOpen:re===t,onRequestClose:N,contentLabel:l,className:"fixed top-0 left-0 right-0 bottom-0 flex items-center justify-center p-4 z-50",overlayClassName:"fixed inset-0 bg-black bg-opacity-50 z-[9999999]",ariaHideApp:!1,children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 pr-4",children:l}),e.jsx("button",{onClick:N,className:"flex-shrink-0 text-gray-400 hover:text-red-500 transition-colors duration-200 p-1 hover:bg-gray-100 rounded-full","aria-label":"Cerrar modal",children:e.jsx(xe,{size:24,strokeWidth:2})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsx("div",{className:"prose prose-gray max-w-none",children:e.jsx(ne,{html:g})})}),e.jsx("div",{className:"flex justify-end p-6 border-t border-gray-200",children:e.jsx("button",{onClick:N,className:"px-6 py-2 bg-primary text-white rounded-lg  transition-colors duration-200 font-medium",children:"Cerrar"})})]})},t)})]})}export{Ge as default};
