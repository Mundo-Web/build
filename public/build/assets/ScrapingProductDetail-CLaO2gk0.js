import{r as e,I as s,j as a,m as t}from"./System-Bybt2Brn.js";import{S as l}from"./sweetalert2.esm.all-DbJpIAEg.js";import{H as i,C as r,S as c}from"./square-check-big-CxeVigrT.js";import{S as n,P as m}from"./store-1UmCNhxj.js";import{C as d}from"./circle-check-B4LpUKaU.js";import{C as o}from"./chevron-up-NDt_7nmW.js";import{C as x}from"./chevron-down-r_B4RFE6.js";import{S as u}from"./shopping-cart-D6rW5WdX.js";import{P as p}from"./plus-4JHYG4O1.js";import"./vendor-BiOv2i5T.js";import"./createLucideIcon-oahCLV50.js";function h({item:h,setCart:j,cart:g}){const[N,f]=e.useState(null);e.useEffect((()=>{const e=sessionStorage.getItem("product_url");e&&(f(e),sessionStorage.removeItem("product_url"))}),[]);const b=new s,[v,y]=e.useState({url:null==h?void 0:h.image,type:"main"}),[w,k]=e.useState(1),[F,S]=e.useState(!1),[C,_]=e.useState([]);null==g||g.find((e=>e.id==(null==h?void 0:h.id))),e.useEffect((()=>{(null==h?void 0:h.id)&&I(h)}),[h]);const I=async e=>{try{const s={id:null==e?void 0:e.id},a=await b.verifyCombo(s);if(!a)return;const t=a[0].associated_items;_(Object.values(t))}catch(s){return}},B=C.reduce(((e,s)=>e+parseFloat(s.final_price)),0),[$,q]=e.useState(!1);return a.jsxs("div",{className:"px-primary mx-auto py-12 bg-[#F7F9FB] ",children:[a.jsx("div",{className:"bg-white rounded-xl p-8",children:a.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex gap-6",children:[a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsx("button",{onClick:()=>y({url:null==h?void 0:h.image,type:"main"}),className:"w-16 h-16 border rounded-lg p-2 "+(v.url===(null==h?void 0:h.image)?"border-blue-400":"border-gray-200"),children:a.jsx("img",{src:`/storage/images/item/${null==h?void 0:h.image}`,alt:"Main Thumbnail",className:"w-full h-full object-contain"})}),null==h?void 0:h.images.map(((e,s)=>a.jsx("button",{onClick:()=>y({url:e.url,type:"gallery"}),className:"w-16 h-16 border rounded-lg p-2 "+(v.url===e.url?"border-blue-400":"border-gray-200"),children:a.jsx("img",{src:`/storage/images/item_image/${e.url}`,alt:`Thumbnail ${s+1}`,className:"w-full h-full object-contain"})},s)))]}),a.jsx("div",{className:"flex-1",children:a.jsx("img",{src:"main"===v.type?`/storage/images/item/${v.url}`:`/storage/images/item_image/${v.url}`,alt:"Product main",className:"w-full h-auto object-contain"})})]}),a.jsx("div",{className:"border rounded-lg",children:a.jsxs("div",{className:"flex gap-6 items-center justify-center py-4 customtext-neutral-dark",children:[a.jsxs("div",{className:"p-4",children:[a.jsx("div",{className:"bg-[#F7F9FB] py-4 px-5 rounded-full w-max h-max",children:a.jsx(i,{className:"w-6 h-6 mx-auto mb-1 customtext-primary"})}),a.jsx("p",{className:"font-semibold text-sm",children:"Despacho"}),a.jsx("p",{className:"font-semibold text-sm",children:"a domicilio"})]}),a.jsxs("div",{className:"p-4 text-center",children:[a.jsx("div",{className:"bg-[#F7F9FB] py-4 px-5 rounded-full w-max h-max",children:a.jsx(n,{className:"w-6 h-6 mx-auto mb-1 customtext-primary"})}),a.jsx("p",{className:"font-semibold text-sm",children:"Retira"}),a.jsx("p",{className:"font-semibold text-sm",children:"en tienda"})]})]})}),a.jsxs("div",{className:"mt-8 bg-[#F7F9FB] rounded-lg p-6 space-y-4 customtext-neutral-dark",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(m,{className:"w-5 h-5 customtext-primary"}),a.jsx("span",{className:"text-sm font-semibold",children:"¿Necesitas ayuda? Llámanos al 012037074"})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm ",children:[a.jsx(r,{className:"w-5 h-5 customtext-primary"}),a.jsx("span",{className:"text-sm font-semibold",children:"Soporte técnico"})]})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("p",{className:"customtext-neutral-light text-sm",children:["Marca: ",a.jsx("span",{className:"customtext-neutral-dark",children:null==h?void 0:h.brand.name})]}),a.jsx("h1",{className:"customtext-neutral-dark text-[40px] font-bold mt-2",children:null==h?void 0:h.name})]}),a.jsxs("div",{className:"flex customtext-neutral-light items-center gap-8 text-sm mb-6",children:[a.jsxs("span",{className:"customtext-neutral-light text-sm",children:["SKU:  ",a.jsx("span",{className:"customtext-neutral-dark",children:null==h?void 0:h.sku})]}),a.jsxs("span",{className:"ustomtext-neutral-light text-sm",children:["Disponibilidad:"," ",a.jsx("span",{className:"customtext-neutral-dark",children:(null==h?void 0:h.stock)>0?"En stock":"Agotado"})]})]}),a.jsxs("div",{className:"flex gap-8 border-b-2 pb-8",children:[a.jsx("div",{className:"flex-1 w-6/12 ",children:a.jsxs("div",{className:"bg-[#F7F9FB] rounded-lg p-6",children:[a.jsx("h3",{className:"font-medium text-sm mb-4",children:"Especificaciones principales"}),a.jsx("ul",{className:"space-y-2  customtext-neutral-light mb-4 transition-all duration-300 "+($?"max-h-full":"max-h-24 overflow-hidden"),style:{listStyleType:"disc"},children:null==h?void 0:h.specifications.map(((e,s)=>"principal"===e.type&&a.jsxs("li",{className:"flex gap-2",children:[a.jsx(d,{className:"customtext-primary"}),e.description]},s)))}),a.jsxs("button",{className:"customtext-primary text-sm font-semibold hover:underline flex items-center gap-1 transition-all duration-300",onClick:()=>q(!$),children:[$?"Ver menos":"Ver más especificaciones",$?a.jsx(o,{className:"w-4 h-4"}):a.jsx(x,{className:"w-4 h-4"})]})]})}),a.jsxs("div",{className:" w-6/12 ",children:[a.jsxs("p",{className:"text-sm customtext-neutral-light mb-1",children:["Precio:"," ",a.jsxs("span",{className:"line-through",children:["S/ ",null==h?void 0:h.price]})]}),a.jsxs("div",{className:"flex items-center gap-4 ",children:[a.jsxs("span",{className:"text-[40px] font-bold",children:["S/ ",null==h?void 0:h.final_price]}),a.jsxs("span",{className:"bg-[#F93232] text-white font-bold px-3 py-2 rounded-xl",children:["-",Number(null==h?void 0:h.discount_percent).toFixed(1),"%"]})]}),a.jsx("div",{className:"mt-4",children:a.jsx("div",{className:"flex items-center gap-4 mb-2",children:a.jsxs("div",{className:"flex items-center space-x-4 customtext-neutral-light text-sm",children:[a.jsx("span",{className:"",children:"Cantidad"}),a.jsx("div",{className:"relative flex items-center border rounded-md px-2 py-1",children:a.jsx("input",{type:"number",value:w,onChange:e=>{let s=parseInt(e.target.value,10);(isNaN(s)||s<1)&&(s=1),s>10&&(s=10),k(s)},min:"1",max:"10",className:"w-10 py-1 customtext-neutral-dark text-center bg-transparent outline-none appearance-none"})}),a.jsx("span",{className:"",children:"Máximo 10 unidades."})]})})}),a.jsx("button",{onClick:()=>(e=>{const s=structuredClone(g),a=s.findIndex((s=>s.id==e.id));-1==a?s.push({...e,quantity:w}):s[a].quantity++,j(s),l.fire({title:"Producto agregado",text:`Se agregó ${e.name} al carrito`,icon:"success",timer:1500})})(h),className:"w-full bg-primary text-white py-3 font-bold shadow-lg rounded-xl hover:opacity-90 transition-all duration-300 mt-4",children:"Agregar al carrito"})]})]}),a.jsxs("div",{className:"mt-8 ",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[a.jsx(u,{className:"w-6 h-6 customtext-primary"}),a.jsx("h2",{className:"text-base font-semibold",children:"Completa tu compra con estos productos"})]}),a.jsxs("div",{className:" flex gap-4",children:[a.jsx("div",{className:"w-2/3 flex gap-2",children:C.map(((e,s)=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("img",{src:`/storage/images/item/${e.image}`,className:" rounded-lg aspect-square w-24 h-24 object-cover bg-[#F7F9FB]"}),s<C.length-1&&a.jsx("span",{className:"text-2xl font-bold",children:a.jsx(p,{})})]},s)))}),a.jsxs("div",{className:" w-1/3 flex flex-col justify-between items-end bg-gray-50 p-4 rounded-lg mt-4",children:[a.jsx("span",{className:"text-xs font-semibold customtext-neutral-light",children:"Total"}),a.jsxs("p",{className:"font-bold mb-2 customtext-neutral-dark",children:["S/ ",B.toFixed(2)]}),a.jsx("button",{onClick:()=>(j((e=>{const s=structuredClone(e);return[...C,h].forEach((e=>{const a=s.findIndex((s=>s.id===e.id));-1===a?s.push({...e,quantity:w}):s[a].quantity++})),s})),void t.Notify.add({icon:"/assets/img/icon.svg",title:"Carrito de Compras",body:"Se agregaron con éxito los productos"})),className:"bg-primary text-xs font-semibold text-white w-full py-3 rounded-xl hover:opacity-90 transition-all duration-300 hover:shadow-md",children:"Agregar al carrito"})]})]}),C.map(((e,s)=>a.jsxs("div",{className:"flex mt-4 gap-4 p-4 border rounded-lg items-center",children:[a.jsx(c,{className:"w-5 h-5 customtext-primary"}),a.jsxs("div",{className:"flex-1 font-semibold",children:[a.jsx("span",{className:"text-[10px] customtext-neutral-dark block",children:e.brand.name}),a.jsx("p",{className:"text-sm customtext-neutral-light font-medium",children:e.name})]}),a.jsxs("p",{className:"font-bold customtext-neutral-dark",children:["S/"," ",parseFloat(e.final_price).toFixed(2)]})]},s)))]})]})]})}),a.jsxs("div",{className:" grid gap-20 md:grid-cols-2 bg-white rounded-xl p-8 mt-12",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold customtext-neutral-dark mb-4 border-b pb-4",children:"Especificaciones"}),a.jsx("div",{className:"space-y-1",children:null==h?void 0:h.specifications.map(((e,s)=>"general"===e.type&&a.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 "+(s%2==0?"bg-[#F7F9FB]":"bg-white"),children:[a.jsx("div",{className:"customtext-neutral-light",children:e.title}),a.jsx("div",{className:"customtext-neutral-dark",children:e.description})]},s)))})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold customtext-neutral-dark mb-4 border-b pb-4",children:"Información adicional"}),a.jsxs("div",{className:"space-y-2 "+(F?"":"max-h-[400px] overflow-hidden"),children:[a.jsx("h3",{className:"text-xl font-semibold customtext-neutral-dark mb-4",children:"Acerca de este artículo"}),a.jsx("div",{className:"customtext-neutral-dark",dangerouslySetInnerHTML:{__html:null==h?void 0:h.description}}),a.jsx("div",{className:"pl-10",children:a.jsx("ul",{className:"list-disc pl-5 space-y-2",children:null==h?void 0:h.features.map(((e,s)=>a.jsx("li",{className:"customtext-neutral-dark",children:e.feature},s)))})})]}),a.jsxs("botton",{variant:"ghost",className:"border-2 border-primary  w-max px-5 py-3  my-8  rounded-xl flex items-center gap-2 customtext-primary font-semibold cursor-pointer",onClick:()=>S(!F),children:["Ver más",a.jsx(x,{className:"transform transition-transform "+(F?"rotate-180":"")})]})]})]})]})}export{h as default};
