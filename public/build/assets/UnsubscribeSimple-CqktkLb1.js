import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as t}from"./index-BOnQTV8N.js";import{G as f}from"./Global-Bz6gVLc5.js";import{m}from"./main-B6F2O9-U.js";import{S as g}from"./CartKuchara-D9l7c7at.js";import{t as a}from"./CardProductKatya-ncpmQ0JU.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./index-pSueRYGM.js";import"./index-B6ujFmsw.js";function T(){const[r,o]=t.useState(!1),[i,d]=t.useState(""),[u,x]=t.useState(!1),n=new URLSearchParams(window.location.search).get("token");t.useEffect(()=>{m.GET.message&&g.fire({icon:"info",title:"Mensaje",text:m.GET.message,showConfirmButton:!1,timer:3e3})},[]);const p=async s=>{var l;if(s.preventDefault(),!n){a.error("Token inválido",{description:"El enlace de desuscripción no es válido",duration:4e3,position:"top-right"});return}o(!0);try{const c=await(await fetch("/api/unsubscribe",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":(l=document.querySelector('meta[name="csrf-token"]'))==null?void 0:l.getAttribute("content")},body:JSON.stringify({token:n,reason:i})})).json();if(o(!1),!c.success){a.error("Error",{description:c.message||"No se pudo procesar la desuscripción",duration:4e3,position:"top-right"});return}x(!0),a.success("¡Desuscripción exitosa!",{description:"Lamentamos verte partir. Ya no recibirás más correos de nuestra parte.",duration:4e3,position:"top-right"}),setTimeout(()=>{window.location.href="/"},3e3)}catch{o(!1),a.error("Error",{description:"Ocurrió un error al procesar tu solicitud",duration:4e3,position:"top-right"})}};return u?e.jsx("div",{className:"py-8 lg:py-0 lg:min-h-screen flex items-center justify-center bg-[#F7F9FB] px-primary 2xl:px-0",children:e.jsx("div",{className:"2xl:max-w-7xl w-full mx-auto",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"mb-6",children:e.jsx("svg",{className:"w-24 h-24 mx-auto text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),e.jsx("h1",{className:"text-3xl font-bold customtext-neutral-dark mb-4",children:"¡Desuscripción exitosa!"}),e.jsx("p",{className:"customtext-neutral-light mb-6",children:"Lamentamos verte partir. Ya no recibirás más correos de nuestra parte."}),e.jsx("a",{href:"/",className:"inline-block bg-primary text-white px-6 py-3 rounded-xl font-semibold hover:opacity-90 transition-all",children:"Volver al inicio"})]})})})}):e.jsx("div",{className:"py-8 lg:py-0 lg:min-h-screen flex items-center justify-center bg-sections-color px-primary 2xl:px-0",children:e.jsx("div",{className:"2xl:max-w-7xl w-full mx-auto",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:min-h-[600px]",children:[e.jsxs("div",{className:"hidden lg:block lg:w-1/2 relative",children:[e.jsx("img",{src:`/assets/resources/unsubscribe.png?v=${crypto.randomUUID()}`,alt:f.APP_NAME,className:"absolute inset-0 w-full h-full object-cover",onError:s=>{s.target.onerror=null,s.target.src="/assets/img/logo-bk.svg"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/30 to-transparent"})]}),e.jsx("div",{className:"w-full lg:w-1/2 px-6 py-12 sm:px-12 lg:px-16",children:e.jsxs("div",{className:"max-w-md mx-auto h-full flex flex-col justify-center",children:[e.jsxs("div",{className:"space-y-2 mb-6",children:[e.jsx("h5",{className:"text-primary font-medium",children:"Desuscribirse"}),e.jsx("h1",{className:"text-3xl font-bold text-neutral-dark",children:"¿Quieres dejar de recibir nuestros correos?"}),e.jsx("p",{className:"text-neutral-light",children:"Lamentamos verte partir. Si confirmas, ya no recibirás más correos de nuestra parte."})]}),e.jsxs("form",{className:"space-y-4",onSubmit:p,children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm mb-1 customtext-neutral-dark",htmlFor:"reason",children:"¿Nos cuentas por qué? (Opcional)"}),e.jsx("textarea",{id:"reason",name:"reason",rows:"4",placeholder:"Tus comentarios nos ayudan a mejorar...",className:"w-full px-4 py-3 border customtext-neutral-dark border-neutral-ligth rounded-xl focus:ring-0 focus:outline-0 transition-all duration-300",value:i,onChange:s=>d(s.target.value),disabled:r,maxLength:"500"}),e.jsxs("small",{className:"text-neutral-light text-xs",children:[i.length,"/500 caracteres"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{disabled:r,type:"submit",className:"flex-1 rounded-xl font-semibold bg-danger px-4 py-4 text-white hover:bg-opacity-60 hover:scale-105  focus:outline-none focus:ring-2 transition-all duration-300 flex items-center justify-center",children:[r?e.jsxs("svg",{className:"animate-spin h-5 w-5 mr-2 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}):null,r?"Procesando...":"Confirmar"]}),e.jsx("a",{href:"/",className:"flex-1 rounded-xl font-semibold bg-gray-200 px-4 py-3 text-gray-800 hover:bg-gray-300 focus:outline-none transition-all duration-300 flex items-center justify-center text-center",children:"Cancelar"})]})]})]})})]})})})})}export{T as default};
